!function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var n={};t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="/",t(t.s=294)}([function(e,t,n){"use strict";(function(t){function r(e,t){if(e===t)return 0;for(var n=e.length,r=t.length,i=0,o=Math.min(n,r);i<o;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:r<n?1:0}function i(e){return t.Buffer&&"function"===typeof t.Buffer.isBuffer?t.Buffer.isBuffer(e):!(null==e||!e._isBuffer)}function o(e){return Object.prototype.toString.call(e)}function a(e){return!i(e)&&("function"===typeof t.ArrayBuffer&&("function"===typeof ArrayBuffer.isView?ArrayBuffer.isView(e):!!e&&(e instanceof DataView||!!(e.buffer&&e.buffer instanceof ArrayBuffer))))}function s(e){if(b.isFunction(e)){if(w)return e.name;var t=e.toString(),n=t.match(S);return n&&n[1]}}function u(e,t){return"string"===typeof e?e.length<t?e:e.slice(0,t):e}function l(e){if(w||!b.isFunction(e))return b.inspect(e);var t=s(e);return"[Function"+(t?": "+t:"")+"]"}function c(e){return u(l(e.actual),128)+" "+e.operator+" "+u(l(e.expected),128)}function f(e,t,n,r,i){throw new T.AssertionError({message:n,actual:e,expected:t,operator:r,stackStartFunction:i})}function h(e,t){e||f(e,!0,t,"==",T.ok)}function p(e,t,n,s){if(e===t)return!0;if(i(e)&&i(t))return 0===r(e,t);if(b.isDate(e)&&b.isDate(t))return e.getTime()===t.getTime();if(b.isRegExp(e)&&b.isRegExp(t))return e.source===t.source&&e.global===t.global&&e.multiline===t.multiline&&e.lastIndex===t.lastIndex&&e.ignoreCase===t.ignoreCase;if(null!==e&&"object"===typeof e||null!==t&&"object"===typeof t){if(a(e)&&a(t)&&o(e)===o(t)&&!(e instanceof Float32Array||e instanceof Float64Array))return 0===r(new Uint8Array(e.buffer),new Uint8Array(t.buffer));if(i(e)!==i(t))return!1;s=s||{actual:[],expected:[]};var u=s.actual.indexOf(e);return-1!==u&&u===s.expected.indexOf(t)||(s.actual.push(e),s.expected.push(t),v(e,t,n,s))}return n?e===t:e==t}function d(e){return"[object Arguments]"==Object.prototype.toString.call(e)}function v(e,t,n,r){if(null===e||void 0===e||null===t||void 0===t)return!1;if(b.isPrimitive(e)||b.isPrimitive(t))return e===t;if(n&&Object.getPrototypeOf(e)!==Object.getPrototypeOf(t))return!1;var i=d(e),o=d(t);if(i&&!o||!i&&o)return!1;if(i)return e=x.call(e),t=x.call(t),p(e,t,n);var a,s,u=A(e),l=A(t);if(u.length!==l.length)return!1;for(u.sort(),l.sort(),s=u.length-1;s>=0;s--)if(u[s]!==l[s])return!1;for(s=u.length-1;s>=0;s--)if(a=u[s],!p(e[a],t[a],n,r))return!1;return!0}function g(e,t,n){p(e,t,!0)&&f(e,t,n,"notDeepStrictEqual",g)}function y(e,t){if(!e||!t)return!1;if("[object RegExp]"==Object.prototype.toString.call(t))return t.test(e);try{if(e instanceof t)return!0}catch(e){}return!Error.isPrototypeOf(t)&&!0===t.call({},e)}function m(e){var t;try{e()}catch(e){t=e}return t}function _(e,t,n,r){var i;if("function"!==typeof t)throw new TypeError('"block" argument must be a function');"string"===typeof n&&(r=n,n=null),i=m(t),r=(n&&n.name?" ("+n.name+").":".")+(r?" "+r:"."),e&&!i&&f(i,n,"Missing expected exception"+r);var o="string"===typeof r,a=!e&&b.isError(i),s=!e&&i&&!n;if((a&&o&&y(i,n)||s)&&f(i,n,"Got unwanted exception"+r),e&&i&&n&&!y(i,n)||!e&&i)throw i}var b=n(366),E=Object.prototype.hasOwnProperty,x=Array.prototype.slice,w=function(){return"foo"===function(){}.name}(),T=e.exports=h,S=/\s*function\s+([^\(\s]*)\s*/;T.AssertionError=function(e){this.name="AssertionError",this.actual=e.actual,this.expected=e.expected,this.operator=e.operator,e.message?(this.message=e.message,this.generatedMessage=!1):(this.message=c(this),this.generatedMessage=!0);var t=e.stackStartFunction||f;if(Error.captureStackTrace)Error.captureStackTrace(this,t);else{var n=new Error;if(n.stack){var r=n.stack,i=s(t),o=r.indexOf("\n"+i);if(o>=0){var a=r.indexOf("\n",o+1);r=r.substring(a+1)}this.stack=r}}},b.inherits(T.AssertionError,Error),T.fail=f,T.ok=h,T.equal=function(e,t,n){e!=t&&f(e,t,n,"==",T.equal)},T.notEqual=function(e,t,n){e==t&&f(e,t,n,"!=",T.notEqual)},T.deepEqual=function(e,t,n){p(e,t,!1)||f(e,t,n,"deepEqual",T.deepEqual)},T.deepStrictEqual=function(e,t,n){p(e,t,!0)||f(e,t,n,"deepStrictEqual",T.deepStrictEqual)},T.notDeepEqual=function(e,t,n){p(e,t,!1)&&f(e,t,n,"notDeepEqual",T.notDeepEqual)},T.notDeepStrictEqual=g,T.strictEqual=function(e,t,n){e!==t&&f(e,t,n,"===",T.strictEqual)},T.notStrictEqual=function(e,t,n){e===t&&f(e,t,n,"!==",T.notStrictEqual)},T.throws=function(e,t,n){_(!0,e,t,n)},T.doesNotThrow=function(e,t,n){_(!1,e,t,n)},T.ifError=function(e){if(e)throw e};var A=Object.keys||function(e){var t=[];for(var n in e)E.call(e,n)&&t.push(n);return t}}).call(t,n(18))},function(e,t,n){"use strict";function r(e){return Boolean(e&&(e instanceof f.d||e.ARRAY_BUFFER===b))}function i(e){return Boolean(e&&(e instanceof f.b||e.TEXTURE_BINDING_3D===E))}function o(e){_()(r(e),x)}function a(e){_()(i(e),T)}function s(){function e(e){if(a)throw new Error(e);return null}var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t=Object.assign({},O,t);var n=t,r=n.canvas,i=n.width,o=n.height,a=n.throwOnError,s=n.manageState,u=n.debug,f=void 0;if(g.c){var v=void 0;v=r?"string"===typeof r?Object(p.c)({id:r}):r:Object(p.a)({id:"lumagl-canvas",width:i,height:o,onError:e}),f=Object(p.b)({canvas:v,opts:t})}else f=c({width:i,height:o,opts:t,onError:e});return f?(s&&Object(h.a)(f,{copyState:!1,log:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return g.e.log.apply(g.e,[1].concat(t))}}),g.c&&u&&(f=Object(d.a)(f,{debug:u}),g.e.priority=Math.max(g.e.priority,1)),l(f),f):null}function u(e){}function l(e){var t=i(e)?"WebGL2":"WebGL1",n=Object(v.b)(e),r=n?"("+n.vendor+","+n.renderer+")":"",o=e.debug?" debug":"";g.e.once(0,""+t+o+" context "+r)}function c(e){var t=e.width,n=e.height,r=e.opts,i=e.onError,o=r.webgl1;if(r.webgl2&&!o)return i("headless-gl does not support WebGL2");if(!f.f)return i(S);if(!y.default.globals.headlessGL)return i(A);var a=y.default.globals.headlessGL(t,n,r);return a||i(C)}n.d(t,"a",function(){return w}),n.d(t,"b",function(){return T}),t.g=r,t.h=i,t.d=o,t.c=a,t.e=s,t.f=u;var f=n(20),h=n(137),p=n(35),d=n(239),v=n(142),g=(n(138),n(2)),y=n(85),m=n(0),_=n.n(m),b=34962,E=32874,x="Invalid WebGLRenderingContext",w=x,T="Requires WebGL2",S="WebGL API is missing. To run luma.gl under Node.js, please \"npm install gl\"\nand import 'luma.gl/headless' before importing 'luma.gl'.",A="Cannot create headless WebGL context, headlessGL not available",C="headlessGL failed to create headless WebGL context",O={webgl2:!0,webgl1:!0,throwOnFailure:!0,manageState:!0,canvas:null,debug:!1,width:800,height:600}},function(e,t,n){"use strict";var r=n(233);n.d(t,"c",function(){return r.a});var i=(n(411),n(412));n.d(t,"d",function(){return i.a}),n.d(t,"g",function(){return i.b});var o=n(135);n.d(t,"b",function(){return o.b});var a=n(136);n.d(t,"a",function(){return a.a}),n.d(t,"f",function(){return a.d}),n.d(t,"e",function(){return o.a})},function(e,t,n){"use strict";n.d(t,"d",function(){return R});var r=(n(407),n(232),n(64));n.d(t,"a",function(){return r.a});var i=(n(266),n(267),n(145));n.d(t,"c",function(){return i.a});var o=n(467);n.d(t,"b",function(){return o.a});var a=(n(29),n(65),n(468),n(469),n(94),n(264),n(265),n(470)),s=n(274),u=n(97),l=n(147),c=n(275),f=n(471),h=n(472),p=n(96),d=n(473),v=n(277),g=n(278),y=n(276),m=n(148),_=n(279),b=n(280),E=n(474),x=n(98),w=n(12),T=n(475),S=n(270),A=n(476),C=n(477),O=n(282),k=n(146),P=n(283),R={ViewportControls:l.a,FirstPersonState:a.a,OrbitState:s.a,MapState:u.b,Controller:l.a,MapController:c.a,FirstPersonViewport:f.a,ThirdPersonViewport:h.a,OrbitViewport:p.a,DeckGLJS:d.a,MapControllerJS:v.a,OrbitControllerJS:g.a,EffectManager:y.a,Effect:m.a,TRANSITION_EVENTS:_.a,LinearInterpolator:b.a,ViewportFlyToInterpolator:E.a,TransitionManager:_.b,extractViewportFrom:x.a,BinSorter:A.a,linearScale:O.d,getLinearScale:O.b,quantizeScale:O.e,getQuantizeScale:O.c,clamp:O.a,defaultColorRange:C.a,log:w.a,get:T.a,count:S.a,flatten:k.c,countVertices:k.a,flattenVertices:k.d,fillArray:k.b,enable64bitSupport:P.a,fp64ify:P.c,fp64LowPart:P.b}},function(e,t,n){"use strict";var r=n(13);n.d(t,"e",function(){return r.b});var i=(n(35),n(1));n.d(t,"j",function(){return i.e});var o=n(63);n.d(t,"q",function(){return o.b}),n.d(t,"r",function(){return o.c});var a=(n(142),n(86),n(239),n(240),n(51),n(90),n(89),n(52));n.d(t,"d",function(){return a.a});var s=(n(88),n(139));n.d(t,"i",function(){return s.a});var u=(n(244),n(245),n(87)),l=(n(241),n(246),n(243),n(417),n(418),n(242),n(140),n(419),n(91));n.d(t,"g",function(){return l.a});var c=n(255);n.d(t,"a",function(){return c.b});var f=(n(433),n(435),n(436),n(28));n.d(t,"f",function(){return f.a});var h=(n(256),n(257));n.d(t,"b",function(){return h.a});var p=n(258);n.d(t,"c",function(){return p.a});var d=(n(259),n(260),n(261),n(93),n(438),n(439),n(440),n(441),n(442),n(443),n(444),n(445),n(446));n.n(d);n.o(d,"loadTextures")&&n.d(t,"m",function(){return d.loadTextures});var v=n(254);n.d(t,"h",function(){return v.a});var g=(n(253),n(143));n.d(t,"o",function(){return g.b}),n.d(t,"p",function(){return g.d});var y=n(449);n.d(t,"k",function(){return y.a});var m=n(450);n.d(t,"l",function(){return m.a});var _=(n(263),n(454),n(458),n(459));n.d(t,"n",function(){return _.a});n(460),n(53),n(247);n(85);u.b},function(e,t,n){"use strict";e.exports=n(301)},function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},function(e,t,n){"use strict";t.__esModule=!0;var r=n(338),i=function(e){return e&&e.__esModule?e:{default:e}}(r);t.default=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),(0,i.default)(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()},function(e,t){var n=e.exports={version:"2.5.3"};"number"==typeof __e&&(__e=n)},function(e,t,n){e.exports={default:n(348),__esModule:!0}},function(e,t,n){e.exports=n(351)()},function(e,t,n){e.exports={default:n(314),__esModule:!0}},function(e,t,n){"use strict";function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function i(e,t){for(var n=arguments.length,o=Array(n>2?n-2:0),a=2;a<n;a++)o[a-2]=arguments[a];if(y()(Number.isFinite(e),"log priority must be a number"),e<=i.priority)if(o=d.apply(void 0,[t].concat(r(o))),console.debug){var s;(s=console).debug.apply(s,r(o))}else{var u;(u=console).info.apply(u,r(o))}}function o(e,t){for(var n=arguments.length,o=Array(n>2?n-2:0),a=2;a<n;a++)o[a-2]=arguments[a];if(!_[t]&&e<=i.priority){var s;o=v(o),(s=console).error.apply(s,r(d.apply(void 0,[t].concat(r(o))))),_[t]=!0}}function a(e){if(!_[e]){for(var t,n=arguments.length,r=Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];(t=console).warn.apply(t,["deck.gl: "+e].concat(r)),_[e]=!0}}function s(e){for(var t,n=arguments.length,r=Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];(t=console).error.apply(t,["deck.gl: "+e].concat(r))}function u(e,t){i.warn("`"+e+"` is deprecated and will be removed in a later version. Use `"+t+"` instead")}function l(e,t){i.error("`"+e+"` is no longer supported. Use `"+t+"` instead, check our upgrade-guide.md for more details")}function c(e,t){y()(Number.isFinite(e),"log priority must be a number"),e<=i.priority&&(console.time?console.time(t):console.info(t))}function f(e,t){y()(Number.isFinite(e),"log priority must be a number"),e<=i.priority&&(console.timeEnd?console.timeEnd(t):console.info(t))}function h(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.collapsed,o=void 0!==r&&r;e<=i.priority&&(o?console.groupCollapsed("luma.gl: "+t):console.group("luma.gl: "+t))}function p(e,t){e<=i.priority&&console.groupEnd("luma.gl: "+t)}function d(e){"function"===typeof e&&(e=e());for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return"string"===typeof e?n.unshift("deck.gl "+e):(n.unshift(e),n.unshift("deck.gl")),n}function v(e){return e&&e.length>0&&"object"===m(e[0])&&null!==e[0]&&"AssertionError"===e[0].name&&(e=Array.prototype.slice.call(e),e.unshift("assert("+e[0].message+")")),e}var g=n(0),y=n.n(g),m="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_={};i.priority=0,i.log=i,i.once=o,i.time=c,i.timeEnd=f,i.warn=a,i.error=s,i.deprecated=u,i.removed=l,i.group=h,i.groupEnd=p,t.a=i},function(e,t,n){"use strict";function r(e){return Object(a.c)(o.a,e)}function i(e){return Object(a.a)(o.a,e)}t.c=r,t.d=i;var o=n(27),a=n(409);n.d(t,"a",function(){return o.a}),t.b=o.a},function(e,t,n){"use strict";t.__esModule=!0;var r=n(70),i=function(e){return e&&e.__esModule?e:{default:e}}(r);t.default=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==("undefined"===typeof t?"undefined":(0,i.default)(t))&&"function"!==typeof t?e:t}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var i=n(341),o=r(i),a=n(345),s=r(a),u=n(70),l=r(u);t.default=function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+("undefined"===typeof t?"undefined":(0,l.default)(t)));e.prototype=(0,s.default)(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(o.default?(0,o.default)(e,t):e.__proto__=t)}},function(e,t,n){"use strict";function r(e){"epsilon"in e&&(b.EPSILON=e.epsilon),"debug"in e&&(b.debug=e.debug)}function i(e){if(!Number.isFinite(e))throw new Error("Invalid number "+e);return e}function o(e){return Math.round(e/b.EPSILON)*b.EPSILON}function a(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.precision,r=void 0===n?b.precision||4:n;return e=o(e),parseFloat(e.toPrecision(r))}function s(e){return Array.isArray(e)||ArrayBuffer.isView(e)&&void 0!==e.length}function u(e){return e.clone?e.clone():new Array(e)}function l(e,t){if(s(e)){for(var n=u(e),r=0;r<n.length;++r)n[r]=t(n[r],r,n);return n}return t(e)}function c(e){return l(e,function(e){return e/180*Math.PI})}function f(e){return l(e,function(e){return 180*e/Math.PI})}function h(e){return l(e,function(e){return Math.sin(e)})}function p(e){return l(e,function(e){return Math.cos(e)})}function d(e){return l(e,function(e){return Math.tan(e)})}function v(e){return l(e,function(e){return Math.asin(e)})}function g(e){return l(e,function(e){return Math.acos(e)})}function y(e){return l(e,function(e){return Math.atan(e)})}function m(e,t,n){return l(e,function(e){return Math.max(t,Math.min(n,e))})}function _(e,t){if(Array.isArray(e)&&Array.isArray(t)){if(e===t)return!0;if(e.length!==t.length)return!1;for(var n=0;n<e.length;++n)if(!_(e[n],t[n]))return!1;return!0}return Math.abs(e-t)<=b.EPSILON*Math.max(1,Math.abs(e),Math.abs(t))}n.d(t,"g",function(){return b}),t.h=r,t.d=i,t.l=a,t.m=s,t.f=u,t.n=c,t.j=f,t.o=h,t.i=p,t.p=d,t.b=v,t.a=g,t.c=y,t.e=m,t.k=_;var b={};b.EPSILON=1e-12,b.debug=!0,b.precision=4,b.printTypes=!1,b.printDegrees=!1,b.printRowMajor=!0},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=n(85),o=n(1),a=n(13),s=n(2),u=n(0),l=n.n(u),c=n(35),f=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),h="Resource subclass must define virtual methods",p=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};r(this,e),Object(o.d)(t);var i=n.id,a=n.userData,u=void 0===a?{}:a;this.gl=t,this.ext=Object(c.g)(t),this.id=i||Object(s.g)(this.constructor.name),this.userData=u,this.opts=n,this._handle=n.handle,void 0===this._handle&&(this._handle=this._createHandle()),this._addStats()}return f(e,[{key:"toString",value:function(){return this.constructor.name+"("+this.id+")"}},{key:"delete",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.deleteChildren,n=void 0!==t&&t,r=this._handle&&this._deleteHandle(this._handle);return this._handle=null,r&&n&&r.filter(Boolean).forEach(function(e){e.delete()}),this}},{key:"unbind",value:function(){this.bind(null)}},{key:"getParameter",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e=Object(a.c)(e),l()(e);var n=this.constructor.PARAMETERS||{},r=n[e];if(r){var i=Object(o.h)(this.gl);if(!((!("webgl2"in r)||i)&&(!("extension"in r)||this.gl.getExtension(r.extension)))){var s=r.webgl1,u="webgl2"in r?r.webgl2:r.webgl1;return i?u:s}}return this._getParameter(e,t)}},{key:"getParameters",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={},n=t.parameters,r=t.keys,i=this.constructor.PARAMETERS||{},s=Object(o.h)(this.gl),u={},l=n||Object.keys(i),c=!0,f=!1,h=void 0;try{for(var p,d=l[Symbol.iterator]();!(c=(p=d.next()).done);c=!0){var v=p.value,g=i[v];if(g&&(!("webgl2"in g)||s)&&(!("extension"in g)||this.gl.getExtension(g.extension))){var y=r?Object(a.d)(v):v;u[y]=this.getParameter(v,e),r&&"GLenum"===g.type&&(u[y]=Object(a.d)(u[y]))}}}catch(e){f=!0,h=e}finally{try{!c&&d.return&&d.return()}finally{if(f)throw h}}return u}},{key:"setParameter",value:function(e,t){e=Object(a.c)(e),l()(e);var n=this.constructor.PARAMETERS||{},r=n[e];if(r){var i=Object(o.h)(this.gl);if(!((!("webgl2"in r)||i)&&(!("extension"in r)||this.gl.getExtension(r.extension))))throw new Error("Parameter not available on this platform");"GLenum"===r.type&&(t=Object(a.c)(t))}return this._setParameter(e,t),this}},{key:"setParameters",value:function(e){for(var t in e)this.setParameter(t,e[t]);return this}},{key:"initialize",value:function(e){}},{key:"_createHandle",value:function(){throw new Error(h)}},{key:"_deleteHandle",value:function(){throw new Error(h)}},{key:"_getOptsFromHandle",value:function(){throw new Error(h)}},{key:"_getParameter",value:function(e,t){throw new Error(h)}},{key:"_setParameter",value:function(e,t){throw new Error(h)}},{key:"_context",value:function(){return this.gl.luma=this.gl.luma||{},this.gl.luma}},{key:"_addStats",value:function(){var e=this.constructor.name,t=i.default.stats;t.resourceCount=t.resourceCount||0,t.resourceMap=t.resourceMap||{},t.resourceCount++,t.resourceMap[e]=t.resourceMap[e]||{count:0},t.resourceMap[e].count++}},{key:"handle",get:function(){return this._handle}}]),e}();t.a=p},function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"===typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"experimental",function(){return f});var r=n(171);n.d(t,"Vector2",function(){return r.a});var i=n(75);n.d(t,"Vector3",function(){return i.a});var o=n(192);n.d(t,"Vector4",function(){return o.a});var a=n(199);n.d(t,"Matrix4",function(){return a.a});var s=n(206);n.d(t,"Quaternion",function(){return s.a});var u=n(16);n.d(t,"config",function(){return u.g}),n.d(t,"checkNumber",function(){return u.d}),n.d(t,"configure",function(){return u.h}),n.d(t,"formatValue",function(){return u.l}),n.d(t,"isArray",function(){return u.m}),n.d(t,"clone",function(){return u.f}),n.d(t,"radians",function(){return u.n}),n.d(t,"degrees",function(){return u.j}),n.d(t,"sin",function(){return u.o}),n.d(t,"cos",function(){return u.i}),n.d(t,"tan",function(){return u.p}),n.d(t,"asin",function(){return u.b}),n.d(t,"acos",function(){return u.a}),n.d(t,"atan",function(){return u.c}),n.d(t,"clamp",function(){return u.e}),n.d(t,"equals",function(){return u.k});var l=n(372),c=n(373),f={Euler:l.a,SphericalCoordinates:c.a}},function(e,t,n){"use strict";var r=n(238);n.d(t,"d",function(){return r.h}),n.d(t,"c",function(){return r.d}),n.d(t,"b",function(){return r.b}),n.d(t,"f",function(){return r.m});var i=(n(35),n(27));n.d(t,"a",function(){return i.a}),t.e=i.a},function(e,t,n){"use strict";function r(e){if(!Number.isFinite(e))throw new Error("Invalid number "+e);return e}function i(e){return Math.round(e/p.EPSILON)*p.EPSILON}function o(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.precision,r=void 0===n?p.precision||4:n;return e=i(e),parseFloat(e.toPrecision(r))}function a(e){return Array.isArray(e)||ArrayBuffer.isView(e)&&void 0!==e.length}function s(e){return e.clone?e.clone():new Array(e)}function u(e,t){if(a(e)){for(var n=s(e),r=0;r<n.length;++r)n[r]=t(n[r],r,n);return n}return t(e)}function l(e){return u(e,function(e){return e/180*Math.PI})}function c(e){return u(e,function(e){return 180*e/Math.PI})}function f(e,t,n){return u(e,function(e){return Math.max(t,Math.min(n,e))})}function h(e,t){if(Array.isArray(e)&&Array.isArray(t)){if(e===t)return!0;if(e.length!==t.length)return!1;for(var n=0;n<e.length;++n)if(!h(e[n],t[n]))return!1;return!0}return Math.abs(e-t)<=p.EPSILON*Math.max(1,Math.abs(e),Math.abs(t))}n.d(t,"c",function(){return p}),t.a=r,t.f=o,t.g=l,t.d=c,t.b=f,t.e=h;var p={};p.EPSILON=1e-12,p.debug=!0,p.precision=4,p.printTypes=!1,p.printDegrees=!1,p.printRowMajor=!0},function(e,t){var n=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(e,t,n){var r=n(22),i=n(8),o=n(158),a=n(39),s=function(e,t,n){var u,l,c,f=e&s.F,h=e&s.G,p=e&s.S,d=e&s.P,v=e&s.B,g=e&s.W,y=h?i:i[t]||(i[t]={}),m=y.prototype,_=h?r:p?r[t]:(r[t]||{}).prototype;h&&(n=t);for(u in n)(l=!f&&_&&void 0!==_[u])&&u in y||(c=l?_[u]:n[u],y[u]=h&&"function"!=typeof _[u]?n[u]:v&&l?o(c,r):g&&_[u]==c?function(e){var t=function(t,n,r){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,n)}return new e(t,n,r)}return e.apply(this,arguments)};return t.prototype=e.prototype,t}(c):d&&"function"==typeof c?o(Function.call,c):c,d&&((y.virtual||(y.virtual={}))[u]=c,e&s.R&&m&&!m[u]&&a(m,u,c)))};s.F=1,s.G=2,s.S=4,s.P=8,s.B=16,s.W=32,s.U=64,s.R=128,e.exports=s},function(e,t,n){var r=n(103)("wks"),i=n(68),o=n(22).Symbol,a="function"==typeof o;(e.exports=function(e){return r[e]||(r[e]=a&&o[e]||(a?o:i)("Symbol."+e))}).store=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(58);n.d(t,"default",function(){return r.a}),n.d(t,"WebMercatorViewport",function(){return r.a});var i=n(225);n.d(t,"fitBounds",function(){return i.a});var o=n(374);n.d(t,"normalizeViewportProps",function(){return o.a});var a=n(375);n.d(t,"flyToViewport",function(){return a.a});var s=n(61);n.d(t,"lngLatToWorld",function(){return s.f}),n.d(t,"worldToLngLat",function(){return s.i}),n.d(t,"worldToPixels",function(){return s.j}),n.d(t,"pixelsToWorld",function(){return s.g}),n.d(t,"getMeterZoom",function(){return s.b}),n.d(t,"getDistanceScales",function(){return s.a}),n.d(t,"getWorldPosition",function(){return s.e}),n.d(t,"getViewMatrix",function(){return s.d}),n.d(t,"getProjectionMatrix",function(){return s.c}),n.d(t,"PerspectiveMercatorViewport",function(){return r.a}),n.d(t,"getUncenteredViewMatrix",function(){return s.d}),n.d(t,"projectFlat",function(){return s.f}),n.d(t,"unprojectFlat",function(){return s.i})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(28);n.d(t,"Geometry",function(){return r.a});var i=n(256);n.d(t,"ConeGeometry",function(){return i.a});var o=n(257);n.d(t,"CubeGeometry",function(){return o.a});var a=n(258);n.d(t,"CylinderGeometry",function(){return a.a});var s=n(259);n.d(t,"IcoSphereGeometry",function(){return s.a});var u=n(260);n.d(t,"PlaneGeometry",function(){return u.a});var l=n(261);n.d(t,"SphereGeometry",function(){return l.a});var c=n(93);n.d(t,"TruncatedConeGeometry",function(){return c.a})},function(e,t,n){"use strict";t.a={DEPTH_BUFFER_BIT:256,STENCIL_BUFFER_BIT:1024,COLOR_BUFFER_BIT:16384,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,ZERO:0,ONE:1,SRC_COLOR:768,ONE_MINUS_SRC_COLOR:769,SRC_ALPHA:770,ONE_MINUS_SRC_ALPHA:771,DST_ALPHA:772,ONE_MINUS_DST_ALPHA:773,DST_COLOR:774,ONE_MINUS_DST_COLOR:775,SRC_ALPHA_SATURATE:776,CONSTANT_COLOR:32769,ONE_MINUS_CONSTANT_COLOR:32770,CONSTANT_ALPHA:32771,ONE_MINUS_CONSTANT_ALPHA:32772,FUNC_ADD:32774,FUNC_SUBTRACT:32778,FUNC_REVERSE_SUBTRACT:32779,BLEND_EQUATION:32777,BLEND_EQUATION_RGB:32777,BLEND_EQUATION_ALPHA:34877,BLEND_DST_RGB:32968,BLEND_SRC_RGB:32969,BLEND_DST_ALPHA:32970,BLEND_SRC_ALPHA:32971,BLEND_COLOR:32773,ARRAY_BUFFER_BINDING:34964,ELEMENT_ARRAY_BUFFER_BINDING:34965,LINE_WIDTH:2849,ALIASED_POINT_SIZE_RANGE:33901,ALIASED_LINE_WIDTH_RANGE:33902,CULL_FACE_MODE:2885,FRONT_FACE:2886,DEPTH_RANGE:2928,DEPTH_WRITEMASK:2930,DEPTH_CLEAR_VALUE:2931,DEPTH_FUNC:2932,STENCIL_CLEAR_VALUE:2961,STENCIL_FUNC:2962,STENCIL_FAIL:2964,STENCIL_PASS_DEPTH_FAIL:2965,STENCIL_PASS_DEPTH_PASS:2966,STENCIL_REF:2967,STENCIL_VALUE_MASK:2963,STENCIL_WRITEMASK:2968,STENCIL_BACK_FUNC:34816,STENCIL_BACK_FAIL:34817,STENCIL_BACK_PASS_DEPTH_FAIL:34818,STENCIL_BACK_PASS_DEPTH_PASS:34819,STENCIL_BACK_REF:36003,STENCIL_BACK_VALUE_MASK:36004,STENCIL_BACK_WRITEMASK:36005,VIEWPORT:2978,SCISSOR_BOX:3088,COLOR_CLEAR_VALUE:3106,COLOR_WRITEMASK:3107,UNPACK_ALIGNMENT:3317,PACK_ALIGNMENT:3333,MAX_TEXTURE_SIZE:3379,MAX_VIEWPORT_DIMS:3386,SUBPIXEL_BITS:3408,RED_BITS:3410,GREEN_BITS:3411,BLUE_BITS:3412,ALPHA_BITS:3413,DEPTH_BITS:3414,STENCIL_BITS:3415,POLYGON_OFFSET_UNITS:10752,POLYGON_OFFSET_FACTOR:32824,TEXTURE_BINDING_2D:32873,SAMPLE_BUFFERS:32936,SAMPLES:32937,SAMPLE_COVERAGE_VALUE:32938,SAMPLE_COVERAGE_INVERT:32939,COMPRESSED_TEXTURE_FORMATS:34467,VENDOR:7936,RENDERER:7937,VERSION:7938,IMPLEMENTATION_COLOR_READ_TYPE:35738,IMPLEMENTATION_COLOR_READ_FORMAT:35739,BROWSER_DEFAULT_WEBGL:37444,STATIC_DRAW:35044,STREAM_DRAW:35040,DYNAMIC_DRAW:35048,ARRAY_BUFFER:34962,ELEMENT_ARRAY_BUFFER:34963,BUFFER_SIZE:34660,BUFFER_USAGE:34661,CURRENT_VERTEX_ATTRIB:34342,VERTEX_ATTRIB_ARRAY_ENABLED:34338,VERTEX_ATTRIB_ARRAY_SIZE:34339,VERTEX_ATTRIB_ARRAY_STRIDE:34340,VERTEX_ATTRIB_ARRAY_TYPE:34341,VERTEX_ATTRIB_ARRAY_NORMALIZED:34922,VERTEX_ATTRIB_ARRAY_POINTER:34373,VERTEX_ATTRIB_ARRAY_BUFFER_BINDING:34975,CULL_FACE:2884,FRONT:1028,BACK:1029,FRONT_AND_BACK:1032,BLEND:3042,DEPTH_TEST:2929,DITHER:3024,POLYGON_OFFSET_FILL:32823,SAMPLE_ALPHA_TO_COVERAGE:32926,SAMPLE_COVERAGE:32928,SCISSOR_TEST:3089,STENCIL_TEST:2960,NO_ERROR:0,INVALID_ENUM:1280,INVALID_VALUE:1281,INVALID_OPERATION:1282,OUT_OF_MEMORY:1285,CONTEXT_LOST_WEBGL:37442,CW:2304,CCW:2305,DONT_CARE:4352,FASTEST:4353,NICEST:4354,GENERATE_MIPMAP_HINT:33170,BYTE:5120,UNSIGNED_BYTE:5121,SHORT:5122,UNSIGNED_SHORT:5123,INT:5124,UNSIGNED_INT:5125,FLOAT:5126,DEPTH_COMPONENT:6402,ALPHA:6406,RGB:6407,RGBA:6408,LUMINANCE:6409,LUMINANCE_ALPHA:6410,UNSIGNED_SHORT_4_4_4_4:32819,UNSIGNED_SHORT_5_5_5_1:32820,UNSIGNED_SHORT_5_6_5:33635,FRAGMENT_SHADER:35632,VERTEX_SHADER:35633,COMPILE_STATUS:35713,DELETE_STATUS:35712,LINK_STATUS:35714,VALIDATE_STATUS:35715,ATTACHED_SHADERS:35717,ACTIVE_ATTRIBUTES:35721,ACTIVE_UNIFORMS:35718,MAX_VERTEX_ATTRIBS:34921,MAX_VERTEX_UNIFORM_VECTORS:36347,MAX_VARYING_VECTORS:36348,MAX_COMBINED_TEXTURE_IMAGE_UNITS:35661,MAX_VERTEX_TEXTURE_IMAGE_UNITS:35660,MAX_TEXTURE_IMAGE_UNITS:34930,MAX_FRAGMENT_UNIFORM_VECTORS:36349,SHADER_TYPE:35663,SHADING_LANGUAGE_VERSION:35724,CURRENT_PROGRAM:35725,NEVER:512,ALWAYS:519,LESS:513,EQUAL:514,LEQUAL:515,GREATER:516,GEQUAL:518,NOTEQUAL:517,KEEP:7680,REPLACE:7681,INCR:7682,DECR:7683,INVERT:5386,INCR_WRAP:34055,DECR_WRAP:34056,NEAREST:9728,LINEAR:9729,NEAREST_MIPMAP_NEAREST:9984,LINEAR_MIPMAP_NEAREST:9985,NEAREST_MIPMAP_LINEAR:9986,LINEAR_MIPMAP_LINEAR:9987,TEXTURE_MAG_FILTER:10240,TEXTURE_MIN_FILTER:10241,TEXTURE_WRAP_S:10242,TEXTURE_WRAP_T:10243,TEXTURE_2D:3553,TEXTURE:5890,TEXTURE_CUBE_MAP:34067,TEXTURE_BINDING_CUBE_MAP:34068,TEXTURE_CUBE_MAP_POSITIVE_X:34069,TEXTURE_CUBE_MAP_NEGATIVE_X:34070,TEXTURE_CUBE_MAP_POSITIVE_Y:34071,TEXTURE_CUBE_MAP_NEGATIVE_Y:34072,TEXTURE_CUBE_MAP_POSITIVE_Z:34073,TEXTURE_CUBE_MAP_NEGATIVE_Z:34074,MAX_CUBE_MAP_TEXTURE_SIZE:34076,TEXTURE0:33984,ACTIVE_TEXTURE:34016,REPEAT:10497,CLAMP_TO_EDGE:33071,MIRRORED_REPEAT:33648,TEXTURE_WIDTH:4096,TEXTURE_HEIGHT:4097,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,INT_VEC2:35667,INT_VEC3:35668,INT_VEC4:35669,BOOL:35670,BOOL_VEC2:35671,BOOL_VEC3:35672,BOOL_VEC4:35673,FLOAT_MAT2:35674,FLOAT_MAT3:35675,FLOAT_MAT4:35676,SAMPLER_2D:35678,SAMPLER_CUBE:35680,LOW_FLOAT:36336,MEDIUM_FLOAT:36337,HIGH_FLOAT:36338,LOW_INT:36339,MEDIUM_INT:36340,HIGH_INT:36341,FRAMEBUFFER:36160,RENDERBUFFER:36161,RGBA4:32854,RGB5_A1:32855,RGB565:36194,DEPTH_COMPONENT16:33189,STENCIL_INDEX:6401,STENCIL_INDEX8:36168,DEPTH_STENCIL:34041,RENDERBUFFER_WIDTH:36162,RENDERBUFFER_HEIGHT:36163,RENDERBUFFER_INTERNAL_FORMAT:36164,RENDERBUFFER_RED_SIZE:36176,RENDERBUFFER_GREEN_SIZE:36177,RENDERBUFFER_BLUE_SIZE:36178,RENDERBUFFER_ALPHA_SIZE:36179,RENDERBUFFER_DEPTH_SIZE:36180,RENDERBUFFER_STENCIL_SIZE:36181,FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE:36048,FRAMEBUFFER_ATTACHMENT_OBJECT_NAME:36049,FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL:36050,FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE:36051,COLOR_ATTACHMENT0:36064,DEPTH_ATTACHMENT:36096,STENCIL_ATTACHMENT:36128,DEPTH_STENCIL_ATTACHMENT:33306,NONE:0,FRAMEBUFFER_COMPLETE:36053,FRAMEBUFFER_INCOMPLETE_ATTACHMENT:36054,FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:36055,FRAMEBUFFER_INCOMPLETE_DIMENSIONS:36057,FRAMEBUFFER_UNSUPPORTED:36061,FRAMEBUFFER_BINDING:36006,RENDERBUFFER_BINDING:36007,READ_FRAMEBUFFER:36008,DRAW_FRAMEBUFFER:36009,MAX_RENDERBUFFER_SIZE:34024,INVALID_FRAMEBUFFER_OPERATION:1286,UNPACK_FLIP_Y_WEBGL:37440,UNPACK_PREMULTIPLY_ALPHA_WEBGL:37441,UNPACK_COLORSPACE_CONVERSION_WEBGL:37443,READ_BUFFER:3074,UNPACK_ROW_LENGTH:3314,UNPACK_SKIP_ROWS:3315,UNPACK_SKIP_PIXELS:3316,PACK_ROW_LENGTH:3330,PACK_SKIP_ROWS:3331,PACK_SKIP_PIXELS:3332,TEXTURE_BINDING_3D:32874,UNPACK_SKIP_IMAGES:32877,UNPACK_IMAGE_HEIGHT:32878,MAX_3D_TEXTURE_SIZE:32883,MAX_ELEMENTS_VERTICES:33e3,MAX_ELEMENTS_INDICES:33001,MAX_TEXTURE_LOD_BIAS:34045,MAX_FRAGMENT_UNIFORM_COMPONENTS:35657,MAX_VERTEX_UNIFORM_COMPONENTS:35658,MAX_ARRAY_TEXTURE_LAYERS:35071,MIN_PROGRAM_TEXEL_OFFSET:35076,MAX_PROGRAM_TEXEL_OFFSET:35077,MAX_VARYING_COMPONENTS:35659,FRAGMENT_SHADER_DERIVATIVE_HINT:35723,RASTERIZER_DISCARD:35977,VERTEX_ARRAY_BINDING:34229,MAX_VERTEX_OUTPUT_COMPONENTS:37154,MAX_FRAGMENT_INPUT_COMPONENTS:37157,MAX_SERVER_WAIT_TIMEOUT:37137,MAX_ELEMENT_INDEX:36203,RED:6403,RGB8:32849,RGBA8:32856,RGB10_A2:32857,TEXTURE_3D:32879,TEXTURE_WRAP_R:32882,TEXTURE_MIN_LOD:33082,TEXTURE_MAX_LOD:33083,TEXTURE_BASE_LEVEL:33084,TEXTURE_MAX_LEVEL:33085,TEXTURE_COMPARE_MODE:34892,TEXTURE_COMPARE_FUNC:34893,SRGB:35904,SRGB8:35905,SRGB8_ALPHA8:35907,COMPARE_REF_TO_TEXTURE:34894,RGBA32F:34836,RGB32F:34837,RGBA16F:34842,RGB16F:34843,TEXTURE_2D_ARRAY:35866,TEXTURE_BINDING_2D_ARRAY:35869,R11F_G11F_B10F:35898,RGB9_E5:35901,RGBA32UI:36208,RGB32UI:36209,RGBA16UI:36214,RGB16UI:36215,RGBA8UI:36220,RGB8UI:36221,RGBA32I:36226,RGB32I:36227,RGBA16I:36232,RGB16I:36233,RGBA8I:36238,RGB8I:36239,RED_INTEGER:36244,RGB_INTEGER:36248,RGBA_INTEGER:36249,R8:33321,RG8:33323,R16F:33325,R32F:33326,RG16F:33327,RG32F:33328,R8I:33329,R8UI:33330,R16I:33331,R16UI:33332,R32I:33333,R32UI:33334,RG8I:33335,RG8UI:33336,RG16I:33337,RG16UI:33338,RG32I:33339,RG32UI:33340,R8_SNORM:36756,RG8_SNORM:36757,RGB8_SNORM:36758,RGBA8_SNORM:36759,RGB10_A2UI:36975,TEXTURE_IMMUTABLE_FORMAT:37167,TEXTURE_IMMUTABLE_LEVELS:33503,UNSIGNED_INT_2_10_10_10_REV:33640,UNSIGNED_INT_10F_11F_11F_REV:35899,UNSIGNED_INT_5_9_9_9_REV:35902,FLOAT_32_UNSIGNED_INT_24_8_REV:36269,UNSIGNED_INT_24_8:34042,HALF_FLOAT:5131,RG:33319,RG_INTEGER:33320,INT_2_10_10_10_REV:36255,CURRENT_QUERY:34917,QUERY_RESULT:34918,QUERY_RESULT_AVAILABLE:34919,ANY_SAMPLES_PASSED:35887,ANY_SAMPLES_PASSED_CONSERVATIVE:36202,MAX_DRAW_BUFFERS:34852,DRAW_BUFFER0:34853,DRAW_BUFFER1:34854,DRAW_BUFFER2:34855,DRAW_BUFFER3:34856,DRAW_BUFFER4:34857,DRAW_BUFFER5:34858,DRAW_BUFFER6:34859,DRAW_BUFFER7:34860,DRAW_BUFFER8:34861,DRAW_BUFFER9:34862,DRAW_BUFFER10:34863,DRAW_BUFFER11:34864,DRAW_BUFFER12:34865,DRAW_BUFFER13:34866,DRAW_BUFFER14:34867,DRAW_BUFFER15:34868,MAX_COLOR_ATTACHMENTS:36063,COLOR_ATTACHMENT1:36065,COLOR_ATTACHMENT2:36066,COLOR_ATTACHMENT3:36067,COLOR_ATTACHMENT4:36068,COLOR_ATTACHMENT5:36069,COLOR_ATTACHMENT6:36070,COLOR_ATTACHMENT7:36071,COLOR_ATTACHMENT8:36072,COLOR_ATTACHMENT9:36073,COLOR_ATTACHMENT10:36074,COLOR_ATTACHMENT11:36075,COLOR_ATTACHMENT12:36076,COLOR_ATTACHMENT13:36077,COLOR_ATTACHMENT14:36078,COLOR_ATTACHMENT15:36079,SAMPLER_3D:35679,SAMPLER_2D_SHADOW:35682,SAMPLER_2D_ARRAY:36289,SAMPLER_2D_ARRAY_SHADOW:36292,SAMPLER_CUBE_SHADOW:36293,INT_SAMPLER_2D:36298,INT_SAMPLER_3D:36299,INT_SAMPLER_CUBE:36300,INT_SAMPLER_2D_ARRAY:36303,UNSIGNED_INT_SAMPLER_2D:36306,UNSIGNED_INT_SAMPLER_3D:36307,UNSIGNED_INT_SAMPLER_CUBE:36308,UNSIGNED_INT_SAMPLER_2D_ARRAY:36311,MAX_SAMPLES:36183,SAMPLER_BINDING:35097,PIXEL_PACK_BUFFER:35051,PIXEL_UNPACK_BUFFER:35052,PIXEL_PACK_BUFFER_BINDING:35053,PIXEL_UNPACK_BUFFER_BINDING:35055,COPY_READ_BUFFER:36662,COPY_WRITE_BUFFER:36663,COPY_READ_BUFFER_BINDING:36662,COPY_WRITE_BUFFER_BINDING:36663,FLOAT_MAT2x3:35685,FLOAT_MAT2x4:35686,FLOAT_MAT3x2:35687,FLOAT_MAT3x4:35688,FLOAT_MAT4x2:35689,FLOAT_MAT4x3:35690,UNSIGNED_INT_VEC2:36294,UNSIGNED_INT_VEC3:36295,UNSIGNED_INT_VEC4:36296,UNSIGNED_NORMALIZED:35863,SIGNED_NORMALIZED:36764,VERTEX_ATTRIB_ARRAY_INTEGER:35069,VERTEX_ATTRIB_ARRAY_DIVISOR:35070,TRANSFORM_FEEDBACK_BUFFER_MODE:35967,MAX_TRANSFORM_FEEDBACK_SEPARATE_COMPONENTS:35968,TRANSFORM_FEEDBACK_VARYINGS:35971,TRANSFORM_FEEDBACK_BUFFER_START:35972,TRANSFORM_FEEDBACK_BUFFER_SIZE:35973,TRANSFORM_FEEDBACK_PRIMITIVES_WRITTEN:35976,MAX_TRANSFORM_FEEDBACK_INTERLEAVED_COMPONENTS:35978,MAX_TRANSFORM_FEEDBACK_SEPARATE_ATTRIBS:35979,INTERLEAVED_ATTRIBS:35980,SEPARATE_ATTRIBS:35981,TRANSFORM_FEEDBACK_BUFFER:35982,TRANSFORM_FEEDBACK_BUFFER_BINDING:35983,TRANSFORM_FEEDBACK:36386,TRANSFORM_FEEDBACK_PAUSED:36387,TRANSFORM_FEEDBACK_ACTIVE:36388,TRANSFORM_FEEDBACK_BINDING:36389,FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING:33296,FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE:33297,FRAMEBUFFER_ATTACHMENT_RED_SIZE:33298,FRAMEBUFFER_ATTACHMENT_GREEN_SIZE:33299,FRAMEBUFFER_ATTACHMENT_BLUE_SIZE:33300,FRAMEBUFFER_ATTACHMENT_ALPHA_SIZE:33301,FRAMEBUFFER_ATTACHMENT_DEPTH_SIZE:33302,FRAMEBUFFER_ATTACHMENT_STENCIL_SIZE:33303,FRAMEBUFFER_DEFAULT:33304,DEPTH24_STENCIL8:35056,DRAW_FRAMEBUFFER_BINDING:36006,READ_FRAMEBUFFER_BINDING:36010,RENDERBUFFER_SAMPLES:36011,FRAMEBUFFER_ATTACHMENT_TEXTURE_LAYER:36052,FRAMEBUFFER_INCOMPLETE_MULTISAMPLE:36182,UNIFORM_BUFFER:35345,UNIFORM_BUFFER_BINDING:35368,UNIFORM_BUFFER_START:35369,UNIFORM_BUFFER_SIZE:35370,MAX_VERTEX_UNIFORM_BLOCKS:35371,MAX_FRAGMENT_UNIFORM_BLOCKS:35373,MAX_COMBINED_UNIFORM_BLOCKS:35374,MAX_UNIFORM_BUFFER_BINDINGS:35375,MAX_UNIFORM_BLOCK_SIZE:35376,MAX_COMBINED_VERTEX_UNIFORM_COMPONENTS:35377,MAX_COMBINED_FRAGMENT_UNIFORM_COMPONENTS:35379,UNIFORM_BUFFER_OFFSET_ALIGNMENT:35380,ACTIVE_UNIFORM_BLOCKS:35382,UNIFORM_TYPE:35383,UNIFORM_SIZE:35384,UNIFORM_BLOCK_INDEX:35386,UNIFORM_OFFSET:35387,UNIFORM_ARRAY_STRIDE:35388,UNIFORM_MATRIX_STRIDE:35389,UNIFORM_IS_ROW_MAJOR:35390,UNIFORM_BLOCK_BINDING:35391,UNIFORM_BLOCK_DATA_SIZE:35392,UNIFORM_BLOCK_ACTIVE_UNIFORMS:35394,UNIFORM_BLOCK_ACTIVE_UNIFORM_INDICES:35395,UNIFORM_BLOCK_REFERENCED_BY_VERTEX_SHADER:35396,UNIFORM_BLOCK_REFERENCED_BY_FRAGMENT_SHADER:35398,OBJECT_TYPE:37138,SYNC_CONDITION:37139,SYNC_STATUS:37140,SYNC_FLAGS:37141,SYNC_FENCE:37142,SYNC_GPU_COMMANDS_COMPLETE:37143,UNSIGNALED:37144,SIGNALED:37145,ALREADY_SIGNALED:37146,TIMEOUT_EXPIRED:37147,CONDITION_SATISFIED:37148,WAIT_FAILED:37149,SYNC_FLUSH_COMMANDS_BIT:1,COLOR:6144,DEPTH:6145,STENCIL:6146,MIN:32775,MAX:32776,DEPTH_COMPONENT24:33190,STREAM_READ:35041,STREAM_COPY:35042,STATIC_READ:35045,STATIC_COPY:35046,DYNAMIC_READ:35049,DYNAMIC_COPY:35050,DEPTH_COMPONENT32F:36012,DEPTH32F_STENCIL8:36013,INVALID_INDEX:4294967295,TIMEOUT_IGNORED:-1,MAX_CLIENT_WAIT_TIMEOUT_WEBGL:37447,VERTEX_ATTRIB_ARRAY_DIVISOR_ANGLE:35070,UNMASKED_VENDOR_WEBGL:37445,UNMASKED_RENDERER_WEBGL:37446,MAX_TEXTURE_MAX_ANISOTROPY_EXT:34047,TEXTURE_MAX_ANISOTROPY_EXT:34046,COMPRESSED_RGB_S3TC_DXT1_EXT:33776,COMPRESSED_RGBA_S3TC_DXT1_EXT:33777,COMPRESSED_RGBA_S3TC_DXT3_EXT:33778,COMPRESSED_RGBA_S3TC_DXT5_EXT:33779,COMPRESSED_R11_EAC:37488,COMPRESSED_SIGNED_R11_EAC:37489,COMPRESSED_RG11_EAC:37490,COMPRESSED_SIGNED_RG11_EAC:37491,COMPRESSED_RGB8_ETC2:37492,COMPRESSED_RGBA8_ETC2_EAC:37493,COMPRESSED_SRGB8_ETC2:37494,COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:37495,COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2:37496,COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2:37497,COMPRESSED_RGB_PVRTC_4BPPV1_IMG:35840,COMPRESSED_RGBA_PVRTC_4BPPV1_IMG:35842,COMPRESSED_RGB_PVRTC_2BPPV1_IMG:35841,COMPRESSED_RGBA_PVRTC_2BPPV1_IMG:35843,COMPRESSED_RGB_ETC1_WEBGL:36196,COMPRESSED_RGB_ATC_WEBGL:35986,COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL:35986,COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL:34798,UNSIGNED_INT_24_8_WEBGL:34042,HALF_FLOAT_OES:36193,RGBA32F_EXT:34836,RGB32F_EXT:34837,FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE_EXT:33297,UNSIGNED_NORMALIZED_EXT:35863,MIN_EXT:32775,MAX_EXT:32776,SRGB_EXT:35904,SRGB_ALPHA_EXT:35906,SRGB8_ALPHA8_EXT:35907,FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING_EXT:33296,FRAGMENT_SHADER_DERIVATIVE_HINT_OES:35723,COLOR_ATTACHMENT0_WEBGL:36064,COLOR_ATTACHMENT1_WEBGL:36065,COLOR_ATTACHMENT2_WEBGL:36066,COLOR_ATTACHMENT3_WEBGL:36067,COLOR_ATTACHMENT4_WEBGL:36068,COLOR_ATTACHMENT5_WEBGL:36069,COLOR_ATTACHMENT6_WEBGL:36070,COLOR_ATTACHMENT7_WEBGL:36071,COLOR_ATTACHMENT8_WEBGL:36072,COLOR_ATTACHMENT9_WEBGL:36073,COLOR_ATTACHMENT10_WEBGL:36074,COLOR_ATTACHMENT11_WEBGL:36075,COLOR_ATTACHMENT12_WEBGL:36076,COLOR_ATTACHMENT13_WEBGL:36077,COLOR_ATTACHMENT14_WEBGL:36078,COLOR_ATTACHMENT15_WEBGL:36079,DRAW_BUFFER0_WEBGL:34853,DRAW_BUFFER1_WEBGL:34854,DRAW_BUFFER2_WEBGL:34855,DRAW_BUFFER3_WEBGL:34856,DRAW_BUFFER4_WEBGL:34857,DRAW_BUFFER5_WEBGL:34858,DRAW_BUFFER6_WEBGL:34859,DRAW_BUFFER7_WEBGL:34860,DRAW_BUFFER8_WEBGL:34861,DRAW_BUFFER9_WEBGL:34862,DRAW_BUFFER10_WEBGL:34863,DRAW_BUFFER11_WEBGL:34864,DRAW_BUFFER12_WEBGL:34865,DRAW_BUFFER13_WEBGL:34866,DRAW_BUFFER14_WEBGL:34867,DRAW_BUFFER15_WEBGL:34868,MAX_COLOR_ATTACHMENTS_WEBGL:36063,MAX_DRAW_BUFFERS_WEBGL:34852,VERTEX_ARRAY_BINDING_OES:34229,QUERY_COUNTER_BITS_EXT:34916,CURRENT_QUERY_EXT:34917,QUERY_RESULT_EXT:34918,QUERY_RESULT_AVAILABLE_EXT:34919,TIME_ELAPSED_EXT:35007,TIMESTAMP_EXT:36392,GPU_DISJOINT_EXT:36795}},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e){var t="string"===typeof e?l[e]||l.TRIANGLES:e;return s()(t>=0&&t<=l.TRIANGLE_FAN,"Illegal drawMode"),t}t.b=i;var o=n(2),a=n(0),s=n.n(a),u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6},c=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r(this,e);var n=t.id,a=t.drawMode,s=void 0===a?l.TRIANGLES:a,u=t.vertexCount,c=void 0===u?void 0:u,f=t.attributes;this.id=n||Object(o.g)(this.constructor.name),this.drawMode=i(s),this.vertexCount=c,this.attributes={},this.needsRedraw=!0,this.userData={},Object.seal(this),f&&this.setAttributes(f)}return u(e,[{key:"setNeedsRedraw",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this.needsRedraw=e,this}},{key:"getNeedsRedraw",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.clearRedrawFlags,n=void 0!==t&&t,r=!1;return r=r||this.needsRedraw,this.needsRedraw=this.needsRedraw&&!n,r}},{key:"setVertexCount",value:function(e){this.vertexCount=e}},{key:"getVertexCount",value:function(){return void 0!==this.vertexCount?this.vertexCount:this.attributes.indices?this.attributes.indices.value.length:this.attributes.vertices?this.attributes.vertices.value.length/3:!!this.attributes.positions&&this.attributes.positions.value.length/3}},{key:"hasAttribute",value:function(e){return Boolean(this.attributes[e])}},{key:"getAttribute",value:function(e){var t=this.attributes[e];return s()(t),t.value}},{key:"getArray",value:function(e){var t=this.attributes[e];return s()(t),t.value}},{key:"getAttributes",value:function(){return this.attributes}},{key:"setAttributes",value:function(e){for(var t in e){var n=e[t];n=ArrayBuffer.isView(n)?{value:n}:n,s()(ArrayBuffer.isView(n.value),this._print(t)+": must be typed array or object with value as typed array"),this._autoDetectAttribute(t,n),this.attributes[t]=Object.assign({},n,{instanced:n.instanced||0})}return this.setNeedsRedraw(),this}},{key:"_autoDetectAttribute",value:function(e,t){var n=void 0;switch(e){case"indices":n=n||"indices";break;case"texCoords":case"texCoord1":case"texCoord2":case"texCoord3":n="uvs";break;case"vertices":case"positions":case"normals":case"pickingColors":n="vectors"}switch(n){case"vectors":t.size=t.size||3;break;case"uvs":t.size=t.size||2;break;case"indices":t.size=t.size||1,t.isIndexed=t.isIndexed||!0,s()(t.value instanceof Uint16Array||t.value instanceof Uint32Array,'attribute array for "indices" must be of integer type')}s()(t.size,"attribute "+e+" needs size")}},{key:"_print",value:function(e){return"Geometry "+this.id+" attribute "+e}}]),e}();t.a=c},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=n(12),o=n(95),a=n(19),s=n(49),u=n.n(s),l=n(50),c=n.n(l),f=n(47),h=n.n(f),p=n(77),d=n.n(p),v=n(46),g=n.n(v),y=n(25),m=n(0),_=n.n(m),b=function(){function e(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),E=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),x=[0,0,0],w=Object(o.a)(),T={pixelsPerMeter:[1,1,1],metersPerPixel:[1,1,1],pixelsPerDegree:[1,1,1],degreesPerPixel:[1,1,1]},S=0,A=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r(this,e);var n=t.id,i=void 0===n?null:n,o=t.x,s=void 0===o?0:o,u=t.y,l=void 0===u?0:u,c=t.width,f=void 0===c?1:c,h=t.height,p=void 0===h?1:h,d=t.viewMatrix,v=void 0===d?w:d,m=t.projectionMatrix,b=void 0===m?null:m,E=t.fovy,A=void 0===E?75:E,C=t.near,O=void 0===C?.1:C,k=t.far,P=void 0===k?1e3:k,R=t.longitude,I=void 0===R?null:R,N=t.latitude,M=void 0===N?null:N,L=t.zoom,D=void 0===L?null:L,F=t.position,j=void 0===F?null:F,B=t.modelMatrix,U=void 0===B?null:B,z=t.distanceScales,V=void 0===z?null:z;if(this.id=i||this.constructor.displayName||"viewport",this.isGeospatial=Number.isFinite(M)&&Number.isFinite(I),this.x=s,this.y=l,this.width=f||1,this.height=p||1,this.zoom=D,Number.isFinite(this.zoom)||(this.zoom=this.isGeospatial?Object(y.getMeterZoom)({latitude:M}):S),this.scale=Math.pow(2,this.zoom),this.distanceScales=this.isGeospatial?Object(y.getDistanceScales)({latitude:M,longitude:I,scale:this.scale}):V||T,this.focalDistance=t.focalDistance||1,this.distanceScales.metersPerPixel=new a.Vector3(this.distanceScales.metersPerPixel),this.distanceScales.pixelsPerMeter=new a.Vector3(this.distanceScales.pixelsPerMeter),this.position=x,this.meterOffset=x,j&&(this.position=j,this.modelMatrix=U,this.meterOffset=U?U.transformVector(j):j),this.viewMatrixUncentered=v,this.isGeospatial?(this.center=Object(y.getWorldPosition)({longitude:I,latitude:M,scale:this.scale,distanceScales:this.distanceScales,meterOffset:this.meterOffset}),this.viewMatrix=(new a.Matrix4).multiplyRight(this.viewMatrixUncentered).scale([1,-1,1]).translate(new a.Vector3(this.center||x).negate())):(this.center=j,this.viewMatrix=v),b)this.projectionMatrix=b;else{_()(Number.isFinite(A));var G=Math.PI/180,H=A*G,q=this.width/this.height;this.projectionMatrix=g()([],H,q,O,P)}this._initMatrices(),this.equals=this.equals.bind(this),this.project=this.project.bind(this),this.unproject=this.unproject.bind(this),this.projectFlat=this.projectFlat.bind(this),this.unprojectFlat=this.unprojectFlat.bind(this),this.getMatrices=this.getMatrices.bind(this)}return E(e,[{key:"equals",value:function(t){return t instanceof e&&(t.width===this.width&&t.height===this.height&&Object(a.equals)(t.projectionMatrix,this.projectionMatrix)&&Object(a.equals)(t.viewMatrix,this.viewMatrix))}},{key:"project",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.topLeft,r=void 0===n||n,i=b(e,3),o=i[0],a=i[1],s=i[2],u=void 0===s?0:s,l=this.projectFlat([o,a]),c=b(l,2),f=c[0],h=c[1],p=Object(y.worldToPixels)([f,h,u],this.pixelProjectionMatrix),d=b(p,2),v=d[0],g=d[1],m=r?g:this.height-g;return 2===e.length?[v,m]:[v,m,p[2]]}},{key:"unproject",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.topLeft,r=void 0===n||n,i=t.targetZ,o=b(e,3),a=o[0],s=o[1],u=o[2],l=r?s:this.height-s,c=Object(y.pixelsToWorld)([a,l,u],this.pixelUnprojectionMatrix,i),f=this.unprojectFlat(c),h=b(f,2),p=h[0],d=h[1];return Number.isFinite(u)?[p,d,c[2]]:Number.isFinite(i)?[p,d,i]:[p,d]}},{key:"projectFlat",value:function(e){var t=b(e,2);t[0],t[1],arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.scale;return this._projectFlat.apply(this,arguments)}},{key:"unprojectFlat",value:function(e){arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.scale;return this._unprojectFlat.apply(this,arguments)}},{key:"_projectFlat",value:function(e){arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.scale;return e}},{key:"_unprojectFlat",value:function(e){arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.scale;return e}},{key:"getMercatorParams",value:function(){var e=this._addMetersToLngLat([this.longitude||0,this.latitude||0],this.meterOffset);return{longitude:e[0],latitude:e[1]}}},{key:"isMapSynched",value:function(){return!1}},{key:"getDistanceScales",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return e?Object(y.getDistanceScales)({longitude:e[0],latitude:e[1],scale:this.scale,highPrecision:!0}):this.distanceScales}},{key:"getMatrices",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.modelMatrix,n=void 0===t?null:t,r=this.viewProjectionMatrix,i=this.pixelProjectionMatrix,o=this.pixelUnprojectionMatrix;return n&&(r=h()([],this.viewProjectionMatrix,n),i=h()([],this.pixelProjectionMatrix,n),o=d()([],i)),Object.assign({modelViewProjectionMatrix:r,viewProjectionMatrix:this.viewProjectionMatrix,viewMatrix:this.viewMatrix,projectionMatrix:this.projectionMatrix,pixelProjectionMatrix:i,pixelUnprojectionMatrix:o,width:this.width,height:this.height,scale:this.scale})}},{key:"getCameraPosition",value:function(){return this.cameraPosition}},{key:"getCameraDirection",value:function(){return this.cameraDirection}},{key:"getCameraUp",value:function(){return this.cameraUp}},{key:"_addMetersToLngLat",value:function(e,t){var n=b(e,3),r=n[0],i=n[1],o=n[2],a=void 0===o?0:o,s=this._metersToLngLatDelta(t),u=b(s,3),l=u[0],c=u[1],f=u[2],h=void 0===f?0:f;return 2===e.length?[r+l,i+c]:[r+l,i+c,a+h]}},{key:"_metersToLngLatDelta",value:function(e){var t=b(e,3),n=t[0],r=t[1],i=t[2],o=void 0===i?0:i;_()(Number.isFinite(n)&&Number.isFinite(r)&&Number.isFinite(o),"Illegal argument to Viewport");var a=this.distanceScales,s=a.pixelsPerMeter,u=a.degreesPerPixel,l=n*s[0]*u[0],c=r*s[1]*u[1];return 2===e.length?[l,c]:[l,c,o]}},{key:"_initMatrices",value:function(){var e=Object(o.a)();h()(e,e,this.projectionMatrix),h()(e,e,this.viewMatrix),this.viewProjectionMatrix=e,this.viewMatrixInverse=d()([],this.viewMatrix)||this.viewMatrix;var t=Object(o.b)({viewMatrix:this.viewMatrix,viewMatrixInverse:this.viewMatrixInverse}),n=t.eye,r=t.direction,a=t.up;this.cameraPosition=n,this.cameraDirection=r,this.cameraUp=a;var s=Object(o.a)();u()(s,s,[this.width/2,-this.height/2,1]),c()(s,s,[1,-1,0]),h()(s,s,this.viewProjectionMatrix),this.pixelProjectionMatrix=s,this.pixelUnprojectionMatrix=d()(Object(o.a)(),this.pixelProjectionMatrix),this.pixelUnprojectionMatrix||i.a.warn("Pixel project matrix not invertible")}}]),e}();t.a=A,A.displayName="Viewport"},function(e,t){var n={}.hasOwnProperty;e.exports=function(e,t){return n.call(e,t)}},function(e,t,n){var r=n(40),i=n(159),o=n(105),a=Object.defineProperty;t.f=n(32)?Object.defineProperty:function(e,t,n){if(r(e),t=o(t,!0),r(n),i)try{return a(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},function(e,t,n){e.exports=!n(42)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(e,t,n){e.exports={default:n(354),__esModule:!0}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(11),o=r(i),a=n(6),s=r(a),u=n(7),l=r(u),c=n(14),f=r(c),h=n(15),p=r(h),d=n(5),v=n(10),g=r(v),y=n(25),m=r(y),_={captureScroll:g.default.bool,captureDrag:g.default.bool,captureClick:g.default.bool,captureDoubleClick:g.default.bool},b={captureScroll:!1,captureDrag:!0,captureClick:!0,captureDoubleClick:!0},E={viewport:g.default.instanceOf(m.default),isDragging:g.default.bool,eventManager:g.default.object},x={captureScroll:"wheel",captureDrag:"panstart",captureClick:"click",captureDoubleClick:"dblclick"},w=function(e){function t(e){(0,s.default)(this,t);var n=(0,f.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e));return n._events=null,n._onContainerLoad=n._onContainerLoad.bind(n),n}return(0,p.default)(t,e),(0,l.default)(t,[{key:"_onContainerLoad",value:function(e){var t=this.context.eventManager,n=this._events;if(n&&(t.off(n),n=null),e){n={};for(var r in x){var i=this.props[r],o=x[r];i&&(n[o]=this._captureEvent)}t.on(n,e)}this._events=n}},{key:"_captureEvent",value:function(e){e.stopPropagation()}},{key:"render",value:function(){return null}}]),t}(d.Component);t.default=w,w.propTypes=_,w.defaultProps=b,w.contextTypes=E},function(e,t,n){"use strict";var r=n(410);n.d(t,"d",function(){return r.c}),n.d(t,"a",function(){return r.a}),n.d(t,"c",function(){return r.b}),n.d(t,"h",function(){return r.d});var i=n(413);n.d(t,"b",function(){return i.a});var o=n(235);n.d(t,"g",function(){return o.a});var a=(n(137),n(415));n.d(t,"f",function(){return a.a});var s=n(237);n.d(t,"e",function(){return s.a});n(27)},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e,t){m()(Object(h.g)(e),h.a);var n=E[t];if(!n)return!1;if(void 0===n.gl1&&void 0===n.gl2)return!0;var r=Object(h.h)(e)?n.gl2||n.gl1:n.gl1;return"string"===typeof r?e.getExtension(r):r}function u(e,t){var n=E[t];switch(n&&n.types[0]){case c.b.FLOAT:return e.getExtension("OES_texture_float_linear");case c.b.HALF_FLOAT:return e.getExtension("OES_texture_half_float_linear");default:return!0}}var l,c=n(13),f=n(20),h=n(1),p=n(63),d=n(17),v=n(51),g=n(2),y=n(0),m=n.n(y),_=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),b=[c.b.LINEAR,c.b.NEAREST],E=(l={},a(l,c.b.RGB,{dataFormat:c.b.RGB,types:[c.b.UNSIGNED_BYTE,c.b.UNSIGNED_SHORT_5_6_5]}),a(l,c.b.RGBA,{dataFormat:c.b.RGBA,types:[c.b.UNSIGNED_BYTE,c.b.UNSIGNED_SHORT_4_4_4_4,c.b.UNSIGNED_SHORT_5_5_5_1]}),a(l,c.b.ALPHA,{dataFormat:c.b.ALPHA,types:[c.b.UNSIGNED_BYTE]}),a(l,c.b.LUMINANCE,{dataFormat:c.b.LUMINANCE,types:[c.b.UNSIGNED_BYTE]}),a(l,c.b.LUMINANCE_ALPHA,{dataFormat:c.b.LUMINANCE_ALPHA,types:[c.b.UNSIGNED_BYTE]}),l),x=function(e){function t(e,n){r(this,t);var o=n.id,a=void 0===o?Object(g.g)("texture"):o,s=n.handle,u=n.target,l=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,{id:a,handle:s}));return l.target=u,l.hasFloatTexture=e.getExtension("OES_texture_float"),l.textureUnit=void 0,l}return o(t,e),_(t,null,[{key:"isSupported",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.format,r=t.linearFiltering;m()(Object(h.g)(e),h.a);var i=!0;return n&&(i=i&&s(e,n),i=i&&(!r||u(e,n))),i}}]),_(t,[{key:"toString",value:function(){return"Texture("+this.id+","+this.width+"x"+this.height+")"}},{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.data,n=e.pixels,r=void 0===n?null:n,i=e.format,o=void 0===i?c.b.RGBA:i,s=e.type,u=void 0===s?c.b.UNSIGNED_BYTE:s,l=e.border,f=void 0===l?0:l,h=e.recreate,p=void 0!==h&&h,d=e.parameters,v=void 0===d?{}:d,y=e.pixelStore,m=void 0===y?{}:y,_=e.unpackFlipY,b=void 0===_||_,E=e.mipmaps,x=void 0===E||E;t||(t=r);var w=e.width,T=e.height,S=e.dataFormat,A=this._deduceParameters({format:o,type:u,dataFormat:S,compressed:!1,data:t,width:w,height:T});w=A.width,T=A.height,S=A.dataFormat,this.width=w,this.height=T,this.format=o,this.type=u,this.dataFormat=S,this.border=f,this.mipmaps=x;var C=a({},c.b.UNPACK_FLIP_Y_WEBGL,b),O=Object.assign({},C,m);this._isNPOT()&&(g.e.warn("texture: "+this+" is Non-Power-Of-Two, disabling mipmaping"),x=!1,this._updateForNPOT(v)),this.setImageData({data:t,width:w,height:T,format:o,type:u,dataFormat:S,border:f,mipmaps:x,parameters:O}),x&&this.generateMipmap(),this.setParameters(v),p&&(this.data=t)}},{key:"resize",value:function(e){var t=e.width,n=e.height;return t!==this.width||n!==this.height?this.initialize({width:t,height:n,format:this.format,type:this.type,dataFormat:this.dataFormat,border:this.border,mipmaps:!1}):this}},{key:"generateMipmap",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.gl.bindTexture(this.target,this.handle),Object(p.c)(this.gl,t,function(){e.gl.generateMipmap(e.target)}),this.gl.bindTexture(this.target,null),this}},{key:"setImageData",value:function(e){var t=this,n=e.target,r=void 0===n?this.target:n,i=e.pixels,o=void 0===i?null:i,a=e.data,s=void 0===a?null:a,u=e.width,l=e.height,f=e.level,d=void 0===f?0:f,v=e.format,g=void 0===v?c.b.RGBA:v,y=e.type,_=e.dataFormat,b=e.offset,E=void 0===b?0:b,x=e.border,w=void 0===x?0:x,T=e.compressed,S=void 0!==T&&T,A=e.parameters,C=void 0===A?{}:A;s||(s=o);var O=this._deduceParameters({format:g,type:y,dataFormat:_,compressed:S,data:s,width:u,height:l});y=O.type,_=O.dataFormat,S=O.compressed,u=O.width,l=O.height;var k=this.gl;k.bindTexture(this.target,this.handle);var P=null,R=this._getDataType({data:s,compressed:S});s=R.data,P=R.dataType,Object(p.c)(this.gl,C,function(){switch(P){case"null":k.texImage2D(r,d,g,u,l,w,_,y,s);break;case"typed-array":k.texImage2D(r,d,g,u,l,w,_,y,s,E);break;case"buffer":m()(Object(h.h)(k),h.b),k.bindBuffer(c.b.PIXEL_UNPACK_BUFFER,s.handle||s),k.texImage2D(r,d,g,u,l,w,g,y,E);break;case"browser-object":k.texImage2D(r,d,g,g,y,s);break;case"compressed":k.compressedTexImage2D(t.target,d,g,u,l,w,s);break;default:m()(!1,"Unknown image data type")}})}},{key:"setSubImageData",value:function(e){var t=this,n=e.target,r=void 0===n?this.target:n,i=e.pixels,o=void 0===i?null:i,a=e.data,s=void 0===a?null:a,u=e.x,l=void 0===u?0:u,d=e.y,g=void 0===d?0:d,y=e.width,_=e.height,b=e.level,E=void 0===b?0:b,x=e.format,w=void 0===x?c.b.RGBA:x,T=e.type,S=e.dataFormat,A=e.compressed,C=void 0!==A&&A,O=e.offset,k=void 0===O?0:O,P=e.border,R=void 0===P?0:P,I=e.parameters,N=void 0===I?{}:I,M=this._deduceParameters({format:w,type:T,dataFormat:S,compressed:C,data:s,width:y,height:_});if(T=M.type,S=M.dataFormat,C=M.compressed,y=M.width,_=M.height,s||(s=o),s&&s.data){var L=s;s=L.data,y=L.shape[0],_=L.shape[1]}s instanceof v.a&&(s=s.handle),this.gl.bindTexture(this.target,this.handle),Object(p.c)(this.gl,N,function(){C?t.gl.compressedTexSubImage2D(r,E,l,g,y,_,w,s):null===s?t.gl.texSubImage2D(r,E,w,y,_,R,S,T,null):ArrayBuffer.isView(s)?t.gl.texSubImage2D(r,E,l,g,y,_,w,T,s,k):s instanceof f.c?(m()(Object(h.h)(t.gl),h.b),t.gl.bindBuffer(c.b.PIXEL_UNPACK_BUFFER,s),t.gl.texSubImage2D(r,E,w,y,_,R,w,T,k),t.gl.bindBuffer(c.b.GL_PIXEL_UNPACK_BUFFER,null)):t.gl.texSubImage2D(r,E,l,g,w,T,s)}),this.gl.bindTexture(this.target,null)}},{key:"copyFramebuffer",value:function(e){var t=e.target,n=(void 0===t&&this.target,e.framebuffer),r=(e.offset,e.x),i=void 0===r?0:r,o=e.y,a=void 0===o?0:o,s=e.width,u=e.height,l=e.level,f=void 0===l?0:l,h=e.internalFormat,p=void 0===h?c.b.RGBA:h,d=e.border,v=void 0===d?0:d;n&&n.bind(),this.bind(),this.gl.copyTexImage2D(this.target,f,p,i,a,s,u,v),this.unbind(),n&&n.unbind()}},{key:"getActiveUnit",value:function(){return this.gl.getParameter(c.b.ACTIVE_TEXTURE)-c.b.TEXTURE0}},{key:"bind",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.textureUnit;if(void 0===e)throw new Error("Texture.bind: must specify texture unit");return this.textureUnit=e,this.gl.activeTexture(c.b.TEXTURE0+e),this.gl.bindTexture(this.target,this.handle),e}},{key:"unbind",value:function(){if(void 0===this.textureUnit)throw new Error("Texture.unbind: texture unit not specified");return this.gl.activeTexture(c.b.TEXTURE0+this.textureUnit),this.gl.bindTexture(this.target,null),this.textureUnit}},{key:"_getDataType",value:function(e){var t=e.data,n=e.compressed;return void 0!==n&&n?{data:t,dataType:"compressed"}:null===t?{data:t,dataType:"null"}:ArrayBuffer.isView(t)?{data:t,dataType:"typed-array"}:t instanceof v.a?{data:t.handle,dataType:"buffer"}:t instanceof f.c?{data:t,dataType:"buffer"}:{data:t,dataType:"browser-object"}}},{key:"setImage3D",value:function(e){var t=e.level,n=void 0===t?0:t,r=e.internalformat,i=void 0===r?c.b.RGBA:r,o=e.width,a=e.height,s=e.depth,u=void 0===s?1:s,l=e.border,f=void 0===l?0:l,h=e.format,p=e.type,d=void 0===p?c.b.UNSIGNED_BYTE:p,g=e.offset,y=void 0===g?0:g,m=e.pixels;return ArrayBuffer.isView(m)?(this.gl.texImage3D(this.target,n,i,o,a,u,f,h,d,m),this):(m instanceof v.a&&(this.gl.bindBuffer(c.b.PIXEL_UNPACK_BUFFER,m.handle),this.gl.texImage3D(this.target,n,i,o,a,u,f,h,d,y)),this)}},{key:"_deduceParameters",value:function(e){var t=e.format,n=e.data,r=e.width,i=e.height,o=e.dataFormat,a=e.type,s=e.compressed,u=E[t];o=o||u&&u.dataFormat,a=a||u&&u.types[0],s=s||u&&u.compressed;var l=this._deduceImageSize({data:n,width:r,height:i});return r=l.width,i=l.height,{dataFormat:o,type:a,compressed:s,width:r,height:i,format:t,data:n}}},{key:"_deduceImageSize",value:function(e){var t=e.data,n=e.width,r=e.height,i=void 0;return i="undefined"!==typeof ImageData&&t instanceof ImageData?{width:t.width,height:t.height}:"undefined"!==typeof HTMLImageElement&&t instanceof HTMLImageElement?{width:t.naturalWidth,height:t.naturalHeight}:"undefined"!==typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement?{width:t.width,height:t.height}:"undefined"!==typeof HTMLVideoElement&&t instanceof HTMLVideoElement?{width:t.videoWidth,height:t.videoHeight}:t?{width:n,height:r}:{width:n>=0?n:1,height:r>=0?r:1},m()(i,"Could not deduced texture size"),m()(void 0===n||i.width===n,"Deduced texture width does not match supplied width"),m()(void 0===r||i.height===r,"Deduced texture height does not match supplied height"),i}},{key:"_createHandle",value:function(){return this.gl.createTexture()}},{key:"_deleteHandle",value:function(){this.gl.deleteTexture(this.handle)}},{key:"_getParameter",value:function(e){switch(e){case c.b.TEXTURE_WIDTH:return this.width;case c.b.TEXTURE_HEIGHT:return this.height;default:this.gl.bindTexture(this.target,this.handle);var t=this.gl.getTexParameter(this.target,e);return this.gl.bindTexture(this.target,null),t}}},{key:"_setParameter",value:function(e,t){switch(this.gl.bindTexture(this.target,this.handle),t=this._getNPOTParam(e,t),e){case c.b.TEXTURE_MIN_LOD:case c.b.TEXTURE_MAX_LOD:this.gl.texParameterf(this.handle,e,t);break;case c.b.TEXTURE_WIDTH:case c.b.TEXTURE_HEIGHT:throw new Error("Cannot set emulated parameter");default:this.gl.texParameteri(this.target,e,t)}return this.gl.bindTexture(this.target,null),this}},{key:"_isNPOT",value:function(){return!Object(h.h)(this.gl)&&(!Object(g.d)(this.width)||!Object(g.d)(this.height))}},{key:"_updateForNPOT",value:function(e){void 0===e[this.gl.TEXTURE_MIN_FILTER]&&(g.e.warn("texture: "+this+" is Non-Power-Of-Two, forcing TEXTURE_MIN_FILTER to LINEAR"),e[this.gl.TEXTURE_MIN_FILTER]=this.gl.LINEAR),void 0===e[this.gl.TEXTURE_WRAP_S]&&(g.e.warn("texture: "+this+" is Non-Power-Of-Two, forcing TEXTURE_WRAP_S to CLAMP_TO_EDGE"),e[this.gl.TEXTURE_WRAP_S]=this.gl.CLAMP_TO_EDGE),void 0===e[this.gl.TEXTURE_WRAP_T]&&(g.e.warn("texture: "+this+" is Non-Power-Of-Two, forcing TEXTURE_WRAP_T to CLAMP_TO_EDGE"),e[this.gl.TEXTURE_WRAP_T]=this.gl.CLAMP_TO_EDGE)}},{key:"_getNPOTParam",value:function(e,t){if(this._isNPOT())switch(e){case c.b.TEXTURE_MIN_FILTER:-1===b.indexOf(t)&&(g.e.warn("texture: "+this+" is Non-Power-Of-Two, forcing TEXTURE_MIN_FILTER to LINEAR"),t=c.b.LINEAR);break;case c.b.TEXTURE_WRAP_S:case c.b.TEXTURE_WRAP_T:t!==c.b.CLAMP_TO_EDGE&&(g.e.warn("texture: "+this+" is Non-Power-Of-Two, "+Object(c.d)(e)+" to CLAMP_TO_EDGE"),t=c.b.CLAMP_TO_EDGE)}return t}}]),t}(d.a);t.a=x},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(13);n.d(t,"GL",function(){return r.a}),n.d(t,"default",function(){return r.a});var i=n(238);n.d(t,"Image",function(){return i.a}),n.d(t,"WebGLRenderingContext",function(){return i.h}),n.d(t,"WebGLProgram",function(){return i.f}),n.d(t,"WebGLShader",function(){return i.i}),n.d(t,"WebGLBuffer",function(){return i.d}),n.d(t,"WebGLFramebuffer",function(){return i.e}),n.d(t,"WebGLRenderbuffer",function(){return i.g}),n.d(t,"WebGLTexture",function(){return i.k}),n.d(t,"WebGLUniformLocation",function(){return i.l}),n.d(t,"WebGLActiveInfo",function(){return i.c}),n.d(t,"WebGLShaderPrecisionFormat",function(){return i.j}),n.d(t,"WebGL2RenderingContext",function(){return i.b}),n.d(t,"webGLTypesAvailable",function(){return i.m});var o=n(1);n.d(t,"isWebGL",function(){return o.g}),n.d(t,"isWebGL2",function(){return o.h}),n.d(t,"createGLContext",function(){return o.e}),n.d(t,"deleteGLContext",function(){return o.f});var a=n(63);n.d(t,"withParameters",function(){return a.c}),n.d(t,"resetParameters",function(){return a.a});var s=n(142);n.d(t,"getContextInfo",function(){return s.a});var u=n(51);n.d(t,"Buffer",function(){return u.a});var l=n(90);n.d(t,"Shader",function(){return l.default}),n.d(t,"VertexShader",function(){return l.b}),n.d(t,"FragmentShader",function(){return l.a});var c=n(89);n.d(t,"Program",function(){return c.a});var f=n(52);n.d(t,"Framebuffer",function(){return f.a});var h=n(88);n.d(t,"Renderbuffer",function(){return h.a});var p=n(139);n.d(t,"Texture2D",function(){return p.a});var d=n(244);n.d(t,"TextureCube",function(){return d.a});var v=n(245);n.d(t,"draw",function(){return v.a});var g=n(87);n.d(t,"clear",function(){return g.a});var y=n(247);n.d(t,"readPixels",function(){return y.a}),n.d(t,"readPixelsFromBuffer",function(){return y.readPixelsFromBuffer});var m=n(141);n.d(t,"parseUniformName",function(){return m.e}),n.d(t,"getUniformSetter",function(){return m.c}),n.d(t,"checkUniformValues",function(){return m.b});var _=n(140);n.d(t,"VertexArray",function(){return _.a})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(255);n.d(t,"AnimationLoop",function(){return r.b}),n.d(t,"requestAnimationFrame",function(){return r.c}),n.d(t,"cancelAnimationFrame",function(){return r.a});var i=n(91);n.d(t,"Model",function(){return i.a})},function(e,t,n){var r=n(31),i=n(69);e.exports=n(32)?function(e,t,n){return r.f(e,t,i(1,n))}:function(e,t,n){return e[t]=n,e}},function(e,t,n){var r=n(41);e.exports=function(e){if(!r(e))throw TypeError(e+" is not an object!");return e}},function(e,t){e.exports=function(e){return"object"===typeof e?null!==e:"function"===typeof e}},function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t,n){var r=n(164),i=n(101);e.exports=function(e){return r(i(e))}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){var t=(0,c.default)(e),n=(0,u.default)(t),r=!0,i=!1,o=void 0;try{for(var s,l=(0,a.default)(n);!(r=(s=l.next()).done);r=!0)!function(){var t=s.value;"function"===typeof e[t]&&(f.find(function(e){return t===e})||(e[t]=e[t].bind(e)))}()}catch(e){i=!0,o=e}finally{try{!r&&l.return&&l.return()}finally{if(i)throw o}}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(33),a=r(o),s=n(357),u=r(s),l=n(11),c=r(l);t.default=i;var f=["constructor","render","componentWillMount","componentDidMount","componentWillReceiveProps","shouldComponentUpdate","componentWillUpdate","componentDidUpdate","componentWillUnmount"]},function(e,t){function n(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function i(e){if(c===setTimeout)return setTimeout(e,0);if((c===n||!c)&&setTimeout)return c=setTimeout,setTimeout(e,0);try{return c(e,0)}catch(t){try{return c.call(null,e,0)}catch(t){return c.call(this,e,0)}}}function o(e){if(f===clearTimeout)return clearTimeout(e);if((f===r||!f)&&clearTimeout)return f=clearTimeout,clearTimeout(e);try{return f(e)}catch(t){try{return f.call(null,e)}catch(t){return f.call(this,e)}}}function a(){v&&p&&(v=!1,p.length?d=p.concat(d):g=-1,d.length&&s())}function s(){if(!v){var e=i(a);v=!0;for(var t=d.length;t;){for(p=d,d=[];++g<t;)p&&p[g].run();g=-1,t=d.length}p=null,v=!1,o(e)}}function u(e,t){this.fun=e,this.array=t}function l(){}var c,f,h=e.exports={};!function(){try{c="function"===typeof setTimeout?setTimeout:n}catch(e){c=n}try{f="function"===typeof clearTimeout?clearTimeout:r}catch(e){f=r}}();var p,d=[],v=!1,g=-1;h.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];d.push(new u(e,t)),1!==d.length||v||i(s)},u.prototype.run=function(){this.fun.apply(null,this.array)},h.title="browser",h.browser=!0,h.env={},h.argv=[],h.version="",h.versions={},h.on=l,h.addListener=l,h.once=l,h.off=l,h.removeListener=l,h.removeAllListeners=l,h.emit=l,h.prependListener=l,h.prependOnceListener=l,h.listeners=function(e){return[]},h.binding=function(e){throw new Error("process.binding is not supported")},h.cwd=function(){return"/"},h.chdir=function(e){throw new Error("process.chdir is not supported")},h.umask=function(){return 0}},function(e,t){function n(e,t,n,r,i){var o=1/Math.tan(t/2),a=1/(r-i);return e[0]=o/n,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=o,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=(i+r)*a,e[11]=-1,e[12]=0,e[13]=0,e[14]=2*i*r*a,e[15]=0,e}e.exports=n},function(e,t){function n(e,t,n){var r=t[0],i=t[1],o=t[2],a=t[3],s=t[4],u=t[5],l=t[6],c=t[7],f=t[8],h=t[9],p=t[10],d=t[11],v=t[12],g=t[13],y=t[14],m=t[15],_=n[0],b=n[1],E=n[2],x=n[3];return e[0]=_*r+b*s+E*f+x*v,e[1]=_*i+b*u+E*h+x*g,e[2]=_*o+b*l+E*p+x*y,e[3]=_*a+b*c+E*d+x*m,_=n[4],b=n[5],E=n[6],x=n[7],e[4]=_*r+b*s+E*f+x*v,e[5]=_*i+b*u+E*h+x*g,e[6]=_*o+b*l+E*p+x*y,e[7]=_*a+b*c+E*d+x*m,_=n[8],b=n[9],E=n[10],x=n[11],e[8]=_*r+b*s+E*f+x*v,e[9]=_*i+b*u+E*h+x*g,e[10]=_*o+b*l+E*p+x*y,e[11]=_*a+b*c+E*d+x*m,_=n[12],b=n[13],E=n[14],x=n[15],e[12]=_*r+b*s+E*f+x*v,e[13]=_*i+b*u+E*h+x*g,e[14]=_*o+b*l+E*p+x*y,e[15]=_*a+b*c+E*d+x*m,e}e.exports=n},function(e,t){function n(e,t,n){var r=Math.sin(n),i=Math.cos(n),o=t[0],a=t[1],s=t[2],u=t[3],l=t[4],c=t[5],f=t[6],h=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=o*i+l*r,e[1]=a*i+c*r,e[2]=s*i+f*r,e[3]=u*i+h*r,e[4]=l*i-o*r,e[5]=c*i-a*r,e[6]=f*i-s*r,e[7]=h*i-u*r,e}e.exports=n},function(e,t){function n(e,t,n){var r=n[0],i=n[1],o=n[2];return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*i,e[5]=t[5]*i,e[6]=t[6]*i,e[7]=t[7]*i,e[8]=t[8]*o,e[9]=t[9]*o,e[10]=t[10]*o,e[11]=t[11]*o,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}e.exports=n},function(e,t){function n(e,t,n){var r,i,o,a,s,u,l,c,f,h,p,d,v=n[0],g=n[1],y=n[2];return t===e?(e[12]=t[0]*v+t[4]*g+t[8]*y+t[12],e[13]=t[1]*v+t[5]*g+t[9]*y+t[13],e[14]=t[2]*v+t[6]*g+t[10]*y+t[14],e[15]=t[3]*v+t[7]*g+t[11]*y+t[15]):(r=t[0],i=t[1],o=t[2],a=t[3],s=t[4],u=t[5],l=t[6],c=t[7],f=t[8],h=t[9],p=t[10],d=t[11],e[0]=r,e[1]=i,e[2]=o,e[3]=a,e[4]=s,e[5]=u,e[6]=l,e[7]=c,e[8]=f,e[9]=h,e[10]=p,e[11]=d,e[12]=r*v+s*g+f*y+t[12],e[13]=i*v+u*g+h*y+t[13],e[14]=o*v+l*g+p*y+t[14],e[15]=a*v+c*g+d*y+t[15]),e}e.exports=n},function(e,t,n){"use strict";function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var a=n(20),s=n(1),u=n(136),l=n(17),c=n(0),f=n.n(c),h=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),p="Illegal or missing parameter to Buffer",d=36662,v=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.type,r=t.size,i=void 0===r?1:r,a=t.offset,s=void 0===a?0:a,u=t.stride,l=void 0===u?0:u,c=t.normalized,f=void 0!==c&&c,h=t.integer,p=void 0!==h&&h,d=t.instanced,v=void 0===d?0:d;o(this,e),this.type=n,this.size=i,this.offset=s,this.stride=l,this.normalized=f,this.integer=p,this.instanced=v},g=function(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};o(this,t);var i=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return i.target=n.target||(i.gl.webgl2?d:a.e.ARRAY_BUFFER),i.index=null,i.setData(n),Object.seal(i),i}return i(t,e),h(t,[{key:"setDataLayout",value:function(e){var t=e.layout,n=e.type,r=e.size,i=void 0===r?1:r,o=e.offset,a=void 0===o?0:o,s=e.stride,u=void 0===s?0:s,l=e.normalized,c=void 0!==l&&l,f=e.integer,h=void 0!==f&&f,p=e.instanced,d=void 0===p?0:p;return this.layout=t||new v({type:n||this.type,size:i,offset:a,stride:u,normalized:c,integer:h,instanced:d}),this}},{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.data,n=e.bytes,r=e.usage,i=void 0===r?a.e.STATIC_DRAW:r,o=(e.layout,e.type),s=(e.size,e.offset,e.stride,e.normalized,e.integer,e.instanced,arguments[0]);t?(o=o||Object(u.b)(t),n=t.byteLength,f()(o,p)):(o=o||a.e.FLOAT,n&&0!==n||(n=0,t=new Float32Array(0))),this.bytes=n,this.bytesUsed=n,this.data=t,this.type=o,this.usage=i,this.setDataLayout(Object.assign(s));var l=this.gl.webgl2?36663:this.target;return this.gl.bindBuffer(l,this.handle),this.gl.bufferData(l,t||n,i),this.gl.bindBuffer(l,null),this}},{key:"setData",value:function(e){return this.initialize(e)}},{key:"subData",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.data,n=e.offset,r=void 0===n?0:n,i=e.srcOffset,o=void 0===i?0:i,a=e.length;f()(t,p);var u=this.gl.webgl2?36663:this.target;return this.gl.bindBuffer(u,this.handle),0!==o||void 0!==a?(Object(s.c)(this.gl),this.gl.bufferSubData(this.target,r,t,o,a||0)):this.gl.bufferSubData(u,r,t),this.gl.bindBuffer(u,null),this}},{key:"copyData",value:function(e){var t=e.sourceBuffer,n=e.readOffset,r=void 0===n?0:n,i=e.writeOffset,o=void 0===i?0:i,a=e.size;return Object(s.c)(this.gl),this.gl.bindBuffer(d,t.handle),this.gl.bindBuffer(36663,this.handle),this.gl.copyBufferSubData(d,36663,r,o,a),this.gl.bindBuffer(d,null),this.gl.bindBuffer(36663,null),this}},{key:"getData",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.dstData,n=void 0===t?null:t,r=e.srcByteOffset,i=void 0===r?0:r,o=e.dstOffset,a=void 0===o?0:o,l=e.length,c=void 0===l?0:l;Object(s.c)(this.gl);var h=Object(u.c)(this.type,{clamped:!1}),p=this._getAvailableElementCount(i),v=void 0,g=void 0,y=a;n?(g=n.length,v=g-y):(v=Math.min(p,c||p),g=y+v);var m=Math.min(p,v);return c=c||m,f()(c<=m,"Invalid srcByteOffset, dstOffset and length combination"),n=n||new h(g),this.gl.bindBuffer(d,this.handle),this.gl.getBufferSubData(d,i,n,a,c),this.gl.bindBuffer(d,null),n}},{key:"bind",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.target,n=void 0===t?this.target:t,r=e.index,i=void 0===r?this.index:r,o=e.offset,u=void 0===o?0:o,l=e.size;switch(n===a.e.UNIFORM_BUFFER||35982===n?void 0!==l?"ranged":" indexed":"non-indexed"){case"non-indexed":this.gl.bindBuffer(n,this.handle);break;case"indexed":Object(s.c)(this.gl),f()(0===u,p),this.gl.bindBufferBase(n,i,this.handle);break;case"ranged":Object(s.c)(this.gl),this.gl.bindBufferRange(n,i,this.handle,u,l);break;default:throw new Error(p)}return this}},{key:"unbind",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.target,n=void 0===t?this.target:t,r=e.index,i=void 0===r?this.index:r;return n===a.e.UNIFORM_BUFFER||35982===n?this.gl.bindBufferBase(n,i,null):this.gl.bindBuffer(n,null),this}},{key:"getIndexedParameter",value:function(e,t){var n=this.gl.webgl2?d:this.target;return this.gl.bindBuffer(n,t),this.gl.getIndexedParameter(e,t)}},{key:"_createHandle",value:function(){return this.gl.createBuffer()}},{key:"_deleteHandle",value:function(){this.gl.deleteBuffer(this.handle)}},{key:"_getParameter",value:function(e){this.gl.bindBuffer(this.target,this.handle);var t=this.gl.getBufferParameter(this.target,e);return this.gl.bindBuffer(this.target,null),t}},{key:"_getAvailableElementCount",value:function(e){var t=Object(u.c)(this.type,{clamped:!1});return this.bytes/t.BYTES_PER_ELEMENT-e/t.BYTES_PER_ELEMENT}}]),t}(l.a);t.a=g},function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function a(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e){return e<T?e+T:e}function u(e){switch(e){case c.e.ALPHA:return 1;case c.e.RGB:return 3;case c.e.RGBA:return 4;default:throw new Error("Unknown format")}}function l(e){return(S.STATUS||{})[e]||"Framebuffer error "+e}var c=n(20),f=n(1),h=n(86),p=n(87),d=n(17),v=n(139),g=n(88),y=n(136),m=n(2),_=n(0),b=n.n(_),E=function(){function e(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),x=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),w=36064,T=34069,S=function(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};i(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return r.width=null,r.height=null,r.attachments={},r.readBuffer=w,r.drawBuffers=[w],r.initialize(n),Object.seal(r),r}return a(t,e),x(t,[{key:"MAX_COLOR_ATTACHMENTS",get:function(){return this.gl.getParameter(this.gl.MAX_COLOR_ATTACHMENTS)}},{key:"MAX_DRAW_BUFFERS",get:function(){return this.gl.getParameter(this.gl.MAX_DRAW_BUFFERS)}}],[{key:"isSupported",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.colorBufferFloat,r=t.colorBufferHalfFloat;return n&&e.getExtension(Object(f.h)(e)?"EXT_color_buffer_float":"WEBGL_color_buffer_float"),r&&e.getExtension(Object(f.h)(e)?"EXT_color_buffer_float":"EXT_color_buffer_half_float")}},{key:"getDefaultFramebuffer",value:function(e){return e.luma=e.luma||{},e.luma.defaultFramebuffer||(e.luma.defaultFramebuffer=new t(e,{handle:null,attachments:{}})),e.luma.defaultFramebuffer}}]),x(t,[{key:"initialize",value:function(e){var t=e.width,n=void 0===t?1:t,r=e.height,i=void 0===r?1:r,o=e.attachments,a=void 0===o?null:o,s=e.color,u=void 0===s||s,l=e.depth,c=void 0===l||l,f=e.stencil,h=void 0!==f&&f,p=e.check,d=void 0===p||p,v=e.readBuffer,g=e.drawBuffers;if(b()(n>=0&&i>=0,"Width and height need to be integers"),this.width=n,this.height=i,a)for(var y in a){var m=a[y],_=Array.isArray(m)?m[0]:m;_.resize({width:n,height:i})}else a=this._createDefaultAttachments({color:u,depth:c,stencil:h,width:n,height:i});this.update({clearAttachments:!0,attachments:a,readBuffer:v,drawBuffers:g}),a&&d&&this.checkStatus()}},{key:"update",value:function(e){var t=e.attachments,n=void 0===t?{}:t,r=e.readBuffer,i=e.drawBuffers,o=e.clearAttachments,a=void 0!==o&&o;this.attach(n,{clearAttachments:a});var s=this.gl,u=s.bindFramebuffer(36160,this.handle);return r&&this._setReadBuffer(r),i&&this._setDrawBuffers(i),s.bindFramebuffer(36160,u),this}},{key:"resize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.width,n=e.height;if(null===this.handle)return b()(void 0===t&&void 0===n),this.width=this.gl.drawingBufferWidth,this.height=this.gl.drawingBufferHeight,this;void 0===t&&(t=this.gl.drawingBufferWidth),void 0===n&&(n=this.gl.drawingBufferHeight),t!==this.width&&n!==this.height&&m.e.log(2,"Resizing framebuffer "+this.id+" to "+t+"x"+n);for(var r in this.attachments)this.attachments[r].resize({width:t,height:n});return this.width=t,this.height=n,this}},{key:"attach",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.clearAttachments,i=void 0!==r&&r,o={};i&&Object.keys(this.attachments).forEach(function(e){o[e]=null}),Object.assign(o,e);var a=this.gl.bindFramebuffer(36160,this.handle);for(var s in o){b()("undefined"!==s,"Misspelled framebuffer binding point?");var u=o[s],l=u;if(l)if(l instanceof g.a)this._attachRenderbuffer({attachment:s,renderbuffer:l});else if(Array.isArray(u)){var c=E(u,3),f=c[0],h=c[1],p=void 0===h?0:h,d=c[2],v=void 0===d?0:d;l=f,this._attachTexture({attachment:s,texture:f,layer:p,level:v})}else this._attachTexture({attachment:s,texture:l,layer:0,level:0});else this._unattach({attachment:s});l&&l.resize({width:this.width,height:this.height})}this.gl.bindFramebuffer(36160,a),Object.assign(this.attachments,e),Object.keys(this.attachments).filter(function(e){return!t.attachments[e]}).forEach(function(e){delete t.attachments[e]})}},{key:"checkStatus",value:function(){var e=this.gl,t=e.bindFramebuffer(36160,this.handle),n=e.checkFramebufferStatus(36160);if(e.bindFramebuffer(36160,t),n!==e.FRAMEBUFFER_COMPLETE)throw new Error(l(n));return this}},{key:"clear",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.color,n=e.depth,r=e.stencil,i=e.drawBuffers,o=void 0===i?[]:i,a=this.gl.bindFramebuffer(36160,this.handle);return(t||n||r)&&Object(p.a)(this.gl,{color:t,depth:n,stencil:r}),o.forEach(function(e,t){Object(p.b)({drawBuffer:t,value:e})}),this.gl.bindFramebuffer(36160,a),this}},{key:"readPixels",value:function(e){var t=e.x,n=void 0===t?0:t,r=e.y,i=void 0===r?0:r,o=e.width,a=void 0===o?this.width:o,s=e.height,l=void 0===s?this.height:s,f=e.format,h=void 0===f?c.e.RGBA:f,p=e.type,d=e.pixelArray,v=void 0===d?null:d,g=e.attachment,m=void 0===g?w:g,_=this.gl;if(m===c.e.COLOR_ATTACHMENT0&&null===this.handle&&(m=c.e.FRONT),!v){p=p||_.UNSIGNED_BYTE;var b=Object(y.c)(p,{clamped:!1}),E=u(h);v=v||new b(a*l*E)}p=p||Object(y.b)(v);var x=this.gl.bindFramebuffer(36160,this.handle);return this.gl.readPixels(n,i,a,l,h,p,v),this.gl.bindFramebuffer(36160,x),v}},{key:"copyToDataUrl",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.attachment,n=void 0===t?w:t,r=e.maxHeight,i=void 0===r?Number.MAX_SAFE_INTEGER:r,o=this.readPixels({attachment:n}),a=this.width,s=this.height;s>i;){var u=Object(m.f)({data:o,width:a,height:s});o=u.data,a=u.width,s=u.height}Object(m.a)({data:o,width:a,height:s});var l=document.createElement("canvas");l.width=a,l.height=s;var c=l.getContext("2d"),f=c.createImageData(a,s);return f.data.set(o),c.putImageData(f,0,0),l.toDataURL()}},{key:"copyToImage",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.image,n=void 0===t?null:t,r=e.attachment,i=void 0===r?w:r,o=e.maxHeight,a=(void 0===o&&Number.MAX_SAFE_INTEGER,this.readDataUrl({attachment:i}));return n=n||new Image,n.src=a,n}},{key:"copyToTexture",value:function(e){var t=e.texture,n=e.target,r=e.xoffset,i=void 0===r?0:r,o=e.yoffset,a=void 0===o?0:o,s=e.zoffset,u=void 0===s?0:s,l=e.mipmapLevel,c=void 0===l?0:l,f=e.attachment,h=void 0===f?w:f,p=e.x,d=void 0===p?0:p,v=e.y,g=void 0===v?0:v,y=e.width,m=e.height,_=this.gl,b=_.bindFramebuffer(36160,this.handle),E=_.readBuffer(h);switch(y=Number.isFinite(y)?y:t.width,m=Number.isFinite(m)?m:t.height,t.target){case 3553:case 34067:_.copyTexSubImage2D(n||t.target,c,i,a,d,g,y,m);break;case 35866:case 32879:_.copyTexSubImage3D(n||t.target,c,i,a,u,d,g,y,m)}return _.readBuffer(E),_.bindFramebuffer(36160,b),t}},{key:"blit",value:function(e){var t=e.srcFramebuffer,n=e.attachment,r=void 0===n?w:n,i=e.srcX0,o=void 0===i?0:i,a=e.srcY0,s=void 0===a?0:a,u=e.srcX1,l=e.srcY1,h=e.dstX0,p=void 0===h?0:h,d=e.dstY0,v=void 0===d?0:d,g=e.dstX1,y=e.dstY1,m=e.color,_=void 0===m||m,E=e.depth,x=void 0!==E&&E,T=e.stencil,S=void 0!==T&&T,A=e.mask,C=void 0===A?0:A,O=e.filter,k=void 0===O?c.e.NEAREST:O,P=this.gl;b()(Object(f.h)(P),f.b),t.handle||r!==w||(r=c.e.FRONT),_&&(C|=16384),x&&(C|=256),S&&(C|=1024),b()(C),u=void 0===u?t.width:u,l=void 0===l?t.height:l,g=void 0===g?this.width:g,y=void 0===y?this.height:y;var R=P.bindFramebuffer(36008,this.handle),I=P.bindFramebuffer(36009,t.handle),N=P.readBuffer(r);return P.blitFramebuffer(o,s,u,l,p,v,g,y,C,k),P.readBuffer(N),P.bindFramebuffer(36009,I),P.bindFramebuffer(36008,R),this}},{key:"invalidate",value:function(e){var t=e.attachments,n=void 0===t?[]:t,r=e.x,i=void 0===r?0:r,o=e.y,a=void 0===o?0:o,s=e.width,u=e.height,l=this.gl;b()(Object(f.h)(l,f.b));var c=l.bindFramebuffer(36009,this.handle);return 0===i&&0===a&&void 0===s&&void 0===u?l.invalidateFramebuffer(36009,n):l.invalidateFramebuffer(36009,n,i,a,s,u),l.bindFramebuffer(36009,c),this}},{key:"getAttachmentParameter",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.attachment,n=void 0===t?w:t,r=e.pname,i=this._getAttachmentParameterFallback(r);return null===i&&(this.gl.bindTexture(36160,this.handle),i=this.gl.getFramebufferAttachmentParameter(36160,n,r),this.gl.bindTexture(36160,null)),i}},{key:"getAttachmentParameters",value:function(){var e=(arguments.length>0&&void 0!==arguments[0]&&arguments[0],arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.constructor.ATTACHMENT_PARAMETERS||{}),t={};for(var n in e)t[n]=this.getAttachmentParameter(n);return this}},{key:"show",value:function(){return"undefined"!==typeof window&&window.open(this.copyToDataUrl(),"luma-debug-texture"),this}},{key:"log",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.priority,n=void 0===t?0:t,r=e.message,i=void 0===r?"":r;if(n>m.e.priority||"undefined"===typeof window)return this;i=i||"Framebuffer "+this.id;var o=this.copyToDataUrl({maxHeight:100});return m.e.image({priority:n,message:i,image:o},i),this}},{key:"bind",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.target,n=void 0===t?36160:t;return this.gl.bindFramebuffer(n,this.handle),this}},{key:"unbind",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.target,n=void 0===t?36160:t;return this.gl.bindFramebuffer(n,null),this}},{key:"_createDefaultAttachments",value:function(e){var t=e.color,n=e.depth,i=(e.stencil,e.width),o=e.height,a=null;if(t){var s;a=a||{},a[w]=new v.a(this.gl,{pixels:null,format:c.e.RGBA,type:c.e.UNSIGNED_BYTE,width:i,height:o,mipmaps:!1,parameters:(s={},r(s,c.e.TEXTURE_MIN_FILTER,c.e.NEAREST),r(s,c.e.TEXTURE_MAG_FILTER,c.e.NEAREST),r(s,c.e.TEXTURE_WRAP_S,c.e.CLAMP_TO_EDGE),r(s,c.e.TEXTURE_WRAP_T,c.e.CLAMP_TO_EDGE),s)})}return n&&(a=a||{},a[36096]=new g.a(this.gl,{format:c.e.DEPTH_COMPONENT16,width:i,height:o})),a}},{key:"_unattach",value:function(e){var t=e.attachment;this.gl.bindRenderbuffer(36161,this.handle),this.gl.framebufferRenderbuffer(36160,t,36161,null),delete this.attachments[t]}},{key:"_attachRenderbuffer",value:function(e){var t=e.attachment,n=void 0===t?w:t,r=e.renderbuffer;this.gl.framebufferRenderbuffer(36160,n,36161,r.handle),this.attachments[n]=r}},{key:"_attachTexture",value:function(e){var t=e.attachment,n=void 0===t?w:t,r=e.texture,i=e.layer,o=e.level,a=this.gl;switch(a.bindTexture(r.target,r.handle),r.target){case 35866:case 32879:a.framebufferTextureLayer(36160,n,r.target,o,i);break;case 34067:var u=s(i);a.framebufferTexture2D(36160,n,u,r.handle,o);break;case 3553:a.framebufferTexture2D(36160,n,3553,r.handle,o);break;default:b()(!1,"Illegal texture type")}a.bindTexture(r.target,null),this.attachments[n]=r}},{key:"_setReadBuffer",value:function(e,t){Object(f.h)(e)?e.readBuffer(t):b()(t===w||t===c.e.BACK,"Multiple render targets not supported"),this.readBuffer=t}},{key:"_setDrawBuffers",value:function(e,t){if(Object(f.h)(e))e.drawBuffers(t);else{var n=e.getExtension("WEBGL_draw_buffers");n?n.drawBuffersWEBGL(t):b()(1===t.length&&(t[0]===w||t[0]===c.e.BACK),"Multiple render targets not supported")}this.drawBuffers=t}},{key:"_getAttachmentParameterFallback",value:function(e){var t=Object(h.b)(this.gl);switch(e){case c.e.FRAMEBUFFER_ATTACHMENT_TEXTURE_LAYER:return t.webgl2?null:0;case c.e.FRAMEBUFFER_ATTACHMENT_RED_SIZE:case c.e.FRAMEBUFFER_ATTACHMENT_GREEN_SIZE:case c.e.FRAMEBUFFER_ATTACHMENT_BLUE_SIZE:case c.e.FRAMEBUFFER_ATTACHMENT_ALPHA_SIZE:case c.e.FRAMEBUFFER_ATTACHMENT_DEPTH_SIZE:case c.e.FRAMEBUFFER_ATTACHMENT_STENCIL_SIZE:return t.webgl2?null:8;case c.e.FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE:return t.webgl2?null:c.e.UNSIGNED_INT;case c.e.FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING:return t.webgl2||t.EXT_sRGB?null:c.e.LINEAR;default:return null}}},{key:"_createHandle",value:function(){return this.gl.createFramebuffer()}},{key:"_deleteHandle",value:function(){this.gl.deleteFramebuffer(this.handle)}},{key:"color",get:function(){return this.attachments[w]||null}},{key:"texture",get:function(){return this.attachments[w]||null}},{key:"depth",get:function(){return this.attachments[36096]||null}},{key:"stencil",get:function(){return this.attachments[36128]||null}}]),t}(d.a);t.a=S},function(e,t,n){"use strict";var r=(n(249),n(92));n.d(t,"b",function(){return r.a});var i=(n(250),n(251));n.d(t,"a",function(){return i.a});var o=(n(252),n(21),n(424)),a=n(425);o.a,a.a},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(21),s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=function(e){function t(){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),s(t,[{key:"clone",value:function(){var e=this.constructor,t=(new e).copy(this);return t.check(),t}},{key:"copy",value:function(e){for(var t=0;t<this.ELEMENTS;++t)this[t]=e[t];return this.check(),this}},{key:"set",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];for(var r=0;r<this.ELEMENTS;++r)this[r]=t[r]||0;return this.check(),this}},{key:"fromArray",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=0;n<this.ELEMENTS;++n)this[n]=e[n+t];return this.check(),this}},{key:"toString",value:function(){return this.formatString(a.c)}},{key:"formatString",value:function(e){for(var t="",n=0;n<this.ELEMENTS;++n)t+=(n>0?", ":"")+Object(a.f)(this[n],e);return(e.printTypes?this.constructor.name:"")+"["+t+"]"}},{key:"toArray",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=0;n<this.ELEMENTS;++n)e[t+n]=this[n];return e}},{key:"toFloat32Array",value:function(){return new Float32Array(this)}},{key:"equals",value:function(e){if(!e||this.length!==e.length)return!1;for(var t=0;t<this.ELEMENTS;++t)if(!Object(a.e)(this[t],e[t]))return!1;return!0}},{key:"exactEquals",value:function(e){if(!e||this.length!==e.length)return!1;for(var t=0;t<this.ELEMENTS;++t)if(this[t]!==e[t])return!1;return!0}},{key:"length",value:function(){return Math.sqrt(this.lengthSquared())}},{key:"lengthSquared",value:function(){var e=0;if(0!==e)for(var t=0;t<this.ELEMENTS;++t)e+=this[t]*this[t];return Object(a.a)(this)}},{key:"distance",value:function(e){return Math.sqrt(this.distanceSquared(e))}},{key:"distanceSquared",value:function(e){for(var t=0,n=0;n<this.ELEMENTS;++n){var r=this[n]-e[n];t+=r*r}return Object(a.a)(t)}},{key:"normalize",value:function(){var e=this.length();if(0!==e)for(var t=0;t<this.ELEMENTS;++t)this[t]/=e;return this.check(),this}},{key:"validate",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this,t=e&&e.length===this.ELEMENTS,n=0;n<this.ELEMENTS;++n)t=t&&Number.isFinite(e[n]);return t}},{key:"check",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this;if(a.c.debug&&!this.validate(e))throw new Error("Invalid "+this.constructor.name);return this}}]),t}(function(e){function t(){var t=Reflect.construct(e,Array.from(arguments));return Object.setPrototypeOf(t,Object.getPrototypeOf(this)),t}return t.prototype=Object.create(e.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e,t}(Array));t.a=u},function(e,t){e.exports={}},function(e,t,n){var r=n(163),i=n(111);e.exports=Object.keys||function(e){return r(e,i)}},function(e,t,n){e.exports={default:n(361),__esModule:!0}},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(364),s=n(61),u=n(225),l=n(73),c=n.n(l),f=n(74),h=n.n(f),p=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),d=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.width,o=e.height,a=e.latitude,u=void 0===a?0:a,l=e.longitude,c=void 0===l?0:l,f=e.zoom,h=void 0===f?0:f,p=e.pitch,d=void 0===p?0:p,v=e.bearing,g=void 0===v?0:v,y=e.altitude,m=void 0===y?1.5:y,_=e.farZMultiplier,b=void 0===_?10:_;r(this,t),n=n||1,o=o||1;var E=Object(s.k)(h);m=Math.max(.75,m);var x=Object(s.e)({longitude:c,latitude:u,scale:E}),w=Object(s.c)({width:n,height:o,pitch:d,bearing:g,altitude:m,farZMultiplier:b}),T=Object(s.d)({height:o,center:x,pitch:d,bearing:g,altitude:m,flipY:!0}),S=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,{width:n,height:o,viewMatrix:T,projectionMatrix:w}));return S.latitude=u,S.longitude=c,S.zoom=h,S.pitch=d,S.bearing=g,S.altitude=m,S.scale=E,S.center=x,Object.freeze(S),S}return o(t,e),p(t,[{key:"projectFlat",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.scale;return Object(s.f)(e,t)}},{key:"unprojectFlat",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.scale;return Object(s.i)(e,t)}},{key:"getMapCenterByLngLatPosition",value:function(e){var t=e.lngLat,n=e.pos,r=Object(s.g)(n,this.pixelUnprojectionMatrix),i=Object(s.f)(t,this.scale),o=c()([],i,h()([],r)),a=c()([],this.center,o);return Object(s.i)(a,this.scale)}},{key:"getLocationAtPoint",value:function(e){var t=e.lngLat,n=e.pos;return this.getMapCenterByLngLatPosition({lngLat:t,pos:n})}},{key:"fitBounds",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=this.width,i=this.height,o=Object(u.a)(Object.assign({width:r,height:i,bounds:e},n));return new t({width:r,height:i,longitude:o.longitude,latitude:o.latitude,zoom:o.zoom})}}]),t}(a.a);t.a=d},function(e,t,n){function r(e,t,n,r){var o,a,s,u,l,c,f,h,p,d,v=t[0],g=t[1],y=t[2],m=r[0],_=r[1],b=r[2],E=n[0],x=n[1],w=n[2];return Math.abs(v-E)<1e-6&&Math.abs(g-x)<1e-6&&Math.abs(y-w)<1e-6?i(e):(f=v-E,h=g-x,p=y-w,d=1/Math.sqrt(f*f+h*h+p*p),f*=d,h*=d,p*=d,o=_*p-b*h,a=b*f-m*p,s=m*h-_*f,d=Math.sqrt(o*o+a*a+s*s),d?(d=1/d,o*=d,a*=d,s*=d):(o=0,a=0,s=0),u=h*s-p*a,l=p*o-f*s,c=f*a-h*o,d=Math.sqrt(u*u+l*l+c*c),d?(d=1/d,u*=d,l*=d,c*=d):(u=0,l=0,c=0),e[0]=o,e[1]=u,e[2]=f,e[3]=0,e[4]=a,e[5]=l,e[6]=h,e[7]=0,e[8]=s,e[9]=c,e[10]=p,e[11]=0,e[12]=-(o*v+a*g+s*y),e[13]=-(u*v+l*g+c*y),e[14]=-(f*v+h*g+p*y),e[15]=1,e)}var i=n(369);e.exports=r},function(e,t){function n(e,t,n){var r=t[0],i=t[1],o=t[2],a=t[3];return e[0]=n[0]*r+n[4]*i+n[8]*o+n[12]*a,e[1]=n[1]*r+n[5]*i+n[9]*o+n[13]*a,e[2]=n[2]*r+n[6]*i+n[10]*o+n[14]*a,e[3]=n[3]*r+n[7]*i+n[11]*o+n[15]*a,e}e.exports=n},function(e,t,n){"use strict";function r(e){return Math.pow(2,e)}function i(e){return Math.log2(e)}function o(e,t){var n=I(e,2),r=n[0],i=n[1];t*=F;var o=r*L,a=i*L;return[t*(o+N)/(2*N),t*(N-Math.log(Math.tan(M+.5*a)))/(2*N)]}function a(e,t){var n=I(e,2),r=n[0],i=n[1];t*=F;var o=r/t*(2*N)-N,a=2*(Math.atan(Math.exp(N-i/t*(2*N)))-M);return[o*D,a*D]}function s(e){var t=e.latitude;R()(t);var n=Math.cos(t*L);return i(j*n)-8}function u(e){var t=e.latitude,n=e.longitude,i=e.zoom,o=e.scale,a=e.highPrecision,s=void 0!==a&&a;o=void 0!==o?o:r(i),R()(isFinite(t)&&isFinite(n)&&isFinite(o));var u={},l=F*o,c=Math.cos(t*L),f=l/360,h=f/c,p=l/j/c;if(u.pixelsPerMeter=[p,p,p],u.metersPerPixel=[1/p,1/p,1/p],u.pixelsPerDegree=[f,h,p],u.degreesPerPixel=[1/f,1/h,1/p],s){var d=L*Math.tan(t*L)/c,v=f*d/2,g=l/j*d,y=g/h*p;u.pixelsPerDegree2=[0,v,g],u.pixelsPerMeter2=[y,0,y]}return u}function l(e){var t=e.longitude,n=e.latitude,i=e.zoom,a=e.scale,s=e.meterOffset,l=e.distanceScales,c=void 0===l?null:l;a=void 0!==a?a:r(i);var f=o([t,n],a),h=new g.Vector3(f[0],f[1],0);if(s){c=c||u({latitude:n,longitude:t,scale:a});var p=new g.Vector3(s).scale(c.pixelsPerMeter).scale([1,-1,1]);h.add(p)}return h}function c(e){var t=e.height,n=e.altitude;return 2*Math.atan(t/2/n)}function f(e){var t=e.altitude,n=e.pitch,r=n*L,i=Math.atan(.5/t),o=Math.sin(i)*t/Math.sin(Math.PI/2-r-i);return{farZ:Math.cos(Math.PI/2-r)*o+t,nearZ:.1}}function h(e){var t=e.height,n=e.pitch,r=e.bearing,i=e.altitude,o=e.center,a=void 0===o?null:o,s=e.flipY,u=void 0!==s&&s,l=Object(y.a)();return w()(l,l,[0,0,-i]),E()(l,l,[1,1,1/t]),S()(l,l,-n*L),C()(l,l,r*L),u&&E()(l,l,[1,-1,1]),a&&w()(l,l,new g.Vector3(a).negate()),l}function p(e){var t=e.width,n=e.height,r=e.pitch,i=e.altitude,o=e.farZMultiplier,a=void 0===o?10:o,s=f({altitude:i,pitch:r}),u=s.nearZ,l=s.farZ,h=c({height:n,altitude:i});return _()([],h,t/n,u,l*a)}function d(e,t){var n=I(e,3),r=n[0],i=n[1],o=n[2],a=void 0===o?0:o;return R()(isFinite(r)&&isFinite(i)&&isFinite(a)),Object(y.d)(t,[r,i,a,1])}function v(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=I(e,3),i=r[0],o=r[1],a=r[2];if(R()(isFinite(i)&&isFinite(o)),Number.isFinite(a)){return Object(y.d)(t,[i,o,a,1])}var s=Object(y.d)(t,[i,o,0,1]),u=Object(y.d)(t,[i,o,1,1]),l=s[2],c=u[2],f=l===c?0:((n||0)-l)/(c-l);return k()([],s,u,f)}t.k=r,t.h=i,t.f=o,t.i=a,t.b=s,t.a=u,t.e=l,t.d=h,t.c=p,t.j=d,t.g=v;var g=n(19),y=n(80),m=n(46),_=n.n(m),b=n(49),E=n.n(b),x=n(50),w=n.n(x),T=n(78),S=n.n(T),A=n(48),C=n.n(A),O=n(118),k=n.n(O),P=n(0),R=n.n(P),I=function(){function e(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),N=Math.PI,M=N/4,L=N/180,D=180/N,F=512,j=4003e4},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(388);Object.defineProperty(t,"EventManager",{enumerable:!0,get:function(){return r(i).default}})},function(e,t,n){"use strict";function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function i(e){return Array.isArray(e)||ArrayBuffer.isView(e)}function o(e,t){Object(f.d)(e,t);for(var n in t){var r=p[n];r&&r(e,t[n],n)}}function a(e,t,n){var r=t.nocatch,i=void 0===r||r;c()(!t.frameBuffer),Object(u.c)(e),o(e,t);var a=void 0;if(i)a=n(e),Object(u.b)(e);else try{a=n(e)}finally{Object(u.b)(e)}return a}t.b=o,t.c=a;var s=n(27),u=n(137),l=n(0),c=n.n(l),f=n(236);n.d(t,"a",function(){return f.c});var h=function(){function e(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),p={framebuffer:function(e,t){var n=t&&t.handle?t.handle:t;return e.bindFramebuffer(s.a.FRAMEBUFFER,n)},blend:function(e,t){return t?e.enable(s.a.BLEND):e.disable(s.a.BLEND)},blendColor:function(e,t){return e.blendColor.apply(e,r(t))},blendEquation:function(e,t){t=i(t)?t:[t,t],e.blendEquationSeparate.apply(e,r(t))},blendFunc:function(e,t){t=i(t)&&2===t.length?[].concat(r(t),r(t)):t,e.blendFuncSeparate.apply(e,r(t))},clearColor:function(e,t){return e.clearColor.apply(e,r(t))},clearDepth:function(e,t){return e.clearDepth(t)},clearStencil:function(e,t){return e.clearStencil(t)},colorMask:function(e,t){return e.colorMask.apply(e,r(t))},cull:function(e,t){return t?e.enable(s.a.CULL_FACE):e.disable(s.a.CULL_FACE)},cullFace:function(e,t){return e.cullFace(t)},depthTest:function(e,t){return t?e.enable(s.a.DEPTH_TEST):e.disable(s.a.DEPTH_TEST)},depthFunc:function(e,t){return e.depthFunc(t)},depthMask:function(e,t){return e.depthMask(t)},depthRange:function(e,t){return e.depthRange.apply(e,r(t))},dither:function(e,t){return t?e.enable(s.a.DITHER):e.disable(s.a.DITHER)},derivativeHint:function(e,t){e.hint(s.a.FRAGMENT_SHADER_DERIVATIVE_HINT,t)},frontFace:function(e,t){return e.frontFace(t)},mipmapHint:function(e,t){return e.hint(s.a.GENERATE_MIPMAP_HINT,t)},lineWidth:function(e,t){return e.lineWidth(t)},polygonOffsetFill:function(e,t){return t?e.enable(s.a.POLYGON_OFFSET_FILL):e.disable(s.a.POLYGON_OFFSET_FILL)},polygonOffset:function(e,t){return e.polygonOffset.apply(e,r(t))},sampleCoverage:function(e,t){return e.sampleCoverage.apply(e,r(t))},scissorTest:function(e,t){return t?e.enable(s.a.SCISSOR_TEST):e.disable(s.a.SCISSOR_TEST)},scissor:function(e,t){return e.scissor.apply(e,r(t))},stencilTest:function(e,t){return t?e.enable(s.a.STENCIL_TEST):e.disable(s.a.STENCIL_TEST)},stencilMask:function(e,t){t=i(t)?t:[t,t];var n=t,r=h(n,2),o=r[0],a=r[1];e.stencilMaskSeparate(s.a.FRONT,o),e.stencilMaskSeparate(s.a.BACK,a)},stencilFunc:function(e,t){t=i(t)&&3===t.length?[].concat(r(t),r(t)):t;var n=t,o=h(n,6),a=o[0],u=o[1],l=o[2],c=o[3],f=o[4],p=o[5];e.stencilFuncSeparate(s.a.FRONT,a,u,l),e.stencilFuncSeparate(s.a.BACK,c,f,p)},stencilOp:function(e,t){t=i(t)&&3===t.length?[].concat(r(t),r(t)):t;var n=t,o=h(n,6),a=o[0],u=o[1],l=o[2],c=o[3],f=o[4],p=o[5];e.stencilOpSeparate(s.a.FRONT,a,u,l),e.stencilOpSeparate(s.a.BACK,c,f,p)},viewport:function(e,t){return e.viewport.apply(e,r(t))}}},function(e,t,n){"use strict";n.d(t,"a",function(){return r}),n.d(t,"b",function(){return i});var r={LNGLAT:1,METER_OFFSETS:2,METERS:2,LNGLAT_OFFSETS:3,IDENTITY:0},i={NO_STATE:"Awaiting state",MATCHED:"Matched. State transferred from previous layer",INITIALIZED:"Intialized",AWAITING_GC:"Discarded. Awaiting garbage collection",AWAITING_FINALIZATION:"No longer matched. Awaiting garbage collection",FINALIZED:"Finalized! Awaiting garbage collection"}},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(29),s=n(25),u=n(73),l=n.n(u),c=n(74),f=n.n(c),h=n(0),p=n.n(h),d=function(){function e(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),v=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),g="Illegal argument to WebMercatorViewport",y=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r(this,t);var n=e.latitude,o=void 0===n?0:n,a=e.longitude,u=void 0===a?0:a,l=e.zoom,c=void 0===l?11:l,f=e.pitch,h=void 0===f?0:f,p=e.bearing,d=void 0===p?0:p,v=e.farZMultiplier,g=void 0===v?10:v,y=e.width,m=e.height,_=e.altitude,b=void 0===_?1.5:_;y=y||1,m=m||1,b=Math.max(.75,b);var E=Object(s.getProjectionMatrix)({width:y,height:m,pitch:h,altitude:b,farZMultiplier:g}),x=Object(s.getViewMatrix)({height:m,pitch:h,bearing:d,altitude:b}),w=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,Object.assign({},e,{position:e.position&&[e.position[0],e.position[1],0],width:y,height:m,viewMatrix:x,longitude:u,latitude:o,zoom:c,projectionMatrix:E,focalDistance:1})));return w.latitude=o,w.longitude=u,w.zoom=c,w.pitch=h,w.bearing=d,w.altitude=b,w.metersToLngLatDelta=w.metersToLngLatDelta.bind(w),w.lngLatDeltaToMeters=w.lngLatDeltaToMeters.bind(w),w.addMetersToLngLat=w.addMetersToLngLat.bind(w),Object.freeze(w),w}return o(t,e),v(t,[{key:"_projectFlat",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.scale;return Object(s.lngLatToWorld)(e,t)}},{key:"_unprojectFlat",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.scale;return Object(s.worldToLngLat)(e,t)}},{key:"metersToLngLatDelta",value:function(e){var t=d(e,3),n=t[0],r=t[1],i=t[2],o=void 0===i?0:i;p()(Number.isFinite(n)&&Number.isFinite(r)&&Number.isFinite(o),g);var a=this.distanceScales,s=a.pixelsPerMeter,u=a.degreesPerPixel,l=n*s[0]*u[0],c=r*s[1]*u[1];return 2===e.length?[l,c]:[l,c,o]}},{key:"lngLatDeltaToMeters",value:function(e){var t=d(e,3),n=t[0],r=t[1],i=t[2],o=void 0===i?0:i;p()(Number.isFinite(n)&&Number.isFinite(r)&&Number.isFinite(o),g);var a=this.distanceScales,s=a.pixelsPerDegree,u=a.metersPerPixel,l=n*s[0]*u[0],c=r*s[1]*u[1];return 2===e.length?[l,c]:[l,c,o]}},{key:"addMetersToLngLat",value:function(e,t){var n=d(e,3),r=n[0],i=n[1],o=n[2],a=void 0===o?0:o,s=this.metersToLngLatDelta(t),u=d(s,3),l=u[0],c=u[1],f=u[2],h=void 0===f?0:f;return 2===e.length?[r+l,i+c]:[r+l,i+c,a+h]}},{key:"getMapCenterByLngLatPosition",value:function(e){var t=e.lngLat,n=e.pos,r=Object(s.pixelsToWorld)(n,this.pixelUnprojectionMatrix),i=Object(s.lngLatToWorld)(t,this.scale),o=l()([],i,f()([],r)),a=l()([],this.center,o);return Object(s.worldToLngLat)(a,this.scale)}},{key:"getLocationAtPoint",value:function(e){var t=e.lngLat,n=e.pos;return this.getMapCenterByLngLatPosition({lngLat:t,pos:n})}},{key:"fitBounds",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=this.width,i=this.height,o=Object(s.fitBounds)(Object.assign({width:r,height:i,bounds:e},n));return new t({width:r,height:i,longitude:o.longitude,latitude:o.latitude,zoom:o.zoom})}},{key:"isMapSynched",value:function(){var e={pitch:60,zoom:40},t=this.pitch,n=this.zoom;return t<=e.pitch+1e-6&&n<=e.zoom+1e-6}}]),t}(a.a);t.a=y,y.displayName="WebMercatorViewport"},function(e,t,n){"use strict";function r(e){return function(){return e}}var i=function(){};i.thatReturns=r,i.thatReturnsFalse=r(!1),i.thatReturnsTrue=r(!0),i.thatReturnsNull=r(null),i.thatReturnsThis=function(){return this},i.thatReturnsArgument=function(e){return e},e.exports=i},function(e,t,n){var r=n(101);e.exports=function(e){return Object(r(e))}},function(e,t){var n=0,r=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++n+r).toString(36))}},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var i=n(317),o=r(i),a=n(329),s=r(a),u="function"===typeof s.default&&"symbol"===typeof o.default?function(e){return typeof e}:function(e){return e&&"function"===typeof s.default&&e.constructor===s.default&&e!==s.default.prototype?"symbol":typeof e};t.default="function"===typeof s.default&&"symbol"===u(o.default)?function(e){return"undefined"===typeof e?"undefined":u(e)}:function(e){return e&&"function"===typeof s.default&&e.constructor===s.default&&e!==s.default.prototype?"symbol":"undefined"===typeof e?"undefined":u(e)}},function(e,t){t.f={}.propertyIsEnumerable},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(16),s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=function(e){function t(){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),s(t,[{key:"clone",value:function(){var e=this.constructor,t=(new e).copy(this);return t.check(),t}},{key:"copy",value:function(e){for(var t=0;t<this.ELEMENTS;++t)this[t]=e[t];return this.check()}},{key:"set",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];for(var r=0;r<this.ELEMENTS;++r)this[r]=t[r]||0;return this.check()}},{key:"fromArray",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=0;n<this.ELEMENTS;++n)this[n]=e[n+t];return this.check()}},{key:"toString",value:function(){return this.formatString(a.g)}},{key:"formatString",value:function(e){for(var t="",n=0;n<this.ELEMENTS;++n)t+=(n>0?", ":"")+Object(a.l)(this[n],e);return(e.printTypes?this.constructor.name:"")+"["+t+"]"}},{key:"toArray",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=0;n<this.ELEMENTS;++n)e[t+n]=this[n];return e}},{key:"toFloat32Array",value:function(){return new Float32Array(this)}},{key:"equals",value:function(e){if(!e||this.length!==e.length)return!1;for(var t=0;t<this.ELEMENTS;++t)if(!Object(a.k)(this[t],e[t]))return!1;return!0}},{key:"exactEquals",value:function(e){if(!e||this.length!==e.length)return!1;for(var t=0;t<this.ELEMENTS;++t)if(this[t]!==e[t])return!1;return!0}},{key:"negate",value:function(){for(var e=0;e<this.ELEMENTS;++e)this[e]=-this[e];return this.check()}},{key:"inverse",value:function(){for(var e=0;e<this.ELEMENTS;++e)this[e]=1/this[e];return this.check()}},{key:"lerp",value:function(e,t){for(var n=0;n<this.ELEMENTS;++n){var r=this[n];this[n]=r+t*(e[0]-r)}return this.check()}},{key:"validate",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this,t=e&&e.length===this.ELEMENTS,n=0;n<this.ELEMENTS;++n)t=t&&Number.isFinite(e[n]);return t}},{key:"check",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this;if(a.g.debug&&!this.validate(e))throw new Error("Invalid "+this.constructor.name);return this}}]),t}(function(e){function t(){var t=Reflect.construct(e,Array.from(arguments));return Object.setPrototypeOf(t,Object.getPrototypeOf(this)),t}return t.prototype=Object.create(e.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e,t}(Array));t.a=u},function(e,t){function n(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e}e.exports=n},function(e,t){function n(e,t){return e[0]=-t[0],e[1]=-t[1],e}e.exports=n},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e){return 3===e.length&&Number.isFinite(e[0])&&Number.isFinite(e[1])&&Number.isFinite(e[2])}t.b=a;var s=n(117),u=n(16),l=n(181),c=n.n(l),f=n(182),h=n.n(f),p=n(183),d=n.n(p),v=n(184),g=n.n(v),y=n(185),m=n.n(y),_=n(186),b=n.n(_),E=n(187),x=n.n(E),w=n(188),T=n.n(w),S=n(121),A=n.n(S),C=n(189),O=n.n(C),k=n(190),P=n.n(k),R=n(191),I=n.n(R),N=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),M=[0,0,0],L=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;r(this,t);var a=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return Array.isArray(e)&&1===arguments.length?a.copy(e):a.set(e,n,o),a}return o(t,e),N(t,[{key:"set",value:function(e,t,n){return c()(this,e,t,n),this.check()}},{key:"angle",value:function(e){return h()(this,e)}},{key:"add",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var u=a.value;d()(this,this,u)}}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return this.check()}},{key:"subtract",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var u=a.value;g()(this,this,u)}}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return this.check()}},{key:"multiply",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var u=a.value;m()(this,this,u)}}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return this.check()}},{key:"scale",value:function(e){return Number.isFinite(e)?x()(this,this,e):m()(this,this,e),this.check()}},{key:"cross",value:function(e){return A()(this,this,e),this.check()}},{key:"rotateX",value:function(e){var t=e.radians,n=e.origin,r=void 0===n?M:n;return O()(this,this,r,t),this.check()}},{key:"rotateY",value:function(e){var t=e.radians,n=e.origin,r=void 0===n?M:n;return P()(this,this,r,t),this.check()}},{key:"rotateZ",value:function(e){var t=e.radians,n=e.origin,r=void 0===n?M:n;return I()(this,this,r,t),this.check()}},{key:"operation",value:function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return e.apply(void 0,[this,this].concat(n)),this.check()}},{key:"divide",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var u=a.value;b()(this,this,u)}}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return this.check()}},{key:"scaleAndAdd",value:function(e,t){return T()(this,this,e,t),this.check()}},{key:"ELEMENTS",get:function(){return 3}},{key:"x",get:function(){return this[0]},set:function(e){return this[0]=Object(u.d)(e)}},{key:"y",get:function(){return this[1]},set:function(e){return this[1]=Object(u.d)(e)}},{key:"z",get:function(){return this[2]},set:function(e){return this[2]=Object(u.d)(e)}}]),t}(s.a);t.a=L},function(e,t){function n(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e}e.exports=n},function(e,t){function n(e,t){var n=t[0],r=t[1],i=t[2],o=t[3],a=t[4],s=t[5],u=t[6],l=t[7],c=t[8],f=t[9],h=t[10],p=t[11],d=t[12],v=t[13],g=t[14],y=t[15],m=n*s-r*a,_=n*u-i*a,b=n*l-o*a,E=r*u-i*s,x=r*l-o*s,w=i*l-o*u,T=c*v-f*d,S=c*g-h*d,A=c*y-p*d,C=f*g-h*v,O=f*y-p*v,k=h*y-p*g,P=m*k-_*O+b*C+E*A-x*S+w*T;return P?(P=1/P,e[0]=(s*k-u*O+l*C)*P,e[1]=(i*O-r*k-o*C)*P,e[2]=(v*w-g*x+y*E)*P,e[3]=(h*x-f*w-p*E)*P,e[4]=(u*A-a*k-l*S)*P,e[5]=(n*k-i*A+o*S)*P,e[6]=(g*b-d*w-y*_)*P,e[7]=(c*w-h*b+p*_)*P,e[8]=(a*O-s*A+l*T)*P,e[9]=(r*A-n*O-o*T)*P,e[10]=(d*x-v*b+y*m)*P,e[11]=(f*b-c*x-p*m)*P,e[12]=(s*S-a*C-u*T)*P,e[13]=(n*C-r*S+i*T)*P,e[14]=(v*_-d*E-g*m)*P,e[15]=(c*E-f*_+h*m)*P,e):null}e.exports=n},function(e,t){function n(e,t,n){var r=Math.sin(n),i=Math.cos(n),o=t[4],a=t[5],s=t[6],u=t[7],l=t[8],c=t[9],f=t[10],h=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=o*i+l*r,e[5]=a*i+c*r,e[6]=s*i+f*r,e[7]=u*i+h*r,e[8]=l*i-o*r,e[9]=c*i-a*r,e[10]=f*i-s*r,e[11]=h*i-u*r,e}e.exports=n},function(e,t){function n(e){var t=e[0],n=e[1],r=e[2];return Math.sqrt(t*t+n*n+r*r)}e.exports=n},function(e,t,n){"use strict";function r(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function i(e,t){var n=c()([],t,e);return u()(n,n,1/n[3]),n}function o(e,t){var n=e%t;return n<0?t+n:n}function a(e,t,n){return n*t+(1-n)*e}t.a=r,t.d=i,t.c=o,t.b=a;var s=n(76),u=n.n(s),l=n(60),c=n.n(l)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t,n){return e<t?t:e>n?n:e}Object.defineProperty(t,"__esModule",{value:!0}),t.MAPBOX_LIMITS=void 0;var o=n(378),a=r(o),s=n(9),u=r(s),l=n(82),c=r(l),f=n(132),h=r(f),p=n(6),d=r(p),v=n(7),g=r(v),y=n(25),m=r(y),_=n(0),b=r(_),E=t.MAPBOX_LIMITS={minZoom:0,maxZoom:20,minPitch:0,maxPitch:60},x={pitch:0,bearing:0,altitude:1.5},w=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.width,r=t.height,i=t.latitude,o=t.longitude,a=t.zoom,s=t.bearing,u=void 0===s?x.bearing:s,l=t.pitch,c=void 0===l?x.pitch:l,f=t.altitude,p=void 0===f?x.altitude:f,v=t.maxZoom,g=void 0===v?E.maxZoom:v,y=t.minZoom,m=void 0===y?E.minZoom:y,_=t.maxPitch,w=void 0===_?E.maxPitch:_,T=t.minPitch,S=void 0===T?E.minPitch:T,A=t.startPanLngLat,C=t.startZoomLngLat,O=t.startBearing,k=t.startPitch,P=t.startZoom;(0,d.default)(this,e),(0,b.default)((0,h.default)(n),"`width` must be supplied"),(0,b.default)((0,h.default)(r),"`height` must be supplied"),(0,b.default)((0,h.default)(o),"`longitude` must be supplied"),(0,b.default)((0,h.default)(i),"`latitude` must be supplied"),(0,b.default)((0,h.default)(a),"`zoom` must be supplied"),this._viewportProps=this._applyConstraints({width:n,height:r,latitude:i,longitude:o,zoom:a,bearing:u,pitch:c,altitude:p,maxZoom:g,minZoom:m,maxPitch:w,minPitch:S}),this._interactiveState={startPanLngLat:A,startZoomLngLat:C,startBearing:O,startPitch:k,startZoom:P}}return(0,g.default)(e,[{key:"getViewportProps",value:function(){return this._viewportProps}},{key:"getInteractiveState",value:function(){return this._interactiveState}},{key:"panStart",value:function(e){var t=e.pos;return this._getUpdatedMapState({startPanLngLat:this._unproject(t)})}},{key:"pan",value:function(e){var t=e.pos,n=e.startPos,r=this._interactiveState.startPanLngLat||this._unproject(n);if(!r)return this;var i=this._calculateNewLngLat({startPanLngLat:r,pos:t}),o=(0,c.default)(i,2),a=o[0],s=o[1];return this._getUpdatedMapState({longitude:a,latitude:s})}},{key:"panEnd",value:function(){return this._getUpdatedMapState({startPanLngLat:null})}},{key:"rotateStart",value:function(e){e.pos;return this._getUpdatedMapState({startBearing:this._viewportProps.bearing,startPitch:this._viewportProps.pitch})}},{key:"rotate",value:function(e){var t=e.deltaScaleX,n=void 0===t?0:t,r=e.deltaScaleY,i=void 0===r?0:r,o=this._interactiveState,a=o.startBearing,s=o.startPitch;if(!(0,h.default)(a)||!(0,h.default)(s))return this;var u=this._calculateNewPitchAndBearing({deltaScaleX:n,deltaScaleY:i,startBearing:a,startPitch:s}),l=u.pitch,c=u.bearing;return this._getUpdatedMapState({bearing:c,pitch:l})}},{key:"rotateEnd",value:function(){return this._getUpdatedMapState({startBearing:null,startPitch:null})}},{key:"zoomStart",value:function(e){var t=e.pos;return this._getUpdatedMapState({startZoomLngLat:this._unproject(t),startZoom:this._viewportProps.zoom})}},{key:"zoom",value:function(e){var t=e.pos,n=e.startPos,r=e.scale;(0,b.default)(r>0,"`scale` must be a positive number");var i=this._interactiveState,o=i.startZoom,a=i.startZoomLngLat;(0,h.default)(o)||(o=this._viewportProps.zoom,a=this._unproject(n)||this._unproject(t)),(0,b.default)(a,"`startZoomLngLat` prop is required for zoom behavior to calculate where to position the map.");var s=this._calculateNewZoom({scale:r,startZoom:o}),l=new m.default((0,u.default)({},this._viewportProps,{zoom:s})),f=l.getLocationAtPoint({lngLat:a,pos:t}),p=(0,c.default)(f,2),d=p[0],v=p[1];return this._getUpdatedMapState({zoom:s,longitude:d,latitude:v})}},{key:"zoomEnd",value:function(){return this._getUpdatedMapState({startZoomLngLat:null,startZoom:null})}},{key:"_getUpdatedMapState",value:function(t){return new e((0,u.default)({},this._viewportProps,this._interactiveState,t))}},{key:"_applyConstraints",value:function(e){var t=e.maxZoom,n=e.minZoom,r=e.zoom;e.zoom=i(r,n,t);var o=e.maxPitch,a=e.minPitch,s=e.pitch;return e.pitch=i(s,a,o),(0,u.default)(e,(0,y.normalizeViewportProps)(e)),e}},{key:"_unproject",value:function(e){var t=new m.default(this._viewportProps);return e&&t.unproject(e)}},{key:"_calculateNewLngLat",value:function(e){var t=e.startPanLngLat,n=e.pos;return new m.default(this._viewportProps).getMapCenterByLngLatPosition({lngLat:t,pos:n})}},{key:"_calculateNewZoom",value:function(e){var t=e.scale,n=e.startZoom,r=this._viewportProps,o=r.maxZoom,s=r.minZoom;return i(n+(0,a.default)(t),s,o)}},{key:"_calculateNewPitchAndBearing",value:function(e){var t=e.deltaScaleX,n=e.deltaScaleY,r=e.startBearing,o=e.startPitch;n=i(n,-1,1);var a=this._viewportProps,s=a.minPitch,u=a.maxPitch,l=r+180*t,c=o;return n>0?c=o+n*(u-o):n<0&&(c=o-n*(s-o)),{pitch:c,bearing:l}}}]),e}();t.default=w},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var i=n(381),o=r(i),a=n(33),s=r(a);t.default=function(){function e(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,u=(0,s.default)(e);!(r=(a=u.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{!r&&u.return&&u.return()}finally{if(i)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if((0,o.default)(Object(t)))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}()},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.TRANSITION_EVENTS=void 0;var i=n(9),o=r(i),a=n(6),s=r(a),u=n(7),l=r(u),c=n(0),f=r(c),h=n(133),p=n(81),d=r(p),v=function(){},g=t.TRANSITION_EVENTS={BREAK:1,SNAP_TO_END:2,IGNORE:3},y={transitionDuration:0,transitionEasing:function(e){return e},transitionInterpolator:new h.LinearInterpolator,transitionInterruption:g.BREAK,onTransitionStart:v,onTransitionInterrupt:v,onTransitionEnd:v},m={animation:null,propsInTransition:null,startProps:null,endProps:null},_=function(){function e(t){(0,s.default)(this,e),this.props=t,this.state=m,this._onTransitionFrame=this._onTransitionFrame.bind(this)}return(0,l.default)(e,[{key:"getViewportInTransition",value:function(){return this.state.propsInTransition}},{key:"processViewportChange",value:function(e){var t=!1,n=this.props;if(this.props=e,this._shouldIgnoreViewportChange(n,e))return t;var r=this._isTransitionInProgress();if(this._isTransitionEnabled(e)){var i=(0,o.default)({},n,this.state.interruption===g.SNAP_TO_END?this.state.endProps:this.state.propsInTransition);r&&n.onTransitionInterrupt(),e.onTransitionStart(),this._triggerTransition(i,e),t=!0}else r&&(n.onTransitionInterrupt(),this._endTransition());return t}},{key:"_isTransitionInProgress",value:function(){return Boolean(this.state.propsInTransition)}},{key:"_isTransitionEnabled",value:function(e){return e.transitionDuration>0&&Boolean(e.transitionInterpolator)}},{key:"_isUpdateDueToCurrentTransition",value:function(e){return!!this.state.propsInTransition&&this.state.interpolator.arePropsEqual(e,this.state.propsInTransition)}},{key:"_shouldIgnoreViewportChange",value:function(e,t){return this._isTransitionInProgress()?this.state.interruption===g.IGNORE||this._isUpdateDueToCurrentTransition(t):!this._isTransitionEnabled(t)||t.transitionInterpolator.arePropsEqual(e,t)}},{key:"_triggerTransition",value:function(e,t){(0,f.default)(this._isTransitionEnabled(t),"Transition is not enabled"),cancelAnimationFrame(this.state.animation);var n=t.transitionInterpolator.initializeProps(e,t);this.state={duration:t.transitionDuration,easing:t.transitionEasing,interpolator:t.transitionInterpolator,interruption:t.transitionInterruption,startTime:Date.now(),startProps:n.start,endProps:n.end,animation:null,propsInTransition:{}},this._onTransitionFrame()}},{key:"_onTransitionFrame",value:function(){this.state.animation=requestAnimationFrame(this._onTransitionFrame),this._updateViewport()}},{key:"_endTransition",value:function(){cancelAnimationFrame(this.state.animation),this.state=m}},{key:"_updateViewport",value:function(){var e=Date.now(),t=this.state,n=t.startTime,r=t.duration,i=t.easing,a=t.interpolator,s=t.startProps,u=t.endProps,l=!1,c=(e-n)/r;c>=1&&(c=1,l=!0),c=i(c);var f=a.interpolateProps(s,u,c),h=new d.default((0,o.default)({},this.props,f));this.state.propsInTransition=h.getViewportProps(),this.props.onViewportChange&&this.props.onViewportChange(this.state.propsInTransition),l&&(this._endTransition(),this.props.onTransitionEnd())}}]),e}();t.default=_,_.defaultProps=y},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GESTURE_EVENT_ALIASES=t.EVENT_RECOGNIZER_MAP=t.INPUT_EVENT_TYPES=t.BASIC_EVENT_ALIASES=t.RECOGNIZER_FALLBACK_MAP=t.RECOGNIZER_COMPATIBLE_MAP=t.RECOGNIZERS=void 0;var r=n(227),i=function(e){return e&&e.__esModule?e:{default:e}}(r);t.RECOGNIZERS=i.default?[[i.default.Rotate,{enable:!1}],[i.default.Pinch,{enable:!1}],[i.default.Swipe,{enable:!1}],[i.default.Pan,{threshold:0,enable:!1}],[i.default.Press,{enable:!1}],[i.default.Tap,{event:"doubletap",taps:2,enable:!1}],[i.default.Tap,{enable:!1}]]:null,t.RECOGNIZER_COMPATIBLE_MAP={rotate:["pinch"]},t.RECOGNIZER_FALLBACK_MAP={doubletap:["tap"]},t.BASIC_EVENT_ALIASES={pointerdown:"pointerdown",pointermove:"pointermove",pointerup:"pointerup",touchstart:"pointerdown",touchmove:"pointermove",touchend:"pointerup",mousedown:"pointerdown",mousemove:"pointermove",mouseup:"pointerup"},t.INPUT_EVENT_TYPES={KEY_EVENTS:["keydown","keyup"],MOUSE_EVENTS:["mousedown","mousemove","mouseup","mouseleave"],WHEEL_EVENTS:["wheel","mousewheel","DOMMouseScroll"]},t.EVENT_RECOGNIZER_MAP={tap:"tap",doubletap:"doubletap",press:"press",pinch:"pinch",pinchin:"pinch",pinchout:"pinch",pinchstart:"pinch",pinchmove:"pinch",pinchend:"pinch",pinchcancel:"pinch",rotate:"rotate",rotatestart:"rotate",rotatemove:"rotate",rotateend:"rotate",rotatecancel:"rotate",pan:"pan",panstart:"pan",panmove:"pan",panup:"pan",pandown:"pan",panleft:"pan",panright:"pan",panend:"pan",pancancel:"pan",swipe:"swipe",swipeleft:"swipe",swiperight:"swipe",swipeup:"swipe",swipedown:"swipe"},t.GESTURE_EVENT_ALIASES={click:"tap",dblclick:"doubletap",mousedown:"pointerdown",mousemove:"pointermove",mouseup:"pointerup",mouseleave:"pointerleave"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(233),i=n(234),o=n(135);n.d(t,"global",function(){return i.a});if(i.a.luma&&"5.0.1"!==i.a.luma.VERSION)throw new Error("luma.gl - multiple VERSIONs detected: "+i.a.luma.VERSION+" vs 5.0.1");i.a.luma||(r.a&&console.log("luma.gl 5.0.1 - set luma.log.priority=1 (or higher) to trace rendering"),i.a.luma=i.a.luma||{VERSION:"5.0.1",version:"5.0.1",log:o.a,stats:{},globals:{headlessGL:null,headlessTypes:null,modules:{},nodeIO:{}}}),t.default=i.a.luma},function(e,t,n){"use strict";function r(e,t){var n=c[t];l()(n,t);var r=Object(s.h)(e)?n[1]||n[0]:n[0],i="string"===typeof r?Boolean(e.getExtension(r)):r;return l()(!1===i||!0===i),i}function i(e,t){return o(e,t)}function o(e,t){return t=Array.isArray(t)?t:[t],t.every(function(t){return r(e,t)})}function a(e){if(e.luma=e.luma||{},!e.luma.caps){e.luma.caps={},e.luma.caps.webgl2=Object(s.h)(e);for(var t in c)e.luma.caps[t]=r(e,t)}return e.luma.caps}n.d(t,"a",function(){return f}),t.c=i,t.d=o,t.b=a;var s=n(1),u=n(0),l=n.n(u),c={VERTEX_ARRAY_OBJECT:["OES_vertex_array_object",!0],TIMER_QUERY:["EXT_disjoint_timer_query","EXT_disjoint_timer_query_webgl2"],INSTANCED_RENDERING:["ANGLE_instanced_arrays",!0],MULTIPLE_RENDER_TARGETS:["WEBGL_draw_buffers",!0],ELEMENT_INDEX_UINT32:["OES_element_index_uint",!0],BLEND_EQUATION_MINMAX:["EXT_blend_minmax",!0],COLOR_ENCODING_SRGB:["EXT_sRGB",!0],TEXTURE_DEPTH:["WEBGL_depth_texture",!0],TEXTURE_FLOAT:["OES_texture_float",!0],TEXTURE_HALF_FLOAT:["OES_texture_half_float",!0],TEXTURE_FILTER_LINEAR_FLOAT:["OES_texture_float_linear"],TEXTURE_FILTER_LINEAR_HALF_FLOAT:["OES_texture_half_float_linear"],TEXTURE_FILTER_ANISOTROPIC:["EXT_texture_filter_anisotropic"],COLOR_ATTACHMENT_RGBA32F:["WEBGL_color_buffer_float","EXT_color_buffer_float"],COLOR_ATTACHMENT_FLOAT:[!1,"EXT_color_buffer_float"],COLOR_ATTACHMENT_HALF_FLOAT:[!1,"EXT_color_buffer_half_float"],GLSL_FRAG_DATA:["WEBGL_draw_buffers",!0],GLSL_FRAG_DEPTH:["EXT_frag_depth",!0],GLSL_DERIVATIVES:["OES_standard_derivatives",!0],GLSL_TEXTURE_LOD:["EXT_shader_texture_lod",!0]},f={};Object.keys(c).forEach(function(e){f[e]=e})},function(e,t,n){"use strict";function r(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.framebuffer,r=void 0===n?null:n,i=t.color,o=void 0===i?null:i,s=t.depth,l=void 0===s?null:s,p=t.stencil,d=void 0===p?null:p,v={};r&&(v.framebuffer=r);var g=0;o&&(g|=h,!0!==o&&(v.clearColor=o)),l&&(g|=c,!0!==l&&(v.clearDepth=l)),d&&(g|=f,!0!==l&&(v.clearStencil=l)),u()(0!==g,y),Object(a.c)(e,v,function(){e.clear(g)})}function i(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.framebuffer,r=void 0===n?null:n,i=t.buffer,s=void 0===i?p:i,c=t.drawBuffer,f=void 0===c?0:c,h=t.value,m=void 0===h?[0,0,0,0]:h;u()(Object(o.h)(e),o.b),Object(a.c)(e,{framebuffer:r},function(){switch(s){case p:switch(m.constructor){case Int32Array:e.clearBufferiv(s,f,m);break;case Uint32Array:e.clearBufferuiv(s,f,m);break;case Float32Array:default:e.clearBufferfv(s,f,m)}break;case d:e.clearBufferfv(d,0,[m]);break;case v:e.clearBufferiv(v,0,[m]);break;case g:var t=l(m,2),n=t[0],r=t[1];e.clearBufferfi(g,0,n,r);break;default:u()(!1,y)}})}t.a=r,t.b=i;var o=n(1),a=n(63),s=n(0),u=n.n(s),l=function(){function e(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),c=256,f=1024,h=16384,p=6144,d=6145,v=6146,g=34041,y="clear: bad arguments"},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e,t,n){var r=n[t];if(!r)return!1;var i=Object(c.h)(e)?r.gl2||r.gl1:r.gl1;return"string"===typeof i?e.getExtension(i):i}var u,l=n(13),c=n(1),f=n(17),h=n(0),p=n.n(h),d=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),v="EXT_color_buffer_float",g=(u={},a(u,l.b.DEPTH_COMPONENT16,{}),a(u,l.b.DEPTH_COMPONENT24,{gl2:!0}),a(u,l.b.DEPTH_COMPONENT32F,{gl2:!0}),a(u,l.b.STENCIL_INDEX8,{}),a(u,l.b.DEPTH_STENCIL,{}),a(u,l.b.DEPTH24_STENCIL8,{gl2:!0}),a(u,l.b.DEPTH32F_STENCIL8,{gl2:!0}),a(u,l.b.RGBA4,{}),a(u,l.b.RGB565,{}),a(u,l.b.RGB5_A1,{}),a(u,l.b.R8,{gl2:!0}),a(u,l.b.R8UI,{gl2:!0}),a(u,l.b.R8I,{gl2:!0}),a(u,l.b.R16UI,{gl2:!0}),a(u,l.b.R16I,{gl2:!0}),a(u,l.b.R32UI,{gl2:!0}),a(u,l.b.R32I,{gl2:!0}),a(u,l.b.RG8,{gl2:!0}),a(u,l.b.RG8UI,{gl2:!0}),a(u,l.b.RG8I,{gl2:!0}),a(u,l.b.RG16UI,{gl2:!0}),a(u,l.b.RG16I,{gl2:!0}),a(u,l.b.RG32UI,{gl2:!0}),a(u,l.b.RG32I,{gl2:!0}),a(u,l.b.RGB8,{gl2:!0}),a(u,l.b.RGBA8,{gl2:!0}),a(u,l.b.RGB10_A2,{gl2:!0}),a(u,l.b.RGBA8UI,{gl2:!0}),a(u,l.b.RGBA8I,{gl2:!0}),a(u,l.b.RGB10_A2UI,{gl2:!0}),a(u,l.b.RGBA16UI,{gl2:!0}),a(u,l.b.RGBA16I,{gl2:!0}),a(u,l.b.RGBA32I,{gl2:!0}),a(u,l.b.RGBA32UI,{gl2:!0}),a(u,l.b.R16F,{gl2:v}),a(u,l.b.RG16F,{gl2:v}),a(u,l.b.RGBA16F,{gl2:v}),a(u,l.b.R32F,{gl2:v}),a(u,l.b.RG32F,{gl2:v}),a(u,l.b.RGBA32F,{gl2:v}),a(u,l.b.R11F_G11F_B10F,{gl2:v}),u),y=function(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};r(this,t);var o=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return o.initialize(n),Object.seal(o),o}return o(t,e),d(t,null,[{key:"isSupported",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.format;return!n||s(e,n,g)}},{key:"getSamplesForFormat",value:function(e,t){var n=t.format;return e.getInternalformatParameter(36161,n,32937)}}]),d(t,[{key:"initialize",value:function(e){var t=e.format,n=e.width,r=void 0===n?1:n,i=e.height,o=void 0===i?1:i,a=e.samples,s=void 0===a?0:a;return p()(t,"Needs format"),this.gl.bindRenderbuffer(36161,this.handle),0!==s&&Object(c.h)(this.gl)?this.gl.renderbufferStorageMultisample(36161,s,t,r,o):this.gl.renderbufferStorage(36161,t,r,o),this.format=t,this.width=r,this.height=o,this.samples=s,this}},{key:"resize",value:function(e){var t=e.width,n=e.height;return t!==this.width||n!==this.height?this.initialize({width:t,height:n,format:this.format,samples:this.samples}):this}},{key:"_createHandle",value:function(){return this.gl.createRenderbuffer()}},{key:"_deleteHandle",value:function(){this.gl.deleteRenderbuffer(this.handle)}},{key:"_syncHandle",value:function(e){this.format=this.getParameter(36164),this.width=this.getParameter(36162),this.height=this.getParameter(36163),this.samples=this.getParameter(36011)}},{key:"_getParameter",value:function(e){return this.gl.bindRenderbuffer(36161,this.handle),this.gl.getRenderbufferParameter(36161,e)}}]),t}(f.a);t.a=y},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e,t){var n={},r=0,i=!0,o=!1,a=void 0;try{for(var u,l=e[Symbol.iterator]();!(i=(u=l.next()).done);i=!0){var c=u.value;t===s.e.SEPARATE_ATTRIBS?(n[e]={index:r},r++):"gl_NextBuffer"===c?r++:n[e]={index:r,offset:16}}}catch(e){o=!0,a=e}finally{try{!i&&l.return&&l.return()}finally{if(o)throw a}}return n}var s=n(20),u=n(1),l=n(140),c=n(17),f=n(36),h=n(52),p=n(242),d=n(141),v=n(90),g=n(51),y=n(2),m=n(0),_=n.n(m),b=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),E=function(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};r(this,t);var o=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return o.initialize(n),o.vertexAttributes=l.a.getDefaultArray(e),Object.seal(o),o._setId(n.id),o}return o(t,e),b(t,[{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.vs,n=e.fs,r=e.defaultUniforms,i=e.varyings,o=e.bufferMode,l=void 0===o?s.e.SEPARATE_ATTRIBS:o;return this.vs="string"===typeof t?new v.b(this.gl,t):t,this.fs="string"===typeof n?new v.a(this.gl,n):n,_()(this.vs instanceof v.b,"Program: bad vertex shader"),_()(this.fs instanceof v.a,"Program: bad fragment shader"),this.defaultUniforms=r,i&&(Object(u.c)(this.gl),this.gl.transformFeedbackVaryings(this.handle,i,l),this.varyings=a(i,l)),this._compileAndLink(),this}},{key:"reset",value:function(){this.unsetBuffers()}},{key:"use",value:function(){return this.gl.useProgram(this.handle),this}},{key:"draw",value:function(e){var t=this,n=e.drawMode,r=void 0===n?s.e.TRIANGLES:n,i=e.vertexCount,o=e.offset,a=void 0===o?0:o,c=e.start,f=e.end,h=e.isIndexed,d=void 0!==h&&h,v=e.indexType,g=void 0===v?s.e.UNSIGNED_SHORT:v,y=e.isInstanced,m=void 0!==y&&y,_=e.instanceCount,b=void 0===_?0:_,E=e.vertexArray,x=void 0===E?null:E,w=e.transformFeedback,T=void 0===w?null:w,S=e.uniforms,A=void 0===S?{}:S,C=e.samplers,O=void 0===C?{}:C,k=e.parameters,P=void 0===k?{}:k;return x=x||l.a.getDefaultArray(this.gl),x.bind(function(){if(t.gl.useProgram(t.handle),T){P[s.e.RASTERIZER_DISCARD]&&t.gl.enable(s.e.RASTERIZER_DISCARD);var e=Object(p.a)({drawMode:r});T.begin(e)}t.setUniforms(A,O),d&&m?t.ext.drawElementsInstanced(r,i,g,a,b):d&&Object(u.h)(t.gl)&&!isNaN(c)&&!isNaN(f)?t.gl.drawElementsRange(r,c,f,i,g,a):d?t.gl.drawElements(r,i,g,a):m?t.ext.drawArraysInstanced(r,a,i,b):t.gl.drawArrays(r,a,i),T&&(T.end(),P[s.e.RASTERIZER_DISCARD]&&t.gl.disable(s.e.RASTERIZER_DISCARD))}),this}},{key:"setBuffers",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.clear,r=void 0===n||n,i=t.check,o=void 0===i||i,a=t.drawParams,s=void 0===a?{}:a;r&&(this._filledLocations={}),s.isInstanced=!1,s.isIndexed=!1,s.indexType=null;for(var u=this._sortBuffersByLocation(e),l=u.locations,c=u.elements,f=0;f<l.length;++f){var h=l[f],p=e[h];if(p)if(p instanceof g.a){var d=p.layout.instanced?1:0;this.vertexAttributes.setBuffer({location:f,buffer:p}),this.vertexAttributes.setDivisor(f,d),s.isInstanced=p.layout.instanced>0,this.vertexAttributes.enable(f),this._filledLocations[h]=!0}else this.vertexAttributes.setGeneric({location:f,array:p}),this.vertexAttributes.disable(f,!0),this._filledLocations[h]=!0;else this.vertexAttributes.disable(f)}if(c){var v=e[c];v.bind(),s.isIndexed=!0,s.indexType=v.layout.type}return o&&this._checkBuffers(),this}},{key:"unsetBuffers",value:function(){for(var e=this._attributeCount,t=1;t<e;++t)this.vertexAttributes.disable(t);return this.gl.bindBuffer(s.e.ELEMENT_ARRAY_BUFFER,null),this}},{key:"setUniforms",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};for(var n in e){var r=e[n],i=this._uniformSetters[n],o=t[n];if(i)if(r instanceof h.a&&(r=r.texture),r instanceof f.a){void 0===i.textureIndex&&(i.textureIndex=this._textureIndexCounter++);var a=r,s=i.textureIndex;a.bind(s),o&&o.bind(s),i(s)}else i(r)}return this}},{key:"getAttributeCount",value:function(){return this._getParameter(s.e.ACTIVE_ATTRIBUTES)}},{key:"getAttributeLocation",value:function(e){return this.gl.getAttribLocation(this.handle,e)}},{key:"getAttributeInfo",value:function(e){return this.gl.getActiveAttrib(this.handle,e)}},{key:"getUniformCount",value:function(){return this._getParameter(s.e.ACTIVE_UNIFORMS)}},{key:"getUniformInfo",value:function(e){return this.gl.getActiveUniform(this.handle,e)}},{key:"getUniformLocation",value:function(e){return this.gl.getUniformLocation(this.handle,e)}},{key:"getUniformValue",value:function(e){return this.gl.getUniform(this.handle,e)}},{key:"getVarying",value:function(e,t){return this.gl.getTransformFeedbackVarying(e,t)}},{key:"getFragDataLocation",value:function(e){return Object(u.c)(this.gl),this.gl.getFragDataLocation(this.handle,e)}},{key:"getAttachedShaders",value:function(){return this.gl.getAttachedShaders(this.handle)}},{key:"_compileAndLink",value:function(){var e=this.gl;if(e.attachShader(this.handle,this.vs.handle),e.attachShader(this.handle,this.fs.handle),y.e.time(3,"linkProgram for "+this._getName()),e.linkProgram(this.handle),y.e.timeEnd(3,"linkProgram for "+this._getName()),e.debug||y.e.priority>0){e.validateProgram(this.handle);if(!e.getProgramParameter(this.handle,e.LINK_STATUS))throw new Error("Error linking "+e.getProgramInfoLog(this.handle))}this._queryAttributeLocations(),this._queryUniformLocations()}},{key:"_checkBuffers",value:function(){for(var e in this._attributeLocations)if(!this._filledLocations[e]&&!this._warnedLocations[e]){var t=this._attributeLocations[e];y.e.warn("Program "+this.id+": Attribute "+t+":"+e+" not supplied"),this._warnedLocations[e]=!0}return this}},{key:"_sortBuffersByLocation",value:function(e){var t=null,n=new Array(this._attributeCount);for(var r in e){var i=e[r],o=this._attributeLocations[r];if(void 0===o){if(i.target===s.e.ELEMENT_ARRAY_BUFFER&&t)throw new Error(this._print(r)+" duplicate GL.ELEMENT_ARRAY_BUFFER");i.target===s.e.ELEMENT_ARRAY_BUFFER?t=r:this._warnedLocations[r]||(y.e.log(2,this._print(r)+" not used"),this._warnedLocations[r]=!0)}else{if(i.target===s.e.ELEMENT_ARRAY_BUFFER)throw new Error(this._print(r)+":"+o+" has both location and type gl.ELEMENT_ARRAY_BUFFER");n[o]=r}}return{locations:n,elements:t}}},{key:"_areAllAttributesEnabled",value:function(){for(var e=this._attributeCount,t=0;t<e;++t)if(!this.vertexAttributes.isEnabled(t))return!1;return!0}},{key:"_print",value:function(e){return"Program "+this.id+": Attribute "+e}},{key:"_createHandle",value:function(){return this.gl.createProgram()}},{key:"_deleteHandle",value:function(){this.gl.deleteProgram(this.handle)}},{key:"_getName",value:function(){var e=this.vs.getName()||this.fs.getName();return e=e.replace(/shader/i,""),e=e?e+"-program":"program"}},{key:"_getOptionsFromHandle",value:function(e){var t=this.gl.getAttachedShaders(e),n={},r=!0,i=!1,o=void 0;try{for(var a,u=t[Symbol.iterator]();!(r=(a=u.next()).done);r=!0){var l=a.value;switch(this.gl.getShaderParameter(this.handle,s.e.SHADER_TYPE)){case s.e.VERTEX_SHADER:n.vs=new v.b({handle:l});break;case s.e.FRAGMENT_SHADER:n.fs=new v.a({handle:l})}}}catch(e){i=!0,o=e}finally{try{!r&&u.return&&u.return()}finally{if(i)throw o}}return n}},{key:"_getParameter",value:function(e){return this.gl.getProgramParameter(this.handle,e)}},{key:"_queryAttributeLocations",value:function(){this._attributeLocations={},this._attributeCount=this.getAttributeCount();for(var e=0;e<this._attributeCount;e++){var t=this.getAttributeInfo(e).name;this._attributeLocations[t]=this.getAttributeLocation(t)}this._warnedLocations=[],this._filledLocations={}}},{key:"_queryUniformLocations",value:function(){var e=this.gl;this._uniformSetters={},this._uniformCount=this.getUniformCount();for(var t=0;t<this._uniformCount;t++){var n=this.getUniformInfo(t),r=Object(d.e)(n.name),i=this.getUniformLocation(r.name);this._uniformSetters[r.name]=Object(d.c)(e,i,n,r.isArray)}this._textureIndexCounter=0}},{key:"_setId",value:function(e){if(!e){var t=this._getName();this.id=Object(y.g)(t)}}}]),t}(c.a);t.a=E},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n.d(t,"b",function(){return y}),n.d(t,"a",function(){return m});var a=n(35),s=n(1),u=n(17),l=n(2),c=n(0),f=n.n(c),h=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),p="Shader: GLSL source code must be a JavaScript string",d=35632,v=35633,g=function(e){function t(e,n,o){r(this,t),Object(s.d)(e),f()("string"===typeof n,p);var u=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,{id:Object(a.e)(n)||Object(l.g)(t.getTypeName(o))}));return u.shaderType=o,u.source=n,u.opts.source=n,u.initialize(u.opts),u}return o(t,e),h(t,null,[{key:"getTypeName",value:function(e){switch(e){case v:return"vertex-shader";case d:return"fragment-shader";default:return f()(!1),"unknown"}}}]),h(t,[{key:"initialize",value:function(e){var t=e.source,n=Object(a.e)(t);n&&(this.id=Object(l.g)(n)),this._compile(t),this.opts.source=t}},{key:"getParameter",value:function(e){return this.gl.getShaderParameter(this.handle,e)}},{key:"toString",value:function(){return this.getTypeName(this.shaderType)+":"+this.id}},{key:"getName",value:function(){return Object(a.e)(this.opts.source)||"unnamed-shader"}},{key:"getSource",value:function(){return this.gl.getShaderSource(this.handle)}},{key:"getTranslatedSource",value:function(){var e=this.gl.getExtension("WEBGL_debug_shaders");return e?e.getTranslatedShaderSource(this.handle):"No translated source available. WEBGL_debug_shaders not implemented"}},{key:"_compile",value:function(){if(this.gl.shaderSource(this.handle,this.source),this.gl.compileShader(this.handle),!this.getParameter(35713)){var e=this.gl.getShaderInfoLog(this.handle),t=Object(a.f)(e,this.source,this.shaderType),n=t.shaderName,r=t.errors,i=t.warnings;throw l.e.error("GLSL compilation errors in "+n+"\n"+r),l.e.warn("GLSL compilation warnings in "+n+"\n"+i),new Error("GLSL compilation errors in "+n)}}},{key:"_deleteHandle",value:function(){this.gl.deleteShader(this.handle)}},{key:"_getOptsFromHandle",value:function(){return{type:this.getParameter(35663),source:this.getSource()}}}]),t}(u.a),y=function(e){function t(e,n){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,v))}return o(t,e),h(t,[{key:"_createHandle",value:function(){return this.gl.createShader(v)}}]),t}(g),m=function(e){function t(e,n){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,d))}return o(t,e),h(t,[{key:"_createHandle",value:function(){return this.gl.createShader(d)}}]),t}(g)},function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function a(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=n(37),u=n(141),l=n(28),c=n(248),f=n(2),h=n(426),p=n(429),d=n(432),v=n(246),g=n(0),y=n.n(g),m=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),_=["renderPickingBuffer","pickingEnabled"],b=function(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};i(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,n));return y()(Object(s.isWebGL)(e)),r.gl=e,r.init(n),r}return a(t,e),m(t,[{key:"init",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.vs,n=void 0===t?null:t,r=e.fs,i=void 0===r?null:r,o=e.modules,a=void 0===o?null:o,s=e.defines,u=void 0===s?{}:s,c=e.moduleSettings,f=void 0===c?{}:c,h=e.defaultUniforms,p=e.program,d=void 0===p?null:p,g=e.shaderCache,m=void 0===g?null:g,_=e.isInstanced,b=void 0!==_&&_,E=e.instanced,x=e.vertexCount,w=void 0===x?void 0:x,T=e.instanceCount,S=void 0===T?0:T,A=e.drawMode,C=e.uniforms,O=void 0===C?{}:C,k=e.attributes,P=void 0===k?{}:k,R=e.geometry,I=void 0===R?null:R,N=e.pickable,M=void 0===N||N,L=e.pick,D=void 0===L?null:L,F=(e.render,e.onBeforeRender),j=void 0===F?function(){}:F,B=e.onAfterRender,U=void 0===B?function(){}:B,z=e.timerQueryEnabled,V=void 0!==z&&z;this._initializeProgram({vs:n,fs:i,modules:a,defines:u,moduleSettings:f,defaultUniforms:h,program:d,shaderCache:m}),this.uniforms={},O=Object.assign({},this.program.defaultUniforms,O),this.setUniforms(O),this.setUniforms(this.getModuleUniforms()),this.setUniforms(this.getModuleUniforms(f)),E&&(console.warn('Warning: Model constructor: parameter "instanced" renamed to "isInstanced".\nThis will become a hard error in a future version of luma.gl.'),b=b||E),this.buffers={},this.samplers={},this.userData={},this.drawParams={},this.dynamic=!1,this.needsRedraw=!0,this.setGeometry(I),this.attributes={},this.setAttributes(P),void 0!==A&&(this.drawMode=Object(l.b)(A)),void 0!==w&&(this.vertexCount=w),this.isInstanced=b,this.instanceCount=S,this.pickable=Boolean(M),this.pick=D||function(){return!1},this.onBeforeRender=j,this.onAfterRender=U,y()(void 0!==this.drawMode&&Number.isFinite(this.vertexCount),"Model needs drawMode and vertexCount"),this.timerQueryEnabled=V&&v.a.isSupported(this.gl,{timer:!0}),this.timeElapsedQuery=void 0,this.lastQueryReturned=!0,this.stats={accumulatedFrameTime:0,averageFrameTime:0,profileFrameCount:0}}},{key:"_initializeProgram",value:function(e){var t=e.vs,n=e.fs,r=e.modules,i=e.defines,o=(e.moduleSettings,e.defaultUniforms,e.program),a=e.shaderCache;if(this.getModuleUniforms=function(e){},!o){t||(t=h.a.vs),n||(n=h.a.fs);var u=Object(p.a)(this.gl,{vs:t,fs:n,modules:r,defines:i});t=u.vs,n=u.fs,o=a?a.getProgram(this.gl,{vs:t,fs:n,id:this.id}):new s.Program(this.gl,{vs:t,fs:n});var l=u.getUniforms;this.getModuleUniforms=l||function(e){}}this.program=o,y()(this.program instanceof s.Program,"Model needs a program")}},{key:"destroy",value:function(){this.delete()}},{key:"delete",value:function(){this.program.delete(),Object(d.d)(this.id)}},{key:"setNeedsRedraw",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this.needsRedraw=e,this}},{key:"getNeedsRedraw",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.clearRedrawFlags,n=void 0!==t&&t,r=!1;return r=r||this.needsRedraw,this.needsRedraw=this.needsRedraw&&!n,r=r||this.geometry.getNeedsRedraw({clearRedrawFlags:n})}},{key:"setDrawMode",value:function(e){return this.drawMode=Object(l.b)(e),this}},{key:"getDrawMode",value:function(){return this.drawMode}},{key:"setVertexCount",value:function(e){return y()(Number.isFinite(e)),this.vertexCount=e,this}},{key:"getVertexCount",value:function(){return this.vertexCount}},{key:"setInstanceCount",value:function(e){return y()(Number.isFinite(e)),this.instanceCount=e,this}},{key:"getInstanceCount",value:function(){return this.instanceCount}},{key:"getProgram",value:function(){return this.program}},{key:"setGeometry",value:function(e){return this.geometry=e,this.vertexCount=e.getVertexCount(),this.drawMode=e.drawMode,this._createBuffersFromAttributeDescriptors(this.geometry.getAttributes()),this.setNeedsRedraw(),this}},{key:"getAttributes",value:function(){return this.attributes}},{key:"setAttributes",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=!0;for(var n in e){t=!1;break}return t||(Object.assign(this.attributes,e),this._createBuffersFromAttributeDescriptors(e),this.setNeedsRedraw()),this}},{key:"getUniforms",value:function(){return this.uniforms}},{key:"setUniforms",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=!1;for(var n in e)if(!Object(u.a)(this.uniforms[n],e[n])){t=!0;break}return t&&(Object(s.checkUniformValues)(e,this.id),Object.assign(this.uniforms,e),this.setNeedsRedraw()),this}},{key:"updateModuleSettings",value:function(e){var t=this.getModuleUniforms(e);return this.setUniforms(t)}},{key:"addViewUniforms",value:function(e){var t=e.camera,n=e.viewMatrix,r=e.modelMatrix,i=t?t.getUniforms():{},o=n?this.getCoordinateUniforms(n,r):{};return Object.assign({},e,i,o)}},{key:"draw",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.moduleSettings,r=void 0===n?null:n,i=t.uniforms,o=void 0===i?{}:i,a=t.attributes,u=void 0===a?{}:a,l=t.samplers,c=void 0===l?{}:l,h=t.parameters,p=void 0===h?{}:h,d=t.settings,v=t.framebuffer,g=void 0===v?null:v;d&&(f.e.deprecated("settings","parameters"),p=d),r&&this.updateModuleSettings(r);var y=this.program.gl;return g&&(p=Object.assign(p,{framebuffer:g})),Object(s.withParameters)(y,p,function(){return e.render(o,u,c)}),g&&g.log({priority:2,message:"Rendered to "+g.id}),this}},{key:"render",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object(d.a)(this);var r=this.addViewUniforms(e);Object(d.b)(this.id,r),this.setUniforms(r),this.setAttributes(t),Object.assign(this.samplers,n),f.e.group(2,">>> RENDERING MODEL "+this.id,{collapsed:f.e.priority<=2}),this.setProgramState(),this._logAttributesAndUniforms(2,r),this.onBeforeRender();var i=this.drawParams;i.isInstanced&&!this.isInstanced&&f.e.warn("Found instanced attributes on non-instanced model");var o=i.isIndexed,a=i.indexType,s=this.isInstanced,u=this.instanceCount;return this._timerQueryStart(),this.program.draw({drawMode:this.getDrawMode(),vertexCount:this.getVertexCount(),isIndexed:o,indexType:a,isInstanced:s,instanceCount:u}),this._timerQueryEnd(),this.onAfterRender(),this.unsetProgramState(),this.setNeedsRedraw(!1),f.e.groupEnd(2,">>> RENDERING MODEL "+this.id),this}},{key:"setProgramState",value:function(){var e=this.program;return e.use(),this.drawParams={},e.setBuffers(this.buffers,{drawParams:this.drawParams}),e.setUniforms(this.uniforms,this.samplers),this}},{key:"unsetProgramState",value:function(){return this.program.unsetBuffers(),this}},{key:"_checkForDeprecatedUniforms",value:function(e){_.forEach(function(t){t in e&&f.e.deprecated(t,"use picking shader module and Model class updateModuleSettings()")})}},{key:"_timerQueryStart",value:function(){!0===this.timerQueryEnabled&&(this.timeElapsedQuery||(this.timeElapsedQuery=new v.a(this.gl)),this.lastQueryReturned&&(this.lastQueryReturned=!1,this.timeElapsedQuery.beginTimeElapsedQuery()))}},{key:"_timerQueryEnd",value:function(){if(!0===this.timerQueryEnabled&&(this.timeElapsedQuery.end(),this.timeElapsedQuery.isResultAvailable())){this.lastQueryReturned=!0;var e=this.timeElapsedQuery.getResult();this.stats.lastFrameTime=e,this.stats.accumulatedFrameTime+=e,this.stats.profileFrameCount++,this.stats.averageFrameTime=this.stats.accumulatedFrameTime/this.stats.profileFrameCount,f.e.log(2,"GPU time "+this.program.id+": "+this.stats.lastFrameTime+"ms average "+this.stats.averageFrameTime+"ms accumulated: "+this.stats.accumulatedFrameTime+"ms count: "+this.stats.profileFrameCount)}}},{key:"_createBuffersFromAttributeDescriptors",value:function(e){var t=this.program.gl;for(var n in e){var r=e[n];if(r instanceof s.Buffer)this.buffers[n]=r;else if(r.isGeneric)this.buffers[n]=r.value;else{this.buffers[n]=this.buffers[n]||new s.Buffer(t,{target:r.isIndexed?s.GL.ELEMENT_ARRAY_BUFFER:s.GL.ARRAY_BUFFER});var i=this.buffers[n];i.setData({data:r.value}).setDataLayout(r)}}return this}},{key:"_logAttributesAndUniforms",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(f.e.priority>=e){var n=this._getAttributesTable({header:this.id+" attributes",program:this.program,attributes:Object.assign({},this.geometry.attributes,this.attributes)});f.e.table(e,n);var r=Object(u.d)({header:this.id+" uniforms",program:this.program,uniforms:Object.assign({},this.uniforms,t)}),i=r.table,o=r.unusedTable,a=r.unusedCount;f.e.table(e,i),f.e.log(e,(a||"No")+" unused uniforms ",o)}else{var s=Object(u.d)({header:this.id+" uniforms",program:this.program,uniforms:Object.assign({},this.uniforms,t),undefinedOnly:!0}),l=s.table;s.count>0&&f.e.table(e,l)}Object(d.c)(this,t)}},{key:"_getAttributesTable",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.attributes,n=e.header,r=void 0===n?"Attributes":n,i=(e.instanced,e.program);y()(i);var o=i._attributeLocations,a={};for(var s in o){var u=t[s],l=o[s];a[s]=this._getAttributeEntry(u,l,r)}for(var c in t){var f=t[c];a[c]||(a[c]=this._getAttributeEntry(f,null,r))}return a}},{key:"_getAttributeEntry",value:function(e,t,n){var i=function(e){return Math.round(10*e)/10},o="NOT PROVIDED",a=0,u="N/A",l="N/A",c="N/A",h="N/A";if(e&&null===t&&(t=e.isIndexed?"ELEMENT_ARRAY_BUFFER":"NOT USED"),e instanceof s.Buffer){var p=e;o=p.layout.type,a=p.layout.instanced,u=p.layout.size,l=i(p.data.length/p.layout.size),c=p.data.length*p.data.BYTES_PER_ELEMENT}else e&&(o=e.value.constructor.name,a=e.instanced,u=e.size,l=i(e.value.length/e.size),c=e.value.length*e.value.BYTES_PER_ELEMENT,h=e.value);o=String(o).replace("Array","");var d=-1!==o.indexOf("nt");return r({"Inst/Verts/Comps/Bytes/Type/Loc":(a?"I ":"P ")+" "+l+" (x"+u+"="+c+" "+o+") loc="+t},n,Object(f.b)(h,{size:u,isInteger:d}))}},{key:"isPickable",value:function(){return this.pickable}},{key:"setPickable",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this.pickable=Boolean(e),this}},{key:"getGeometry",value:function(){return this.geometry}}]),t}(c.a);t.a=b},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e){return 3===e.length&&Number.isFinite(e[0])&&Number.isFinite(e[1])&&Number.isFinite(e[2])}t.b=a;var s=n(54),u=n(21),l=n(181),c=n.n(l),f=n(79),h=n.n(f),p=n(420),d=n.n(p),v=n(182),g=n.n(v),y=n(183),m=n.n(y),_=n(184),b=n.n(_),E=n(185),x=n.n(E),w=n(186),T=n.n(w),S=n(187),A=n.n(S),C=n(188),O=n.n(C),k=n(421),P=n.n(k),R=n(422),I=n.n(R),N=n(119),M=n.n(N),L=n(120),D=n.n(L),F=n(121),j=n.n(F),B=n(423),U=n.n(B),z=n(189),V=n.n(z),G=n(190),H=n.n(G),q=n(191),W=n.n(q),X=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),$=[0,0,0],Y=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;r(this,t);var a=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return Array.isArray(e)&&1===arguments.length?a.copy(e):a.set(e,n,o),a}return o(t,e),X(t,[{key:"set",value:function(e,t,n){return c()(this,e,t,n),this.check()}},{key:"length",value:function(){return h()(this)}},{key:"distance",value:function(e){return d()(this,e)}},{key:"angle",value:function(e){return g()(this,e)}},{key:"dot",value:function(e){return D()(this,e)}},{key:"add",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var u=a.value;m()(this,this,u)}}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return this.check()}},{key:"subtract",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var u=a.value;b()(this,this,u)}}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return this.check()}},{key:"multiply",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var u=a.value;x()(this,this,u)}}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return this.check()}},{key:"scale",value:function(e){return Number.isFinite(e)?A()(this,this,e):x()(this,this,e),this.check()}},{key:"negate",value:function(){return P()(this,this),this.check()}},{key:"inverse",value:function(){return I()(this,this),this.check()}},{key:"normalize",value:function(){return M()(this,this),this.check()}},{key:"cross",value:function(e){return j()(this,this,e),this.check()}},{key:"lerp",value:function(e,t){return U()(this,this,e,t),this.check()}},{key:"rotateX",value:function(e){var t=e.radians,n=e.origin,r=void 0===n?$:n;return V()(this,this,r,t),this.check()}},{key:"rotateY",value:function(e){var t=e.radians,n=e.origin,r=void 0===n?$:n;return H()(this,this,r,t),this.check()}},{key:"rotateZ",value:function(e){var t=e.radians,n=e.origin,r=void 0===n?$:n;return W()(this,this,r,t),this.check()}},{key:"operation",value:function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return e.apply(void 0,[this,this].concat(n)),this.check()}},{key:"divide",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var u=a.value;T()(this,this,u)}}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return this.check()}},{key:"scaleAndAdd",value:function(e,t){return O()(this,this,e,t),this.check()}},{key:"ELEMENTS",get:function(){return 3}},{key:"x",get:function(){return this[0]},set:function(e){return this[0]=Object(u.a)(e)}},{key:"y",get:function(){return this[1]},set:function(e){return this[1]=Object(u.a)(e)}},{key:"z",get:function(){return this[2]},set:function(e){return this[2]=Object(u.a)(e)}}]),t}(s.a);t.a=Y},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(28),s=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r(this,t);for(var n=e.bottomRadius,o=void 0===n?0:n,a=e.topRadius,s=void 0===a?0:a,u=e.height,l=void 0===u?1:u,c=e.nradial,f=void 0===c?10:c,h=e.nvertical,p=void 0===h?10:h,d=e.topCap,v=void 0!==d&&d,g=e.bottomCap,y=void 0!==g&&g,m=(v?2:0)+(y?2:0),_=(f+1)*(p+1+m),b=Math.atan2(o-s,l),E=Math.sin,x=Math.cos,w=Math.PI,T=x(b),S=E(b),A=v?-2:0,C=p+(y?2:0),O=f+1,k=new Float32Array(3*_),P=new Float32Array(3*_),R=new Float32Array(2*_),I=new Uint16Array(f*(p+m)*6),N=0,M=0,L=A;L<=C;L++){var D=L/p,F=l*D,j=void 0;L<0?(F=0,D=1,j=o):L>p?(F=l,D=1,j=s):j=o+L/p*(s-o),-2!==L&&L!==p+2||(j=0,D=0),F-=l/2;for(var B=0;B<O;B++){var U=E(B*w*2/f),z=x(B*w*2/f);k[N+0]=U*j,k[N+1]=F,k[N+2]=z*j,P[N+0]=L<0||L>p?0:U*T,P[N+1]=L<0?-1:L>p?1:S,P[N+2]=L<0||L>p?0:z*T,R[M+0]=B/f,R[M+1]=D,M+=2,N+=3}}for(var V=0;V<p+m;V++)for(var G=0;G<f;G++){var H=6*(V*f+G);I[H+0]=O*(V+0)+0+G,I[H+1]=O*(V+0)+1+G,I[H+2]=O*(V+1)+1+G,I[H+3]=O*(V+0)+0+G,I[H+4]=O*(V+1)+1+G,I[H+5]=O*(V+1)+0+G}return i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,Object.assign({},e,{attributes:{positions:k,normals:P,texCoords:R,indices:I}})))}return o(t,e),t}(a.a);t.a=s},function(e,t,n){"use strict";function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u;return e.viewport?Object(s.a)(e):{}}var i=n(4),o=n(461),a=n(462),s=n(463),u={};t.a={name:"project",dependencies:[i.k],vs:""+o.a+a.a,getUniforms:r,deprecations:[{type:"uniform vec3",old:"selectedPickingColor",new:"luma.gl's picking module"},{type:"uniform float",old:"renderPickingBuffer",new:"luma.gl's picking module"},{type:"uniform float",old:"pickingEnabled",new:"luma.gl's picking module"},{type:"uniform float",old:"projectionMode",new:"project_uCoordinateSystem"},{type:"uniform vec4",old:"projectionCenter",new:"project_uCenter"},{type:"uniform vec2",old:"projectionOrigin"},{type:"uniform mat4",old:"modelMatrix",new:"project_uModelMatrix"},{type:"uniform mat4",old:"viewMatrix"},{type:"uniform mat4",old:"projectionMatrix",new:"project_uViewProjectionMatrix"},{type:"uniform vec3",old:"projectionPixelsPerUnit",new:"project_uPixelsPerUnit"},{type:"uniform float",old:"projectionScale",new:"project_uScale"},{type:"uniform vec2",old:"viewportSize",new:"project_uViewportSize"},{type:"uniform float",old:"devicePixelRatio",new:"project_uDevicePixelRatio"},{type:"uniform vec3",old:"cameraPos",new:"project_uCameraPosition"},{type:"function",old:"scale",new:"project_scale",deprecated:1},{type:"function",old:"preproject",new:"project_position",deprecated:1},{type:"function",old:"project",new:"project_to_clipspace",deprecated:1}]}},function(e,t,n){"use strict";function r(e,t){if(!e)return null;var n=c()([0,0,0,0],t,e),r=1/n[3];return u()(n,n,[r,r,r,r]),n}function i(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function o(e){var t=e.viewMatrix,n=e.viewMatrixInverse;return{eye:[n[12],n[13],n[14]],direction:[t[2],t[6],t[10]],up:[t[1],t[5],t[9]]}}function a(e,t){h()(Number.isFinite(e)&&Number.isFinite(t));var n=e%t;return n<0?t+n:n}t.d=r,t.a=i,t.b=o,t.c=a;var s=n(124),u=n.n(s),l=n(60),c=n.n(l),f=n(0),h=n.n(f)},function(e,t,n){"use strict";function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function a(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=n(29),u=n(95),l=n(47),c=n.n(l),f=n(59),h=n.n(f),p=n(49),d=n.n(p),v=n(46),g=n.n(v),y=n(50),m=n.n(y),_=n(78),b=n.n(_),E=n(129),x=n.n(E),w=n(48),T=n.n(w),S=function(){function e(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),A=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),C=Math.PI/180,O=function(e){function t(e){var n=e.id,r=void 0===n?"orbit-viewport":n,a=e.width,s=e.height,l=e.distance,f=e.rotationX,p=void 0===f?0:f,v=e.rotationOrbit,y=void 0===v?0:v,_=e.orbitAxis,E=void 0===_?"Z":_,w=e.lookAt,S=void 0===w?[0,0,0]:w,A=e.up,O=void 0===A?[0,1,0]:A,k=e.fov,P=void 0===k?75:k,R=e.near,I=void 0===R?1:R,N=e.far,M=void 0===N?100:N,L=e.zoom,D=void 0===L?1:L;i(this,t);var F=b()([],Object(u.a)(),-p/180*Math.PI);"Z"===E?T()(F,F,-y/180*Math.PI):x()(F,F,-y/180*Math.PI);var j=Object(u.a)();d()(j,j,[D,D,D]),m()(j,j,[-S[0],-S[1],-S[2]]);var B=h()([],[0,0,l],[0,0,0],O),U=P*C,z=a/s,V=g()([],U,z,I,M),G=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,{id:r,viewMatrix:c()(B,B,c()(F,F,j)),projectionMatrix:V,width:a,height:s}));return G.width=a,G.height=s,G.distance=l,G.rotationX=p,G.rotationOrbit=y,G.orbitAxis=E,G.lookAt=S,G.up=O,G.fov=P,G.near=I,G.far=M,G.zoom=D,G}return a(t,e),A(t,[{key:"project",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.topLeft,i=void 0!==n&&n,o=Object(u.d)(this.pixelProjectionMatrix,[].concat(r(e),[1])),a=S(o,3),s=a[0],l=a[1],c=a[2];return[s,i?this.height-l:l,c]}},{key:"unproject",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.topLeft,r=void 0!==n&&n,i=S(e,3),o=i[0],a=i[1],s=i[2],l=r?this.height-a:a;return Object(u.d)(this.pixelUnprojectionMatrix,[o,l,s,1])}},{key:"fitBounds",value:function(e){var n=this.width,r=this.height,i=this.rotationX,o=this.rotationOrbit,a=this.orbitAxis,s=this.lookAt,u=this.up,l=this.fov;return new t({width:n,height:r,rotationX:i,rotationOrbit:o,orbitAxis:a,up:u,fov:l,near:this.near,far:this.far,zoom:this.zoom,lookAt:s,distance:Math.max(e[0],e[1],e[2])/2/Math.tan(l/180*Math.PI/2)})}}]),t}(s.a);t.a=O,O.displayName="OrbitViewport"},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e,t){return Number.isFinite(e)?e:t}n.d(t,"a",function(){return d});var s=n(273),u=n(65),l=n(0),c=n.n(l),f=n(95),h=function(){function e(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),p=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),d={minZoom:0,maxZoom:20,minPitch:0,maxPitch:60},v={pitch:0,bearing:0,altitude:1.5},g=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.width,o=e.height,s=e.latitude,u=e.longitude,l=e.zoom,f=e.bearing,h=e.pitch,p=e.altitude,g=e.maxZoom,y=e.minZoom,m=e.maxPitch,_=e.minPitch,b=e.startPanLngLat,E=e.startZoomLngLat,x=e.startBearing,w=e.startPitch,T=e.startZoom;r(this,t),c()(Number.isFinite(u),"`longitude` must be supplied"),c()(Number.isFinite(s),"`latitude` must be supplied"),c()(Number.isFinite(l),"`zoom` must be supplied");var S=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,{width:n,height:o,latitude:s,longitude:u,zoom:l,bearing:f,pitch:h,altitude:a(p,v.altitude),maxZoom:a(g,d.maxZoom),minZoom:a(y,d.minZoom),maxPitch:a(m,d.maxPitch),minPitch:a(_,d.minPitch)}));return S._interactiveState={startPanLngLat:b,startZoomLngLat:E,startBearing:x,startPitch:w,startZoom:T},S}return o(t,e),p(t,[{key:"getInteractiveState",value:function(){return this._interactiveState}},{key:"panStart",value:function(e){var t=e.pos;return this._getUpdatedState({startPanLngLat:this._unproject(t)})}},{key:"pan",value:function(e){var t=e.pos,n=e.startPos,r=this._interactiveState.startPanLngLat||this._unproject(n);c()(r,"`startPanLngLat` prop is required for mouse pan behavior to calculate where to position the map.");var i=this._calculateNewLngLat({startPanLngLat:r,pos:t}),o=h(i,2),a=o[0],s=o[1];return this._getUpdatedState({longitude:a,latitude:s})}},{key:"panEnd",value:function(){return this._getUpdatedState({startPanLngLat:null})}},{key:"rotateStart",value:function(e){e.pos;return this._getUpdatedState({startBearing:this._viewportProps.bearing,startPitch:this._viewportProps.pitch})}},{key:"rotate",value:function(e){var t=e.deltaScaleX,n=e.deltaScaleY;c()(t>=-1&&t<=1,"`deltaScaleX` must be a number between [-1, 1]"),c()(n>=-1&&n<=1,"`deltaScaleY` must be a number between [-1, 1]");var r=this._interactiveState,i=r.startBearing,o=r.startPitch;Number.isFinite(i)||(i=this._viewportProps.bearing),Number.isFinite(o)||(o=this._viewportProps.pitch);var a=this._calculateNewPitchAndBearing({deltaScaleX:t,deltaScaleY:n,startBearing:i,startPitch:o}),s=a.pitch,u=a.bearing;return this._getUpdatedState({bearing:u,pitch:s})}},{key:"rotateEnd",value:function(){return this._getUpdatedState({startBearing:null,startPitch:null})}},{key:"zoomStart",value:function(e){var t=e.pos;return this._getUpdatedState({startZoomLngLat:this._unproject(t),startZoom:this._viewportProps.zoom})}},{key:"zoom",value:function(e){var t=e.pos,n=e.startPos,r=e.scale;c()(r>0,"`scale` must be a positive number");var i=this._interactiveState.startZoomLngLat||this._unproject(n)||this._unproject(t),o=this._interactiveState.startZoom;Number.isFinite(o)||(o=this._viewportProps.zoom),c()(i,"`startZoomLngLat` prop is required for zoom behavior to calculate where to position the map.");var a=this._calculateNewZoom({scale:r,startZoom:o}),s=new u.a(Object.assign({},this._viewportProps,{zoom:a})),l=s.getLocationAtPoint({lngLat:i,pos:t}),f=h(l,2),p=f[0],d=f[1];return this._getUpdatedState({zoom:a,longitude:p,latitude:d})}},{key:"zoomEnd",value:function(){return this._getUpdatedState({startZoomLngLat:null,startZoom:null})}},{key:"moveLeft",value:function(){return this._getUpdatedState({bearing:this._viewportProps.bearing-3})}},{key:"moveRight",value:function(){return this._getUpdatedState({bearing:this._viewportProps.bearing+3})}},{key:"moveForward",value:function(){return this._getUpdatedState({pitch:this._viewportProps.pitch+3})}},{key:"moveBackward",value:function(){return this._getUpdatedState({pitch:this._viewportProps.pitch-3})}},{key:"zoomIn",value:function(){return this._getUpdatedState({zoom:this._viewportProps.zoom+.2})}},{key:"zoomOut",value:function(){return this._getUpdatedState({zoom:this._viewportProps.zoom-.2})}},{key:"_getUpdatedState",value:function(e){return new t(Object.assign({},this._viewportProps,this._interactiveState,e))}},{key:"_applyConstraints",value:function(e){e.longitude=Object(f.c)(e.longitude+180,360)-180,e.bearing=Object(f.c)(e.bearing+180,360)-180;var t=e.maxZoom,n=e.minZoom,r=e.zoom;e.zoom=r>t?t:r,e.zoom=e.zoom<n?n:e.zoom;var i=e.maxPitch,o=e.minPitch,a=e.pitch;return e.pitch=a>i?i:a,e.pitch=e.pitch<o?o:e.pitch,e}},{key:"_unproject",value:function(e){var t=new u.a(this._viewportProps);return e&&t.unproject(e,{topLeft:!0})}},{key:"_calculateNewLngLat",value:function(e){var t=e.startPanLngLat,n=e.pos;return new u.a(this._viewportProps).getLocationAtPoint({lngLat:t,pos:n})}},{key:"_calculateNewZoom",value:function(e){var t=e.scale,n=e.startZoom,r=this._viewportProps,i=r.maxZoom,o=r.minZoom,a=n+Math.log2(t);return a=a>i?i:a,a=a<o?o:a}},{key:"_calculateNewPitchAndBearing",value:function(e){var t=e.deltaScaleX,n=e.deltaScaleY,r=e.startBearing,i=e.startPitch,o=this._viewportProps,a=o.minPitch,s=o.maxPitch,u=r+180*t,l=i;return n>0?l=i+n*(s-i):n<0&&(l=i-n*(a-i)),{pitch:l,bearing:u}}}]),t}(s.a);t.b=g},function(e,t,n){"use strict";function r(e,t,n){return Array.isArray(e)?e.map(function(e,i){return r(e,t[i],n)}):n*t+(1-n)*e}function i(e){return Number.isFinite(e)||Array.isArray(e)}function o(e){return c[e]}function a(e,t,n){return o(e)&&Math.abs(n-t)>180&&(n=n<0?n+360:n-360),n}function s(e){var t={};return l.forEach(function(n){var r=e[n];i(r)&&(t[n]=r,o(n)&&(t[n]=Object(u.c)(r+180,360)-180))}),t}t.d=r,t.c=i,t.b=a,t.a=s;var u=n(95),l=["width","height","longitude","latitude","zoom","bearing","pitch","position"],c={longitude:1,bearing:1}},function(e,t,n){"use strict";var r=n(151);t.a=function(e,t){return function(n,i){var o=Object(r.a)(n).mimeType(e).response(t);if(null!=i){if("function"!==typeof i)throw new Error("invalid callback: "+i);return o.get(i)}return o}}},function(e,t,n){"use strict";function r(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}var i=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable;e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map(function(e){return t[e]}).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach(function(e){r[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(e){return!1}}()?Object.assign:function(e,t){for(var n,s,u=r(e),l=1;l<arguments.length;l++){n=Object(arguments[l]);for(var c in n)o.call(n,c)&&(u[c]=n[c]);if(i){s=i(n);for(var f=0;f<s.length;f++)a.call(n,s[f])&&(u[s[f]]=n[s[f]])}}return u}},function(e,t){e.exports=function(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e}},function(e,t,n){var r=n(103)("keys"),i=n(68);e.exports=function(e){return r[e]||(r[e]=i(e))}},function(e,t,n){var r=n(22),i=r["__core-js_shared__"]||(r["__core-js_shared__"]={});e.exports=function(e){return i[e]||(i[e]={})}},function(e,t,n){var r=n(23),i=n(8),o=n(42);e.exports=function(e,t){var n=(i.Object||{})[e]||Object[e],a={};a[e]=t(n),r(r.S+r.F*o(function(){n(1)}),"Object",a)}},function(e,t,n){var r=n(41);e.exports=function(e,t){if(!r(e))return e;var n,i;if(t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;if("function"==typeof(n=e.valueOf)&&!r(i=n.call(e)))return i;if(!t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;throw TypeError("Can't convert object to primitive value")}},function(e,t,n){"use strict";var r=n(319)(!0);n(161)(String,"String",function(e){this._t=String(e),this._i=0},function(){var e,t=this._t,n=this._i;return n>=t.length?{value:void 0,done:!0}:(e=r(t,n),this._i+=e.length,{value:e,done:!1})})},function(e,t){var n=Math.ceil,r=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?r:n)(e)}},function(e,t){e.exports=!0},function(e,t,n){var r=n(40),i=n(321),o=n(111),a=n(102)("IE_PROTO"),s=function(){},u=function(){var e,t=n(160)("iframe"),r=o.length;for(t.style.display="none",n(325).appendChild(t),t.src="javascript:",e=t.contentWindow.document,e.open(),e.write("<script>document.F=Object<\/script>"),e.close(),u=e.F;r--;)delete u.prototype[o[r]];return u()};e.exports=Object.create||function(e,t){var n;return null!==e?(s.prototype=r(e),n=new s,s.prototype=null,n[a]=e):n=u(),void 0===t?n:i(n,t)}},function(e,t){var n={}.toString;e.exports=function(e){return n.call(e).slice(8,-1)}},function(e,t){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(e,t,n){var r=n(31).f,i=n(30),o=n(24)("toStringTag");e.exports=function(e,t,n){e&&!i(e=n?e:e.prototype,o)&&r(e,o,{configurable:!0,value:t})}},function(e,t,n){n(326);for(var r=n(22),i=n(39),o=n(55),a=n(24)("toStringTag"),s="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),u=0;u<s.length;u++){var l=s[u],c=r[l],f=c&&c.prototype;f&&!f[a]&&i(f,a,l),o[l]=o.Array}},function(e,t,n){t.f=n(24)},function(e,t,n){var r=n(22),i=n(8),o=n(108),a=n(114),s=n(31).f;e.exports=function(e){var t=i.Symbol||(i.Symbol=o?{}:r.Symbol||{});"_"==e.charAt(0)||e in t||s(t,e,{value:a.f(e)})}},function(e,t){t.f=Object.getOwnPropertySymbols},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(72),s=n(16),u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=function(e){function t(){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),u(t,[{key:"len",value:function(){return Math.sqrt(this.lengthSquared())}},{key:"magnitude",value:function(){return Math.sqrt(this.lengthSquared())}},{key:"lengthSquared",value:function(){for(var e=0,t=0;t<this.ELEMENTS;++t)e+=this[t]*this[t];return e}},{key:"distance",value:function(e){return Math.sqrt(this.distanceSquared(e))}},{key:"distanceSquared",value:function(e){for(var t=0,n=0;n<this.ELEMENTS;++n){var r=this[n]-e[n];t+=r*r}return Object(s.d)(t)}},{key:"dot",value:function(e){for(var t=0,n=0;n<this.ELEMENTS;++n)t+=this[n]*e[n];return Object(s.d)(t)}},{key:"normalize",value:function(){var e=this.magnitude();if(0!==e)for(var t=0;t<this.ELEMENTS;++t)this[t]/=e;return this.check()}}]),t}(a.a);t.a=l},function(e,t){function n(e,t,n,r){var i=t[0],o=t[1];return e[0]=i+r*(n[0]-i),e[1]=o+r*(n[1]-o),e}e.exports=n},function(e,t){function n(e,t){var n=t[0],r=t[1],i=t[2],o=n*n+r*r+i*i;return o>0&&(o=1/Math.sqrt(o),e[0]=t[0]*o,e[1]=t[1]*o,e[2]=t[2]*o),e}e.exports=n},function(e,t){function n(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}e.exports=n},function(e,t){function n(e,t,n){var r=t[0],i=t[1],o=t[2],a=n[0],s=n[1],u=n[2];return e[0]=i*u-o*s,e[1]=o*a-r*u,e[2]=r*s-i*a,e}e.exports=n},function(e,t){function n(e,t,n,r,i){return e[0]=t,e[1]=n,e[2]=r,e[3]=i,e}e.exports=n},function(e,t){function n(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e}e.exports=n},function(e,t){function n(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e[2]=t[2]*n[2],e[3]=t[3]*n[3],e}e.exports=n},function(e,t){function n(e,t){var n=t[0],r=t[1],i=t[2],o=t[3],a=n*n+r*r+i*i+o*o;return a>0&&(a=1/Math.sqrt(a),e[0]=n*a,e[1]=r*a,e[2]=i*a,e[3]=o*a),e}e.exports=n},function(e,t){function n(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]}e.exports=n},function(e,t){function n(e,t,n,r){var i=t[0],o=t[1],a=t[2],s=t[3];return e[0]=i+r*(n[0]-i),e[1]=o+r*(n[1]-o),e[2]=a+r*(n[2]-a),e[3]=s+r*(n[3]-s),e}e.exports=n},function(e,t){function n(e,t,n,r,i,o,a){var s=1/(t-n),u=1/(r-i),l=1/(o-a);return e[0]=-2*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*u,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*l,e[11]=0,e[12]=(t+n)*s,e[13]=(i+r)*u,e[14]=(a+o)*l,e[15]=1,e}e.exports=n},function(e,t){function n(e,t,n){var r=Math.sin(n),i=Math.cos(n),o=t[0],a=t[1],s=t[2],u=t[3],l=t[8],c=t[9],f=t[10],h=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=o*i-l*r,e[1]=a*i-c*r,e[2]=s*i-f*r,e[3]=u*i-h*r,e[8]=o*r+l*i,e[9]=a*r+c*i,e[10]=s*r+f*i,e[11]=u*r+h*i,e}e.exports=n},function(e,t,n){e.exports=n(125)},function(e,t){function n(e,t,n){n*=.5;var r=Math.sin(n);return e[0]=r*t[0],e[1]=r*t[1],e[2]=r*t[2],e[3]=Math.cos(n),e}e.exports=n},function(e,t,n){e.exports={default:n(384),__esModule:!0}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(134);Object.defineProperty(t,"TransitionInterpolator",{enumerable:!0,get:function(){return r(i).default}});var o=n(386);Object.defineProperty(t,"ViewportFlyToInterpolator",{enumerable:!0,get:function(){return r(o).default}});var a=n(387);Object.defineProperty(t,"LinearInterpolator",{enumerable:!0,get:function(){return r(a).default}})},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(33),o=r(i),a=n(6),s=r(a),u=n(7),l=r(u),c=n(19),f=n(0),h=r(f),p=function(){function e(){(0,s.default)(this,e)}return(0,l.default)(e,[{key:"arePropsEqual",value:function(e,t){var n=!0,r=!1,i=void 0;try{for(var a,s=(0,o.default)(this.propNames||[]);!(n=(a=s.next()).done);n=!0){var u=a.value;if(!(0,c.equals)(e[u],t[u]))return!1}}catch(e){r=!0,i=e}finally{try{!n&&s.return&&s.return()}finally{if(r)throw i}}return!0}},{key:"initializeProps",value:function(e,t){return{start:e,end:t}}},{key:"interpolateProps",value:function(e,t,n){(0,h.default)(!1,"interpolateProps is not implemented")}}]),e}();t.default=p},function(e,t,n){"use strict";function r(e,t,n){var r=e.width*n,i=e.height*n,o=e.src.replace(/\(/g,"%28").replace(/\)/g,"%29");console.log(t+" %c+",["font-size:1px;","padding:"+Math.floor(i/2)+"px "+Math.floor(r/2)+"px;","line-height:"+i+"px;","background:url("+o+");","background-size:"+r+"px "+i+"px;","color:transparent;"].join(""))}function i(e,t){for(var n=t.maxElts,r=void 0===n?16:n,i=t.size,a=void 0===i?1:i,s="[",u=0;u<e.length&&u<r;++u)u>0&&(s+=","+(u%a===0?" ":"")),s+=o(e[u],t);return s+(e.length>r?"...":"]")}function o(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.isInteger,r=void 0!==n&&n;if(Array.isArray(e)||ArrayBuffer.isView(e))return i(e,t);if(!Number.isFinite(e))return String(e);if(Math.abs(e)<1e-16)return r?"0":"0.";if(r)return e.toFixed(0);if(Math.abs(e)>100&&Math.abs(e)<1e4)return e.toFixed(0);var o=e.toPrecision(2);return o.indexOf(".0")===o.length-2?o.slice(0,-1):o}t.b=o,console.debug=console.debug||console.log;var a={},s={priority:0,table:function(e,t){e<=s.priority&&t&&console.table(t)},log:function(e,t){if(e<=s.priority){for(var n,r=arguments.length,i=Array(r>2?r-2:0),o=2;o<r;o++)i[o-2]=arguments[o];(n=console).debug.apply(n,["luma.gl: "+t].concat(i))}},info:function(e,t){if(e<=s.priority){for(var n,r=arguments.length,i=Array(r>2?r-2:0),o=2;o<r;o++)i[o-2]=arguments[o];(n=console).log.apply(n,["luma.gl: "+t].concat(i))}},once:function(e,t){if(!a[t]){for(var n=arguments.length,r=Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];s.log.apply(s,[e,t].concat(r)),a[t]=!0}},warn:function(e){if(!a[e]){for(var t,n=arguments.length,r=Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];(t=console).warn.apply(t,["luma.gl: "+e].concat(r)),a[e]=!0}},error:function(e){for(var t,n=arguments.length,r=Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];(t=console).error.apply(t,["luma.gl: "+e].concat(r))},image:function(e){var t=e.priority,n=e.image,i=e.message,o=void 0===i?"":i,a=e.scale,u=void 0===a?1:a;if(!(t>s.priority)&&"undefined"!==typeof window){if("string"===typeof n){var l=new Image;l.onload=r.bind(null,l,o,u),l.src=n}var c=n.nodeName||"";if("img"===c.toLowerCase()&&r(n,o,u),"canvas"===c.toLowerCase()){var f=new Image;f.onload=r.bind(null,f,o,u),f.src=n.toDataURL()}}},deprecated:function(e,t){s.warn("luma.gl: `"+e+"` is deprecated and will be removed in a later version. Use `"+t+"` instead")},removed:function(e,t){s.error("`"+e+"` is no longer supported. Use `"+t+"` instead,   check our Upgrade Guide for more details")},group:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.collapsed,i=void 0!==r&&r;e<=s.priority&&(i?console.groupCollapsed("luma.gl: "+t):console.group("luma.gl: "+t))},groupEnd:function(e,t){e<=s.priority&&console.groupEnd("luma.gl: "+t)},time:function(e,t){e<=s.priority&&(console.time?console.time(t):console.info(t))},timeEnd:function(e,t){e<=s.priority&&(console.timeEnd?console.timeEnd(t):console.info(t))}};t.a=s},function(e,t,n){"use strict";function r(e){switch(ArrayBuffer.isView(e)?e.constructor:e){case Float32Array:return p;case Uint16Array:return c;case Uint32Array:return h;case Uint8Array:case Uint8ClampedArray:return u;case Int8Array:return s;case Int16Array:return l;case Int32Array:return f;default:throw new Error(y)}}function i(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.clamped,r=void 0===n||n;switch(e){case p:return Float32Array;case c:case g:case d:case v:return Uint16Array;case h:return Uint32Array;case u:return r?Uint8ClampedArray:Uint8Array;case s:return Int8Array;case l:return Int16Array;case f:return Int32Array;default:throw new Error("Failed to deduce typed array type from GL constant")}}function o(e){var t=e.data,n=e.width,r=e.height,i=e.bytesPerPixel,o=void 0===i?4:i,a=e.temp,s=n*o;a=a||new Uint8Array(s);for(var u=0;u<r/2;++u){var l=u*s,c=(r-u-1)*s;a.set(t.subarray(l,l+s)),t.copyWithin(l,c,c+s),t.set(a,c)}}function a(e){for(var t=e.data,n=e.width,r=e.height,i=Math.round(n/2),o=Math.round(r/2),a=new Uint8Array(i*o*4),s=0;s<o;s++)for(var u=0;u<i;u++)for(var l=0;l<4;l++)a[4*(s*i+u)+l]=t[4*(2*s*n+2*u)+l];return{data:a,width:i,height:o}}t.b=r,t.c=i,t.a=o,t.d=a;var s=5120,u=5121,l=5122,c=5123,f=5124,h=5125,p=5126,d=32819,v=32820,g=33635,y="Failed to deduce GL constant from typed array"},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=e[t].bind(e);e[t]=function(){var t=arguments.length<=0?void 0:arguments[0];return t in e.state.cache||(e.state.cache[t]=n.apply(void 0,arguments)),e.state.enable?e.state.cache[t]:n.apply(void 0,arguments)},Object.defineProperty(e[t],"name",{value:t+"-from-cache",configurable:!1})}function a(e,t,n){var r=e[t].bind(e);e[t]=function(){for(var i=arguments.length,o=Array(i),a=0;a<i;a++)o[a]=arguments[a];var s=n.apply(void 0,[e.state._updateCache].concat(o)),u=s.valueChanged,l=s.oldValue;if(u){var c;(c=e.state).log.apply(c,["gl."+t].concat(o)),r.apply(void 0,o)}return l},Object.defineProperty(e[t],"name",{value:t+"-to-cache",configurable:!1})}function s(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.enable,r=void 0===n||n,i=t.copyState;if(d()(void 0!==i),!e.state){Object(h.a)(e),e.state=new m(e,{copyState:i,enable:r});for(var s in y){a(e,s,y[s])}o(e,"getParameter"),o(e,"isEnabled")}return e.state.enable=r,e}function u(e){d()(e.state),e.state.push()}function l(e){d()(e.state),e.state.pop()}t.a=s,t.c=u,t.b=l;var c=n(27),f=n(236),h=n(235),p=n(0),d=n.n(p),v=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),g=function(e,t){var n=Array.isArray(e)||ArrayBuffer.isView(e),r=Array.isArray(t)||ArrayBuffer.isView(t);if(n&&r&&e.length===t.length){for(var i=0;i<e.length;++i)if(e[i]!==t[i])return!1;return!0}return e===t},y={enable:function(e,t){return e(i({},t,!0))},disable:function(e,t){return e(i({},t,!1))},pixelStorei:function(e,t,n){return e(i({},t,n))},hint:function(e,t,n){return e(i({},t,n))},bindFramebuffer:function(e,t,n){var r;switch(t){case c.a.FRAMEBUFFER:return e((r={},i(r,c.a.DRAW_FRAMEBUFFER_BINDING,n),i(r,c.a.READ_FRAMEBUFFER_BINDING,n),r));case c.a.DRAW_FRAMEBUFFER:return e(i({},c.a.DRAW_FRAMEBUFFER_BINDING,n));case c.a.READ_FRAMEBUFFER:return e(i({},c.a.READ_FRAMEBUFFER_BINDING,n));default:return null}},blendColor:function(e,t,n,r,o){return e(i({},c.a.BLEND_COLOR,new Float32Array([t,n,r,o])))},blendEquation:function(e,t){var n;return e((n={},i(n,c.a.BLEND_EQUATION_RGB,t),i(n,c.a.BLEND_EQUATION_ALPHA,t),n))},blendEquationSeparate:function(e,t,n){var r;return e((r={},i(r,c.a.BLEND_EQUATION_RGB,t),i(r,c.a.BLEND_EQUATION_ALPHA,n),r))},blendFunc:function(e,t,n){var r;return e((r={},i(r,c.a.BLEND_SRC_RGB,t),i(r,c.a.BLEND_DST_RGB,n),i(r,c.a.BLEND_SRC_ALPHA,t),i(r,c.a.BLEND_DST_ALPHA,n),r))},blendFuncSeparate:function(e,t,n,r,o){var a;return e((a={},i(a,c.a.BLEND_SRC_RGB,t),i(a,c.a.BLEND_DST_RGB,n),i(a,c.a.BLEND_SRC_ALPHA,r),i(a,c.a.BLEND_DST_ALPHA,o),a))},clearColor:function(e,t,n,r,o){return e(i({},c.a.COLOR_CLEAR_VALUE,new Float32Array([t,n,r,o])))},clearDepth:function(e,t){return e(i({},c.a.DEPTH_CLEAR_VALUE,t))},clearStencil:function(e,t){return e(i({},c.a.STENCIL_CLEAR_VALUE,t))},colorMask:function(e,t,n,r,o){return e(i({},c.a.COLOR_WRITEMASK,[t,n,r,o]))},cullFace:function(e,t){return e(i({},c.a.CULL_FACE_MODE,t))},depthFunc:function(e,t){return e(i({},c.a.DEPTH_FUNC,t))},depthRange:function(e,t,n){return e(i({},c.a.DEPTH_RANGE,new Float32Array([t,n])))},depthMask:function(e,t){return e(i({},c.a.DEPTH_WRITEMASK,t))},frontFace:function(e,t){return e(i({},c.a.FRONT_FACE,t))},lineWidth:function(e,t){return e(i({},c.a.LINE_WIDTH,t))},polygonOffset:function(e,t,n){var r;return e((r={},i(r,c.a.POLYGON_OFFSET_FACTOR,t),i(r,c.a.POLYGON_OFFSET_UNITS,n),r))},sampleCoverage:function(e,t,n){var r;return e((r={},i(r,c.a.SAMPLE_COVERAGE_VALUE,t),i(r,c.a.SAMPLE_COVERAGE_INVERT,n),r))},scissor:function(e,t,n,r,o){return e(i({},c.a.SCISSOR_BOX,new Int32Array([t,n,r,o])))},stencilMask:function(e,t){var n;return e((n={},i(n,c.a.STENCIL_WRITEMASK,t),i(n,c.a.STENCIL_BACK_WRITEMASK,t),n))},stencilMaskSeparate:function(e,t,n){return e(i({},t===c.a.FRONT?c.a.STENCIL_WRITEMASK:c.a.STENCIL_BACK_WRITEMASK,n))},stencilFunc:function(e,t,n,r){var o;return e((o={},i(o,c.a.STENCIL_FUNC,t),i(o,c.a.STENCIL_REF,n),i(o,c.a.STENCIL_VALUE_MASK,r),i(o,c.a.STENCIL_BACK_FUNC,t),i(o,c.a.STENCIL_BACK_REF,n),i(o,c.a.STENCIL_BACK_VALUE_MASK,r),o))},stencilFuncSeparate:function(e,t,n,r,o){var a;return e((a={},i(a,t===c.a.FRONT?c.a.STENCIL_FUNC:c.a.STENCIL_BACK_FUNC,n),i(a,t===c.a.FRONT?c.a.STENCIL_REF:c.a.STENCIL_BACK_REF,r),i(a,t===c.a.FRONT?c.a.STENCIL_VALUE_MASK:c.a.STENCIL_BACK_VALUE_MASK,o),a))},stencilOp:function(e,t,n,r){var o;return e((o={},i(o,c.a.STENCIL_FAIL,t),i(o,c.a.STENCIL_PASS_DEPTH_FAIL,n),i(o,c.a.STENCIL_PASS_DEPTH_PASS,r),i(o,c.a.STENCIL_BACK_FAIL,t),i(o,c.a.STENCIL_BACK_PASS_DEPTH_FAIL,n),i(o,c.a.STENCIL_BACK_PASS_DEPTH_PASS,r),o))},stencilOpSeparate:function(e,t,n,r,o){var a;return e((a={},i(a,t===c.a.FRONT?c.a.STENCIL_FAIL:c.a.STENCIL_BACK_FAIL,n),i(a,t===c.a.FRONT?c.a.STENCIL_PASS_DEPTH_FAIL:c.a.STENCIL_BACK_PASS_DEPTH_FAIL,r),i(a,t===c.a.FRONT?c.a.STENCIL_PASS_DEPTH_PASS:c.a.STENCIL_BACK_PASS_DEPTH_PASS,o),a))},viewport:function(e,t,n,r,o){return e(i({},c.a.VIEWPORT,new Int32Array([t,n,r,o])))}},m=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=n.copyState,o=void 0!==i&&i,a=n.log,s=void 0===a?function(){}:a;r(this,e),this.gl=t,this.stateStack=[],this.enable=!0,this.cache=o?Object(f.b)(t):Object.assign({},f.a),this.log=s,this._updateCache=this._updateCache.bind(this),Object.seal(this)}return v(e,[{key:"push",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.stateStack.push({})}},{key:"pop",value:function(){d()(this.stateStack.length>0);var e=this.stateStack[this.stateStack.length-1];Object(f.d)(this.gl,e,this.cache),this.stateStack.pop()}},{key:"_updateCache",value:function(e){var t=!1,n=void 0,r=this.stateStack.length>0&&this.stateStack[this.stateStack.length-1];for(var i in e)d()(void 0!==i),g(e[i],this.cache[i])||(t=!0,n=this.cache[i],!r||i in r||(r[i]=this.cache[i]),this.cache[i]=e[i]);return{valueChanged:t,oldValue:n}}}]),e}()},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(e){return e},a=function(){function e(){r(this,e),this.pendingQueries=new Set,this.invalidQueryType=null,this.invalidErrorMessage="",this.checkInvalid=function(){return!1}}return i(e,[{key:"poll",value:function(e){this.cancelInvalidQueries(e);var t=!0,n=!1,r=void 0;try{for(var i,o=this.pendingQueries.values()[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var a=i.value;if(a.isResultAvailable()){var s=a.getResult();this.resolveQuery(a,s)}}}catch(e){n=!0,r=e}finally{try{!t&&o.return&&o.return()}finally{if(n)throw r}}}},{key:"setInvalidator",value:function(e){var t=e.queryType,n=e.errorMessage,r=e.checkInvalid;this.invalidQueryType=t,this.invalidErrorMessage=n,this.checkInvalid=r}},{key:"beginQuery",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:o;this.cancelInvalidQueries(e.gl),this.cancelQuery(e);var r={};return e.promise=new Promise(function(e,t){r.resolve=e,r.reject=t}),Object.assign(e.promise,r),this.pendingQueries.add(e),e.promise.then(t).catch(n)}},{key:"resolveQuery",value:function(e,t){this.pendingQueries.delete(e),e.promise.resolve(t)}},{key:"rejectQuery",value:function(e,t){this.pendingQueries.delete(e),e.promise&&e.promise.reject(new Error(t))}},{key:"deleteQuery",value:function(e){return this.rejectQuery(e,"Query was deleted before result was available")}},{key:"cancelQuery",value:function(e){return this.rejectQuery(e,"Query was canceled before result was available")}},{key:"invalidateQuery",value:function(e){e instanceof this.invalidQueryType&&this.rejectQuery(e,this.invalidErrorMessage)}},{key:"cancelInvalidQueries",value:function(e){if(this.checkInvalid(e)){var t=!0,n=!1,r=void 0;try{for(var i,o=this.pendingQueries.values()[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var a=i.value;this.invalidateQuery(a)}}catch(e){n=!0,r=e}finally{try{!t&&o.return&&o.return()}finally{if(n)throw r}}}}}]),e}();t.a=new a},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(20),s=n(1),u=n(36),l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=function(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};r(this,t),Object(s.d)(e);var o=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,Object.assign({},n,{target:e.TEXTURE_2D})));return o.initialize(n),Object.seal(o),o}return o(t,e),l(t,null,[{key:"isSupported",value:function(e,t){return u.a.isSupported(e,t)}}]),l(t,[{key:"bind",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.textureUnit,t=this.gl;if(void 0===e)throw new Error("Texture.bind: must specify texture unit");return this.textureUnit=e,t.activeTexture(t.TEXTURE0+e),t.bindTexture(this.target,this.handle),e}},{key:"unbind",value:function(){var e=this.gl;if(void 0===this.textureUnit)throw new Error("Texture.unbind: texture unit not specified");return e.activeTexture(e.TEXTURE0+this.textureUnit),e.bindTexture(this.target,null),this.textureUnit}},{key:"getActiveUnit",value:function(){return this.gl.getParameter(a.a.ACTIVE_TEXTURE)-a.a.TEXTURE0}}]),t}(u.a);t.a=c},function(e,t,n){"use strict";function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function a(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=n(13),u=n(1),l=n(17),c=n(0),f=n.n(c),h=n(2),p=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),d=[34338,34339,34340,34341,34922,34373,34975,35069,35070],v=function(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};i(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return r.elements=null,r.buffers={},r.locations={},r.names={},r.drawParameters={},r._bound=!1,Object.seal(r),r.initialize(n),r}return a(t,e),p(t,[{key:"MAX_ATTRIBUTES",get:function(){return this.gl.getParameter(this.gl.MAX_VERTEX_ATTRIBS)}}],[{key:"isSupported",value:function(e){return Object(u.h)(e)||e.getExtension("OES_vertex_array_object")}},{key:"getDefaultArray",value:function(e){return e.luma=e.luma||{},e.luma.defaultVertexArray||(e.luma.defaultVertexArray=new t(e,{handle:null})),e.luma.defaultVertexArray}},{key:"getMaxAttributes",value:function(e){return e.getParameter(e.MAX_VERTEX_ATTRIBS)}}]),p(t,[{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.buffers,n=void 0===t?{}:t,r=e.elements,i=void 0===r?null:r,o=e.locations,a=void 0===o?{}:o;this.setLocations(a),this.setBuffers(n,{clear:!0}),this.setElements(i)}},{key:"setLocations",value:function(e){this.locations=e,this.names={}}},{key:"setElements",value:function(e){return f()(!e||34963===e.target,"elements must be GL.ELEMENT_ARRAY_BUFFER"),this.ext.bindVertexArray(this.handle),this.gl.bindBuffer(34963,e&&e.handle),this.ext.bindVertexArray(null),this.elements=e,this}},{key:"_getBufferAndLayout",value:function(e){var t=void 0,n=void 0;return e.handle?(t=e,n=e.layout):(t=e.buffer,n=Object.assign({},t.layout,e.layout||{},e)),{buffer:t,layout:n}}},{key:"setBuffers",value:function(e,t){var n=(t.clear,t.check),r=this._getLocations(e),i=r.locations,o=r.elements;this.ext.bindVertexArray(this.handle);for(var a in i){var s=i[a];if(s){var u=this._getBufferAndLayout(s),l=u.buffer,c=u.layout;this.setBuffer({location:a,buffer:l,layout:c}),this.setDivisor(a,c.instanced?1:0),this.enable(a)}else this.disable(a)}this.buffers=e,this.ext.bindVertexArray(null),o&&this.setElements(o),n&&this._checkBuffers()}},{key:"enable",value:function(e){var t=this;this.bind(function(){t.gl.enableVertexAttribArray(e)})}},{key:"disable",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];(e>0||n)&&this.bind(function(){t.gl.disableVertexAttribArray(e)})}},{key:"setDivisor",value:function(e,t){var n=this;this.bind(function(){n.ext.vertexAttribDivisor(e,t)})}},{key:"setBuffer",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.location,n=e.buffer,r=e.target,i=e.layout,o=this.gl;r=void 0!==r?r:n.target,i=void 0!==i?i:n.layout,f()(r,"setBuffer needs target"),f()(i,"setBuffer called on uninitialized buffer"),this.bind(function(){n.bind({target:o.ARRAY_BUFFER});var e=i,r=e.size,a=e.type,s=e.normalized,l=e.stride,c=e.offset;i.integer?(f()(Object(u.h)(o)),o.vertexAttribIPointer(t,r,a,l,c)):o.vertexAttribPointer(t,r,a,s,l,c)})}},{key:"setGeneric",value:function(e){var t=e.location,n=e.array;switch(n.constructor){case Float32Array:this._setGenericFloatArray(t,n);break;case Int32Array:this._setGenericIntArray(t,n);break;case Uint32Array:this._setGenericUintArray(t,n);break;default:this.setGenericValues.apply(this,[t].concat(r(n)))}}},{key:"_setGenericFloatArray",value:function(e,t){var n=this.gl;switch(t.length){case 1:n.vertexAttrib1fv(e,t);break;case 2:n.vertexAttrib2fv(e,t);break;case 3:n.vertexAttrib3fv(e,t);break;case 4:n.vertexAttrib4fv(e,t);break;default:f()(!1)}}},{key:"_setGenericIntArray",value:function(e,t){var n=this.gl;switch(f()(Object(u.h)(n)),t.length){case 1:n.vertexAttribI1iv(e,t);break;case 2:n.vertexAttribI2iv(e,t);break;case 3:n.vertexAttribI3iv(e,t);break;case 4:n.vertexAttribI4iv(e,t);break;default:f()(!1)}}},{key:"_setGenericUintArray",value:function(e,t){var n=this.gl;switch(f()(Object(u.h)(n)),t.length){case 1:n.vertexAttribI1uiv(e,t);break;case 2:n.vertexAttribI2uiv(e,t);break;case 3:n.vertexAttribI3uiv(e,t);break;case 4:n.vertexAttribI4uiv(e,t);break;default:f()(!1)}}},{key:"setGenericValues",value:function(e,t,n,r,i){var o=this.gl;switch(arguments.length-1){case 1:o.vertexAttrib1f(e,t);break;case 2:o.vertexAttrib2f(e,t,n);break;case 3:o.vertexAttrib3f(e,t,n,r);break;case 4:o.vertexAttrib4f(e,t,n,r,i);break;default:f()(!1)}}},{key:"bind",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.handle;if("function"!==typeof e)return this.bindVertexArray(e),this;var t=void 0;return this._bound?t=e():(this.ext.bindVertexArray(this.handle),this._bound=!0,t=e(),this.ext.bindVertexArray(null),this._bound=!1),t}},{key:"_deduceDrawParameters",value:function(){var e=!1,t=!1,n=null;return this.elements&&(t=!0,n=this.elements.layout.type),this.buffers.forEach(function(t){t.layout.instanced>0&&(e=!0)}),{isInstanced:e,isIndexed:t,indexType:n}}},{key:"_getLocations",value:function(e){var t=null,n={};for(var r in e){var i=e[r];i&&34963===i.target&&(f()(!t,"Duplicate GL.ELEMENT_ARRAY_BUFFER"),t=i);var o=Number(r);Number.isFinite(o)||(o=this.locations[r]),f()(Number.isFinite(o)),f()(!n[o],"Duplicate attribute for binding point "+o),n[o]=i}return{locations:n,elements:t}}},{key:"_sortBuffersByLocation",value:function(e){var t=null,n=new Array(this._attributeCount).fill(null);for(var r in e){var i=e[r];34963===i.target?(f()(!t,"Duplicate GL.ELEMENT_ARRAY_BUFFER"),t=i):this._warn[r]||(h.e.warn(2,this._print(r)+" not used"),this._warn[r]=!0);var o=Number(r);Number.isFinite(o)||(o=this.locations[r]),n[o]=r,f()(null===n[o],"Duplicate attribute for binding point "+o),n[o]=o}return{locations:n,elements:t}}},{key:"_checkBuffers",value:function(){for(var e in this._attributeLocations)if(!this._filledLocations[e]&&!this._warn[e]){var t=this._attributeLocations[e];h.e.warn(0,"Program "+this.id+": Attribute "+t+":"+e+" not supplied"),this._warn[e]=!0}return this}},{key:"_createHandle",value:function(){return this.ext.createVertexArray()}},{key:"_deleteHandle",value:function(e){return this.ext.deleteVertexArray(e),[this.elements]}},{key:"_getParameter",value:function(e,t){var n=t.location;f()(Number.isFinite(n)),this.ext.bindVertexArray(this.handle);var r=void 0;switch(e){case 34373:r=this.gl.getVertexAttribOffset(n,e);break;default:r=this.ext.getVertexAttrib(n,e)}return this.ext.bindVertexArray(null),r}},{key:"_getData",value:function(){var e=this;return new Array(this.MAX_ATTRIBUTES).fill(0).map(function(t,n){var r={};return d.forEach(function(t){r[Object(s.d)(t)]=e.getParameter(t,{location:n})}),r})}},{key:"_bind",value:function(e){this.ext.bindVertexArray(e)}}]),t}(l.a);t.a=v},function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){if(e instanceof Float32Array)return e;for(var n=x[t],r=0;r<t;r++)n[r]=e[r];return n}function o(e,t){if(e instanceof Int32Array)return e;for(var n=w[t],r=0;r<t;r++)n[r]=e[r];return n}function a(e,t){if(e instanceof Uint32Array)return e;for(var n=T[t],r=0;r<t;r++)n[r]=e[r];return n}function s(e){var t=/([^\[]*)(\[[0-9]+\])?/,n=e.match(t);if(!n||n.length<2)throw new Error("Failed to parse GLSL uniform name "+e);return{name:n[1],length:n[2]||1,isArray:Boolean(n[2])}}function u(e,t,n){var r=E[n.type];if(!r)throw new Error("Unknown GLSL uniform type "+n.type);return r.bind(null,e,t)}function l(e,t){for(var n in e){var r=e[n];if(!c(r))throw t=t?t+" ":"",console.error(t+" Bad uniform "+n,r),new Error(t+" Bad uniform "+n)}return!0}function c(e){return Array.isArray(e)?e.length>0&&e.every(function(e){return isFinite(e)}):ArrayBuffer.isView(e)?e.length>0:!!isFinite(e)||(e instanceof y.a||e instanceof g.a&&Boolean(e.texture))}function f(e){return void 0!==e&&null!==e}function h(e){var t=e.table,n=e.header,i=e.uniforms,o=e.uniformName,a=e.undefinedOnly,s=i[o],u=f(s);return(!a||!u)&&(t[o]=r({Type:u?s:"NOT PROVIDED"},n,u?Object(m.b)(s):"N/A"),!0)}function p(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.header,n=void 0===t?"Uniforms":t,i=e.program,o=e.uniforms,a=e.undefinedOnly,s=void 0!==a&&a;b()(i);var u=i._uniformSetters,l={},c=Object.keys(u).sort(),f=0,p=!0,d=!1,v=void 0;try{for(var g,y=c[Symbol.iterator]();!(p=(g=y.next()).done);p=!0){var _=g.value;_.match(".*_.*")||_.match(".*Matrix")||h({table:l,header:n,uniforms:o,uniformName:_,undefinedOnly:s})&&f++}}catch(e){d=!0,v=e}finally{try{!p&&y.return&&y.return()}finally{if(d)throw v}}var E=!0,x=!1,w=void 0;try{for(var T,S=c[Symbol.iterator]();!(E=(T=S.next()).done);E=!0){var A=T.value;A.match(".*Matrix")&&h({table:l,header:n,uniforms:o,uniformName:A,undefinedOnly:s})&&f++}}catch(e){x=!0,w=e}finally{try{!E&&S.return&&S.return()}finally{if(x)throw w}}var C=!0,O=!1,k=void 0;try{for(var P,R=c[Symbol.iterator]();!(C=(P=R.next()).done);C=!0){var I=P.value;l[I]||h({table:l,header:n,uniforms:o,uniformName:I,undefinedOnly:s})&&f++}}catch(e){O=!0,k=e}finally{try{!C&&R.return&&R.return()}finally{if(O)throw k}}var N=0,M={};if(!s)for(var L in o){var D=o[L];l[L]||(N++,M[L]=r({Type:"NOT USED: "+D},n,Object(m.b)(D)))}return{table:l,count:f,unusedTable:M,unusedCount:N}}function d(e,t){if(Array.isArray(e)||ArrayBuffer.isView(e)){if(!t)return!1;var n=e.length;if(t.length!==n)return!1;for(var r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}return e===t}t.e=s,t.c=u,t.b=l,t.d=p,t.a=d;var v,g=n(52),y=n(36),m=n(2),_=n(0),b=n.n(_),E=(v={},r(v,5126,function(e,t,n){return e.uniform1f(t,n)}),r(v,35664,function(e,t,n){return e.uniform2fv(t,i(n,2))}),r(v,35665,function(e,t,n){return e.uniform3fv(t,i(n,3))}),r(v,35666,function(e,t,n){return e.uniform4fv(t,i(n,4))}),r(v,5124,function(e,t,n){return e.uniform1i(t,n)}),r(v,35667,function(e,t,n){return e.uniform2iv(t,o(n,2))}),r(v,35668,function(e,t,n){return e.uniform3iv(t,o(n,3))}),r(v,35669,function(e,t,n){return e.uniform4iv(t,o(n,4))}),r(v,35670,function(e,t,n){return e.uniform1i(t,n)}),r(v,35671,function(e,t,n){return e.uniform2iv(t,o(n,2))}),r(v,35672,function(e,t,n){return e.uniform3iv(t,o(n,3))}),r(v,35673,function(e,t,n){return e.uniform4iv(t,o(n,4))}),r(v,35674,function(e,t,n){return e.uniformMatrix2fv(t,!1,i(n,4))}),r(v,35675,function(e,t,n){return e.uniformMatrix3fv(t,!1,i(n,9))}),r(v,35676,function(e,t,n){return e.uniformMatrix4fv(t,!1,i(n,16))}),r(v,35678,function(e,t,n){return e.uniform1i(t,n)}),r(v,35680,function(e,t,n){return e.uniform1i(t,n)}),r(v,5125,function(e,t,n){return e.uniform1ui(t,n)}),r(v,36294,function(e,t,n){return e.uniform2uiv(t,a(n,2))}),r(v,36295,function(e,t,n){return e.uniform3uiv(t,a(n,3))}),r(v,36296,function(e,t,n){return e.uniform4uiv(t,a(n,4))}),r(v,35685,function(e,t,n){return e.uniformMatrix2x3fv(t,!1,i(n,6))}),r(v,35686,function(e,t,n){return e.uniformMatrix2x4fv(t,!1,i(n,8))}),r(v,35687,function(e,t,n){return e.uniformMatrix3x2fv(t,!1,i(n,6))}),r(v,35688,function(e,t,n){return e.uniformMatrix3x4fv(t,!1,i(n,12))}),r(v,35689,function(e,t,n){return e.uniformMatrix4x2fv(t,!1,i(n,8))}),r(v,35690,function(e,t,n){return e.uniformMatrix4x3fv(t,!1,i(n,12))}),r(v,35679,function(e,t,n){return e.uniform1i(t,n)}),r(v,35682,function(e,t,n){return e.uniform1i(t,n)}),r(v,36289,function(e,t,n){return e.uniform1i(t,n)}),r(v,36292,function(e,t,n){return e.uniform1i(t,n)}),r(v,36293,function(e,t,n){return e.uniform1i(t,n)}),r(v,36298,function(e,t,n){return e.uniform1i(t,n)}),r(v,36299,function(e,t,n){return e.uniform1i(t,n)}),r(v,36300,function(e,t,n){return e.uniform1i(t,n)}),r(v,36303,function(e,t,n){return e.uniform1i(t,n)}),r(v,36306,function(e,t,n){return e.uniform1i(t,n)}),r(v,36307,function(e,t,n){return e.uniform1i(t,n)}),r(v,36308,function(e,t,n){return e.uniform1i(t,n)}),r(v,36311,function(e,t,n){return e.uniform1i(t,n)}),v),x=[2,3,4,6,8,9,12,16].reduce(function(e,t){return e[t]=new Float32Array(t),e},{}),w={2:new Int32Array(2),3:new Int32Array(3),4:new Int32Array(4)},T={2:new Uint32Array(2),3:new Uint32Array(3),4:new Uint32Array(4)}},function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e){if(e.luma=e.luma||{},!e.luma.limits){e.luma.limits={},e.luma.webgl1MinLimits={},e.luma.webgl2MinLimits={};var t=Object(f.h)(e);for(var n in h){var r=h[n],i=r.gl1,o="gl2"in r?r.gl2:r.gl1,a=t?o:i,s="gl2"in r&&!t||"extension"in r&&!e.getExtension(r.extension),u=s?a:e.getParameter(n);e.luma.limits[n]=u,e.luma.webgl1MinLimits[n]=i,e.luma.webgl2MinLimits[n]=o}}return e.luma.limits}function o(e){if(e.luma=e.luma||{},!e.luma.info){var t,n=e.getExtension("WEBGL_debug_renderer_info");e.luma.info=(t={},r(t,c.b.VENDOR,e.getParameter(c.b.VENDOR)),r(t,c.b.RENDERER,e.getParameter(c.b.RENDERER)),r(t,c.b.UNMASKED_VENDOR_WEBGL,e.getParameter(n&&n.UNMASKED_VENDOR_WEBGL||c.b.VENDOR)),r(t,c.b.UNMASKED_RENDERER_WEBGL,e.getParameter(n&&n.UNMASKED_RENDERER_WEBGL||c.b.RENDERER)),r(t,c.b.VERSION,e.getParameter(c.b.VERSION)),r(t,c.b.SHADING_LANGUAGE_VERSION,e.getParameter(c.b.SHADING_LANGUAGE_VERSION)),t)}return e.luma.info}function a(e){var t=e.getParameter(c.b.VENDOR),n=e.getParameter(c.b.RENDERER),r=e.getExtension("WEBGL_debug_renderer_info"),i=r&&e.getParameter(r.UNMASKED_VENDOR_WEBGL||c.b.VENDOR),o=r&&e.getParameter(r.UNMASKED_RENDERER_WEBGL||c.b.RENDERER);return{vendor:i||t,renderer:o||n,vendorMasked:t,rendererMasked:n,version:e.getParameter(c.b.VERSION),shadingLanguageVersion:e.getParameter(c.b.SHADING_LANGUAGE_VERSION)}}function s(e){var t=i(e),n=o(e);return{vendor:n[p]||n[c.b.VENDOR],renderer:n[d]||n[c.b.RENDERER],version:n[c.b.VERSION],shadingLanguageVersion:n[c.b.SHADING_LANGUAGE_VERSION],info:n,limits:t,webgl1MinLimits:e.luma.webgl1MinLimits,webgl2MinLimits:e.luma.webgl2MinLimits}}function u(e){return a(e)}t.a=s,t.b=u;var l,c=n(13),f=n(1),h=(l={},r(l,c.b.ALIASED_LINE_WIDTH_RANGE,{gl1:new Float32Array([1,1])}),r(l,c.b.ALIASED_POINT_SIZE_RANGE,{gl1:new Float32Array([1,1])}),r(l,c.b.MAX_TEXTURE_SIZE,{gl1:64,gl2:2048}),r(l,c.b.MAX_CUBE_MAP_TEXTURE_SIZE,{gl1:16}),r(l,c.b.MAX_TEXTURE_IMAGE_UNITS,{gl1:8}),r(l,c.b.MAX_COMBINED_TEXTURE_IMAGE_UNITS,{gl1:8}),r(l,c.b.MAX_VERTEX_TEXTURE_IMAGE_UNITS,{gl1:0}),r(l,c.b.MAX_RENDERBUFFER_SIZE,{gl1:1}),r(l,c.b.MAX_VARYING_VECTORS,{gl1:8}),r(l,c.b.MAX_VERTEX_ATTRIBS,{gl1:8}),r(l,c.b.MAX_VERTEX_UNIFORM_VECTORS,{gl1:128}),r(l,c.b.MAX_FRAGMENT_UNIFORM_VECTORS,{gl1:16}),r(l,c.b.MAX_VIEWPORT_DIMS,{gl1:new Int32Array([0,0])}),r(l,c.b.MAX_3D_TEXTURE_SIZE,{gl1:0,gl2:256}),r(l,c.b.MAX_ARRAY_TEXTURE_LAYERS,{gl1:0,gl2:256}),r(l,c.b.MAX_CLIENT_WAIT_TIMEOUT_WEBGL,{gl1:0,gl2:0}),r(l,c.b.MAX_COLOR_ATTACHMENTS,{gl1:0,gl2:4}),r(l,c.b.MAX_COMBINED_FRAGMENT_UNIFORM_COMPONENTS,{gl1:0,gl2:0}),r(l,c.b.MAX_COMBINED_UNIFORM_BLOCKS,{gl1:0,gl2:0}),r(l,c.b.MAX_COMBINED_VERTEX_UNIFORM_COMPONENTS,{gl1:0,gl2:0}),r(l,c.b.MAX_DRAW_BUFFERS,{gl1:0,gl2:4}),r(l,c.b.MAX_ELEMENT_INDEX,{gl1:0,gl2:0}),r(l,c.b.MAX_ELEMENTS_INDICES,{gl1:0,gl2:0}),r(l,c.b.MAX_ELEMENTS_VERTICES,{gl1:0,gl2:0}),r(l,c.b.MAX_FRAGMENT_INPUT_COMPONENTS,{gl1:0,gl2:0}),r(l,c.b.MAX_FRAGMENT_UNIFORM_BLOCKS,{gl1:0,gl2:0}),r(l,c.b.MAX_FRAGMENT_UNIFORM_COMPONENTS,{gl1:0,gl2:0}),r(l,c.b.MAX_SAMPLES,{gl1:0,gl2:0}),r(l,c.b.MAX_SERVER_WAIT_TIMEOUT,{gl1:0,gl2:0}),r(l,c.b.MAX_TEXTURE_LOD_BIAS,{gl1:0,gl2:0}),r(l,c.b.MAX_TRANSFORM_FEEDBACK_INTERLEAVED_COMPONENTS,{gl1:0,gl2:0}),r(l,c.b.MAX_TRANSFORM_FEEDBACK_SEPARATE_ATTRIBS,{gl1:0,gl2:0}),r(l,c.b.MAX_TRANSFORM_FEEDBACK_SEPARATE_COMPONENTS,{gl1:0,gl2:0}),r(l,c.b.MAX_UNIFORM_BLOCK_SIZE,{gl1:0,gl2:0}),r(l,c.b.MAX_UNIFORM_BUFFER_BINDINGS,{gl1:0,gl2:0}),r(l,c.b.MAX_VARYING_COMPONENTS,{gl1:0,gl2:0}),r(l,c.b.MAX_VERTEX_OUTPUT_COMPONENTS,{gl1:0,gl2:0}),r(l,c.b.MAX_VERTEX_UNIFORM_BLOCKS,{gl1:0,gl2:0}),r(l,c.b.MAX_VERTEX_UNIFORM_COMPONENTS,{gl1:0,gl2:0}),r(l,c.b.MIN_PROGRAM_TEXEL_OFFSET,{gl1:0,gl2:-8,negative:!0}),r(l,c.b.MAX_PROGRAM_TEXEL_OFFSET,{gl1:0,gl2:7}),r(l,c.b.UNIFORM_BUFFER_OFFSET_ALIGNMENT,{gl1:0,gl2:0}),l),p=37445,d=37446},function(e,t,n){"use strict";function r(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.ignoreMultipleRegistrations,r=void 0!==n&&n,i=!0,o=!1,a=void 0;try{for(var s,u=e[Symbol.iterator]();!(i=(s=u.next()).done);i=!0){c(s.value,{ignoreMultipleRegistrations:r})}}catch(e){o=!0,a=e}finally{try{!i&&u.return&&u.return()}finally{if(o)throw a}}}function i(e){d=e}function o(e){if("string"!==typeof e){var t=e;return h()("string"===typeof t.name),c(t,{ignoreMultipleRegistrations:!0}),t}var n=p[e];return n||h()(!1,"Unknown shader module "+e),n}function a(e){return s(e.map(function(e){return"string"!==typeof e?(r([e],{ignoreMultipleRegistrations:!0}),e.name):e}))}function s(e){e=e.concat(d);var t={};return u({modules:e,level:0,result:t}),Object.keys(t).sort(function(e,n){return t[n]-t[e]})}function u(e){var t=e.modules,n=e.level,r=e.result;if(n>=5)throw new Error("Possible loop in shader dependency graph");var i=!0,a=!1,s=void 0;try{for(var l,c=t[Symbol.iterator]();!(i=(l=c.next()).done);i=!0){var f=l.value,h=o(f);(void 0===r[h.name]||r[h.name]<n)&&(r[h.name]=n)}}catch(e){a=!0,s=e}finally{try{!i&&c.return&&c.return()}finally{if(a)throw s}}var p=!0,d=!1,v=void 0;try{for(var g,y=t[Symbol.iterator]();!(p=(g=y.next()).done);p=!0){var m=g.value,_=o(m);_.dependencies&&u({modules:_.dependencies,level:n+1,result:r})}}catch(e){d=!0,v=e}finally{try{!p&&y.return&&y.return()}finally{if(d)throw v}}return r}function l(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.forEach(function(e){switch(e.type){case"function":e.regex=new RegExp("\\b"+e.old+"\\(");break;default:e.regex=new RegExp(e.type+" "+e.old+";")}}),e}function c(e,t){var n=t.ignoreMultipleRegistrations,r=void 0!==n&&n;if(h()(e.name,"shader module has no name"),!r&&p[e.name])throw new Error("shader module "+e.name+" already registered");p[e.name]=e,e.dependencies=e.dependencies||[],e.deprecations=l(e.deprecations)}t.b=r,t.d=i,t.a=o,t.c=a;var f=n(0),h=n.n(f),p={},d=[]},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=window&&window.addEventListener,o=new Map,a=function(e,t){var n=o.get(e),r=Date.now();return!!(n&&r-n<t)||(o.set(e,r),!1)},s=function(e){return function(t,n){if(!n||"object"!==("undefined"===typeof n?"undefined":r(n))||!e.has(n)){e.add(n);return Object.prototype.toString.call(n).slice(8,-1).includes("Array")?Array.prototype.slice.call(n,0,20):n}}},u=function(){return window&&window.__SEER_INITIALIZED__},l=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(i&&u()){var n=new Set,r=JSON.stringify(t,s(n));try{window.postMessage({type:e,payload:r,source:"seer-agent"},"*")}catch(e){if(a("seer-log",2e3))return;console.log(e)}}},c=new Map,f=function(e){if(e&&e.data&&"seer-core"===e.data.source){var t=e.data,n=t.type,r=t.payload,i=c.get(n);i&&i.forEach(function(e){return e(r)})}},h=function(){i&&!window.__SEER_LISTENER__&&(window.addEventListener("message",f),window.__SEER_LISTENER__=!0)},p=function(){i&&window.__SEER_LISTENER__&&(window.removeEventListener("message",f),delete window.__SEER_LISTENER__)},d=function(e,t){if(u){if(!e||!t)throw new Error("Please provide a type and callback");c.has(e)||c.set(e,[]),window.__SEER_LISTENER__||h(),c.get(e).push(t)}},v=function(e){c.forEach(function(t,n){c.set(n,t.filter(function(t){return t!==e}))})},g=function(e,t){return l("LIST",{key:e,data:t})},y=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return l("LIST_ITEM",{key:e,itemKey:t,data:n})},m=function(e,t,n,r){return l("UPDATE_ITEM",{key:e,itemKey:t,path:n,data:r})},_=function(e,t,n){return l("MULTI_UPDATE_ITEM",{key:e,itemKey:t,array:n})},b=function(e,t){return l("DELETE_ITEM",{key:e,itemKey:t})},E=function(e,t,n){return l("ADD_LOG",{key:e,itemKey:t,msg:n})};t.default={send:l,throttle:a,list:g,listItem:y,updateItem:m,multiUpdate:_,deleteItem:b,addLog:E,isReady:u,listeners:c,listenFor:d,removeListener:v,init:h,clean:p}},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=n(64),o=n(267),a=n(268),s=n(269),u=n(270),l=n(12),c=n(271),f=n(4),h=n(0),p=n.n(h),d=function(){function e(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),v=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),g=[],y={};Object.freeze(y);var m=function(){},_={dataComparator:null,updateTriggers:{},numInstances:void 0,visible:!0,pickable:!1,opacity:.8,onHover:m,onClick:m,coordinateSystem:i.a.LNGLAT,coordinateOrigin:[0,0,0],parameters:{},uniforms:{},framebuffer:null,animation:null,getPolygonOffset:function(e){return[0,100*-e.layerIndex]},highlightedObjectIndex:null,autoHighlight:!1,highlightColor:[0,0,128,128]},b=0,E=function(){function e(t){r(this,e),this.props=this._normalizeProps(t),this.id=this.props.id,this.oldProps=y,this.count=b++,this.lifecycle=i.b.NO_STATE,this.state=null,this.context=null,this.parentLayer=null,this.internalState=null,Object.seal(this)}return v(e,[{key:"toString",value:function(){return(this.constructor.layerName||this.constructor.name)+"({id: '"+this.props.id+"'})"}},{key:"needsUpdate",value:function(){return this.shouldUpdateState(this._getUpdateParams())}},{key:"getNeedsRedraw",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.clearRedrawFlags,n=void 0!==t&&t;return this._getNeedsRedraw(n)}},{key:"initializeState",value:function(){throw new Error("Layer "+this+" has not defined initializeState")}},{key:"shouldUpdateState",value:function(e){e.oldProps,e.props,e.oldContext,e.context;return e.changeFlags.propsOrDataChanged}},{key:"updateState",value:function(e){var t=(e.oldProps,e.props,e.oldContext,e.context,e.changeFlags),n=this.state.attributeManager;t.dataChanged&&n&&n.invalidateAll()}},{key:"finalizeState",value:function(){}},{key:"draw",value:function(e){var t=!0,n=!1,r=void 0;try{for(var i,o=this.getModels()[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){i.value.draw(e)}}catch(e){n=!0,r=e}finally{try{!t&&o.return&&o.return()}finally{if(n)throw r}}}},{key:"getPickingInfo",value:function(e){var t=e.info,n=(e.mode,t.index);return n>=0&&Array.isArray(this.props.data)&&(t.object=this.props.data[n]),t}},{key:"isPickable",value:function(){return this.props.pickable&&this.props.visible}},{key:"invalidateAttribute",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"all",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=this.state.attributeManager;n&&("all"===e?(l.a.log(1,"updateTriggers invalidating all attributes: "+t),n.invalidateAll()):(l.a.log(1,"updateTriggers invalidating attribute "+e+": "+t),n.invalidate(e)))}},{key:"updateAttributes",value:function(e){var t=this.state.attributeManager;if(t){var n=this.getNumInstances(e);t.update({data:e.data,numInstances:n,props:e,buffers:e,context:this,ignoreUnknownAttributes:!0});var r=this.state.model;if(r){var i=t.getChangedAttributes({clearChangedFlags:!0});r.setAttributes(i)}}}},{key:"setState",value:function(e){Object.assign(this.state,e),this.state.needsRedraw=!0}},{key:"setNeedsRedraw",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.state&&(this.state.needsRedraw=e)}},{key:"getModels",value:function(){return this.state.models||(this.state.model?[this.state.model]:[])}},{key:"project",value:function(e){var t=this.context.viewport;return p()(Array.isArray(e),"Layer.project needs [lng,lat]"),t.project(e)}},{key:"unproject",value:function(e){var t=this.context.viewport;return p()(Array.isArray(e),"Layer.unproject needs [x,y]"),t.unproject(e)}},{key:"projectFlat",value:function(e){var t=this.context.viewport;return p()(Array.isArray(e),"Layer.project needs [lng,lat]"),t.projectFlat(e)}},{key:"unprojectFlat",value:function(e){var t=this.context.viewport;return p()(Array.isArray(e),"Layer.unproject needs [x,y]"),t.unprojectFlat(e)}},{key:"screenToDevicePixels",value:function(e){return l.a.deprecated("screenToDevicePixels","DeckGL prop useDevicePixels for conversion"),e*("undefined"!==typeof window?window.devicePixelRatio:1)}},{key:"nullPickingColor",value:function(){return[0,0,0]}},{key:"encodePickingColor",value:function(e){return p()(0===(e+1>>24&255),"index out of picking color range"),[e+1&255,e+1>>8&255,e+1>>8>>8&255]}},{key:"decodePickingColor",value:function(e){p()(e instanceof Uint8Array);var t=d(e,3);return t[0]+256*t[1]+65536*t[2]-1}},{key:"calculateInstancePickingColors",value:function(e,t){for(var n=t.numInstances,r=e.value,i=e.size,o=0;o<n;o++){var a=this.encodePickingColor(o);r[o*i+0]=a[0],r[o*i+1]=a[1],r[o*i+2]=a[2]}}},{key:"getFirstObject",value:function(){var e=this.props.data,t=!0,n=!1,r=void 0;try{for(var i,o=e[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){return i.value}}catch(e){n=!0,r=e}finally{try{!t&&o.return&&o.return()}finally{if(n)throw r}}return null}},{key:"getNumInstances",value:function(e){if(e=e||this.props,this.state&&void 0!==this.state.numInstances)return this.state.numInstances;if(void 0!==e.numInstances)return e.numInstances;var t=e,n=t.data;return Object(u.a)(n)}},{key:"clone",value:function(e){return new this.constructor(Object.assign({},this.props,e))}},{key:"_initialize",value:function(){p()(0===arguments.length),p()(this.context.gl),p()(!this.state);var e=new o.a({id:this.props.id});e.addInstanced({instancePickingColors:{type:f.e.UNSIGNED_BYTE,size:3,update:this.calculateInstancePickingColors}}),this.internalState={subLayers:null,stats:new a.a({id:"draw"})},this.state={attributeManager:e,model:null,needsRedraw:!0},this.initializeState(this.context),this.setChangeFlags({dataChanged:!0,propsChanged:!0,viewportChanged:!0}),this._updateState(this._getUpdateParams()),this.isComposite&&this._renderLayers(!0);var t=this.state.model;t&&(t.id=this.props.id,t.program.id=this.props.id+"-program",t.geometry.id=this.props.id+"-geometry",t.setAttributes(e.getAttributes())),this.isComposite&&this._renderLayers(),this.clearChangeFlags()}},{key:"_update",value:function(){p()(0===arguments.length);var e=this.needsUpdate(),t={props:this.props,oldProps:this.oldProps,context:this.context,oldContext:this.oldContext,changeFlags:this.internalState.changeFlags};e&&this._updateState(t),this.isComposite&&this._renderLayers(e),this.clearChangeFlags()}},{key:"_updateState",value:function(e){this.updateState(e),this.updateAttributes(this.props),this._updateBaseUniforms(),this._updateModuleSettings(),this.state.model&&this.state.model.setInstanceCount(this.getNumInstances())}},{key:"_finalize",value:function(){p()(0===arguments.length),this.finalizeState(this.context),Object(c.d)(this.id)}},{key:"drawLayer",value:function(e){var t=this,n=e.moduleParameters,r=void 0===n?null:n,i=e.uniforms,o=void 0===i?{}:i,a=e.parameters,s=void 0===a?{}:a;if(r){var u=!0,l=!1,c=void 0;try{for(var h,p=this.getModels()[Symbol.iterator]();!(u=(h=p.next()).done);u=!0){h.value.updateModuleSettings(r)}}catch(e){l=!0,c=e}finally{try{!u&&p.return&&p.return()}finally{if(l)throw c}}}var d=this.props.getPolygonOffset,v=d&&d(o)||[0,0];s.polygonOffset=v,Object(f.r)(this.context.gl,s,function(){t.draw({moduleParameters:r,uniforms:o,parameters:s,context:t.context})})}},{key:"pickLayer",value:function(e){return this.getPickingInfo(e)}},{key:"getChangeFlags",value:function(){return this.internalState.changeFlags}},{key:"setChangeFlags",value:function(e){var t=this;this.internalState.changeFlags=this.internalState.changeFlags||{};var n=this.internalState.changeFlags;e.dataChanged&&!n.dataChanged&&(n.dataChanged=e.dataChanged,l.a.log(2,function(){return"dataChanged: "+e.dataChanged+" in "+t.id})),e.updateTriggersChanged&&!n.updateTriggersChanged&&(n.updateTriggersChanged=n.updateTriggersChanged&&e.updateTriggersChanged?Object.assign({},e.updateTriggersChanged,n.updateTriggersChanged):e.updateTriggersChanged||n.updateTriggersChanged,l.a.log(2,function(){return"updateTriggersChanged: "+Object.keys(e.updateTriggersChanged).join(", ")+" in "+t.id})),e.propsChanged&&!n.propsChanged&&(n.propsChanged=e.propsChanged,l.a.log(2,function(){return"propsChanged: "+e.propsChanged+" in "+t.id})),e.viewportChanged&&!n.viewportChanged&&(n.viewportChanged=e.viewportChanged,l.a.log(3,function(){return"viewportChanged: "+e.viewportChanged+" in "+t.id}));var r=e.dataChanged||e.updateTriggersChanged||e.propsChanged;n.propsOrDataChanged=n.propsOrDataChanged||r,n.somethingChanged=n.somethingChanged||r||e.viewportChanged}},{key:"clearChangeFlags",value:function(){this.internalState.changeFlags={dataChanged:!1,propsChanged:!1,updateTriggersChanged:!1,viewportChanged:!1,propsOrDataChanged:!1,somethingChanged:!1}}},{key:"printChangeFlags",value:function(){var e=this.internalState.changeFlags;return(e.dataChanged?"data ":"")+(e.propsChanged?"props ":"")+(e.updateTriggersChanged?"triggers ":"")+(e.viewportChanged?"viewport":"")}},{key:"diffProps",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.oldProps,n=Object(s.b)(e,t);if(n.updateTriggersChanged)for(var r in n.updateTriggersChanged)n.updateTriggersChanged[r]&&this._activeUpdateTrigger(r);return this.setChangeFlags(n)}},{key:"_getUpdateParams",value:function(){return{props:this.props,oldProps:this.oldProps,context:this.context,oldContext:this.oldContext||{},changeFlags:this.internalState.changeFlags}}},{key:"_getNeedsRedraw",value:function(e){if(!this.state)return!1;var t=!1;t=t||this.state.needsRedraw&&this.id,this.state.needsRedraw=this.state.needsRedraw&&!e;var n=this.state.attributeManager,r=n&&n.getNeedsRedraw({clearRedrawFlags:e});t=t||r;var i=!0,o=!1,a=void 0;try{for(var s,u=this.getModels()[Symbol.iterator]();!(i=(s=u.next()).done);i=!0){var l=s.value,c=l.getNeedsRedraw({clearRedrawFlags:e});c&&"string"!==typeof c&&(c="model "+l.id),t=t||c}}catch(e){o=!0,a=e}finally{try{!i&&u.return&&u.return()}finally{if(o)throw a}}return t}},{key:"_normalizeProps",value:function(e){var t=Object(s.c)(this);return e=Object.assign({},t,e),e.data=e.data||g,Object(c.a)(e),Object.freeze(e),e}},{key:"_transferState",value:function(e){var t=e.state,n=e.internalState,r=e.props;p()(t&&n),t.layer=this,this.state=t,this.internalState=n,this.oldProps=r;var i=!0,o=!1,a=void 0;try{for(var s,u=this.getModels()[Symbol.iterator]();!(i=(s=u.next()).done);i=!0){s.value.userData.layer=this}}catch(e){o=!0,a=e}finally{try{!i&&u.return&&u.return()}finally{if(o)throw a}}this.diffProps()}},{key:"_activeUpdateTrigger",value:function(e){this.invalidateAttribute(e)}},{key:"_checkRequiredProp",value:function(e,t){var n=this.props[e];if(void 0===n)throw new Error("Property "+e+" undefined in layer "+this);if(t&&!t(n))throw new Error("Bad property "+e+" in layer "+this)}},{key:"_updateBaseUniforms",value:function(){var e={opacity:Math.pow(this.props.opacity,1/2.2),ONE:1},t=!0,n=!1,r=void 0;try{for(var i,o=this.getModels()[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){i.value.setUniforms(e)}}catch(e){n=!0,r=e}finally{try{!t&&o.return&&o.return()}finally{if(n)throw r}}this.state.needsRedraw=!0}},{key:"_updateModuleSettings",value:function(){var e={pickingHighlightColor:this.props.highlightColor},t=!0,n=!1,r=void 0;try{for(var i,o=this.getModels()[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){i.value.updateModuleSettings(e)}}catch(e){n=!0,r=e}finally{try{!t&&o.return&&o.return()}finally{if(n)throw r}}}},{key:"setUniforms",value:function(e){var t=!0,n=!1,r=void 0;try{for(var i,o=this.getModels()[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){i.value.setUniforms(e)}}catch(e){n=!0,r=e}finally{try{!t&&o.return&&o.return()}finally{if(n)throw r}}this.state.needsRedraw=!0,l.a.deprecated("layer.setUniforms","model.setUniforms")}},{key:"stats",get:function(){return this.internalState.stats}}]),e}();t.a=E,E.layerName="Layer",E.propTypes=_,E.defaultProps=_},function(e,t,n){"use strict";function r(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.filter,r=void 0===n?function(){return!0}:n,o=t.map,a=void 0===o?function(e){return e}:o,s=t.result,u=void 0===s?[]:s;return Array.isArray(e)?i(e,r,a,u):r(e)?[a(e)]:[]}function i(e,t,n,r){for(var o=-1;++o<e.length;){var a=e[o];Array.isArray(a)?i(a,t,n,r):t(a)&&r.push(n(a))}return r}function o(e){for(var t=0,n=-1;++n<e.length;){var r=e[n];Array.isArray(r)||ArrayBuffer.isView(r)?t+=o(r):t++}return t}function a(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.result,r=void 0===n?[]:n,i=t.dimensions,o=void 0===i?3:i,s=-1,u=0;++s<e.length;){var l=e[s];Array.isArray(l)||ArrayBuffer.isView(l)?a(l,{result:r,dimensions:o}):u<o&&(r.push(l),u++)}return u>0&&u<o&&r.push(0),r}function s(e){for(var t=e.target,n=e.source,r=e.start,i=void 0===r?0:r,o=e.count,a=void 0===o?1:o,s=n.length,u=a*s,l=0,c=i;l<s;l++)t[c++]=n[l];for(;l<u;)l<u-l?(t.copyWithin(i+l,i,i+l),l*=2):(t.copyWithin(i+l,i,i+u-l),l=u);return t}t.c=r,t.a=o,t.d=a,t.b=s},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=n(97),o=n(0),a=n.n(o),s=function(){function e(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l={WHEEL:["wheel"],PAN:["panstart","panmove","panend"],PINCH:["pinchstart","pinchmove","pinchend"],DOUBLE_TAP:["doubletap"],KEYBOARD:["keydown","keyup"]},c=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};r(this,e),a()(t),this.ViewportState=t,this.viewportState=null,this.viewportStateProps=null,this.eventManager=null,this._events=null,this._state={isDragging:!1},this.handleEvent=this.handleEvent.bind(this),this.setOptions(n),this.constructor===e&&Object.seal(this)}return u(e,[{key:"handleEvent",value:function(e){var t=this.ViewportState;switch(this.viewportState=new t(Object.assign({},this.viewportStateProps,this._state)),e.type){case"panstart":return this._onPanStart(e);case"panmove":return this._onPan(e);case"panend":return this._onPanEnd(e);case"pinchstart":return this._onPinchStart(e);case"pinch":return this._onPinch(e);case"pinchend":return this._onPinchEnd(e);case"doubletap":return this._onDoubleTap(e);case"wheel":return this._onWheel(e);case"keydown":return this._onKeyDown(e);case"keyup":return this._onKeyUp(e);default:return!1}}},{key:"getCenter",value:function(e){var t=e.offsetCenter;return[t.x,t.y]}},{key:"isFunctionKeyPressed",value:function(e){var t=e.srcEvent;return Boolean(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}},{key:"isDragging",value:function(){return this._state.isDragging}},{key:"setOptions",value:function(e){var t=e.onViewportChange,n=e.onStateChange,r=void 0===n?this.onStateChange:n,i=e.eventManager,o=void 0===i?this.eventManager:i,a=e.scrollZoom,s=void 0===a||a,u=e.dragPan,c=void 0===u||u,f=e.dragRotate,h=void 0===f||f,p=e.doubleClickZoom,d=void 0===p||p,v=e.touchZoomRotate,g=void 0===v||v,y=e.keyboard,m=void 0===y||y;this.onViewportChange=t,this.onStateChange=r,this.viewportStateProps=e,this.eventManager!==o&&(this.eventManager=o,this._events={});var _=Boolean(this.onViewportChange);this.toggleEvents(l.WHEEL,_&&s),this.toggleEvents(l.PAN,_&&(c||h)),this.toggleEvents(l.PINCH,_&&g),this.toggleEvents(l.DOUBLE_TAP,_&&d),this.toggleEvents(l.KEYBOARD,_&&m),this.scrollZoom=s,this.dragPan=c,this.dragRotate=h,this.doubleClickZoom=d,this.touchZoomRotate=g}},{key:"toggleEvents",value:function(e,t){var n=this;this.eventManager&&e.forEach(function(e){n._events[e]!==t&&(n._events[e]=t,t?n.eventManager.on(e,n.handleEvent):n.eventManager.off(e,n.handleEvent))})}},{key:"setState",value:function(e){Object.assign(this._state,e),this.onStateChange&&this.onStateChange(this._state)}},{key:"updateViewport",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.viewportState.getViewportProps(),r=e.getViewportProps();if(this.onViewportChange&&Object.keys(r).some(function(e){return n[e]!==r[e]})){var i=this.viewportState.getViewport?this.viewportState.getViewport():null;this.onViewportChange(r,i)}this.setState(Object.assign({},e.getInteractiveState(),t))}},{key:"_onPanStart",value:function(e){var t=this.getCenter(e),n=this.viewportState.panStart({pos:t}).rotateStart({pos:t});return this.updateViewport(n,{isDragging:!0})}},{key:"_onPan",value:function(e){return this.isFunctionKeyPressed(e)?this._onPanMove(e):this._onPanRotate(e)}},{key:"_onPanEnd",value:function(e){var t=this.viewportState.panEnd().rotateEnd();return this.updateViewport(t,{isDragging:!1})}},{key:"_onPanMove",value:function(e){if(!this.dragPan)return!1;var t=this.getCenter(e),n=this.viewportState.pan({pos:t});return this.updateViewport(n)}},{key:"_onPanRotate",value:function(e){return this.viewportState instanceof i.b?this._onPanRotateMap(e):this._onPanRotateStandard(e)}},{key:"_onPanRotateStandard",value:function(e){if(!this.dragRotate)return!1;var t=e.deltaX,n=e.deltaY,r=this.viewportState.getViewportProps(),i=r.width,o=r.height,a=t/i,s=n/o,u=this.viewportState.rotate({deltaScaleX:a,deltaScaleY:s});return this.updateViewport(u)}},{key:"_onPanRotateMap",value:function(e){if(!this.dragRotate)return!1;var t=e.deltaX,n=e.deltaY,r=this.getCenter(e),i=s(r,2),o=i[1],a=o-n,u=this.viewportState.getViewportProps(),l=u.width,c=u.height,f=t/l,h=0;n>0?Math.abs(c-a)>5&&(h=n/(a-c)*1.2):n<0&&a>5&&(h=1-o/a),h=Math.min(1,Math.max(-1,h));var p=this.viewportState.rotate({deltaScaleX:f,deltaScaleY:h});return this.updateViewport(p)}},{key:"_onWheel",value:function(e){if(!this.scrollZoom)return!1;e.srcEvent.preventDefault();var t=this.getCenter(e),n=e.delta,r=2/(1+Math.exp(-Math.abs(.01*n)));n<0&&0!==r&&(r=1/r);var i=this.viewportState.zoom({pos:t,scale:r});return this.updateViewport(i)}},{key:"_onPinchStart",value:function(e){var t=this.getCenter(e),n=this.viewportState.zoomStart({pos:t});return this.updateViewport(n,{isDragging:!0})}},{key:"_onPinch",value:function(e){if(!this.touchZoomRotate)return!1;var t=this.getCenter(e),n=e.scale,r=this.viewportState.zoom({pos:t,scale:n});return this.updateViewport(r)}},{key:"_onPinchEnd",value:function(e){var t=this.viewportState.zoomEnd();return this.updateViewport(t,{isDragging:!1})}},{key:"_onDoubleTap",value:function(e){if(!this.doubleClickZoom)return!1;var t=this.getCenter(e),n=this.isFunctionKeyPressed(e),r=this.viewportState.zoom({pos:t,scale:n?.5:2});return this.updateViewport(r)}},{key:"_onKeyDown",value:function(e){if(!this.viewportState.isDragging){var t={w:"moveForward",W:"moveForward",ArrowUp:"moveForward",s:"moveBackward",S:"moveBackward",ArrowDown:"moveBackward",a:"moveLeft",A:"moveLeft",ArrowLeft:"moveLeft",d:"moveRight",D:"moveRight",ArrowRight:"moveRight","=":"zoomIn","+":"zoomIn","-":"zoomOut","[":"moveDown","]":"moveUp"},n=e.key,r=t[n];if(this.viewportState[r]){var i=this.viewportState[r]();this.updateViewport(i)}}}},{key:"_onKeyUp",value:function(e){}}]),e}();t.a=c},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=0,a=function(){function e(){r(this,e),this.id="effect",this.count=o++,this.visible=!0,this.priority=0,this.needsRedraw=!1}return i(e,[{key:"initialize",value:function(e){e.gl,e.layerManager}},{key:"finalize",value:function(e){e.gl,e.layerManager}},{key:"preDraw",value:function(e){e.gl,e.layerManager}},{key:"draw",value:function(e){e.gl,e.layerManager}},{key:"setNeedsRedraw",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.needsRedraw=e}}]),e}();t.a=a},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(3),s=n(4),u=n(513),l=n(514),c=n(515),f=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),h=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},p=a.d.fp64LowPart,d=a.d.enable64bitSupport,v=[0,0,0,255],g={widthScale:1,widthMinPixels:0,widthMaxPixels:Number.MAX_SAFE_INTEGER,rounded:!1,miterLimit:4,fp64:!1,dashJustified:!1,getPath:function(e){return e.path},getColor:function(e){return e.color||v},getWidth:function(e){return e.width||1},getDashArray:null},y=function(e){var t=e[0],n=e[e.length-1];return t[0]===n[0]&&t[1]===n[1]&&t[2]===n[2]},m=function(e){function t(){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),f(t,[{key:"getShaders",value:function(){return d(this.props)?{vs:l.a,fs:c.a,modules:["project64","picking"]}:{vs:u.a,fs:c.a,modules:["picking"]}}},{key:"initializeState",value:function(){this.state.attributeManager.addInstanced({instanceStartPositions:{size:3,update:this.calculateStartPositions},instanceEndPositions:{size:3,update:this.calculateEndPositions},instanceLeftDeltas:{size:3,update:this.calculateLeftDeltas},instanceRightDeltas:{size:3,update:this.calculateRightDeltas},instanceStrokeWidths:{size:1,accessor:"getWidth",update:this.calculateStrokeWidths},instanceDashArrays:{size:2,accessor:"getDashArray",update:this.calculateDashArrays},instanceColors:{size:4,type:s.e.UNSIGNED_BYTE,accessor:"getColor",update:this.calculateColors},instancePickingColors:{size:3,type:s.e.UNSIGNED_BYTE,update:this.calculatePickingColors}})}},{key:"updateAttribute",value:function(e){var t=e.props,n=e.oldProps;e.changeFlags;if(t.fp64!==n.fp64){var r=this.state.attributeManager;r.invalidateAll(),t.fp64&&t.coordinateSystem===a.a.LNGLAT?r.addInstanced({instanceStartEndPositions64xyLow:{size:4,update:this.calculateInstanceStartEndPositions64xyLow}}):r.remove(["instanceStartEndPositions64xyLow"])}}},{key:"updateState",value:function(e){var n=e.oldProps,r=e.props,i=e.changeFlags;h(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateState",this).call(this,{props:r,oldProps:n,changeFlags:i});var o=this.props.getPath,a=this.state.attributeManager;if(r.fp64!==n.fp64){var s=this.context.gl;this.setState({model:this._getModel(s)})}if(this.updateAttribute({props:r,oldProps:n,changeFlags:i}),i.dataChanged||i.updateTriggersChanged&&(i.updateTriggersChanged.all||i.updateTriggersChanged.getPath)){var u=r.data.map(o),l=u.reduce(function(e,t){return e+t.length-1},0);this.setState({paths:u,numInstances:l}),a.invalidateAll()}}},{key:"draw",value:function(e){var t=e.uniforms,n=this.props,r=n.rounded,i=n.miterLimit,o=n.widthScale,a=n.widthMinPixels,s=n.widthMaxPixels,u=n.dashJustified;this.state.model.render(Object.assign({},t,{jointType:Number(r),alignMode:Number(u),widthScale:o,miterLimit:i,widthMinPixels:a,widthMaxPixels:s}))}},{key:"_getModel",value:function(e){var t=[0,2,1,1,2,4,1,4,3,3,4,5],n=[0,0,1,0,-1,0,0,1,0,1,-1,0,1,1,0,1,0,1];return new s.g(e,Object.assign({},this.getShaders(),{id:this.props.id,geometry:new s.f({drawMode:s.e.TRIANGLES,attributes:{indices:new Uint16Array(t),positions:new Float32Array(n)}}),isInstanced:!0,shaderCache:this.context.shaderCache}))}},{key:"calculateStartPositions",value:function(e){var t=this.state.paths,n=e.value,r=0;t.forEach(function(e){for(var t=e.length-1,i=0;i<t;i++){var o=e[i];n[r++]=o[0],n[r++]=o[1],n[r++]=o[2]||0}})}},{key:"calculateEndPositions",value:function(e){var t=this.state.paths,n=e.value,r=0;t.forEach(function(e){for(var t=1;t<e.length;t++){var i=e[t];n[r++]=i[0],n[r++]=i[1],n[r++]=i[2]||0}})}},{key:"calculateInstanceStartEndPositions64xyLow",value:function(e){var t=this.state.paths,n=e.value,r=0;t.forEach(function(e){for(var t=e.length-1,i=0;i<t;i++){var o=e[i],a=e[i+1];n[r++]=p(o[0]),n[r++]=p(o[1]),n[r++]=p(a[0]),n[r++]=p(a[1])}})}},{key:"calculateLeftDeltas",value:function(e){var t=this.state.paths,n=e.value,r=0;t.forEach(function(e){for(var t=e.length-1,i=y(e)?e[e.length-2]:e[0],o=0;o<t;o++){var a=e[o];n[r++]=a[0]-i[0],n[r++]=a[1]-i[1],n[r++]=a[2]-i[2]||0,i=a}})}},{key:"calculateRightDeltas",value:function(e){var t=this.state.paths,n=e.value,r=0;t.forEach(function(e){for(var t=1;t<e.length;t++){var i=e[t],o=e[t+1];o||(o=y(e)?e[1]:i),n[r++]=o[0]-i[0],n[r++]=o[1]-i[1],n[r++]=o[2]-i[2]||0}})}},{key:"calculateStrokeWidths",value:function(e){var t=this.props,n=t.data,r=t.getWidth,i=this.state.paths,o=e.value,a=0;i.forEach(function(e,t){for(var i=r(n[t],t),s=1;s<e.length;s++)o[a++]=i})}},{key:"calculateDashArrays",value:function(e){var t=this.props,n=t.data,r=t.getDashArray;if(r){var i=this.state.paths,o=e.value,a=0;i.forEach(function(e,t){for(var i=r(n[t],t),s=1;s<e.length;s++)o[a++]=i[0],o[a++]=i[1]})}}},{key:"calculateColors",value:function(e){var t=this.props,n=t.data,r=t.getColor,i=this.state.paths,o=e.value,a=0;i.forEach(function(e,t){var i=r(n[t],t);isNaN(i[3])&&(i[3]=255);for(var s=1;s<e.length;s++)o[a++]=i[0],o[a++]=i[1],o[a++]=i[2],o[a++]=i[3]})}},{key:"calculatePickingColors",value:function(e){var t=this,n=this.state.paths,r=e.value,i=0;n.forEach(function(e,n){for(var o=t.encodePickingColor(n),a=1;a<e.length;a++)r[i++]=o[0],r[i++]=o[1],r[i++]=o[2]})}}]),t}(a.c);t.a=m,m.layerName="PathLayer",m.defaultProps=g},function(e,t,n){"use strict";function r(e){return e.length>=1&&e[0].length>=2&&Number.isFinite(e[0][0])}function i(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t.dimensions;return r(e)?[e]:e}function o(e){return r(e)?e.length:e.reduce(function(e,t){return e+t.length},0)}function a(e){var t=0,n=!0,r=!0,o=!1,a=void 0;try{for(var s,u=i(e)[Symbol.iterator]();!(r=(s=u.next()).done);r=!0){var l=s.value,c=l.length;t+=n?c>=3?c-2:0:c+1,n=!1}}catch(e){o=!0,a=e}finally{try{!r&&u.return&&u.return()}finally{if(o)throw a}}return t}function s(e,t){if(r(e))return void e.forEach(t);var n=0;e.forEach(function(r){r.forEach(function(r,i,o){return t(r,n,e)}),n++})}t.d=i,t.c=o,t.b=a,t.a=s},function(e,t,n){"use strict";function r(e){return function(t,n){e(null==t?n:null)}}function i(e){var t=e.responseType;return t&&"text"!==t?e.response:e.responseText}var o=n(544),a=n(550);t.a=function(e,t){function n(e){var t,n=p.status;if(!n&&i(p)||n>=200&&n<300||304===n){if(l)try{t=l.call(s,p)}catch(e){return void f.call("error",s,e)}else t=p;f.call("load",s,t)}else f.call("error",s,e)}var s,u,l,c,f=Object(a.a)("beforesend","progress","load","error"),h=Object(o.a)(),p=new XMLHttpRequest,d=null,v=null,g=0;if("undefined"===typeof XDomainRequest||"withCredentials"in p||!/^(http(s)?:)?\/\//.test(e)||(p=new XDomainRequest),"onload"in p?p.onload=p.onerror=p.ontimeout=n:p.onreadystatechange=function(e){p.readyState>3&&n(e)},p.onprogress=function(e){f.call("progress",s,e)},s={header:function(e,t){return e=(e+"").toLowerCase(),arguments.length<2?h.get(e):(null==t?h.remove(e):h.set(e,t+""),s)},mimeType:function(e){return arguments.length?(u=null==e?null:e+"",s):u},responseType:function(e){return arguments.length?(c=e,s):c},timeout:function(e){return arguments.length?(g=+e,s):g},user:function(e){return arguments.length<1?d:(d=null==e?null:e+"",s)},password:function(e){return arguments.length<1?v:(v=null==e?null:e+"",s)},response:function(e){return l=e,s},get:function(e,t){return s.send("GET",e,t)},post:function(e,t){return s.send("POST",e,t)},send:function(t,n,i){return p.open(t,e,!0,d,v),null==u||h.has("accept")||h.set("accept",u+",*/*"),p.setRequestHeader&&h.each(function(e,t){p.setRequestHeader(t,e)}),null!=u&&p.overrideMimeType&&p.overrideMimeType(u),null!=c&&(p.responseType=c),g>0&&(p.timeout=g),null==i&&"function"===typeof n&&(i=n,n=null),null!=i&&1===i.length&&(i=r(i)),null!=i&&s.on("error",i).on("load",function(e){i(null,e)}),f.call("beforesend",s,p),p.send(null==n?null:n),s},abort:function(){return p.abort(),s},on:function(){var e=f.on.apply(f,arguments);return e===f?s:e}},null!=t){if("function"!==typeof t)throw new Error("invalid callback: "+t);return s.get(t)}return s}},function(e,t,n){"use strict";function r(){}function i(e,t){var n=new r;if(e instanceof r)e.each(function(e,t){n.set(t,e)});else if(Array.isArray(e)){var i,o=-1,a=e.length;if(null==t)for(;++o<a;)n.set(o,e[o]);else for(;++o<a;)n.set(t(i=e[o],o,e),i)}else if(e)for(var s in e)n.set(s,e[s]);return n}n.d(t,"b",function(){return o});var o="$";r.prototype=i.prototype={constructor:r,has:function(e){return o+e in this},get:function(e){return this[o+e]},set:function(e,t){return this[o+e]=t,this},remove:function(e){var t=o+e;return t in this&&delete this[t]},clear:function(){for(var e in this)e[0]===o&&delete this[e]},keys:function(){var e=[];for(var t in this)t[0]===o&&e.push(t.slice(1));return e},values:function(){var e=[];for(var t in this)t[0]===o&&e.push(this[t]);return e},entries:function(){var e=[];for(var t in this)t[0]===o&&e.push({key:t.slice(1),value:this[t]});return e},size:function(){var e=0;for(var t in this)t[0]===o&&++e;return e},empty:function(){for(var e in this)if(e[0]===o)return!1;return!0},each:function(e){for(var t in this)t[0]===o&&e(this[t],t.slice(1),this)}},t.a=i},function(e,t,n){"use strict";function r(e){return new Function("d","return {"+e.map(function(e,t){return JSON.stringify(e)+": d["+t+"]"}).join(",")+"}")}function i(e,t){var n=r(e);return function(r,i){return t(n(r),i,e)}}function o(e){var t=Object.create(null),n=[];return e.forEach(function(e){for(var r in e)r in t||n.push(t[r]=r)}),n}var a={},s={},u=34,l=10,c=13;t.a=function(e){function t(e,t){var o,a,s=n(e,function(e,n){if(o)return o(e,n-1);a=e,o=t?i(e,t):r(e)});return s.columns=a||[],s}function n(e,t){function n(){if(p)return s;if(d)return d=!1,a;var t,n,r=f;if(e.charCodeAt(r)===u){for(;f++<o&&e.charCodeAt(f)!==u||e.charCodeAt(++f)===u;);return(t=f)>=o?p=!0:(n=e.charCodeAt(f++))===l?d=!0:n===c&&(d=!0,e.charCodeAt(f)===l&&++f),e.slice(r+1,t-1).replace(/""/g,'"')}for(;f<o;){if((n=e.charCodeAt(t=f++))===l)d=!0;else if(n===c)d=!0,e.charCodeAt(f)===l&&++f;else if(n!==g)continue;return e.slice(r,t)}return p=!0,e.slice(r,o)}var r,i=[],o=e.length,f=0,h=0,p=o<=0,d=!1;for(e.charCodeAt(o-1)===l&&--o,e.charCodeAt(o-1)===c&&--o;(r=n())!==s;){for(var v=[];r!==a&&r!==s;)v.push(r),r=n();t&&null==(v=t(v,h++))||i.push(v)}return i}function f(t,n){return null==n&&(n=o(t)),[n.map(d).join(e)].concat(t.map(function(t){return n.map(function(e){return d(t[e])}).join(e)})).join("\n")}function h(e){return e.map(p).join("\n")}function p(t){return t.map(d).join(e)}function d(e){return null==e?"":v.test(e+="")?'"'+e.replace(/"/g,'""')+'"':e}var v=new RegExp('["'+e+"\n\r]"),g=e.charCodeAt(0);return{parse:t,parseRows:n,format:f,formatRows:h}}},function(e,t,n){"use strict";function r(){}function i(e){try{return e.then}catch(e){return y=e,m}}function o(e,t){try{return e(t)}catch(e){return y=e,m}}function a(e,t,n){try{e(t,n)}catch(e){return y=e,m}}function s(e){if("object"!==typeof this)throw new TypeError("Promises must be constructed via new");if("function"!==typeof e)throw new TypeError("Promise constructor's argument is not a function");this._75=0,this._83=0,this._18=null,this._38=null,e!==r&&v(e,this)}function u(e,t,n){return new e.constructor(function(i,o){var a=new s(r);a.then(i,o),l(e,new d(t,n,a))})}function l(e,t){for(;3===e._83;)e=e._18;if(s._47&&s._47(e),0===e._83)return 0===e._75?(e._75=1,void(e._38=t)):1===e._75?(e._75=2,void(e._38=[e._38,t])):void e._38.push(t);c(e,t)}function c(e,t){g(function(){var n=1===e._83?t.onFulfilled:t.onRejected;if(null===n)return void(1===e._83?f(t.promise,e._18):h(t.promise,e._18));var r=o(n,e._18);r===m?h(t.promise,y):f(t.promise,r)})}function f(e,t){if(t===e)return h(e,new TypeError("A promise cannot be resolved with itself."));if(t&&("object"===typeof t||"function"===typeof t)){var n=i(t);if(n===m)return h(e,y);if(n===e.then&&t instanceof s)return e._83=3,e._18=t,void p(e);if("function"===typeof n)return void v(n.bind(t),e)}e._83=1,e._18=t,p(e)}function h(e,t){e._83=2,e._18=t,s._71&&s._71(e,t),p(e)}function p(e){if(1===e._75&&(l(e,e._38),e._38=null),2===e._75){for(var t=0;t<e._38.length;t++)l(e,e._38[t]);e._38=null}}function d(e,t,n){this.onFulfilled="function"===typeof e?e:null,this.onRejected="function"===typeof t?t:null,this.promise=n}function v(e,t){var n=!1,r=a(e,function(e){n||(n=!0,f(t,e))},function(e){n||(n=!0,h(t,e))});n||r!==m||(n=!0,h(t,y))}var g=n(297),y=null,m={};e.exports=s,s._47=null,s._71=null,s._44=r,s.prototype.then=function(e,t){if(this.constructor!==s)return u(this,e,t);var n=new s(r);return l(this,new d(e,t,n)),n}},function(e,t,n){"use strict";var r={};e.exports=r},function(e,t,n){"use strict";function r(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}r(),e.exports=n(302)},function(e,t,n){var r=n(30),i=n(67),o=n(102)("IE_PROTO"),a=Object.prototype;e.exports=Object.getPrototypeOf||function(e){return e=i(e),r(e,o)?e[o]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?a:null}},function(e,t,n){var r=n(316);e.exports=function(e,t,n){if(r(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,i){return e.call(t,n,r,i)}}return function(){return e.apply(t,arguments)}}},function(e,t,n){e.exports=!n(32)&&!n(42)(function(){return 7!=Object.defineProperty(n(160)("div"),"a",{get:function(){return 7}}).a})},function(e,t,n){var r=n(41),i=n(22).document,o=r(i)&&r(i.createElement);e.exports=function(e){return o?i.createElement(e):{}}},function(e,t,n){"use strict";var r=n(108),i=n(23),o=n(162),a=n(39),s=n(30),u=n(55),l=n(320),c=n(112),f=n(157),h=n(24)("iterator"),p=!([].keys&&"next"in[].keys()),d=function(){return this};e.exports=function(e,t,n,v,g,y,m){l(n,t,v);var _,b,E,x=function(e){if(!p&&e in A)return A[e];switch(e){case"keys":case"values":return function(){return new n(this,e)}}return function(){return new n(this,e)}},w=t+" Iterator",T="values"==g,S=!1,A=e.prototype,C=A[h]||A["@@iterator"]||g&&A[g],O=!p&&C||x(g),k=g?T?x("entries"):O:void 0,P="Array"==t?A.entries||C:C;if(P&&(E=f(P.call(new e)))!==Object.prototype&&E.next&&(c(E,w,!0),r||s(E,h)||a(E,h,d)),T&&C&&"values"!==C.name&&(S=!0,O=function(){return C.call(this)}),r&&!m||!p&&!S&&A[h]||a(A,h,O),u[t]=O,u[w]=d,g)if(_={values:T?O:x("values"),keys:y?O:x("keys"),entries:k},m)for(b in _)b in A||o(A,b,_[b]);else i(i.P+i.F*(p||S),t,_);return _}},function(e,t,n){e.exports=n(39)},function(e,t,n){var r=n(30),i=n(43),o=n(322)(!1),a=n(102)("IE_PROTO");e.exports=function(e,t){var n,s=i(e),u=0,l=[];for(n in s)n!=a&&r(s,n)&&l.push(n);for(;t.length>u;)r(s,n=t[u++])&&(~o(l,n)||l.push(n));return l}},function(e,t,n){var r=n(110);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==r(e)?e.split(""):Object(e)}},function(e,t,n){var r=n(43),i=n(166).f,o={}.toString,a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],s=function(e){try{return i(e)}catch(e){return a.slice()}};e.exports.f=function(e){return a&&"[object Window]"==o.call(e)?s(e):i(r(e))}},function(e,t,n){var r=n(163),i=n(111).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return r(e,i)}},function(e,t,n){var r=n(71),i=n(69),o=n(43),a=n(105),s=n(30),u=n(159),l=Object.getOwnPropertyDescriptor;t.f=n(32)?l:function(e,t){if(e=o(e),t=a(t,!0),u)try{return l(e,t)}catch(e){}if(s(e,t))return i(!r.f.call(e,t),e[t])}},function(e,t,n){var r=n(110),i=n(24)("toStringTag"),o="Arguments"==r(function(){return arguments}()),a=function(e,t){try{return e[t]}catch(e){}};e.exports=function(e){var t,n,s;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=a(t=Object(e),i))?n:o?r(t):"Object"==(s=r(t))&&"function"==typeof t.callee?"Arguments":s}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(){}Object.defineProperty(t,"__esModule",{value:!0});var o=n(11),a=r(o),s=n(6),u=r(s),l=n(14),c=r(l),f=n(7),h=r(f),p=n(15),d=r(p),v=n(9),g=r(v),y=n(5),m=n(10),_=r(m),b=n(44),E=r(b),x=n(360),w=n(170),T=r(w),S=n(25),A=r(S),C=n(376),O=r(C),k="A valid API access token is required to use Mapbox data",P=(0,g.default)({},O.default.propTypes,{mapStyle:_.default.oneOfType([_.default.string,_.default.object]),preventStyleDiffing:_.default.bool,visible:_.default.bool}),R=(0,g.default)({},O.default.defaultProps,{mapStyle:"mapbox://styles/mapbox/light-v8",preventStyleDiffing:!1,visible:!0}),I={viewport:_.default.instanceOf(A.default)},N=function(e){function t(e){(0,u.default)(this,t);var n=(0,c.default)(this,(t.__proto__||(0,a.default)(t)).call(this,e));return n._queryParams={},t.supported()||(n.componentDidMount=i,n.componentWillReceiveProps=i,n.componentDidUpdate=i,n.componentWillUnmount=i),n.state={accessTokenInvalid:!1},(0,E.default)(n),n}return(0,d.default)(t,e),(0,h.default)(t,null,[{key:"supported",value:function(){return O.default&&O.default.supported()}}]),(0,h.default)(t,[{key:"getChildContext",value:function(){return{viewport:new A.default(this.props)}}},{key:"componentDidMount",value:function(){var e=this.props.mapStyle;this._mapbox=new O.default((0,g.default)({},this.props,{container:this._mapboxMap,onError:this._mapboxMapError,mapStyle:(0,T.default)(e)?e.toJS():e})),this._map=this._mapbox.getMap(),this._updateQueryParams(e)}},{key:"componentWillReceiveProps",value:function(e){this._mapbox.setProps(e),this._updateMapStyle(this.props,e),this.setState({width:this.props.width,height:this.props.height})}},{key:"componentDidUpdate",value:function(){this._updateMapSize(this.state,this.props)}},{key:"componentWillUnmount",value:function(){this._mapbox.finalize(),this._mapbox=null,this._map=null}},{key:"getMap",value:function(){return this._map}},{key:"queryRenderedFeatures",value:function(e,t){var n=t||this._queryParams;return n.layers&&0===n.layers.length?[]:this._map.queryRenderedFeatures(e,n)}},{key:"_updateQueryParams",value:function(e){var t=(0,x.getInteractiveLayerIds)(e);this._queryParams={layers:t}}},{key:"_updateMapSize",value:function(e,t){(e.width!==t.width||e.height!==t.height)&&this._map.resize()}},{key:"_updateMapStyle",value:function(e,t){var n=t.mapStyle,r=e.mapStyle;n!==r&&((0,T.default)(n)?this.props.preventStyleDiffing?this._map.setStyle(n.toJS()):(0,x.setDiffStyle)(r,n,this._map):this._map.setStyle(n),this._updateQueryParams(n))}},{key:"_mapboxMapLoaded",value:function(e){this._mapboxMap=e}},{key:"_mapboxMapError",value:function(e){401!==(e.error&&e.error.status||e.status)||this.state.accessTokenInvalid||(console.error(k),this.setState({accessTokenInvalid:!0}))}},{key:"_renderNoTokenWarning",value:function(){if(this.state.accessTokenInvalid){var e={position:"absolute",left:0,top:0};return(0,y.createElement)("div",{key:"warning",id:"no-token-warning",style:e},[(0,y.createElement)("h3",{key:"header"},k),(0,y.createElement)("div",{key:"text"},"For information on setting up your basemap, read"),(0,y.createElement)("a",{key:"link",href:"https://uber.github.io/react-map-gl/#/Documentation/getting-started/about-mapbox-tokens"},"Note on Map Tokens")])}return null}},{key:"render",value:function(){var e=this.props,t=e.className,n=e.width,r=e.height,i=e.style,o=e.visible,a=(0,g.default)({},i,{width:n,height:r,position:"relative"}),s=(0,g.default)({},i,{width:n,height:r,visibility:o?"visible":"hidden"}),u={position:"absolute",left:0,top:0,width:n,height:r,overflow:"hidden"};return(0,y.createElement)("div",{key:"map-container",style:a,children:[(0,y.createElement)("div",{key:"map-mapbox",ref:this._mapboxMapLoaded,style:s,className:t}),(0,y.createElement)("div",{key:"map-overlays",className:"overlays",style:u,children:this.props.children}),this._renderNoTokenWarning()]})}}]),t}(y.PureComponent);t.default=N,N.displayName="StaticMap",N.propTypes=P,N.defaultProps=R,N.childContextTypes=I},function(e,t,n){"use strict";function r(e){return Boolean(e&&e[i])}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var i="@@__IMMUTABLE_MAP__@@"},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e){return 2===e.length&&Number.isFinite(e[0])&&Number.isFinite(e[1])}t.b=a;var s=n(117),u=n(16),l=n(172),c=n.n(l),f=n(73),h=n.n(f),p=n(173),d=n.n(p),v=n(174),g=n.n(v),y=n(175),m=n.n(y),_=n(176),b=n.n(_),E=n(177),x=n.n(E),w=n(74),T=n.n(w),S=n(178),A=n.n(S),C=n(179),O=n.n(C),k=n(180),P=n.n(k),R=n(118),I=n.n(R),N=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),M=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;r(this,t);var o=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return Array.isArray(e)&&1===arguments.length?o.copy(e):o.set(e,n),o}return o(t,e),N(t,[{key:"set",value:function(e,t){return c()(this,e,t),this.check(),this}},{key:"add",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var u=a.value;h()(this,this,u)}}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return this}},{key:"subtract",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var u=a.value;d()(this,this,u)}}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return this.check(),this}},{key:"multiply",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var u=a.value;g()(this,this,u)}}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return this.check(),this}},{key:"divide",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var u=a.value;m()(this,this,u)}}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return this.check(),this}},{key:"scale",value:function(e){return Number.isFinite(e)&&b()(this,this,e),this.check(),this}},{key:"scaleAndAdd",value:function(e,t){return x()(this,this,e,t),this.check(),this}},{key:"negate",value:function(){return T()(this,this),this.check(),this}},{key:"normalize",value:function(){return A()(this,this),this.check(),this}},{key:"dot",value:function(e){return O()(this,e)}},{key:"cross",value:function(e){return P()(this,this,e),this.check(),this}},{key:"lerp",value:function(e,t){return I()(this,this,e,t),this.check(),this}},{key:"horizontalAngle",value:function(){return Math.atan2(this.y,this.x)}},{key:"verticalAngle",value:function(){return Math.atan2(this.x,this.y)}},{key:"operation",value:function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return e.apply(void 0,[this,this].concat(n)),this.check(),this}},{key:"ELEMENTS",get:function(){return 2}},{key:"x",get:function(){return this[0]},set:function(e){return this[0]=Object(u.d)(e)}},{key:"y",get:function(){return this[1]},set:function(e){return this[1]=Object(u.d)(e)}}]),t}(s.a);t.a=M},function(e,t){function n(e,t,n){return e[0]=t,e[1]=n,e}e.exports=n},function(e,t){function n(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e}e.exports=n},function(e,t){function n(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e}e.exports=n},function(e,t){function n(e,t,n){return e[0]=t[0]/n[0],e[1]=t[1]/n[1],e}e.exports=n},function(e,t){function n(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e}e.exports=n},function(e,t){function n(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e}e.exports=n},function(e,t){function n(e,t){var n=t[0],r=t[1],i=n*n+r*r;return i>0&&(i=1/Math.sqrt(i),e[0]=t[0]*i,e[1]=t[1]*i),e}e.exports=n},function(e,t){function n(e,t){return e[0]*t[0]+e[1]*t[1]}e.exports=n},function(e,t){function n(e,t,n){var r=t[0]*n[1]-t[1]*n[0];return e[0]=e[1]=0,e[2]=r,e}e.exports=n},function(e,t){function n(e,t,n,r){return e[0]=t,e[1]=n,e[2]=r,e}e.exports=n},function(e,t,n){function r(e,t){var n=i(e[0],e[1],e[2]),r=i(t[0],t[1],t[2]);o(n,n),o(r,r);var s=a(n,r);return s>1?0:Math.acos(s)}e.exports=r;var i=n(365),o=n(119),a=n(120)},function(e,t){function n(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e}e.exports=n},function(e,t){function n(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e}e.exports=n},function(e,t){function n(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e[2]=t[2]*n[2],e}e.exports=n},function(e,t){function n(e,t,n){return e[0]=t[0]/n[0],e[1]=t[1]/n[1],e[2]=t[2]/n[2],e}e.exports=n},function(e,t){function n(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e}e.exports=n},function(e,t){function n(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e}e.exports=n},function(e,t){function n(e,t,n,r){var i=[],o=[];return i[0]=t[0]-n[0],i[1]=t[1]-n[1],i[2]=t[2]-n[2],o[0]=i[0],o[1]=i[1]*Math.cos(r)-i[2]*Math.sin(r),o[2]=i[1]*Math.sin(r)+i[2]*Math.cos(r),e[0]=o[0]+n[0],e[1]=o[1]+n[1],e[2]=o[2]+n[2],e}e.exports=n},function(e,t){function n(e,t,n,r){var i=[],o=[];return i[0]=t[0]-n[0],i[1]=t[1]-n[1],i[2]=t[2]-n[2],o[0]=i[2]*Math.sin(r)+i[0]*Math.cos(r),o[1]=i[1],o[2]=i[2]*Math.cos(r)-i[0]*Math.sin(r),e[0]=o[0]+n[0],e[1]=o[1]+n[1],e[2]=o[2]+n[2],e}e.exports=n},function(e,t){function n(e,t,n,r){var i=[],o=[];return i[0]=t[0]-n[0],i[1]=t[1]-n[1],i[2]=t[2]-n[2],o[0]=i[0]*Math.cos(r)-i[1]*Math.sin(r),o[1]=i[0]*Math.sin(r)+i[1]*Math.cos(r),o[2]=i[2],e[0]=o[0]+n[0],e[1]=o[1]+n[1],e[2]=o[2]+n[2],e}e.exports=n},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e){return 4===e.length&&Number.isFinite(e[0])&&Number.isFinite(e[1])&&Number.isFinite(e[2])&&Number.isFinite(e[3])}t.b=a;var s=n(117),u=n(16),l=n(122),c=n.n(l),f=n(193),h=n.n(f),p=n(123),d=n.n(p),v=n(194),g=n.n(v),y=n(124),m=n.n(y),_=n(195),b=n.n(_),E=n(76),x=n.n(E),w=n(196),T=n.n(w),S=n(197),A=n.n(S),C=n(198),O=n.n(C),k=n(125),P=n.n(k),R=n(126),I=n.n(R),N=n(127),M=n.n(N),L=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),D=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;r(this,t);var s=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return Array.isArray(e)&&1===arguments.length?s.copy(e):s.set(e,n,o,a),s}return o(t,e),L(t,[{key:"set",value:function(e,t,n,r){return c()(this,e,t,n,r),this.check(),this}},{key:"distance",value:function(e){return h()(e)}},{key:"add",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var u=a.value;d()(this,this,u)}}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return this.check(),this}},{key:"subtract",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var u=a.value;g()(this,this,u)}}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return this.check(),this}},{key:"multiply",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var u=a.value;m()(this,this,u)}}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return this.check(),this}},{key:"divide",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var u=a.value;b()(this,this,u)}}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return this.check(),this}},{key:"scale",value:function(e){return x()(this,this,e),this.check(),this}},{key:"scaleAndAdd",value:function(e,t){return T()(this,this,e,t),this.check(),this}},{key:"negate",value:function(){return A()(this,this),this.check(),this}},{key:"inverse",value:function(){return O()(this,this),this.check(),this}},{key:"normalize",value:function(){return P()(this,this),this.check(),this}},{key:"dot",value:function(e){return I()(this,e)}},{key:"lerp",value:function(e,t){return M()(this,this,e,t),this.check(),this}},{key:"ELEMENTS",get:function(){return 4}},{key:"x",get:function(){return this[0]},set:function(e){return this[0]=Object(u.d)(e)}},{key:"y",get:function(){return this[1]},set:function(e){return this[1]=Object(u.d)(e)}},{key:"z",get:function(){return this[2]},set:function(e){return this[2]=Object(u.d)(e)}},{key:"w",get:function(){return this[3]},set:function(e){return this[3]=Object(u.d)(e)}}]),t}(s.a);t.a=D},function(e,t){function n(e,t){var n=t[0]-e[0],r=t[1]-e[1],i=t[2]-e[2],o=t[3]-e[3];return Math.sqrt(n*n+r*r+i*i+o*o)}e.exports=n},function(e,t){function n(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e[3]=t[3]-n[3],e}e.exports=n},function(e,t){function n(e,t,n){return e[0]=t[0]/n[0],e[1]=t[1]/n[1],e[2]=t[2]/n[2],e[3]=t[3]/n[3],e}e.exports=n},function(e,t){function n(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e[3]=t[3]+n[3]*r,e}e.exports=n},function(e,t){function n(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=-t[3],e}e.exports=n},function(e,t){function n(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e[3]=1/t[3],e}e.exports=n},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(72),s=n(16),u=n(171),l=n(75),c=n(192),f=n(0),h=n.n(f),p=n(200),d=n.n(p),v=n(201),g=n.n(v),y=n(202),m=n.n(y),_=n(59),b=n.n(_),E=n(128),x=n.n(E),w=n(46),T=n.n(w),S=n(203),A=n.n(S),C=n(77),O=n.n(C),k=n(47),P=n.n(k),R=n(78),I=n.n(R),N=n(129),M=n.n(N),L=n(48),D=n.n(L),F=n(49),j=n.n(F),B=n(50),U=n.n(B),z=n(204),V=n.n(z),G=n(205),H=n.n(G),q=n(60),W=n.n(q),X=function(){function e(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),$=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),Y=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],Z=[0,0,0,0],K=function(e){function t(){for(var e=arguments.length,n=Array(e),o=0;o<e;o++)n[o]=arguments[o];r(this,t);var a=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return Array.isArray(n[0])&&1===arguments.length?a.copy(n[0]):a.identity(),a}return o(t,e),$(t,[{key:"setRowMajor",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,u=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0,l=arguments.length>9&&void 0!==arguments[9]?arguments[9]:0,c=arguments.length>10&&void 0!==arguments[10]?arguments[10]:1,f=arguments.length>11&&void 0!==arguments[11]?arguments[11]:0,h=arguments.length>12&&void 0!==arguments[12]?arguments[12]:0,p=arguments.length>13&&void 0!==arguments[13]?arguments[13]:0,d=arguments.length>14&&void 0!==arguments[14]?arguments[14]:0,v=arguments.length>15&&void 0!==arguments[15]?arguments[15]:1;return this.set(e,i,u,h,t,o,l,p,n,a,c,d,r,s,f,v)}},{key:"setColumnMajor",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,u=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0,l=arguments.length>9&&void 0!==arguments[9]?arguments[9]:0,c=arguments.length>10&&void 0!==arguments[10]?arguments[10]:1,f=arguments.length>11&&void 0!==arguments[11]?arguments[11]:0,h=arguments.length>12&&void 0!==arguments[12]?arguments[12]:0,p=arguments.length>13&&void 0!==arguments[13]?arguments[13]:0,d=arguments.length>14&&void 0!==arguments[14]?arguments[14]:0,v=arguments.length>15&&void 0!==arguments[15]?arguments[15]:1;return this.set(e,t,n,r,i,o,a,s,u,l,c,f,h,p,d,v)}},{key:"set",value:function(e,t,n,r,i,o,a,s,u,l,c,f,h,p,d,v){return this[0]=e,this[1]=t,this[2]=n,this[3]=r,this[4]=i,this[5]=o,this[6]=a,this[7]=s,this[8]=u,this[9]=l,this[10]=c,this[11]=f,this[12]=h,this[13]=p,this[14]=d,this[15]=v,this.check(),this}},{key:"determinant",value:function(){return d()(this)}},{key:"identity",value:function(){for(var e=0;e<Y.length;++e)this[e]=Y[e];return this.check(),this}},{key:"fromQuaternion",value:function(e){return g()(this,e),this.check(),this}},{key:"frustum",value:function(e){var t=e.left,n=e.right,r=e.bottom,i=e.top,o=e.near,a=e.far;return m()(this,t,n,r,i,o,a),this.check(),this}},{key:"lookAt",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.eye,n=e.center,r=void 0===n?[0,0,0]:n,i=e.up,o=void 0===i?[0,1,0]:i;return b()(this,t,r,o),this.check(),this}},{key:"ortho",value:function(e){var t=e.left,n=e.right,r=e.bottom,i=e.top,o=e.near,a=void 0===o?.1:o,s=e.far,u=void 0===s?500:s;return x()(this,t,n,r,i,a,u),this.check(),this}},{key:"perspective",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.fov,n=void 0===t?45*Math.PI/180:t,r=e.aspect,i=void 0===r?1:r,o=e.near,a=void 0===o?.1:o,s=e.far,u=void 0===s?500:s;if(n>2*Math.PI)throw Error("radians");return T()(this,n,i,a,u),this.check(),this}},{key:"transpose",value:function(){return A()(this,this),this.check(),this}},{key:"invert",value:function(){return O()(this,this),this.check(),this}},{key:"multiplyLeft",value:function(e){return P()(this,e,this),this.check(),this}},{key:"multiplyRight",value:function(e){return P()(this,this,e),this.check(),this}},{key:"rotateX",value:function(e){return I()(this,this,e),this.check(),this}},{key:"rotateY",value:function(e){return M()(this,this,e),this.check(),this}},{key:"rotateZ",value:function(e){return D()(this,this,e),this.check(),this}},{key:"rotateXYZ",value:function(e){var t=X(e,3),n=t[0],r=t[1],i=t[2];return this.rotateX(n).rotateY(r).rotateZ(i)}},{key:"rotateAxis",value:function(e,t){return D()(this,this,e,t),this.check(),this}},{key:"scale",value:function(e){return j()(this,this,e),this.check(),this}},{key:"translate",value:function(e){return U()(this,this,e),this.check(),this}},{key:"transformVector2",value:function(e,t){return t=t||new u.a,V()(t,e,this),h()(Object(u.b)(t)),t}},{key:"transformVector3",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new l.a;return t=t||new l.a,H()(t,e,this),h()(Object(l.b)(t)),t}},{key:"transformVector4",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new c.a;return t=t||new c.a,W()(t,e,this),h()(Object(c.b)(t)),t}},{key:"transformVector",value:function(e,t){switch(e.length){case 2:return this.transformVector2(e,t);case 3:return this.transformVector3(e,t);case 4:return this.transformVector4(e,t);default:throw new Error("Illegal vector")}}},{key:"transformDirection",value:function(e,t){switch(e.length){case 2:W()(Z,[e[0],e[1],0,0],this),t=t||new u.a,t[0]=Z[0],t[1]=Z[1];break;case 3:W()(Z,[e[0],e[1],e[2],0],this),t=t||new l.a,t[0]=Z[0],t[1]=Z[1],t[2]=Z[2];break;case 4:h()(0===e[3]),t=t||new c.a,W()(t,e,this);break;default:throw new Error("Illegal vector")}return t}},{key:"transformPoint",value:function(e,t){switch(e.length){case 2:t=t||new u.a,W()(t,[e[0],e[1],0,1],this),t.length=2,h()(Object(u.b)(t));break;case 3:t=t||new l.a,W()(t,[e[0],e[1],e[2],1],this),t.length=3,h()(Object(l.b)(t));break;case 4:h()(0!==e[3]),t=t||new c.a,W()(t,e,this),h()(Object(c.b)(t));break;default:throw new Error("Illegal vector")}return t}},{key:"ELEMENTS",get:function(){return 16}},{key:"m00",get:function(){return this[0]},set:function(e){return this[0]=Object(s.d)(e)}},{key:"m01",get:function(){return this[4]},set:function(e){return this[4]=Object(s.d)(e)}},{key:"m02",get:function(){return this[8]},set:function(e){return this[8]=Object(s.d)(e)}},{key:"m03",get:function(){return this[12]},set:function(e){return this[12]=Object(s.d)(e)}},{key:"m10",get:function(){return this[1]},set:function(e){return this[1]=Object(s.d)(e)}},{key:"m11",get:function(){return this[5]},set:function(e){return this[5]=Object(s.d)(e)}},{key:"m12",get:function(){return this[9]},set:function(e){return this[9]=Object(s.d)(e)}},{key:"m13",get:function(){return this[13]},set:function(e){return this[13]=Object(s.d)(e)}},{key:"m20",get:function(){return this[2]},set:function(e){return this[2]=Object(s.d)(e)}},{key:"m21",get:function(){return this[6]},set:function(e){return this[6]=Object(s.d)(e)}},{key:"m22",get:function(){return this[10]},set:function(e){return this[10]=Object(s.d)(e)}},{key:"m23",get:function(){return this[14]},set:function(e){return this[14]=Object(s.d)(e)}},{key:"m30",get:function(){return this[3]},set:function(e){return this[3]=Object(s.d)(e)}},{key:"m31",get:function(){return this[7]},set:function(e){return this[7]=Object(s.d)(e)}},{key:"m32",get:function(){return this[11]},set:function(e){return this[11]=Object(s.d)(e)}},{key:"m33",get:function(){return this[15]},set:function(e){return this[15]=Object(s.d)(e)}}]),t}(a.a);t.a=K},function(e,t){function n(e){var t=e[0],n=e[1],r=e[2],i=e[3],o=e[4],a=e[5],s=e[6],u=e[7],l=e[8],c=e[9],f=e[10],h=e[11],p=e[12],d=e[13],v=e[14],g=e[15];return(t*a-n*o)*(f*g-h*v)-(t*s-r*o)*(c*g-h*d)+(t*u-i*o)*(c*v-f*d)+(n*s-r*a)*(l*g-h*p)-(n*u-i*a)*(l*v-f*p)+(r*u-i*s)*(l*d-c*p)}e.exports=n},function(e,t){function n(e,t){var n=t[0],r=t[1],i=t[2],o=t[3],a=n+n,s=r+r,u=i+i,l=n*a,c=r*a,f=r*s,h=i*a,p=i*s,d=i*u,v=o*a,g=o*s,y=o*u;return e[0]=1-f-d,e[1]=c+y,e[2]=h-g,e[3]=0,e[4]=c-y,e[5]=1-l-d,e[6]=p+v,e[7]=0,e[8]=h+g,e[9]=p-v,e[10]=1-l-f,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}e.exports=n},function(e,t){function n(e,t,n,r,i,o,a){var s=1/(n-t),u=1/(i-r),l=1/(o-a);return e[0]=2*o*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=2*o*u,e[6]=0,e[7]=0,e[8]=(n+t)*s,e[9]=(i+r)*u,e[10]=(a+o)*l,e[11]=-1,e[12]=0,e[13]=0,e[14]=a*o*2*l,e[15]=0,e}e.exports=n},function(e,t){function n(e,t){if(e===t){var n=t[1],r=t[2],i=t[3],o=t[6],a=t[7],s=t[11];e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=n,e[6]=t[9],e[7]=t[13],e[8]=r,e[9]=o,e[11]=t[14],e[12]=i,e[13]=a,e[14]=s}else e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15];return e}e.exports=n},function(e,t){function n(e,t,n){var r=t[0],i=t[1];return e[0]=n[0]*r+n[4]*i+n[12],e[1]=n[1]*r+n[5]*i+n[13],e}e.exports=n},function(e,t){function n(e,t,n){var r=t[0],i=t[1],o=t[2],a=n[3]*r+n[7]*i+n[11]*o+n[15];return a=a||1,e[0]=(n[0]*r+n[4]*i+n[8]*o+n[12])/a,e[1]=(n[1]*r+n[5]*i+n[9]*o+n[13])/a,e[2]=(n[2]*r+n[6]*i+n[10]*o+n[14])/a,e}e.exports=n},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(72),s=n(16),u=n(207),l=n.n(u),c=n(208),f=n.n(c),h=n(209),p=n.n(h),d=n(210),v=n.n(d),g=n(211),y=n.n(g),m=n(212),_=n.n(m),b=n(213),E=n.n(b),x=n(214),w=n.n(x),T=n(215),S=n.n(T),A=n(216),C=n.n(A),O=n(217),k=n.n(O),P=n(218),R=n.n(P),I=n(130),N=n.n(I),M=n(219),L=n.n(M),D=n(220),F=n.n(D),j=n(221),B=n.n(j),U=n(222),z=n.n(U),V=n(223),G=n.n(V),H=n(131),q=n.n(H),W=n(224),X=n.n(W),$=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),Y=[0,0,0,1],Z=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;r(this,t);var s=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return Array.isArray(e)&&1===arguments.length?s.copy(e):s.set(e,n,o,a),s}return o(t,e),$(t,[{key:"fromMatrix3",value:function(e){return l()(this,e),this.check(),this}},{key:"fromValues",value:function(e,t,n,r){return this.set(e,t,n,r)}},{key:"identity",value:function(){return f()(this),this.check(),this}},{key:"length",value:function(){return p()(this)}},{key:"squaredLength",value:function(e){return v()(this)}},{key:"dot",value:function(e,t){if(void 0!==t)throw new Error("Quaternion.dot only takes one argument");return y()(this,e)}},{key:"rotationTo",value:function(e,t){return _()(this,e,t),this.check(),this}},{key:"add",value:function(e,t){if(void 0!==t)throw new Error("Quaternion.add only takes one argument");return E()(this,e),this.check(),this}},{key:"calculateW",value:function(){return w()(this,this),this.check(),this}},{key:"conjugate",value:function(){return S()(this,this),this.check(),this}},{key:"invert",value:function(){return C()(this,this),this.check(),this}},{key:"lerp",value:function(e,t,n){return k()(this,e,t,n),this.check(),this}},{key:"multiply",value:function(e,t){if(void 0!==t)throw new Error("Quaternion.multiply only takes one argument");return R()(this,this,t),this.check(),this}},{key:"normalize",value:function(){return N()(this,this),this.check(),this}},{key:"rotateX",value:function(e){return L()(this,this,e),this.check(),this}},{key:"rotateY",value:function(e){return F()(this,this,e),this.check(),this}},{key:"rotateZ",value:function(e){return B()(this,this,e),this.check(),this}},{key:"scale",value:function(e){return z()(this,this,e),this.check(),this}},{key:"set",value:function(e,t,n,r){return G()(this,e,t,n,r),this.check(),this}},{key:"setAxisAngle",value:function(e,t){return q()(this,e,t),this.check(),this}},{key:"slerp",value:function(e){var t=e.start,n=void 0===t?Y:t,r=e.target,i=e.ratio;return X()(this,n,r,i),this.check(),this}},{key:"ELEMENTS",get:function(){return 4}},{key:"x",get:function(){return this[0]},set:function(e){return this[0]=Object(s.d)(e)}},{key:"y",get:function(){return this[1]},set:function(e){return this[1]=Object(s.d)(e)}},{key:"z",get:function(){return this[2]},set:function(e){return this[2]=Object(s.d)(e)}},{key:"w",get:function(){return this[3]},set:function(e){return this[3]=Object(s.d)(e)}}]),t}(a.a);t.a=Z},function(e,t){function n(e,t){var n,r=t[0]+t[4]+t[8];if(r>0)n=Math.sqrt(r+1),e[3]=.5*n,n=.5/n,e[0]=(t[5]-t[7])*n,e[1]=(t[6]-t[2])*n,e[2]=(t[1]-t[3])*n;else{var i=0;t[4]>t[0]&&(i=1),t[8]>t[3*i+i]&&(i=2);var o=(i+1)%3,a=(i+2)%3;n=Math.sqrt(t[3*i+i]-t[3*o+o]-t[3*a+a]+1),e[i]=.5*n,n=.5/n,e[3]=(t[3*o+a]-t[3*a+o])*n,e[o]=(t[3*o+i]+t[3*i+o])*n,e[a]=(t[3*a+i]+t[3*i+a])*n}return e}e.exports=n},function(e,t){function n(e){return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e}e.exports=n},function(e,t,n){e.exports=n(370)},function(e,t,n){e.exports=n(371)},function(e,t,n){e.exports=n(126)},function(e,t,n){function r(e,t,n){var r=i(t,n);return r<-.999999?(o(c,f,t),a(c)<1e-6&&o(c,h,t),s(c,c),l(e,c,Math.PI),e):r>.999999?(e[0]=0,e[1]=0,e[2]=0,e[3]=1,e):(o(c,t,n),e[0]=c[0],e[1]=c[1],e[2]=c[2],e[3]=1+r,u(e,e))}var i=n(120),o=n(121),a=n(79),s=n(119),u=n(130),l=n(131);e.exports=r;var c=[0,0,0],f=[1,0,0],h=[0,1,0]},function(e,t,n){e.exports=n(123)},function(e,t){function n(e,t){var n=t[0],r=t[1],i=t[2];return e[0]=n,e[1]=r,e[2]=i,e[3]=Math.sqrt(Math.abs(1-n*n-r*r-i*i)),e}e.exports=n},function(e,t){function n(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=t[3],e}e.exports=n},function(e,t){function n(e,t){var n=t[0],r=t[1],i=t[2],o=t[3],a=n*n+r*r+i*i+o*o,s=a?1/a:0;return e[0]=-n*s,e[1]=-r*s,e[2]=-i*s,e[3]=o*s,e}e.exports=n},function(e,t,n){e.exports=n(127)},function(e,t){function n(e,t,n){var r=t[0],i=t[1],o=t[2],a=t[3],s=n[0],u=n[1],l=n[2],c=n[3];return e[0]=r*c+a*s+i*l-o*u,e[1]=i*c+a*u+o*s-r*l,e[2]=o*c+a*l+r*u-i*s,e[3]=a*c-r*s-i*u-o*l,e}e.exports=n},function(e,t){function n(e,t,n){n*=.5;var r=t[0],i=t[1],o=t[2],a=t[3],s=Math.sin(n),u=Math.cos(n);return e[0]=r*u+a*s,e[1]=i*u+o*s,e[2]=o*u-i*s,e[3]=a*u-r*s,e}e.exports=n},function(e,t){function n(e,t,n){n*=.5;var r=t[0],i=t[1],o=t[2],a=t[3],s=Math.sin(n),u=Math.cos(n);return e[0]=r*u-o*s,e[1]=i*u+a*s,e[2]=o*u+r*s,e[3]=a*u-i*s,e}e.exports=n},function(e,t){function n(e,t,n){n*=.5;var r=t[0],i=t[1],o=t[2],a=t[3],s=Math.sin(n),u=Math.cos(n);return e[0]=r*u+i*s,e[1]=i*u-r*s,e[2]=o*u+a*s,e[3]=a*u-o*s,e}e.exports=n},function(e,t,n){e.exports=n(76)},function(e,t,n){e.exports=n(122)},function(e,t){function n(e,t,n,r){var i,o,a,s,u,l=t[0],c=t[1],f=t[2],h=t[3],p=n[0],d=n[1],v=n[2],g=n[3];return o=l*p+c*d+f*v+h*g,o<0&&(o=-o,p=-p,d=-d,v=-v,g=-g),1-o>1e-6?(i=Math.acos(o),a=Math.sin(i),s=Math.sin((1-r)*i)/a,u=Math.sin(r*i)/a):(s=1-r,u=r),e[0]=s*l+u*p,e[1]=s*c+u*d,e[2]=s*f+u*v,e[3]=s*h+u*g,e}e.exports=n},function(e,t,n){"use strict";function r(e){var t=e.width,n=e.height,r=e.bounds,a=e.padding,s=void 0===a?0:a,u=e.offset,l=void 0===u?[0,0]:u,c=o(r,2),f=o(c[0],2),h=f[0],p=f[1],d=o(c[1],2),v=d[0],g=d[1],y=new i.a({width:t,height:n,longitude:0,latitude:0,zoom:0}),m=y.project([h,g]),_=y.project([v,p]),b=[Math.abs(_[0]-m[0]),Math.abs(_[1]-m[1])],E=[(_[0]+m[0])/2,(_[1]+m[1])/2],x=(t-2*s-2*Math.abs(l[0]))/b[0],w=(n-2*s-2*Math.abs(l[1]))/b[1],T=y.unproject(E),S=y.zoom+Math.log2(Math.abs(Math.min(x,w)));return{longitude:T[0],latitude:T[1],zoom:S}}t.a=r;var i=n(58),o=function(){function e(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}()},function(e,t,n){"use strict";function r(e,t){var n=e%t;return n<0?t+n:n}function i(e,t,n){return Array.isArray(e)?e.map(function(e,r){return i(e,t[r],n)}):n*t+(1-n)*e}function o(e){return(0,l.default)(e)||Array.isArray(e)}function a(e){return c[e]}function s(e,t,n){return a(e)&&Math.abs(n-t)>180&&(n=n<0?n+360:n-360),n}Object.defineProperty(t,"__esModule",{value:!0});var u=n(132),l=function(e){return e&&e.__esModule?e:{default:e}}(u);t.mod=r,t.lerp=i,t.isValid=o,t.getEndValueByShortestPath=s;var c={longitude:1,bearing:1}},function(e,t,n){"use strict";function r(e){var t={},n=function(){return t};return t.get=function(){return null},t.set=n,t.on=n,t.off=n,t.destroy=n,t.emit=n,t}Object.defineProperty(t,"__esModule",{value:!0}),t.Manager=void 0;var i=n(228),o=n(389),a=void 0;i.isBrowser&&(a=n(390)),a&&((0,o.enhancePointerEventInput)(a.PointerEventInput),(0,o.enhanceMouseInput)(a.MouseInput));t.Manager=a?a.Manager:r;t.default=a},function(e,t,n){"use strict";(function(t,r){var i=n(70),o=function(e){return e&&e.__esModule?e:{default:e}}(i),a="object"!==("undefined"===typeof t?"undefined":(0,o.default)(t))||"[object process]"!==String(t)||t.browser,s="undefined"!==typeof navigator?navigator.userAgent.toLowerCase():"";e.exports={window:"undefined"!==typeof window?window:r,global:"undefined"!==typeof r?r:window,document:"undefined"!==typeof document?document:{},isBrowser:a,userAgent:s}}).call(t,n(45),n(18))},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(82),o=r(i),a=n(57),s=r(a),u=n(9),l=r(u),c=n(6),f=r(c),h=n(7),p=r(h),d=n(81),v=r(d),g=n(133),y=n(83),m={transitionDuration:0},_={transitionDuration:300,transitionEasing:function(e){return e},transitionInterpolator:new g.LinearInterpolator,transitionInterruption:y.TRANSITION_EVENTS.BREAK},b={WHEEL:["wheel"],PAN:["panstart","panmove","panend"],PINCH:["pinchstart","pinchmove","pinchend"],DOUBLE_TAP:["doubletap"],KEYBOARD:["keydown"]},E=function(){function e(){(0,f.default)(this,e),this._state={isDragging:!1},this.events=[],this.handleEvent=this.handleEvent.bind(this)}return(0,p.default)(e,[{key:"handleEvent",value:function(e){switch(this.mapState=this.getMapState(),e.type){case"panstart":return this._onPanStart(e);case"panmove":return this._onPan(e);case"panend":return this._onPanEnd(e);case"pinchstart":return this._onPinchStart(e);case"pinchmove":return this._onPinch(e);case"pinchend":return this._onPinchEnd(e);case"doubletap":return this._onDoubleTap(e);case"wheel":return this._onWheel(e);case"keydown":return this._onKeyDown(e);default:return!1}}},{key:"getCenter",value:function(e){var t=e.offsetCenter;return[t.x,t.y]}},{key:"isFunctionKeyPressed",value:function(e){var t=e.srcEvent;return Boolean(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}},{key:"setState",value:function(e){(0,l.default)(this._state,e),this.onStateChange&&this.onStateChange(this._state)}},{key:"updateViewport",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=this.mapState.getViewportProps(),i=(0,l.default)({},e.getViewportProps(),t);this.onViewportChange&&(0,s.default)(i).some(function(e){return r[e]!==i[e]})&&this.onViewportChange(i),this.setState((0,l.default)({},e.getInteractiveState(),n))}},{key:"getMapState",value:function(e){return new v.default((0,l.default)({},this.mapStateProps,this._state,e))}},{key:"setOptions",value:function(e){var t=e.onChangeViewport,n=e.touchZoomRotate,r=void 0===n||n,i=e.onViewportChange,o=e.onStateChange,a=void 0===o?this.onStateChange:o,s=e.eventManager,u=void 0===s?this.eventManager:s,l=e.scrollZoom,c=void 0===l||l,f=e.dragPan,h=void 0===f||f,p=e.dragRotate,d=void 0===p||p,v=e.doubleClickZoom,g=void 0===v||v,y=e.touchZoom,m=void 0===y||y,_=e.touchRotate,E=void 0!==_&&_,x=e.keyboard,w=void 0===x||x;this.onViewportChange=i||t,this.onStateChange=a,this.mapStateProps=e,this.eventManager!==u&&(this.eventManager=u,this._events={},this.toggleEvents(this.events,!0));var T=Boolean(this.onViewportChange);this.toggleEvents(b.WHEEL,T&&c),this.toggleEvents(b.PAN,T&&(h||d)),this.toggleEvents(b.PINCH,T&&r),this.toggleEvents(b.DOUBLE_TAP,T&&g),this.toggleEvents(b.KEYBOARD,T&&w),this.scrollZoom=c,this.dragPan=h,this.dragRotate=d,this.doubleClickZoom=g,this.touchZoom=r&&m,this.touchRotate=r&&E,this.keyboard=w}},{key:"toggleEvents",value:function(e,t){var n=this;this.eventManager&&e.forEach(function(e){n._events[e]!==t&&(n._events[e]=t,t?n.eventManager.on(e,n.handleEvent):n.eventManager.off(e,n.handleEvent))})}},{key:"_onPanStart",value:function(e){var t=this.getCenter(e),n=this.mapState.panStart({pos:t}).rotateStart({pos:t});return this.updateViewport(n,m,{isDragging:!0})}},{key:"_onPan",value:function(e){return this.isFunctionKeyPressed(e)||e.rightButton?this._onPanRotate(e):this._onPanMove(e)}},{key:"_onPanEnd",value:function(e){var t=this.mapState.panEnd().rotateEnd();return this.updateViewport(t,null,{isDragging:!1})}},{key:"_onPanMove",value:function(e){if(!this.dragPan)return!1;var t=this.getCenter(e),n=this.mapState.pan({pos:t});return this.updateViewport(n,m,{isDragging:!0})}},{key:"_onPanRotate",value:function(e){if(!this.dragRotate)return!1;var t=e.deltaX,n=e.deltaY,r=this.getCenter(e),i=(0,o.default)(r,2),a=i[1],s=a-n,u=this.mapState.getViewportProps(),l=u.width,c=u.height,f=t/l,h=0;n>0?Math.abs(c-s)>5&&(h=n/(s-c)*1.2):n<0&&s>5&&(h=1-a/s),h=Math.min(1,Math.max(-1,h));var p=this.mapState.rotate({deltaScaleX:f,deltaScaleY:h});return this.updateViewport(p,m,{isDragging:!0})}},{key:"_onWheel",value:function(e){if(!this.scrollZoom)return!1;var t=this.getCenter(e),n=e.delta,r=2/(1+Math.exp(-Math.abs(.01*n)));n<0&&0!==r&&(r=1/r);var i=this.mapState.zoom({pos:t,scale:r});return this.updateViewport(i,m)}},{key:"_onPinchStart",value:function(e){var t=this.getCenter(e),n=this.mapState.zoomStart({pos:t}).rotateStart({pos:t});return this._state.startPinchRotation=e.rotation,this.updateViewport(n,m,{isDragging:!0})}},{key:"_onPinch",value:function(e){if(!this.touchZoom&&!this.touchRotate)return!1;var t=this.mapState;if(this.touchZoom){var n=e.scale,r=this.getCenter(e);t=t.zoom({pos:r,scale:n})}if(this.touchRotate){var i=e.rotation,o=this._state.startPinchRotation;t=t.rotate({deltaScaleX:-(i-o)/180})}return this.updateViewport(t,m,{isDragging:!0})}},{key:"_onPinchEnd",value:function(e){var t=this.mapState.zoomEnd().rotateEnd();return this._state.startPinchRotation=0,this.updateViewport(t,null,{isDragging:!1})}},{key:"_onDoubleTap",value:function(e){if(!this.doubleClickZoom)return!1;var t=this.getCenter(e),n=this.isFunctionKeyPressed(e),r=this.mapState.zoom({pos:t,scale:n?.5:2});return this.updateViewport(r,_)}},{key:"_onKeyDown",value:function(e){if(!this.keyboard)return!1;var t=this.isFunctionKeyPressed(e),n=this.mapStateProps,r=void 0;switch(e.srcEvent.keyCode){case 189:r=t?this.getMapState({zoom:n.zoom-2}):this.getMapState({zoom:n.zoom-1});break;case 187:r=t?this.getMapState({zoom:n.zoom+2}):this.getMapState({zoom:n.zoom+1});break;case 37:r=t?this.getMapState({bearing:n.bearing-15}):this.mapState.pan({pos:[100,0],startPos:[0,0]});break;case 39:r=t?this.getMapState({bearing:n.bearing+15}):this.mapState.pan({pos:[-100,0],startPos:[0,0]});break;case 38:r=t?this.getMapState({pitch:n.pitch+10}):this.mapState.pan({pos:[0,100],startPos:[0,0]});break;case 40:r=t?this.getMapState({pitch:n.pitch-10}):this.mapState.pan({pos:[0,-100],startPos:[0,0]});break;default:return!1}return this.updateViewport(r,_)}}]),e}();t.default=E},function(e,t){e.exports=function(){throw new Error("define cannot be used indirect")}},function(e,t,n){"use strict";function r(e){return"react-map-gl: `"+e+"` is deprecated and will be removed in a later version."}function i(e){return"Use `"+e+"` instead."}function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a.forEach(function(t){if(e.hasOwnProperty(t.old)){var n=r(t.old);t.new&&(n=n+" "+i(t.new)),console.warn(n)}})}Object.defineProperty(t,"__esModule",{value:!0}),t.default=o;var a=[{old:"onChangeViewport",new:"onViewportChange"},{old:"perspectiveEnabled",new:"dragRotate"},{old:"onHoverFeatures",new:"onHover"},{old:"onClickFeatures",new:"onClick"},{old:"touchZoomRotate",new:"touchZoom, touchRotate"}]},function(e,t,n){"use strict";function r(){Object(i.o)([i.k,i.l,o.a,a.a,s.a,i.n]),Object(i.p)([o.a])}Object.defineProperty(t,"__esModule",{value:!0}),t.initializeShaderModules=r;var i=n(4),o=n(94),a=n(264),s=n(265);n.d(t,"fp32",function(){return i.k}),n.d(t,"fp64",function(){return i.l}),n.d(t,"picking",function(){return i.n}),n.d(t,"project",function(){return o.a}),n.d(t,"project64",function(){return a.a}),n.d(t,"lighting",function(){return s.a}),r()},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return o});var r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i="object"===("undefined"===typeof e?"undefined":r(e))&&"[object process]"===String(e)&&!e.browser,o=!i}).call(t,n(45))},function(e,t,n){"use strict";(function(e){n.d(t,"b",function(){return r}),n.d(t,"a",function(){return i});var r="undefined"!==typeof window?window:e,i="undefined"!==typeof e?e:window;"undefined"!==typeof document&&document}).call(t,n(18))},function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e){return e&&32874===e.TEXTURE_BINDING_3D}function o(e,t){return{webgl2:i(e),ext:e.getExtension(t)}}function a(e){e.luma.extensions={};var t=e.getSupportedExtensions(),n=!0,r=!1,i=void 0;try{for(var o,a=t[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value;e.luma[s]=e.getExtension(s)}}catch(e){r=!0,i=e}finally{try{!n&&a.return&&a.return()}finally{if(r)throw i}}}function s(e,t){var n=t.extension,r=t.target,i=t.target2,o=d[n];h()(o);var a=o.meta,s=void 0===a?{}:a,u=s.suffix,l=void 0===u?"":u,c=e.getExtension(n);Object.keys(o).forEach(function(t){var n=""+t+l,a=null;"meta"===t||"function"===typeof e[t]||(c&&"function"===typeof c[n]?a=function(){return c[n].apply(c,arguments)}:"function"===typeof o[t]&&(a=o[t].bind(r))),a&&(r[t]=a,i[t]=a)})}function u(e,t){var n=t.target,r=t.target2,i=d.OVERRIDES;Object.keys(i).forEach(function(t){if("function"===typeof i[t]){var o=e[t]?e[t].bind(e):function(){},a=i[t].bind(null,e,o);n[t]=a,r[t]=a}})}function l(e){if(e.luma=e.luma||{},a(e),!e.luma.polyfilled){for(var t in d)"overrides"!==t&&s(e,{extension:t,target:e.luma,target2:e});u(e,{target:e.luma,target2:e}),e.luma.polyfilled=!0}return e}t.a=l;var c,f=n(0),h=n.n(f),p=n(414),d=(c={},r(c,"OES_vertex_array_object",{meta:{suffix:"OES"},createVertexArray:function(){h()(!1,"VertexArray requires WebGL2 or OES_vertex_array_object extension")},deleteVertexArray:function(){},bindVertexArray:function(){},isVertexArray:function(){return!1}}),r(c,"ANGLE_instanced_arrays",{meta:{suffix:"ANGLE"},vertexAttribDivisor:function(e,t){h()(0===t,"WebGL instanced rendering not supported")},drawElementsInstanced:function(){},drawArraysInstanced:function(){}}),r(c,"WEBGL_draw_buffers",{meta:{suffix:"WEBGL"},drawBuffers:function(){h()(!1)}}),r(c,"EXT_disjoint_timer_query",{meta:{suffix:"EXT"},createQuery:function(){h()(!1)},deleteQuery:function(){h()(!1)},beginQuery:function(){h()(!1)},endQuery:function(){},getQuery:function(e,t){return this.getQueryObject(e,t)},getQueryParameter:function(e,t){return this.getQueryObject(e,t)},queryCounter:function(){},getQueryObject:function(){}}),r(c,"EXT_disjoint_timer_query_webgl2",{meta:{suffix:"EXT"},queryCounter:null}),r(c,"OVERRIDES",{readBuffer:function(e,t,n){i(e)&&t(n)},getVertexAttrib:function(e,t,n,r){var i=o(e,"ANGLE_instanced_arrays"),a=i.webgl2,s=i.ext,u=void 0;switch(r){case 35069:u=!!a&&void 0;break;case 35070:u=a||s?void 0:0}return void 0!==u?u:t(n,r)},getProgramParameter:function(e,t,n,r){if(!i(e))switch(r){case 35967:return 35981;case 35971:case 35382:return 0}return t(n,r)},getInternalformatParameter:function(e,t,n,r,o){if(!i(e))switch(o){case 32937:return new Int32Array([0])}return e.getInternalformatParameter(n,r,o)},getTexParameter:function(e,t,n,r){switch(r){case 34046:var i=e.luma.extensions,o=i.EXT_texture_filter_anisotropic;r=o&&o.TEXTURE_MAX_ANISOTROPY_EXT||34046}return t(n,r)},getParameter:p.a,hint:function(e,t,n,r){return t(n,r)}}),c)},function(e,t,n){"use strict";function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n={};for(var r in t){var i=E[r];i&&("string"===typeof i?n[i]=!0:i(e,t[r],Number(r)))}var o=e.state&&e.state.cache;if(o){var a=Object.assign({},o,t);for(var s in n){(0,x[s])(e,a)}}}function a(e,t){var n=T[t];return n?n(e,Number(t)):e.getParameter(Number(t))}function s(e,t){t=t||v;var n=Array.isArray(t)?t:Object.keys(t),r={},i=!0,o=!1,s=void 0;try{for(var u,l=n[Symbol.iterator]();!(i=(u=l.next()).done);i=!0){var c=u.value;r[c]=a(e,c)}}catch(e){o=!0,s=e}finally{try{!i&&l.return&&l.return()}finally{if(o)throw s}}return r}function u(e){return Object.assign({},v,{})}function l(e){o(e,u(e))}n.d(t,"a",function(){return v}),t.d=o,t.b=s,t.c=l;var c,f,h,p=n(27),d=n(0),v=(n.n(d),c={},i(c,p.a.BLEND,!1),i(c,p.a.BLEND_COLOR,new Float32Array([0,0,0,0])),i(c,p.a.BLEND_EQUATION_RGB,p.a.FUNC_ADD),i(c,p.a.BLEND_EQUATION_ALPHA,p.a.FUNC_ADD),i(c,p.a.BLEND_SRC_RGB,p.a.ONE),i(c,p.a.BLEND_DST_RGB,p.a.ZERO),i(c,p.a.BLEND_SRC_ALPHA,p.a.ONE),i(c,p.a.BLEND_DST_ALPHA,p.a.ZERO),i(c,p.a.COLOR_CLEAR_VALUE,new Float32Array([0,0,0,0])),i(c,p.a.COLOR_WRITEMASK,[!0,!0,!0,!0]),i(c,p.a.CULL_FACE,!1),i(c,p.a.CULL_FACE_MODE,p.a.BACK),i(c,p.a.DEPTH_TEST,!1),i(c,p.a.DEPTH_CLEAR_VALUE,1),i(c,p.a.DEPTH_FUNC,p.a.LESS),i(c,p.a.DEPTH_RANGE,new Float32Array([0,1])),i(c,p.a.DEPTH_WRITEMASK,!0),i(c,p.a.DITHER,!0),i(c,p.a.FRAMEBUFFER_BINDING,null),i(c,p.a.FRONT_FACE,p.a.CCW),i(c,p.a.GENERATE_MIPMAP_HINT,p.a.DONT_CARE),i(c,p.a.LINE_WIDTH,1),i(c,p.a.POLYGON_OFFSET_FILL,!1),i(c,p.a.POLYGON_OFFSET_FACTOR,0),i(c,p.a.POLYGON_OFFSET_UNITS,0),i(c,p.a.SAMPLE_COVERAGE_VALUE,1),i(c,p.a.SAMPLE_COVERAGE_INVERT,!1),i(c,p.a.SCISSOR_TEST,!1),i(c,p.a.SCISSOR_BOX,new Int32Array([0,0,1024,1024])),i(c,p.a.STENCIL_TEST,!1),i(c,p.a.STENCIL_CLEAR_VALUE,0),i(c,p.a.STENCIL_WRITEMASK,4294967295),i(c,p.a.STENCIL_BACK_WRITEMASK,4294967295),i(c,p.a.STENCIL_FUNC,p.a.ALWAYS),i(c,p.a.STENCIL_REF,0),i(c,p.a.STENCIL_VALUE_MASK,4294967295),i(c,p.a.STENCIL_BACK_FUNC,p.a.ALWAYS),i(c,p.a.STENCIL_BACK_REF,0),i(c,p.a.STENCIL_BACK_VALUE_MASK,4294967295),i(c,p.a.STENCIL_FAIL,p.a.KEEP),i(c,p.a.STENCIL_PASS_DEPTH_FAIL,p.a.KEEP),i(c,p.a.STENCIL_PASS_DEPTH_PASS,p.a.KEEP),i(c,p.a.STENCIL_BACK_FAIL,p.a.KEEP),i(c,p.a.STENCIL_BACK_PASS_DEPTH_FAIL,p.a.KEEP),i(c,p.a.STENCIL_BACK_PASS_DEPTH_PASS,p.a.KEEP),i(c,p.a.VIEWPORT,new Int32Array([0,0,1024,1024])),i(c,p.a.PACK_ALIGNMENT,4),i(c,p.a.UNPACK_ALIGNMENT,4),i(c,p.a.UNPACK_FLIP_Y_WEBGL,!1),i(c,p.a.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),i(c,p.a.UNPACK_COLORSPACE_CONVERSION_WEBGL,p.a.BROWSER_DEFAULT_WEBGL),i(c,p.a.FRAGMENT_SHADER_DERIVATIVE_HINT,p.a.DONT_CARE),i(c,p.a.READ_FRAMEBUFFER_BINDING,null),i(c,p.a.RASTERIZER_DISCARD,!1),i(c,p.a.PACK_ROW_LENGTH,0),i(c,p.a.PACK_SKIP_PIXELS,0),i(c,p.a.PACK_SKIP_ROWS,0),i(c,p.a.UNPACK_ROW_LENGTH,0),i(c,p.a.UNPACK_IMAGE_HEIGHT,0),i(c,p.a.UNPACK_SKIP_PIXELS,0),i(c,p.a.UNPACK_SKIP_ROWS,0),i(c,p.a.UNPACK_SKIP_IMAGES,0),c),g=function(e,t,n){return t?e.enable(n):e.disable(n)},y=function(e,t,n){return e.hint(n,t)},m=function(e,t,n){return e.pixelStorei(n,t)},_=function(e,t){return e.bindFramebuffer(p.a.DRAW_FRAMEBUFFER,t)},b=function(e,t){return e.bindFramebuffer(p.a.READ_FRAMEBUFFER,t)},E=(f={},i(f,p.a.BLEND,g),i(f,p.a.BLEND_COLOR,function(e,t){return e.blendColor.apply(e,r(t))}),i(f,p.a.BLEND_EQUATION_RGB,"blendEquation"),i(f,p.a.BLEND_EQUATION_ALPHA,"blendEquation"),i(f,p.a.BLEND_SRC_RGB,"blendFunc"),i(f,p.a.BLEND_DST_RGB,"blendFunc"),i(f,p.a.BLEND_SRC_ALPHA,"blendFunc"),i(f,p.a.BLEND_DST_ALPHA,"blendFunc"),i(f,p.a.COLOR_CLEAR_VALUE,function(e,t){return e.clearColor.apply(e,r(t))}),i(f,p.a.COLOR_WRITEMASK,function(e,t){return e.colorMask.apply(e,r(t))}),i(f,p.a.CULL_FACE,g),i(f,p.a.CULL_FACE_MODE,function(e,t){return e.cullFace(t)}),i(f,p.a.DEPTH_TEST,g),i(f,p.a.DEPTH_CLEAR_VALUE,function(e,t){return e.clearDepth(t)}),i(f,p.a.DEPTH_FUNC,function(e,t){return e.depthFunc(t)}),i(f,p.a.DEPTH_RANGE,function(e,t){return e.depthRange.apply(e,r(t))}),i(f,p.a.DEPTH_WRITEMASK,function(e,t){return e.depthMask(t)}),i(f,p.a.DITHER,g),i(f,p.a.FRAGMENT_SHADER_DERIVATIVE_HINT,y),i(f,p.a.FRAMEBUFFER_BINDING,_),i(f,p.a.FRONT_FACE,function(e,t){return e.frontFace(t)}),i(f,p.a.GENERATE_MIPMAP_HINT,y),i(f,p.a.LINE_WIDTH,function(e,t){return e.lineWidth(t)}),i(f,p.a.POLYGON_OFFSET_FILL,g),i(f,p.a.POLYGON_OFFSET_FACTOR,"polygonOffset"),i(f,p.a.POLYGON_OFFSET_UNITS,"polygonOffset"),i(f,p.a.RASTERIZER_DISCARD,g),i(f,p.a.SAMPLE_COVERAGE_VALUE,"sampleCoverage"),i(f,p.a.SAMPLE_COVERAGE_INVERT,"sampleCoverage"),i(f,p.a.SCISSOR_TEST,g),i(f,p.a.SCISSOR_BOX,function(e,t){return e.scissor.apply(e,r(t))}),i(f,p.a.STENCIL_TEST,g),i(f,p.a.STENCIL_CLEAR_VALUE,function(e,t){return e.clearStencil(t)}),i(f,p.a.STENCIL_WRITEMASK,function(e,t){return e.stencilMaskSeparate(p.a.FRONT,t)}),i(f,p.a.STENCIL_BACK_WRITEMASK,function(e,t){return e.stencilMaskSeparate(p.a.BACK,t)}),i(f,p.a.STENCIL_FUNC,"stencilFuncFront"),i(f,p.a.STENCIL_REF,"stencilFuncFront"),i(f,p.a.STENCIL_VALUE_MASK,"stencilFuncFront"),i(f,p.a.STENCIL_BACK_FUNC,"stencilFuncBack"),i(f,p.a.STENCIL_BACK_REF,"stencilFuncBack"),i(f,p.a.STENCIL_BACK_VALUE_MASK,"stencilFuncBack"),i(f,p.a.STENCIL_FAIL,"stencilOpFront"),i(f,p.a.STENCIL_PASS_DEPTH_FAIL,"stencilOpFront"),i(f,p.a.STENCIL_PASS_DEPTH_PASS,"stencilOpFront"),i(f,p.a.STENCIL_BACK_FAIL,"stencilOpBack"),i(f,p.a.STENCIL_BACK_PASS_DEPTH_FAIL,"stencilOpBack"),i(f,p.a.STENCIL_BACK_PASS_DEPTH_PASS,"stencilOpBack"),i(f,p.a.VIEWPORT,function(e,t){return e.viewport.apply(e,r(t))}),i(f,p.a.PACK_ALIGNMENT,m),i(f,p.a.UNPACK_ALIGNMENT,m),i(f,p.a.UNPACK_FLIP_Y_WEBGL,m),i(f,p.a.UNPACK_PREMULTIPLY_ALPHA_WEBGL,m),i(f,p.a.UNPACK_COLORSPACE_CONVERSION_WEBGL,m),i(f,p.a.PACK_ROW_LENGTH,m),i(f,p.a.PACK_SKIP_PIXELS,m),i(f,p.a.PACK_SKIP_ROWS,m),i(f,p.a.READ_FRAMEBUFFER_BINDING,b),i(f,p.a.UNPACK_ROW_LENGTH,m),i(f,p.a.UNPACK_IMAGE_HEIGHT,m),i(f,p.a.UNPACK_SKIP_PIXELS,m),i(f,p.a.UNPACK_SKIP_ROWS,m),i(f,p.a.UNPACK_SKIP_IMAGES,m),f),x={blendEquation:function(e,t){return e.blendEquationSeparate(t[p.a.BLEND_EQUATION_RGB],t[p.a.BLEND_EQUATION_ALPHA])},blendFunc:function(e,t){return e.blendFuncSeparate(t[p.a.BLEND_SRC_RGB],t[p.a.BLEND_DST_RGB],t[p.a.BLEND_SRC_ALPHA],t[p.a.BLEND_DST_ALPHA])},polygonOffset:function(e,t){return e.polygonOffset(t[p.a.POLYGON_OFFSET_FACTOR],t[p.a.POLYGON_OFFSET_UNITS])},sampleCoverage:function(e,t){return e.sampleCoverage(t[p.a.SAMPLE_COVERAGE_VALUE],t[p.a.SAMPLE_COVERAGE_INVERT])},stencilFuncFront:function(e,t){return e.stencilFuncSeparate(p.a.FRONT,t[p.a.STENCIL_FUNC],t[p.a.STENCIL_REF],t[p.a.STENCIL_VALUE_MASK])},stencilFuncBack:function(e,t){return e.stencilFuncSeparate(p.a.BACK,t[p.a.STENCIL_BACK_FUNC],t[p.a.STENCIL_BACK_REF],t[p.a.STENCIL_BACK_VALUE_MASK])},stencilOpFront:function(e,t){return e.stencilOpSeparate(p.a.FRONT,t[p.a.STENCIL_FAIL],t[p.a.STENCIL_PASS_DEPTH_FAIL],t[p.a.STENCIL_PASS_DEPTH_PASS])},stencilOpBack:function(e,t){return e.stencilOpSeparate(p.a.BACK,t[p.a.STENCIL_BACK_FAIL],t[p.a.STENCIL_BACK_PASS_DEPTH_FAIL],t[p.a.STENCIL_BACK_PASS_DEPTH_PASS])}},w=function(e,t){return e.isEnabled(t)},T=(h={},i(h,p.a.BLEND,w),i(h,p.a.CULL_FACE,w),i(h,p.a.DEPTH_TEST,w),i(h,p.a.DITHER,w),i(h,p.a.POLYGON_OFFSET_FILL,w),i(h,p.a.SAMPLE_ALPHA_TO_COVERAGE,w),i(h,p.a.SAMPLE_COVERAGE,w),i(h,p.a.SCISSOR_TEST,w),i(h,p.a.STENCIL_TEST,w),i(h,p.a.RASTERIZER_DISCARD,w),h)},function(e,t,n){"use strict";function r(e){var t=/#define[\s*]SHADER_NAME[\s*]([A-Za-z0-9_-]+)[\s*]/,n=e.match(t);return n?n[1]:"unnamed"}function i(e){switch(e){case o:return"fragment";case a:return"vertex";default:return"unknown type"}}t.a=r,t.b=i;var o=35632,a=35633},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n.d(t,"m",function(){return C}),n.d(t,"a",function(){return k}),n.d(t,"h",function(){return u}),n.d(t,"f",function(){return c}),n.d(t,"i",function(){return h}),n.d(t,"d",function(){return d}),n.d(t,"e",function(){return g}),n.d(t,"g",function(){return m}),n.d(t,"k",function(){return b}),n.d(t,"l",function(){return x}),n.d(t,"c",function(){return T}),n.d(t,"j",function(){return A}),n.d(t,"b",function(){return O});var i=n(85),o=function e(){r(this,e)},a=i.default.globals.headlessTypes||i.global,s=a.WebGLRenderingContext,u=void 0===s?o:s,l=a.WebGLProgram,c=void 0===l?o:l,f=a.WebGLShader,h=void 0===f?o:f,p=a.WebGLBuffer,d=void 0===p?o:p,v=a.WebGLFramebuffer,g=void 0===v?o:v,y=a.WebGLRenderbuffer,m=void 0===y?o:y,_=a.WebGLTexture,b=void 0===_?o:_,E=a.WebGLUniformLocation,x=void 0===E?o:E,w=a.WebGLActiveInfo,T=void 0===w?o:w,S=a.WebGLShaderPrecisionFormat,A=void 0===S?o:S,C=u!==o&&c!==o&&h!==o&&d!==o&&g!==o&&m!==o&&b!==o&&x!==o&&T!==o&&A!==o,O=function(){var e=function e(){r(this,e)};return i.global.WebGL2RenderingContext||e}(),k=function(){var e=function e(){r(this,e)};return i.global.Image||e}()},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e){return e.luma=e.luma||{},e.luma}function o(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.debug;return null===e?null:n?s(e):a(e)}function a(e){if(null===e)return null;var t=i(e);return t.realContext?t.realContext:e}function s(e){if(null===e)return null;var t=i(e);if(t.realContext)return e;if(t.debugContext)return t.debugContext;var n=function e(){r(this,e)},o=h.a.makeDebugContext(e,l,c);return Object.assign(n.prototype,o),t.debugContext=o,o.debug=!0,o.gl=e,o}function u(e,t){var n=h.a.glFunctionArgsToString(e,t);return n=n.slice(0,100)+(n.length>100?"...":""),"gl."+e+"("+n+")"}function l(e,t,n){if(!p.e.nothrow){var r=h.a.glEnumToString(e),i=h.a.glFunctionArgsToString(t,n);throw new Error(r+" in gl."+t+"("+i+")")}}function c(e,t){if(p.e.debug){var n=void 0;if(p.e.priority>=4&&(n=u(e,t),p.e.info(4,""+n)),p.e.break){n=n||u(e,t);p.e.break&&p.e.break.every(function(e){return-1!==n.indexOf(e)})}var r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){if(void 0===a.value)throw n=n||u(e,t),new Error("Undefined argument: "+n)}}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}}}t.a=o;var f=n(416),h=n.n(f),p=n(2),d=n(240);Object(d.a)()},function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(){h.a.PARAMETERS=_,p.a.PARAMETERS=b,d.a.ATTACHMENT_PARAMETERS=E,d.a.STATUS=x,v.a.PARAMETERS=w,g.a.PARAMETERS=T,y.a.PARAMETERS=S,m.a.PARAMETERS=A}t.a=i;var o,a,s,u,l,c,f=n(27),h=n(51),p=n(241),d=n(52),v=n(89),g=n(88),y=n(243),m=n(36),_=(o={},r(o,f.a.BUFFER_SIZE,{webgl1:0}),r(o,f.a.BUFFER_USAGE,{webgl1:0}),o),b=[f.a.OBJECT_TYPE,f.a.SYNC_STATUS,f.a.SYNC_CONDITION,f.a.SYNC_FLAGS],E=[f.a.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME,f.a.FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE,f.a.FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE,f.a.FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL,f.a.FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING,f.a.FRAMEBUFFER_ATTACHMENT_TEXTURE_LAYER,f.a.FRAMEBUFFER_ATTACHMENT_RED_SIZE,f.a.FRAMEBUFFER_ATTACHMENT_GREEN_SIZE,f.a.FRAMEBUFFER_ATTACHMENT_BLUE_SIZE,f.a.FRAMEBUFFER_ATTACHMENT_ALPHA_SIZE,f.a.FRAMEBUFFER_ATTACHMENT_DEPTH_SIZE,f.a.FRAMEBUFFER_ATTACHMENT_STENCIL_SIZE,f.a.FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE],x=(a={},r(a,f.a.FRAMEBUFFER_COMPLETE,"Success. Framebuffer is correctly set up"),r(a,f.a.FRAMEBUFFER_INCOMPLETE_ATTACHMENT,"Framebuffer attachment types mismatched or some attachment point not attachment complete"),r(a,f.a.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT,"Framebuffer has no attachment"),r(a,f.a.FRAMEBUFFER_INCOMPLETE_DIMENSIONS,"Framebuffer attachments do not have the same size"),r(a,f.a.FRAMEBUFFER_UNSUPPORTED,"Framebuffer attachment format not supported or depth and stencil attachments are not same"),r(a,f.a.FRAMEBUFFER_INCOMPLETE_MULTISAMPLE,"Framebuffer attachement SAMPLES differs among renderbuffers, or are mixed with textures"),a),w=(s={},r(s,f.a.DELETE_STATUS,{webgl1:0}),r(s,f.a.LINK_STATUS,{webgl1:0}),r(s,f.a.VALIDATE_STATUS,{webgl1:0}),r(s,f.a.ATTACHED_SHADERS,{webgl1:0}),r(s,f.a.ACTIVE_ATTRIBUTES,{webgl1:0}),r(s,f.a.ACTIVE_UNIFORMS,{webgl1:0}),r(s,f.a.TRANSFORM_FEEDBACK_BUFFER_MODE,{webgl2:0}),r(s,f.a.TRANSFORM_FEEDBACK_VARYINGS,{webgl2:0}),r(s,f.a.ACTIVE_UNIFORM_BLOCKS,{webgl2:0}),s),T=(u={},r(u,f.a.RENDERBUFFER_WIDTH,{webgl1:0}),r(u,f.a.RENDERBUFFER_HEIGHT,{webgl1:0}),r(u,f.a.RENDERBUFFER_INTERNAL_FORMAT,{type:"GLenum",webgl1:f.a.RGBA4}),r(u,f.a.RENDERBUFFER_GREEN_SIZE,{webgl1:0}),r(u,f.a.RENDERBUFFER_BLUE_SIZE,{webgl1:0}),r(u,f.a.RENDERBUFFER_RED_SIZE,{webgl1:0}),r(u,f.a.RENDERBUFFER_ALPHA_SIZE,{webgl1:0}),r(u,f.a.RENDERBUFFER_DEPTH_SIZE,{webgl1:0}),r(u,f.a.RENDERBUFFER_STENCIL_SIZE,{webgl1:0}),r(u,f.a.RENDERBUFFER_SAMPLES,{webgl2:1}),u),S=(l={},r(l,f.a.TEXTURE_MAG_FILTER,{webgl2:!0}),r(l,f.a.TEXTURE_MIN_FILTER,{webgl2:!0}),r(l,f.a.TEXTURE_WRAP_S,{webgl2:!0}),r(l,f.a.TEXTURE_WRAP_T,{webgl2:!0}),r(l,f.a.TEXTURE_WRAP_R,{webgl2:!0}),r(l,f.a.TEXTURE_BASE_LEVEL,{webgl2:!0}),r(l,f.a.TEXTURE_MAX_LEVEL,{webgl2:!0}),r(l,f.a.TEXTURE_COMPARE_FUNC,{webgl2:!0}),r(l,f.a.TEXTURE_COMPARE_MODE,{webgl2:!0}),r(l,f.a.TEXTURE_MIN_LOD,{webgl2:!0}),r(l,f.a.TEXTURE_MAX_LOD,{webgl2:!0}),l),A=(c={},r(c,f.a.TEXTURE_MAG_FILTER,{type:"GLenum",webgl1:f.a.LINEAR}),r(c,f.a.TEXTURE_MIN_FILTER,{type:"GLenum",webgl1:f.a.NEAREST_MIPMAP_LINEAR}),r(c,f.a.TEXTURE_WRAP_S,{type:"GLenum",webgl1:f.a.REPEAT}),r(c,f.a.TEXTURE_WRAP_T,{type:"GLenum",webgl1:f.a.REPEAT}),r(c,f.a.TEXTURE_WRAP_R,{type:"GLenum",webgl2:f.a.REPEAT}),r(c,f.a.TEXTURE_BASE_LEVEL,{webgl2:0}),r(c,f.a.TEXTURE_MAX_LEVEL,{webgl2:1e3}),r(c,f.a.TEXTURE_COMPARE_FUNC,{type:"GLenum",webgl2:f.a.LEQUAL}),r(c,f.a.TEXTURE_COMPARE_MODE,{type:"GLenum",webgl2:f.a.NONE}),r(c,f.a.TEXTURE_MIN_LOD,{webgl2:-1e3}),r(c,f.a.TEXTURE_MAX_LOD,{webgl2:1e3}),r(c,f.a.TEXTURE_WIDTH,{webgl1:0}),r(c,f.a.TEXTURE_HEIGHT,{webgl1:0}),c)},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(20),s=n(1),u=n(17),l=n(138),c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),f=function(e){function t(e,n){r(this,t),Object(s.c)(e);var o=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return o.promise=null,Object.seal(o),o}return o(t,e),c(t,[{key:"wait",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.flags,n=void 0===t?0:t,r=e.timeout,i=void 0===r?a.e.TIMEOUT_IGNORED:r;return this.gl.waitSync(this.handle,n,i),this}},{key:"clientWait",value:function(e){var t=e.flags,n=void 0===t?a.e.SYNC_FLUSH_COMMANDS_BIT:t,r=e.timeout,i=this.gl.clientWaitSync(this.handle,n,r);switch(i){case a.e.ALREADY_SIGNALED:case a.e.TIMEOUT_EXPIRED:case a.e.CONDITION_SATISFIED:case a.e.WAIT_FAILED:}return i}},{key:"cancel",value:function(){l.a.cancelQuery(this)}},{key:"isSignaled",value:function(){return this.getParameter(a.e.SYNC_STATUS)===a.e.SIGNALED}},{key:"isResultAvailable",value:function(){return this.isSignaled()}},{key:"getResult",value:function(){return this.isSignaled()}},{key:"getParameter",value:function(e){return this.gl.getSyncParameter(this.handle,e)}},{key:"_createHandle",value:function(){return this.gl.fenceSync(a.e.SYNC_GPU_COMMANDS_COMPLETE,0)}},{key:"_deleteHandle",value:function(){l.a.deleteQuery(this),this.gl.deleteSync(this.handle)}}]),t}(u.a);t.a=f},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e){switch(e.drawMode){case s.b.POINTS:return s.b.POINTS;case s.b.LINES:case s.b.LINE_STRIP:case s.b.LINE_LOOP:return s.b.LINES;case s.b.TRIANGLES:case s.b.TRIANGLE_STRIP:case s.b.TRIANGLE_FAN:return s.b.TRIANGLES;default:return f()(!1),0}}t.a=a;var s=n(13),u=n(17),l=n(1),c=n(0),f=n.n(c),h=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();u.a},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(20),s=n(1),u=n(17),l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=function(e){function t(e,n){r(this,t),Object(s.c)(e);var o=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return Object.seal(o),o}return o(t,e),l(t,null,[{key:"isSupported",value:function(e){return Object(s.h)(e)}},{key:"isHandle",value:function(e){return this.gl.isSampler(this.handle)}}]),l(t,[{key:"bind",value:function(e){return this.gl.bindSampler(e,this.handle),this}},{key:"unbind",value:function(e){return this.gl.bindSampler(e,null),this}},{key:"_createHandle",value:function(){return this.gl.createSampler()}},{key:"_deleteHandle",value:function(){this.gl.deleteSampler(this.handle)}},{key:"_getParameter",value:function(e){return this.gl.getSamplerParameter(this.handle,e)}},{key:"_setParameter",value:function(e,t){switch(e){case a.e.TEXTURE_MIN_LOD:case a.e.TEXTURE_MAX_LOD:this.gl.samplerParameterf(this.handle,e,t);break;default:this.gl.samplerParameteri(this.handle,e,t)}return this}}]),t}(u.a);t.a=c},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(13),s=n(36),u=n(0),l=n.n(u),c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),f=[a.a.TEXTURE_CUBE_MAP_POSITIVE_X,a.a.TEXTURE_CUBE_MAP_NEGATIVE_X,a.a.TEXTURE_CUBE_MAP_POSITIVE_Y,a.a.TEXTURE_CUBE_MAP_NEGATIVE_Y,a.a.TEXTURE_CUBE_MAP_POSITIVE_Z,a.a.TEXTURE_CUBE_MAP_NEGATIVE_Z],h=function(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};r(this,t);var o=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,Object.assign({},n,{target:a.a.TEXTURE_CUBE_MAP})));return o.initialize(n),Object.seal(o),o}return o(t,e),c(t,[{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.format,n=void 0===t?a.a.RGBA:t,r=e.mipmaps,i=void 0===r||r,o=e.width,s=void 0===o?1:o,u=e.height,c=void 0===u?1:u,f=e.type,h=void 0===f?a.a.UNSIGNED_BYTE:f,p=e.dataFormat,d=this._deduceParameters({format:n,type:h,dataFormat:p});h=d.type,p=d.dataFormat;var v=this._deduceImageSize({data:e[a.a.TEXTURE_CUBE_MAP_POSITIVE_X],width:s,height:c});s=v.width,c=v.height,l()(s===c),this.setCubeMapImageData(e),i&&this.generateMipmap(e),this.opts=e}},{key:"subImage",value:function(e){var t=e.face,n=e.data,r=e.x,i=void 0===r?0:r,o=e.y,a=void 0===o?0:o,s=e.mipmapLevel,u=void 0===s?0:s;return this._subImage({target:t,data:n,x:i,y:a,mipmapLevel:u})}},{key:"setCubeMapImageData",value:function(e){var t=e.width,n=e.height,r=e.pixels,i=e.data,o=e.border,s=void 0===o?0:o,u=e.format,l=void 0===u?a.a.RGBA:u,c=e.type,h=void 0===c?a.a.UNSIGNED_BYTE:c,p=(e.generateMipmap,this.gl);if(r=r||i,this.bind(),this.width||this.height){var d=!0,v=!1,g=void 0;try{for(var y,m=f[Symbol.iterator]();!(d=(y=m.next()).done);d=!0){var _=y.value;p.texImage2D(_,0,l,t,n,s,l,h,r[_])}}catch(e){v=!0,g=e}finally{try{!d&&m.return&&m.return()}finally{if(v)throw g}}}else{var b=!0,E=!1,x=void 0;try{for(var w,T=f[Symbol.iterator]();!(b=(w=T.next()).done);b=!0){var S=w.value;p.texImage2D(S,0,l,l,h,r[S])}}catch(e){E=!0,x=e}finally{try{!b&&T.return&&T.return()}finally{if(E)throw x}}}}},{key:"bind",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.index;return void 0!==t&&this.gl.activeTexture(a.a.TEXTURE0+t),this.gl.bindTexture(a.a.TEXTURE_CUBE_MAP,this.handle),t}},{key:"unbind",value:function(){return this.gl.bindTexture(a.a.TEXTURE_CUBE_MAP,null),this}}]),t}(s.a);t.a=h,h.FACES=f},function(e,t,n){"use strict";function r(e,t){var n=t.drawMode,r=void 0===n?i.b.TRIANGLES:n,a=t.vertexCount,s=t.offset,u=void 0===s?0:s,l=t.isIndexed,c=void 0!==l&&l,f=t.indexType,h=void 0===f?i.b.UNSIGNED_SHORT:f,p=t.isInstanced,d=void 0!==p&&p,v=t.instanceCount,g=void 0===v?0:v;Object(o.d)(e);e.getExtension("ANGLE_instanced_arrays");if(d){var y=isWebGL2(e),m=e.getExtension("ANGLE_instanced_arrays"),_=y?e:m,b=y?"":"ANGLE",E="drawElementsInstanced"+b,x="drawArraysInstanced"+b;c?_[E](r,a,h,u,g):_[x](r,u,a,g)}else c?e.drawElements(r,a,h,u):e.drawArrays(r,u,a)}t.a=r;var i=n(13),o=n(1),a=n(0);n.n(a)},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(17),s=n(138),u=n(86),l=n(1),c=n(35),f=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),h=function(e){return e},p=function(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};r(this,t);var o=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n)),a=n.onComplete,s=void 0===a?h:a,u=n.onError,l=void 0===u?h:u;return o.target=null,o.onComplete=s,o.onError=l,o.promise=null,Object.seal(o),o}return o(t,e),f(t,null,[{key:"isSupported",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.queries,r=void 0!==n&&n,i=t.timers,o=void 0!==i&&i,a=t.timestamps,s=void 0!==a&&a,f=Object(l.h)(e),h=Object(u.d)(e,u.a.TIMER_QUERY),p=f||h;if(r&&(p=p&&f),o&&(p=p&&h),s){Object(c.g)(e);var d=e.getQuery(36392,34916);p=p&&d>0}return p}}]),f(t,[{key:"beginTimeElapsedQuery",value:function(){return this.begin(35007)}},{key:"beginOcclusionQuery",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.conservative,n=void 0!==t&&t;return this.begin(n?36202:35887)}},{key:"beginTransformFeedbackQuery",value:function(){return this.begin(35976)}},{key:"getTimestamp",value:function(){s.a.beginQuery(this,this.onComplete,this.onError);try{this.gl.queryCounter(this.handle,36392)}catch(e){s.a.rejectQuery(this,'Timer queries require "EXT_disjoint_timer_query" extension')}return this}},{key:"begin",value:function(e){s.a.beginQuery(this,this.onComplete,this.onError),this.target=e;try{this.gl.beginQuery(this.target,this.handle)}catch(e){s.a.rejectQuery(this,"Query not supported")}return this}},{key:"end",value:function(){return this.target&&(this.ext.endQuery(this.target),this.target=null),this}},{key:"cancel",value:function(){return this.end(),s.a.cancelQuery(this),this}},{key:"isResultAvailable",value:function(){return this.gl.getQueryParameter(this.handle,34919)}},{key:"getResult",value:function(){var e=this.gl.getQueryParameter(this.handle,34918);return Number.isFinite(e)?e/1e6:0}},{key:"_createHandle",value:function(){return t.isSupported(this.gl)?this.gl.createQuery():null}},{key:"_deleteHandle",value:function(){s.a.deleteQuery(this),this.gl.deleteQuery(this.handle)}}],[{key:"poll",value:function(e){s.a.poll(e)}}]),t}(a.a);t.a=p,s.a.setInvalidator({queryType:p,errorMessage:"Disjoint GPU operation invalidated timer queries",checkInvalid:function(e){return e.getParameter(36795)}})},function(e,t,n){"use strict";function r(e,t){var n=t.x,r=t.y,a=t.width,s=void 0===a?1:a,u=t.height,l=void 0===u?1:u,c=t.data,f=t.dataOffset,h=void 0===f?0:f,p=t.type,d=void 0===p?i.e.UNSIGNED_BYTE:p,v=t.sourceHeight,g=t.format,y=void 0===g?i.e.RGBA:g;return c=c||new Uint8Array(4*s*l),r=v?v-r:r,h?(Object(o.c)(e),e.readPixels(n,r,s,l,y,d,c,h)):e.readPixels(n,r,s,l,y,d,c),c}t.a=r;var i=n(20),o=n(1),a=n(0);n.n(a),function(){function e(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}}()},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=n(2),o=n(53),a=n(0),s=n.n(a),u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=function(){function e(t){var n=t.id;t.display;r(this,e),this.position=new o.b,this.rotation=new o.b,this.scale=new o.b(1,1,1),this.matrix=new o.a,this.id=n||Object(i.g)(this.constructor.name),this.display=!0,this.userData={}}return u(e,[{key:"setPosition",value:function(e){return s()(3===e.length,"setPosition requires vector argument"),this.position=e,this}},{key:"setRotation",value:function(e){return s()(3===e.length,"setRotation requires vector argument"),this.rotation=e,this}},{key:"setScale",value:function(e){return s()(3===e.length,"setScale requires vector argument"),this.scale=e,this}},{key:"setMatrixComponents",value:function(e){var t=e.position,n=e.rotation,r=e.scale,i=e.update,o=void 0===i||i;return t&&this.setPosition(t),n&&this.setRotation(n),r&&this.setScale(r),o&&this.updateMatrix(),this}},{key:"updateMatrix",value:function(){var e=this.position,t=this.rotation,n=this.scale;return this.matrix.identity(),this.matrix.translate(e),this.matrix.rotateXYZ(t),this.matrix.scale(n),this}},{key:"update",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.position,n=e.rotation,r=e.scale;return t&&this.setPosition(t),n&&this.setRotation(n),r&&this.setScale(r),this.updateMatrix(),this}},{key:"getCoordinateUniforms",value:function(e,t){s()(e),t=t||this.matrix;var n=new o.a(e).multiplyRight(t),r=n.invert();return{viewMatrix:e,modelMatrix:t,objectMatrix:t,worldMatrix:n,worldInverseMatrix:r,worldInverseTransposeMatrix:r.transpose()}}},{key:"transform",value:function(){if(this.parent){var e=this.parent;this.endPosition.set(this.position.add(e.endPosition)),this.endRotation.set(this.rotation.add(e.endRotation)),this.endScale.set(this.scale.add(e.endScale))}else this.endPosition.set(this.position),this.endRotation.set(this.rotation),this.endScale.set(this.scale);for(var t=this.children,n=0;n<t.length;++n)t[n].transform();return this}}]),e}();t.a=l},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e){return 2===e.length&&Number.isFinite(e[0])&&Number.isFinite(e[1])}t.b=a;var s=n(54),u=n(21),l=n(172),c=n.n(l),f=n(73),h=n.n(f),p=n(173),d=n.n(p),v=n(174),g=n.n(v),y=n(175),m=n.n(y),_=n(176),b=n.n(_),E=n(177),x=n.n(E),w=n(74),T=n.n(w),S=n(178),A=n.n(S),C=n(179),O=n.n(C),k=n(180),P=n.n(k),R=n(118),I=n.n(R),N=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),M=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;r(this,t);var o=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return Array.isArray(e)&&1===arguments.length?o.copy(e):o.set(e,n),o}return o(t,e),N(t,[{key:"set",value:function(e,t){return c()(this,e,t),this.check(),this}},{key:"add",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var u=a.value;h()(this,this,u)}}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return this}},{key:"subtract",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var u=a.value;d()(this,this,u)}}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return this.check(),this}},{key:"multiply",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var u=a.value;g()(this,this,u)}}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return this.check(),this}},{key:"divide",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var u=a.value;m()(this,this,u)}}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return this.check(),this}},{key:"scale",value:function(e){return Number.isFinite(e)&&b()(this,this,e),this.check(),this}},{key:"scaleAndAdd",value:function(e,t){return x()(this,this,e,t),this.check(),this}},{key:"negate",value:function(){return T()(this,this),this.check(),this}},{key:"normalize",value:function(){return A()(this,this),this.check(),this}},{key:"dot",value:function(e){return O()(this,e)}},{key:"cross",value:function(e){return P()(this,this,e),this.check(),this}},{key:"lerp",value:function(e,t){return I()(this,this,e,t),this.check(),this}},{key:"horizontalAngle",value:function(){return Math.atan2(this.y,this.x)}},{key:"verticalAngle",value:function(){return Math.atan2(this.x,this.y)}},{key:"operation",value:function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return e.apply(void 0,[this,this].concat(n)),this.check(),this}},{key:"ELEMENTS",get:function(){return 2}},{key:"x",get:function(){return this[0]},set:function(e){return this[0]=Object(u.a)(e)}},{key:"y",get:function(){return this[1]},set:function(e){return this[1]=Object(u.a)(e)}}]),t}(s.a);t.a=M},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e){return 4===e.length&&Number.isFinite(e[0])&&Number.isFinite(e[1])&&Number.isFinite(e[2])&&Number.isFinite(e[3])}t.b=a;var s=n(54),u=n(21),l=n(122),c=n.n(l),f=n(193),h=n.n(f),p=n(123),d=n.n(p),v=n(194),g=n.n(v),y=n(124),m=n.n(y),_=n(195),b=n.n(_),E=n(76),x=n.n(E),w=n(196),T=n.n(w),S=n(197),A=n.n(S),C=n(198),O=n.n(C),k=n(125),P=n.n(k),R=n(126),I=n.n(R),N=n(127),M=n.n(N),L=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),D=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;r(this,t);var s=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return Array.isArray(e)&&1===arguments.length?s.copy(e):s.set(e,n,o,a),s}return o(t,e),L(t,[{key:"set",value:function(e,t,n,r){return c()(this,e,t,n,r),this.check(),this}},{key:"distance",value:function(e){return h()(e)}},{key:"add",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var u=a.value;d()(this,this,u)}}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return this.check(),this}},{key:"subtract",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var u=a.value;g()(this,this,u)}}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return this.check(),this}},{key:"multiply",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var u=a.value;m()(this,this,u)}}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return this.check(),this}},{key:"divide",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var u=a.value;b()(this,this,u)}}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return this.check(),this}},{key:"scale",value:function(e){return x()(this,this,e),this.check(),this}},{key:"scaleAndAdd",value:function(e,t){return T()(this,this,e,t),this.check(),this}},{key:"negate",value:function(){return A()(this,this),this.check(),this}},{key:"inverse",value:function(){return O()(this,this),this.check(),this}},{key:"normalize",value:function(){return P()(this,this),this.check(),this}},{key:"dot",value:function(e){return I()(this,e)}},{key:"lerp",value:function(e,t){return M()(this,this,e,t),this.check(),this}},{key:"ELEMENTS",get:function(){return 4}},{key:"x",get:function(){return this[0]},set:function(e){return this[0]=Object(u.a)(e)}},{key:"y",get:function(){return this[1]},set:function(e){return this[1]=Object(u.a)(e)}},{key:"z",get:function(){return this[2]},set:function(e){return this[2]=Object(u.a)(e)}},{key:"w",get:function(){return this[3]},set:function(e){return this[3]=Object(u.a)(e)}}]),t}(s.a);t.a=D},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(54),s=n(21),u=n(249),l=n(92),c=n(250),f=n(0),h=n.n(f),p=n(200),d=n.n(p),v=n(201),g=n.n(v),y=n(202),m=n.n(y),_=n(59),b=n.n(_),E=n(128),x=n.n(E),w=n(46),T=n.n(w),S=n(203),A=n.n(S),C=n(77),O=n.n(C),k=n(47),P=n.n(k),R=n(78),I=n.n(R),N=n(129),M=n.n(N),L=n(48),D=n.n(L),F=n(49),j=n.n(F),B=n(50),U=n.n(B),z=n(204),V=n.n(z),G=n(205),H=n.n(G),q=n(60),W=n.n(q),X=function(){function e(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),$=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),Y=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],Z=[0,0,0,0],K=function(e){function t(){for(var e=arguments.length,n=Array(e),o=0;o<e;o++)n[o]=arguments[o];r(this,t);var a=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return Array.isArray(n[0])&&1===arguments.length?a.copy(n[0]):a.identity(),a}return o(t,e),$(t,[{key:"setRowMajor",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,u=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0,l=arguments.length>9&&void 0!==arguments[9]?arguments[9]:0,c=arguments.length>10&&void 0!==arguments[10]?arguments[10]:1,f=arguments.length>11&&void 0!==arguments[11]?arguments[11]:0,h=arguments.length>12&&void 0!==arguments[12]?arguments[12]:0,p=arguments.length>13&&void 0!==arguments[13]?arguments[13]:0,d=arguments.length>14&&void 0!==arguments[14]?arguments[14]:0,v=arguments.length>15&&void 0!==arguments[15]?arguments[15]:1;return this.set(e,i,u,h,t,o,l,p,n,a,c,d,r,s,f,v)}},{key:"setColumnMajor",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,u=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0,l=arguments.length>9&&void 0!==arguments[9]?arguments[9]:0,c=arguments.length>10&&void 0!==arguments[10]?arguments[10]:1,f=arguments.length>11&&void 0!==arguments[11]?arguments[11]:0,h=arguments.length>12&&void 0!==arguments[12]?arguments[12]:0,p=arguments.length>13&&void 0!==arguments[13]?arguments[13]:0,d=arguments.length>14&&void 0!==arguments[14]?arguments[14]:0,v=arguments.length>15&&void 0!==arguments[15]?arguments[15]:1;return this.set(e,t,n,r,i,o,a,s,u,l,c,f,h,p,d,v)}},{key:"set",value:function(e,t,n,r,i,o,a,s,u,l,c,f,h,p,d,v){return this[0]=e,this[1]=t,this[2]=n,this[3]=r,this[4]=i,this[5]=o,this[6]=a,this[7]=s,this[8]=u,this[9]=l,this[10]=c,this[11]=f,this[12]=h,this[13]=p,this[14]=d,this[15]=v,this.check(),this}},{key:"determinant",value:function(){return d()(this)}},{key:"identity",value:function(){for(var e=0;e<Y.length;++e)this[e]=Y[e];return this.check(),this}},{key:"fromQuaternion",value:function(e){return g()(this,e),this.check(),this}},{key:"frustum",value:function(e){var t=e.left,n=e.right,r=e.bottom,i=e.top,o=e.near,a=e.far;return m()(this,t,n,r,i,o,a),this.check(),this}},{key:"lookAt",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.eye,n=e.center,r=void 0===n?[0,0,0]:n,i=e.up,o=void 0===i?[0,1,0]:i;return b()(this,t,r,o),this.check(),this}},{key:"ortho",value:function(e){var t=e.left,n=e.right,r=e.bottom,i=e.top,o=e.near,a=void 0===o?.1:o,s=e.far,u=void 0===s?500:s;return x()(this,t,n,r,i,a,u),this.check(),this}},{key:"perspective",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.fov,n=void 0===t?45*Math.PI/180:t,r=e.aspect,i=void 0===r?1:r,o=e.near,a=void 0===o?.1:o,s=e.far,u=void 0===s?500:s;if(n>2*Math.PI)throw Error("radians");return T()(this,n,i,a,u),this.check(),this}},{key:"transpose",value:function(){return A()(this,this),this.check(),this}},{key:"invert",value:function(){return O()(this,this),this.check(),this}},{key:"multiplyLeft",value:function(e){return P()(this,e,this),this.check(),this}},{key:"multiplyRight",value:function(e){return P()(this,this,e),this.check(),this}},{key:"rotateX",value:function(e){return I()(this,this,e),this.check(),this}},{key:"rotateY",value:function(e){return M()(this,this,e),this.check(),this}},{key:"rotateZ",value:function(e){return D()(this,this,e),this.check(),this}},{key:"rotateXYZ",value:function(e){var t=X(e,3),n=t[0],r=t[1],i=t[2];return this.rotateX(n).rotateY(r).rotateZ(i)}},{key:"rotateAxis",value:function(e,t){return D()(this,this,e,t),this.check(),this}},{key:"scale",value:function(e){return j()(this,this,e),this.check(),this}},{key:"translate",value:function(e){return U()(this,this,e),this.check(),this}},{key:"transformVector2",value:function(e,t){return t=t||new u.a,V()(t,e,this),h()(Object(u.b)(t)),t}},{key:"transformVector3",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new l.a;return t=t||new l.a,H()(t,e,this),h()(Object(l.b)(t)),t}},{key:"transformVector4",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new c.a;return t=t||new c.a,W()(t,e,this),h()(Object(c.b)(t)),t}},{key:"transformVector",value:function(e,t){switch(e.length){case 2:return this.transformVector2(e,t);case 3:return this.transformVector3(e,t);case 4:return this.transformVector4(e,t);default:throw new Error("Illegal vector")}}},{key:"transformDirection",value:function(e,t){switch(e.length){case 2:W()(Z,[e[0],e[1],0,0],this),t=t||new u.a,t[0]=Z[0],t[1]=Z[1];break;case 3:W()(Z,[e[0],e[1],e[2],0],this),t=t||new l.a,t[0]=Z[0],t[1]=Z[1],t[2]=Z[2];break;case 4:h()(0===e[3]),t=t||new c.a,W()(t,e,this);break;default:throw new Error("Illegal vector")}return t}},{key:"transformPoint",value:function(e,t){switch(e.length){case 2:t=t||new u.a,W()(t,[e[0],e[1],0,1],this),t.length=2,h()(Object(u.b)(t));break;case 3:t=t||new l.a,W()(t,[e[0],e[1],e[2],1],this),t.length=3,h()(Object(l.b)(t));break;case 4:h()(0!==e[3]),t=t||new c.a,W()(t,e,this),h()(Object(c.b)(t));break;default:throw new Error("Illegal vector")}return t}},{key:"ELEMENTS",get:function(){return 16}},{key:"m00",get:function(){return this[0]},set:function(e){return this[0]=Object(s.a)(e)}},{key:"m01",get:function(){return this[4]},set:function(e){return this[4]=Object(s.a)(e)}},{key:"m02",get:function(){return this[8]},set:function(e){return this[8]=Object(s.a)(e)}},{key:"m03",get:function(){return this[12]},set:function(e){return this[12]=Object(s.a)(e)}},{key:"m10",get:function(){return this[1]},set:function(e){return this[1]=Object(s.a)(e)}},{key:"m11",get:function(){return this[5]},set:function(e){return this[5]=Object(s.a)(e)}},{key:"m12",get:function(){return this[9]},set:function(e){return this[9]=Object(s.a)(e)}},{key:"m13",get:function(){return this[13]},set:function(e){return this[13]=Object(s.a)(e)}},{key:"m20",get:function(){return this[2]},set:function(e){return this[2]=Object(s.a)(e)}},{key:"m21",get:function(){return this[6]},set:function(e){return this[6]=Object(s.a)(e)}},{key:"m22",get:function(){return this[10]},set:function(e){return this[10]=Object(s.a)(e)}},{key:"m23",get:function(){return this[14]},set:function(e){return this[14]=Object(s.a)(e)}},{key:"m30",get:function(){return this[3]},set:function(e){return this[3]=Object(s.a)(e)}},{key:"m31",get:function(){return this[7]},set:function(e){return this[7]=Object(s.a)(e)}},{key:"m32",get:function(){return this[11]},set:function(e){return this[11]=Object(s.a)(e)}},{key:"m33",get:function(){return this[15]},set:function(e){return this[15]=Object(s.a)(e)}}]),t}(a.a);t.a=K},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(54),s=n(21),u=n(207),l=n.n(u),c=n(208),f=n.n(c),h=n(209),p=n.n(h),d=n(210),v=n.n(d),g=n(211),y=n.n(g),m=n(212),_=n.n(m),b=n(213),E=n.n(b),x=n(214),w=n.n(x),T=n(215),S=n.n(T),A=n(216),C=n.n(A),O=n(217),k=n.n(O),P=n(218),R=n.n(P),I=n(130),N=n.n(I),M=n(219),L=n.n(M),D=n(220),F=n.n(D),j=n(221),B=n.n(j),U=n(222),z=n.n(U),V=n(223),G=n.n(V),H=n(131),q=n.n(H),W=n(224),X=n.n(W),$=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),Y=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;r(this,t);var s=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return Array.isArray(e)&&1===arguments.length?s.copy(e):s.set(e,n,o,a),s}return o(t,e),$(t,[{key:"fromMatrix3",value:function(e){return l()(this,e),this.check(),this}},{key:"fromValues",value:function(e,t,n,r){return this.set(e,t,n,r)}},{key:"identity",value:function(){return f()(this),this.check(),this}},{key:"length",value:function(){return p()(this)}},{key:"squaredLength",value:function(e){return v()(this)}},{key:"dot",value:function(e,t){if(void 0!==t)throw new Error("Quaternion.dot only takes one argument");return y()(this,e)}},{key:"rotationTo",value:function(e,t){return _()(this,e,t),this.check(),this}},{key:"add",value:function(e,t){if(void 0!==t)throw new Error("Quaternion.add only takes one argument");return E()(this,e),this.check(),this}},{key:"calculateW",value:function(){return w()(this,this),this.check(),this}},{key:"conjugate",value:function(){return S()(this,this),this.check(),this}},{key:"invert",value:function(){return C()(this,this),this.check(),this}},{key:"lerp",value:function(e,t,n){return k()(this,e,t,n),this.check(),this}},{key:"multiply",value:function(e,t){if(void 0!==t)throw new Error("Quaternion.multiply only takes one argument");return R()(this,this,t),this.check(),this}},{key:"normalize",value:function(){return N()(this,this),this.check(),this}},{key:"rotateX",value:function(e){return L()(this,this,e),this.check(),this}},{key:"rotateY",value:function(e){return F()(this,this,e),this.check(),this}},{key:"rotateZ",value:function(e){return B()(this,this,e),this.check(),this}},{key:"scale",value:function(e){return z()(this,this,e),this.check(),this}},{key:"set",value:function(e,t,n,r){return G()(this,e,t,n,r),this.check(),this}},{key:"setAxisAngle",value:function(e,t){return q()(this,e,t),this.check(),this}},{key:"slerp",value:function(e,t,n){return X()(this,e,t,n),this.check(),this}},{key:"ELEMENTS",get:function(){return 4}},{key:"x",get:function(){return this[0]},set:function(e){return this[0]=Object(s.a)(e)}},{key:"y",get:function(){return this[1]},set:function(e){return this[1]=Object(s.a)(e)}},{key:"z",get:function(){return this[2]},set:function(e){return this[2]=Object(s.a)(e)}},{key:"w",get:function(){return this[3]},set:function(e){return this[3]=Object(s.a)(e)}}]),t}(a.a);t.a=Y},function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e){var t=e.id,n=e.source,r=e.type;return t&&"string"===typeof t&&-1===n.indexOf("SHADER_NAME")?"\n#define SHADER_NAME "+t+"_"+x[r]+"\n\n":""}function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=0,n="";for(var r in e)0===t&&(n+="\n// APPLICATION DEFINES\n"),t++,n+="#define "+r.toUpperCase()+" "+e[r]+"\n";return 0===t&&(n+="\n"),n}function a(e,t){Object(d.a)(e).deprecations.forEach(function(e){e.regex.test(t)&&(e.deprecated?_.e.deprecated(e.old,e.new):_.e.removed(e.old,e.new))})}function s(e,t){var n=Object(d.a)(e),r=void 0;switch(t){case b:r=n.vs||n.vertexShader;break;case E:r=n.fs||n.fragmentShader;break;default:m()(!1)}return"string"!==typeof r?"":"#define MODULE_"+e.toUpperCase()+"\n"+r+"// END MODULE_"+e+"\n\n"}function u(e,t){var n=t.id,r=t.source,u=t.type,l=t.modules,c=void 0===l?[]:l,f=t.defines,h=void 0===f?{}:f;m()("string"===typeof r,"shader source must be a string");var p=r.split("\n"),d="",g=r;0===p[0].indexOf("#version ")&&(d=p[0],g=p.slice(1).join("\n"));var y=i({id:n,source:r,type:u})+"\n"+Object(v.a)(e)+"\n"+Object(v.b)(e)+"\n"+o(h)+"\n"+(u===E?T:"")+"\n",_=!1,b=!0,x=!1,S=void 0;try{for(var A,C=c[Symbol.iterator]();!(b=(A=C.next()).done);b=!0){var O=A.value;switch(O){case"inject":_=!0;break;default:a(O,g),y+=s(O,u)}}}catch(e){x=!0,S=e}finally{try{!b&&C.return&&C.return()}finally{if(x)throw S}}return y=d+y+g,_&&y.replace("}s*$",w),y}function l(e){return function(t){var n={},r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var u=a.value,l=Object(d.a)(u),c=l.getUniforms?l.getUniforms(t):{};Object.assign(n,c)}}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}}function c(e){var t={},n=!0,r=!1,i=void 0;try{for(var o,a=e[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value,u=Object(d.a)(s);t[s]=u}}catch(e){r=!0,i=e}finally{try{!n&&a.return&&a.return()}finally{if(r)throw i}}return t}function f(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.vs,r=t.fs,i=Object(d.c)(t.modules||[]);return{gl:e,vs:u(e,Object.assign({},t,{source:n,type:b,modules:i})),fs:u(e,Object.assign({},t,{source:r,type:E,modules:i})),getUniforms:l(i),modules:c(i)}}t.a=f;var h,p,d=n(143),v=n(430),g=n(431),y=n(0),m=n.n(y),_=n(2),b="vs",E="fs",x=(h={},r(h,b,"vertex"),r(h,E,"fragment"),h),w=(p={},r(p,b,g.b),r(p,E,g.a),p),T="#ifdef GL_ES\nprecision highp float;\n#endif\n\n"},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=n(90),o=n(89),a=n(0),s=n.n(a),u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.gl,i=t._cachePrograms,o=void 0!==i&&i;r(this,e),s()(n),this.gl=n,this.vertexShaders={},this.fragmentShaders={},this.programs={},this._cachePrograms=o}return u(e,[{key:"delete",value:function(){return this}},{key:"getVertexShader",value:function(e,t){s()("string"===typeof t),s()(this._compareContexts(e,this.gl));var n=this.vertexShaders[t];return n||(n=new i.b(e,t),this.vertexShaders[t]=n),n}},{key:"getFragmentShader",value:function(e,t){s()("string"===typeof t),s()(this._compareContexts(e,this.gl));var n=this.fragmentShaders[t];return n||(n=new i.a(e,t),this.fragmentShaders[t]=n),n}},{key:"getProgram",value:function(e,t){s()(this._compareContexts(e,this.gl)),s()("string"===typeof t.vs),s()("string"===typeof t.fs),s()("string"===typeof t.id);var n=this._getProgramKey(t),r=this.programs[n];return r?(this._resetProgram(r),r):(r=this._createNewProgram(e,t),this._cachePrograms&&this._checkProgramProp(r)&&(this.programs[n]=r),r)}},{key:"_getProgramKey",value:function(e){return e.id+"-"+e.vs+"-"+e.fs}},{key:"_checkProgramProp",value:function(e){return!e.varyings}},{key:"_createNewProgram",value:function(e,t){var n=t.vs,r=t.fs,i=this.getVertexShader(e,n),a=this.getFragmentShader(e,r);return new o.a(this.gl,Object.assign({},t,{vs:i,fs:a}))}},{key:"_resetProgram",value:function(e,t){e.reset()}},{key:"_compareContexts",value:function(e,t){return(e.gl||e)===(t.gl||t)}}]),e}();t.a=l},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e){return a.c?window.requestAnimationFrame(e):setTimeout(e,1e3/60)}function o(e){return a.c?window.cancelAnimationFrame(e):clearTimeout(e)}t.c=i,t.a=o;var a=n(2),s=n(35),u=n(37),l="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),f=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.onCreateContext,i=void 0===n?function(e){return Object(u.createGLContext)(e)}:n,o=(t.onDeleteContext,t.onInitialize),s=void 0===o?function(){}:o,l=t.onRender,c=void 0===l?function(){}:l,f=t.onFinalize,h=void 0===f?function(){}:f,p=t.gl,d=void 0===p?null:p,v=t.glOptions,g=void 0===v?{preserveDrawingBuffer:!0}:v,y=t.width,m=void 0===y?null:y,_=t.height,b=void 0===_?null:_,E=t.createFramebuffer,x=void 0!==E&&E,w=t.autoResizeViewport,T=void 0===w||w,S=t.autoResizeCanvas,A=void 0===S||S,C=t.autoResizeDrawingBuffer,O=void 0===C||C,k=t.useDevicePixelRatio,P=void 0===k?null:k,R=t.useDevicePixels,I=void 0===R||R;return r(this,e),this.start=this.start.bind(this),this.stop=this.stop.bind(this),this._renderFrame=this._renderFrame.bind(this),null!==P&&(a.e.deprecated("useDevicePixelRatio","useDevicePixels"),I=P),this.setViewParameters({autoResizeViewport:T,autoResizeCanvas:A,autoResizeDrawingBuffer:O,useDevicePixels:I}),this._onCreateContext=i,this.glOptions=g,this._createFramebuffer=x,this._onInitialize=s,this._onRender=c,this._onFinalize=h,this.width=m,this.height=b,this.gl=d,this}return c(e,[{key:"setViewParameters",value:function(e){var t=e.autoResizeDrawingBuffer,n=void 0===t||t,r=e.autoResizeCanvas,i=void 0===r||r,o=e.autoResizeViewport,s=void 0===o||o,u=e.useDevicePixels,l=void 0===u||u,c=e.useDevicePixelRatio,f=void 0===c?null:c;return this.autoResizeViewport=s,this.autoResizeCanvas=i,this.autoResizeDrawingBuffer=n,this.useDevicePixels=l,null!==f&&(a.e.deprecated("useDevicePixelRatio","useDevicePixels"),this.useDevicePixels=f),this}},{key:"start",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this._stopped=!1,this._animationFrameId||(this._startPromise=Object(s.d)().then(function(){return e._stopped?null:(e._createWebGLContext(t),e._initializeCallbackData(),e._updateCallbackData(),e._resizeCanvasDrawingBuffer(),e._resizeViewport(),e._onInitialize(e._callbackData))}).then(function(t){e._stopped||(e._addCallbackData(t||{}),!1===t||e._animationFrameId||(e._animationFrameId=i(e._renderFrame)))})),this}},{key:"stop",value:function(){return this._animationFrameId&&(this._finalizeCallbackData(),o(this._animationFrameId),this._animationFrameId=null,this._stopped=!0),this}},{key:"_setupFrame",value:function(){this._onSetupFrame?this._onSetupFrame(this._callbackData):(this._resizeCanvasDrawingBuffer(),this._resizeViewport(),this._resizeFramebuffer())}},{key:"_renderFrame",value:function(){this._setupFrame(),this._updateCallbackData(),this._onRender(this._callbackData),this._callbackData.tick++,this._stopped||(this._animationFrameId=i(this._renderFrame))}},{key:"_initializeCallbackData",value:function(){this._callbackData={gl:this.gl,canvas:this.gl.canvas,framebuffer:this.framebuffer,stop:this.stop,tick:0,tock:0,useDevicePixels:this.useDevicePixels}}},{key:"_updateCallbackData",value:function(){var e=this.gl.canvas;this._callbackData.width=e.width,this._callbackData.height=e.height,this._callbackData.aspect=e.width/e.height}},{key:"_finalizeCallbackData",value:function(){this._onFinalize(this._callbackData)}},{key:"_addCallbackData",value:function(e){"object"===("undefined"===typeof e?"undefined":l(e))&&null!==e&&(this._callbackData=Object.assign({},this._callbackData,e))}},{key:"_createWebGLContext",value:function(e){if(e=Object.assign({},e,this.glOptions),e.gl?this.gl=e.gl:this.gl=this._onCreateContext(e),!Object(u.isWebGL)(this.gl))throw new Error("AnimationLoop.onCreateContext - illegal context returned");this._createFramebuffer&&(this.framebuffer=new u.Framebuffer(this.gl)),Object(u.resetParameters)(this.gl)}},{key:"_resizeViewport",value:function(){this.autoResizeViewport&&this.gl.viewport(0,0,this.gl.canvas.width,this.gl.canvas.height)}},{key:"_resizeFramebuffer",value:function(){this.framebuffer&&this.framebuffer.resize({width:this.gl.canvas.width,height:this.gl.canvas.height})}},{key:"_resizeCanvasDrawingBuffer",value:function(){this.autoResizeDrawingBuffer&&Object(s.h)(this.gl.canvas,{useDevicePixels:this.useDevicePixels})}}]),e}();t.b=f},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(93),s=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r(this,t);var n=e.radius,o=void 0===n?1:n,a=e.cap,s=void 0===a||a;return i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,Object.assign({},e,{topRadius:0,topCap:Boolean(s),bottomCap:Boolean(s),bottomRadius:o})))}return o(t,e),t}(a.a);t.a=s},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(){return{indices:new Uint16Array(c),positions:new Float32Array(f),normals:new Float32Array(h),texCoords:new Float32Array(p)}}var s=n(28),u=n(2),l=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r(this,t);var n=e.id,o=void 0===n?Object(u.g)("cube-geometry"):n;return i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,Object.assign({},e,{id:o,attributes:a()})))}return o(t,e),t}(s.a);t.a=l;var c=new Uint16Array([0,1,2,0,2,3,4,5,6,4,6,7,8,9,10,8,10,11,12,13,14,12,14,15,16,17,18,16,18,19,20,21,22,20,22,23]),f=new Float32Array([-1,-1,1,1,-1,1,1,1,1,-1,1,1,-1,-1,-1,-1,1,-1,1,1,-1,1,-1,-1,-1,1,-1,-1,1,1,1,1,1,1,1,-1,-1,-1,-1,1,-1,-1,1,-1,1,-1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,-1,1,-1,-1,-1,-1,-1,1,-1,1,1,-1,1,-1]),h=new Float32Array([0,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0]),p=new Float32Array([0,0,1,0,1,1,0,1,1,0,1,1,0,1,0,0,0,1,0,0,1,0,1,1,1,1,0,1,0,0,1,0,1,0,1,1,0,1,0,0,0,0,1,0,1,1,0,1])},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(93),s=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r(this,t);var n=e.radius,o=void 0===n?1:n;return i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,Object.assign({},e,{bottomRadius:o,topRadius:o})))}return o(t,e),t}(a.a);t.a=s},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(28),s=n(53),u=[-1,0,0,0,1,0,0,0,-1,0,0,1,0,-1,0,1,0,0],l=[3,4,5,3,5,1,3,1,0,3,0,4,4,0,2,4,2,5,2,0,1,5,2,1],c=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r(this,t);var n=e.iterations,o=void 0===n?0:n,a=Math.PI,c=2*a,f=[].concat(u),h=[].concat(l);f.push(),h.push();for(var p=(function(){var e={};return function(t,n){t*=3,n*=3;var r=t<n?t:n,i=t>n?t:n,o=r+"|"+i;if(o in e)return e[o];var a=f[t],s=f[t+1],u=f[t+2],l=f[n],c=f[n+1],h=f[n+2],p=(a+l)/2,d=(s+c)/2,v=(u+h)/2,g=Math.sqrt(p*p+d*d+v*v);return p/=g,d/=g,v/=g,f.push(p,d,v),e[o]=f.length/3-1}}()),d=0;d<o;d++){for(var v=[],g=0;g<h.length;g+=3){var y=p(h[g+0],h[g+1]),m=p(h[g+1],h[g+2]),_=p(h[g+2],h[g+0]);v.push(_,h[g+0],y,y,h[g+1],m,m,h[g+2],_,y,m,_)}h=v}for(var b=new Array(3*h.length),E=new Array(2*h.length),x=h.length,w=x-3;w>=0;w-=3){var T=h[w+0],S=h[w+1],A=h[w+2],C=3*T,O=3*S,k=3*A,P=2*T,R=2*S,I=2*A,N=f[C+0],M=f[C+1],L=f[C+2],D=Math.acos(L/Math.sqrt(N*N+M*M+L*L)),F=Math.atan2(M,N)+a,j=D/a,B=1-F/c,U=f[O+0],z=f[O+1],V=f[O+2],G=Math.acos(V/Math.sqrt(U*U+z*z+V*V)),H=Math.atan2(z,U)+a,q=G/a,W=1-H/c,X=f[k+0],$=f[k+1],Y=f[k+2],Z=Math.acos(Y/Math.sqrt(X*X+$*$+Y*Y)),K=Math.atan2($,X)+a,J=Z/a,Q=1-K/c,ee=[X-U,$-z,Y-V],te=[N-U,M-z,L-V],ne=new s.b(ee).cross(te).normalize(),re=void 0;(0===B||0===W||0===Q)&&(0===B||B>.5)&&(0===W||W>.5)&&(0===Q||Q>.5)&&(f.push(f[C+0],f[C+1],f[C+2]),re=f.length/3-1,h.push(re),E[2*re+0]=1,E[2*re+1]=j,b[3*re+0]=ne.x,b[3*re+1]=ne.y,b[3*re+2]=ne.z,f.push(f[O+0],f[O+1],f[O+2]),re=f.length/3-1,h.push(re),E[2*re+0]=1,E[2*re+1]=q,b[3*re+0]=ne.x,b[3*re+1]=ne.y,b[3*re+2]=ne.z,f.push(f[k+0],f[k+1],f[k+2]),re=f.length/3-1,h.push(re),E[2*re+0]=1,E[2*re+1]=J,b[3*re+0]=ne.x,b[3*re+1]=ne.y,b[3*re+2]=ne.z),b[C+0]=b[O+0]=b[k+0]=ne.x,b[C+1]=b[O+1]=b[k+1]=ne.y,b[C+2]=b[O+2]=b[k+2]=ne.z,E[P+0]=B,E[P+1]=j,E[R+0]=W,E[R+1]=q,E[I+0]=Q,E[I+1]=J}return i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,Object.assign({},e,{attributes:{positions:new Float32Array(f),normals:new Float32Array(b),texCoords:new Float32Array(E),indices:new Uint16Array(h)}})))}return o(t,e),t}(a.a);t.a=c},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(28),s=n(2),u=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r(this,t);var n=e.type,o=void 0===n?"x,y":n,a=e.offset,u=void 0===a?0:a,l=e.flipCull,c=void 0!==l&&l,f=e.unpack,h=void 0!==f&&f,p=e.id,d=void 0===p?Object(s.g)("plane-geometry"):p,v=o.split(","),g=e[v[0]+"len"],y=e[v[1]+"len"],m=e["n"+v[0]]||1,_=e["n"+v[1]]||1,b=(m+1)*(_+1),E=new Float32Array(3*b),x=new Float32Array(3*b),w=new Float32Array(2*b);c&&(g=-g);for(var T=0,S=0,A=0;A<=_;A++)for(var C=0;C<=m;C++){var O=C/m,k=A/_;switch(w[T+0]=c?1-O:O,w[T+1]=k,o){case"x,y":E[S+0]=g*O-.5*g,E[S+1]=y*k-.5*y,E[S+2]=u,x[S+0]=0,x[S+1]=0,x[S+2]=c?1:-1;break;case"x,z":E[S+0]=g*O-.5*g,E[S+1]=u,E[S+2]=y*k-.5*y,x[S+0]=0,x[S+1]=c?1:-1,x[S+2]=0;break;case"y,z":E[S+0]=u,E[S+1]=g*O-.5*g,E[S+2]=y*k-.5*y,x[S+0]=c?1:-1,x[S+1]=0,x[S+2]=0}T+=2,S+=3}for(var P=m+1,R=new Uint16Array(m*_*6),I=0;I<_;I++)for(var N=0;N<m;N++){var M=6*(I*m+N);R[M+0]=(I+0)*P+N,R[M+1]=(I+1)*P+N,R[M+2]=(I+0)*P+N+1,R[M+3]=(I+1)*P+N,R[M+4]=(I+1)*P+N+1,R[M+5]=(I+0)*P+N+1}if(h){for(var L=new Float32Array(3*R.length),D=new Float32Array(3*R.length),F=new Float32Array(2*R.length),j=0;j<R.length;++j){var B=R[j];L[3*j+0]=E[3*B+0],L[3*j+1]=E[3*B+1],L[3*j+2]=E[3*B+2],D[3*j+0]=x[3*B+0],D[3*j+1]=x[3*B+1],D[3*j+2]=x[3*B+2],F[2*j+0]=w[2*B+0],F[2*j+1]=w[2*B+1]}E=L,x=D,w=F,R=void 0}var U={positions:E,normals:x,texCoords:w};return R&&(U.indices=R),i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,Object.assign({},e,{attributes:U,id:d})))}return o(t,e),t}(a.a);t.a=u},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e,t,n){var r=Math.PI,i=r-0,o=2*Math.PI,a=o-0,s=(e+1)*(t+1);if("number"===typeof n){var u=n;n=function(e,t,n,r,i){return u}}for(var l=new Float32Array(3*s),c=new Float32Array(3*s),f=new Float32Array(2*s),h=new Uint16Array(e*t*6),p=0;p<=e;p++)for(var d=0;d<=t;d++){var v=d/t,g=p/e,y=d+p*(t+1),m=2*y,_=3*y,b=a*v,E=i*g,x=Math.sin(b),w=Math.cos(b),T=Math.sin(E),S=Math.cos(E),A=w*T,C=S,O=x*T,k=n(A,C,O,v,g);l[_+0]=k*A,l[_+1]=k*C,l[_+2]=k*O,c[_+0]=A,c[_+1]=C,c[_+2]=O,f[m+0]=v,f[m+1]=g}for(var P=e+1,R=0;R<e;R++)for(var I=0;I<t;I++){var N=6*(R*t+I);h[N+0]=I*P+R,h[N+1]=I*P+R+1,h[N+2]=(I+1)*P+R,h[N+3]=(I+1)*P+R,h[N+4]=I*P+R+1,h[N+5]=(I+1)*P+R+1}return{positions:l,indices:h,normals:c,texCoords:f}}var s=n(28),u=n(2),l=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r(this,t);var n=e.nlat,o=void 0===n?10:n,s=e.nlong,l=void 0===s?10:s,c=e.radius,f=void 0===c?1:c,h=e.id,p=void 0===h?Object(u.g)("sphere-geometry"):h;return i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,Object.assign({},e,{id:p,attributes:a(o,l,f)})))}return o(t,e),t}(s.a);t.a=l},function(e,t,n){"use strict";function r(e){s=e}function i(e,t){return"string"===typeof e||t||(t=e,e=t.url),t.url=s?s+e:e,(0,a.requestFile)(t)}function o(e,t){return e=s?s+e:e,new Promise(function(n,r){try{var i=new Image;i.onload=function(){return n(i)},i.onerror=function(){return r(new Error("Could not load image "+e+"."))},i.crossOrigin=t&&t.crossOrigin||"anonymous",i.src=e}catch(e){r(e)}})}Object.defineProperty(t,"__esModule",{value:!0}),t.setPathPrefix=r,t.loadFile=i,t.loadImage=o;var a=n(447),s=""},function(e,t,n){"use strict";function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a,t=(arguments.length>1&&void 0!==arguments[1]&&arguments[1],{});return void 0!==e.modelMatrix&&(t.modelMatrix=e.modelMatrix),void 0!==e.viewMatrix&&(t.viewMatrix=e.viewMatrix),void 0!==e.projectionMatrix&&(t.projectionMatrix=e.projectionMatrix),void 0!==e.cameraPositionWorld&&(t.cameraPositionWorld=e.cameraPositionWorld),void 0===e.projectionMatrix&&void 0===e.viewMatrix||(t.viewProjectionMatrix=new i.a(e.projectionMatrix).multiplyRight(e.viewMatrix)),t}var i=n(53),o=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],a={modelMatrix:o,viewMatrix:o,projectionMatrix:o,cameraPositionWorld:[0,0,0]};t.a={name:"project",getUniforms:r,vs:"varying vec4 project_vPositionWorld;\nvarying vec3 project_vNormalWorld;\n\nvec4 project_getPosition_World() {\n  return project_vPositionWorld;\n}\n\nvec3 project_getNormal_World() {\n  return project_vNormalWorld;\n}\n\n\n// Unprefixed uniforms\nuniform mat4 modelMatrix;\nuniform mat4 viewMatrix;\nuniform mat4 projectionMatrix;\nuniform mat4 viewProjectionMatrix;\nuniform vec3 cameraPositionWorld;\n\nstruct World {\n  vec3 position;\n  vec3 normal;\n};\n\nWorld world;\n\nvoid project_setPosition(vec4 position) {\n  project_vPositionWorld = position;\n}\n\nvoid project_setNormal(vec3 normal) {\n  project_vNormalWorld = normal;\n}\n\nvoid project_setPositionAndNormal_World(vec3 position, vec3 normal) {\n  world.position = position;\n  world.normal = normal;\n}\n\nvoid project_setPositionAndNormal_Model(vec3 position, vec3 normal) {\n  world.position = (modelMatrix * vec4(position, 1.)).xyz;\n  world.normal = mat3(modelMatrix) * normal;\n}\n\nvec4 project_model_to_clipspace(vec4 position) {\n  return viewProjectionMatrix * modelMatrix * position;\n}\n\nvec4 project_model_to_clipspace(vec3 position) {\n  return viewProjectionMatrix * modelMatrix * vec4(position, 1.);\n}\n\nvec4 project_world_to_clipspace(vec3 position) {\n  return viewProjectionMatrix * vec4(position, 1.);\n}\n\nvec4 project_view_to_clipspace(vec3 position) {\n  return projectionMatrix * vec4(position, 1.);\n}\n\nvec4 project_to_clipspace(vec3 position) {\n  return viewProjectionMatrix * vec4(position, 1.);\n}\n",fs:"\nvarying vec4 project_vPositionWorld;\nvarying vec3 project_vNormalWorld;\n\nvec4 project_getPosition_World() {\n  return project_vPositionWorld;\n}\n\nvec3 project_getNormal_World() {\n  return project_vNormalWorld;\n}\n"}},function(e,t,n){"use strict";function r(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];return{}}var i=n(4),o=n(94),a=n(464);t.a={name:"project64",dependencies:[o.a,i.l],vs:a.a,getUniforms:r,deprecations:[{type:"uniform vec2",old:"projectionFP64[16]",new:"project_uViewProjectionMatrixFP64"},{type:"uniform vec2",old:"projectionScaleFP64",new:"project64_uScale"}]}},function(e,t,n){"use strict";var r=n(465),i=n(94);t.a={name:"lighting",dependencies:[i.a],vs:r.a}},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=n(0),o=n.n(i),a=n(4),s=n(144),u=n.n(s),l=n(145),c=n(272),f=n(466),h=n(64),p=n(29),d=n(65),v=n(12),g=n(146),y=n(271),m=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),_={uniforms:{},viewports:[],viewport:null,layerFilter:null,viewportChanged:!0,pickingFBO:null,useDevicePixels:!0,lastPickedInfo:{index:-1,layerId:null}},b=function(e){return e instanceof l.a?""+e:e?"invalid":"null"},E=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=n.eventManager;r(this,e),this.lastRenderedLayers=[],this.prevLayers=[],this.layers=[],this.oldContext={},this.context=Object.assign({},_,{gl:t,shaderCache:new a.h({gl:t,_cachePrograms:!0})}),this.width=100,this.height=100,this.viewDescriptors=[],this.viewDescriptorsChanged=!0,this.viewports=[],this._needsRedraw="Initial render",this._pickingRadius=0,this._eventManager=null,this._onLayerClick=null,this._onLayerHover=null,this._onClick=this._onClick.bind(this),this._onPointerMove=this._onPointerMove.bind(this),this._onPointerLeave=this._onPointerLeave.bind(this),this._pickAndCallback=this._pickAndCallback.bind(this),this._initSeer=this._initSeer.bind(this),this._editSeer=this._editSeer.bind(this),Object(y.e)(this._initSeer),Object(y.c)(this._editSeer),Object.seal(this),i&&this._initEventHandling(i),this.setViewports([new d.a({width:1,height:1,latitude:0,longitude:0,zoom:1})])}return m(e,[{key:"finalize",value:function(){u.a.removeListener(this._initSeer),u.a.removeListener(this._editSeer)}},{key:"needsRedraw",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.clearRedrawFlags,n=void 0===t||t;return this._checkIfNeedsRedraw(n)}},{key:"setNeedsRedraw",value:function(e){this._needsRedraw=this._needsRedraw||e}},{key:"getLayers",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.layerIds,n=void 0===t?null:t;return n?this.layers.filter(function(e){return n.find(function(t){return 0===e.id.indexOf(t)})}):this.layers}},{key:"getViewports",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.width,n=e.height;return(t!==this.width||n!==this.height||this.viewDescriptorsChanged)&&(this._rebuildViewportsFromViews({viewDescriptors:this.viewDescriptors,width:t,height:n}),this.width=t,this.height=n),this.viewports}},{key:"setParameters",value:function(e){"eventManager"in e&&this._initEventHandling(e.eventManager),("pickingRadius"in e||"onLayerClick"in e||"onLayerHover"in e)&&this._setEventHandlingParameters(e),"layers"in e&&this.setLayers(e.layers),"viewports"in e&&this.setViewports(e.viewports),"layerFilter"in e&&(this.context.layerFilter=e.layerFilter,this.context.layerFilter!==e.layerFilter&&this.setNeedsRedraw("layerFilter changed")),"drawPickingColors"in e&&this.context.drawPickingColors!==e.drawPickingColors&&this.setNeedsRedraw("drawPickingColors changed"),Object.assign(this.context,e)}},{key:"setViewports",value:function(e){var t=Object(g.c)(e,{filter:Boolean}).map(function(e){return e instanceof p.a?{viewport:e}:e});this.viewDescriptorsChanged=this.viewDescriptorsChanged||this._diffViews(t,this.viewDescriptors),this.viewDescriptorsChanged&&(this.viewDescriptors=t,this._rebuildViewportsFromViews({viewDescriptors:this.viewDescriptors}),this.viewDescriptorsChanged=!1)}},{key:"setLayers",value:function(e){if(o()(this.context.viewport,"LayerManager.updateLayers: viewport not set"),e===this.lastRenderedLayers)return v.a.log(3,"Ignoring layer update due to layer array not changed"),this;this.lastRenderedLayers=e,e=Object(g.c)(e,{filter:Boolean});var t=!0,n=!1,r=void 0;try{for(var i,a=e[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){i.value.context=this.context}}catch(e){n=!0,r=e}finally{try{!t&&a.return&&a.return()}finally{if(n)throw r}}this.prevLayers=this.layers;var s=this._updateLayers({oldLayers:this.prevLayers,newLayers:e}),u=s.error,l=s.generatedLayers;if(this.layers=l,u)throw u;return this}},{key:"drawLayers",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.pass,n=void 0===t?"render to screen":t,r=e.redrawReason,i=void 0===r?"unknown reason":r,o=this.context,a=o.gl,s=o.useDevicePixels,u=o.drawPickingColors;Object(c.a)(a,{layers:this.layers,viewports:this.getViewports(),onViewportActive:this._activateViewport.bind(this),useDevicePixels:s,drawPickingColors:u,pass:n,layerFilter:this.context.layerFilter,redrawReason:i})}},{key:"pickObject",value:function(e){var t=e.x,n=e.y,r=e.mode,i=e.radius,o=void 0===i?0:i,a=e.layerIds,s=e.layerFilter,u=this.context,l=u.gl,c=u.useDevicePixels,h=this.getLayers({layerIds:a});return Object(f.a)(l,{x:t,y:n,radius:o,layers:h,mode:r,layerFilter:s,viewports:this.getViewports(),onViewportActive:this._activateViewport.bind(this),pickingFBO:this._getPickingBuffer(),lastPickedInfo:this.context.lastPickedInfo,useDevicePixels:c})}},{key:"pickObjects",value:function(e){var t=e.x,n=e.y,r=e.width,i=e.height,o=e.layerIds,a=e.layerFilter,s=this.context,u=s.gl,l=s.useDevicePixels,c=this.getLayers({layerIds:o});return Object(f.b)(u,{x:t,y:n,width:r,height:i,layers:c,layerFilter:a,mode:"pickObjects",viewport:this.context.viewport,viewports:this.getViewports(),onViewportActive:this._activateViewport.bind(this),pickingFBO:this._getPickingBuffer(),useDevicePixels:l})}},{key:"updateLayers",value:function(e){var t=e.newLayers;v.a.deprecated("updateLayers","setLayers"),this.setLayers(t)}},{key:"setViewport",value:function(e){return v.a.deprecated("setViewport","setViewports"),this.setViewports([e]),this}},{key:"_checkIfNeedsRedraw",value:function(e){var t=this._needsRedraw;e&&(this._needsRedraw=!1);var n=!0,r=!1,i=void 0;try{for(var o,a=this.layers[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value,u=s.getNeedsRedraw({clearRedrawFlags:e});t=t||u}}catch(e){r=!0,i=e}finally{try{!n&&a.return&&a.return()}finally{if(r)throw i}}return t}},{key:"_rebuildViewportsFromViews",value:function(e){var t=this,n=e.viewDescriptors,r=e.width,i=e.height,a=n.map(function(e){return e.viewport instanceof p.a?e.viewport:t._makeViewportFromViewDescriptor({viewDescriptor:e,width:r,height:i})});this.setNeedsRedraw("Viewport(s) changed");var s=a[0];o()(s instanceof p.a,"Invalid viewport"),this.context.viewports=a,this._activateViewport(s),this.viewports=a,this.viewDescriptorsChanged=!1}},{key:"_makeViewportFromViewDescriptor",value:function(e){var t=e.viewDescriptor,n=(e.width,e.height,t.type),r=t.viewState,i=this._getViewDimensions({viewDescriptor:t});return new n(Object.assign({},t,i,r))}},{key:"_diffViews",value:function(e,t){var n=this;return e.length!==t.length||e.some(function(r,i){return n._diffView(e[i],t[i])})}},{key:"_diffView",value:function(e,t){return e.viewport?!t.viewport||!e.viewport.equals(t.viewport):e!==t}},{key:"_getViewDimensions",value:function(e){var t=e.viewDescriptor,n=(e.width,e.height,function(e,t){return e});return{x:n(t.x),y:n(t.y),width:n(t.width),height:n(t.height)}}},{key:"_initEventHandling",value:function(e){this._eventManager=e,this._eventManager.on({click:this._onClick,pointermove:this._onPointerMove,pointerleave:this._onPointerLeave})}},{key:"_setEventHandlingParameters",value:function(e){var t=e.pickingRadius,n=e.onLayerClick,r=e.onLayerHover;isNaN(t)||(this._pickingRadius=t),"undefined"!==typeof n&&(this._onLayerClick=n),"undefined"!==typeof r&&(this._onLayerHover=r),this._validateEventHandling()}},{key:"_activateViewport",value:function(e){if(Object.assign(this.oldContext,this.context),this.context.viewport=e,this.context.viewportChanged=!0,this.context.uniforms={},Object(v.a)(4,e),this.context.viewportChanged){var t=!0,n=!1,r=void 0;try{for(var i,a=this.layers[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var s=i.value;s.setChangeFlags({viewportChanged:"Viewport changed"}),this._updateLayer(s)}}catch(e){n=!0,r=e}finally{try{!t&&a.return&&a.return()}finally{if(n)throw r}}}return o()(this.context.viewport,"LayerManager: viewport not set"),this}},{key:"_getPickingBuffer",value:function(){var e=this.context.gl;return this.context.pickingFBO=this.context.pickingFBO||new a.d(e),this.context.pickingFBO.resize({width:e.canvas.width,height:e.canvas.height}),this.context.pickingFBO}},{key:"_updateLayers",value:function(e){var t=e.oldLayers,n=e.newLayers,r={},i=!0,o=!1,a=void 0;try{for(var s,u=t[Symbol.iterator]();!(i=(s=u.next()).done);i=!0){var l=s.value;r[l.id]?v.a.warn("Multiple old layers with same id "+b(l)):r[l.id]=l}}catch(e){o=!0,a=e}finally{try{!i&&u.return&&u.return()}finally{if(o)throw a}}var c=[],f=this._updateSublayersRecursively({newLayers:n,oldLayerMap:r,generatedLayers:c}),h=this._finalizeOldLayers(r);return{error:f||h,generatedLayers:c}}},{key:"_updateSublayersRecursively",value:function(e){var t=e.newLayers,n=e.oldLayerMap,r=e.generatedLayers,i=null,o=!0,a=!1,s=void 0;try{for(var u,l=t[Symbol.iterator]();!(o=(u=l.next()).done);o=!0){var c=u.value;c.context=this.context;var f=n[c.id];null===f&&v.a.warn("Multiple new layers with same id "+b(c)),n[c.id]=null;var h=null;try{f?(this._transferLayerState(f,c),this._updateLayer(c),Object(y.g)(c)):(this._initializeLayer(c),Object(y.b)(c)),r.push(c),h=c.isComposite&&c.getSubLayers()}catch(e){v.a.warn("error during matching of "+b(c),e),i=i||e}h&&this._updateSublayersRecursively({newLayers:h,oldLayerMap:n,generatedLayers:r})}}catch(e){a=!0,s=e}finally{try{!o&&l.return&&l.return()}finally{if(a)throw s}}return i}},{key:"_finalizeOldLayers",value:function(e){var t=null;for(var n in e){var r=e[n];r&&(t=t||this._finalizeLayer(r))}return t}},{key:"_initializeLayer",value:function(e){o()(!e.state),Object(v.a)(2,"initializing "+b(e));var t=null;try{e._initialize(),e.lifecycle=h.b.INITIALIZED}catch(n){v.a.warn("error while initializing "+b(e)+"\n",n),t=t||n}o()(e.state),e.state.layer=e;var n=!0,r=!1,i=void 0;try{for(var a,s=e.getModels()[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){a.value.userData.layer=e}}catch(e){r=!0,i=e}finally{try{!n&&s.return&&s.return()}finally{if(r)throw i}}return t}},{key:"_transferLayerState",value:function(e,t){t!==e?(Object(v.a)(4,"matched "+b(t),e,"->",t),t.lifecycle=h.b.MATCHED,e.lifecycle=h.b.AWAITING_GC,t._transferState(e)):(v.a.log(4,"Matching layer is unchanged "+t.id),t.lifecycle=h.b.MATCHED,t.oldProps=t.props)}},{key:"_updateLayer",value:function(e){v.a.log(4,"updating "+e+" because: "+e.printChangeFlags());var t=null;try{e._update()}catch(n){v.a.warn("error during update of "+b(e),n),t=n}return t}},{key:"_finalizeLayer",value:function(e){o()(e.state),o()(e.lifecycle!==h.b.AWAITING_FINALIZATION),e.lifecycle=h.b.AWAITING_FINALIZATION;var t=null;this.setNeedsRedraw("finalized "+b(e));try{e._finalize()}catch(n){v.a.warn("error during finalization of "+b(e),n),t=n}return e.lifecycle=h.b.FINALIZED,Object(v.a)(2,"finalizing "+b(e)),t}},{key:"_validateEventHandling",value:function(){(this.onLayerClick||this.onLayerHover)&&this.layers.length&&!this.layers.some(function(e){return e.props.pickable})&&v.a.warn("You have supplied a top-level input event handler (e.g. `onLayerClick`), but none of your layers have set the `pickable` flag.")}},{key:"_onClick",value:function(e){e.offsetCenter&&this._pickAndCallback({callback:this._onLayerClick,event:e,mode:"click"})}},{key:"_onPointerMove",value:function(e){e.isDown||this._pickAndCallback({callback:this._onLayerHover,event:e,mode:"hover"})}},{key:"_onPointerLeave",value:function(e){this.pickObject({x:-1,y:-1,radius:this._pickingRadius,mode:"hover"})}},{key:"_pickAndCallback",value:function(e){var t=e.event.offsetCenter,n=this._pickingRadius,r=this.pickObject({x:t.x,y:t.y,radius:n,mode:e.mode});if(e.callback){var i=r.find(function(e){return e.index>=0})||null;e.callback(i,r,e.event.srcEvent)}}},{key:"_initSeer",value:function(){this.layers.forEach(function(e){Object(y.b)(e),Object(y.g)(e)})}},{key:"_editSeer",value:function(e){if("edit"===e.type&&"props"===e.valuePath[0]){Object(y.f)(e.itemKey,e.valuePath.slice(1),e.value);var t=this.layers.map(function(e){return new e.constructor(e.props)});this.updateLayers({newLayers:t})}}}]),e}();t.a=E},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(){}function o(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.clamped,r=void 0===n||n;switch(e){case u.e.FLOAT:return Float32Array;case u.e.UNSIGNED_SHORT:case u.e.UNSIGNED_SHORT_5_6_5:case u.e.UNSIGNED_SHORT_4_4_4_4:case u.e.UNSIGNED_SHORT_5_5_5_1:return Uint16Array;case u.e.UNSIGNED_INT:return Uint32Array;case u.e.UNSIGNED_BYTE:return r?Uint8ClampedArray:Uint8Array;case u.e.BYTE:return Int8Array;case u.e.SHORT:return Int16Array;case u.e.INT:return Int32Array;default:throw new Error("Failed to deduce type from array")}}var a=n(268),s=n(12),u=n(4),l=n(0),c=n.n(l),f=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),h={savedMessages:null,timeStart:null,onLog:function(e){var t=e.level,n=e.message;s.a.log(t,n)},onUpdateStart:function(e){e.level,e.id,e.numInstances;h.savedMessages=[],h.timeStart=new Date},onUpdate:function(e){var t=(e.level,e.message);h.savedMessages&&h.savedMessages.push(t)},onUpdateEnd:function(e){var t=e.level,n=e.id,r=e.numInstances,i=Math.round(new Date-h.timeStart),o=i+"ms";s.a.group(t,"Updated attributes for "+r+" instances in "+n+" in "+o,{collapsed:!0});var a=!0,u=!1,l=void 0;try{for(var c,f=h.savedMessages[Symbol.iterator]();!(a=(c=f.next()).done);a=!0){var p=c.value;s.a.log(t,p)}}catch(e){u=!0,l=e}finally{try{!a&&f.return&&f.return()}finally{if(u)throw l}}s.a.groupEnd(t,"Updated attributes for "+r+" instances in "+n+" in "+o),h.savedMessages=null}},p=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.id,i=void 0===n?"attribute-manager":n;r(this,e),this.id=i,this.attributes={},this.updateTriggers={},this.accessors={},this.allocedInstances=-1,this.needsRedraw=!0,this.userData={},this.stats=new a.a({id:"attr"}),Object.seal(this)}return f(e,null,[{key:"setDefaultLogFunctions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.onLog,n=e.onUpdateStart,r=e.onUpdate,o=e.onUpdateEnd;void 0!==t&&(h.onLog=t||i),void 0!==n&&(h.onUpdateStart=n||i),void 0!==r&&(h.onUpdate=r||i),void 0!==o&&(h.onUpdateEnd=o||i)}}]),f(e,[{key:"add",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._add(e,t)}},{key:"remove",value:function(e){for(var t=0;t<e.length;t++){var n=e[t];void 0!==this.attributes[n]&&delete this.attributes[n]}}},{key:"invalidate",value:function(e){var t=this._invalidateTrigger(e);h.onLog({level:2,message:"invalidated attributes "+t+" ("+e+") for "+this.id,id:this.identifier})}},{key:"invalidateAll",value:function(){for(var e in this.attributes)this.attributes[e].needsUpdate=!0;h.onLog({level:2,message:"invalidated all attributes for "+this.id,id:this.identifier})}},{key:"_invalidateTrigger",value:function(e){var t=this.attributes,n=this.updateTriggers,r=n[e];if(r)r.forEach(function(e){var n=t[e];n&&(n.needsUpdate=!0)});else{var i="invalidating non-existent trigger "+e+" for "+this.id+"\n";i+="Valid triggers: "+Object.keys(t).join(", "),s.a.warn(i,r)}return r}},{key:"update",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.data,n=e.numInstances,r=e.props,i=void 0===r?{}:r,o=e.buffers,a=void 0===o?{}:o,s=e.context,u=void 0===s?{}:s,l=e.ignoreUnknownAttributes,c=void 0!==l&&l;this._checkExternalBuffers({buffers:a,ignoreUnknownAttributes:c}),this._setExternalBuffers(a),this._analyzeBuffers({numInstances:n})&&(h.onUpdateStart({level:1,id:this.id,numInstances:n}),this.stats.timeStart(),this._updateBuffers({numInstances:n,data:t,props:i,context:u}),this.stats.timeEnd(),h.onUpdateEnd({level:1,id:this.id,numInstances:n}))}},{key:"getAttributes",value:function(){return this.attributes}},{key:"getChangedAttributes",value:function(e){var t=e.clearChangedFlags,n=void 0!==t&&t,r=this.attributes,i={};for(var o in r){var a=r[o];a.changed&&(a.changed=a.changed&&!n,i[o]=a)}return i}},{key:"getNeedsRedraw",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.clearRedrawFlags,n=void 0!==t&&t,r=this.needsRedraw;return this.needsRedraw=this.needsRedraw&&!n,r&&this.id}},{key:"setNeedsRedraw",value:function(){!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this.needsRedraw=!0,this}},{key:"addInstanced",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._add(e,t,{instanced:1})}},{key:"getAccessors",value:function(){return this.updateTriggers}},{key:"_add",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r={};for(var i in e){i in t&&(e[i]=Object.assign({},e[i],t[i]));var o=e[i],a=o.isGeneric||!1,s=o.isIndexed||o.elements,u=o.elements&&1||o.size,l=o.value||null,c=Object.assign({target:void 0,userData:{}},o,{isExternalBuffer:!1,needsAlloc:!1,needsUpdate:!1,changed:!1,isGeneric:a,isIndexed:s,size:u,value:l},n);Object.seal(c),this._validateAttributeDefinition(i,c),r[i]=c}Object.assign(this.attributes,r),this._mapUpdateTriggersToAttributes()}},{key:"_mapUpdateTriggersToAttributes",value:function(){var e=this,t={};for(var n in this.attributes)!function(n){var r=e.attributes[n],i=r.accessor;t[n]=[n],"string"===typeof i&&(i=[i]),Array.isArray(i)&&i.forEach(function(e){t[e]||(t[e]=[]),t[e].push(n)})}(n);this.updateTriggers=t}},{key:"_validateAttributeDefinition",value:function(e,t){if(c()(t.size>=1&&t.size<=4,"Attribute definition for "+e+" invalid size"),!(t.noAlloc||"function"===typeof t.update||"string"===typeof t.accessor))throw new Error("Attribute "+e+" missing update or accessor")}},{key:"_checkExternalBuffers",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.buffers,n=void 0===t?{}:t,r=e.ignoreUnknownAttributes,i=void 0!==r&&r,o=this.attributes;for(var a in n){if(!o[a]&&!i)throw new Error("Unknown attribute prop "+a)}}},{key:"_setExternalBuffers",value:function(e){var t=this.attributes,n=this.numInstances;for(var r in t){var i=t[r],a=e[r];if(i.isExternalBuffer=!1,a){var s=o(i.type||u.e.FLOAT);if(!(a instanceof s))throw new Error("Attribute "+r+" must be of type "+s.name);if(i.auto&&a.length<=n*i.size)throw new Error("Attribute prop array must match length and size");i.isExternalBuffer=!0,i.needsUpdate=!1,i.value!==a&&(i.value=a,i.changed=!0,this.needsRedraw=!0)}}}},{key:"_analyzeBuffers",value:function(e){var t=e.numInstances,n=this.attributes;c()(void 0!==t,"numInstances not defined");var r=!1;for(var i in n){var o=n[i];if(!o.isExternalBuffer){(null===o.value||o.value.length/o.size<t)&&(o.update||o.accessor)&&(o.needsAlloc=!0,r=!0),o.needsUpdate&&(r=!0)}}return r}},{key:"_updateBuffers",value:function(e){var t=e.numInstances,n=e.data,r=e.props,i=e.context,a=this.attributes,s=Math.max(t,1);for(var l in a){var c=a[l];if(c.needsAlloc){var f=o(c.type||u.e.FLOAT);c.value=new f(c.size*s),h.onUpdate({level:2,message:l+" allocated "+s,id:this.id}),c.needsAlloc=!1,c.needsUpdate=!0}}for(var p in a){var d=a[p];d.needsUpdate&&this._updateBuffer({attribute:d,attributeName:p,numInstances:t,data:n,props:r,context:i})}this.allocedInstances=s}},{key:"_updateBuffer",value:function(e){var t=e.attribute,n=e.attributeName,r=e.numInstances,i=e.data,o=e.props,a=e.context,s=t.update,u=t.accessor,l=new Date;s?(s.call(a,t,{data:i,props:o,numInstances:r}),this._checkAttributeArray(t,n)):u?(this._updateBufferViaStandardAccessor({attribute:t,data:i,props:o}),this._checkAttributeArray(t,n)):h.onUpdate({level:2,message:n+" missing update function",id:this.id});var c=Math.round(new Date-l),f=c+"ms";h.onUpdate({level:2,message:n+" updated "+r+" "+f,id:this.id}),t.needsUpdate=!1,t.changed=!0,this.needsRedraw=!0}},{key:"_updateBufferViaStandardAccessor",value:function(e){var t=e.attribute,n=e.data,r=e.props,i=t.accessor,o=t.value,a=t.size,s=r[i];c()("function"===typeof s,'accessor "'+i+'" is not a function');var u=t.defaultValue,l=void 0===u?[0,0,0,0]:u;l=Array.isArray(l)?l:[l];var f=0,h=!0,p=!1,d=void 0;try{for(var v,g=n[Symbol.iterator]();!(h=(v=g.next()).done);h=!0){var y=v.value,m=s(y);switch(m=Array.isArray(m)?m:[m],a){case 4:o[f+3]=Number.isFinite(m[3])?m[3]:l[3];case 3:o[f+2]=Number.isFinite(m[2])?m[2]:l[2];case 2:o[f+1]=Number.isFinite(m[1])?m[1]:l[1];case 1:o[f+0]=Number.isFinite(m[0])?m[0]:l[0]}f+=a}}catch(e){p=!0,d=e}finally{try{!h&&g.return&&g.return()}finally{if(p)throw d}}}},{key:"_checkAttributeArray",value:function(e,t){var n=e.value;if(n&&n.length>=4){if(!(Number.isFinite(n[0])&&Number.isFinite(n[1])&&Number.isFinite(n[2])&&Number.isFinite(n[3])))throw new Error("Illegal attribute generated for "+t)}}}]),e}();t.a=p},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e){return e<10?e.toFixed(2)+"ms":e<100?e.toFixed(1)+"ms":e<1e3?e.toFixed(0)+"ms":(e/1e3).toFixed(2)+"s"}var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(){function e(t){var n=t.id;r(this,e),this.id=n,this.time=0,this.total=0,this.average=0,this.count=0,this._time=0}return o(e,[{key:"timeStart",value:function(){this._time=this.timestampMs()}},{key:"timeEnd",value:function(){this.time=this.timestampMs()-this._time,this.total+=this.time,this.count++,this.average=this.total/this.count}},{key:"timestampMs",value:function(){return"undefined"!==typeof window&&window.performance?window.performance.now():Date.now()}},{key:"getTimeString",value:function(){return this.id+":"+i(this.time)+"("+this.count+")"}}]),e}();t.a=a},function(e,t,n){"use strict";function r(e,t){var n=i({newProps:e,oldProps:t,ignoreProps:{data:null,updateTriggers:null}}),r=o(e,t),s=!1;return r||(s=a(e,t)),{dataChanged:r,propsChanged:n,updateTriggersChanged:s}}function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.newProps,n=e.oldProps,r=e.ignoreProps,i=void 0===r?{}:r,o=e.shallowCompareProps,a=void 0===o?{}:o,s=e.triggerName,u=void 0===s?"props":s;if(p()(void 0!==n&&void 0!==t,"compareProps args"),n===t)return null;if("object"!==("undefined"===typeof t?"undefined":d(t))||null===t)return u+" changed shallowly";if("object"!==("undefined"===typeof n?"undefined":d(n))||null===n)return u+" changed shallowly";for(var l in n)if(!(l in i)){if(!t.hasOwnProperty(l))return u+"."+l+" dropped: "+n[l]+" -> undefined";var c=t[l]&&n[l]&&t[l].equals;if(c&&!c.call(t[l],n[l]))return u+"."+l+" changed deeply: "+n[l]+" -> "+t[l];if(l in a){var f=d(t[l]);"function"===f&&"function"===typeof n[l]&&(c=!0)}if(!c&&n[l]!==t[l])return u+"."+l+" changed shallowly: "+n[l]+" -> "+t[l]}for(var h in t)if(!(h in i)&&!n.hasOwnProperty(h))return u+"."+h+" added: undefined -> "+t[h];return null}function o(e,t){if(null===t)return"oldProps is null, initial diff";var n=e.dataComparator;if(n){if(!n(e.data,t.data))return"Data comparator detected a change"}else if(e.data!==t.data)return"A new data container was supplied";return null}function a(e,t){if(null===t)return"oldProps is null, initial diff";if("all"in e.updateTriggers){if(s(t,e,"all"))return{all:!0}}var n={},r=!1;for(var i in e.updateTriggers)if("all"!==i){var o=s(t,e,i);o&&(n[i]=!0,r=n)}return r}function s(e,t,n){var r=e.updateTriggers[n]||{};return i({oldProps:t.updateTriggers[n]||{},newProps:r,triggerName:n})}function u(e,t){return Object.prototype.hasOwnProperty.call(e,t)&&e[t]}function l(e){var t=u(e.constructor,"mergedDefaultProps");return t||c(e)}function c(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"layerName",n=e.constructor,r=u(n,t);r||f.a.once(0,e.constructor.name+" does not specify a "+t);for(var i={id:r||e.constructor.name};e;){var o=u(e.constructor,"defaultProps");Object.freeze(o),o&&(i=Object.assign({},o,i)),e=Object.getPrototypeOf(e)}return Object.freeze(i),n.mergedDefaultProps=i,p()(c),i}t.b=r,t.a=i,t.c=l;var f=n(12),h=n(0),p=n.n(h),d="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e}},function(e,t,n){"use strict";function r(e){if(!o(e))throw new Error(s);if("function"===typeof e.count)return e.count();if(Number.isFinite(e.size))return e.size;if(Number.isFinite(e.length))return e.length;if(i(e))return Object.keys(e).length;throw new Error(u)}function i(e){return null!==e&&"object"===("undefined"===typeof e?"undefined":a(e))&&e.constructor===Object}function o(e){return null!==e&&"object"===("undefined"===typeof e?"undefined":a(e))}t.a=r;var a="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s="count(): argument not an object",u="count(): argument not a container"},function(e,t,n){"use strict";function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function i(e){var t=[{path:"objects.props",data:e.props}],n=[e.constructor.layerName];if(e.state){if(e.state.attributeManager){var r=e.state.attributeManager.getAttributes();t.push({path:"objects.attributes",data:r}),n.push(e.state.attributeManager.stats.getTimeString())}if(e.state.model){e.state.model.timerQueryEnabled=!0;var i=e.state.model.stats.lastFrameTime;i&&n.push((1e3*i).toFixed(0)+"\u03bcs")}}return t.push({path:"badges",data:n}),t}n.d(t,"f",function(){return l}),n.d(t,"a",function(){return c}),n.d(t,"c",function(){return f}),n.d(t,"e",function(){return h}),n.d(t,"b",function(){return p}),n.d(t,"g",function(){return d}),n.d(t,"d",function(){return v});var o=n(144),a=n.n(o),s=function e(t,n,r){t&&(n.length>1?e(t[n[0]],n.slice(1),r):t[n[0]]=r)},u=new Map,l=function(e,t,n){if(a.a.isReady()){u.has(e)||u.set(e,new Map);u.get(e).set(t,n)}},c=function(e){if(a.a.isReady()&&e.id){var t=u.get(e.id);t&&t.forEach(function(t,n){s(e,n,t),"data"===n[0]&&(e.data=[].concat(r(e.data)))})}},f=function(e){a.a.isReady()&&a.a.listenFor("deck.gl",e)},h=function(e){a.a.isReady()&&a.a.listenFor("init",e)},p=function(e){if(a.a.isReady()&&e){var t=[e.constructor.layerName];a.a.listItem("deck.gl",e.id,{badges:t,links:e.state&&e.state.model?["luma.gl:"+e.state.model.id]:void 0,parent:e.parentLayer?e.parentLayer.id:void 0})}},d=function(e){if(a.a.isReady()&&!a.a.throttle("deck.gl:"+e.id,1e3)){var t=i(e);a.a.multiUpdate("deck.gl",e.id,t)}},v=function(e){a.a.isReady()&&e&&a.a.deleteItem("deck.gl",e)}},function(e,t,n){"use strict";function r(e,t){var n=(t.useDevicePixels,e.drawingBufferWidth),r=e.drawingBufferHeight;Object(f.r)(e,{viewport:[0,0,n,r]},function(){e.clear(f.e.COLOR_BUFFER_BIT|f.e.DEPTH_BUFFER_BIT)})}function i(e,t){var n=t.layers,i=t.viewports,o=t.onViewportActive,s=t.useDevicePixels,u=t.drawPickingColors,c=void 0!==u&&u,f=t.deviceRect,h=void 0===f?null:f,p=t.parameters,d=void 0===p?{}:p,v=t.layerFilter,g=void 0===v?null:v,y=t.pass,m=void 0===y?"draw":y,_=t.redrawReason,b=void 0===_?"":_;r(e,{useDevicePixels:s}),i.forEach(function(t,r){var i=l(t);o(i),a(e,{layers:n,viewport:i,useDevicePixels:s,drawPickingColors:c,deviceRect:h,parameters:d,layerFilter:g,pass:m,redrawReason:b})})}function o(e,t){var n=t.layers,r=t.viewports,o=t.onViewportActive,a=t.useDevicePixels,s=t.pickingFBO,u=t.deviceRect,l=u.x,c=u.y,h=u.width,p=u.height,d=t.layerFilter,v=void 0===d?null:d,g=t.redrawReason,y=void 0===g?"":g;return Object(f.r)(e,{framebuffer:s,scissorTest:!0,scissor:[l,c,h,p],clearColor:[0,0,0,0]},function(){i(e,{layers:n,viewports:r,onViewportActive:o,useDevicePixels:a,drawPickingColors:!0,layerFilter:v,pass:"picking",redrawReason:y,parameters:{blend:!0,blendFunc:[e.ONE,e.ZERO,e.CONSTANT_ALPHA,e.ZERO],blendEquation:e.FUNC_ADD,blendColor:[0,0,0,0]}})})}function a(e,t){var n=t.layers,r=t.viewport,i=t.useDevicePixels,o=t.drawPickingColors,a=void 0!==o&&o,l=(t.deviceRect,t.parameters),c=void 0===l?{}:l,h=t.layerFilter,p=t.pass,d=void 0===p?"draw":p,v=t.redrawReason,_=void 0===v?"":v,b=y({useDevicePixels:i}),E=m(e,{viewport:r,pixelRatio:b}),x={totalCount:n.length,visibleCount:0,compositeCount:0,pickableCount:0};Object(f.q)(e,c||{}),n.forEach(function(t,n){var i=t.props.visible;a&&(i=i&&t.props.pickable),i&&h&&(i=h({layer:t,viewport:r,isPicking:a})),i&&t.props.pickable&&x.pickableCount++,t.isComposite&&x.compositeCount++,i&&(t.isComposite||x.visibleCount++,s({gl:e,layer:t,layerIndex:n,drawPickingColors:a,glViewport:E,parameters:c}))}),g++,u({renderStats:x,pass:d,redrawReason:_})}function s(e){var t=(e.gl,e.layer),n=e.layerIndex,r=e.drawPickingColors,i=e.glViewport,o=e.parameters,a=Object.assign({},t.props,{viewport:t.context.viewport,pickingActive:r?1:0}),s=Object.assign({},t.context.uniforms,{layerIndex:n}),u=Object.assign({},t.props.parameters||{},o);Object.assign(u,{viewport:i}),r?Object.assign(u,{blendColor:[0,0,0,(n+1)/255]}):Object.assign(a,c(t)),t.drawLayer({moduleParameters:a,uniforms:s,parameters:u})}function u(e){var t=e.renderStats,n=e.pass,r=e.redrawReason;if(h.a.priority>=v){var i=t.totalCount,o=t.visibleCount,a=t.compositeCount,s=t.pickableCount,u=i-a,l=u-o,c="";c+="RENDER #"+g+" "+o+" (of "+i+" layers) to "+n+" because "+r+" ",h.a.priority>v&&(c+="("+l+" hidden, "+a+" composite "+s+" unpickable)"),h.a.log(v,c)}}function l(e){return e.viewport?e.viewport:e}function c(e){if(Number.isInteger(e.props.highlightedObjectIndex)){return{pickingSelectedColor:e.props.highlightedObjectIndex>=0?e.encodePickingColor(e.props.highlightedObjectIndex):null}}return null}n.d(t,"c",function(){return y}),t.a=i,t.b=o;var f=n(4),h=n(12),p=n(0),d=n.n(p),v=2,g=0,y=function(e){var t=e.useDevicePixels;return d()("boolean"===typeof t,"Invalid useDevicePixels"),t&&"undefined"!==typeof window?window.devicePixelRatio:1},m=function(e,t){var n=t.viewport,r=t.pixelRatio,i=e.canvas?e.canvas.clientHeight:100,o=n;return[o.x*r,(i-o.y-o.height)*r,o.width*r,o.height*r]}},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){return Number.isFinite(e)?e:t}var o=n(19),a=n(0),s=n.n(a),u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=o.experimental.SphericalCoordinates,c={position:[0,0,0],lookAt:[0,0,0],up:[0,0,1],rotationX:0,rotationY:0,fov:50,near:1,far:100},f=[0,0,0],h=function(){function e(t){r(this,e);var n=t.width,a=t.height,u=t.position,l=void 0===u?f:u,h=t.bearing,p=t.pitch,d=t.longitude,v=t.latitude,g=t.zoom;s()(Number.isFinite(n),"`width` must be supplied"),s()(Number.isFinite(a),"`height` must be supplied"),this._viewportProps=this._applyConstraints(Object.assign({},t,{width:n,height:a,position:new o.Vector3(i(l&&l[0],c.position[0]),i(l&&l[1],c.position[1]),i(l&&l[2],c.position[2])),bearing:i(h,c.bearing),pitch:i(p,c.pitch),longitude:d,latitude:v,zoom:g}))}return u(e,[{key:"getViewportProps",value:function(){return this._viewportProps}},{key:"getDirection",value:function(){return new l({bearing:this._viewportProps.bearing,pitch:this._viewportProps.pitch}).toVector3().normalize()}},{key:"getDirectionFromBearing",value:function(e){return new l({bearing:e,pitch:90}).toVector3().normalize()}},{key:"_applyConstraints",value:function(e){return e}}]),e}();t.a=h},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t,n){return e<t?t:e>n?n:e}function o(e,t){return Number.isFinite(e)?e:t}var a=n(96),s=n(0),u=n.n(s),l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c={lookAt:[0,0,0],rotationX:0,rotationOrbit:0,fov:50,near:1,far:100,translationX:0,translationY:0,zoom:1},f={minZoom:0,maxZoom:1/0},h=function(){function e(t){var n=t.width,i=t.height,a=t.distance,s=t.rotationX,l=t.rotationOrbit,h=t.orbitAxis,p=t.bounds,d=t.lookAt,v=t.fov,g=t.near,y=t.far,m=t.translationX,_=t.translationY,b=t.zoom,E=t.minZoom,x=t.maxZoom,w=t.startPanViewport,T=t.startPanPos,S=t.isPanning,A=t.startRotateViewport,C=t.isRotating,O=t.startZoomViewport,k=t.startZoomPos;r(this,e),u()(Number.isFinite(n),"`width` must be supplied"),u()(Number.isFinite(i),"`height` must be supplied"),u()(Number.isFinite(a),"`distance` must be supplied"),this._viewportProps=this._applyConstraints({width:n,height:i,distance:a,rotationX:o(s,c.rotationX),rotationOrbit:o(l,c.rotationOrbit),orbitAxis:h,bounds:p,lookAt:d||c.lookAt,fov:o(v,c.fov),near:o(g,c.near),far:o(y,c.far),translationX:o(m,c.translationX),translationY:o(_,c.translationY),zoom:o(b,c.zoom),minZoom:o(E,f.minZoom),maxZoom:o(x,f.maxZoom)}),this._interactiveState={startPanViewport:w,startPanPos:T,isPanning:S,startRotateViewport:A,isRotating:C,startZoomViewport:O,startZoomPos:k}}return l(e,[{key:"getViewportProps",value:function(){return this._viewportProps}},{key:"getInteractiveState",value:function(){return this._interactiveState}},{key:"panStart",value:function(e){var t=e.pos,n=new a.a(this._viewportProps);return this._getUpdatedOrbitState({startPanPos:t,startPanViewport:n})}},{key:"pan",value:function(e){var t=e.pos,n=e.startPos;if(this._interactiveState.isRotating)return this._getUpdatedOrbitState();var r=this._interactiveState.startPanPos||n;u()(r,"`startPanPos` props is required");var i=this._interactiveState.startPanViewport||new a.a(this._viewportProps),o=t[0]-r[0],s=t[1]-r[1],l=i.project(i.lookAt),c=i.unproject([l[0]-o,l[1]-s,l[2]]);return this._getUpdatedOrbitState({lookAt:c,isPanning:!0})}},{key:"panEnd",value:function(){return this._getUpdatedOrbitState({startPanViewport:null,startPanPos:null,isPanning:null})}},{key:"rotateStart",value:function(e){var t=(e.pos,new a.a(this._viewportProps));return this._getUpdatedOrbitState({startRotateViewport:t})}},{key:"rotate",value:function(e){var t=e.deltaScaleX,n=e.deltaScaleY;if(this._interactiveState.isPanning)return this._getUpdatedOrbitState();var r=this._interactiveState.startRotateViewport,a=r||{},s=a.rotationX,u=a.rotationOrbit;s=o(s,this._viewportProps.rotationX),u=o(u,this._viewportProps.rotationOrbit);var l=i(s-180*n,-89.999,89.999),c=(u-180*t)%360;return this._getUpdatedOrbitState({rotationX:l,rotationOrbit:c,isRotating:!0})}},{key:"rotateEnd",value:function(){return this._getUpdatedOrbitState({startRotateViewport:null,isRotating:null})}},{key:"zoomStart",value:function(e){var t=e.pos,n=new a.a(this._viewportProps);return this._getUpdatedOrbitState({startZoomViewport:n,startZoomPos:t})}},{key:"zoom",value:function(e){var t=e.pos,n=e.startPos,r=e.scale,o=this._viewportProps,s=o.zoom,u=o.minZoom,l=o.maxZoom,c=o.width,f=o.height,h=this._interactiveState.startZoomPos||n||t,p=this._interactiveState.startZoomViewport||new a.a(this._viewportProps),d=i(s*r,u,l),v=t[0]-h[0],g=t[1]-h[1],y=h[0]-c/2,m=f/2-h[1],_=p.project(p.lookAt),b=_[0]-y+y*d/s+v,E=_[1]+m-m*d/s-g,x=p.unproject([b,E,_[2]]);return this._getUpdatedOrbitState({lookAt:x,zoom:d})}},{key:"zoomEnd",value:function(){return this._getUpdatedOrbitState({startZoomPos:null})}},{key:"_getUpdatedOrbitState",value:function(t){return new e(Object.assign({},this._viewportProps,this._interactiveState,t))}},{key:"_applyConstraints",value:function(e){var t=e.maxZoom,n=e.minZoom,r=e.zoom;return e.zoom=r>t?t:r,e.zoom=r<n?n:r,e}}]),e}();t.a=h},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(147),s=n(97),u=function(){function e(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=function(e){function t(e){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,s.b,e))}return o(t,e),l(t,[{key:"_onPan",value:function(e){return this.isFunctionKeyPressed(e)?this._onPanRotate(e):this._onPanMove(e)}},{key:"_onPanRotate",value:function(e){if(!this.dragRotate)return!1;var t=e.deltaX,n=e.deltaY,r=this.getCenter(e),i=u(r,2),o=i[1],a=o-n,s=this.viewportState.getViewportProps(),l=s.width,c=s.height,f=t/l,h=0;n>0?Math.abs(c-a)>5&&(h=n/(a-c)*1.2):n<0&&a>5&&(h=1-o/a),h=Math.min(1,Math.max(-1,h));var p=this.viewportState.rotate({deltaScaleX:f,deltaScaleY:h});return this.updateViewport(p)}}]),t}(a.a);t.a=c},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(){function e(t){var n=t.gl,i=t.layerManager;r(this,e),this.gl=n,this.layerManager=i,this._effects=[]}return i(e,[{key:"addEffect",value:function(e){this._effects.push(e),this._sortEffects(),e.initialize({gl:this.gl,layerManager:this.layerManager})}},{key:"removeEffect",value:function(e){var t=this._effects.indexOf(e);return t>=0&&(e.finalize({gl:this.gl,layerManager:this.layerManager}),this._effects.splice(t,1),!0)}},{key:"preDraw",value:function(){var e=!0,t=!1,n=void 0;try{for(var r,i=this._effects[Symbol.iterator]();!(e=(r=i.next()).done);e=!0){var o=r.value;o.needsRedraw&&o.preDraw({gl:this.gl,layerManager:this.layerManager})}}catch(e){t=!0,n=e}finally{try{!e&&i.return&&i.return()}finally{if(t)throw n}}}},{key:"draw",value:function(){var e=!0,t=!1,n=void 0;try{for(var r,i=this._effects[Symbol.iterator]();!(e=(r=i.next()).done);e=!0){var o=r.value;o.needsRedraw&&o.draw({gl:this.gl,layerManager:this.layerManager})}}catch(e){t=!0,n=e}finally{try{!e&&i.return&&i.return()}finally{if(t)throw n}}}},{key:"_sortEffects",value:function(){this._effects.sort(function(e,t){return e.priority>t.priority?-1:e.priority<t.priority?1:e.count-t.count})}}]),e}();t.a=o},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=n(10),o=n.n(i),a=n(62),s=(n.n(a),n(275)),u=n(97),l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c={GRABBING:"-webkit-grabbing",GRAB:"-webkit-grab",POINTER:"pointer"},f={width:o.a.number.isRequired,height:o.a.number.isRequired,longitude:o.a.number.isRequired,latitude:o.a.number.isRequired,zoom:o.a.number.isRequired,bearing:o.a.number,pitch:o.a.number,altitude:o.a.number,maxZoom:o.a.number,minZoom:o.a.number,maxPitch:o.a.number,minPitch:o.a.number,onViewportChange:o.a.func,scrollZoom:o.a.bool,dragPan:o.a.bool,dragRotate:o.a.bool,doubleClickZoom:o.a.bool,touchZoomRotate:o.a.bool,getCursor:o.a.func,controls:o.a.shape({events:o.a.arrayOf(o.a.string),handleEvent:o.a.func})},h=function(e){return e.isDragging?c.GRABBING:c.GRAB},p=Object.assign({},u.a,{onViewportChange:null,scrollZoom:!0,dragPan:!0,dragRotate:!0,doubleClickZoom:!0,touchZoomRotate:!0,getCursor:h}),d=function(){function e(t){r(this,e),t=Object.assign({},p,t),this.props=t,this.state={isDragging:!1},this.canvas=t.canvas;var n=new a.EventManager(this.canvas);this._eventManager=n,this._controls=this.props.controls||new s.a,this._controls.setOptions(Object.assign({},this.props,{onStateChange:this._onInteractiveStateChange.bind(this),eventManager:n}))}return l(e,[{key:"setProps",value:function(e){e=Object.assign({},this.props,e),this.props=e,this._controls.setOptions(e)}},{key:"finalize",value:function(){this._eventManager.destroy()}},{key:"_onInteractiveStateChange",value:function(e){var t=e.isDragging,n=void 0!==t&&t;if(n!==this.state.isDragging){this.state.isDragging=n;var r=this.props.getCursor;this.canvas.style.cursor=r(this.state)}}}]),e}();t.a=d,d.displayName="MapController",d.propTypes=f,d.defaultProps=p},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=n(10),o=n.n(i),a=n(96),s=n(274),u=n(147),l=n(62),c=(n.n(l),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()),f={GRABBING:"-webkit-grabbing",GRAB:"-webkit-grab",POINTER:"pointer"},h={lookAt:o.a.arrayOf(o.a.number),distance:o.a.number,rotationX:o.a.number,rotationY:o.a.number,translationX:o.a.number,translationY:o.a.number,zoom:o.a.number,minZoom:o.a.number,maxZoom:o.a.number,fov:o.a.number,near:o.a.number,far:o.a.number,width:o.a.number.isRequired,height:o.a.number.isRequired,bounds:o.a.object,onViewportChange:o.a.func.isRequired,getCursor:o.a.func,orbitControls:o.a.object},p=function(e){return e.isDragging?f.GRABBING:f.GRAB},d={lookAt:[0,0,0],rotationX:0,rotationY:0,translationX:0,translationY:0,distance:10,zoom:1,minZoom:0,maxZoom:1/0,fov:50,near:1,far:1e3,getCursor:p},v=function(){function e(t){r(this,e),t=Object.assign({},d,t),this.props=t,this.state={isDragging:!1},this.canvas=t.canvas;var n=new l.EventManager(this.canvas);this._eventManager=n,this._controls=t.orbitControls||new u.a(s.a),this._controls.setOptions(Object.assign({},this.props,{onStateChange:this._onInteractiveStateChange.bind(this),eventManager:n}))}return c(e,null,[{key:"getViewport",value:function(e){return new a.a(e)}}]),c(e,[{key:"setProps",value:function(e){e=Object.assign({},this.props,e),this.props=e,this._controls.setOptions(e)}},{key:"finalize",value:function(){this._eventManager.destroy()}},{key:"_onInteractiveStateChange",value:function(e){var t=e.isDragging,n=void 0!==t&&t;if(n!==this.state.isDragging){this.state.isDragging=n;var r=this.props.getCursor;this.canvas.style.cursor=r(this.state)}}}]),e}();t.a=v,v.displayName="OrbitController",v.propTypes=h,v.defaultProps=d},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n.d(t,"a",function(){return c});var i=n(280),o=n(98),a=n(0),s=n.n(a),u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=function(){},c={BREAK:1,SNAP_TO_END:2,IGNORE:3},f={transitionDuration:0,transitionEasing:function(e){return e},transitionInterpolator:new i.a,transitionInterruption:c.BREAK,onTransitionStart:l,onTransitionInterrupt:l,onTransitionEnd:l},h={animation:null,propsInTransition:null,startProps:null,endProps:null},p=function(){function e(t){r(this,e),this.props=t,this.state=h,this._onTransitionFrame=this._onTransitionFrame.bind(this)}return u(e,[{key:"getViewportInTransition",value:function(){return this.state.propsInTransition}},{key:"processViewportChange",value:function(e){var t=!1,n=this.props;if(this.props=e,this._shouldIgnoreViewportChange(n,e))return t;var r=this._isTransitionInProgress();if(this._isTransitionEnabled(e)){var i=Object.assign({},n,this.state.interruption===c.SNAP_TO_END?this.state.endProps:this.state.propsInTransition||n);r&&n.onTransitionInterrupt(),e.onTransitionStart(),this._triggerTransition(i,e),t=!0}else r&&(n.onTransitionInterrupt(),this._endTransition());return t}},{key:"_isTransitionInProgress",value:function(){return this.state.propsInTransition}},{key:"_isTransitionEnabled",value:function(e){return e.transitionDuration>0&&e.transitionInterpolator}},{key:"_isUpdateDueToCurrentTransition",value:function(e){return!!this.state.propsInTransition&&this.state.interpolator.arePropsEqual(e,this.state.propsInTransition)}},{key:"_shouldIgnoreViewportChange",value:function(e,t){return this._isTransitionInProgress()?this.state.interruption===c.IGNORE||this._isUpdateDueToCurrentTransition(t):!this._isTransitionEnabled(t)||t.transitionInterpolator.arePropsEqual(e,t)}},{key:"_triggerTransition",value:function(e,t){s()(this._isTransitionEnabled(t),"Transition is not enabled"),cancelAnimationFrame(this.state.animation);var n=t.transitionInterpolator.initializeProps(e,t);this.state={duration:t.transitionDuration,easing:t.transitionEasing,interpolator:t.transitionInterpolator,interruption:t.transitionInterruption,startTime:Date.now(),startProps:n.start,endProps:n.end,animation:null,propsInTransition:{}},this._onTransitionFrame()}},{key:"_onTransitionFrame",value:function(){this.state.animation=requestAnimationFrame(this._onTransitionFrame),this._updateViewport()}},{key:"_endTransition",value:function(){cancelAnimationFrame(this.state.animation),this.state=h}},{key:"_updateViewport",value:function(){var e=Date.now(),t=this.state,n=t.startTime,r=t.duration,i=t.easing,a=t.interpolator,s=t.startProps,u=t.endProps,l=!1,c=(e-n)/r;c>=1&&(c=1,l=!0),c=i(c);var f=a.interpolateProps(s,u,c);this.state.propsInTransition=Object(o.a)(Object.assign({},this.props,f)),this.props.onViewportChange&&this.props.onViewportChange(this.state.propsInTransition,{inTransition:!0}),l&&(this._endTransition(),this.props.onTransitionEnd())}}]),e}();t.b=p,p.defaultProps=f},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(281),s=n(98),u=n(0),l=n.n(u),c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),f=["longitude","latitude","zoom","bearing","pitch"],h=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f;r(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.propNames=e,n}return o(t,e),c(t,[{key:"initializeProps",value:function(e,t){var n={},r={},i=!0,o=!1,a=void 0;try{for(var u,c=this.propNames[Symbol.iterator]();!(i=(u=c.next()).done);i=!0){var f=u.value,h=e[f],p=t[f];l()(Object(s.c)(h)&&Object(s.c)(p),f+" must be supplied for transition"),n[f]=h,r[f]=Object(s.b)(f,h,p)}}catch(e){o=!0,a=e}finally{try{!i&&c.return&&c.return()}finally{if(o)throw a}}return{start:n,end:r}}},{key:"interpolateProps",value:function(e,t,n){var r={},i=!0,o=!1,a=void 0;try{for(var u,l=this.propNames[Symbol.iterator]();!(i=(u=l.next()).done);i=!0){var c=u.value;r[c]=Object(s.d)(e[c],t[c],n)}}catch(e){o=!0,a=e}finally{try{!i&&l.return&&l.return()}finally{if(o)throw a}}return r}}]),t}(a.a);t.a=h},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=n(19),o=n(0),a=n.n(o),s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=function(){function e(){r(this,e)}return s(e,[{key:"arePropsEqual",value:function(e,t){var n=!0,r=!1,o=void 0;try{for(var a,s=(this.propNames||[])[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var u=a.value;if(!Object(i.equals)(e[u],t[u]))return!1}}catch(e){r=!0,o=e}finally{try{!n&&s.return&&s.return()}finally{if(r)throw o}}return!0}},{key:"initializeProps",value:function(e,t){return{start:e,end:t}}},{key:"interpolateProps",value:function(e,t,n){a()(!1,"interpolateProps is not implemented")}}]),e}();t.a=u},function(e,t,n){"use strict";function r(e,t,n){return(n-e[0])/(e[1]-e[0])*(t[1]-t[0])+t[0]}function i(e,t,n){var r=(e[1]-e[0])/t.length,i=Math.floor((n-e[0])/r);return t[Math.max(Math.min(i,t.length-1),0)]}function o(e,t){return function(n){var r=(e[1]-e[0])/t.length,i=Math.floor((n-e[0])/r),o=Math.max(Math.min(i,t.length-1),0);return t[o]}}function a(e,t){return function(n){return(n-e[0])/(e[1]-e[0])*(t[1]-t[0])+t[0]}}function s(e,t){var n=u(e,2),r=n[0],i=n[1];return Math.min(i,Math.max(r,t))}t.d=r,t.e=i,t.c=o,t.b=a,t.a=s;var u=function(){function e(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}()},function(e,t,n){"use strict";function r(e){return[Math.fround(e),e-Math.fround(e)]}function i(e){return e-Math.fround(e)}function o(e){if(e.fp64){if(e.coordinateSystem===s.a.LNGLAT)return!0;a.a.once(0,"64-bit mode only works with coordinateSystem set to\n      COORDINATE_SYSTEM.LNGLAT. Rendering in 32-bit mode instead")}return!1}t.c=r,t.b=i,t.a=o;var a=n(12),s=n(64)},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(3),s=n(4),u=n(495),l=n(496),c=n(497),f=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),h=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},p=a.d.fp64LowPart,d=a.d.enable64bitSupport,v=[0,0,0,255],g={radiusScale:1,radiusMinPixels:0,radiusMaxPixels:Number.MAX_SAFE_INTEGER,strokeWidth:1,outline:!1,fp64:!1,getPosition:function(e){return e.position},getRadius:function(e){return e.radius||1},getColor:function(e){return e.color||v}},y=function(e){function t(){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),f(t,[{key:"getShaders",value:function(e){var t=this.context.shaderCache;return d(this.props)?{vs:l.a,fs:c.a,modules:["project64","picking"],shaderCache:t}:{vs:u.a,fs:c.a,modules:["picking"],shaderCache:t}}},{key:"initializeState",value:function(){this.state.attributeManager.addInstanced({instancePositions:{size:3,accessor:"getPosition",update:this.calculateInstancePositions},instanceRadius:{size:1,accessor:"getRadius",defaultValue:1,update:this.calculateInstanceRadius},instanceColors:{size:4,type:s.e.UNSIGNED_BYTE,accessor:"getColor",update:this.calculateInstanceColors}})}},{key:"updateAttribute",value:function(e){var t=e.props,n=e.oldProps;e.changeFlags;if(t.fp64!==n.fp64){var r=this.state.attributeManager;r.invalidateAll(),t.fp64&&t.coordinateSystem===a.a.LNGLAT?r.addInstanced({instancePositions64xyLow:{size:2,accessor:"getPosition",update:this.calculateInstancePositions64xyLow}}):r.remove(["instancePositions64xyLow"])}}},{key:"updateState",value:function(e){var n=e.props,r=e.oldProps,i=e.changeFlags;if(h(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateState",this).call(this,{props:n,oldProps:r,changeFlags:i}),n.fp64!==r.fp64){var o=this.context.gl;this.setState({model:this._getModel(o)})}this.updateAttribute({props:n,oldProps:r,changeFlags:i})}},{key:"draw",value:function(e){var t=e.uniforms,n=this.props,r=n.radiusScale,i=n.radiusMinPixels,o=n.radiusMaxPixels,a=n.outline,s=n.strokeWidth;this.state.model.render(Object.assign({},t,{outline:a?1:0,strokeWidth:s,radiusScale:r,radiusMinPixels:i,radiusMaxPixels:o}))}},{key:"_getModel",value:function(e){var t=[-1,-1,0,-1,1,0,1,1,0,1,-1,0];return new s.g(e,Object.assign(this.getShaders(),{id:this.props.id,geometry:new s.f({drawMode:s.e.TRIANGLE_FAN,attributes:{positions:new Float32Array(t)}}),isInstanced:!0,shaderCache:this.context.shaderCache}))}},{key:"calculateInstancePositions",value:function(e){var t=this.props,n=t.data,r=t.getPosition,i=e.value,o=0,a=!0,s=!1,u=void 0;try{for(var l,c=n[Symbol.iterator]();!(a=(l=c.next()).done);a=!0){var f=l.value,h=r(f);i[o++]=h[0],i[o++]=h[1],i[o++]=h[2]||0}}catch(e){s=!0,u=e}finally{try{!a&&c.return&&c.return()}finally{if(s)throw u}}}},{key:"calculateInstancePositions64xyLow",value:function(e){var t=this.props,n=t.data,r=t.getPosition,i=e.value,o=0,a=!0,s=!1,u=void 0;try{for(var l,c=n[Symbol.iterator]();!(a=(l=c.next()).done);a=!0){var f=l.value,h=r(f);i[o++]=p(h[0]),i[o++]=p(h[1])}}catch(e){s=!0,u=e}finally{try{!a&&c.return&&c.return()}finally{if(s)throw u}}}},{key:"calculateInstanceRadius",value:function(e){var t=this.props,n=t.data,r=t.getRadius,i=e.value,o=0,a=!0,s=!1,u=void 0;try{for(var l,c=n[Symbol.iterator]();!(a=(l=c.next()).done);a=!0){var f=l.value,h=r(f);i[o++]=isNaN(h)?1:h}}catch(e){s=!0,u=e}finally{try{!a&&c.return&&c.return()}finally{if(s)throw u}}}},{key:"calculateInstanceColors",value:function(e){var t=this.props,n=t.data,r=t.getColor,i=e.value,o=0,a=!0,s=!1,u=void 0;try{for(var l,c=n[Symbol.iterator]();!(a=(l=c.next()).done);a=!0){var f=l.value,h=r(f)||v;i[o++]=h[0],i[o++]=h[1],i[o++]=h[2],i[o++]=isNaN(h[3])?255:h[3]}}catch(e){s=!0,u=e}finally{try{!a&&c.return&&c.return()}finally{if(s)throw u}}}}]),t}(a.c);t.a=y,y.layerName="ScatterplotLayer",y.defaultProps=g},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(3),s=n(4),u=n(502),l=n(503),c=n(504),f=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),h=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},p=a.d.fp64LowPart,d=a.d.enable64bitSupport,v=[255,0,255,255],g={cellSize:1e3,coverage:1,elevationScale:1,extruded:!0,fp64:!1,getPosition:function(e){return e.position},getElevation:function(e){return e.elevation},getColor:function(e){return e.color},lightSettings:{lightsPosition:[-122.45,37.65,8e3,-122.45,37.2,1e3],ambientRatio:.4,diffuseRatio:.6,specularRatio:.8,lightsStrength:[1,0,.8,0],numberOfLights:2}},y=function(e){function t(){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),f(t,[{key:"getShaders",value:function(){var e=this.context.shaderCache;return d(this.props)?{vs:l.a,fs:c.a,modules:["project64","lighting","picking"],shaderCache:e}:{vs:u.a,fs:c.a,modules:["lighting","picking"],shaderCache:e}}},{key:"initializeState",value:function(){this.state.attributeManager.addInstanced({instancePositions:{size:4,accessor:["getPosition","getElevation"],update:this.calculateInstancePositions},instanceColors:{size:4,type:s.e.UNSIGNED_BYTE,accessor:"getColor",update:this.calculateInstanceColors}})}},{key:"updateAttribute",value:function(e){var t=e.props,n=e.oldProps;e.changeFlags;if(t.fp64!==n.fp64){var r=this.state.attributeManager;r.invalidateAll(),t.fp64&&t.coordinateSystem===a.a.LNGLAT?r.addInstanced({instancePositions64xyLow:{size:2,accessor:"getPosition",update:this.calculateInstancePositions64xyLow}}):r.remove(["instancePositions64xyLow"])}}},{key:"updateState",value:function(e){var n=e.props,r=e.oldProps,i=e.changeFlags;if(h(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateState",this).call(this,{props:n,oldProps:r,changeFlags:i}),n.fp64!==r.fp64){var o=this.context.gl;this.setState({model:this._getModel(o)})}this.updateAttribute({props:n,oldProps:r,changeFlags:i}),this.updateUniforms()}},{key:"_getModel",value:function(e){return new s.g(e,Object.assign({},this.getShaders(),{id:this.props.id,geometry:new s.b,isInstanced:!0,shaderCache:this.context.shaderCache}))}},{key:"updateUniforms",value:function(){var e=this.props,t=e.opacity,n=e.extruded,r=e.elevationScale,i=e.coverage,o=e.lightSettings;this.state.model.setUniforms(Object.assign({},{extruded:n,elevationScale:r,opacity:t,coverage:i},o))}},{key:"draw",value:function(e){var n=e.uniforms,r=this.context.viewport,i=r.getDistanceScales(),o=i.pixelsPerMeter;h(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"draw",this).call(this,{uniforms:Object.assign({cellSize:this.props.cellSize*o[0]},n)})}},{key:"calculateInstancePositions",value:function(e){var t=this.props,n=t.data,r=t.getPosition,i=t.getElevation,o=e.value,a=e.size,s=0,u=!0,l=!1,c=void 0;try{for(var f,h=n[Symbol.iterator]();!(u=(f=h.next()).done);u=!0){var p=f.value,d=r(p),v=i(p)||0;o[s+0]=d[0],o[s+1]=d[1],o[s+2]=0,o[s+3]=v,s+=a}}catch(e){l=!0,c=e}finally{try{!u&&h.return&&h.return()}finally{if(l)throw c}}}},{key:"calculateInstancePositions64xyLow",value:function(e){var t=this.props,n=t.data,r=t.getPosition,i=e.value,o=0,a=!0,s=!1,u=void 0;try{for(var l,c=n[Symbol.iterator]();!(a=(l=c.next()).done);a=!0){var f=l.value,h=r(f);i[o++]=p(h[0]),i[o++]=p(h[1])}}catch(e){s=!0,u=e}finally{try{!a&&c.return&&c.return()}finally{if(s)throw u}}}},{key:"calculateInstanceColors",value:function(e){var t=this.props,n=t.data,r=t.getColor,i=e.value,o=e.size,a=0,s=!0,u=!1,l=void 0;try{for(var c,f=n[Symbol.iterator]();!(s=(c=f.next()).done);s=!0){var h=c.value,p=r(h)||v;i[a+0]=p[0],i[a+1]=p[1],i[a+2]=p[2],i[a+3]=Number.isFinite(p[3])?p[3]:v[3],a+=o}}catch(e){u=!0,l=e}finally{try{!s&&f.return&&f.return()}finally{if(u)throw l}}}}]),t}(a.c);t.a=y,y.layerName="GridCellLayer",y.defaultProps=g},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(3),s=n(4),u=n(507),l=n(508),c=n(509),f=function(){function e(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),h=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),p=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},d=a.d.log,v=a.d.fp64LowPart,g=a.d.enable64bitSupport,y=[255,0,255,255],m={hexagonVertices:null,radius:null,angle:null,coverage:1,elevationScale:1,extruded:!0,fp64:!1,getCentroid:function(e){return e.centroid},getColor:function(e){return e.color},getElevation:function(e){return e.elevation},lightSettings:{lightsPosition:[-122.45,37.75,8e3,-122,38,5e3],ambientRatio:.4,diffuseRatio:.6,specularRatio:.8,lightsStrength:[1.2,0,.8,0],numberOfLights:2}},_=function(e){function t(e){r(this,t);var n=!1;return e.hexagonVertices||e.radius&&Number.isFinite(e.angle)?e.hexagonVertices&&(!Array.isArray(e.hexagonVertices)||e.hexagonVertices.length<6)&&(d.once(0,"HexagonCellLayer: hexagonVertices needs to be an array of 6 points"),n=!0):(d.once(0,"HexagonCellLayer: Either hexagonVertices or radius and angle are needed to calculate primitive hexagon."),n=!0),n&&(d.once(0,"Now using 1000 meter as default radius, 0 as default angle"),e.radius=1e3,e.angle=0),i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return o(t,e),h(t,[{key:"getShaders",value:function(){return g(this.props)?{vs:l.a,fs:c.a,modules:["project64","lighting","picking"]}:{vs:u.a,fs:c.a,modules:["lighting","picking"]}}},{key:"initializeState",value:function(){this.state.attributeManager.addInstanced({instancePositions:{size:3,accessor:["getCentroid","getElevation"],update:this.calculateInstancePositions},instanceColors:{size:4,type:s.e.UNSIGNED_BYTE,accessor:"getColor",update:this.calculateInstanceColors}})}},{key:"updateAttribute",value:function(e){var t=e.props,n=e.oldProps;e.changeFlags;if(t.fp64!==n.fp64){var r=this.state.attributeManager;r.invalidateAll(),t.fp64&&t.coordinateSystem===a.a.LNGLAT?r.addInstanced({instancePositions64xyLow:{size:2,accessor:"getCentroid",update:this.calculateInstancePositions64xyLow}}):r.remove(["instancePositions64xyLow"])}}},{key:"updateState",value:function(e){var n=e.props,r=e.oldProps,i=e.changeFlags;if(p(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateState",this).call(this,{props:n,oldProps:r,changeFlags:i}),n.fp64!==r.fp64){var o=this.context.gl;this.setState({model:this._getModel(o)})}this.updateAttribute({props:n,oldProps:r,changeFlags:i}),this.updateUniforms()}},{key:"updateRadiusAngle",value:function(){var e=void 0,t=void 0,n=this.props.hexagonVertices;if(Array.isArray(n)&&n.length>=6){var r=this.props.hexagonVertices,i=r[0],o=r[3],a=this.projectFlat(i),s=this.projectFlat(o),u=a[0]-s[0],l=a[1]-s[1],c=Math.sqrt(u*u+l*l);e=Math.acos(u/c)*-Math.sign(l)+Math.PI/2,t=c/2}else if(this.props.radius&&Number.isFinite(this.props.angle)){var f=this.context.viewport,h=f.getDistanceScales(),p=h.pixelsPerMeter;e=this.props.angle,t=this.props.radius*p[0]}return{angle:e,radius:t}}},{key:"getCylinderGeometry",value:function(e){return new s.c({radius:e,topRadius:e,bottomRadius:e,topCap:!0,bottomCap:!0,height:1,nradial:6,nvertical:1})}},{key:"updateUniforms",value:function(){var e=this.props,t=e.opacity,n=e.elevationScale,r=e.extruded,i=e.coverage,o=e.lightSettings;this.state.model.setUniforms(Object.assign({},{extruded:r,opacity:t,coverage:i,elevationScale:n},o))}},{key:"_getModel",value:function(e){return new s.g(e,Object.assign({},this.getShaders(),{id:this.props.id,geometry:this.getCylinderGeometry(1),isInstanced:!0,shaderCache:this.context.shaderCache}))}},{key:"draw",value:function(e){var n=e.uniforms;p(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"draw",this).call(this,{uniforms:Object.assign(this.updateRadiusAngle(),n)})}},{key:"calculateInstancePositions",value:function(e){var t=this.props,n=t.data,r=t.getCentroid,i=t.getElevation,o=e.value,a=e.size,s=0,u=!0,l=!1,c=void 0;try{for(var h,p=n[Symbol.iterator]();!(u=(h=p.next()).done);u=!0){var d=h.value,v=r(d),g=f(v,2),y=g[0],m=g[1],_=i(d);o[s+0]=y,o[s+1]=m,o[s+2]=_||0,s+=a}}catch(e){l=!0,c=e}finally{try{!u&&p.return&&p.return()}finally{if(l)throw c}}}},{key:"calculateInstancePositions64xyLow",value:function(e){var t=this.props,n=t.data,r=t.getCentroid,i=e.value,o=0,a=!0,s=!1,u=void 0;try{for(var l,c=n[Symbol.iterator]();!(a=(l=c.next()).done);a=!0){var f=l.value,h=r(f);i[o++]=v(h[0]),i[o++]=v(h[1])}}catch(e){s=!0,u=e}finally{try{!a&&c.return&&c.return()}finally{if(s)throw u}}}},{key:"calculateInstanceColors",value:function(e){var t=this.props,n=t.data,r=t.getColor,i=e.value,o=e.size,a=0,s=!0,u=!1,l=void 0;try{for(var c,f=n[Symbol.iterator]();!(s=(c=f.next()).done);s=!0){var h=c.value,p=r(h)||y;i[a+0]=p[0],i[a+1]=p[1],i[a+2]=p[2],i[a+3]=Number.isFinite(p[3])?p[3]:y[3],a+=o}}catch(e){u=!0,l=e}finally{try{!s&&f.return&&f.return()}finally{if(u)throw l}}}}]),t}(a.c);t.a=_,_.layerName="HexagonCellLayer",_.defaultProps=m},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(3),s=n(4),u=n(269),l=n(517),c=n(518),f=n(519),h=n(520),p=n(521),d=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),v=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},g=a.d.enable64bitSupport,y=a.d.get,m={extruded:!1,wireframe:!1,fp64:!1,elevationScale:1,getPolygon:function(e){return y(e,"polygon")||y(e,"geometry.coordinates")},getElevation:function(e){return y(e,"elevation")||y(e,"properties.height")||0},getColor:function(e){return y(e,"color")||y(e,"properties.color")},lightSettings:{lightsPosition:[-122.45,37.75,8e3,-122,38,5e3],ambientRatio:.05,diffuseRatio:.6,specularRatio:.8,lightsStrength:[2,0,0,0],numberOfLights:2}},_=function(e){function t(){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),d(t,[{key:"getShaders",value:function(){return g(this.props)?{vs:h.a,fs:p.a,modules:["project64","lighting","picking"]}:{vs:f.a,fs:p.a,modules:["lighting","picking"]}}},{key:"initializeState",value:function(){var e=this.context.gl;this.setState({numInstances:0,IndexType:e.getExtension("OES_element_index_uint")?Uint32Array:Uint16Array});var t=this.state.attributeManager;t.add({indices:{size:1,isIndexed:!0,update:this.calculateIndices,noAlloc:!0},positions:{size:3,accessor:"getElevation",update:this.calculatePositions,noAlloc:!0},normals:{size:3,update:this.calculateNormals,noAlloc:!0},colors:{size:4,type:s.e.UNSIGNED_BYTE,accessor:"getColor",update:this.calculateColors,noAlloc:!0},pickingColors:{size:3,type:s.e.UNSIGNED_BYTE,update:this.calculatePickingColors,noAlloc:!0}})}},{key:"updateAttribute",value:function(e){var t=e.props,n=e.oldProps;e.changeFlags;if(t.fp64!==n.fp64){var r=this.state.attributeManager;r.invalidateAll(),t.fp64&&t.coordinateSystem===a.a.LNGLAT?r.add({positions64xyLow:{size:2,update:this.calculatePositionsLow}}):r.remove(["positions64xyLow"])}}},{key:"draw",value:function(e){var t=e.uniforms,n=this.props,r=n.extruded,i=n.lightSettings,o=n.elevationScale;this.state.model.render(Object.assign({},t,{extruded:r?1:0,elevationScale:o},i))}},{key:"updateState",value:function(e){var n=e.props,r=e.oldProps,i=e.changeFlags;if(v(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateState",this).call(this,{props:n,oldProps:r,changeFlags:i}),this.updateGeometry({props:n,oldProps:r,changeFlags:i})){var o=this.context.gl;this.setState({model:this._getModel(o)})}this.updateAttribute({props:n,oldProps:r,changeFlags:i})}},{key:"updateGeometry",value:function(e){var t=this,n=e.props,r=e.oldProps,i=e.changeFlags,o=n.extruded!==r.extruded||n.wireframe!==r.wireframe||n.fp64!==r.fp64||i.updateTriggersChanged&&(i.updateTriggersChanged.all||i.updateTriggersChanged.getPolygon),a=i.updateTriggersChanged&&Object(u.a)({oldProps:r.updateTriggers.getElevation||{},newProps:n.updateTriggers.getElevation||{},triggerName:"getElevation"});if(i.dataChanged||o||a){var s=n.getPolygon,f=n.extruded,h=n.wireframe,p=n.getElevation,d=n.data.map(s);this.setState({polygonTesselator:f?new c.a({polygons:d,wireframe:h,getHeight:function(e){return p(t.props.data[e])},fp64:this.props.fp64}):new l.a({polygons:d,fp64:this.props.fp64})}),this.state.attributeManager.invalidateAll()}return o}},{key:"_getModel",value:function(e){return new s.g(e,Object.assign({},this.getShaders(),{id:this.props.id,geometry:new s.f({drawMode:this.props.wireframe?s.e.LINES:s.e.TRIANGLES,attributes:{}}),vertexCount:0,isIndexed:!0,shaderCache:this.context.shaderCache}))}},{key:"calculateIndices",value:function(e){e.value=this.state.polygonTesselator.indices(),e.target=s.e.ELEMENT_ARRAY_BUFFER,this.state.model.setVertexCount(e.value.length/e.size)}},{key:"calculatePositions",value:function(e){e.value=this.state.polygonTesselator.positions().positions}},{key:"calculatePositionsLow",value:function(e){e.value=this.state.polygonTesselator.positions().positions64xyLow}},{key:"calculateNormals",value:function(e){e.value=this.state.polygonTesselator.normals()}},{key:"calculateColors",value:function(e){var t=this;e.value=this.state.polygonTesselator.colors({getColor:function(e){return t.props.getColor(t.props.data[e])}})}},{key:"calculatePickingColors",value:function(e){e.value=this.state.polygonTesselator.pickingColors()}}]),t}(a.c);t.a=_,_.layerName="SolidPolygonLayer",_.defaultProps=m},function(e,t,n){"use strict";function r(e,t,n){n=n||2;var r=t&&t.length,o=r?t[0]*n:e.length,s=i(e,0,o,n,!0),u=[];if(!s)return u;var l,c,h,p,d,v,g;if(r&&(s=f(e,t,s,n)),e.length>80*n){l=h=e[0],c=p=e[1];for(var y=n;y<o;y+=n)d=e[y],v=e[y+1],d<l&&(l=d),v<c&&(c=v),d>h&&(h=d),v>p&&(p=v);g=Math.max(h-l,p-c),g=0!==g?1/g:0}return a(s,u,n,l,c,g),u}function i(e,t,n,r,i){var o,a;if(i===R(e,t,n,r)>0)for(o=t;o<n;o+=r)a=O(o,e[o],e[o+1],a);else for(o=n-r;o>=t;o-=r)a=O(o,e[o],e[o+1],a);return a&&x(a,a.next)&&(k(a),a=a.next),a}function o(e,t){if(!e)return e;t||(t=e);var n,r=e;do{if(n=!1,r.steiner||!x(r,r.next)&&0!==E(r.prev,r,r.next))r=r.next;else{if(k(r),(r=t=r.prev)===r.next)break;n=!0}}while(n||r!==t);return t}function a(e,t,n,r,i,f,h){if(e){!h&&f&&v(e,r,i,f);for(var p,d,g=e;e.prev!==e.next;)if(p=e.prev,d=e.next,f?u(e,r,i,f):s(e))t.push(p.i/n),t.push(e.i/n),t.push(d.i/n),k(e),e=d.next,g=d.next;else if((e=d)===g){h?1===h?(e=l(e,t,n),a(e,t,n,r,i,f,2)):2===h&&c(e,t,n,r,i,f):a(o(e),t,n,r,i,f,1);break}}}function s(e){var t=e.prev,n=e,r=e.next;if(E(t,n,r)>=0)return!1;for(var i=e.next.next;i!==e.prev;){if(_(t.x,t.y,n.x,n.y,r.x,r.y,i.x,i.y)&&E(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}function u(e,t,n,r){var i=e.prev,o=e,a=e.next;if(E(i,o,a)>=0)return!1;for(var s=i.x<o.x?i.x<a.x?i.x:a.x:o.x<a.x?o.x:a.x,u=i.y<o.y?i.y<a.y?i.y:a.y:o.y<a.y?o.y:a.y,l=i.x>o.x?i.x>a.x?i.x:a.x:o.x>a.x?o.x:a.x,c=i.y>o.y?i.y>a.y?i.y:a.y:o.y>a.y?o.y:a.y,f=y(s,u,t,n,r),h=y(l,c,t,n,r),p=e.prevZ,d=e.nextZ;p&&p.z>=f&&d&&d.z<=h;){if(p!==e.prev&&p!==e.next&&_(i.x,i.y,o.x,o.y,a.x,a.y,p.x,p.y)&&E(p.prev,p,p.next)>=0)return!1;if(p=p.prevZ,d!==e.prev&&d!==e.next&&_(i.x,i.y,o.x,o.y,a.x,a.y,d.x,d.y)&&E(d.prev,d,d.next)>=0)return!1;d=d.nextZ}for(;p&&p.z>=f;){if(p!==e.prev&&p!==e.next&&_(i.x,i.y,o.x,o.y,a.x,a.y,p.x,p.y)&&E(p.prev,p,p.next)>=0)return!1;p=p.prevZ}for(;d&&d.z<=h;){if(d!==e.prev&&d!==e.next&&_(i.x,i.y,o.x,o.y,a.x,a.y,d.x,d.y)&&E(d.prev,d,d.next)>=0)return!1;d=d.nextZ}return!0}function l(e,t,n){var r=e;do{var i=r.prev,o=r.next.next;!x(i,o)&&w(i,r,r.next,o)&&S(i,o)&&S(o,i)&&(t.push(i.i/n),t.push(r.i/n),t.push(o.i/n),k(r),k(r.next),r=e=o),r=r.next}while(r!==e);return r}function c(e,t,n,r,i,s){var u=e;do{for(var l=u.next.next;l!==u.prev;){if(u.i!==l.i&&b(u,l)){var c=C(u,l);return u=o(u,u.next),c=o(c,c.next),a(u,t,n,r,i,s),void a(c,t,n,r,i,s)}l=l.next}u=u.next}while(u!==e)}function f(e,t,n,r){var a,s,u,l,c,f=[];for(a=0,s=t.length;a<s;a++)u=t[a]*r,l=a<s-1?t[a+1]*r:e.length,c=i(e,u,l,r,!1),c===c.next&&(c.steiner=!0),f.push(m(c));for(f.sort(h),a=0;a<f.length;a++)p(f[a],n),n=o(n,n.next);return n}function h(e,t){return e.x-t.x}function p(e,t){if(t=d(e,t)){var n=C(t,e);o(n,n.next)}}function d(e,t){var n,r=t,i=e.x,o=e.y,a=-1/0;do{if(o<=r.y&&o>=r.next.y&&r.next.y!==r.y){var s=r.x+(o-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(s<=i&&s>a){if(a=s,s===i){if(o===r.y)return r;if(o===r.next.y)return r.next}n=r.x<r.next.x?r:r.next}}r=r.next}while(r!==t);if(!n)return null;if(i===a)return n.prev;var u,l=n,c=n.x,f=n.y,h=1/0;for(r=n.next;r!==l;)i>=r.x&&r.x>=c&&i!==r.x&&_(o<f?i:a,o,c,f,o<f?a:i,o,r.x,r.y)&&((u=Math.abs(o-r.y)/(i-r.x))<h||u===h&&r.x>n.x)&&S(r,e)&&(n=r,h=u),r=r.next;return n}function v(e,t,n,r){var i=e;do{null===i.z&&(i.z=y(i.x,i.y,t,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==e);i.prevZ.nextZ=null,i.prevZ=null,g(i)}function g(e){var t,n,r,i,o,a,s,u,l=1;do{for(n=e,e=null,o=null,a=0;n;){for(a++,r=n,s=0,t=0;t<l&&(s++,r=r.nextZ);t++);for(u=l;s>0||u>0&&r;)0!==s&&(0===u||!r||n.z<=r.z)?(i=n,n=n.nextZ,s--):(i=r,r=r.nextZ,u--),o?o.nextZ=i:e=i,i.prevZ=o,o=i;n=r}o.nextZ=null,l*=2}while(a>1);return e}function y(e,t,n,r,i){return e=32767*(e-n)*i,t=32767*(t-r)*i,e=16711935&(e|e<<8),e=252645135&(e|e<<4),e=858993459&(e|e<<2),e=1431655765&(e|e<<1),t=16711935&(t|t<<8),t=252645135&(t|t<<4),t=858993459&(t|t<<2),t=1431655765&(t|t<<1),e|t<<1}function m(e){var t=e,n=e;do{t.x<n.x&&(n=t),t=t.next}while(t!==e);return n}function _(e,t,n,r,i,o,a,s){return(i-a)*(t-s)-(e-a)*(o-s)>=0&&(e-a)*(r-s)-(n-a)*(t-s)>=0&&(n-a)*(o-s)-(i-a)*(r-s)>=0}function b(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!T(e,t)&&S(e,t)&&S(t,e)&&A(e,t)}function E(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y)}function x(e,t){return e.x===t.x&&e.y===t.y}function w(e,t,n,r){return!!(x(e,t)&&x(n,r)||x(e,r)&&x(n,t))||E(e,t,n)>0!==E(e,t,r)>0&&E(n,r,e)>0!==E(n,r,t)>0}function T(e,t){var n=e;do{if(n.i!==e.i&&n.next.i!==e.i&&n.i!==t.i&&n.next.i!==t.i&&w(n,n.next,e,t))return!0;n=n.next}while(n!==e);return!1}function S(e,t){return E(e.prev,e,e.next)<0?E(e,t,e.next)>=0&&E(e,e.prev,t)>=0:E(e,t,e.prev)<0||E(e,e.next,t)<0}function A(e,t){var n=e,r=!1,i=(e.x+t.x)/2,o=(e.y+t.y)/2;do{n.y>o!==n.next.y>o&&n.next.y!==n.y&&i<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==e);return r}function C(e,t){var n=new P(e.i,e.x,e.y),r=new P(t.i,t.x,t.y),i=e.next,o=t.prev;return e.next=t,t.prev=e,n.next=i,i.prev=n,r.next=n,n.prev=r,o.next=r,r.prev=o,r}function O(e,t,n,r){var i=new P(e,t,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function k(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function P(e,t,n){this.i=e,this.x=t,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function R(e,t,n,r){for(var i=0,o=t,a=n-r;o<n;o+=r)i+=(e[a]-e[o])*(e[o+1]+e[a+1]),a=o;return i}e.exports=r,e.exports.default=r,r.deviation=function(e,t,n,r){var i=t&&t.length,o=i?t[0]*n:e.length,a=Math.abs(R(e,0,o,n));if(i)for(var s=0,u=t.length;s<u;s++){var l=t[s]*n,c=s<u-1?t[s+1]*n:e.length;a-=Math.abs(R(e,l,c,n))}var f=0;for(s=0;s<r.length;s+=3){var h=r[s]*n,p=r[s+1]*n,d=r[s+2]*n;f+=Math.abs((e[h]-e[d])*(e[p+1]-e[h+1])-(e[h]-e[p])*(e[d+1]-e[h+1]))}return 0===a&&0===f?0:Math.abs((f-a)/a)},r.flatten=function(e){for(var t=e[0][0].length,n={vertices:[],holes:[],dimensions:t},r=0,i=0;i<e.length;i++){for(var o=0;o<e[i].length;o++)for(var a=0;a<t;a++)n.vertices.push(e[i][o][a]);i>0&&(r+=e[i-1].length,n.holes.push(r))}return n}},function(e,t,n){"use strict";var r=n(290);n.d(t,"d",function(){return r.a});var i=n(527);n.d(t,"c",function(){return i.a});var o=n(529);n.d(t,"a",function(){return o.a});var a=n(530);n.d(t,"b",function(){return a.a});n(291)},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(5),s=n.n(a),u=n(291),l=n(3),c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),f=l.d.DeckGLJS,h=l.d.log,p=function(e){function t(e){r(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={},Object(u.a)(n),n}return o(t,e),c(t,[{key:"componentDidMount",value:function(){this.deck=new f(Object.assign({},this.props,{canvas:this.overlay}))}},{key:"componentWillReceiveProps",value:function(e){this.deck&&this.deck.setProps(e)}},{key:"componentWillUnmount",value:function(){this.deck.finalize()}},{key:"queryObject",value:function(e){return h.deprecated("queryObject","pickObject"),this.deck.pickObject(e)}},{key:"pickObject",value:function(e){var t=e.x,n=e.y,r=e.radius,i=void 0===r?0:r,o=e.layerIds,a=void 0===o?null:o;return this.deck.pickObject({x:t,y:n,radius:i,layerIds:a})}},{key:"queryVisibleObjects",value:function(e){return h.deprecated("queryVisibleObjects","pickObjects"),this.pickObjects(e)}},{key:"pickObjects",value:function(e){var t=e.x,n=e.y,r=e.width,i=void 0===r?1:r,o=e.height,a=void 0===o?1:o,s=e.layerIds,u=void 0===s?null:s;return this.deck.pickObjects({x:t,y:n,width:i,height:a,layerIds:u})}},{key:"_renderChildrenUnderViewports",value:function(){var e=this,t=this.deck?this.deck.getViewports():[],n={};return t.forEach(function(e){e.id&&(n[e.id]=e)}),s.a.Children.toArray(this.props.children).map(function(t,r){return t.props.viewportId?e._positionChild({child:t,viewportMap:n,i:r}):t})}},{key:"_positionChild",value:function(e){var t=e.child,n=e.viewportMap,r=e.i,i=t.props.viewportId,o=i&&n[i];if(!o)return null;var s=o.x,u=o.y,l=o.width,c=o.height,f=Object.assign({},t.props,{width:l,height:c});Object.assign(f,o.getMercatorParams(),{visible:o.isMapSynched()});var h=Object(a.cloneElement)(t,f),p={position:"absolute",left:s,top:u,width:l,height:c},d="viewport-child-"+i+"-"+r;return Object(a.createElement)("div",{key:d,id:d,style:p},h)}},{key:"render",value:function(){var e=this,t=this._renderChildrenUnderViewports(),n=this.props,r=n.id,i=n.width,o=n.height,s=n.style,u=Object(a.createElement)("canvas",{ref:function(t){return e.overlay=t},key:"overlay",id:r,style:Object.assign({},s,{position:"absolute",left:0,top:0,width:i,height:o})});return t.push(u),Object(a.createElement)("div",{id:"deckgl-wrapper"},t)}}]),t}(s.a.Component);t.a=p,p.propTypes=f.propTypes,p.defaultProps=f.defaultProps},function(e,t,n){"use strict";function r(e){var t=Object.getPrototypeOf(e),n=Object.getOwnPropertyNames(t),r=!0,o=!1,a=void 0;try{for(var s,u=n[Symbol.iterator]();!(r=(s=u.next()).done);r=!0)!function(){var t=s.value;"function"===typeof e[t]&&(i.find(function(e){return t===e})||(e[t]=e[t].bind(e)))}()}catch(e){o=!0,a=e}finally{try{!r&&u.return&&u.return()}finally{if(o)throw a}}}t.a=r;var i=["constructor","render","componentWillMount","componentDidMount","componentWillReceiveProps","shouldComponentUpdate","componentWillUpdate","componentDidUpdate","componentWillUnmount"]},function(e,t,n){"use strict";var r=(n(153),n(557));n.d(t,"a",function(){return r.a});var i=n(558);n.d(t,"b",function(){return i.a})},function(e,t,n){"use strict";function r(e,t){return function(n){return e(n.responseText,t)}}var i=n(151);t.a=function(e,t){return function(n,o,a){arguments.length<3&&(a=o,o=null);var s=Object(i.a)(n).mimeType(e);return s.row=function(e){return arguments.length?s.response(r(t,o=e)):o},s.row(o),a?s.get(a):s}}},function(e,t,n){n(295),e.exports=n(300)},function(e,t,n){"use strict";"undefined"===typeof Promise&&(n(296).enable(),window.Promise=n(298)),n(299),Object.assign=n(100)},function(e,t,n){"use strict";function r(){l=!1,s._47=null,s._71=null}function i(e){function t(t){(e.allRejections||a(f[t].error,e.whitelist||u))&&(f[t].displayId=c++,e.onUnhandled?(f[t].logged=!0,e.onUnhandled(f[t].displayId,f[t].error)):(f[t].logged=!0,o(f[t].displayId,f[t].error)))}function n(t){f[t].logged&&(e.onHandled?e.onHandled(f[t].displayId,f[t].error):f[t].onUnhandled||(console.warn("Promise Rejection Handled (id: "+f[t].displayId+"):"),console.warn('  This means you can ignore any previous messages of the form "Possible Unhandled Promise Rejection" with id '+f[t].displayId+".")))}e=e||{},l&&r(),l=!0;var i=0,c=0,f={};s._47=function(e){2===e._83&&f[e._56]&&(f[e._56].logged?n(e._56):clearTimeout(f[e._56].timeout),delete f[e._56])},s._71=function(e,n){0===e._75&&(e._56=i++,f[e._56]={displayId:null,error:n,timeout:setTimeout(t.bind(null,e._56),a(n,u)?100:2e3),logged:!1})}}function o(e,t){console.warn("Possible Unhandled Promise Rejection (id: "+e+"):"),((t&&(t.stack||t))+"").split("\n").forEach(function(e){console.warn("  "+e)})}function a(e,t){return t.some(function(t){return e instanceof t})}var s=n(154),u=[ReferenceError,TypeError,RangeError],l=!1;t.disable=r,t.enable=i},function(e,t,n){"use strict";(function(t){function n(e){a.length||(o(),s=!0),a[a.length]=e}function r(){for(;u<a.length;){var e=u;if(u+=1,a[e].call(),u>l){for(var t=0,n=a.length-u;t<n;t++)a[t]=a[t+u];a.length-=u,u=0}}a.length=0,u=0,s=!1}function i(e){return function(){function t(){clearTimeout(n),clearInterval(r),e()}var n=setTimeout(t,0),r=setInterval(t,50)}}e.exports=n;var o,a=[],s=!1,u=0,l=1024,c="undefined"!==typeof t?t:self,f=c.MutationObserver||c.WebKitMutationObserver;o="function"===typeof f?function(e){var t=1,n=new f(e),r=document.createTextNode("");return n.observe(r,{characterData:!0}),function(){t=-t,r.data=t}}(r):i(r),n.requestFlush=o,n.makeRequestCallFromTimer=i}).call(t,n(18))},function(e,t,n){"use strict";function r(e){var t=new i(i._44);return t._83=1,t._18=e,t}var i=n(154);e.exports=i;var o=r(!0),a=r(!1),s=r(null),u=r(void 0),l=r(0),c=r("");i.resolve=function(e){if(e instanceof i)return e;if(null===e)return s;if(void 0===e)return u;if(!0===e)return o;if(!1===e)return a;if(0===e)return l;if(""===e)return c;if("object"===typeof e||"function"===typeof e)try{var t=e.then;if("function"===typeof t)return new i(t.bind(e))}catch(e){return new i(function(t,n){n(e)})}return r(e)},i.all=function(e){var t=Array.prototype.slice.call(e);return new i(function(e,n){function r(a,s){if(s&&("object"===typeof s||"function"===typeof s)){if(s instanceof i&&s.then===i.prototype.then){for(;3===s._83;)s=s._18;return 1===s._83?r(a,s._18):(2===s._83&&n(s._18),void s.then(function(e){r(a,e)},n))}var u=s.then;if("function"===typeof u){return void new i(u.bind(s)).then(function(e){r(a,e)},n)}}t[a]=s,0===--o&&e(t)}if(0===t.length)return e([]);for(var o=t.length,a=0;a<t.length;a++)r(a,t[a])})},i.reject=function(e){return new i(function(t,n){n(e)})},i.race=function(e){return new i(function(t,n){e.forEach(function(e){i.resolve(e).then(t,n)})})},i.prototype.catch=function(e){return this.then(null,e)}},function(e,t){!function(e){"use strict";function t(e){if("string"!==typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function n(e){return"string"!==typeof e&&(e=String(e)),e}function r(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return y.iterable&&(t[Symbol.iterator]=function(){return t}),t}function i(e){this.map={},e instanceof i?e.forEach(function(e,t){this.append(t,e)},this):Array.isArray(e)?e.forEach(function(e){this.append(e[0],e[1])},this):e&&Object.getOwnPropertyNames(e).forEach(function(t){this.append(t,e[t])},this)}function o(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0}function a(e){return new Promise(function(t,n){e.onload=function(){t(e.result)},e.onerror=function(){n(e.error)}})}function s(e){var t=new FileReader,n=a(t);return t.readAsArrayBuffer(e),n}function u(e){var t=new FileReader,n=a(t);return t.readAsText(e),n}function l(e){for(var t=new Uint8Array(e),n=new Array(t.length),r=0;r<t.length;r++)n[r]=String.fromCharCode(t[r]);return n.join("")}function c(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function f(){return this.bodyUsed=!1,this._initBody=function(e){if(this._bodyInit=e,e)if("string"===typeof e)this._bodyText=e;else if(y.blob&&Blob.prototype.isPrototypeOf(e))this._bodyBlob=e;else if(y.formData&&FormData.prototype.isPrototypeOf(e))this._bodyFormData=e;else if(y.searchParams&&URLSearchParams.prototype.isPrototypeOf(e))this._bodyText=e.toString();else if(y.arrayBuffer&&y.blob&&_(e))this._bodyArrayBuffer=c(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!y.arrayBuffer||!ArrayBuffer.prototype.isPrototypeOf(e)&&!b(e))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=c(e)}else this._bodyText="";this.headers.get("content-type")||("string"===typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):y.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},y.blob&&(this.blob=function(){var e=o(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?o(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(s)}),this.text=function(){var e=o(this);if(e)return e;if(this._bodyBlob)return u(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(l(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},y.formData&&(this.formData=function(){return this.text().then(d)}),this.json=function(){return this.text().then(JSON.parse)},this}function h(e){var t=e.toUpperCase();return E.indexOf(t)>-1?t:e}function p(e,t){t=t||{};var n=t.body;if(e instanceof p){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new i(e.headers)),this.method=e.method,this.mode=e.mode,n||null==e._bodyInit||(n=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"omit",!t.headers&&this.headers||(this.headers=new i(t.headers)),this.method=h(t.method||this.method||"GET"),this.mode=t.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&n)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(n)}function d(e){var t=new FormData;return e.trim().split("&").forEach(function(e){if(e){var n=e.split("="),r=n.shift().replace(/\+/g," "),i=n.join("=").replace(/\+/g," ");t.append(decodeURIComponent(r),decodeURIComponent(i))}}),t}function v(e){var t=new i;return e.split(/\r?\n/).forEach(function(e){var n=e.split(":"),r=n.shift().trim();if(r){var i=n.join(":").trim();t.append(r,i)}}),t}function g(e,t){t||(t={}),this.type="default",this.status="status"in t?t.status:200,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in t?t.statusText:"OK",this.headers=new i(t.headers),this.url=t.url||"",this._initBody(e)}if(!e.fetch){var y={searchParams:"URLSearchParams"in e,iterable:"Symbol"in e&&"iterator"in Symbol,blob:"FileReader"in e&&"Blob"in e&&function(){try{return new Blob,!0}catch(e){return!1}}(),formData:"FormData"in e,arrayBuffer:"ArrayBuffer"in e};if(y.arrayBuffer)var m=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],_=function(e){return e&&DataView.prototype.isPrototypeOf(e)},b=ArrayBuffer.isView||function(e){return e&&m.indexOf(Object.prototype.toString.call(e))>-1};i.prototype.append=function(e,r){e=t(e),r=n(r);var i=this.map[e];this.map[e]=i?i+","+r:r},i.prototype.delete=function(e){delete this.map[t(e)]},i.prototype.get=function(e){return e=t(e),this.has(e)?this.map[e]:null},i.prototype.has=function(e){return this.map.hasOwnProperty(t(e))},i.prototype.set=function(e,r){this.map[t(e)]=n(r)},i.prototype.forEach=function(e,t){for(var n in this.map)this.map.hasOwnProperty(n)&&e.call(t,this.map[n],n,this)},i.prototype.keys=function(){var e=[];return this.forEach(function(t,n){e.push(n)}),r(e)},i.prototype.values=function(){var e=[];return this.forEach(function(t){e.push(t)}),r(e)},i.prototype.entries=function(){var e=[];return this.forEach(function(t,n){e.push([n,t])}),r(e)},y.iterable&&(i.prototype[Symbol.iterator]=i.prototype.entries);var E=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];p.prototype.clone=function(){return new p(this,{body:this._bodyInit})},f.call(p.prototype),f.call(g.prototype),g.prototype.clone=function(){return new g(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new i(this.headers),url:this.url})},g.error=function(){var e=new g(null,{status:0,statusText:""});return e.type="error",e};var x=[301,302,303,307,308];g.redirect=function(e,t){if(-1===x.indexOf(t))throw new RangeError("Invalid status code");return new g(null,{status:t,headers:{location:e}})},e.Headers=i,e.Request=p,e.Response=g,e.fetch=function(e,t){return new Promise(function(n,r){var i=new p(e,t),o=new XMLHttpRequest;o.onload=function(){var e={status:o.status,statusText:o.statusText,headers:v(o.getAllResponseHeaders()||"")};e.url="responseURL"in o?o.responseURL:e.headers.get("X-Request-URL");var t="response"in o?o.response:o.responseText;n(new g(t,e))},o.onerror=function(){r(new TypeError("Network request failed"))},o.ontimeout=function(){r(new TypeError("Network request failed"))},o.open(i.method,i.url,!0),"include"===i.credentials&&(o.withCredentials=!0),"responseType"in o&&y.blob&&(o.responseType="blob"),i.headers.forEach(function(e,t){o.setRequestHeader(t,e)}),o.send("undefined"===typeof i._bodyInit?null:i._bodyInit)})},e.fetch.polyfill=!0}}("undefined"!==typeof self?self:this)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(5),i=n.n(r),o=n(156),a=n.n(o),s=n(311),u=n(560),l=n(561);n.n(l);a.a.render(i.a.createElement(s.a,null),document.body.appendChild(document.createElement("div"))),Object(u.a)()},function(e,t,n){"use strict";function r(e){for(var t=arguments.length-1,n="Minified React error #"+e+"; visit http://facebook.github.io/react/docs/error-decoder.html?invariant="+e,r=0;r<t;r++)n+="&args[]="+encodeURIComponent(arguments[r+1]);throw t=Error(n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."),t.name="Invariant Violation",t.framesToPop=1,t}function i(e,t,n){this.props=e,this.context=t,this.refs=_,this.updater=n||O}function o(e,t,n){this.props=e,this.context=t,this.refs=_,this.updater=n||O}function a(){}function s(e,t,n){this.props=e,this.context=t,this.refs=_,this.updater=n||O}function u(e,t,n){var r,i={},o=null,a=null;if(null!=t)for(r in void 0!==t.ref&&(a=t.ref),void 0!==t.key&&(o=""+t.key),t)I.call(t,r)&&!N.hasOwnProperty(r)&&(i[r]=t[r]);var s=arguments.length-2;if(1===s)i.children=n;else if(1<s){for(var u=Array(s),l=0;l<s;l++)u[l]=arguments[l+2];i.children=u}if(e&&e.defaultProps)for(r in s=e.defaultProps)void 0===i[r]&&(i[r]=s[r]);return{$$typeof:x,type:e,key:o,ref:a,props:i,_owner:R.current}}function l(e){return"object"===typeof e&&null!==e&&e.$$typeof===x}function c(e){var t={"=":"=0",":":"=2"};return"$"+(""+e).replace(/[=:]/g,function(e){return t[e]})}function f(e,t,n,r){if(L.length){var i=L.pop();return i.result=e,i.keyPrefix=t,i.func=n,i.context=r,i.count=0,i}return{result:e,keyPrefix:t,func:n,context:r,count:0}}function h(e){e.result=null,e.keyPrefix=null,e.func=null,e.context=null,e.count=0,10>L.length&&L.push(e)}function p(e,t,n,i){var o=typeof e;"undefined"!==o&&"boolean"!==o||(e=null);var a=!1;if(null===e)a=!0;else switch(o){case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case x:case w:case T:case S:a=!0}}if(a)return n(i,e,""===t?"."+d(e,0):t),1;if(a=0,t=""===t?".":t+":",Array.isArray(e))for(var s=0;s<e.length;s++){o=e[s];var u=t+d(o,s);a+=p(o,u,n,i)}else if(null===e||"undefined"===typeof e?u=null:(u=C&&e[C]||e["@@iterator"],u="function"===typeof u?u:null),"function"===typeof u)for(e=u.call(e),s=0;!(o=e.next()).done;)o=o.value,u=t+d(o,s++),a+=p(o,u,n,i);else"object"===o&&(n=""+e,r("31","[object Object]"===n?"object with keys {"+Object.keys(e).join(", ")+"}":n,""));return a}function d(e,t){return"object"===typeof e&&null!==e&&null!=e.key?c(e.key):t.toString(36)}function v(e,t){e.func.call(e.context,t,e.count++)}function g(e,t,n){var r=e.result,i=e.keyPrefix;e=e.func.call(e.context,t,e.count++),Array.isArray(e)?y(e,r,n,b.thatReturnsArgument):null!=e&&(l(e)&&(t=i+(!e.key||t&&t.key===e.key?"":(""+e.key).replace(M,"$&/")+"/")+n,e={$$typeof:x,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}),r.push(e))}function y(e,t,n,r,i){var o="";null!=n&&(o=(""+n).replace(M,"$&/")+"/"),t=f(t,o,r,i),null==e||p(e,"",g,t),h(t)}var m=n(100),_=n(155),b=n(66),E="function"===typeof Symbol&&Symbol.for,x=E?Symbol.for("react.element"):60103,w=E?Symbol.for("react.call"):60104,T=E?Symbol.for("react.return"):60105,S=E?Symbol.for("react.portal"):60106,A=E?Symbol.for("react.fragment"):60107,C="function"===typeof Symbol&&Symbol.iterator,O={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}};i.prototype.isReactComponent={},i.prototype.setState=function(e,t){"object"!==typeof e&&"function"!==typeof e&&null!=e&&r("85"),this.updater.enqueueSetState(this,e,t,"setState")},i.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},a.prototype=i.prototype;var k=o.prototype=new a;k.constructor=o,m(k,i.prototype),k.isPureReactComponent=!0;var P=s.prototype=new a;P.constructor=s,m(P,i.prototype),P.unstable_isAsyncReactComponent=!0,P.render=function(){return this.props.children};var R={current:null},I=Object.prototype.hasOwnProperty,N={key:!0,ref:!0,__self:!0,__source:!0},M=/\/+/g,L=[],D={Children:{map:function(e,t,n){if(null==e)return e;var r=[];return y(e,r,null,t,n),r},forEach:function(e,t,n){if(null==e)return e;t=f(null,null,t,n),null==e||p(e,"",v,t),h(t)},count:function(e){return null==e?0:p(e,"",b.thatReturnsNull,null)},toArray:function(e){var t=[];return y(e,t,null,b.thatReturnsArgument),t},only:function(e){return l(e)||r("143"),e}},Component:i,PureComponent:o,unstable_AsyncComponent:s,Fragment:A,createElement:u,cloneElement:function(e,t,n){var r=m({},e.props),i=e.key,o=e.ref,a=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,a=R.current),void 0!==t.key&&(i=""+t.key),e.type&&e.type.defaultProps)var s=e.type.defaultProps;for(u in t)I.call(t,u)&&!N.hasOwnProperty(u)&&(r[u]=void 0===t[u]&&void 0!==s?s[u]:t[u])}var u=arguments.length-2;if(1===u)r.children=n;else if(1<u){s=Array(u);for(var l=0;l<u;l++)s[l]=arguments[l+2];r.children=s}return{$$typeof:x,type:e.type,key:i,ref:o,props:r,_owner:a}},createFactory:function(e){var t=u.bind(null,e);return t.type=e,t},isValidElement:l,version:"16.2.0",__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:{ReactCurrentOwner:R,assign:m}},F=Object.freeze({default:D}),j=F&&D||F;e.exports=j.default?j.default:j},function(e,t,n){"use strict";function r(e){for(var t=arguments.length-1,n="Minified React error #"+e+"; visit http://facebook.github.io/react/docs/error-decoder.html?invariant="+e,r=0;r<t;r++)n+="&args[]="+encodeURIComponent(arguments[r+1]);throw t=Error(n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."),t.name="Invariant Violation",t.framesToPop=1,t}function i(e,t){return(e&t)===t}function o(e,t){if(kn.hasOwnProperty(e)||2<e.length&&("o"===e[0]||"O"===e[0])&&("n"===e[1]||"N"===e[1]))return!1;if(null===t)return!0;switch(typeof t){case"boolean":return kn.hasOwnProperty(e)?e=!0:(t=a(e))?e=t.hasBooleanValue||t.hasStringBooleanValue||t.hasOverloadedBooleanValue:(e=e.toLowerCase().slice(0,5),e="data-"===e||"aria-"===e),e;case"undefined":case"number":case"string":case"object":return!0;default:return!1}}function a(e){return Rn.hasOwnProperty(e)?Rn[e]:null}function s(e){return e[1].toUpperCase()}function u(e,t,n,r,i,o,a,s,u){Hn._hasCaughtError=!1,Hn._caughtError=null;var l=Array.prototype.slice.call(arguments,3);try{t.apply(n,l)}catch(e){Hn._caughtError=e,Hn._hasCaughtError=!0}}function l(){if(Hn._hasRethrowError){var e=Hn._rethrowError;throw Hn._rethrowError=null,Hn._hasRethrowError=!1,e}}function c(){if(qn)for(var e in Wn){var t=Wn[e],n=qn.indexOf(e);if(-1<n||r("96",e),!Xn[n]){t.extractEvents||r("97",e),Xn[n]=t,n=t.eventTypes;for(var i in n){var o=void 0,a=n[i],s=t,u=i;$n.hasOwnProperty(u)&&r("99",u),$n[u]=a;var l=a.phasedRegistrationNames;if(l){for(o in l)l.hasOwnProperty(o)&&f(l[o],s,u);o=!0}else a.registrationName?(f(a.registrationName,s,u),o=!0):o=!1;o||r("98",i,e)}}}}function f(e,t,n){Yn[e]&&r("100",e),Yn[e]=t,Zn[e]=t.eventTypes[n].dependencies}function h(e){qn&&r("101"),qn=Array.prototype.slice.call(e),c()}function p(e){var t,n=!1;for(t in e)if(e.hasOwnProperty(t)){var i=e[t];Wn.hasOwnProperty(t)&&Wn[t]===i||(Wn[t]&&r("102",t),Wn[t]=i,n=!0)}n&&c()}function d(e,t,n,r){t=e.type||"unknown-event",e.currentTarget=er(r),Hn.invokeGuardedCallbackAndCatchFirstError(t,n,void 0,e),e.currentTarget=null}function v(e,t){return null==t&&r("30"),null==e?t:Array.isArray(e)?Array.isArray(t)?(e.push.apply(e,t),e):(e.push(t),e):Array.isArray(t)?[e].concat(t):[e,t]}function g(e,t,n){Array.isArray(e)?e.forEach(t,n):e&&t.call(n,e)}function y(e,t){if(e){var n=e._dispatchListeners,r=e._dispatchInstances;if(Array.isArray(n))for(var i=0;i<n.length&&!e.isPropagationStopped();i++)d(e,t,n[i],r[i]);else n&&d(e,t,n,r);e._dispatchListeners=null,e._dispatchInstances=null,e.isPersistent()||e.constructor.release(e)}}function m(e){return y(e,!0)}function _(e){return y(e,!1)}function b(e,t){var n=e.stateNode;if(!n)return null;var i=Jn(n);if(!i)return null;n=i[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":(i=!i.disabled)||(e=e.type,i=!("button"===e||"input"===e||"select"===e||"textarea"===e)),e=!i;break e;default:e=!1}return e?null:(n&&"function"!==typeof n&&r("231",t,typeof n),n)}function E(e,t,n,r){for(var i,o=0;o<Xn.length;o++){var a=Xn[o];a&&(a=a.extractEvents(e,t,n,r))&&(i=v(i,a))}return i}function x(e){e&&(tr=v(tr,e))}function w(e){var t=tr;tr=null,t&&(e?g(t,m):g(t,_),tr&&r("95"),Hn.rethrowCaughtError())}function T(e){if(e[or])return e[or];for(var t=[];!e[or];){if(t.push(e),!e.parentNode)return null;e=e.parentNode}var n=void 0,r=e[or];if(5===r.tag||6===r.tag)return r;for(;e&&(r=e[or]);e=t.pop())n=r;return n}function S(e){if(5===e.tag||6===e.tag)return e.stateNode;r("33")}function A(e){return e[ar]||null}function C(e){do{e=e.return}while(e&&5!==e.tag);return e||null}function O(e,t,n){for(var r=[];e;)r.push(e),e=C(e);for(e=r.length;0<e--;)t(r[e],"captured",n);for(e=0;e<r.length;e++)t(r[e],"bubbled",n)}function k(e,t,n){(t=b(e,n.dispatchConfig.phasedRegistrationNames[t]))&&(n._dispatchListeners=v(n._dispatchListeners,t),n._dispatchInstances=v(n._dispatchInstances,e))}function P(e){e&&e.dispatchConfig.phasedRegistrationNames&&O(e._targetInst,k,e)}function R(e){if(e&&e.dispatchConfig.phasedRegistrationNames){var t=e._targetInst;t=t?C(t):null,O(t,k,e)}}function I(e,t,n){e&&n&&n.dispatchConfig.registrationName&&(t=b(e,n.dispatchConfig.registrationName))&&(n._dispatchListeners=v(n._dispatchListeners,t),n._dispatchInstances=v(n._dispatchInstances,e))}function N(e){e&&e.dispatchConfig.registrationName&&I(e._targetInst,null,e)}function M(e){g(e,P)}function L(e,t,n,r){if(n&&r)e:{for(var i=n,o=r,a=0,s=i;s;s=C(s))a++;s=0;for(var u=o;u;u=C(u))s++;for(;0<a-s;)i=C(i),a--;for(;0<s-a;)o=C(o),s--;for(;a--;){if(i===o||i===o.alternate)break e;i=C(i),o=C(o)}i=null}else i=null;for(o=i,i=[];n&&n!==o&&(null===(a=n.alternate)||a!==o);)i.push(n),n=C(n);for(n=[];r&&r!==o&&(null===(a=r.alternate)||a!==o);)n.push(r),r=C(r);for(r=0;r<i.length;r++)I(i[r],"bubbled",e);for(e=n.length;0<e--;)I(n[e],"captured",t)}function D(){return!lr&&bn.canUseDOM&&(lr="textContent"in document.documentElement?"textContent":"innerText"),lr}function F(){if(cr._fallbackText)return cr._fallbackText;var e,t,n=cr._startText,r=n.length,i=j(),o=i.length;for(e=0;e<r&&n[e]===i[e];e++);var a=r-e;for(t=1;t<=a&&n[r-t]===i[o-t];t++);return cr._fallbackText=i.slice(e,1<t?1-t:void 0),cr._fallbackText}function j(){return"value"in cr._root?cr._root.value:cr._root[D()]}function B(e,t,n,r){this.dispatchConfig=e,this._targetInst=t,this.nativeEvent=n,e=this.constructor.Interface;for(var i in e)e.hasOwnProperty(i)&&((t=e[i])?this[i]=t(n):"target"===i?this.target=r:this[i]=n[i]);return this.isDefaultPrevented=(null!=n.defaultPrevented?n.defaultPrevented:!1===n.returnValue)?xn.thatReturnsTrue:xn.thatReturnsFalse,this.isPropagationStopped=xn.thatReturnsFalse,this}function U(e,t,n,r){if(this.eventPool.length){var i=this.eventPool.pop();return this.call(i,e,t,n,r),i}return new this(e,t,n,r)}function z(e){e instanceof this||r("223"),e.destructor(),10>this.eventPool.length&&this.eventPool.push(e)}function V(e){e.eventPool=[],e.getPooled=U,e.release=z}function G(e,t,n,r){return B.call(this,e,t,n,r)}function H(e,t,n,r){return B.call(this,e,t,n,r)}function q(e,t){switch(e){case"topKeyUp":return-1!==pr.indexOf(t.keyCode);case"topKeyDown":return 229!==t.keyCode;case"topKeyPress":case"topMouseDown":case"topBlur":return!0;default:return!1}}function W(e){return e=e.detail,"object"===typeof e&&"data"in e?e.data:null}function X(e,t){switch(e){case"topCompositionEnd":return W(t);case"topKeyPress":return 32!==t.which?null:(wr=!0,Er);case"topTextInput":return e=t.data,e===Er&&wr?null:e;default:return null}}function $(e,t){if(Tr)return"topCompositionEnd"===e||!dr&&q(e,t)?(e=F(),cr._root=null,cr._startText=null,cr._fallbackText=null,Tr=!1,e):null;switch(e){case"topPaste":return null;case"topKeyPress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"topCompositionEnd":return br?null:t.data;default:return null}}function Y(e){if(e=Qn(e)){Ar&&"function"===typeof Ar.restoreControlledState||r("194");var t=Jn(e.stateNode);Ar.restoreControlledState(e.stateNode,e.type,t)}}function Z(e){Cr?Or?Or.push(e):Or=[e]:Cr=e}function K(){if(Cr){var e=Cr,t=Or;if(Or=Cr=null,Y(e),t)for(e=0;e<t.length;e++)Y(t[e])}}function J(e,t){return e(t)}function Q(e,t){if(Rr)return J(e,t);Rr=!0;try{return J(e,t)}finally{Rr=!1,K()}}function ee(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Ir[e.type]:"textarea"===t}function te(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}function ne(e,t){if(!bn.canUseDOM||t&&!("addEventListener"in document))return!1;t="on"+e;var n=t in document;return n||(n=document.createElement("div"),n.setAttribute(t,"return;"),n="function"===typeof n[t]),!n&&mr&&"wheel"===e&&(n=document.implementation.hasFeature("Events.wheel","3.0")),n}function re(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function ie(e){var t=re(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"function"===typeof n.get&&"function"===typeof n.set)return Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:!0,get:function(){return n.get.call(this)},set:function(e){r=""+e,n.set.call(this,e)}}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}function oe(e){e._valueTracker||(e._valueTracker=ie(e))}function ae(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=re(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function se(e,t,n){return e=B.getPooled(Nr.change,e,t,n),e.type="change",Z(n),M(e),e}function ue(e){x(e),w(!1)}function le(e){if(ae(S(e)))return e}function ce(e,t){if("topChange"===e)return t}function fe(){Mr&&(Mr.detachEvent("onpropertychange",he),Lr=Mr=null)}function he(e){"value"===e.propertyName&&le(Lr)&&(e=se(Lr,e,te(e)),Q(ue,e))}function pe(e,t,n){"topFocus"===e?(fe(),Mr=t,Lr=n,Mr.attachEvent("onpropertychange",he)):"topBlur"===e&&fe()}function de(e){if("topSelectionChange"===e||"topKeyUp"===e||"topKeyDown"===e)return le(Lr)}function ve(e,t){if("topClick"===e)return le(t)}function ge(e,t){if("topInput"===e||"topChange"===e)return le(t)}function ye(e,t,n,r){return B.call(this,e,t,n,r)}function me(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=jr[e])&&!!t[e]}function _e(){return me}function be(e,t,n,r){return B.call(this,e,t,n,r)}function Ee(e){return e=e.type,"string"===typeof e?e:"function"===typeof e?e.displayName||e.name:null}function xe(e){var t=e;if(e.alternate)for(;t.return;)t=t.return;else{if(0!==(2&t.effectTag))return 1;for(;t.return;)if(t=t.return,0!==(2&t.effectTag))return 1}return 3===t.tag?2:3}function we(e){return!!(e=e._reactInternalFiber)&&2===xe(e)}function Te(e){2!==xe(e)&&r("188")}function Se(e){var t=e.alternate;if(!t)return t=xe(e),3===t&&r("188"),1===t?null:e;for(var n=e,i=t;;){var o=n.return,a=o?o.alternate:null;if(!o||!a)break;if(o.child===a.child){for(var s=o.child;s;){if(s===n)return Te(o),e;if(s===i)return Te(o),t;s=s.sibling}r("188")}if(n.return!==i.return)n=o,i=a;else{s=!1;for(var u=o.child;u;){if(u===n){s=!0,n=o,i=a;break}if(u===i){s=!0,i=o,n=a;break}u=u.sibling}if(!s){for(u=a.child;u;){if(u===n){s=!0,n=a,i=o;break}if(u===i){s=!0,i=a,n=o;break}u=u.sibling}s||r("189")}}n.alternate!==i&&r("190")}return 3!==n.tag&&r("188"),n.stateNode.current===n?e:t}function Ae(e){if(!(e=Se(e)))return null;for(var t=e;;){if(5===t.tag||6===t.tag)return t;if(t.child)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}function Ce(e){if(!(e=Se(e)))return null;for(var t=e;;){if(5===t.tag||6===t.tag)return t;if(t.child&&4!==t.tag)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}function Oe(e){var t=e.targetInst;do{if(!t){e.ancestors.push(t);break}var n;for(n=t;n.return;)n=n.return;if(!(n=3!==n.tag?null:n.stateNode.containerInfo))break;e.ancestors.push(t),t=T(n)}while(t);for(n=0;n<e.ancestors.length;n++)t=e.ancestors[n],Hr(e.topLevelType,t,e.nativeEvent,te(e.nativeEvent))}function ke(e){Gr=!!e}function Pe(e,t,n){return n?wn.listen(n,t,Ie.bind(null,e)):null}function Re(e,t,n){return n?wn.capture(n,t,Ie.bind(null,e)):null}function Ie(e,t){if(Gr){var n=te(t);if(n=T(n),null===n||"number"!==typeof n.tag||2===xe(n)||(n=null),Vr.length){var r=Vr.pop();r.topLevelType=e,r.nativeEvent=t,r.targetInst=n,e=r}else e={topLevelType:e,nativeEvent:t,targetInst:n,ancestors:[]};try{Q(Oe,e)}finally{e.topLevelType=null,e.nativeEvent=null,e.targetInst=null,e.ancestors.length=0,10>Vr.length&&Vr.push(e)}}}function Ne(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n["ms"+e]="MS"+t,n["O"+e]="o"+t.toLowerCase(),n}function Me(e){if(Xr[e])return Xr[e];if(!Wr[e])return e;var t,n=Wr[e];for(t in n)if(n.hasOwnProperty(t)&&t in $r)return Xr[e]=n[t];return""}function Le(e){return Object.prototype.hasOwnProperty.call(e,Jr)||(e[Jr]=Kr++,Zr[e[Jr]]={}),Zr[e[Jr]]}function De(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Fe(e,t){var n=De(e);e=0;for(var r;n;){if(3===n.nodeType){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=De(n)}}function je(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&"text"===e.type||"textarea"===t||"true"===e.contentEditable)}function Be(e,t){if(ii||null==ti||ti!==Tn())return null;var n=ti;return"selectionStart"in n&&je(n)?n={start:n.selectionStart,end:n.selectionEnd}:window.getSelection?(n=window.getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}):n=void 0,ri&&Sn(ri,n)?null:(ri=n,e=B.getPooled(ei.select,ni,e,t),e.type="select",e.target=ti,M(e),e)}function Ue(e,t,n,r){return B.call(this,e,t,n,r)}function ze(e,t,n,r){return B.call(this,e,t,n,r)}function Ve(e,t,n,r){return B.call(this,e,t,n,r)}function Ge(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,32<=e||13===e?e:0}function He(e,t,n,r){return B.call(this,e,t,n,r)}function qe(e,t,n,r){return B.call(this,e,t,n,r)}function We(e,t,n,r){return B.call(this,e,t,n,r)}function Xe(e,t,n,r){return B.call(this,e,t,n,r)}function $e(e,t,n,r){return B.call(this,e,t,n,r)}function Ye(e){0>hi||(e.current=fi[hi],fi[hi]=null,hi--)}function Ze(e,t){hi++,fi[hi]=e.current,e.current=t}function Ke(e){return Qe(e)?vi:pi.current}function Je(e,t){var n=e.type.contextTypes;if(!n)return On;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,o={};for(i in n)o[i]=t[i];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function Qe(e){return 2===e.tag&&null!=e.type.childContextTypes}function et(e){Qe(e)&&(Ye(di,e),Ye(pi,e))}function tt(e,t,n){null!=pi.cursor&&r("168"),Ze(pi,t,e),Ze(di,n,e)}function nt(e,t){var n=e.stateNode,i=e.type.childContextTypes;if("function"!==typeof n.getChildContext)return t;n=n.getChildContext();for(var o in n)o in i||r("108",Ee(e)||"Unknown",o);return En({},t,n)}function rt(e){if(!Qe(e))return!1;var t=e.stateNode;return t=t&&t.__reactInternalMemoizedMergedChildContext||On,vi=pi.current,Ze(pi,t,e),Ze(di,di.current,e),!0}function it(e,t){var n=e.stateNode;if(n||r("169"),t){var i=nt(e,vi);n.__reactInternalMemoizedMergedChildContext=i,Ye(di,e),Ye(pi,e),Ze(pi,i,e)}else Ye(di,e);Ze(di,t,e)}function ot(e,t,n){this.tag=e,this.key=t,this.stateNode=this.type=null,this.sibling=this.child=this.return=null,this.index=0,this.memoizedState=this.updateQueue=this.memoizedProps=this.pendingProps=this.ref=null,this.internalContextTag=n,this.effectTag=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.expirationTime=0,this.alternate=null}function at(e,t,n){var r=e.alternate;return null===r?(r=new ot(e.tag,e.key,e.internalContextTag),r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.effectTag=0,r.nextEffect=null,r.firstEffect=null,r.lastEffect=null),r.expirationTime=n,r.pendingProps=t,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function st(e,t,n){var i=void 0,o=e.type,a=e.key;return"function"===typeof o?(i=o.prototype&&o.prototype.isReactComponent?new ot(2,a,t):new ot(0,a,t),i.type=o,i.pendingProps=e.props):"string"===typeof o?(i=new ot(5,a,t),i.type=o,i.pendingProps=e.props):"object"===typeof o&&null!==o&&"number"===typeof o.tag?(i=o,i.pendingProps=e.props):r("130",null==o?o:typeof o,""),i.expirationTime=n,i}function ut(e,t,n,r){return t=new ot(10,r,t),t.pendingProps=e,t.expirationTime=n,t}function lt(e,t,n){return t=new ot(6,null,t),t.pendingProps=e,t.expirationTime=n,t}function ct(e,t,n){return t=new ot(7,e.key,t),t.type=e.handler,t.pendingProps=e,t.expirationTime=n,t}function ft(e,t,n){return e=new ot(9,null,t),e.expirationTime=n,e}function ht(e,t,n){return t=new ot(4,e.key,t),t.pendingProps=e.children||[],t.expirationTime=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function pt(e){return function(t){try{return e(t)}catch(e){}}}function dt(e){if("undefined"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__)return!1;var t=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(t.isDisabled||!t.supportsFiber)return!0;try{var n=t.inject(e);gi=pt(function(e){return t.onCommitFiberRoot(n,e)}),yi=pt(function(e){return t.onCommitFiberUnmount(n,e)})}catch(e){}return!0}function vt(e){"function"===typeof gi&&gi(e)}function gt(e){"function"===typeof yi&&yi(e)}function yt(e){return{baseState:e,expirationTime:0,first:null,last:null,callbackList:null,hasForceUpdate:!1,isInitialized:!1}}function mt(e,t){null===e.last?e.first=e.last=t:(e.last.next=t,e.last=t),(0===e.expirationTime||e.expirationTime>t.expirationTime)&&(e.expirationTime=t.expirationTime)}function _t(e,t){var n=e.alternate,r=e.updateQueue;null===r&&(r=e.updateQueue=yt(null)),null!==n?null===(e=n.updateQueue)&&(e=n.updateQueue=yt(null)):e=null,e=e!==r?e:null,null===e?mt(r,t):null===r.last||null===e.last?(mt(r,t),mt(e,t)):(mt(r,t),e.last=t)}function bt(e,t,n,r){return e=e.partialState,"function"===typeof e?e.call(t,n,r):e}function Et(e,t,n,r,i,o){null!==e&&e.updateQueue===n&&(n=t.updateQueue={baseState:n.baseState,expirationTime:n.expirationTime,first:n.first,last:n.last,isInitialized:n.isInitialized,callbackList:null,hasForceUpdate:!1}),n.expirationTime=0,n.isInitialized?e=n.baseState:(e=n.baseState=t.memoizedState,n.isInitialized=!0);for(var a=!0,s=n.first,u=!1;null!==s;){var l=s.expirationTime;if(l>o){var c=n.expirationTime;(0===c||c>l)&&(n.expirationTime=l),u||(u=!0,n.baseState=e)}else u||(n.first=s.next,null===n.first&&(n.last=null)),s.isReplace?(e=bt(s,r,e,i),a=!0):(l=bt(s,r,e,i))&&(e=a?En({},e,l):En(e,l),a=!1),s.isForced&&(n.hasForceUpdate=!0),null!==s.callback&&(l=n.callbackList,null===l&&(l=n.callbackList=[]),l.push(s));s=s.next}return null!==n.callbackList?t.effectTag|=32:null!==n.first||n.hasForceUpdate||(t.updateQueue=null),u||(n.baseState=e),e}function xt(e,t){var n=e.callbackList;if(null!==n)for(e.callbackList=null,e=0;e<n.length;e++){var i=n[e],o=i.callback;i.callback=null,"function"!==typeof o&&r("191",o),o.call(t)}}function wt(e,t,n,i){function o(e,t){t.updater=a,e.stateNode=t,t._reactInternalFiber=e}var a={isMounted:we,enqueueSetState:function(n,r,i){n=n._reactInternalFiber,i=void 0===i?null:i;var o=t(n);_t(n,{expirationTime:o,partialState:r,callback:i,isReplace:!1,isForced:!1,nextCallback:null,next:null}),e(n,o)},enqueueReplaceState:function(n,r,i){n=n._reactInternalFiber,i=void 0===i?null:i;var o=t(n);_t(n,{expirationTime:o,partialState:r,callback:i,isReplace:!0,isForced:!1,nextCallback:null,next:null}),e(n,o)},enqueueForceUpdate:function(n,r){n=n._reactInternalFiber,r=void 0===r?null:r;var i=t(n);_t(n,{expirationTime:i,partialState:null,callback:r,isReplace:!1,isForced:!0,nextCallback:null,next:null}),e(n,i)}};return{adoptClassInstance:o,constructClassInstance:function(e,t){var n=e.type,r=Ke(e),i=2===e.tag&&null!=e.type.contextTypes,a=i?Je(e,r):On;return t=new n(t,a),o(e,t),i&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=r,e.__reactInternalMemoizedMaskedChildContext=a),t},mountClassInstance:function(e,t){var n=e.alternate,i=e.stateNode,o=i.state||null,s=e.pendingProps;s||r("158");var u=Ke(e);i.props=s,i.state=e.memoizedState=o,i.refs=On,i.context=Je(e,u),null!=e.type&&null!=e.type.prototype&&!0===e.type.prototype.unstable_isAsyncReactComponent&&(e.internalContextTag|=1),"function"===typeof i.componentWillMount&&(o=i.state,i.componentWillMount(),o!==i.state&&a.enqueueReplaceState(i,i.state,null),null!==(o=e.updateQueue)&&(i.state=Et(n,e,o,i,s,t))),"function"===typeof i.componentDidMount&&(e.effectTag|=4)},updateClassInstance:function(e,t,o){var s=t.stateNode;s.props=t.memoizedProps,s.state=t.memoizedState;var u=t.memoizedProps,l=t.pendingProps;l||null==(l=u)&&r("159");var c=s.context,f=Ke(t);if(f=Je(t,f),"function"!==typeof s.componentWillReceiveProps||u===l&&c===f||(c=s.state,s.componentWillReceiveProps(l,f),s.state!==c&&a.enqueueReplaceState(s,s.state,null)),c=t.memoizedState,o=null!==t.updateQueue?Et(e,t,t.updateQueue,s,l,o):c,!(u!==l||c!==o||di.current||null!==t.updateQueue&&t.updateQueue.hasForceUpdate))return"function"!==typeof s.componentDidUpdate||u===e.memoizedProps&&c===e.memoizedState||(t.effectTag|=4),!1;var h=l;if(null===u||null!==t.updateQueue&&t.updateQueue.hasForceUpdate)h=!0;else{var p=t.stateNode,d=t.type;h="function"===typeof p.shouldComponentUpdate?p.shouldComponentUpdate(h,o,f):!d.prototype||!d.prototype.isPureReactComponent||(!Sn(u,h)||!Sn(c,o))}return h?("function"===typeof s.componentWillUpdate&&s.componentWillUpdate(l,o,f),"function"===typeof s.componentDidUpdate&&(t.effectTag|=4)):("function"!==typeof s.componentDidUpdate||u===e.memoizedProps&&c===e.memoizedState||(t.effectTag|=4),n(t,l),i(t,o)),s.props=l,s.state=o,s.context=f,h}}}function Tt(e){return null===e||"undefined"===typeof e?null:(e=Ti&&e[Ti]||e["@@iterator"],"function"===typeof e?e:null)}function St(e,t){var n=t.ref;if(null!==n&&"function"!==typeof n){if(t._owner){t=t._owner;var i=void 0;t&&(2!==t.tag&&r("110"),i=t.stateNode),i||r("147",n);var o=""+n;return null!==e&&null!==e.ref&&e.ref._stringRef===o?e.ref:(e=function(e){var t=i.refs===On?i.refs={}:i.refs;null===e?delete t[o]:t[o]=e},e._stringRef=o,e)}"string"!==typeof n&&r("148"),t._owner||r("149",n)}return n}function At(e,t){"textarea"!==e.type&&r("31","[object Object]"===Object.prototype.toString.call(t)?"object with keys {"+Object.keys(t).join(", ")+"}":t,"")}function Ct(e){function t(t,n){if(e){var r=t.lastEffect;null!==r?(r.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n,n.nextEffect=null,n.effectTag=8}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function i(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function o(e,t,n){return e=at(e,t,n),e.index=0,e.sibling=null,e}function a(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index,r<n?(t.effectTag=2,n):r):(t.effectTag=2,n):n}function s(t){return e&&null===t.alternate&&(t.effectTag=2),t}function u(e,t,n,r){return null===t||6!==t.tag?(t=lt(n,e.internalContextTag,r),t.return=e,t):(t=o(t,n,r),t.return=e,t)}function l(e,t,n,r){return null!==t&&t.type===n.type?(r=o(t,n.props,r),r.ref=St(t,n),r.return=e,r):(r=st(n,e.internalContextTag,r),r.ref=St(t,n),r.return=e,r)}function c(e,t,n,r){return null===t||7!==t.tag?(t=ct(n,e.internalContextTag,r),t.return=e,t):(t=o(t,n,r),t.return=e,t)}function f(e,t,n,r){return null===t||9!==t.tag?(t=ft(n,e.internalContextTag,r),t.type=n.value,t.return=e,t):(t=o(t,null,r),t.type=n.value,t.return=e,t)}function h(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?(t=ht(n,e.internalContextTag,r),t.return=e,t):(t=o(t,n.children||[],r),t.return=e,t)}function p(e,t,n,r,i){return null===t||10!==t.tag?(t=ut(n,e.internalContextTag,r,i),t.return=e,t):(t=o(t,n,r),t.return=e,t)}function d(e,t,n){if("string"===typeof t||"number"===typeof t)return t=lt(""+t,e.internalContextTag,n),t.return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case _i:return t.type===wi?(t=ut(t.props.children,e.internalContextTag,n,t.key),t.return=e,t):(n=st(t,e.internalContextTag,n),n.ref=St(null,t),n.return=e,n);case bi:return t=ct(t,e.internalContextTag,n),t.return=e,t;case Ei:return n=ft(t,e.internalContextTag,n),n.type=t.value,n.return=e,n;case xi:return t=ht(t,e.internalContextTag,n),t.return=e,t}if(Si(t)||Tt(t))return t=ut(t,e.internalContextTag,n,null),t.return=e,t;At(e,t)}return null}function v(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n||"number"===typeof n)return null!==i?null:u(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case _i:return n.key===i?n.type===wi?p(e,t,n.props.children,r,i):l(e,t,n,r):null;case bi:return n.key===i?c(e,t,n,r):null;case Ei:return null===i?f(e,t,n,r):null;case xi:return n.key===i?h(e,t,n,r):null}if(Si(n)||Tt(n))return null!==i?null:p(e,t,n,r,null);At(e,n)}return null}function g(e,t,n,r,i){if("string"===typeof r||"number"===typeof r)return e=e.get(n)||null,u(t,e,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case _i:return e=e.get(null===r.key?n:r.key)||null,r.type===wi?p(t,e,r.props.children,i,r.key):l(t,e,r,i);case bi:return e=e.get(null===r.key?n:r.key)||null,c(t,e,r,i);case Ei:return e=e.get(n)||null,f(t,e,r,i);case xi:return e=e.get(null===r.key?n:r.key)||null,h(t,e,r,i)}if(Si(r)||Tt(r))return e=e.get(n)||null,p(t,e,r,i,null);At(t,r)}return null}function y(r,o,s,u){for(var l=null,c=null,f=o,h=o=0,p=null;null!==f&&h<s.length;h++){f.index>h?(p=f,f=null):p=f.sibling;var y=v(r,f,s[h],u);if(null===y){null===f&&(f=p);break}e&&f&&null===y.alternate&&t(r,f),o=a(y,o,h),null===c?l=y:c.sibling=y,c=y,f=p}if(h===s.length)return n(r,f),l;if(null===f){for(;h<s.length;h++)(f=d(r,s[h],u))&&(o=a(f,o,h),null===c?l=f:c.sibling=f,c=f);return l}for(f=i(r,f);h<s.length;h++)(p=g(f,r,h,s[h],u))&&(e&&null!==p.alternate&&f.delete(null===p.key?h:p.key),o=a(p,o,h),null===c?l=p:c.sibling=p,c=p);return e&&f.forEach(function(e){return t(r,e)}),l}function m(o,s,u,l){var c=Tt(u);"function"!==typeof c&&r("150"),null==(u=c.call(u))&&r("151");for(var f=c=null,h=s,p=s=0,y=null,m=u.next();null!==h&&!m.done;p++,m=u.next()){h.index>p?(y=h,h=null):y=h.sibling;var _=v(o,h,m.value,l);if(null===_){h||(h=y);break}e&&h&&null===_.alternate&&t(o,h),s=a(_,s,p),null===f?c=_:f.sibling=_,f=_,h=y}if(m.done)return n(o,h),c;if(null===h){for(;!m.done;p++,m=u.next())null!==(m=d(o,m.value,l))&&(s=a(m,s,p),null===f?c=m:f.sibling=m,f=m);return c}for(h=i(o,h);!m.done;p++,m=u.next())null!==(m=g(h,o,p,m.value,l))&&(e&&null!==m.alternate&&h.delete(null===m.key?p:m.key),s=a(m,s,p),null===f?c=m:f.sibling=m,f=m);return e&&h.forEach(function(e){return t(o,e)}),c}return function(e,i,a,u){"object"===typeof a&&null!==a&&a.type===wi&&null===a.key&&(a=a.props.children);var l="object"===typeof a&&null!==a;if(l)switch(a.$$typeof){case _i:e:{var c=a.key;for(l=i;null!==l;){if(l.key===c){if(10===l.tag?a.type===wi:l.type===a.type){n(e,l.sibling),i=o(l,a.type===wi?a.props.children:a.props,u),i.ref=St(l,a),i.return=e,e=i;break e}n(e,l);break}t(e,l),l=l.sibling}a.type===wi?(i=ut(a.props.children,e.internalContextTag,u,a.key),i.return=e,e=i):(u=st(a,e.internalContextTag,u),u.ref=St(i,a),u.return=e,e=u)}return s(e);case bi:e:{for(l=a.key;null!==i;){if(i.key===l){if(7===i.tag){n(e,i.sibling),i=o(i,a,u),i.return=e,e=i;break e}n(e,i);break}t(e,i),i=i.sibling}i=ct(a,e.internalContextTag,u),i.return=e,e=i}return s(e);case Ei:e:{if(null!==i){if(9===i.tag){n(e,i.sibling),i=o(i,null,u),i.type=a.value,i.return=e,e=i;break e}n(e,i)}i=ft(a,e.internalContextTag,u),i.type=a.value,i.return=e,e=i}return s(e);case xi:e:{for(l=a.key;null!==i;){if(i.key===l){if(4===i.tag&&i.stateNode.containerInfo===a.containerInfo&&i.stateNode.implementation===a.implementation){n(e,i.sibling),i=o(i,a.children||[],u),i.return=e,e=i;break e}n(e,i);break}t(e,i),i=i.sibling}i=ht(a,e.internalContextTag,u),i.return=e,e=i}return s(e)}if("string"===typeof a||"number"===typeof a)return a=""+a,null!==i&&6===i.tag?(n(e,i.sibling),i=o(i,a,u)):(n(e,i),i=lt(a,e.internalContextTag,u)),i.return=e,e=i,s(e);if(Si(a))return y(e,i,a,u);if(Tt(a))return m(e,i,a,u);if(l&&At(e,a),"undefined"===typeof a)switch(e.tag){case 2:case 1:u=e.type,r("152",u.displayName||u.name||"Component")}return n(e,i)}}function Ot(e,t,n,i,o){function a(e,t,n){var r=t.expirationTime;t.child=null===e?Ci(t,null,n,r):Ai(t,e.child,n,r)}function s(e,t){var n=t.ref;null===n||e&&e.ref===n||(t.effectTag|=128)}function u(e,t,n,r){if(s(e,t),!n)return r&&it(t,!1),c(e,t);n=t.stateNode,zr.current=t;var i=n.render();return t.effectTag|=1,a(e,t,i),t.memoizedState=n.state,t.memoizedProps=n.props,r&&it(t,!0),t.child}function l(e){var t=e.stateNode;t.pendingContext?tt(e,t.pendingContext,t.pendingContext!==t.context):t.context&&tt(e,t.context,!1),g(e,t.containerInfo)}function c(e,t){if(null!==e&&t.child!==e.child&&r("153"),null!==t.child){e=t.child;var n=at(e,e.pendingProps,e.expirationTime);for(t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,n=n.sibling=at(e,e.pendingProps,e.expirationTime),n.return=t;n.sibling=null}return t.child}function f(e,t){switch(t.tag){case 3:l(t);break;case 2:rt(t);break;case 4:g(t,t.stateNode.containerInfo)}return null}var h=e.shouldSetTextContent,p=e.useSyncScheduling,d=e.shouldDeprioritizeSubtree,v=t.pushHostContext,g=t.pushHostContainer,y=n.enterHydrationState,m=n.resetHydrationState,_=n.tryToClaimNextHydratableInstance;e=wt(i,o,function(e,t){e.memoizedProps=t},function(e,t){e.memoizedState=t});var b=e.adoptClassInstance,E=e.constructClassInstance,x=e.mountClassInstance,w=e.updateClassInstance;return{beginWork:function(e,t,n){if(0===t.expirationTime||t.expirationTime>n)return f(e,t);switch(t.tag){case 0:null!==e&&r("155");var i=t.type,o=t.pendingProps,T=Ke(t);return T=Je(t,T),i=i(o,T),t.effectTag|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render?(t.tag=2,o=rt(t),b(t,i),x(t,n),t=u(e,t,!0,o)):(t.tag=1,a(e,t,i),t.memoizedProps=o,t=t.child),t;case 1:e:{if(o=t.type,n=t.pendingProps,i=t.memoizedProps,di.current)null===n&&(n=i);else if(null===n||i===n){t=c(e,t);break e}i=Ke(t),i=Je(t,i),o=o(n,i),t.effectTag|=1,a(e,t,o),t.memoizedProps=n,t=t.child}return t;case 2:return o=rt(t),i=void 0,null===e?t.stateNode?r("153"):(E(t,t.pendingProps),x(t,n),i=!0):i=w(e,t,n),u(e,t,i,o);case 3:return l(t),o=t.updateQueue,null!==o?(i=t.memoizedState,o=Et(e,t,o,null,null,n),i===o?(m(),t=c(e,t)):(i=o.element,T=t.stateNode,(null===e||null===e.child)&&T.hydrate&&y(t)?(t.effectTag|=2,t.child=Ci(t,null,i,n)):(m(),a(e,t,i)),t.memoizedState=o,t=t.child)):(m(),t=c(e,t)),t;case 5:v(t),null===e&&_(t),o=t.type;var S=t.memoizedProps;return i=t.pendingProps,null===i&&null===(i=S)&&r("154"),T=null!==e?e.memoizedProps:null,di.current||null!==i&&S!==i?(S=i.children,h(o,i)?S=null:T&&h(o,T)&&(t.effectTag|=16),s(e,t),2147483647!==n&&!p&&d(o,i)?(t.expirationTime=2147483647,t=null):(a(e,t,S),t.memoizedProps=i,t=t.child)):t=c(e,t),t;case 6:return null===e&&_(t),e=t.pendingProps,null===e&&(e=t.memoizedProps),t.memoizedProps=e,null;case 8:t.tag=7;case 7:return o=t.pendingProps,di.current?null===o&&null===(o=e&&e.memoizedProps)&&r("154"):null!==o&&t.memoizedProps!==o||(o=t.memoizedProps),i=o.children,t.stateNode=null===e?Ci(t,t.stateNode,i,n):Ai(t,t.stateNode,i,n),t.memoizedProps=o,t.stateNode;case 9:return null;case 4:e:{if(g(t,t.stateNode.containerInfo),o=t.pendingProps,di.current)null===o&&null==(o=e&&e.memoizedProps)&&r("154");else if(null===o||t.memoizedProps===o){t=c(e,t);break e}null===e?t.child=Ai(t,null,o,n):a(e,t,o),t.memoizedProps=o,t=t.child}return t;case 10:e:{if(n=t.pendingProps,di.current)null===n&&(n=t.memoizedProps);else if(null===n||t.memoizedProps===n){t=c(e,t);break e}a(e,t,n),t.memoizedProps=n,t=t.child}return t;default:r("156")}},beginFailedWork:function(e,t,n){switch(t.tag){case 2:rt(t);break;case 3:l(t);break;default:r("157")}return t.effectTag|=64,null===e?t.child=null:t.child!==e.child&&(t.child=e.child),0===t.expirationTime||t.expirationTime>n?f(e,t):(t.firstEffect=null,t.lastEffect=null,t.child=null===e?Ci(t,null,null,n):Ai(t,e.child,null,n),2===t.tag&&(e=t.stateNode,t.memoizedProps=e.props,t.memoizedState=e.state),t.child)}}}function kt(e,t,n){function i(e){e.effectTag|=4}var o=e.createInstance,a=e.createTextInstance,s=e.appendInitialChild,u=e.finalizeInitialChildren,l=e.prepareUpdate,c=e.persistence,f=t.getRootHostContainer,h=t.popHostContext,p=t.getHostContext,d=t.popHostContainer,v=n.prepareToHydrateHostInstance,g=n.prepareToHydrateHostTextInstance,y=n.popHydrationState,m=void 0,_=void 0,b=void 0;return e.mutation?(m=function(){},_=function(e,t,n){(t.updateQueue=n)&&i(t)},b=function(e,t,n,r){n!==r&&i(t)}):r(c?"235":"236"),{completeWork:function(e,t,n){var c=t.pendingProps;switch(null===c?c=t.memoizedProps:2147483647===t.expirationTime&&2147483647!==n||(t.pendingProps=null),t.tag){case 1:return null;case 2:return et(t),null;case 3:return d(t),Ye(di,t),Ye(pi,t),c=t.stateNode,c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),null!==e&&null!==e.child||(y(t),t.effectTag&=-3),m(t),null;case 5:h(t),n=f();var E=t.type;if(null!==e&&null!=t.stateNode){var x=e.memoizedProps,w=t.stateNode,T=p();w=l(w,E,x,c,n,T),_(e,t,w,E,x,c,n),e.ref!==t.ref&&(t.effectTag|=128)}else{if(!c)return null===t.stateNode&&r("166"),null;if(e=p(),y(t))v(t,n,e)&&i(t);else{e=o(E,c,n,e,t);e:for(x=t.child;null!==x;){if(5===x.tag||6===x.tag)s(e,x.stateNode);else if(4!==x.tag&&null!==x.child){x.child.return=x,x=x.child;continue}if(x===t)break;for(;null===x.sibling;){if(null===x.return||x.return===t)break e;x=x.return}x.sibling.return=x.return,x=x.sibling}u(e,E,c,n)&&i(t),t.stateNode=e}null!==t.ref&&(t.effectTag|=128)}return null;case 6:if(e&&null!=t.stateNode)b(e,t,e.memoizedProps,c);else{if("string"!==typeof c)return null===t.stateNode&&r("166"),null;e=f(),n=p(),y(t)?g(t)&&i(t):t.stateNode=a(c,e,n,t)}return null;case 7:(c=t.memoizedProps)||r("165"),t.tag=8,E=[];e:for((x=t.stateNode)&&(x.return=t);null!==x;){if(5===x.tag||6===x.tag||4===x.tag)r("247");else if(9===x.tag)E.push(x.type);else if(null!==x.child){x.child.return=x,x=x.child;continue}for(;null===x.sibling;){if(null===x.return||x.return===t)break e;x=x.return}x.sibling.return=x.return,x=x.sibling}return x=c.handler,c=x(c.props,E),t.child=Ai(t,null!==e?e.child:null,c,n),t.child;case 8:return t.tag=7,null;case 9:case 10:return null;case 4:return d(t),m(t),null;case 0:r("167");default:r("156")}}}}function Pt(e,t){function n(e){var n=e.ref;if(null!==n)try{n(null)}catch(n){t(e,n)}}function i(e){switch("function"===typeof gt&&gt(e),e.tag){case 2:n(e);var r=e.stateNode;if("function"===typeof r.componentWillUnmount)try{r.props=e.memoizedProps,r.state=e.memoizedState,r.componentWillUnmount()}catch(n){t(e,n)}break;case 5:n(e);break;case 7:o(e.stateNode);break;case 4:l&&s(e)}}function o(e){for(var t=e;;)if(i(t),null===t.child||l&&4===t.tag){if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}else t.child.return=t,t=t.child}function a(e){return 5===e.tag||3===e.tag||4===e.tag}function s(e){for(var t=e,n=!1,a=void 0,s=void 0;;){if(!n){n=t.return;e:for(;;){switch(null===n&&r("160"),n.tag){case 5:a=n.stateNode,s=!1;break e;case 3:case 4:a=n.stateNode.containerInfo,s=!0;break e}n=n.return}n=!0}if(5===t.tag||6===t.tag)o(t),s?_(a,t.stateNode):m(a,t.stateNode);else if(4===t.tag?a=t.stateNode.containerInfo:i(t),null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return;t=t.return,4===t.tag&&(n=!1)}t.sibling.return=t.return,t=t.sibling}}var u=e.getPublicInstance,l=e.mutation;e=e.persistence,l||r(e?"235":"236");var c=l.commitMount,f=l.commitUpdate,h=l.resetTextContent,p=l.commitTextUpdate,d=l.appendChild,v=l.appendChildToContainer,g=l.insertBefore,y=l.insertInContainerBefore,m=l.removeChild,_=l.removeChildFromContainer;return{commitResetTextContent:function(e){h(e.stateNode)},commitPlacement:function(e){e:{for(var t=e.return;null!==t;){if(a(t)){var n=t;break e}t=t.return}r("160"),n=void 0}var i=t=void 0;switch(n.tag){case 5:t=n.stateNode,i=!1;break;case 3:case 4:t=n.stateNode.containerInfo,i=!0;break;default:r("161")}16&n.effectTag&&(h(t),n.effectTag&=-17);e:t:for(n=e;;){for(;null===n.sibling;){if(null===n.return||a(n.return)){n=null;break e}n=n.return}for(n.sibling.return=n.return,n=n.sibling;5!==n.tag&&6!==n.tag;){if(2&n.effectTag)continue t;if(null===n.child||4===n.tag)continue t;n.child.return=n,n=n.child}if(!(2&n.effectTag)){n=n.stateNode;break e}}for(var o=e;;){if(5===o.tag||6===o.tag)n?i?y(t,o.stateNode,n):g(t,o.stateNode,n):i?v(t,o.stateNode):d(t,o.stateNode);else if(4!==o.tag&&null!==o.child){o.child.return=o,o=o.child;continue}if(o===e)break;for(;null===o.sibling;){if(null===o.return||o.return===e)return;o=o.return}o.sibling.return=o.return,o=o.sibling}},commitDeletion:function(e){s(e),e.return=null,e.child=null,e.alternate&&(e.alternate.child=null,e.alternate.return=null)},commitWork:function(e,t){switch(t.tag){case 2:break;case 5:var n=t.stateNode;if(null!=n){var i=t.memoizedProps;e=null!==e?e.memoizedProps:i;var o=t.type,a=t.updateQueue;t.updateQueue=null,null!==a&&f(n,a,o,e,i,t)}break;case 6:null===t.stateNode&&r("162"),n=t.memoizedProps,p(t.stateNode,null!==e?e.memoizedProps:n,n);break;case 3:break;default:r("163")}},commitLifeCycles:function(e,t){switch(t.tag){case 2:var n=t.stateNode;if(4&t.effectTag)if(null===e)n.props=t.memoizedProps,n.state=t.memoizedState,n.componentDidMount();else{var i=e.memoizedProps;e=e.memoizedState,n.props=t.memoizedProps,n.state=t.memoizedState,n.componentDidUpdate(i,e)}t=t.updateQueue,null!==t&&xt(t,n);break;case 3:n=t.updateQueue,null!==n&&xt(n,null!==t.child?t.child.stateNode:null);break;case 5:n=t.stateNode,null===e&&4&t.effectTag&&c(n,t.type,t.memoizedProps,t);break;case 6:case 4:break;default:r("163")}},commitAttachRef:function(e){var t=e.ref;if(null!==t){var n=e.stateNode;switch(e.tag){case 5:t(u(n));break;default:t(n)}}},commitDetachRef:function(e){null!==(e=e.ref)&&e(null)}}}function Rt(e){function t(e){return e===Oi&&r("174"),e}var n=e.getChildHostContext,i=e.getRootHostContext,o={current:Oi},a={current:Oi},s={current:Oi};return{getHostContext:function(){return t(o.current)},getRootHostContainer:function(){return t(s.current)},popHostContainer:function(e){Ye(o,e),Ye(a,e),Ye(s,e)},popHostContext:function(e){a.current===e&&(Ye(o,e),Ye(a,e))},pushHostContainer:function(e,t){Ze(s,t,e),t=i(t),Ze(a,e,e),Ze(o,t,e)},pushHostContext:function(e){var r=t(s.current),i=t(o.current);r=n(i,e.type,r),i!==r&&(Ze(a,e,e),Ze(o,r,e))},resetHostContainer:function(){o.current=Oi,s.current=Oi}}}function It(e){function t(e,t){var n=new ot(5,null,0);n.type="DELETED",n.stateNode=t,n.return=e,n.effectTag=8,null!==e.lastEffect?(e.lastEffect.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n}function n(e,t){switch(e.tag){case 5:return null!==(t=a(t,e.type,e.pendingProps))&&(e.stateNode=t,!0);case 6:return null!==(t=s(t,e.pendingProps))&&(e.stateNode=t,!0);default:return!1}}function i(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag;)e=e.return;h=e}var o=e.shouldSetTextContent;if(!(e=e.hydration))return{enterHydrationState:function(){return!1},resetHydrationState:function(){},tryToClaimNextHydratableInstance:function(){},prepareToHydrateHostInstance:function(){r("175")},prepareToHydrateHostTextInstance:function(){r("176")},popHydrationState:function(){return!1}};var a=e.canHydrateInstance,s=e.canHydrateTextInstance,u=e.getNextHydratableSibling,l=e.getFirstHydratableChild,c=e.hydrateInstance,f=e.hydrateTextInstance,h=null,p=null,d=!1;return{enterHydrationState:function(e){return p=l(e.stateNode.containerInfo),h=e,d=!0},resetHydrationState:function(){p=h=null,d=!1},tryToClaimNextHydratableInstance:function(e){if(d){var r=p;if(r){if(!n(e,r)){if(!(r=u(r))||!n(e,r))return e.effectTag|=2,d=!1,void(h=e);t(h,p)}h=e,p=l(r)}else e.effectTag|=2,d=!1,h=e}},prepareToHydrateHostInstance:function(e,t,n){return t=c(e.stateNode,e.type,e.memoizedProps,t,n,e),e.updateQueue=t,null!==t},prepareToHydrateHostTextInstance:function(e){return f(e.stateNode,e.memoizedProps,e)},popHydrationState:function(e){if(e!==h)return!1;if(!d)return i(e),d=!0,!1;var n=e.type;if(5!==e.tag||"head"!==n&&"body"!==n&&!o(n,e.memoizedProps))for(n=p;n;)t(e,n),n=u(n);return i(e),p=h?u(e.stateNode):null,!0}}}function Nt(e){function t(e){oe=Y=!0;var t=e.stateNode;if(t.current===e&&r("177"),t.isReadyForCommit=!1,zr.current=null,1<e.effectTag)if(null!==e.lastEffect){e.lastEffect.nextEffect=e;var n=e.firstEffect}else n=e;else n=e.firstEffect;for(H(),Q=n;null!==Q;){var i=!1,o=void 0;try{for(;null!==Q;){var a=Q.effectTag;if(16&a&&N(Q),128&a){var s=Q.alternate;null!==s&&B(s)}switch(-242&a){case 2:M(Q),Q.effectTag&=-3;break;case 6:M(Q),Q.effectTag&=-3,D(Q.alternate,Q);break;case 4:D(Q.alternate,Q);break;case 8:ae=!0,L(Q),ae=!1}Q=Q.nextEffect}}catch(e){i=!0,o=e}i&&(null===Q&&r("178"),u(Q,o),null!==Q&&(Q=Q.nextEffect))}for(q(),t.current=e,Q=n;null!==Q;){n=!1,i=void 0;try{for(;null!==Q;){var l=Q.effectTag;if(36&l&&F(Q.alternate,Q),128&l&&j(Q),64&l)switch(o=Q,a=void 0,null!==ee&&(a=ee.get(o),ee.delete(o),null==a&&null!==o.alternate&&(o=o.alternate,a=ee.get(o),ee.delete(o))),null==a&&r("184"),o.tag){case 2:o.stateNode.componentDidCatch(a.error,{componentStack:a.componentStack});break;case 3:null===re&&(re=a.error);break;default:r("157")}var c=Q.nextEffect;Q.nextEffect=null,Q=c}}catch(e){n=!0,i=e}n&&(null===Q&&r("178"),u(Q,i),null!==Q&&(Q=Q.nextEffect))}return Y=oe=!1,"function"===typeof vt&&vt(e.stateNode),ne&&(ne.forEach(v),ne=null),null!==re&&(e=re,re=null,w(e)),t=t.current.expirationTime,0===t&&(te=ee=null),t}function n(e){for(;;){var t=I(e.alternate,e,J),n=e.return,r=e.sibling,i=e;if(2147483647===J||2147483647!==i.expirationTime){if(2!==i.tag&&3!==i.tag)var o=0;else o=i.updateQueue,o=null===o?0:o.expirationTime;for(var a=i.child;null!==a;)0!==a.expirationTime&&(0===o||o>a.expirationTime)&&(o=a.expirationTime),a=a.sibling;i.expirationTime=o}if(null!==t)return t;if(null!==n&&(null===n.firstEffect&&(n.firstEffect=e.firstEffect),null!==e.lastEffect&&(null!==n.lastEffect&&(n.lastEffect.nextEffect=e.firstEffect),n.lastEffect=e.lastEffect),1<e.effectTag&&(null!==n.lastEffect?n.lastEffect.nextEffect=e:n.firstEffect=e,n.lastEffect=e)),null!==r)return r;if(null===n){e.stateNode.isReadyForCommit=!0;break}e=n}return null}function i(e){var t=P(e.alternate,e,J);return null===t&&(t=n(e)),zr.current=null,t}function o(e){var t=R(e.alternate,e,J);return null===t&&(t=n(e)),zr.current=null,t}function a(e){if(null!==ee){if(!(0===J||J>e))if(J<=X)for(;null!==Z;)Z=l(Z)?o(Z):i(Z);else for(;null!==Z&&!x();)Z=l(Z)?o(Z):i(Z)}else if(!(0===J||J>e))if(J<=X)for(;null!==Z;)Z=i(Z);else for(;null!==Z&&!x();)Z=i(Z)}function s(e,t){if(Y&&r("243"),Y=!0,e.isReadyForCommit=!1,e!==K||t!==J||null===Z){for(;-1<hi;)fi[hi]=null,hi--;vi=On,pi.current=On,di.current=!1,O(),K=e,J=t,Z=at(K.current,null,t)}var n=!1,i=null;try{a(t)}catch(e){n=!0,i=e}for(;n;){if(ie){re=i;break}var s=Z;if(null===s)ie=!0;else{var l=u(s,i);if(null===l&&r("183"),!ie){try{for(n=l,i=t,l=n;null!==s;){switch(s.tag){case 2:et(s);break;case 5:C(s);break;case 3:A(s);break;case 4:A(s)}if(s===l||s.alternate===l)break;s=s.return}Z=o(n),a(i)}catch(e){n=!0,i=e;continue}break}}}return t=re,ie=Y=!1,re=null,null!==t&&w(t),e.isReadyForCommit?e.current.alternate:null}function u(e,t){var n=zr.current=null,r=!1,i=!1,o=null;if(3===e.tag)n=e,c(e)&&(ie=!0);else for(var a=e.return;null!==a&&null===n;){if(2===a.tag?"function"===typeof a.stateNode.componentDidCatch&&(r=!0,o=Ee(a),n=a,i=!0):3===a.tag&&(n=a),c(a)){if(ae||null!==ne&&(ne.has(a)||null!==a.alternate&&ne.has(a.alternate)))return null;n=null,i=!1}a=a.return}if(null!==n){null===te&&(te=new Set),te.add(n);var s="";a=e;do{e:switch(a.tag){case 0:case 1:case 2:case 5:var u=a._debugOwner,l=a._debugSource,f=Ee(a),h=null;u&&(h=Ee(u)),u=l,f="\n    in "+(f||"Unknown")+(u?" (at "+u.fileName.replace(/^.*[\\\/]/,"")+":"+u.lineNumber+")":h?" (created by "+h+")":"");break e;default:f=""}s+=f,a=a.return}while(a);a=s,e=Ee(e),null===ee&&(ee=new Map),t={componentName:e,componentStack:a,error:t,errorBoundary:r?n.stateNode:null,errorBoundaryFound:r,errorBoundaryName:o,willRetry:i},ee.set(n,t);try{var p=t.error;p&&p.suppressReactErrorLogging||console.error(p)}catch(e){e&&e.suppressReactErrorLogging||console.error(e)}return oe?(null===ne&&(ne=new Set),ne.add(n)):v(n),n}return null===re&&(re=t),null}function l(e){return null!==ee&&(ee.has(e)||null!==e.alternate&&ee.has(e.alternate))}function c(e){return null!==te&&(te.has(e)||null!==e.alternate&&te.has(e.alternate))}function f(){return 20*(1+((g()+100)/20|0))}function h(e){return 0!==$?$:Y?oe?1:J:!G||1&e.internalContextTag?f():1}function p(e,t){return d(e,t,!1)}function d(e,t){for(;null!==e;){if((0===e.expirationTime||e.expirationTime>t)&&(e.expirationTime=t),null!==e.alternate&&(0===e.alternate.expirationTime||e.alternate.expirationTime>t)&&(e.alternate.expirationTime=t),null===e.return){if(3!==e.tag)break;var n=e.stateNode;!Y&&n===K&&t<J&&(Z=K=null,J=0);var i=n,o=t;if(xe>be&&r("185"),null===i.nextScheduledRoot)i.remainingExpirationTime=o,null===ue?(se=ue=i,i.nextScheduledRoot=i):(ue=ue.nextScheduledRoot=i,ue.nextScheduledRoot=se);else{var a=i.remainingExpirationTime;(0===a||o<a)&&(i.remainingExpirationTime=o)}fe||(me?_e&&(he=i,pe=1,E(he,pe)):1===o?b(1,null):y(o)),!Y&&n===K&&t<J&&(Z=K=null,J=0)}e=e.return}}function v(e){d(e,1,!0)}function g(){return X=2+((U()-W)/10|0)}function y(e){if(0!==le){if(e>le)return;V(ce)}var t=U()-W;le=e,ce=z(_,{timeout:10*(e-2)-t})}function m(){var e=0,t=null;if(null!==ue)for(var n=ue,i=se;null!==i;){var o=i.remainingExpirationTime;if(0===o){if((null===n||null===ue)&&r("244"),i===i.nextScheduledRoot){se=ue=i.nextScheduledRoot=null;break}if(i===se)se=o=i.nextScheduledRoot,ue.nextScheduledRoot=o,i.nextScheduledRoot=null;else{if(i===ue){ue=n,ue.nextScheduledRoot=se,i.nextScheduledRoot=null;break}n.nextScheduledRoot=i.nextScheduledRoot,i.nextScheduledRoot=null}i=n.nextScheduledRoot}else{if((0===e||o<e)&&(e=o,t=i),i===ue)break;n=i,i=i.nextScheduledRoot}}n=he,null!==n&&n===t?xe++:xe=0,he=t,pe=e}function _(e){b(0,e)}function b(e,t){for(ye=t,m();null!==he&&0!==pe&&(0===e||pe<=e)&&!de;)E(he,pe),m();if(null!==ye&&(le=0,ce=-1),0!==pe&&y(pe),ye=null,de=!1,xe=0,ve)throw e=ge,ge=null,ve=!1,e}function E(e,n){if(fe&&r("245"),fe=!0,n<=g()){var i=e.finishedWork;null!==i?(e.finishedWork=null,e.remainingExpirationTime=t(i)):(e.finishedWork=null,null!==(i=s(e,n))&&(e.remainingExpirationTime=t(i)))}else i=e.finishedWork,null!==i?(e.finishedWork=null,e.remainingExpirationTime=t(i)):(e.finishedWork=null,null!==(i=s(e,n))&&(x()?e.finishedWork=i:e.remainingExpirationTime=t(i)));fe=!1}function x(){return!(null===ye||ye.timeRemaining()>we)&&(de=!0)}function w(e){null===he&&r("246"),he.remainingExpirationTime=0,ve||(ve=!0,ge=e)}var T=Rt(e),S=It(e),A=T.popHostContainer,C=T.popHostContext,O=T.resetHostContainer,k=Ot(e,T,S,p,h),P=k.beginWork,R=k.beginFailedWork,I=kt(e,T,S).completeWork;T=Pt(e,u);var N=T.commitResetTextContent,M=T.commitPlacement,L=T.commitDeletion,D=T.commitWork,F=T.commitLifeCycles,j=T.commitAttachRef,B=T.commitDetachRef,U=e.now,z=e.scheduleDeferredCallback,V=e.cancelDeferredCallback,G=e.useSyncScheduling,H=e.prepareForCommit,q=e.resetAfterCommit,W=U(),X=2,$=0,Y=!1,Z=null,K=null,J=0,Q=null,ee=null,te=null,ne=null,re=null,ie=!1,oe=!1,ae=!1,se=null,ue=null,le=0,ce=-1,fe=!1,he=null,pe=0,de=!1,ve=!1,ge=null,ye=null,me=!1,_e=!1,be=1e3,xe=0,we=1;return{computeAsyncExpiration:f,computeExpirationForFiber:h,scheduleWork:p,batchedUpdates:function(e,t){var n=me;me=!0;try{return e(t)}finally{(me=n)||fe||b(1,null)}},unbatchedUpdates:function(e){if(me&&!_e){_e=!0;try{return e()}finally{_e=!1}}return e()},flushSync:function(e){var t=me;me=!0;try{e:{var n=$;$=1;try{var i=e();break e}finally{$=n}i=void 0}return i}finally{me=t,fe&&r("187"),b(1,null)}},deferredUpdates:function(e){var t=$;$=f();try{return e()}finally{$=t}}}}function Mt(e){function t(e){return e=Ae(e),null===e?null:e.stateNode}var n=e.getPublicInstance;e=Nt(e);var i=e.computeAsyncExpiration,o=e.computeExpirationForFiber,a=e.scheduleWork;return{createContainer:function(e,t){var n=new ot(3,null,0);return e={current:n,containerInfo:e,pendingChildren:null,remainingExpirationTime:0,isReadyForCommit:!1,finishedWork:null,context:null,pendingContext:null,hydrate:t,nextScheduledRoot:null},n.stateNode=e},updateContainer:function(e,t,n,s){var u=t.current;if(n){n=n._reactInternalFiber;var l;e:{for(2===xe(n)&&2===n.tag||r("170"),l=n;3!==l.tag;){if(Qe(l)){l=l.stateNode.__reactInternalMemoizedMergedChildContext;break e}(l=l.return)||r("171")}l=l.stateNode.context}n=Qe(n)?nt(n,l):l}else n=On;null===t.context?t.context=n:t.pendingContext=n,t=s,t=void 0===t?null:t,s=null!=e&&null!=e.type&&null!=e.type.prototype&&!0===e.type.prototype.unstable_isAsyncReactComponent?i():o(u),_t(u,{expirationTime:s,partialState:{element:e},callback:t,isReplace:!1,isForced:!1,nextCallback:null,next:null}),a(u,s)},batchedUpdates:e.batchedUpdates,unbatchedUpdates:e.unbatchedUpdates,deferredUpdates:e.deferredUpdates,flushSync:e.flushSync,getPublicRootInstance:function(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return n(e.child.stateNode);default:return e.child.stateNode}},findHostInstance:t,findHostInstanceWithNoPortals:function(e){return e=Ce(e),null===e?null:e.stateNode},injectIntoDevTools:function(e){var n=e.findFiberByHostInstance;return dt(En({},e,{findHostInstanceByFiber:function(e){return t(e)},findFiberByHostInstance:function(e){return n?n(e):null}}))}}}function Lt(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:xi,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}function Dt(e){return!!$i.hasOwnProperty(e)||!Xi.hasOwnProperty(e)&&(Wi.test(e)?$i[e]=!0:(Xi[e]=!0,!1))}function Ft(e,t,n){var r=a(t);if(r&&o(t,n)){var i=r.mutationMethod;i?i(e,n):null==n||r.hasBooleanValue&&!n||r.hasNumericValue&&isNaN(n)||r.hasPositiveNumericValue&&1>n||r.hasOverloadedBooleanValue&&!1===n?Bt(e,t):r.mustUseProperty?e[r.propertyName]=n:(t=r.attributeName,(i=r.attributeNamespace)?e.setAttributeNS(i,t,""+n):r.hasBooleanValue||r.hasOverloadedBooleanValue&&!0===n?e.setAttribute(t,""):e.setAttribute(t,""+n))}else jt(e,t,o(t,n)?n:null)}function jt(e,t,n){Dt(t)&&(null==n?e.removeAttribute(t):e.setAttribute(t,""+n))}function Bt(e,t){var n=a(t);n?(t=n.mutationMethod)?t(e,void 0):n.mustUseProperty?e[n.propertyName]=!n.hasBooleanValue&&"":e.removeAttribute(n.attributeName):e.removeAttribute(t)}function Ut(e,t){var n=t.value,r=t.checked;return En({type:void 0,step:void 0,min:void 0,max:void 0},t,{defaultChecked:void 0,defaultValue:void 0,value:null!=n?n:e._wrapperState.initialValue,checked:null!=r?r:e._wrapperState.initialChecked})}function zt(e,t){var n=t.defaultValue;e._wrapperState={initialChecked:null!=t.checked?t.checked:t.defaultChecked,initialValue:null!=t.value?t.value:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Vt(e,t){null!=(t=t.checked)&&Ft(e,"checked",t)}function Gt(e,t){Vt(e,t);var n=t.value;null!=n?0===n&&""===e.value?e.value="0":"number"===t.type?(t=parseFloat(e.value)||0,(n!=t||n==t&&e.value!=n)&&(e.value=""+n)):e.value!==""+n&&(e.value=""+n):(null==t.value&&null!=t.defaultValue&&e.defaultValue!==""+t.defaultValue&&(e.defaultValue=""+t.defaultValue),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked))}function Ht(e,t){switch(t.type){case"submit":case"reset":break;case"color":case"date":case"datetime":case"datetime-local":case"month":case"time":case"week":e.value="",e.value=e.defaultValue;break;default:e.value=e.value}t=e.name,""!==t&&(e.name=""),e.defaultChecked=!e.defaultChecked,e.defaultChecked=!e.defaultChecked,""!==t&&(e.name=t)}function qt(e){var t="";return _n.Children.forEach(e,function(e){null==e||"string"!==typeof e&&"number"!==typeof e||(t+=e)}),t}function Wt(e,t){return e=En({children:void 0},t),(t=qt(t.children))&&(e.children=t),e}function Xt(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+n,t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function $t(e,t){var n=t.value;e._wrapperState={initialValue:null!=n?n:t.defaultValue,wasMultiple:!!t.multiple}}function Yt(e,t){return null!=t.dangerouslySetInnerHTML&&r("91"),En({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Zt(e,t){var n=t.value;null==n&&(n=t.defaultValue,t=t.children,null!=t&&(null!=n&&r("92"),Array.isArray(t)&&(1>=t.length||r("93"),t=t[0]),n=""+t),null==n&&(n="")),e._wrapperState={initialValue:""+n}}function Kt(e,t){var n=t.value;null!=n&&(n=""+n,n!==e.value&&(e.value=n),null==t.defaultValue&&(e.defaultValue=n)),null!=t.defaultValue&&(e.defaultValue=t.defaultValue)}function Jt(e){var t=e.textContent;t===e._wrapperState.initialValue&&(e.value=t)}function Qt(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function en(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?Qt(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}function tn(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}function nn(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=n,o=t[n];i=null==o||"boolean"===typeof o||""===o?"":r||"number"!==typeof o||0===o||Ji.hasOwnProperty(i)&&Ji[i]?(""+o).trim():o+"px","float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}function rn(e,t,n){t&&(eo[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML)&&r("137",e,n()),null!=t.dangerouslySetInnerHTML&&(null!=t.children&&r("60"),"object"===typeof t.dangerouslySetInnerHTML&&"__html"in t.dangerouslySetInnerHTML||r("61")),null!=t.style&&"object"!==typeof t.style&&r("62",n()))}function on(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function an(e,t){e=9===e.nodeType||11===e.nodeType?e:e.ownerDocument;var n=Le(e);t=Zn[t];for(var r=0;r<t.length;r++){var i=t[r];n.hasOwnProperty(i)&&n[i]||("topScroll"===i?Re("topScroll","scroll",e):"topFocus"===i||"topBlur"===i?(Re("topFocus","focus",e),Re("topBlur","blur",e),n.topBlur=!0,n.topFocus=!0):"topCancel"===i?(ne("cancel",!0)&&Re("topCancel","cancel",e),n.topCancel=!0):"topClose"===i?(ne("close",!0)&&Re("topClose","close",e),n.topClose=!0):Yr.hasOwnProperty(i)&&Pe(i,Yr[i],e),n[i]=!0)}}function sn(e,t,n,r){return n=9===n.nodeType?n:n.ownerDocument,r===to&&(r=Qt(e)),r===to?"script"===e?(e=n.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):e="string"===typeof t.is?n.createElement(e,{is:t.is}):n.createElement(e):e=n.createElementNS(r,e),e}function un(e,t){return(9===t.nodeType?t:t.ownerDocument).createTextNode(e)}function ln(e,t,n,r){var i=on(t,n);switch(t){case"iframe":case"object":Pe("topLoad","load",e);var o=n;break;case"video":case"audio":for(o in ro)ro.hasOwnProperty(o)&&Pe(o,ro[o],e);o=n;break;case"source":Pe("topError","error",e),o=n;break;case"img":case"image":Pe("topError","error",e),Pe("topLoad","load",e),o=n;break;case"form":Pe("topReset","reset",e),Pe("topSubmit","submit",e),o=n;break;case"details":Pe("topToggle","toggle",e),o=n;break;case"input":zt(e,n),o=Ut(e,n),Pe("topInvalid","invalid",e),an(r,"onChange");break;case"option":o=Wt(e,n);break;case"select":$t(e,n),o=En({},n,{value:void 0}),Pe("topInvalid","invalid",e),an(r,"onChange");break;case"textarea":Zt(e,n),o=Yt(e,n),Pe("topInvalid","invalid",e),an(r,"onChange");break;default:o=n}rn(t,o,no);var a,s=o;for(a in s)if(s.hasOwnProperty(a)){var u=s[a];"style"===a?nn(e,u,no):"dangerouslySetInnerHTML"===a?null!=(u=u?u.__html:void 0)&&Ki(e,u):"children"===a?"string"===typeof u?("textarea"!==t||""!==u)&&tn(e,u):"number"===typeof u&&tn(e,""+u):"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&"autoFocus"!==a&&(Yn.hasOwnProperty(a)?null!=u&&an(r,a):i?jt(e,a,u):null!=u&&Ft(e,a,u))}switch(t){case"input":oe(e),Ht(e,n);break;case"textarea":oe(e),Jt(e,n);break;case"option":null!=n.value&&e.setAttribute("value",n.value);break;case"select":e.multiple=!!n.multiple,t=n.value,null!=t?Xt(e,!!n.multiple,t,!1):null!=n.defaultValue&&Xt(e,!!n.multiple,n.defaultValue,!0);break;default:"function"===typeof o.onClick&&(e.onclick=xn)}}function cn(e,t,n,r,i){var o=null;switch(t){case"input":n=Ut(e,n),r=Ut(e,r),o=[];break;case"option":n=Wt(e,n),r=Wt(e,r),o=[];break;case"select":n=En({},n,{value:void 0}),r=En({},r,{value:void 0}),o=[];break;case"textarea":n=Yt(e,n),r=Yt(e,r),o=[];break;default:"function"!==typeof n.onClick&&"function"===typeof r.onClick&&(e.onclick=xn)}rn(t,r,no);var a,s;e=null;for(a in n)if(!r.hasOwnProperty(a)&&n.hasOwnProperty(a)&&null!=n[a])if("style"===a)for(s in t=n[a])t.hasOwnProperty(s)&&(e||(e={}),e[s]="");else"dangerouslySetInnerHTML"!==a&&"children"!==a&&"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&"autoFocus"!==a&&(Yn.hasOwnProperty(a)?o||(o=[]):(o=o||[]).push(a,null));for(a in r){var u=r[a];if(t=null!=n?n[a]:void 0,r.hasOwnProperty(a)&&u!==t&&(null!=u||null!=t))if("style"===a)if(t){for(s in t)!t.hasOwnProperty(s)||u&&u.hasOwnProperty(s)||(e||(e={}),e[s]="");for(s in u)u.hasOwnProperty(s)&&t[s]!==u[s]&&(e||(e={}),e[s]=u[s])}else e||(o||(o=[]),o.push(a,e)),e=u;else"dangerouslySetInnerHTML"===a?(u=u?u.__html:void 0,t=t?t.__html:void 0,null!=u&&t!==u&&(o=o||[]).push(a,""+u)):"children"===a?t===u||"string"!==typeof u&&"number"!==typeof u||(o=o||[]).push(a,""+u):"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&(Yn.hasOwnProperty(a)?(null!=u&&an(i,a),o||t===u||(o=[])):(o=o||[]).push(a,u))}return e&&(o=o||[]).push("style",e),o}function fn(e,t,n,r,i){"input"===n&&"radio"===i.type&&null!=i.name&&Vt(e,i),on(n,r),r=on(n,i);for(var o=0;o<t.length;o+=2){var a=t[o],s=t[o+1];"style"===a?nn(e,s,no):"dangerouslySetInnerHTML"===a?Ki(e,s):"children"===a?tn(e,s):r?null!=s?jt(e,a,s):e.removeAttribute(a):null!=s?Ft(e,a,s):Bt(e,a)}switch(n){case"input":Gt(e,i);break;case"textarea":Kt(e,i);break;case"select":e._wrapperState.initialValue=void 0,t=e._wrapperState.wasMultiple,e._wrapperState.wasMultiple=!!i.multiple,n=i.value,null!=n?Xt(e,!!i.multiple,n,!1):t!==!!i.multiple&&(null!=i.defaultValue?Xt(e,!!i.multiple,i.defaultValue,!0):Xt(e,!!i.multiple,i.multiple?[]:"",!1))}}function hn(e,t,n,r,i){switch(t){case"iframe":case"object":Pe("topLoad","load",e);break;case"video":case"audio":for(var o in ro)ro.hasOwnProperty(o)&&Pe(o,ro[o],e);break;case"source":Pe("topError","error",e);break;case"img":case"image":Pe("topError","error",e),Pe("topLoad","load",e);break;case"form":Pe("topReset","reset",e),Pe("topSubmit","submit",e);break;case"details":Pe("topToggle","toggle",e);break;case"input":zt(e,n),Pe("topInvalid","invalid",e),an(i,"onChange");break;case"select":$t(e,n),Pe("topInvalid","invalid",e),an(i,"onChange");break;case"textarea":Zt(e,n),Pe("topInvalid","invalid",e),an(i,"onChange")}rn(t,n,no),r=null;for(var a in n)n.hasOwnProperty(a)&&(o=n[a],"children"===a?"string"===typeof o?e.textContent!==o&&(r=["children",o]):"number"===typeof o&&e.textContent!==""+o&&(r=["children",""+o]):Yn.hasOwnProperty(a)&&null!=o&&an(i,a));switch(t){case"input":oe(e),Ht(e,n);break;case"textarea":oe(e),Jt(e,n);break;case"select":case"option":break;default:"function"===typeof n.onClick&&(e.onclick=xn)}return r}function pn(e,t){return e.nodeValue!==t}function dn(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function vn(e){return!(!(e=e?9===e.nodeType?e.documentElement:e.firstChild:null)||1!==e.nodeType||!e.hasAttribute("data-reactroot"))}function gn(e,t,n,i,o){dn(n)||r("200");var a=n._reactRootContainer;if(a)so.updateContainer(t,a,e,o);else{if(!(i=i||vn(n)))for(a=void 0;a=n.lastChild;)n.removeChild(a);var s=so.createContainer(n,i);a=n._reactRootContainer=s,so.unbatchedUpdates(function(){so.updateContainer(t,s,e,o)})}return so.getPublicRootInstance(a)}function yn(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;return dn(t)||r("200"),Lt(e,t,null,n)}function mn(e,t){this._reactRootContainer=so.createContainer(e,t)}var _n=n(5),bn=n(303),En=n(100),xn=n(66),wn=n(304),Tn=n(305),Sn=n(306),An=n(307),Cn=n(310),On=n(155);_n||r("227");var kn={children:!0,dangerouslySetInnerHTML:!0,defaultValue:!0,defaultChecked:!0,innerHTML:!0,suppressContentEditableWarning:!0,suppressHydrationWarning:!0,style:!0},Pn={MUST_USE_PROPERTY:1,HAS_BOOLEAN_VALUE:4,HAS_NUMERIC_VALUE:8,HAS_POSITIVE_NUMERIC_VALUE:24,HAS_OVERLOADED_BOOLEAN_VALUE:32,HAS_STRING_BOOLEAN_VALUE:64,injectDOMPropertyConfig:function(e){var t=Pn,n=e.Properties||{},o=e.DOMAttributeNamespaces||{},a=e.DOMAttributeNames||{};e=e.DOMMutationMethods||{};for(var s in n){Rn.hasOwnProperty(s)&&r("48",s);var u=s.toLowerCase(),l=n[s];u={attributeName:u,attributeNamespace:null,propertyName:s,mutationMethod:null,mustUseProperty:i(l,t.MUST_USE_PROPERTY),hasBooleanValue:i(l,t.HAS_BOOLEAN_VALUE),hasNumericValue:i(l,t.HAS_NUMERIC_VALUE),hasPositiveNumericValue:i(l,t.HAS_POSITIVE_NUMERIC_VALUE),hasOverloadedBooleanValue:i(l,t.HAS_OVERLOADED_BOOLEAN_VALUE),hasStringBooleanValue:i(l,t.HAS_STRING_BOOLEAN_VALUE)},1>=u.hasBooleanValue+u.hasNumericValue+u.hasOverloadedBooleanValue||r("50",s),a.hasOwnProperty(s)&&(u.attributeName=a[s]),o.hasOwnProperty(s)&&(u.attributeNamespace=o[s]),e.hasOwnProperty(s)&&(u.mutationMethod=e[s]),Rn[s]=u}}},Rn={},In=Pn,Nn=In.MUST_USE_PROPERTY,Mn=In.HAS_BOOLEAN_VALUE,Ln=In.HAS_NUMERIC_VALUE,Dn=In.HAS_POSITIVE_NUMERIC_VALUE,Fn=In.HAS_OVERLOADED_BOOLEAN_VALUE,jn=In.HAS_STRING_BOOLEAN_VALUE,Bn={Properties:{allowFullScreen:Mn,async:Mn,autoFocus:Mn,autoPlay:Mn,capture:Fn,checked:Nn|Mn,cols:Dn,contentEditable:jn,controls:Mn,default:Mn,defer:Mn,disabled:Mn,download:Fn,draggable:jn,formNoValidate:Mn,hidden:Mn,loop:Mn,multiple:Nn|Mn,muted:Nn|Mn,noValidate:Mn,open:Mn,playsInline:Mn,readOnly:Mn,required:Mn,reversed:Mn,rows:Dn,rowSpan:Ln,scoped:Mn,seamless:Mn,selected:Nn|Mn,size:Dn,start:Ln,span:Dn,spellCheck:jn,style:0,tabIndex:0,itemScope:Mn,acceptCharset:0,className:0,htmlFor:0,httpEquiv:0,value:jn},DOMAttributeNames:{acceptCharset:"accept-charset",className:"class",htmlFor:"for",httpEquiv:"http-equiv"},DOMMutationMethods:{value:function(e,t){if(null==t)return e.removeAttribute("value");"number"!==e.type||!1===e.hasAttribute("value")?e.setAttribute("value",""+t):e.validity&&!e.validity.badInput&&e.ownerDocument.activeElement!==e&&e.setAttribute("value",""+t)}}},Un=In.HAS_STRING_BOOLEAN_VALUE,zn={xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace"},Vn={Properties:{autoReverse:Un,externalResourcesRequired:Un,preserveAlpha:Un},DOMAttributeNames:{autoReverse:"autoReverse",externalResourcesRequired:"externalResourcesRequired",preserveAlpha:"preserveAlpha"},DOMAttributeNamespaces:{xlinkActuate:zn.xlink,xlinkArcrole:zn.xlink,xlinkHref:zn.xlink,xlinkRole:zn.xlink,xlinkShow:zn.xlink,xlinkTitle:zn.xlink,xlinkType:zn.xlink,xmlBase:zn.xml,xmlLang:zn.xml,xmlSpace:zn.xml}},Gn=/[\-\:]([a-z])/g;"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode x-height xlink:actuate xlink:arcrole xlink:href xlink:role xlink:show xlink:title xlink:type xml:base xmlns:xlink xml:lang xml:space".split(" ").forEach(function(e){var t=e.replace(Gn,s);Vn.Properties[t]=0,Vn.DOMAttributeNames[t]=e}),In.injectDOMPropertyConfig(Bn),In.injectDOMPropertyConfig(Vn);var Hn={_caughtError:null,_hasCaughtError:!1,_rethrowError:null,_hasRethrowError:!1,injection:{injectErrorUtils:function(e){"function"!==typeof e.invokeGuardedCallback&&r("197"),u=e.invokeGuardedCallback}},invokeGuardedCallback:function(e,t,n,r,i,o,a,s,l){u.apply(Hn,arguments)},invokeGuardedCallbackAndCatchFirstError:function(e,t,n,r,i,o,a,s,u){if(Hn.invokeGuardedCallback.apply(this,arguments),Hn.hasCaughtError()){var l=Hn.clearCaughtError();Hn._hasRethrowError||(Hn._hasRethrowError=!0,Hn._rethrowError=l)}},rethrowCaughtError:function(){return l.apply(Hn,arguments)},hasCaughtError:function(){return Hn._hasCaughtError},clearCaughtError:function(){if(Hn._hasCaughtError){var e=Hn._caughtError;return Hn._caughtError=null,Hn._hasCaughtError=!1,e}r("198")}},qn=null,Wn={},Xn=[],$n={},Yn={},Zn={},Kn=Object.freeze({plugins:Xn,eventNameDispatchConfigs:$n,registrationNameModules:Yn,registrationNameDependencies:Zn,possibleRegistrationNames:null,injectEventPluginOrder:h,injectEventPluginsByName:p}),Jn=null,Qn=null,er=null,tr=null,nr={injectEventPluginOrder:h,injectEventPluginsByName:p},rr=Object.freeze({injection:nr,getListener:b,extractEvents:E,enqueueEvents:x,processEventQueue:w}),ir=Math.random().toString(36).slice(2),or="__reactInternalInstance$"+ir,ar="__reactEventHandlers$"+ir,sr=Object.freeze({precacheFiberNode:function(e,t){t[or]=e},getClosestInstanceFromNode:T,getInstanceFromNode:function(e){return e=e[or],!e||5!==e.tag&&6!==e.tag?null:e},getNodeFromInstance:S,getFiberCurrentPropsFromNode:A,updateFiberProps:function(e,t){e[ar]=t}}),ur=Object.freeze({accumulateTwoPhaseDispatches:M,accumulateTwoPhaseDispatchesSkipTarget:function(e){g(e,R)},accumulateEnterLeaveDispatches:L,accumulateDirectDispatches:function(e){g(e,N)}}),lr=null,cr={_root:null,_startText:null,_fallbackText:null},fr="dispatchConfig _targetInst nativeEvent isDefaultPrevented isPropagationStopped _dispatchListeners _dispatchInstances".split(" "),hr={type:null,target:null,currentTarget:xn.thatReturnsNull,eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null};En(B.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=xn.thatReturnsTrue)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=xn.thatReturnsTrue)},persist:function(){this.isPersistent=xn.thatReturnsTrue},isPersistent:xn.thatReturnsFalse,destructor:function(){var e,t=this.constructor.Interface;for(e in t)this[e]=null;for(t=0;t<fr.length;t++)this[fr[t]]=null}}),B.Interface=hr,B.augmentClass=function(e,t){function n(){}n.prototype=this.prototype;var r=new n;En(r,e.prototype),e.prototype=r,e.prototype.constructor=e,e.Interface=En({},this.Interface,t),e.augmentClass=this.augmentClass,V(e)},V(B),B.augmentClass(G,{data:null}),B.augmentClass(H,{data:null});var pr=[9,13,27,32],dr=bn.canUseDOM&&"CompositionEvent"in window,vr=null;bn.canUseDOM&&"documentMode"in document&&(vr=document.documentMode);var gr;if(gr=bn.canUseDOM&&"TextEvent"in window&&!vr){var yr=window.opera;gr=!("object"===typeof yr&&"function"===typeof yr.version&&12>=parseInt(yr.version(),10))}var mr,_r=gr,br=bn.canUseDOM&&(!dr||vr&&8<vr&&11>=vr),Er=String.fromCharCode(32),xr={beforeInput:{phasedRegistrationNames:{bubbled:"onBeforeInput",captured:"onBeforeInputCapture"},dependencies:["topCompositionEnd","topKeyPress","topTextInput","topPaste"]},compositionEnd:{phasedRegistrationNames:{bubbled:"onCompositionEnd",captured:"onCompositionEndCapture"},dependencies:"topBlur topCompositionEnd topKeyDown topKeyPress topKeyUp topMouseDown".split(" ")},compositionStart:{phasedRegistrationNames:{bubbled:"onCompositionStart",captured:"onCompositionStartCapture"},dependencies:"topBlur topCompositionStart topKeyDown topKeyPress topKeyUp topMouseDown".split(" ")},compositionUpdate:{phasedRegistrationNames:{bubbled:"onCompositionUpdate",captured:"onCompositionUpdateCapture"},dependencies:"topBlur topCompositionUpdate topKeyDown topKeyPress topKeyUp topMouseDown".split(" ")}},wr=!1,Tr=!1,Sr={eventTypes:xr,extractEvents:function(e,t,n,r){var i;if(dr)e:{switch(e){case"topCompositionStart":var o=xr.compositionStart;break e;case"topCompositionEnd":o=xr.compositionEnd;break e;case"topCompositionUpdate":o=xr.compositionUpdate;break e}o=void 0}else Tr?q(e,n)&&(o=xr.compositionEnd):"topKeyDown"===e&&229===n.keyCode&&(o=xr.compositionStart);return o?(br&&(Tr||o!==xr.compositionStart?o===xr.compositionEnd&&Tr&&(i=F()):(cr._root=r,cr._startText=j(),Tr=!0)),o=G.getPooled(o,t,n,r),i?o.data=i:null!==(i=W(n))&&(o.data=i),M(o),i=o):i=null,(e=_r?X(e,n):$(e,n))?(t=H.getPooled(xr.beforeInput,t,n,r),t.data=e,M(t)):t=null,[i,t]}},Ar=null,Cr=null,Or=null,kr={injectFiberControlledHostComponent:function(e){Ar=e}},Pr=Object.freeze({injection:kr,enqueueStateRestore:Z,restoreStateIfNeeded:K}),Rr=!1,Ir={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};bn.canUseDOM&&(mr=document.implementation&&document.implementation.hasFeature&&!0!==document.implementation.hasFeature("",""));var Nr={change:{phasedRegistrationNames:{bubbled:"onChange",captured:"onChangeCapture"},dependencies:"topBlur topChange topClick topFocus topInput topKeyDown topKeyUp topSelectionChange".split(" ")}},Mr=null,Lr=null,Dr=!1;bn.canUseDOM&&(Dr=ne("input")&&(!document.documentMode||9<document.documentMode));var Fr={eventTypes:Nr,_isInputEventSupported:Dr,extractEvents:function(e,t,n,r){var i=t?S(t):window,o=i.nodeName&&i.nodeName.toLowerCase();if("select"===o||"input"===o&&"file"===i.type)var a=ce;else if(ee(i))if(Dr)a=ge;else{a=de;var s=pe}else!(o=i.nodeName)||"input"!==o.toLowerCase()||"checkbox"!==i.type&&"radio"!==i.type||(a=ve);if(a&&(a=a(e,t)))return se(a,n,r);s&&s(e,i,t),"topBlur"===e&&null!=t&&(e=t._wrapperState||i._wrapperState)&&e.controlled&&"number"===i.type&&(e=""+i.value,i.getAttribute("value")!==e&&i.setAttribute("value",e))}};B.augmentClass(ye,{view:null,detail:null});var jr={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};ye.augmentClass(be,{screenX:null,screenY:null,clientX:null,clientY:null,pageX:null,pageY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:_e,button:null,buttons:null,relatedTarget:function(e){return e.relatedTarget||(e.fromElement===e.srcElement?e.toElement:e.fromElement)}});var Br={mouseEnter:{registrationName:"onMouseEnter",dependencies:["topMouseOut","topMouseOver"]},mouseLeave:{registrationName:"onMouseLeave",dependencies:["topMouseOut","topMouseOver"]}},Ur={eventTypes:Br,extractEvents:function(e,t,n,r){if("topMouseOver"===e&&(n.relatedTarget||n.fromElement)||"topMouseOut"!==e&&"topMouseOver"!==e)return null;var i=r.window===r?r:(i=r.ownerDocument)?i.defaultView||i.parentWindow:window;if("topMouseOut"===e?(e=t,t=(t=n.relatedTarget||n.toElement)?T(t):null):e=null,e===t)return null;var o=null==e?i:S(e);i=null==t?i:S(t);var a=be.getPooled(Br.mouseLeave,e,n,r);return a.type="mouseleave",a.target=o,a.relatedTarget=i,n=be.getPooled(Br.mouseEnter,t,n,r),n.type="mouseenter",n.target=i,n.relatedTarget=o,L(a,n,e,t),[a,n]}},zr=_n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Vr=[],Gr=!0,Hr=void 0,qr=Object.freeze({get _enabled(){return Gr},get _handleTopLevel(){return Hr},setHandleTopLevel:function(e){Hr=e},setEnabled:ke,isEnabled:function(){return Gr},trapBubbledEvent:Pe,trapCapturedEvent:Re,dispatchEvent:Ie}),Wr={animationend:Ne("Animation","AnimationEnd"),animationiteration:Ne("Animation","AnimationIteration"),animationstart:Ne("Animation","AnimationStart"),transitionend:Ne("Transition","TransitionEnd")},Xr={},$r={};bn.canUseDOM&&($r=document.createElement("div").style,"AnimationEvent"in window||(delete Wr.animationend.animation,delete Wr.animationiteration.animation,delete Wr.animationstart.animation),"TransitionEvent"in window||delete Wr.transitionend.transition);var Yr={topAbort:"abort",topAnimationEnd:Me("animationend")||"animationend",topAnimationIteration:Me("animationiteration")||"animationiteration",topAnimationStart:Me("animationstart")||"animationstart",topBlur:"blur",topCancel:"cancel",topCanPlay:"canplay",topCanPlayThrough:"canplaythrough",topChange:"change",topClick:"click",topClose:"close",topCompositionEnd:"compositionend",topCompositionStart:"compositionstart",topCompositionUpdate:"compositionupdate",topContextMenu:"contextmenu",topCopy:"copy",topCut:"cut",topDoubleClick:"dblclick",topDrag:"drag",topDragEnd:"dragend",topDragEnter:"dragenter",topDragExit:"dragexit",topDragLeave:"dragleave",topDragOver:"dragover",topDragStart:"dragstart",topDrop:"drop",topDurationChange:"durationchange",topEmptied:"emptied",topEncrypted:"encrypted",topEnded:"ended",topError:"error",topFocus:"focus",topInput:"input",topKeyDown:"keydown",topKeyPress:"keypress",topKeyUp:"keyup",topLoadedData:"loadeddata",topLoad:"load",topLoadedMetadata:"loadedmetadata",topLoadStart:"loadstart",topMouseDown:"mousedown",topMouseMove:"mousemove",topMouseOut:"mouseout",topMouseOver:"mouseover",topMouseUp:"mouseup",topPaste:"paste",topPause:"pause",topPlay:"play",topPlaying:"playing",topProgress:"progress",topRateChange:"ratechange",topScroll:"scroll",topSeeked:"seeked",topSeeking:"seeking",topSelectionChange:"selectionchange",topStalled:"stalled",topSuspend:"suspend",topTextInput:"textInput",topTimeUpdate:"timeupdate",topToggle:"toggle",topTouchCancel:"touchcancel",topTouchEnd:"touchend",topTouchMove:"touchmove",topTouchStart:"touchstart",topTransitionEnd:Me("transitionend")||"transitionend",topVolumeChange:"volumechange",topWaiting:"waiting",topWheel:"wheel"},Zr={},Kr=0,Jr="_reactListenersID"+(""+Math.random()).slice(2),Qr=bn.canUseDOM&&"documentMode"in document&&11>=document.documentMode,ei={select:{phasedRegistrationNames:{bubbled:"onSelect",captured:"onSelectCapture"},dependencies:"topBlur topContextMenu topFocus topKeyDown topKeyUp topMouseDown topMouseUp topSelectionChange".split(" ")}},ti=null,ni=null,ri=null,ii=!1,oi={eventTypes:ei,extractEvents:function(e,t,n,r){var i,o=r.window===r?r.document:9===r.nodeType?r:r.ownerDocument;if(!(i=!o)){e:{o=Le(o),i=Zn.onSelect;for(var a=0;a<i.length;a++){var s=i[a];if(!o.hasOwnProperty(s)||!o[s]){o=!1;break e}}o=!0}i=!o}if(i)return null;switch(o=t?S(t):window,e){case"topFocus":(ee(o)||"true"===o.contentEditable)&&(ti=o,ni=t,ri=null);break;case"topBlur":ri=ni=ti=null;break;case"topMouseDown":ii=!0;break;case"topContextMenu":case"topMouseUp":return ii=!1,Be(n,r);case"topSelectionChange":if(Qr)break;case"topKeyDown":case"topKeyUp":return Be(n,r)}return null}};B.augmentClass(Ue,{animationName:null,elapsedTime:null,pseudoElement:null}),B.augmentClass(ze,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),ye.augmentClass(Ve,{relatedTarget:null});var ai={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},si={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"};ye.augmentClass(He,{key:function(e){if(e.key){var t=ai[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?(e=Ge(e),13===e?"Enter":String.fromCharCode(e)):"keydown"===e.type||"keyup"===e.type?si[e.keyCode]||"Unidentified":""},location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:_e,charCode:function(e){return"keypress"===e.type?Ge(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?Ge(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),be.augmentClass(qe,{dataTransfer:null}),ye.augmentClass(We,{touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:_e}),B.augmentClass(Xe,{propertyName:null,elapsedTime:null,pseudoElement:null}),be.augmentClass($e,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:null,deltaMode:null});var ui={},li={};"abort animationEnd animationIteration animationStart blur cancel canPlay canPlayThrough click close contextMenu copy cut doubleClick drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error focus input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing progress rateChange reset scroll seeked seeking stalled submit suspend timeUpdate toggle touchCancel touchEnd touchMove touchStart transitionEnd volumeChange waiting wheel".split(" ").forEach(function(e){var t=e[0].toUpperCase()+e.slice(1),n="on"+t;t="top"+t,n={phasedRegistrationNames:{bubbled:n,captured:n+"Capture"},dependencies:[t]},ui[e]=n,li[t]=n});var ci={eventTypes:ui,extractEvents:function(e,t,n,r){var i=li[e];if(!i)return null;switch(e){case"topKeyPress":if(0===Ge(n))return null;case"topKeyDown":case"topKeyUp":e=He;break;case"topBlur":case"topFocus":e=Ve;break;case"topClick":if(2===n.button)return null;case"topDoubleClick":case"topMouseDown":case"topMouseMove":case"topMouseUp":case"topMouseOut":case"topMouseOver":case"topContextMenu":e=be;break;case"topDrag":case"topDragEnd":case"topDragEnter":case"topDragExit":case"topDragLeave":case"topDragOver":case"topDragStart":case"topDrop":e=qe;break;case"topTouchCancel":case"topTouchEnd":case"topTouchMove":case"topTouchStart":e=We;break;case"topAnimationEnd":case"topAnimationIteration":case"topAnimationStart":e=Ue;break;case"topTransitionEnd":e=Xe;break;case"topScroll":e=ye;break;case"topWheel":e=$e;break;case"topCopy":case"topCut":case"topPaste":e=ze;break;default:e=B}return t=e.getPooled(i,t,n,r),M(t),t}};Hr=function(e,t,n,r){e=E(e,t,n,r),x(e),w(!1)},nr.injectEventPluginOrder("ResponderEventPlugin SimpleEventPlugin TapEventPlugin EnterLeaveEventPlugin ChangeEventPlugin SelectEventPlugin BeforeInputEventPlugin".split(" ")),Jn=sr.getFiberCurrentPropsFromNode,Qn=sr.getInstanceFromNode,er=sr.getNodeFromInstance,nr.injectEventPluginsByName({SimpleEventPlugin:ci,EnterLeaveEventPlugin:Ur,ChangeEventPlugin:Fr,SelectEventPlugin:oi,BeforeInputEventPlugin:Sr});var fi=[],hi=-1;new Set;var pi={current:On},di={current:!1},vi=On,gi=null,yi=null,mi="function"===typeof Symbol&&Symbol.for,_i=mi?Symbol.for("react.element"):60103,bi=mi?Symbol.for("react.call"):60104,Ei=mi?Symbol.for("react.return"):60105,xi=mi?Symbol.for("react.portal"):60106,wi=mi?Symbol.for("react.fragment"):60107,Ti="function"===typeof Symbol&&Symbol.iterator,Si=Array.isArray,Ai=Ct(!0),Ci=Ct(!1),Oi={},ki=Object.freeze({default:Mt}),Pi=ki&&Mt||ki,Ri=Pi.default?Pi.default:Pi,Ii="object"===typeof performance&&"function"===typeof performance.now,Ni=void 0;Ni=Ii?function(){return performance.now()}:function(){return Date.now()};var Mi=void 0,Li=void 0;if(bn.canUseDOM)if("function"!==typeof requestIdleCallback||"function"!==typeof cancelIdleCallback){var Di,Fi=null,ji=!1,Bi=-1,Ui=!1,zi=0,Vi=33,Gi=33;Di=Ii?{didTimeout:!1,timeRemaining:function(){var e=zi-performance.now();return 0<e?e:0}}:{didTimeout:!1,timeRemaining:function(){var e=zi-Date.now();return 0<e?e:0}};var Hi="__reactIdleCallback$"+Math.random().toString(36).slice(2);window.addEventListener("message",function(e){if(e.source===window&&e.data===Hi){if(ji=!1,e=Ni(),0>=zi-e){if(!(-1!==Bi&&Bi<=e))return void(Ui||(Ui=!0,requestAnimationFrame(qi)));Di.didTimeout=!0}else Di.didTimeout=!1;Bi=-1,e=Fi,Fi=null,null!==e&&e(Di)}},!1);var qi=function(e){Ui=!1;var t=e-zi+Gi;t<Gi&&Vi<Gi?(8>t&&(t=8),Gi=t<Vi?Vi:t):Vi=t,zi=e+Gi,ji||(ji=!0,window.postMessage(Hi,"*"))};Mi=function(e,t){return Fi=e,null!=t&&"number"===typeof t.timeout&&(Bi=Ni()+t.timeout),Ui||(Ui=!0,requestAnimationFrame(qi)),0},Li=function(){Fi=null,ji=!1,Bi=-1}}else Mi=window.requestIdleCallback,Li=window.cancelIdleCallback;else Mi=function(e){return setTimeout(function(){e({timeRemaining:function(){return 1/0}})})},Li=function(e){clearTimeout(e)};var Wi=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Xi={},$i={},Yi={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"},Zi=void 0,Ki=function(e){return"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(t,n,r,i){MSApp.execUnsafeLocalFunction(function(){return e(t,n)})}:e}(function(e,t){if(e.namespaceURI!==Yi.svg||"innerHTML"in e)e.innerHTML=t;else{for(Zi=Zi||document.createElement("div"),Zi.innerHTML="<svg>"+t+"</svg>",t=Zi.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}}),Ji={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Qi=["Webkit","ms","Moz","O"];Object.keys(Ji).forEach(function(e){Qi.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Ji[t]=Ji[e]})});var eo=En({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0}),to=Yi.html,no=xn.thatReturns(""),ro={topAbort:"abort",topCanPlay:"canplay",topCanPlayThrough:"canplaythrough",topDurationChange:"durationchange",topEmptied:"emptied",topEncrypted:"encrypted",topEnded:"ended",topError:"error",topLoadedData:"loadeddata",topLoadedMetadata:"loadedmetadata",topLoadStart:"loadstart",topPause:"pause",topPlay:"play",topPlaying:"playing",topProgress:"progress",topRateChange:"ratechange",topSeeked:"seeked",topSeeking:"seeking",topStalled:"stalled",topSuspend:"suspend",topTimeUpdate:"timeupdate",topVolumeChange:"volumechange",topWaiting:"waiting"},io=Object.freeze({createElement:sn,createTextNode:un,setInitialProperties:ln,diffProperties:cn,updateProperties:fn,diffHydratedProperties:hn,diffHydratedText:pn,warnForUnmatchedText:function(){},warnForDeletedHydratableElement:function(){},warnForDeletedHydratableText:function(){},warnForInsertedHydratedElement:function(){},warnForInsertedHydratedText:function(){},restoreControlledState:function(e,t,n){switch(t){case"input":if(Gt(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var i=n[t];if(i!==e&&i.form===e.form){var o=A(i);o||r("90"),ae(i),Gt(i,o)}}}break;case"textarea":Kt(e,n);break;case"select":null!=(t=n.value)&&Xt(e,!!n.multiple,t,!1)}}});kr.injectFiberControlledHostComponent(io);var oo=null,ao=null,so=Ri({getRootHostContext:function(e){var t=e.nodeType;switch(t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:en(null,"");break;default:t=8===t?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=en(e,t)}return e},getChildHostContext:function(e,t){return en(e,t)},getPublicInstance:function(e){return e},prepareForCommit:function(){oo=Gr;var e=Tn();if(je(e)){if("selectionStart"in e)var t={start:e.selectionStart,end:e.selectionEnd};else e:{var n=window.getSelection&&window.getSelection();if(n&&0!==n.rangeCount){t=n.anchorNode;var r=n.anchorOffset,i=n.focusNode;n=n.focusOffset;try{t.nodeType,i.nodeType}catch(e){t=null;break e}var o=0,a=-1,s=-1,u=0,l=0,c=e,f=null;t:for(;;){for(var h;c!==t||0!==r&&3!==c.nodeType||(a=o+r),c!==i||0!==n&&3!==c.nodeType||(s=o+n),3===c.nodeType&&(o+=c.nodeValue.length),null!==(h=c.firstChild);)f=c,c=h;for(;;){if(c===e)break t;if(f===t&&++u===r&&(a=o),f===i&&++l===n&&(s=o),null!==(h=c.nextSibling))break;c=f,f=c.parentNode}c=h}t=-1===a||-1===s?null:{start:a,end:s}}else t=null}t=t||{start:0,end:0}}else t=null;ao={focusedElem:e,selectionRange:t},ke(!1)},resetAfterCommit:function(){var e=ao,t=Tn(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&An(document.documentElement,n)){if(je(n))if(t=r.start,e=r.end,void 0===e&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(window.getSelection){t=window.getSelection();var i=n[D()].length;e=Math.min(r.start,i),r=void 0===r.end?e:Math.min(r.end,i),!t.extend&&e>r&&(i=r,r=e,e=i),i=Fe(n,e);var o=Fe(n,r);if(i&&o&&(1!==t.rangeCount||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)){var a=document.createRange();a.setStart(i.node,i.offset),t.removeAllRanges(),e>r?(t.addRange(a),t.extend(o.node,o.offset)):(a.setEnd(o.node,o.offset),t.addRange(a))}}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(Cn(n),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}ao=null,ke(oo),oo=null},createInstance:function(e,t,n,r,i){return e=sn(e,t,n,r),e[or]=i,e[ar]=t,e},appendInitialChild:function(e,t){e.appendChild(t)},finalizeInitialChildren:function(e,t,n,r){ln(e,t,n,r);e:{switch(t){case"button":case"input":case"select":case"textarea":e=!!n.autoFocus;break e}e=!1}return e},prepareUpdate:function(e,t,n,r,i){return cn(e,t,n,r,i)},shouldSetTextContent:function(e,t){return"textarea"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&"string"===typeof t.dangerouslySetInnerHTML.__html},shouldDeprioritizeSubtree:function(e,t){return!!t.hidden},createTextInstance:function(e,t,n,r){return e=un(e,t),e[or]=r,e},now:Ni,mutation:{commitMount:function(e){e.focus()},commitUpdate:function(e,t,n,r,i){e[ar]=i,fn(e,t,n,r,i)},resetTextContent:function(e){e.textContent=""},commitTextUpdate:function(e,t,n){e.nodeValue=n},appendChild:function(e,t){e.appendChild(t)},appendChildToContainer:function(e,t){8===e.nodeType?e.parentNode.insertBefore(t,e):e.appendChild(t)},insertBefore:function(e,t,n){e.insertBefore(t,n)},insertInContainerBefore:function(e,t,n){8===e.nodeType?e.parentNode.insertBefore(t,n):e.insertBefore(t,n)},removeChild:function(e,t){e.removeChild(t)},removeChildFromContainer:function(e,t){8===e.nodeType?e.parentNode.removeChild(t):e.removeChild(t)}},hydration:{canHydrateInstance:function(e,t){return 1!==e.nodeType||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e},canHydrateTextInstance:function(e,t){return""===t||3!==e.nodeType?null:e},getNextHydratableSibling:function(e){for(e=e.nextSibling;e&&1!==e.nodeType&&3!==e.nodeType;)e=e.nextSibling;return e},getFirstHydratableChild:function(e){for(e=e.firstChild;e&&1!==e.nodeType&&3!==e.nodeType;)e=e.nextSibling;return e},hydrateInstance:function(e,t,n,r,i,o){return e[or]=o,e[ar]=n,hn(e,t,n,i,r)},hydrateTextInstance:function(e,t,n){return e[or]=n,pn(e,t)},didNotMatchHydratedContainerTextInstance:function(){},didNotMatchHydratedTextInstance:function(){},didNotHydrateContainerInstance:function(){},didNotHydrateInstance:function(){},didNotFindHydratableContainerInstance:function(){},didNotFindHydratableContainerTextInstance:function(){},didNotFindHydratableInstance:function(){},didNotFindHydratableTextInstance:function(){}},scheduleDeferredCallback:Mi,cancelDeferredCallback:Li,useSyncScheduling:!0});J=so.batchedUpdates,mn.prototype.render=function(e,t){so.updateContainer(e,this._reactRootContainer,null,t)},mn.prototype.unmount=function(e){so.updateContainer(null,this._reactRootContainer,null,e)};var uo={createPortal:yn,findDOMNode:function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternalFiber;if(t)return so.findHostInstance(t);"function"===typeof e.render?r("188"):r("213",Object.keys(e))},hydrate:function(e,t,n){return gn(null,e,t,!0,n)},render:function(e,t,n){return gn(null,e,t,!1,n)},unstable_renderSubtreeIntoContainer:function(e,t,n,i){return(null==e||void 0===e._reactInternalFiber)&&r("38"),gn(e,t,n,!1,i)},unmountComponentAtNode:function(e){return dn(e)||r("40"),!!e._reactRootContainer&&(so.unbatchedUpdates(function(){gn(null,null,e,!1,function(){e._reactRootContainer=null})}),!0)},unstable_createPortal:yn,unstable_batchedUpdates:Q,unstable_deferredUpdates:so.deferredUpdates,flushSync:so.flushSync,__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:{EventPluginHub:rr,EventPluginRegistry:Kn,EventPropagators:ur,ReactControlledComponent:Pr,ReactDOMComponentTree:sr,ReactDOMEventListener:qr}};so.injectIntoDevTools({findFiberByHostInstance:T,bundleType:0,version:"16.2.0",rendererPackageName:"react-dom"});var lo=Object.freeze({default:uo}),co=lo&&uo||lo;e.exports=co.default?co.default:co},function(e,t,n){"use strict";var r=!("undefined"===typeof window||!window.document||!window.document.createElement),i={canUseDOM:r,canUseWorkers:"undefined"!==typeof Worker,canUseEventListeners:r&&!(!window.addEventListener&&!window.attachEvent),canUseViewport:r&&!!window.screen,isInWorker:!r};e.exports=i},function(e,t,n){"use strict";var r=n(66),i={listen:function(e,t,n){return e.addEventListener?(e.addEventListener(t,n,!1),{remove:function(){e.removeEventListener(t,n,!1)}}):e.attachEvent?(e.attachEvent("on"+t,n),{remove:function(){e.detachEvent("on"+t,n)}}):void 0},capture:function(e,t,n){return e.addEventListener?(e.addEventListener(t,n,!0),{remove:function(){e.removeEventListener(t,n,!0)}}):{remove:r}},registerDefault:function(){}};e.exports=i},function(e,t,n){"use strict";function r(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}e.exports=r},function(e,t,n){"use strict";function r(e,t){return e===t?0!==e||0!==t||1/e===1/t:e!==e&&t!==t}function i(e,t){if(r(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;for(var a=0;a<n.length;a++)if(!o.call(t,n[a])||!r(e[n[a]],t[n[a]]))return!1;return!0}var o=Object.prototype.hasOwnProperty;e.exports=i},function(e,t,n){"use strict";function r(e,t){return!(!e||!t)&&(e===t||!i(e)&&(i(t)?r(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}var i=n(308);e.exports=r},function(e,t,n){"use strict";function r(e){return i(e)&&3==e.nodeType}var i=n(309);e.exports=r},function(e,t,n){"use strict";function r(e){var t=e?e.ownerDocument||e:document,n=t.defaultView||window;return!(!e||!("function"===typeof n.Node?e instanceof n.Node:"object"===typeof e&&"number"===typeof e.nodeType&&"string"===typeof e.nodeName))}e.exports=r},function(e,t,n){"use strict";function r(e){try{e.focus()}catch(e){}}e.exports=r},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(5),s=n.n(a),u=n(156),l=(n.n(u),n(312)),c=n.n(l),f=n(405),h=n(531),p=(n(533),n(535)),d=n(538),v=n(542),g=(n.n(v),n(543)),y=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),m={biz:"/data/business.csv"},_=function(e){function t(e){r(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={viewport:Object.assign({},f.a.defaultViewport,{width:500,height:500}),db:null,data:null,clickedDatum:null,view:"biz",timer:null,currentTimestamp:null,shouldStop:!1},n.tick=n.tick.bind(n),n}return o(t,e),y(t,[{key:"componentDidMount",value:function(){var e=this;window.addEventListener("resize",this._resize.bind(this)),this._resize(),Object(g.a)(m[this.state.view],function(t,n){if(!t){var r=new d.a(n,"biz","\n        CREATE TABLE biz (\n          lat            FLOAT,\n          lng            FLOAT,\n          start_date     VARCHAR(10),\n          end_date       VARCHAR(10),\n          business_name  VARCHAR(100),\n          business_type  VARCHAR(100)\n        )","start_date","end_date");e.setState({db:r,data:r.query("SELECT * FROM biz"),timer:setInterval(e.tick,100)})}})}},{key:"tick",value:function(){if(!this.state.shouldStop){var e=this.state.db.nextResultSet();e&&this.setState({data:e,currentTimestamp:this.state.db.currTs})}}},{key:"_resize",value:function(){this._onViewportChange({width:window.innerWidth,height:window.innerHeight})}},{key:"_onViewportChange",value:function(e){this.setState({viewport:Object.assign({},this.state.viewport,e)})}},{key:"_remapProperties",value:function(e){}},{key:"_onHover",value:function(e){}},{key:"_onClick",value:function(e){try{var t=e.object;this.setState({clickedDatum:t,shouldStop:!this.state.shouldStop})}catch(e){this.setState({clickedDatum:null,shouldStop:!1})}}},{key:"render",value:function(){var e=this.state,t=e.viewport,n=e.data,r=(e.view,e.clickedDatum),i=e.currentTimestamp,o=void 0;return o=n?s.a.createElement(c.a,Object.assign({},t,{onViewportChange:this._onViewportChange.bind(this),mapboxApiAccessToken:"pk.eyJ1IjoidWJlcmRhdGEiLCJhIjoidGllX1gxUSJ9.gElUooDF7u51guCQREmAhg"}),s.a.createElement(f.a,{viewport:t,data:n,onHover:this._onHover.bind(this),onClick:this._onClick.bind(this),extruded:!0,view:"biz",radius:30})):null,s.a.createElement("div",null,s.a.createElement("div",{style:{grid:"1 2"}},s.a.createElement(h.a,{title:"Fall and Rise of San Franciscan Growth",subtitle:i})),o,s.a.createElement("div",{style:{background:"black",zLevel:100}}," Hold shift to rotate "),s.a.createElement(p.a,{title:"Business Detail",data:r,description:""}))}}]),t}(a.Component);t.a=_},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.experimental=t.FlyToInterpolator=t.LinearInterpolator=t.TransitionInterpolator=t.TRANSITION_EVENTS=t.SVGOverlay=t.HTMLOverlay=t.CanvasOverlay=t.NavigationControl=t.Popup=t.Marker=t.BaseControl=t.StaticMap=t.InteractiveMap=t.default=void 0;var i=n(313);Object.defineProperty(t,"default",{enumerable:!0,get:function(){return r(i).default}}),Object.defineProperty(t,"InteractiveMap",{enumerable:!0,get:function(){return r(i).default}});var o=n(169);Object.defineProperty(t,"StaticMap",{enumerable:!0,get:function(){return r(o).default}});var a=n(34);Object.defineProperty(t,"BaseControl",{enumerable:!0,get:function(){return r(a).default}});var s=n(397);Object.defineProperty(t,"Marker",{enumerable:!0,get:function(){return r(s).default}});var u=n(398);Object.defineProperty(t,"Popup",{enumerable:!0,get:function(){return r(u).default}});var l=n(400);Object.defineProperty(t,"NavigationControl",{enumerable:!0,get:function(){return r(l).default}});var c=n(401);Object.defineProperty(t,"CanvasOverlay",{enumerable:!0,get:function(){return r(c).default}});var f=n(403);Object.defineProperty(t,"HTMLOverlay",{enumerable:!0,get:function(){return r(f).default}});var h=n(404);Object.defineProperty(t,"SVGOverlay",{enumerable:!0,get:function(){return r(h).default}});var p=n(83);Object.defineProperty(t,"TRANSITION_EVENTS",{enumerable:!0,get:function(){return p.TRANSITION_EVENTS}});var d=n(133);Object.defineProperty(t,"TransitionInterpolator",{enumerable:!0,get:function(){return d.TransitionInterpolator}}),Object.defineProperty(t,"LinearInterpolator",{enumerable:!0,get:function(){return d.LinearInterpolator}}),Object.defineProperty(t,"FlyToInterpolator",{enumerable:!0,get:function(){return d.ViewportFlyToInterpolator}});var v=n(229),g=r(v),y=n(44),m=r(y);t.experimental={MapControls:g.default,autobind:m.default}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(11),o=r(i),a=n(6),s=r(a),u=n(14),l=r(u),c=n(7),f=r(c),h=n(15),p=r(h),d=n(9),v=r(d),g=n(5),y=n(10),m=r(y),_=n(44),b=r(_),E=n(169),x=r(E),w=n(81),T=n(25),S=r(T),A=n(83),C=r(A),O=n(62),k=n(229),P=r(k),R=n(395),I=r(R),N=n(231),M=r(N),L=(0,v.default)({},x.default.propTypes,{maxZoom:m.default.number,minZoom:m.default.number,maxPitch:m.default.number,minPitch:m.default.number,onViewportChange:m.default.func,transitionDuration:m.default.number,transitionInterpolator:m.default.object,transitionInterruption:m.default.number,transitionEasing:m.default.func,onTransitionStart:m.default.func,onTransitionInterrupt:m.default.func,onTransitionEnd:m.default.func,scrollZoom:m.default.bool,dragPan:m.default.bool,dragRotate:m.default.bool,doubleClickZoom:m.default.bool,touchZoom:m.default.bool,touchRotate:m.default.bool,keyboard:m.default.bool,onHover:m.default.func,onClick:m.default.func,clickRadius:m.default.number,getCursor:m.default.func,visibilityConstraints:m.default.shape({minZoom:m.default.number,maxZoom:m.default.number,minPitch:m.default.number,maxPitch:m.default.number}),mapControls:m.default.shape({events:m.default.arrayOf(m.default.string),handleEvent:m.default.func})}),D=function(e){var t=e.isDragging,n=e.isHovering;return t?I.default.CURSOR.GRABBING:n?I.default.CURSOR.POINTER:I.default.CURSOR.GRAB},F=(0,v.default)({},x.default.defaultProps,w.MAPBOX_LIMITS,C.default.defaultProps,{onViewportChange:null,onClick:null,onHover:null,scrollZoom:!0,dragPan:!0,dragRotate:!0,doubleClickZoom:!0,clickRadius:0,getCursor:D,visibilityConstraints:w.MAPBOX_LIMITS}),j={viewport:m.default.instanceOf(S.default),isDragging:m.default.bool,eventManager:m.default.object},B=function(e){function t(e){(0,s.default)(this,t);var n=(0,l.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e));return(0,b.default)(n),(0,M.default)(e),n.state={isDragging:!1,isHovering:!1},n._mapControls=e.mapControls||new P.default,n._eventManager=new O.EventManager(null,{rightButton:!0}),n}return(0,p.default)(t,e),(0,f.default)(t,null,[{key:"supported",value:function(){return x.default.supported()}}]),(0,f.default)(t,[{key:"getChildContext",value:function(){return{viewport:new S.default(this.props),isDragging:this.state.isDragging,eventManager:this._eventManager}}},{key:"componentDidMount",value:function(){var e=this._eventManager;e.on("mousemove",this._onMouseMove),e.on("click",this._onMouseClick),this._mapControls.setOptions((0,v.default)({},this.props,{onStateChange:this._onInteractiveStateChange,eventManager:e})),this._transitionManager=new C.default(this.props)}},{key:"componentWillUpdate",value:function(e){this._mapControls.setOptions(e),this._transitionManager.processViewportChange(e)}},{key:"getMap",value:function(){return this._map.getMap()}},{key:"queryRenderedFeatures",value:function(e,t){return this._map.queryRenderedFeatures(e,t)}},{key:"_checkVisibilityConstraints",value:function(e){var t=e.visibilityConstraints;for(var n in e){var r=function(e){return e[0].toUpperCase()+e.slice(1)}(n),i="min"+r,o="max"+r;if(i in t&&e[n]<t[i])return!1;if(o in t&&e[n]>t[o])return!1}return!0}},{key:"_getFeatures",value:function(e){var t=e.pos,n=e.radius,r=void 0;if(n){var i=n,o=[[t[0]-i,t[1]+i],[t[0]+i,t[1]-i]];r=this._map.queryRenderedFeatures(o)}else r=this._map.queryRenderedFeatures(t);return r}},{key:"_onInteractiveStateChange",value:function(e){var t=e.isDragging,n=void 0!==t&&t;n!==this.state.isDragging&&this.setState({isDragging:n})}},{key:"_getPos",value:function(e){var t=e.offsetCenter;return[t.x,t.y]}},{key:"_onMouseMove",value:function(e){if(!this.state.isDragging){var t=this._getPos(e),n=this._getFeatures({pos:t,radius:this.props.clickRadius}),r=n&&n.length>0;if(r!==this.state.isHovering&&this.setState({isHovering:r}),this.props.onHover){var i=new S.default(this.props);e.lngLat=i.unproject(t),e.features=n,this.props.onHover(e)}}}},{key:"_onMouseClick",value:function(e){if(this.props.onClick){var t=this._getPos(e),n=new S.default(this.props);e.lngLat=n.unproject(t),e.features=this._getFeatures({pos:t,radius:this.props.clickRadius}),this.props.onClick(e)}}},{key:"_eventCanvasLoaded",value:function(e){this._eventManager.setElement(e)}},{key:"_staticMapLoaded",value:function(e){this._map=e}},{key:"render",value:function(){var e=this.props,t=e.width,n=e.height,r=e.getCursor,i={width:t,height:n,position:"relative",cursor:r(this.state)};return(0,g.createElement)("div",{key:"map-controls",ref:this._eventCanvasLoaded,style:i},(0,g.createElement)(x.default,(0,v.default)({},this.props,this._transitionManager&&this._transitionManager.getViewportInTransition(),{visible:this._checkVisibilityConstraints(this.props),ref:this._staticMapLoaded,children:this.props.children})))}}]),t}(g.PureComponent);t.default=B,B.displayName="InteractiveMap",B.propTypes=L,B.defaultProps=F,B.childContextTypes=j},function(e,t,n){n(315),e.exports=n(8).Object.getPrototypeOf},function(e,t,n){var r=n(67),i=n(157);n(104)("getPrototypeOf",function(){return function(e){return i(r(e))}})},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,t,n){e.exports={default:n(318),__esModule:!0}},function(e,t,n){n(106),n(113),e.exports=n(114).f("iterator")},function(e,t,n){var r=n(107),i=n(101);e.exports=function(e){return function(t,n){var o,a,s=String(i(t)),u=r(n),l=s.length;return u<0||u>=l?e?"":void 0:(o=s.charCodeAt(u),o<55296||o>56319||u+1===l||(a=s.charCodeAt(u+1))<56320||a>57343?e?s.charAt(u):o:e?s.slice(u,u+2):a-56320+(o-55296<<10)+65536)}}},function(e,t,n){"use strict";var r=n(109),i=n(69),o=n(112),a={};n(39)(a,n(24)("iterator"),function(){return this}),e.exports=function(e,t,n){e.prototype=r(a,{next:i(1,n)}),o(e,t+" Iterator")}},function(e,t,n){var r=n(31),i=n(40),o=n(56);e.exports=n(32)?Object.defineProperties:function(e,t){i(e);for(var n,a=o(t),s=a.length,u=0;s>u;)r.f(e,n=a[u++],t[n]);return e}},function(e,t,n){var r=n(43),i=n(323),o=n(324);e.exports=function(e){return function(t,n,a){var s,u=r(t),l=i(u.length),c=o(a,l);if(e&&n!=n){for(;l>c;)if((s=u[c++])!=s)return!0}else for(;l>c;c++)if((e||c in u)&&u[c]===n)return e||c||0;return!e&&-1}}},function(e,t,n){var r=n(107),i=Math.min;e.exports=function(e){return e>0?i(r(e),9007199254740991):0}},function(e,t,n){var r=n(107),i=Math.max,o=Math.min;e.exports=function(e,t){return e=r(e),e<0?i(e+t,0):o(e,t)}},function(e,t,n){var r=n(22).document;e.exports=r&&r.documentElement},function(e,t,n){"use strict";var r=n(327),i=n(328),o=n(55),a=n(43);e.exports=n(161)(Array,"Array",function(e,t){this._t=a(e),this._i=0,this._k=t},function(){var e=this._t,t=this._k,n=this._i++;return!e||n>=e.length?(this._t=void 0,i(1)):"keys"==t?i(0,n):"values"==t?i(0,e[n]):i(0,[n,e[n]])},"values"),o.Arguments=o.Array,r("keys"),r("values"),r("entries")},function(e,t){e.exports=function(){}},function(e,t){e.exports=function(e,t){return{value:t,done:!!e}}},function(e,t,n){e.exports={default:n(330),__esModule:!0}},function(e,t,n){n(331),n(335),n(336),n(337),e.exports=n(8).Symbol},function(e,t,n){"use strict";var r=n(22),i=n(30),o=n(32),a=n(23),s=n(162),u=n(332).KEY,l=n(42),c=n(103),f=n(112),h=n(68),p=n(24),d=n(114),v=n(115),g=n(333),y=n(334),m=n(40),_=n(41),b=n(43),E=n(105),x=n(69),w=n(109),T=n(165),S=n(167),A=n(31),C=n(56),O=S.f,k=A.f,P=T.f,R=r.Symbol,I=r.JSON,N=I&&I.stringify,M=p("_hidden"),L=p("toPrimitive"),D={}.propertyIsEnumerable,F=c("symbol-registry"),j=c("symbols"),B=c("op-symbols"),U=Object.prototype,z="function"==typeof R,V=r.QObject,G=!V||!V.prototype||!V.prototype.findChild,H=o&&l(function(){return 7!=w(k({},"a",{get:function(){return k(this,"a",{value:7}).a}})).a})?function(e,t,n){var r=O(U,t);r&&delete U[t],k(e,t,n),r&&e!==U&&k(U,t,r)}:k,q=function(e){var t=j[e]=w(R.prototype);return t._k=e,t},W=z&&"symbol"==typeof R.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof R},X=function(e,t,n){return e===U&&X(B,t,n),m(e),t=E(t,!0),m(n),i(j,t)?(n.enumerable?(i(e,M)&&e[M][t]&&(e[M][t]=!1),n=w(n,{enumerable:x(0,!1)})):(i(e,M)||k(e,M,x(1,{})),e[M][t]=!0),H(e,t,n)):k(e,t,n)},$=function(e,t){m(e);for(var n,r=g(t=b(t)),i=0,o=r.length;o>i;)X(e,n=r[i++],t[n]);return e},Y=function(e,t){return void 0===t?w(e):$(w(e),t)},Z=function(e){var t=D.call(this,e=E(e,!0));return!(this===U&&i(j,e)&&!i(B,e))&&(!(t||!i(this,e)||!i(j,e)||i(this,M)&&this[M][e])||t)},K=function(e,t){if(e=b(e),t=E(t,!0),e!==U||!i(j,t)||i(B,t)){var n=O(e,t);return!n||!i(j,t)||i(e,M)&&e[M][t]||(n.enumerable=!0),n}},J=function(e){for(var t,n=P(b(e)),r=[],o=0;n.length>o;)i(j,t=n[o++])||t==M||t==u||r.push(t);return r},Q=function(e){for(var t,n=e===U,r=P(n?B:b(e)),o=[],a=0;r.length>a;)!i(j,t=r[a++])||n&&!i(U,t)||o.push(j[t]);return o};z||(R=function(){if(this instanceof R)throw TypeError("Symbol is not a constructor!");var e=h(arguments.length>0?arguments[0]:void 0),t=function(n){this===U&&t.call(B,n),i(this,M)&&i(this[M],e)&&(this[M][e]=!1),H(this,e,x(1,n))};return o&&G&&H(U,e,{configurable:!0,set:t}),q(e)},s(R.prototype,"toString",function(){return this._k}),S.f=K,A.f=X,n(166).f=T.f=J,n(71).f=Z,n(116).f=Q,o&&!n(108)&&s(U,"propertyIsEnumerable",Z,!0),d.f=function(e){return q(p(e))}),a(a.G+a.W+a.F*!z,{Symbol:R});for(var ee="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),te=0;ee.length>te;)p(ee[te++]);for(var ne=C(p.store),re=0;ne.length>re;)v(ne[re++]);a(a.S+a.F*!z,"Symbol",{for:function(e){return i(F,e+="")?F[e]:F[e]=R(e)},keyFor:function(e){if(!W(e))throw TypeError(e+" is not a symbol!");for(var t in F)if(F[t]===e)return t},useSetter:function(){G=!0},useSimple:function(){G=!1}}),a(a.S+a.F*!z,"Object",{create:Y,defineProperty:X,defineProperties:$,getOwnPropertyDescriptor:K,getOwnPropertyNames:J,getOwnPropertySymbols:Q}),I&&a(a.S+a.F*(!z||l(function(){var e=R();return"[null]"!=N([e])||"{}"!=N({a:e})||"{}"!=N(Object(e))})),"JSON",{stringify:function(e){for(var t,n,r=[e],i=1;arguments.length>i;)r.push(arguments[i++]);if(n=t=r[1],(_(t)||void 0!==e)&&!W(e))return y(t)||(t=function(e,t){if("function"==typeof n&&(t=n.call(this,e,t)),!W(t))return t}),r[1]=t,N.apply(I,r)}}),R.prototype[L]||n(39)(R.prototype,L,R.prototype.valueOf),f(R,"Symbol"),f(Math,"Math",!0),f(r.JSON,"JSON",!0)},function(e,t,n){var r=n(68)("meta"),i=n(41),o=n(30),a=n(31).f,s=0,u=Object.isExtensible||function(){return!0},l=!n(42)(function(){return u(Object.preventExtensions({}))}),c=function(e){a(e,r,{value:{i:"O"+ ++s,w:{}}})},f=function(e,t){if(!i(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!o(e,r)){if(!u(e))return"F";if(!t)return"E";c(e)}return e[r].i},h=function(e,t){if(!o(e,r)){if(!u(e))return!0;if(!t)return!1;c(e)}return e[r].w},p=function(e){return l&&d.NEED&&u(e)&&!o(e,r)&&c(e),e},d=e.exports={KEY:r,NEED:!1,fastKey:f,getWeak:h,onFreeze:p}},function(e,t,n){var r=n(56),i=n(116),o=n(71);e.exports=function(e){var t=r(e),n=i.f;if(n)for(var a,s=n(e),u=o.f,l=0;s.length>l;)u.call(e,a=s[l++])&&t.push(a);return t}},function(e,t,n){var r=n(110);e.exports=Array.isArray||function(e){return"Array"==r(e)}},function(e,t){},function(e,t,n){n(115)("asyncIterator")},function(e,t,n){n(115)("observable")},function(e,t,n){e.exports={default:n(339),__esModule:!0}},function(e,t,n){n(340);var r=n(8).Object;e.exports=function(e,t,n){return r.defineProperty(e,t,n)}},function(e,t,n){var r=n(23);r(r.S+r.F*!n(32),"Object",{defineProperty:n(31).f})},function(e,t,n){e.exports={default:n(342),__esModule:!0}},function(e,t,n){n(343),e.exports=n(8).Object.setPrototypeOf},function(e,t,n){var r=n(23);r(r.S,"Object",{setPrototypeOf:n(344).set})},function(e,t,n){var r=n(41),i=n(40),o=function(e,t){if(i(e),!r(t)&&null!==t)throw TypeError(t+": can't set as prototype!")};e.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,t,r){try{r=n(158)(Function.call,n(167).f(Object.prototype,"__proto__").set,2),r(e,[]),t=!(e instanceof Array)}catch(e){t=!0}return function(e,n){return o(e,n),t?e.__proto__=n:r(e,n),e}}({},!1):void 0),check:o}},function(e,t,n){e.exports={default:n(346),__esModule:!0}},function(e,t,n){n(347);var r=n(8).Object;e.exports=function(e,t){return r.create(e,t)}},function(e,t,n){var r=n(23);r(r.S,"Object",{create:n(109)})},function(e,t,n){n(349),e.exports=n(8).Object.assign},function(e,t,n){var r=n(23);r(r.S+r.F,"Object",{assign:n(350)})},function(e,t,n){"use strict";var r=n(56),i=n(116),o=n(71),a=n(67),s=n(164),u=Object.assign;e.exports=!u||n(42)(function(){var e={},t={},n=Symbol(),r="abcdefghijklmnopqrst";return e[n]=7,r.split("").forEach(function(e){t[e]=e}),7!=u({},e)[n]||Object.keys(u({},t)).join("")!=r})?function(e,t){for(var n=a(e),u=arguments.length,l=1,c=i.f,f=o.f;u>l;)for(var h,p=s(arguments[l++]),d=c?r(p).concat(c(p)):r(p),v=d.length,g=0;v>g;)f.call(p,h=d[g++])&&(n[h]=p[h]);return n}:u},function(e,t,n){"use strict";var r=n(66),i=n(352),o=n(353);e.exports=function(){function e(e,t,n,r,a,s){s!==o&&i(!1,"Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types")}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t};return n.checkPropTypes=r,n.PropTypes=n,n}},function(e,t,n){"use strict";function r(e,t,n,r,o,a,s,u){if(i(t),!e){var l;if(void 0===t)l=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=[n,r,o,a,s,u],f=0;l=new Error(t.replace(/%s/g,function(){return c[f++]})),l.name="Invariant Violation"}throw l.framesToPop=1,l}}var i=function(e){};e.exports=r},function(e,t,n){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(e,t,n){n(113),n(106),e.exports=n(355)},function(e,t,n){var r=n(40),i=n(356);e.exports=n(8).getIterator=function(e){var t=i(e);if("function"!=typeof t)throw TypeError(e+" is not iterable!");return r(t.call(e))}},function(e,t,n){var r=n(168),i=n(24)("iterator"),o=n(55);e.exports=n(8).getIteratorMethod=function(e){if(void 0!=e)return e[i]||e["@@iterator"]||o[r(e)]}},function(e,t,n){e.exports={default:n(358),__esModule:!0}},function(e,t,n){n(359);var r=n(8).Object;e.exports=function(e){return r.getOwnPropertyNames(e)}},function(e,t,n){n(104)("getOwnPropertyNames",function(){return n(165).f})},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){var t=null;return(0,h.default)(e)&&e.has("layers")?t=e.get("layers").filter(function(e){return e.get("interactive")}).map(function(e){return e.get("id")}).toJS():Array.isArray(e.layers)&&(t=e.layers.filter(function(e){return e.interactive}).map(function(e){return e.id})),t}function o(e,t,n){function r(e){return e.map(function(){return!0}).delete("layers").delete("sources").toJS()}var i=e&&r(e)||{},o=r(t);if(!e||function(){var n=(0,c.default)(i),r=(0,c.default)(o);return n.length!==r.length||!!r.some(function(n){return e.get(n)!==t.get(n)})}())return void n.setStyle(t.toJS());var s=(0,d.default)(e,t),l=s.sourcesDiff,f=s.layersDiff;if(f.updates.some(function(e){return e.layer.get("ref")}))return void n.setStyle(t.toJS());var h=!0,p=!1,v=void 0;try{for(var g,y=(0,u.default)(l.enter);!(h=(g=y.next()).done);h=!0){var m=g.value;n.addSource(m.id,m.source.toJS())}}catch(e){p=!0,v=e}finally{try{!h&&y.return&&y.return()}finally{if(p)throw v}}var _=!0,b=!1,E=void 0;try{for(var x,w=(0,u.default)(l.update);!(_=(x=w.next()).done);_=!0){a(n,x.value)}}catch(e){b=!0,E=e}finally{try{!_&&w.return&&w.return()}finally{if(b)throw E}}var T=!0,S=!1,A=void 0;try{for(var C,O=(0,u.default)(l.exit);!(T=(C=O.next()).done);T=!0){var k=C.value;n.removeSource(k.id)}}catch(e){S=!0,A=e}finally{try{!T&&O.return&&O.return()}finally{if(S)throw A}}var P=!0,R=!1,I=void 0;try{for(var N,M=(0,u.default)(f.exiting);!(P=(N=M.next()).done);P=!0){var L=N.value;n.style.getLayer(L.id)&&n.removeLayer(L.id)}}catch(e){R=!0,I=e}finally{try{!P&&M.return&&M.return()}finally{if(R)throw I}}var D=!0,F=!1,j=void 0;try{for(var B,U=(0,u.default)(f.updates);!(D=(B=U.next()).done);D=!0){var z=B.value;z.enter||n.removeLayer(z.id),n.addLayer(z.layer.toJS(),z.before)}}catch(e){F=!0,j=e}finally{try{!D&&U.return&&U.return()}finally{if(F)throw j}}}function a(e,t){var n=t.source.toJS();if("geojson"===n.type){var r=e.getSource(t.id);if("geojson"===r.type){var i=r.workerOptions;if((void 0===n.maxzoom||n.maxzoom===i.geojsonVtOptions.maxZoom)&&(void 0===n.buffer||n.buffer===i.geojsonVtOptions.buffer)&&(void 0===n.tolerance||n.tolerance===i.geojsonVtOptions.tolerance)&&(void 0===n.cluster||n.cluster===i.cluster)&&(void 0===n.clusterRadius||n.clusterRadius===i.superclusterOptions.radius)&&(void 0===n.clusterMaxZoom||n.clusterMaxZoom===i.superclusterOptions.maxZoom))return void r.setData(n.data)}}e.removeSource(t.id),e.addSource(t.id,n)}Object.defineProperty(t,"__esModule",{value:!0});var s=n(33),u=r(s),l=n(57),c=r(l);t.getInteractiveLayerIds=i,t.setDiffStyle=o;var f=n(170),h=r(f),p=n(363),d=r(p)},function(e,t,n){n(362),e.exports=n(8).Object.keys},function(e,t,n){var r=n(67),i=n(56);n(104)("keys",function(){return function(e){return i(r(e))}})},function(e,t,n){"use strict";function r(e,t){var n=e.get("sources"),r=t.get("sources"),i=[],o=[],a=[],u=n.keySeq().toArray(),l=r.keySeq().toArray(),c=!0,f=!1,h=void 0;try{for(var p,d=(0,s.default)(u);!(c=(p=d.next()).done);c=!0){var v=p.value,g=r.get(v);g?g.equals(n.get(v))||o.push({id:v,source:r.get(v)}):a.push({id:v,source:n.get(v)})}}catch(e){f=!0,h=e}finally{try{!c&&d.return&&d.return()}finally{if(f)throw h}}var y=!0,m=!1,_=void 0;try{for(var b,E=(0,s.default)(l);!(y=(b=E.next()).done);y=!0){var x=b.value;n.get(x)||i.push({id:x,source:r.get(x)})}}catch(e){m=!0,_=e}finally{try{!y&&E.return&&E.return()}finally{if(m)throw _}}return{enter:i,update:o,exit:a}}function i(e,t){var n=e.get("layers"),r=t.get("layers"),i=[],o=[],a={},u={};r.forEach(function(e,t){var n=e.get("id"),i=r.get(t+1);u[n]={layer:e,id:n,before:i?i.get("id"):null,enter:!0}}),n.forEach(function(e,t){var r=e.get("id"),i=n.get(t+1);a[r]={layer:e,id:r,before:i?i.get("id"):null},u[r]?u[r].enter=!1:o.push(a[r])});var l=!0,c=!1,f=void 0;try{for(var h,p=(0,s.default)(r.reverse());!(l=(h=p.next()).done);l=!0){var d=h.value,v=d.get("id");a[v]&&a[v].layer.equals(u[v].layer)&&a[v].before===u[v].before||i.push(u[v])}}catch(e){c=!0,f=e}finally{try{!l&&p.return&&p.return()}finally{if(c)throw f}}return{updates:i,exiting:o}}function o(e,t){return{sourcesDiff:r(e,t),layersDiff:i(e,t)}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(33),s=function(e){return e&&e.__esModule?e:{default:e}}(a);t.diffSources=r,t.diffLayers=i,t.default=o},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=n(19),o=n(80),a=n(61),s=n(49),u=n.n(s),l=n(50),c=n.n(l),f=n(47),h=n.n(f),p=n(77),d=n.n(p),v=function(){function e(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),g=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),y=Object(o.a)(),m=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.width,i=t.height,a=t.viewMatrix,s=void 0===a?y:a,l=t.projectionMatrix,f=void 0===l?y:l;r(this,e),this.width=n||1,this.height=i||1,this.scale=1,this.viewMatrix=s,this.projectionMatrix=f;var p=Object(o.a)();h()(p,p,this.projectionMatrix),h()(p,p,this.viewMatrix),this.viewProjectionMatrix=p;var v=Object(o.a)();u()(v,v,[this.width/2,-this.height/2,1]),c()(v,v,[1,-1,0]),h()(v,v,this.viewProjectionMatrix);var g=d()(Object(o.a)(),v);if(!g)throw new Error("Pixel project matrix not invertible");this.pixelProjectionMatrix=v,this.pixelUnprojectionMatrix=g,this.equals=this.equals.bind(this),this.project=this.project.bind(this),this.unproject=this.unproject.bind(this),this.projectFlat=this.projectFlat.bind(this),this.unprojectFlat=this.unprojectFlat.bind(this)}return g(e,[{key:"equals",value:function(t){return t instanceof e&&(t.width===this.width&&t.height===this.height&&Object(i.equals)(t.projectionMatrix,this.projectionMatrix)&&Object(i.equals)(t.viewMatrix,this.viewMatrix))}},{key:"project",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.topLeft,r=void 0===n||n,i=v(e,3),o=i[0],s=i[1],u=i[2],l=this.projectFlat([o,s]),c=v(l,2),f=c[0],h=c[1],p=Object(a.j)([f,h,u],this.pixelProjectionMatrix),d=v(p,2),g=d[0],y=d[1],m=r?y:this.height-y;return 2===e.length?[g,m]:[g,m,p[2]]}},{key:"unproject",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.topLeft,r=void 0===n||n,i=t.targetZ,o=v(e,3),s=o[0],u=o[1],l=o[2],c=r?u:this.height-u,f=Object(a.g)([s,c,l],this.pixelUnprojectionMatrix,i),h=this.unprojectFlat(f),p=v(h,2),d=p[0],g=p[1];return Number.isFinite(l)?[d,g,f[2]]:Number.isFinite(i)?[d,g,i]:[d,g]}},{key:"projectFlat",value:function(e){arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.scale;return e}},{key:"unprojectFlat",value:function(e){arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.scale;return e}}]),e}();t.a=m},function(e,t){function n(e,t,n){var r=new Float32Array(3);return r[0]=e,r[1]=t,r[2]=n,r}e.exports=n},function(e,t,n){(function(e,r){function i(e,n){var r={seen:[],stylize:a};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),v(n)?r.showHidden=n:n&&t._extend(r,n),E(r.showHidden)&&(r.showHidden=!1),E(r.depth)&&(r.depth=2),E(r.colors)&&(r.colors=!1),E(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=o),u(r,e,r.depth)}function o(e,t){var n=i.styles[t];return n?"\x1b["+i.colors[n][0]+"m"+e+"\x1b["+i.colors[n][1]+"m":e}function a(e,t){return e}function s(e){var t={};return e.forEach(function(e,n){t[e]=!0}),t}function u(e,n,r){if(e.customInspect&&n&&A(n.inspect)&&n.inspect!==t.inspect&&(!n.constructor||n.constructor.prototype!==n)){var i=n.inspect(r,e);return _(i)||(i=u(e,i,r)),i}var o=l(e,n);if(o)return o;var a=Object.keys(n),v=s(a);if(e.showHidden&&(a=Object.getOwnPropertyNames(n)),S(n)&&(a.indexOf("message")>=0||a.indexOf("description")>=0))return c(n);if(0===a.length){if(A(n)){var g=n.name?": "+n.name:"";return e.stylize("[Function"+g+"]","special")}if(x(n))return e.stylize(RegExp.prototype.toString.call(n),"regexp");if(T(n))return e.stylize(Date.prototype.toString.call(n),"date");if(S(n))return c(n)}var y="",m=!1,b=["{","}"];if(d(n)&&(m=!0,b=["[","]"]),A(n)){y=" [Function"+(n.name?": "+n.name:"")+"]"}if(x(n)&&(y=" "+RegExp.prototype.toString.call(n)),T(n)&&(y=" "+Date.prototype.toUTCString.call(n)),S(n)&&(y=" "+c(n)),0===a.length&&(!m||0==n.length))return b[0]+y+b[1];if(r<0)return x(n)?e.stylize(RegExp.prototype.toString.call(n),"regexp"):e.stylize("[Object]","special");e.seen.push(n);var E;return E=m?f(e,n,r,v,a):a.map(function(t){return h(e,n,r,v,t,m)}),e.seen.pop(),p(E,y,b)}function l(e,t){if(E(t))return e.stylize("undefined","undefined");if(_(t)){var n="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(n,"string")}return m(t)?e.stylize(""+t,"number"):v(t)?e.stylize(""+t,"boolean"):g(t)?e.stylize("null","null"):void 0}function c(e){return"["+Error.prototype.toString.call(e)+"]"}function f(e,t,n,r,i){for(var o=[],a=0,s=t.length;a<s;++a)R(t,String(a))?o.push(h(e,t,n,r,String(a),!0)):o.push("");return i.forEach(function(i){i.match(/^\d+$/)||o.push(h(e,t,n,r,i,!0))}),o}function h(e,t,n,r,i,o){var a,s,l;if(l=Object.getOwnPropertyDescriptor(t,i)||{value:t[i]},l.get?s=l.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):l.set&&(s=e.stylize("[Setter]","special")),R(r,i)||(a="["+i+"]"),s||(e.seen.indexOf(l.value)<0?(s=g(n)?u(e,l.value,null):u(e,l.value,n-1),s.indexOf("\n")>-1&&(s=o?s.split("\n").map(function(e){return"  "+e}).join("\n").substr(2):"\n"+s.split("\n").map(function(e){return"   "+e}).join("\n"))):s=e.stylize("[Circular]","special")),E(a)){if(o&&i.match(/^\d+$/))return s;a=JSON.stringify(""+i),a.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),a=e.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),a=e.stylize(a,"string"))}return a+": "+s}function p(e,t,n){var r=0;return e.reduce(function(e,t){return r++,t.indexOf("\n")>=0&&r++,e+t.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60?n[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+n[1]:n[0]+t+" "+e.join(", ")+" "+n[1]}function d(e){return Array.isArray(e)}function v(e){return"boolean"===typeof e}function g(e){return null===e}function y(e){return null==e}function m(e){return"number"===typeof e}function _(e){return"string"===typeof e}function b(e){return"symbol"===typeof e}function E(e){return void 0===e}function x(e){return w(e)&&"[object RegExp]"===O(e)}function w(e){return"object"===typeof e&&null!==e}function T(e){return w(e)&&"[object Date]"===O(e)}function S(e){return w(e)&&("[object Error]"===O(e)||e instanceof Error)}function A(e){return"function"===typeof e}function C(e){return null===e||"boolean"===typeof e||"number"===typeof e||"string"===typeof e||"symbol"===typeof e||"undefined"===typeof e}function O(e){return Object.prototype.toString.call(e)}function k(e){return e<10?"0"+e.toString(10):e.toString(10)}function P(){var e=new Date,t=[k(e.getHours()),k(e.getMinutes()),k(e.getSeconds())].join(":");return[e.getDate(),L[e.getMonth()],t].join(" ")}function R(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var I=/%[sdj%]/g;t.format=function(e){if(!_(e)){for(var t=[],n=0;n<arguments.length;n++)t.push(i(arguments[n]));return t.join(" ")}for(var n=1,r=arguments,o=r.length,a=String(e).replace(I,function(e){if("%%"===e)return"%";if(n>=o)return e;switch(e){case"%s":return String(r[n++]);case"%d":return Number(r[n++]);case"%j":try{return JSON.stringify(r[n++])}catch(e){return"[Circular]"}default:return e}}),s=r[n];n<o;s=r[++n])g(s)||!w(s)?a+=" "+s:a+=" "+i(s);return a},t.deprecate=function(n,i){function o(){if(!a){if(r.throwDeprecation)throw new Error(i);r.traceDeprecation?console.trace(i):console.error(i),a=!0}return n.apply(this,arguments)}if(E(e.process))return function(){return t.deprecate(n,i).apply(this,arguments)};if(!0===r.noDeprecation)return n;var a=!1;return o};var N,M={};t.debuglog=function(e){if(E(N)&&(N=Object({NODE_ENV:"production",PUBLIC_URL:""}).NODE_DEBUG||""),e=e.toUpperCase(),!M[e])if(new RegExp("\\b"+e+"\\b","i").test(N)){var n=r.pid;M[e]=function(){var r=t.format.apply(t,arguments);console.error("%s %d: %s",e,n,r)}}else M[e]=function(){};return M[e]},t.inspect=i,i.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},i.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},t.isArray=d,t.isBoolean=v,t.isNull=g,t.isNullOrUndefined=y,t.isNumber=m,t.isString=_,t.isSymbol=b,t.isUndefined=E,t.isRegExp=x,t.isObject=w,t.isDate=T,t.isError=S,t.isFunction=A,t.isPrimitive=C,t.isBuffer=n(367);var L=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];t.log=function(){console.log("%s - %s",P(),t.format.apply(t,arguments))},t.inherits=n(368),t._extend=function(e,t){if(!t||!w(t))return e;for(var n=Object.keys(t),r=n.length;r--;)e[n[r]]=t[n[r]];return e}}).call(t,n(18),n(45))},function(e,t){e.exports=function(e){return e&&"object"===typeof e&&"function"===typeof e.copy&&"function"===typeof e.fill&&"function"===typeof e.readUInt8}},function(e,t){"function"===typeof Object.create?e.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},function(e,t){function n(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}e.exports=n},function(e,t){function n(e){var t=e[0],n=e[1],r=e[2],i=e[3];return Math.sqrt(t*t+n*n+r*r+i*i)}e.exports=n},function(e,t){function n(e){var t=e[0],n=e[1],r=e[2],i=e[3];return t*t+n*n+r*r+i*i}e.exports=n},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e){return e>=0&&e<6}function s(e){if(e<0&&e>=6)throw new Error(d);return e}var u=n(72),l=n(16),c=n(199),f=n(206),h=n(75),p=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),d="Unknown Euler angle order",v=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t.DefaultOrder;r(this,t);var s=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return arguments.length>0&&Array.isArray(arguments[0])?s.fromVector3.apply(s,arguments):s.set(e,n,o,a),s}return o(t,e),p(t,[{key:"ELEMENTS",get:function(){return 4}}],[{key:"rotationOrder",value:function(e){return t.RotationOrders[e]}},{key:"ZYX",get:function(){return 0}},{key:"YXZ",get:function(){return 1}},{key:"XZY",get:function(){return 2}},{key:"ZXY",get:function(){return 3}},{key:"YZX",get:function(){return 4}},{key:"XYZ",get:function(){return 5}},{key:"RollPitchYaw",get:function(){return 0}},{key:"DefaultOrder",get:function(){return t.ZYX}},{key:"RotationOrders",get:function(){return["ZYX","YXZ","XZY","ZXY","YZX","XYZ"]}}]),p(t,[{key:"copy",value:function(e){for(var t=0;t<3;++t)this[t]=e[t];return this[3]=Number.isFinite(e[3])||this.order,this.check(),this}},{key:"set",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments[3];return this[0]=e,this[1]=t,this[2]=n,this[3]=Number.isFinite(r)?r:this[3],this.check(),this}},{key:"validate",value:function(){return a(this[3])&&Number.isFinite(this[0])&&Number.isFinite(this[1])&&Number.isFinite(this[2])}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this[0],e[t+1]=this[1],e[t+2]=this[2],e}},{key:"toArray4",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this[0],e[t+1]=this[1],e[t+2]=this[2],e[t+3]=this[3],e}},{key:"toVector3",value:function(e){return e?e.set(this[0],this[1],this[2]):new h.a(this[0],this[1],this[2])}},{key:"fromVector3",value:function(e,t){return this.set(e[0],e[1],e[2],Number.isFinite(t)?t:this[3])}},{key:"fromArray",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this[0]=e[0+t],this[1]=e[1+t],this[2]=e[2+t],void 0!==e[3]&&(this[3]=e[3]),this.check(),this}},{key:"fromRollPitchYaw",value:function(e,n,r){return this.set(e,n,r,t.ZYX)}},{key:"fromQuaternion",value:function(e,t){return this._fromRotationMatrix(c.a.fromQuaternion(e),t),this.check(),this}},{key:"fromRotationMatrix",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t.DefaultOrder;return this._fromRotationMatrix(e,n),this.check(),this}},{key:"getRotationMatrix",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new c.a;return this._getRotationMatrix(e),e}},{key:"getQuaternion",value:function(){var e=new f.a;switch(this[4]){case t.XYZ:return e.rotateX(this[0]).rotateY(this[1]).rotateZ(this[2]);case t.YXZ:return e.rotateY(this[0]).rotateX(this[1]).rotateZ(this[2]);case t.ZXY:return e.rotateZ(this[0]).rotateX(this[1]).rotateY(this[2]);case t.ZYX:return e.rotateZ(this[0]).rotateY(this[1]).rotateX(this[2]);case t.YZX:return e.rotateY(this[0]).rotateZ(this[1]).rotateX(this[2]);case t.XZY:return e.rotateX(this[0]).rotateZ(this[1]).rotateY(this[2]);default:throw new Error(d)}}},{key:"_fromRotationMatrix",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t.DefaultOrder,r=e.elements,i=r[0],o=r[4],a=r[8],s=r[1],u=r[5],c=r[9],f=r[2],h=r[6],p=r[10];switch(n=n||this[3]){case t.XYZ:this[1]=Math.asin(Object(l.e)(a,-1,1)),Math.abs(a)<.99999?(this[0]=Math.atan2(-c,p),this[2]=Math.atan2(-o,i)):(this[0]=Math.atan2(h,u),this[2]=0);break;case t.YXZ:this[0]=Math.asin(-Object(l.e)(c,-1,1)),Math.abs(c)<.99999?(this[1]=Math.atan2(a,p),this[2]=Math.atan2(s,u)):(this[1]=Math.atan2(-f,i),this[2]=0);break;case t.ZXY:this[0]=Math.asin(Object(l.e)(h,-1,1)),Math.abs(h)<.99999?(this[1]=Math.atan2(-f,p),this[2]=Math.atan2(-o,u)):(this[1]=0,this[2]=Math.atan2(s,i));break;case t.ZYX:this[1]=Math.asin(-Object(l.e)(f,-1,1)),Math.abs(f)<.99999?(this[0]=Math.atan2(h,p),this[2]=Math.atan2(s,i)):(this[0]=0,this[2]=Math.atan2(-o,u));break;case t.YZX:this[2]=Math.asin(Object(l.e)(s,-1,1)),Math.abs(s)<.99999?(this[0]=Math.atan2(-c,u),this[1]=Math.atan2(-f,i)):(this[0]=0,this[1]=Math.atan2(a,p));break;case t.XZY:this[2]=Math.asin(-Object(l.e)(o,-1,1)),Math.abs(o)<.99999?(this[0]=Math.atan2(h,u),this[1]=Math.atan2(a,i)):(this[0]=Math.atan2(-c,p),this[1]=0);break;default:throw new Error(d)}return this[3]=n,this}},{key:"_getRotationMatrix",value:function(){var e=new c.a,n=this.x,r=this.y,i=this.z,o=Math.cos(n),a=Math.cos(r),s=Math.cos(i),u=Math.sin(n),l=Math.sin(r),f=Math.sin(i);switch(this[3]){case t.XYZ:var h=o*s,p=o*f,v=u*s,g=u*f;e[0]=a*s,e[4]=-a*f,e[8]=l,e[1]=p+v*l,e[5]=h-g*l,e[9]=-u*a,e[2]=g-h*l,e[6]=v+p*l,e[10]=o*a;break;case t.YXZ:var y=a*s,m=a*f,_=l*s,b=l*f;e[0]=y+b*u,e[4]=_*u-m,e[8]=o*l,e[1]=o*f,e[5]=o*s,e[9]=-u,e[2]=m*u-_,e[6]=b+y*u,e[10]=o*a;break;case t.ZXY:var E=a*s,x=a*f,w=l*s,T=l*f;e[0]=E-T*u,e[4]=-o*f,e[8]=w+x*u,e[1]=x+w*u,e[5]=o*s,e[9]=T-E*u,e[2]=-o*l,e[6]=u,e[10]=o*a;break;case t.ZYX:var S=o*s,A=o*f,C=u*s,O=u*f;e[0]=a*s,e[4]=C*l-A,e[8]=S*l+O,e[1]=a*f,e[5]=O*l+S,e[9]=A*l-C,e[2]=-l,e[6]=u*a,e[10]=o*a;break;case t.YZX:var k=o*a,P=o*l,R=u*a,I=u*l;e[0]=a*s,e[4]=I-k*f,e[8]=R*f+P,e[1]=f,e[5]=o*s,e[9]=-u*s,e[2]=-l*s,e[6]=P*f+R,e[10]=k-I*f;break;case t.XZY:var N=o*a,M=o*l,L=u*a,D=u*l;e[0]=a*s,e[4]=-f,e[8]=l*s,e[1]=N*f+D,e[5]=o*s,e[9]=M*f-L,e[2]=L*f-M,e[6]=u*s,e[10]=D*f+N;break;default:throw new Error(d)}return e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}},{key:"x",get:function(){return this[0]},set:function(e){return this[0]=Object(l.d)(e)}},{key:"y",get:function(){return this[1]},set:function(e){return this[1]=Object(l.d)(e)}},{key:"z",get:function(){return this[2]},set:function(e){return this[2]=Object(l.d)(e)}},{key:"alpha",get:function(){return this[0]},set:function(e){return this[0]=Object(l.d)(e)}},{key:"beta",get:function(){return this[1]},set:function(e){return this[1]=Object(l.d)(e)}},{key:"gamma",get:function(){return this[2]},set:function(e){return this[2]=Object(l.d)(e)}},{key:"phi",get:function(){return this[0]},set:function(e){return this[0]=Object(l.d)(e)}},{key:"theta",get:function(){return this[1]},set:function(e){return this[1]=Object(l.d)(e)}},{key:"psi",get:function(){return this[2]},set:function(e){return this[2]=Object(l.d)(e)}},{key:"roll",get:function(){return this[0]},set:function(e){return this[0]=Object(l.d)(e)}},{key:"pitch",get:function(){return this[1]},set:function(e){return this[1]=Object(l.d)(e)}},{key:"yaw",get:function(){return this[2]},set:function(e){return this[2]=Object(l.d)(e)}},{key:"order",get:function(){return this[3]},set:function(e){return this[3]=s(e)}}]),t}(u.a);t.a=v},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=n(16),o=n(75),a=n(79),s=n.n(a),u=n(0),l=n.n(u),c=function(){function e(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),f=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),h=6371e3,p=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.phi,i=t.theta,o=t.radius,a=t.bearing,s=t.pitch,u=(t.altitude,t.radiusScale),l=void 0===u?h:u;r(this,e),0===arguments.length?(this.phi=0,this.theta=0,this.radius=1):Number.isFinite(n)||Number.isFinite(i)?(this.phi=n||0,this.theta=i||0):(Number.isFinite(a)||Number.isFinite(s))&&(this.bearing=a||0,this.pitch=s||0),this.radius=o||1,this.radiusScale=l||1,this.check()}return f(e,[{key:"toString",value:function(){return this.formatString(i.g)}},{key:"formatString",value:function(e){var t=e.printTypes,n=(e.printDegrees,i.l);return(t?"Spherical":"")+"[rho:"+n(this.radius)+",theta:"+n(this.theta)+",phi:"+n(this.phi)+"]"}},{key:"equals",value:function(e){return Object(i.k)(this.radius,e.radius)&&Object(i.k)(this.theta,e.theta)&&Object(i.k)(this.phi,e.phi)}},{key:"exactEquals",value:function(e){return this.radius===e.radius&&this.theta===e.theta&&this.phi===e.phi}},{key:"set",value:function(e,t,n){return this.radius=e,this.phi=t,this.theta=n,this.check()}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this.check()}},{key:"fromLngLatZ",value:function(e){var t=c(e,3),n=t[0],r=t[1],o=t[2];this.radius=1+o/this.radiusScale,this.phi=Object(i.n)(r),this.theta=Object(i.n)(n)}},{key:"fromVector3",value:function(e){return this.radius=s()(e),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e[0],e[1]),this.phi=Math.acos(Object(i.e)(e[2]/this.radius,-1,1))),this.check()}},{key:"toVector3",value:function(){return new o.a(0,0,this.radius).rotateX({radians:this.theta}).rotateZ({radians:this.phi})}},{key:"makeSafe",value:function(){this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi))}},{key:"check",value:function(){return l()(Number.isFinite(this.phi)&&Number.isFinite(this.theta)&&this.radius>0),this}},{key:"bearing",get:function(){return 180-Object(i.j)(this.phi)},set:function(e){this.phi=Math.PI-Object(i.n)(e)}},{key:"pitch",get:function(){return Object(i.j)(this.theta)},set:function(e){this.theta=Object(i.n)(e)}},{key:"longitude",get:function(){return Object(i.j)(this.phi)}},{key:"latitude",get:function(){return Object(i.j)(this.theta)}},{key:"lng",get:function(){return Object(i.j)(this.phi)}},{key:"lat",get:function(){return Object(i.j)(this.theta)}},{key:"z",get:function(){return(this.radius-1)*this.radiusScale}}]),e}();t.a=p},function(e,t,n){"use strict";function r(e){var t=e.width,n=e.height,r=e.longitude,u=e.latitude,l=e.zoom,c=e.pitch,f=void 0===c?0:c,h=e.bearing,p=void 0===h?0:h;(r<-180||r>180)&&(r=Object(o.c)(r+180,360)-180),(p<-180||p>180)&&(p=Object(o.c)(p+180,360)-180);var d=new i.a({width:t,height:n,longitude:r,latitude:u,zoom:l}),v=d.project([r,a])[1],g=d.project([r,s])[1],y=0;return g-v<n&&(l+=Math.log2(n/(g-v)),d=new i.a({width:t,height:n,longitude:r,latitude:u,zoom:l}),v=d.project([r,a])[1],g=d.project([r,s])[1]),v>0?y=v:g<n&&(y=g-n),y&&(u=d.unproject([t/2,n/2+y])[1]),{width:t,height:n,longitude:r,latitude:u,zoom:l,pitch:f,bearing:p}}t.a=r;var i=n(58),o=n(80),a=85.05113,s=-85.05113},function(e,t,n){"use strict";function r(e,t,n){var r={},l=e.zoom,c=[e.longitude,e.latitude],f=Object(a.k)(l),h=t.zoom,p=[t.longitude,t.latitude],d=Object(a.k)(h-l),v=new i.Vector2(Object(a.f)(c,f)),g=new i.Vector2(Object(a.f)(p,f)),y=g.subtract(v),m=Math.max(e.width,e.height),_=m/d,b=Math.sqrt(y.x*y.x+y.y*y.y);if(Math.abs(b)<s){var E=!0,x=!1,w=void 0;try{for(var T,S=u[Symbol.iterator]();!(E=(T=S.next()).done);E=!0){var A=T.value,C=e[A],O=t[A];r[A]=Object(o.b)(C,O,n)}}catch(e){x=!0,w=e}finally{try{!E&&S.return&&S.return()}finally{if(x)throw w}}return r}var k=1.414*1.414,P=(_*_-m*m+k*k*b*b)/(2*m*k*b),R=(_*_-m*m-k*k*b*b)/(2*_*k*b),I=Math.log(Math.sqrt(P*P+1)-P),N=Math.log(Math.sqrt(R*R+1)-R),M=(N-I)/1.414,L=n*M,D=Math.cosh(I)/Math.cosh(I+1.414*L),F=m*((Math.cosh(I)*Math.tanh(I+1.414*L)-Math.sinh(I))/k)/b,j=1/D,B=l+Object(a.h)(j),U=Object(a.i)(v.add(y.scale(F)).scale(j),Object(a.k)(B));return r.longitude=U[0],r.latitude=U[1],r.zoom=B,r}t.a=r;var i=n(19),o=n(80),a=n(61),s=.01,u=["longitude","latitude","zoom"]},function(e,t,n){"use strict";(function(e){function r(e){return e&&e.__esModule?e:{default:e}}function i(){}function o(){var t=null;if("undefined"!==typeof window&&window.location){var n=window.location.search.match(/access_token=([^&\/]*)/);t=n&&n[1]}return t||"undefined"===typeof e||(t=t||Object({NODE_ENV:"production",PUBLIC_URL:""}).MapboxAccessToken),t||null}function a(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"component";e.debug&&g.default.checkPropTypes(_,e,"prop",t)}Object.defineProperty(t,"__esModule",{value:!0});var s=n(9),u=r(s),l=n(6),c=r(l),f=n(7),h=r(f),p=n(70),d=r(p);t.getAccessToken=o;var v=n(10),g=r(v),y=!("object"===("undefined"===typeof e?"undefined":(0,d.default)(e))&&"[object process]"===String(e)&&!e.browser),m=y?n(377):null,_={mapboxApiAccessToken:g.default.string,attributionControl:g.default.bool,preserveDrawingBuffer:g.default.bool,onLoad:g.default.func,onError:g.default.func,reuseMaps:g.default.bool,transformRequest:g.default.func,mapStyle:g.default.string,visible:g.default.bool,width:g.default.number.isRequired,height:g.default.number.isRequired,longitude:g.default.number.isRequired,latitude:g.default.number.isRequired,zoom:g.default.number.isRequired,bearing:g.default.number,pitch:g.default.number,altitude:g.default.number},b={mapboxApiAccessToken:o(),preserveDrawingBuffer:!1,attributionControl:!0,preventStyleDiffing:!1,onLoad:i,onError:i,reuseMaps:!1,transformRequest:null,mapStyle:"mapbox://styles/mapbox/light-v8",visible:!0,bearing:0,pitch:0,altitude:1.5},E=function(){function e(t){if((0,c.default)(this,e),!m)throw new Error("Mapbox not supported");this.props={},this._initialize(t)}return(0,h.default)(e,null,[{key:"supported",value:function(){return m&&m.supported()}}]),(0,h.default)(e,[{key:"finalize",value:function(){return m&&this._map?(this._destroy(),this):this}},{key:"setProps",value:function(e){return m&&this._map?(this._update(this.props,e),this):this}},{key:"resize",value:function(){return m&&this._map?(this._map.resize(),this):this}},{key:"getMap",value:function(){return this._map}},{key:"_create",value:function(t){if(t.reuseMaps&&e.savedMap)this._map=this.map=e.savedMap,e.savedMap=null,t.onLoad();else{var n={container:t.container||document.body,center:[t.longitude,t.latitude],zoom:t.zoom,pitch:t.pitch,bearing:t.bearing,style:t.mapStyle,interactive:!1,attributionControl:t.attributionControl,preserveDrawingBuffer:t.preserveDrawingBuffer};t.transformRequest&&(n.transformRequest=t.transformRequest),this._map=this.map=new m.Map(n),this.map.once("load",t.onLoad),this.map.on("error",t.onError)}return this}},{key:"_destroy",value:function(){e.savedMap?this._map.remove():e.savedMap=this._map}},{key:"_initialize",value:function(e){e=(0,u.default)({},b,e),a(e,"Mapbox"),this.accessToken=e.mapboxApiAccessToken||b.mapboxApiAccessToken,m&&(this.accessToken?m.accessToken=this.accessToken:m.accessToken="no-token"),this._create(e);var t=this.map.getCanvas();t&&(t.style.outline="none"),this._updateMapViewport({},e),this._updateMapSize({},e),this.props=e}},{key:"_update",value:function(e,t){t=(0,u.default)({},this.props,t),a(t,"Mapbox"),this._updateMapViewport(e,t),this._updateMapSize(e,t),this.props=t}},{key:"_updateMapViewport",value:function(e,t){(t.latitude!==e.latitude||t.longitude!==e.longitude||t.zoom!==e.zoom||t.pitch!==e.pitch||t.bearing!==e.bearing||t.altitude!==e.altitude)&&(this._map.jumpTo({center:[t.longitude,t.latitude],zoom:t.zoom,bearing:t.bearing,pitch:t.pitch}),t.altitude!==e.altitude&&(this._map.transform.altitude=t.altitude))}},{key:"_updateMapSize",value:function(e,t){(e.width!==t.width||e.height!==t.height)&&this._map.resize()}}]),e}();t.default=E,E.propTypes=_,E.defaultProps=b}).call(t,n(45))},function(e,t,n){(function(t){var n,n;!function(t){e.exports=t()}(function(){var e;return function e(t,r,i){function o(s,u){if(!r[s]){if(!t[s]){var l="function"==typeof n&&n;if(!u&&l)return n(s,!0);if(a)return a(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var f=r[s]={exports:{}};t[s][0].call(f.exports,function(e){var n=t[s][1][e];return o(n||e)},f,f.exports,e,t,r,i)}return r[s].exports}for(var a="function"==typeof n&&n,s=0;s<i.length;s++)o(i[s]);return o}({1:[function(t,n,r){!function(t,i){"object"==typeof r&&"undefined"!=typeof n?n.exports=i():"function"==typeof e&&e.amd?e(i):t.glMatrix=i()}(this,function(){"use strict";function e(e,t,n){var r=t[0],i=t[1],o=t[2];return e[0]=r*n[0]+i*n[3]+o*n[6],e[1]=r*n[1]+i*n[4]+o*n[7],e[2]=r*n[2]+i*n[5]+o*n[8],e}function t(e,t,n){var r=t[0],i=t[1],o=t[2],a=t[3];return e[0]=n[0]*r+n[4]*i+n[8]*o+n[12]*a,e[1]=n[1]*r+n[5]*i+n[9]*o+n[13]*a,e[2]=n[2]*r+n[6]*i+n[10]*o+n[14]*a,e[3]=n[3]*r+n[7]*i+n[11]*o+n[15]*a,e}function n(){var e=new Float32Array(4);return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e}function r(e,t,n){var r=t[0],i=t[1],o=t[2],a=t[3],s=Math.sin(n),u=Math.cos(n);return e[0]=r*u+o*s,e[1]=i*u+a*s,e[2]=r*-s+o*u,e[3]=i*-s+a*u,e}function i(e,t,n){var r=t[0],i=t[1],o=t[2],a=t[3],s=n[0],u=n[1];return e[0]=r*s,e[1]=i*s,e[2]=o*u,e[3]=a*u,e}function o(){var e=new Float32Array(9);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function a(e,t){var n=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=n,e[2]=0,e[3]=-n,e[4]=r,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function s(){var e=new Float32Array(16);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function u(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function l(e,t){var n=t[0],r=t[1],i=t[2],o=t[3],a=t[4],s=t[5],u=t[6],l=t[7],c=t[8],f=t[9],h=t[10],p=t[11],d=t[12],v=t[13],g=t[14],y=t[15],m=n*s-r*a,_=n*u-i*a,b=n*l-o*a,E=r*u-i*s,x=r*l-o*s,w=i*l-o*u,T=c*v-f*d,S=c*g-h*d,A=c*y-p*d,C=f*g-h*v,O=f*y-p*v,k=h*y-p*g,P=m*k-_*O+b*C+E*A-x*S+w*T;return P?(P=1/P,e[0]=(s*k-u*O+l*C)*P,e[1]=(i*O-r*k-o*C)*P,e[2]=(v*w-g*x+y*E)*P,e[3]=(h*x-f*w-p*E)*P,e[4]=(u*A-a*k-l*S)*P,e[5]=(n*k-i*A+o*S)*P,e[6]=(g*b-d*w-y*_)*P,e[7]=(c*w-h*b+p*_)*P,e[8]=(a*O-s*A+l*T)*P,e[9]=(r*A-n*O-o*T)*P,e[10]=(d*x-v*b+y*m)*P,e[11]=(f*b-c*x-p*m)*P,e[12]=(s*S-a*C-u*T)*P,e[13]=(n*C-r*S+i*T)*P,e[14]=(v*_-d*E-g*m)*P,e[15]=(c*E-f*_+h*m)*P,e):null}function c(e,t,n){var r=t[0],i=t[1],o=t[2],a=t[3],s=t[4],u=t[5],l=t[6],c=t[7],f=t[8],h=t[9],p=t[10],d=t[11],v=t[12],g=t[13],y=t[14],m=t[15],_=n[0],b=n[1],E=n[2],x=n[3];return e[0]=_*r+b*s+E*f+x*v,e[1]=_*i+b*u+E*h+x*g,e[2]=_*o+b*l+E*p+x*y,e[3]=_*a+b*c+E*d+x*m,_=n[4],b=n[5],E=n[6],x=n[7],e[4]=_*r+b*s+E*f+x*v,e[5]=_*i+b*u+E*h+x*g,e[6]=_*o+b*l+E*p+x*y,e[7]=_*a+b*c+E*d+x*m,_=n[8],b=n[9],E=n[10],x=n[11],e[8]=_*r+b*s+E*f+x*v,e[9]=_*i+b*u+E*h+x*g,e[10]=_*o+b*l+E*p+x*y,e[11]=_*a+b*c+E*d+x*m,_=n[12],b=n[13],E=n[14],x=n[15],e[12]=_*r+b*s+E*f+x*v,e[13]=_*i+b*u+E*h+x*g,e[14]=_*o+b*l+E*p+x*y,e[15]=_*a+b*c+E*d+x*m,e}function f(e,t,n){var r,i,o,a,s,u,l,c,f,h,p,d,v=n[0],g=n[1],y=n[2];return t===e?(e[12]=t[0]*v+t[4]*g+t[8]*y+t[12],e[13]=t[1]*v+t[5]*g+t[9]*y+t[13],e[14]=t[2]*v+t[6]*g+t[10]*y+t[14],e[15]=t[3]*v+t[7]*g+t[11]*y+t[15]):(r=t[0],i=t[1],o=t[2],a=t[3],s=t[4],u=t[5],l=t[6],c=t[7],f=t[8],h=t[9],p=t[10],d=t[11],e[0]=r,e[1]=i,e[2]=o,e[3]=a,e[4]=s,e[5]=u,e[6]=l,e[7]=c,e[8]=f,e[9]=h,e[10]=p,e[11]=d,e[12]=r*v+s*g+f*y+t[12],e[13]=i*v+u*g+h*y+t[13],e[14]=o*v+l*g+p*y+t[14],e[15]=a*v+c*g+d*y+t[15]),e}function h(e,t,n){var r=n[0],i=n[1],o=n[2];return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*i,e[5]=t[5]*i,e[6]=t[6]*i,e[7]=t[7]*i,e[8]=t[8]*o,e[9]=t[9]*o,e[10]=t[10]*o,e[11]=t[11]*o,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function p(e,t,n){var r=Math.sin(n),i=Math.cos(n),o=t[4],a=t[5],s=t[6],u=t[7],l=t[8],c=t[9],f=t[10],h=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=o*i+l*r,e[5]=a*i+c*r,e[6]=s*i+f*r,e[7]=u*i+h*r,e[8]=l*i-o*r,e[9]=c*i-a*r,e[10]=f*i-s*r,e[11]=h*i-u*r,e}function d(e,t,n){var r=Math.sin(n),i=Math.cos(n),o=t[0],a=t[1],s=t[2],u=t[3],l=t[4],c=t[5],f=t[6],h=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=o*i+l*r,e[1]=a*i+c*r,e[2]=s*i+f*r,e[3]=u*i+h*r,e[4]=l*i-o*r,e[5]=c*i-a*r,e[6]=f*i-s*r,e[7]=h*i-u*r,e}function v(e,t,n,r,i){var o=1/Math.tan(t/2),a=1/(r-i);return e[0]=o/n,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=o,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=(i+r)*a,e[11]=-1,e[12]=0,e[13]=0,e[14]=2*i*r*a,e[15]=0,e}function g(e,t,n,r,i,o,a){var s=1/(t-n),u=1/(r-i),l=1/(o-a);return e[0]=-2*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*u,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*l,e[11]=0,e[12]=(t+n)*s,e[13]=(i+r)*u,e[14]=(a+o)*l,e[15]=1,e}return function(){var e=new Float32Array(3);e[0]=0,e[1]=0,e[2]=0}(),function(){var e=new Float32Array(4);e[0]=0,e[1]=0,e[2]=0,e[3]=0}(),{vec3:{transformMat3:e},vec4:{transformMat4:t},mat2:{create:n,rotate:r,scale:i},mat3:{create:o,fromRotation:a},mat4:{create:s,identity:u,translate:f,scale:h,multiply:c,perspective:v,rotateX:p,rotateZ:d,invert:l,ortho:g}}})},{}],2:[function(e,t,n){"use strict";function r(e,t){this.x=e,this.y=t}t.exports=r,r.prototype={clone:function(){return new r(this.x,this.y)},add:function(e){return this.clone()._add(e)},sub:function(e){return this.clone()._sub(e)},multByPoint:function(e){return this.clone()._multByPoint(e)},divByPoint:function(e){return this.clone()._divByPoint(e)},mult:function(e){return this.clone()._mult(e)},div:function(e){return this.clone()._div(e)},rotate:function(e){return this.clone()._rotate(e)},rotateAround:function(e,t){return this.clone()._rotateAround(e,t)},matMult:function(e){return this.clone()._matMult(e)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(e){return this.x===e.x&&this.y===e.y},dist:function(e){return Math.sqrt(this.distSqr(e))},distSqr:function(e){var t=e.x-this.x,n=e.y-this.y;return t*t+n*n},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(e){return Math.atan2(this.y-e.y,this.x-e.x)},angleWith:function(e){return this.angleWithSep(e.x,e.y)},angleWithSep:function(e,t){return Math.atan2(this.x*t-this.y*e,this.x*e+this.y*t)},_matMult:function(e){var t=e[0]*this.x+e[1]*this.y,n=e[2]*this.x+e[3]*this.y;return this.x=t,this.y=n,this},_add:function(e){return this.x+=e.x,this.y+=e.y,this},_sub:function(e){return this.x-=e.x,this.y-=e.y,this},_mult:function(e){return this.x*=e,this.y*=e,this},_div:function(e){return this.x/=e,this.y/=e,this},_multByPoint:function(e){return this.x*=e.x,this.y*=e.y,this},_divByPoint:function(e){return this.x/=e.x,this.y/=e.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var e=this.y;return this.y=this.x,this.x=-e,this},_rotate:function(e){var t=Math.cos(e),n=Math.sin(e),r=t*this.x-n*this.y,i=n*this.x+t*this.y;return this.x=r,this.y=i,this},_rotateAround:function(e,t){var n=Math.cos(e),r=Math.sin(e),i=t.x+n*(this.x-t.x)-r*(this.y-t.y),o=t.y+r*(this.x-t.x)+n*(this.y-t.y);return this.x=i,this.y=o,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},r.convert=function(e){return e instanceof r?e:Array.isArray(e)?new r(e[0],e[1]):e}},{}],3:[function(t,n,r){!function(t,i){"object"==typeof r&&"undefined"!=typeof n?n.exports=i():"function"==typeof e&&e.amd?e(i):t.ShelfPack=i()}(this,function(){function e(e,t,n){n=n||{},this.w=e||64,this.h=t||64,this.autoResize=!!n.autoResize,this.shelves=[],this.freebins=[],this.stats={},this.bins={},this.maxId=0}function t(e,t,n){this.x=0,this.y=e,this.w=this.free=t,this.h=n}function n(e,t,n,r,i,o,a){this.id=e,this.x=t,this.y=n,this.w=r,this.h=i,this.maxw=o||r,this.maxh=a||i,this.refcount=0}return e.prototype.pack=function(e,t){e=[].concat(e),t=t||{};for(var n,r,i,o,a=[],s=0;s<e.length;s++)if(n=e[s].w||e[s].width,r=e[s].h||e[s].height,i=e[s].id,n&&r){if(!(o=this.packOne(n,r,i)))continue;t.inPlace&&(e[s].x=o.x,e[s].y=o.y,e[s].id=o.id),a.push(o)}return this.shrink(),a},e.prototype.packOne=function(e,n,r){var i,o,a,s,u={freebin:-1,shelf:-1,waste:1/0},l=0;if("string"==typeof r||"number"==typeof r){if(i=this.getBin(r))return this.ref(i),i;"number"==typeof r&&(this.maxId=Math.max(r,this.maxId))}else r=++this.maxId;for(s=0;s<this.freebins.length;s++){if(i=this.freebins[s],n===i.maxh&&e===i.maxw)return this.allocFreebin(s,e,n,r);n>i.maxh||e>i.maxw||n<=i.maxh&&e<=i.maxw&&(a=i.maxw*i.maxh-e*n)<u.waste&&(u.waste=a,u.freebin=s)}for(s=0;s<this.shelves.length;s++)if(o=this.shelves[s],l+=o.h,!(e>o.free)){if(n===o.h)return this.allocShelf(s,e,n,r);n>o.h||n<o.h&&(a=(o.h-n)*e)<u.waste&&(u.freebin=-1,u.waste=a,u.shelf=s)}if(-1!==u.freebin)return this.allocFreebin(u.freebin,e,n,r);if(-1!==u.shelf)return this.allocShelf(u.shelf,e,n,r);if(n<=this.h-l&&e<=this.w)return o=new t(l,this.w,n),this.allocShelf(this.shelves.push(o)-1,e,n,r);if(this.autoResize){var c,f,h,p;return c=f=this.h,h=p=this.w,(h<=c||e>h)&&(p=2*Math.max(e,h)),(c<h||n>c)&&(f=2*Math.max(n,c)),this.resize(p,f),this.packOne(e,n,r)}return null},e.prototype.allocFreebin=function(e,t,n,r){var i=this.freebins.splice(e,1)[0];return i.id=r,i.w=t,i.h=n,i.refcount=0,this.bins[r]=i,this.ref(i),i},e.prototype.allocShelf=function(e,t,n,r){var i=this.shelves[e],o=i.alloc(t,n,r);return this.bins[r]=o,this.ref(o),o},e.prototype.shrink=function(){if(this.shelves.length>0){for(var e=0,t=0,n=0;n<this.shelves.length;n++){var r=this.shelves[n];t+=r.h,e=Math.max(r.w-r.free,e)}this.resize(e,t)}},e.prototype.getBin=function(e){return this.bins[e]},e.prototype.ref=function(e){if(1==++e.refcount){var t=e.h;this.stats[t]=1+(0|this.stats[t])}return e.refcount},e.prototype.unref=function(e){return 0===e.refcount?0:(0==--e.refcount&&(this.stats[e.h]--,delete this.bins[e.id],this.freebins.push(e)),e.refcount)},e.prototype.clear=function(){this.shelves=[],this.freebins=[],this.stats={},this.bins={},this.maxId=0},e.prototype.resize=function(e,t){this.w=e,this.h=t;for(var n=0;n<this.shelves.length;n++)this.shelves[n].resize(e);return!0},t.prototype.alloc=function(e,t,r){if(e>this.free||t>this.h)return null;var i=this.x;return this.x+=e,this.free-=e,new n(r,i,this.y,e,t,e,this.h)},t.prototype.resize=function(e){return this.free+=e-this.w,this.w=e,!0},e})},{}],4:[function(e,t,n){"use strict";function r(e,t,n,r,i,o){this.fontSize=e||24,this.buffer=void 0===t?3:t,this.cutoff=r||.25,this.fontFamily=i||"sans-serif",this.fontWeight=o||"normal",this.radius=n||8;var a=this.size=this.fontSize+2*this.buffer;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=a,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textBaseline="middle",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(a*a),this.gridInner=new Float64Array(a*a),this.f=new Float64Array(a),this.d=new Float64Array(a),this.z=new Float64Array(a+1),this.v=new Int16Array(a),this.middle=Math.round(a/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function i(e,t,n,r,i,a,s){for(var u=0;u<t;u++){for(var l=0;l<n;l++)r[l]=e[l*t+u];for(o(r,i,a,s,n),l=0;l<n;l++)e[l*t+u]=i[l]}for(l=0;l<n;l++){for(u=0;u<t;u++)r[u]=e[l*t+u];for(o(r,i,a,s,t),u=0;u<t;u++)e[l*t+u]=Math.sqrt(i[u])}}function o(e,t,n,r,i){n[0]=0,r[0]=-a,r[1]=+a;for(var o=1,s=0;o<i;o++){for(var u=(e[o]+o*o-(e[n[s]]+n[s]*n[s]))/(2*o-2*n[s]);u<=r[s];)s--,u=(e[o]+o*o-(e[n[s]]+n[s]*n[s]))/(2*o-2*n[s]);s++,n[s]=o,r[s]=u,r[s+1]=+a}for(o=0,s=0;o<i;o++){for(;r[s+1]<o;)s++;t[o]=(o-n[s])*(o-n[s])+e[n[s]]}}t.exports=r;var a=1e20;r.prototype.draw=function(e){this.ctx.clearRect(0,0,this.size,this.size),this.ctx.fillText(e,this.buffer,this.middle);for(var t=this.ctx.getImageData(0,0,this.size,this.size),n=new Uint8ClampedArray(this.size*this.size),r=0;r<this.size*this.size;r++){var o=t.data[4*r+3]/255;this.gridOuter[r]=1===o?0:0===o?a:Math.pow(Math.max(0,.5-o),2),this.gridInner[r]=1===o?a:0===o?0:Math.pow(Math.max(0,o-.5),2)}for(i(this.gridOuter,this.size,this.size,this.f,this.d,this.v,this.z),i(this.gridInner,this.size,this.size,this.f,this.d,this.v,this.z),r=0;r<this.size*this.size;r++){var s=this.gridOuter[r]-this.gridInner[r];n[r]=Math.max(0,Math.min(255,Math.round(255-255*(s/this.radius+this.cutoff))))}return n}},{}],5:[function(e,t,n){function r(e,t,n,r){this.cx=3*e,this.bx=3*(n-e)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*t,this.by=3*(r-t)-this.cy,this.ay=1-this.cy-this.by,this.p1x=e,this.p1y=r,this.p2x=n,this.p2y=r}t.exports=r,r.prototype.sampleCurveX=function(e){return((this.ax*e+this.bx)*e+this.cx)*e},r.prototype.sampleCurveY=function(e){return((this.ay*e+this.by)*e+this.cy)*e},r.prototype.sampleCurveDerivativeX=function(e){return(3*this.ax*e+2*this.bx)*e+this.cx},r.prototype.solveCurveX=function(e,t){void 0===t&&(t=1e-6);var n,r,i,o,a;for(i=e,a=0;a<8;a++){if(o=this.sampleCurveX(i)-e,Math.abs(o)<t)return i;var s=this.sampleCurveDerivativeX(i);if(Math.abs(s)<1e-6)break;i-=o/s}if(n=0,r=1,(i=e)<n)return n;if(i>r)return r;for(;n<r;){if(o=this.sampleCurveX(i),Math.abs(o-e)<t)return i;e>o?n=i:r=i,i=.5*(r-n)+n}return i},r.prototype.solve=function(e,t){return this.sampleCurveY(this.solveCurveX(e,t))}},{}],6:[function(e,t,n){t.exports.VectorTile=e("./lib/vectortile.js"),t.exports.VectorTileFeature=e("./lib/vectortilefeature.js"),t.exports.VectorTileLayer=e("./lib/vectortilelayer.js")},{"./lib/vectortile.js":7,"./lib/vectortilefeature.js":8,"./lib/vectortilelayer.js":9}],7:[function(e,t,n){"use strict";function r(e,t){this.layers=e.readFields(i,{},t)}function i(e,t,n){if(3===e){var r=new o(n,n.readVarint()+n.pos);r.length&&(t[r.name]=r)}}var o=e("./vectortilelayer");t.exports=r},{"./vectortilelayer":9}],8:[function(e,t,n){"use strict";function r(e,t,n,r,o){this.properties={},this.extent=n,this.type=0,this._pbf=e,this._geometry=-1,this._keys=r,this._values=o,e.readFields(i,this,t)}function i(e,t,n){1==e?t.id=n.readVarint():2==e?o(n,t):3==e?t.type=n.readVarint():4==e&&(t._geometry=n.pos)}function o(e,t){for(var n=e.readVarint()+e.pos;e.pos<n;){var r=t._keys[e.readVarint()],i=t._values[e.readVarint()];t.properties[r]=i}}function a(e){var t=e.length;if(t<=1)return[e];for(var n,r,i=[],o=0;o<t;o++){var a=s(e[o]);0!==a&&(void 0===r&&(r=a<0),r===a<0?(n&&i.push(n),n=[e[o]]):n.push(e[o]))}return n&&i.push(n),i}function s(e){for(var t,n,r=0,i=0,o=e.length,a=o-1;i<o;a=i++)t=e[i],n=e[a],r+=(n.x-t.x)*(t.y+n.y);return r}var u=e("@mapbox/point-geometry");t.exports=r,r.types=["Unknown","Point","LineString","Polygon"],r.prototype.loadGeometry=function(){var e=this._pbf;e.pos=this._geometry;for(var t,n=e.readVarint()+e.pos,r=1,i=0,o=0,a=0,s=[];e.pos<n;){if(!i){var l=e.readVarint();r=7&l,i=l>>3}if(i--,1===r||2===r)o+=e.readSVarint(),a+=e.readSVarint(),1===r&&(t&&s.push(t),t=[]),t.push(new u(o,a));else{if(7!==r)throw new Error("unknown command "+r);t&&t.push(t[0].clone())}}return t&&s.push(t),s},r.prototype.bbox=function(){var e=this._pbf;e.pos=this._geometry;for(var t=e.readVarint()+e.pos,n=1,r=0,i=0,o=0,a=1/0,s=-1/0,u=1/0,l=-1/0;e.pos<t;){if(!r){var c=e.readVarint();n=7&c,r=c>>3}if(r--,1===n||2===n)i+=e.readSVarint(),o+=e.readSVarint(),i<a&&(a=i),i>s&&(s=i),o<u&&(u=o),o>l&&(l=o);else if(7!==n)throw new Error("unknown command "+n)}return[a,u,s,l]},r.prototype.toGeoJSON=function(e,t,n){function i(e){for(var t=0;t<e.length;t++){var n=e[t],r=180-360*(n.y+c)/u;e[t]=[360*(n.x+l)/u-180,360/Math.PI*Math.atan(Math.exp(r*Math.PI/180))-90]}}var o,s,u=this.extent*Math.pow(2,n),l=this.extent*e,c=this.extent*t,f=this.loadGeometry(),h=r.types[this.type];switch(this.type){case 1:var p=[];for(o=0;o<f.length;o++)p[o]=f[o][0];f=p,i(f);break;case 2:for(o=0;o<f.length;o++)i(f[o]);break;case 3:for(f=a(f),o=0;o<f.length;o++)for(s=0;s<f[o].length;s++)i(f[o][s])}1===f.length?f=f[0]:h="Multi"+h;var d={type:"Feature",geometry:{type:h,coordinates:f},properties:this.properties};return"id"in this&&(d.id=this.id),d}},{"@mapbox/point-geometry":2}],9:[function(e,t,n){"use strict";function r(e,t){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=e,this._keys=[],this._values=[],this._features=[],e.readFields(i,this,t),this.length=this._features.length}function i(e,t,n){15===e?t.version=n.readVarint():1===e?t.name=n.readString():5===e?t.extent=n.readVarint():2===e?t._features.push(n.pos):3===e?t._keys.push(n.readString()):4===e&&t._values.push(o(n))}function o(e){for(var t=null,n=e.readVarint()+e.pos;e.pos<n;){var r=e.readVarint()>>3;t=1===r?e.readString():2===r?e.readFloat():3===r?e.readDouble():4===r?e.readVarint64():5===r?e.readVarint():6===r?e.readSVarint():7===r?e.readBoolean():null}return t}var a=e("./vectortilefeature.js");t.exports=r,r.prototype.feature=function(e){if(e<0||e>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[e];var t=this._pbf.readVarint()+this._pbf.pos;return new a(this._pbf,t,this.extent,this._keys,this._values)}},{"./vectortilefeature.js":8}],10:[function(t,n,r){!function(t,i){"object"==typeof r&&"undefined"!=typeof n?i(r):"function"==typeof e&&e.amd?e(["exports"],i):i(t.WhooTS=t.WhooTS||{})}(this,function(e){function t(e,t,r,i,o,a){return a=a||{},e+"?"+["bbox="+n(r,i,o),"format="+(a.format||"image/png"),"service="+(a.service||"WMS"),"version="+(a.version||"1.1.1"),"request="+(a.request||"GetMap"),"srs="+(a.srs||"EPSG:3857"),"width="+(a.width||256),"height="+(a.height||256),"layers="+t].join("&")}function n(e,t,n){t=Math.pow(2,n)-t-1;var i=r(256*e,256*t,n),o=r(256*(e+1),256*(t+1),n);return i[0]+","+i[1]+","+o[0]+","+o[1]}function r(e,t,n){var r=2*Math.PI*6378137/256/Math.pow(2,n);return[e*r-2*Math.PI*6378137/2,t*r-2*Math.PI*6378137/2]}e.getURL=t,e.getTileBBox=n,e.getMercCoords=r,Object.defineProperty(e,"__esModule",{value:!0})})},{}],11:[function(e,t,n){function r(e){return e=Math.round(e),e<0?0:e>255?255:e}function i(e){return e<0?0:e>1?1:e}function o(e){return r("%"===e[e.length-1]?parseFloat(e)/100*255:parseInt(e))}function a(e){return i("%"===e[e.length-1]?parseFloat(e)/100:parseFloat(e))}function s(e,t,n){return n<0?n+=1:n>1&&(n-=1),6*n<1?e+(t-e)*n*6:2*n<1?t:3*n<2?e+(t-e)*(2/3-n)*6:e}function u(e){var t=e.replace(/ /g,"").toLowerCase();if(t in l)return l[t].slice();if("#"===t[0]){if(4===t.length){var n=parseInt(t.substr(1),16);return n>=0&&n<=4095?[(3840&n)>>4|(3840&n)>>8,240&n|(240&n)>>4,15&n|(15&n)<<4,1]:null}if(7===t.length){var n=parseInt(t.substr(1),16);return n>=0&&n<=16777215?[(16711680&n)>>16,(65280&n)>>8,255&n,1]:null}return null}var i=t.indexOf("("),u=t.indexOf(")");if(-1!==i&&u+1===t.length){var c=t.substr(0,i),f=t.substr(i+1,u-(i+1)).split(","),h=1;switch(c){case"rgba":if(4!==f.length)return null;h=a(f.pop());case"rgb":return 3!==f.length?null:[o(f[0]),o(f[1]),o(f[2]),h];case"hsla":if(4!==f.length)return null;h=a(f.pop());case"hsl":if(3!==f.length)return null;var p=(parseFloat(f[0])%360+360)%360/360,d=a(f[1]),v=a(f[2]),g=v<=.5?v*(d+1):v+d-v*d,y=2*v-g;return[r(255*s(y,g,p+1/3)),r(255*s(y,g,p)),r(255*s(y,g,p-1/3)),h];default:return null}}return null}var l={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};try{n.parseCSSColor=u}catch(e){}},{}],12:[function(e,t,n){"use strict";function r(e,t,n){n=n||2;var r=t&&t.length,o=r?t[0]*n:e.length,s=i(e,0,o,n,!0),u=[];if(!s)return u;var l,c,h,p,d,v,g;if(r&&(s=f(e,t,s,n)),e.length>80*n){l=h=e[0],c=p=e[1];for(var y=n;y<o;y+=n)d=e[y],v=e[y+1],d<l&&(l=d),v<c&&(c=v),d>h&&(h=d),v>p&&(p=v);g=Math.max(h-l,p-c)}return a(s,u,n,l,c,g),u}function i(e,t,n,r,i){var o,a;if(i===R(e,t,n,r)>0)for(o=t;o<n;o+=r)a=O(o,e[o],e[o+1],a);else for(o=n-r;o>=t;o-=r)a=O(o,e[o],e[o+1],a);return a&&x(a,a.next)&&(k(a),a=a.next),a}function o(e,t){if(!e)return e;t||(t=e);var n,r=e;do{if(n=!1,r.steiner||!x(r,r.next)&&0!==E(r.prev,r,r.next))r=r.next;else{if(k(r),(r=t=r.prev)===r.next)return null;n=!0}}while(n||r!==t);return t}function a(e,t,n,r,i,f,h){if(e){!h&&f&&v(e,r,i,f);for(var p,d,g=e;e.prev!==e.next;)if(p=e.prev,d=e.next,f?u(e,r,i,f):s(e))t.push(p.i/n),t.push(e.i/n),t.push(d.i/n),k(e),e=d.next,g=d.next;else if((e=d)===g){h?1===h?(e=l(e,t,n),a(e,t,n,r,i,f,2)):2===h&&c(e,t,n,r,i,f):a(o(e),t,n,r,i,f,1);break}}}function s(e){var t=e.prev,n=e,r=e.next;if(E(t,n,r)>=0)return!1;for(var i=e.next.next;i!==e.prev;){if(_(t.x,t.y,n.x,n.y,r.x,r.y,i.x,i.y)&&E(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}function u(e,t,n,r){var i=e.prev,o=e,a=e.next;if(E(i,o,a)>=0)return!1;for(var s=i.x<o.x?i.x<a.x?i.x:a.x:o.x<a.x?o.x:a.x,u=i.y<o.y?i.y<a.y?i.y:a.y:o.y<a.y?o.y:a.y,l=i.x>o.x?i.x>a.x?i.x:a.x:o.x>a.x?o.x:a.x,c=i.y>o.y?i.y>a.y?i.y:a.y:o.y>a.y?o.y:a.y,f=y(s,u,t,n,r),h=y(l,c,t,n,r),p=e.nextZ;p&&p.z<=h;){if(p!==e.prev&&p!==e.next&&_(i.x,i.y,o.x,o.y,a.x,a.y,p.x,p.y)&&E(p.prev,p,p.next)>=0)return!1;p=p.nextZ}for(p=e.prevZ;p&&p.z>=f;){if(p!==e.prev&&p!==e.next&&_(i.x,i.y,o.x,o.y,a.x,a.y,p.x,p.y)&&E(p.prev,p,p.next)>=0)return!1;p=p.prevZ}return!0}function l(e,t,n){var r=e;do{var i=r.prev,o=r.next.next;!x(i,o)&&w(i,r,r.next,o)&&S(i,o)&&S(o,i)&&(t.push(i.i/n),t.push(r.i/n),t.push(o.i/n),k(r),k(r.next),r=e=o),r=r.next}while(r!==e);return r}function c(e,t,n,r,i,s){var u=e;do{for(var l=u.next.next;l!==u.prev;){if(u.i!==l.i&&b(u,l)){var c=C(u,l);return u=o(u,u.next),c=o(c,c.next),a(u,t,n,r,i,s),void a(c,t,n,r,i,s)}l=l.next}u=u.next}while(u!==e)}function f(e,t,n,r){var a,s,u,l,c,f=[];for(a=0,s=t.length;a<s;a++)u=t[a]*r,l=a<s-1?t[a+1]*r:e.length,c=i(e,u,l,r,!1),c===c.next&&(c.steiner=!0),f.push(m(c));for(f.sort(h),a=0;a<f.length;a++)p(f[a],n),n=o(n,n.next);return n}function h(e,t){return e.x-t.x}function p(e,t){if(t=d(e,t)){var n=C(t,e);o(n,n.next)}}function d(e,t){var n,r=t,i=e.x,o=e.y,a=-1/0;do{if(o<=r.y&&o>=r.next.y){var s=r.x+(o-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(s<=i&&s>a){if(a=s,s===i){if(o===r.y)return r;if(o===r.next.y)return r.next}n=r.x<r.next.x?r:r.next}}r=r.next}while(r!==t);if(!n)return null;if(i===a)return n.prev;var u,l=n,c=n.x,f=n.y,h=1/0;for(r=n.next;r!==l;)i>=r.x&&r.x>=c&&_(o<f?i:a,o,c,f,o<f?a:i,o,r.x,r.y)&&((u=Math.abs(o-r.y)/(i-r.x))<h||u===h&&r.x>n.x)&&S(r,e)&&(n=r,h=u),r=r.next;return n}function v(e,t,n,r){var i=e;do{null===i.z&&(i.z=y(i.x,i.y,t,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==e);i.prevZ.nextZ=null,i.prevZ=null,g(i)}function g(e){var t,n,r,i,o,a,s,u,l=1;do{for(n=e,e=null,o=null,a=0;n;){for(a++,r=n,s=0,t=0;t<l&&(s++,r=r.nextZ);t++);for(u=l;s>0||u>0&&r;)0===s?(i=r,r=r.nextZ,u--):0!==u&&r?n.z<=r.z?(i=n,n=n.nextZ,s--):(i=r,r=r.nextZ,u--):(i=n,n=n.nextZ,s--),o?o.nextZ=i:e=i,i.prevZ=o,o=i;n=r}o.nextZ=null,l*=2}while(a>1);return e}function y(e,t,n,r,i){return e=32767*(e-n)/i,t=32767*(t-r)/i,e=16711935&(e|e<<8),e=252645135&(e|e<<4),e=858993459&(e|e<<2),e=1431655765&(e|e<<1),t=16711935&(t|t<<8),t=252645135&(t|t<<4),t=858993459&(t|t<<2),t=1431655765&(t|t<<1),e|t<<1}function m(e){var t=e,n=e;do{t.x<n.x&&(n=t),t=t.next}while(t!==e);return n}function _(e,t,n,r,i,o,a,s){return(i-a)*(t-s)-(e-a)*(o-s)>=0&&(e-a)*(r-s)-(n-a)*(t-s)>=0&&(n-a)*(o-s)-(i-a)*(r-s)>=0}function b(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!T(e,t)&&S(e,t)&&S(t,e)&&A(e,t)}function E(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y)}function x(e,t){return e.x===t.x&&e.y===t.y}function w(e,t,n,r){return!!(x(e,t)&&x(n,r)||x(e,r)&&x(n,t))||E(e,t,n)>0!=E(e,t,r)>0&&E(n,r,e)>0!=E(n,r,t)>0}function T(e,t){var n=e;do{if(n.i!==e.i&&n.next.i!==e.i&&n.i!==t.i&&n.next.i!==t.i&&w(n,n.next,e,t))return!0;n=n.next}while(n!==e);return!1}function S(e,t){return E(e.prev,e,e.next)<0?E(e,t,e.next)>=0&&E(e,e.prev,t)>=0:E(e,t,e.prev)<0||E(e,e.next,t)<0}function A(e,t){var n=e,r=!1,i=(e.x+t.x)/2,o=(e.y+t.y)/2;do{n.y>o!=n.next.y>o&&i<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==e);return r}function C(e,t){var n=new P(e.i,e.x,e.y),r=new P(t.i,t.x,t.y),i=e.next,o=t.prev;return e.next=t,t.prev=e,n.next=i,i.prev=n,r.next=n,n.prev=r,o.next=r,r.prev=o,r}function O(e,t,n,r){var i=new P(e,t,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function k(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function P(e,t,n){this.i=e,this.x=t,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function R(e,t,n,r){for(var i=0,o=t,a=n-r;o<n;o+=r)i+=(e[a]-e[o])*(e[o+1]+e[a+1]),a=o;return i}t.exports=r,r.deviation=function(e,t,n,r){var i=t&&t.length,o=i?t[0]*n:e.length,a=Math.abs(R(e,0,o,n));if(i)for(var s=0,u=t.length;s<u;s++){var l=t[s]*n,c=s<u-1?t[s+1]*n:e.length;a-=Math.abs(R(e,l,c,n))}var f=0;for(s=0;s<r.length;s+=3){var h=r[s]*n,p=r[s+1]*n,d=r[s+2]*n;f+=Math.abs((e[h]-e[d])*(e[p+1]-e[h+1])-(e[h]-e[p])*(e[d+1]-e[h+1]))}return 0===a&&0===f?0:Math.abs((f-a)/a)},r.flatten=function(e){for(var t=e[0][0].length,n={vertices:[],holes:[],dimensions:t},r=0,i=0;i<e.length;i++){for(var o=0;o<e[i].length;o++)for(var a=0;a<t;a++)n.vertices.push(e[i][o][a]);i>0&&(r+=e[i-1].length,n.holes.push(r))}return n}},{}],13:[function(e,t,n){function r(e){if("Polygon"===e.type)return i(e.coordinates);if("MultiPolygon"===e.type){for(var t=0,n=0;n<e.coordinates.length;n++)t+=i(e.coordinates[n]);return t}return null}function i(e){var t=0;if(e&&e.length>0){t+=Math.abs(o(e[0]));for(var n=1;n<e.length;n++)t-=Math.abs(o(e[n]))}return t}function o(e){var t=0;if(e.length>2){for(var n,r,i=0;i<e.length-1;i++)n=e[i],r=e[i+1],t+=a(r[0]-n[0])*(2+Math.sin(a(n[1]))+Math.sin(a(r[1])));t=t*s.RADIUS*s.RADIUS/2}return t}function a(e){return e*Math.PI/180}var s=e("wgs84");t.exports.geometry=r,t.exports.ring=o},{wgs84:49}],14:[function(e,t,n){function r(e,t){switch(e&&e.type||null){case"FeatureCollection":return e.features=e.features.map(i(r,t)),e;case"Feature":return e.geometry=r(e.geometry,t),e;case"Polygon":case"MultiPolygon":return o(e,t);default:return e}}function i(e,t){return function(n){return e(n,t)}}function o(e,t){return"Polygon"===e.type?e.coordinates=a(e.coordinates,t):"MultiPolygon"===e.type&&(e.coordinates=e.coordinates.map(i(a,t))),e}function a(e,t){t=!!t,e[0]=s(e[0],t);for(var n=1;n<e.length;n++)e[n]=s(e[n],!t);return e}function s(e,t){return u(e)===t?e:e.reverse()}function u(e){return l.ring(e)>=0}var l=e("geojson-area");t.exports=r},{"geojson-area":13}],15:[function(e,t,n){"use strict";function r(e,t,n,r,a,u,l,c){if(n/=t,r/=t,l>=n&&c<=r)return e;if(l>r||c<n)return null;for(var f=[],h=0;h<e.length;h++){var p,d,v=e[h],g=v.geometry,y=v.type;if(p=v.min[a],d=v.max[a],p>=n&&d<=r)f.push(v);else if(!(p>r||d<n)){var m=1===y?i(g,n,r,a):o(g,n,r,a,u,3===y);m.length&&f.push(s(v.tags,y,m,v.id))}}return f.length?f:null}function i(e,t,n,r){for(var i=[],o=0;o<e.length;o++){var a=e[o],s=a[r];s>=t&&s<=n&&i.push(a)}return i}function o(e,t,n,r,i,o){for(var s=[],u=0;u<e.length;u++){var l,c,f,h=0,p=0,d=null,v=e[u],g=v.area,y=v.dist,m=v.outer,_=v.length,b=[];for(c=0;c<_-1;c++)l=d||v[c],d=v[c+1],h=p||l[r],p=d[r],h<t?p>n?(b.push(i(l,d,t),i(l,d,n)),o||(b=a(s,b,g,y,m))):p>=t&&b.push(i(l,d,t)):h>n?p<t?(b.push(i(l,d,n),i(l,d,t)),o||(b=a(s,b,g,y,m))):p<=n&&b.push(i(l,d,n)):(b.push(l),p<t?(b.push(i(l,d,t)),o||(b=a(s,b,g,y,m))):p>n&&(b.push(i(l,d,n)),o||(b=a(s,b,g,y,m))));l=v[_-1],h=l[r],h>=t&&h<=n&&b.push(l),f=b[b.length-1],o&&f&&(b[0][0]!==f[0]||b[0][1]!==f[1])&&b.push(b[0]),a(s,b,g,y,m)}return s}function a(e,t,n,r,i){return t.length&&(t.area=n,t.dist=r,void 0!==i&&(t.outer=i),e.push(t)),[]}t.exports=r;var s=e("./feature")},{"./feature":17}],16:[function(e,t,n){"use strict";function r(e,t){var n=[];if("FeatureCollection"===e.type)for(var r=0;r<e.features.length;r++)i(n,e.features[r],t);else"Feature"===e.type?i(n,e,t):i(n,{geometry:e},t);return n}function i(e,t,n){if(null!==t.geometry){var r,s,u,c,f=t.geometry,h=f.type,p=f.coordinates,d=t.properties,v=t.id;if("Point"===h)e.push(l(d,1,[a(p)],v));else if("MultiPoint"===h)e.push(l(d,1,o(p),v));else if("LineString"===h)e.push(l(d,2,[o(p,n)],v));else if("MultiLineString"===h||"Polygon"===h){for(u=[],r=0;r<p.length;r++)c=o(p[r],n),"Polygon"===h&&(c.outer=0===r),u.push(c);e.push(l(d,"Polygon"===h?3:2,u,v))}else if("MultiPolygon"===h){for(u=[],r=0;r<p.length;r++)for(s=0;s<p[r].length;s++)c=o(p[r][s],n),c.outer=0===s,u.push(c);e.push(l(d,3,u,v))}else{if("GeometryCollection"!==h)throw new Error("Input data is not a valid GeoJSON object.");for(r=0;r<f.geometries.length;r++)i(e,{geometry:f.geometries[r],properties:d},n)}}}function o(e,t){for(var n=[],r=0;r<e.length;r++)n.push(a(e[r]));return t&&(u(n,t),s(n)),n}function a(e){var t=Math.sin(e[1]*Math.PI/180),n=e[0]/360+.5,r=.5-.25*Math.log((1+t)/(1-t))/Math.PI;return r=r<0?0:r>1?1:r,[n,r,0]}function s(e){for(var t,n,r=0,i=0,o=0;o<e.length-1;o++)t=n||e[o],n=e[o+1],r+=t[0]*n[1]-n[0]*t[1],i+=Math.abs(n[0]-t[0])+Math.abs(n[1]-t[1]);e.area=Math.abs(r/2),e.dist=i}t.exports=r;var u=e("./simplify"),l=e("./feature")},{"./feature":17,"./simplify":19}],17:[function(e,t,n){"use strict";function r(e,t,n,r){var o={id:r||null,type:t,geometry:n,tags:e||null,min:[1/0,1/0],max:[-1/0,-1/0]};return i(o),o}function i(e){var t=e.geometry,n=e.min,r=e.max;if(1===e.type)o(n,r,t);else for(var i=0;i<t.length;i++)o(n,r,t[i]);return e}function o(e,t,n){for(var r,i=0;i<n.length;i++)r=n[i],e[0]=Math.min(r[0],e[0]),t[0]=Math.max(r[0],t[0]),e[1]=Math.min(r[1],e[1]),t[1]=Math.max(r[1],t[1])}t.exports=r},{}],18:[function(e,t,n){"use strict";function r(e,t){return new i(e,t)}function i(e,t){t=this.options=u(Object.create(this.options),t);var n=t.debug;n&&console.time("preprocess data");var r=1<<t.maxZoom,i=c(e,t.tolerance/(r*t.extent));this.tiles={},this.tileCoords=[],n&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",t.indexMaxZoom,t.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),i=p(i,t.buffer/t.extent,a),i.length&&this.splitTile(i,0,0,0),n&&(i.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function o(e,t,n){return 32*((1<<e)*n+t)+e}function a(e,t,n){return[n,(n-e[0])*(t[1]-e[1])/(t[0]-e[0])+e[1],1]}function s(e,t,n){return[(n-e[1])*(t[0]-e[0])/(t[1]-e[1])+e[0],n,1]}function u(e,t){for(var n in t)e[n]=t[n];return e}function l(e,t,n){var r=e.source;if(1!==r.length)return!1;var i=r[0];if(3!==i.type||i.geometry.length>1)return!1;var o=i.geometry[0].length;if(5!==o)return!1;for(var a=0;a<o;a++){var s=f.point(i.geometry[0][a],t,e.z2,e.x,e.y);if(s[0]!==-n&&s[0]!==t+n||s[1]!==-n&&s[1]!==t+n)return!1}return!0}t.exports=r;var c=e("./convert"),f=e("./transform"),h=e("./clip"),p=e("./wrap"),d=e("./tile");i.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,solidChildren:!1,tolerance:3,extent:4096,buffer:64,debug:0},i.prototype.splitTile=function(e,t,n,r,i,u,c){for(var f=[e,t,n,r],p=this.options,v=p.debug,g=null;f.length;){r=f.pop(),n=f.pop(),t=f.pop(),e=f.pop();var y=1<<t,m=o(t,n,r),_=this.tiles[m],b=t===p.maxZoom?0:p.tolerance/(y*p.extent);if(!_&&(v>1&&console.time("creation"),_=this.tiles[m]=d(e,y,n,r,b,t===p.maxZoom),this.tileCoords.push({z:t,x:n,y:r}),v)){v>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",t,n,r,_.numFeatures,_.numPoints,_.numSimplified),console.timeEnd("creation"));var E="z"+t;this.stats[E]=(this.stats[E]||0)+1,this.total++}if(_.source=e,i){if(t===p.maxZoom||t===i)continue;var x=1<<i-t;if(n!==Math.floor(u/x)||r!==Math.floor(c/x))continue}else if(t===p.indexMaxZoom||_.numPoints<=p.indexMaxPoints)continue;if(p.solidChildren||!l(_,p.extent,p.buffer)){_.source=null,v>1&&console.time("clipping");var w,T,S,A,C,O,k=.5*p.buffer/p.extent,P=.5-k,R=.5+k,I=1+k;w=T=S=A=null,C=h(e,y,n-k,n+R,0,a,_.min[0],_.max[0]),O=h(e,y,n+P,n+I,0,a,_.min[0],_.max[0]),C&&(w=h(C,y,r-k,r+R,1,s,_.min[1],_.max[1]),T=h(C,y,r+P,r+I,1,s,_.min[1],_.max[1])),O&&(S=h(O,y,r-k,r+R,1,s,_.min[1],_.max[1]),A=h(O,y,r+P,r+I,1,s,_.min[1],_.max[1])),v>1&&console.timeEnd("clipping"),e.length&&(f.push(w||[],t+1,2*n,2*r),f.push(T||[],t+1,2*n,2*r+1),f.push(S||[],t+1,2*n+1,2*r),f.push(A||[],t+1,2*n+1,2*r+1))}else i&&(g=t)}return g},i.prototype.getTile=function(e,t,n){var r=this.options,i=r.extent,a=r.debug,s=1<<e;t=(t%s+s)%s;var u=o(e,t,n);if(this.tiles[u])return f.tile(this.tiles[u],i);a>1&&console.log("drilling down to z%d-%d-%d",e,t,n);for(var c,h=e,p=t,d=n;!c&&h>0;)h--,p=Math.floor(p/2),d=Math.floor(d/2),c=this.tiles[o(h,p,d)];if(!c||!c.source)return null;if(a>1&&console.log("found parent tile z%d-%d-%d",h,p,d),l(c,i,r.buffer))return f.tile(c,i);a>1&&console.time("drilling down");var v=this.splitTile(c.source,h,p,d,e,t,n);if(a>1&&console.timeEnd("drilling down"),null!==v){var g=1<<e-v;u=o(v,Math.floor(t/g),Math.floor(n/g))}return this.tiles[u]?f.tile(this.tiles[u],i):null}},{"./clip":15,"./convert":16,"./tile":20,"./transform":21,"./wrap":22}],19:[function(e,t,n){"use strict";function r(e,t){var n,r,o,a,s=t*t,u=e.length,l=0,c=u-1,f=[];for(e[l][2]=1,e[c][2]=1;c;){for(r=0,n=l+1;n<c;n++)(o=i(e[n],e[l],e[c]))>r&&(a=n,r=o);r>s?(e[a][2]=r,f.push(l),f.push(a),l=a):(c=f.pop(),l=f.pop())}}function i(e,t,n){var r=t[0],i=t[1],o=n[0],a=n[1],s=e[0],u=e[1],l=o-r,c=a-i;if(0!==l||0!==c){var f=((s-r)*l+(u-i)*c)/(l*l+c*c);f>1?(r=o,i=a):f>0&&(r+=l*f,i+=c*f)}return l=s-r,c=u-i,l*l+c*c}t.exports=r},{}],20:[function(e,t,n){"use strict";function r(e,t,n,r,o,a){for(var s={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:n,y:r,z2:t,transformed:!1,min:[2,1],max:[-1,0]},u=0;u<e.length;u++){s.numFeatures++,i(s,e[u],o,a);var l=e[u].min,c=e[u].max;l[0]<s.min[0]&&(s.min[0]=l[0]),l[1]<s.min[1]&&(s.min[1]=l[1]),c[0]>s.max[0]&&(s.max[0]=c[0]),c[1]>s.max[1]&&(s.max[1]=c[1])}return s}function i(e,t,n,r){var i,a,s,u,l=t.geometry,c=t.type,f=[],h=n*n;if(1===c)for(i=0;i<l.length;i++)f.push(l[i]),e.numPoints++,e.numSimplified++;else for(i=0;i<l.length;i++)if(s=l[i],r||!(2===c&&s.dist<n||3===c&&s.area<h)){var p=[];for(a=0;a<s.length;a++)u=s[a],(r||u[2]>h)&&(p.push(u),e.numSimplified++),e.numPoints++;3===c&&o(p,s.outer),f.push(p)}else e.numPoints+=s.length;if(f.length){var d={geometry:f,type:c,tags:t.tags||null};null!==t.id&&(d.id=t.id),e.features.push(d)}}function o(e,t){a(e)<0===t&&e.reverse()}function a(e){for(var t,n,r=0,i=0,o=e.length,a=o-1;i<o;a=i++)t=e[i],n=e[a],r+=(n[0]-t[0])*(t[1]+n[1]);return r}t.exports=r},{}],21:[function(e,t,n){"use strict";function r(e,t){if(e.transformed)return e;var n,r,o,a=e.z2,s=e.x,u=e.y;for(n=0;n<e.features.length;n++){var l=e.features[n],c=l.geometry;if(1===l.type)for(r=0;r<c.length;r++)c[r]=i(c[r],t,a,s,u);else for(r=0;r<c.length;r++){var f=c[r];for(o=0;o<f.length;o++)f[o]=i(f[o],t,a,s,u)}}return e.transformed=!0,e}function i(e,t,n,r,i){return[Math.round(t*(e[0]*n-r)),Math.round(t*(e[1]*n-i))]}n.tile=r,n.point=i},{}],22:[function(e,t,n){"use strict";function r(e,t,n){var r=e,o=a(e,1,-1-t,t,0,n,-1,2),s=a(e,1,1-t,2+t,0,n,-1,2);return(o||s)&&(r=a(e,1,-t,1+t,0,n,-1,2)||[],o&&(r=i(o,1).concat(r)),s&&(r=r.concat(i(s,-1)))),r}function i(e,t){for(var n=[],r=0;r<e.length;r++){var i,a=e[r],u=a.type;if(1===u)i=o(a.geometry,t);else{i=[];for(var l=0;l<a.geometry.length;l++)i.push(o(a.geometry[l],t))}n.push(s(a.tags,u,i,a.id))}return n}function o(e,t){var n=[];n.area=e.area,n.dist=e.dist;for(var r=0;r<e.length;r++)n.push([e[r][0]+t,e[r][1],e[r][2]]);return n}var a=e("./clip"),s=e("./feature");t.exports=r},{"./clip":15,"./feature":17}],23:[function(e,t,n){"use strict";function r(e,t,n){var r=this.cells=[];if(e instanceof ArrayBuffer){this.arrayBuffer=e;var o=new Int32Array(this.arrayBuffer);e=o[0],t=o[1],n=o[2],this.d=t+2*n;for(var a=0;a<this.d*this.d;a++){var s=o[i+a],u=o[i+a+1];r.push(s===u?null:o.subarray(s,u))}var l=o[i+r.length],c=o[i+r.length+1];this.keys=o.subarray(l,c),this.bboxes=o.subarray(c),this.insert=this._insertReadonly}else{this.d=t+2*n;for(var f=0;f<this.d*this.d;f++)r.push([]);this.keys=[],this.bboxes=[]}this.n=t,this.extent=e,this.padding=n,this.scale=t/e,this.uid=0;var h=n/t*e;this.min=-h,this.max=e+h}t.exports=r;var i=3;r.prototype.insert=function(e,t,n,r,i){this._forEachCell(t,n,r,i,this._insertCell,this.uid++),this.keys.push(e),this.bboxes.push(t),this.bboxes.push(n),this.bboxes.push(r),this.bboxes.push(i)},r.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},r.prototype._insertCell=function(e,t,n,r,i,o){this.cells[i].push(o)},r.prototype.query=function(e,t,n,r){var i=this.min,o=this.max;if(e<=i&&t<=i&&o<=n&&o<=r)return Array.prototype.slice.call(this.keys);var a=[],s={};return this._forEachCell(e,t,n,r,this._queryCell,a,s),a},r.prototype._queryCell=function(e,t,n,r,i,o,a){var s=this.cells[i];if(null!==s)for(var u=this.keys,l=this.bboxes,c=0;c<s.length;c++){var f=s[c];if(void 0===a[f]){var h=4*f;e<=l[h+2]&&t<=l[h+3]&&n>=l[h+0]&&r>=l[h+1]?(a[f]=!0,o.push(u[f])):a[f]=!1}}},r.prototype._forEachCell=function(e,t,n,r,i,o,a){for(var s=this._convertToCellCoord(e),u=this._convertToCellCoord(t),l=this._convertToCellCoord(n),c=this._convertToCellCoord(r),f=s;f<=l;f++)for(var h=u;h<=c;h++){var p=this.d*h+f;if(i.call(this,e,t,n,r,p,o,a))return}},r.prototype._convertToCellCoord=function(e){return Math.max(0,Math.min(this.d-1,Math.floor(e*this.scale)+this.padding))},r.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var e=this.cells,t=i+this.cells.length+1+1,n=0,r=0;r<this.cells.length;r++)n+=this.cells[r].length;var o=new Int32Array(t+n+this.keys.length+this.bboxes.length);o[0]=this.extent,o[1]=this.n,o[2]=this.padding;for(var a=t,s=0;s<e.length;s++){var u=e[s];o[i+s]=a,o.set(u,a),a+=u.length}return o[i+e.length]=a,o.set(this.keys,a),a+=this.keys.length,o[i+e.length+1]=a,o.set(this.bboxes,a),a+=this.bboxes.length,o.buffer}},{}],24:[function(e,t,n){n.read=function(e,t,n,r,i){var o,a,s=8*i-r-1,u=(1<<s)-1,l=u>>1,c=-7,f=n?i-1:0,h=n?-1:1,p=e[t+f];for(f+=h,o=p&(1<<-c)-1,p>>=-c,c+=s;c>0;o=256*o+e[t+f],f+=h,c-=8);for(a=o&(1<<-c)-1,o>>=-c,c+=r;c>0;a=256*a+e[t+f],f+=h,c-=8);if(0===o)o=1-l;else{if(o===u)return a?NaN:1/0*(p?-1:1);a+=Math.pow(2,r),o-=l}return(p?-1:1)*a*Math.pow(2,o-r)},n.write=function(e,t,n,r,i,o){var a,s,u,l=8*o-i-1,c=(1<<l)-1,f=c>>1,h=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=r?0:o-1,d=r?1:-1,v=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=c):(a=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-a))<1&&(a--,u*=2),t+=a+f>=1?h/u:h*Math.pow(2,1-f),t*u>=2&&(a++,u/=2),a+f>=c?(s=0,a=c):a+f>=1?(s=(t*u-1)*Math.pow(2,i),a+=f):(s=t*Math.pow(2,f-1)*Math.pow(2,i),a=0));i>=8;e[n+p]=255&s,p+=d,s/=256,i-=8);for(a=a<<i|s,l+=i;l>0;e[n+p]=255&a,p+=d,a/=256,l-=8);e[n+p-d]|=128*v}},{}],25:[function(e,t,n){"use strict";function r(e,t,n,r,o){return new i(e,t,n,r,o)}function i(e,t,n,r,i){t=t||o,n=n||a,i=i||Array,this.nodeSize=r||64,this.points=e,this.ids=new i(e.length),this.coords=new i(2*e.length);for(var u=0;u<e.length;u++)this.ids[u]=u,this.coords[2*u]=t(e[u]),this.coords[2*u+1]=n(e[u]);s(this.ids,this.coords,this.nodeSize,0,this.ids.length-1,0)}function o(e){return e[0]}function a(e){return e[1]}var s=e("./sort"),u=e("./range"),l=e("./within");t.exports=r,i.prototype={range:function(e,t,n,r){return u(this.ids,this.coords,e,t,n,r,this.nodeSize)},within:function(e,t,n){return l(this.ids,this.coords,e,t,n,this.nodeSize)}}},{"./range":26,"./sort":27,"./within":28}],26:[function(e,t,n){"use strict";function r(e,t,n,r,i,o,a){for(var s,u,l=[0,e.length-1,0],c=[];l.length;){var f=l.pop(),h=l.pop(),p=l.pop();if(h-p<=a)for(var d=p;d<=h;d++)s=t[2*d],u=t[2*d+1],s>=n&&s<=i&&u>=r&&u<=o&&c.push(e[d]);else{var v=Math.floor((p+h)/2);s=t[2*v],u=t[2*v+1],s>=n&&s<=i&&u>=r&&u<=o&&c.push(e[v]);var g=(f+1)%2;(0===f?n<=s:r<=u)&&(l.push(p),l.push(v-1),l.push(g)),(0===f?i>=s:o>=u)&&(l.push(v+1),l.push(h),l.push(g))}}return c}t.exports=r},{}],27:[function(e,t,n){"use strict";function r(e,t,n,o,a,s){if(!(a-o<=n)){var u=Math.floor((o+a)/2);i(e,t,u,o,a,s%2),r(e,t,n,o,u-1,s+1),r(e,t,n,u+1,a,s+1)}}function i(e,t,n,r,a,s){for(;a>r;){if(a-r>600){var u=a-r+1,l=n-r+1,c=Math.log(u),f=.5*Math.exp(2*c/3),h=.5*Math.sqrt(c*f*(u-f)/u)*(l-u/2<0?-1:1);i(e,t,n,Math.max(r,Math.floor(n-l*f/u+h)),Math.min(a,Math.floor(n+(u-l)*f/u+h)),s)}var p=t[2*n+s],d=r,v=a;for(o(e,t,r,n),t[2*a+s]>p&&o(e,t,r,a);d<v;){for(o(e,t,d,v),d++,v--;t[2*d+s]<p;)d++;for(;t[2*v+s]>p;)v--}t[2*r+s]===p?o(e,t,r,v):(v++,o(e,t,v,a)),v<=n&&(r=v+1),n<=v&&(a=v-1)}}function o(e,t,n,r){a(e,n,r),a(t,2*n,2*r),a(t,2*n+1,2*r+1)}function a(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}t.exports=r},{}],28:[function(e,t,n){"use strict";function r(e,t,n,r,o,a){for(var s=[0,e.length-1,0],u=[],l=o*o;s.length;){var c=s.pop(),f=s.pop(),h=s.pop();if(f-h<=a)for(var p=h;p<=f;p++)i(t[2*p],t[2*p+1],n,r)<=l&&u.push(e[p]);else{var d=Math.floor((h+f)/2),v=t[2*d],g=t[2*d+1];i(v,g,n,r)<=l&&u.push(e[d]);var y=(c+1)%2;(0===c?n-o<=v:r-o<=g)&&(s.push(h),s.push(d-1),s.push(y)),(0===c?n+o>=v:r+o>=g)&&(s.push(d+1),s.push(f),s.push(y))}}return u}function i(e,t,n,r){var i=e-n,o=t-r;return i*i+o*o}t.exports=r},{}],29:[function(e,t,n){function r(e){return!!e&&"object"==typeof e}function i(e,t){for(var n=-1,r=e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}function o(e,t,n,i,s,u){return e===t||(null==e||null==t||!c(e)&&!r(t)?e!==e&&t!==t:a(e,t,o,n,i,s,u))}function a(e,t,n,r,i,o,a){var c=f(e),p=f(t),g=v,y=v;c||(g=S.call(e),g==d?g=b:g!=b&&(c=h(e))),p||(y=S.call(t),y==d?y=b:y!=b&&(p=h(t)));var m=g==b,_=y==b,E=g==y;if(E&&!c&&!m)return u(e,t,g);if(!i){var x=m&&T.call(e,"__wrapped__"),w=_&&T.call(t,"__wrapped__");if(x||w)return n(x?e.value():e,w?t.value():t,r,i,o,a)}if(!E)return!1;o||(o=[]),a||(a=[]);for(var A=o.length;A--;)if(o[A]==e)return a[A]==t;o.push(e),a.push(t);var C=(c?s:l)(e,t,n,r,i,o,a);return o.pop(),a.pop(),C}function s(e,t,n,r,o,a,s){var u=-1,l=e.length,c=t.length;if(l!=c&&!(o&&c>l))return!1;for(;++u<l;){var f=e[u],h=t[u],p=r?r(o?h:f,o?f:h,u):void 0;if(void 0!==p){if(p)continue;return!1}if(o){if(!i(t,function(e){return f===e||n(f,e,r,o,a,s)}))return!1}else if(f!==h&&!n(f,h,r,o,a,s))return!1}return!0}function u(e,t,n){switch(n){case g:case y:return+e==+t;case m:return e.name==t.name&&e.message==t.message;case _:return e!=+e?t!=+t:e==+t;case E:case x:return e==t+""}return!1}function l(e,t,n,r,i,o,a){var s=p(e),u=s.length;if(u!=p(t).length&&!i)return!1;for(var l=u;l--;){var c=s[l];if(!(i?c in t:T.call(t,c)))return!1}for(var f=i;++l<u;){c=s[l];var h=e[c],d=t[c],v=r?r(i?d:h,i?h:d,c):void 0;if(!(void 0===v?n(h,d,r,i,o,a):v))return!1;f||(f="constructor"==c)}if(!f){var g=e.constructor,y=t.constructor;if(g!=y&&"constructor"in e&&"constructor"in t&&!("function"==typeof g&&g instanceof g&&"function"==typeof y&&y instanceof y))return!1}return!0}function c(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}var f=e("lodash.isarray"),h=e("lodash.istypedarray"),p=e("lodash.keys"),d="[object Arguments]",v="[object Array]",g="[object Boolean]",y="[object Date]",m="[object Error]",_="[object Number]",b="[object Object]",E="[object RegExp]",x="[object String]",w=Object.prototype,T=w.hasOwnProperty,S=w.toString;t.exports=o},{"lodash.isarray":33,"lodash.istypedarray":35,"lodash.keys":36}],30:[function(e,t,n){function r(e,t,n){if("function"!=typeof e)return i;if(void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 3:return function(n,r,i){return e.call(t,n,r,i)};case 4:return function(n,r,i,o){return e.call(t,n,r,i,o)};case 5:return function(n,r,i,o,a){return e.call(t,n,r,i,o,a)}}return function(){return e.apply(t,arguments)}}function i(e){return e}t.exports=r},{}],31:[function(e,t,n){function r(e){return!!e&&"object"==typeof e}function i(e,t){var n=null==e?void 0:e[t];return s(n)?n:void 0}function o(e){return a(e)&&p.call(e)==u}function a(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function s(e){return null!=e&&(o(e)?d.test(f.call(e)):r(e)&&l.test(e))}var u="[object Function]",l=/^\[object .+?Constructor\]$/,c=Object.prototype,f=Function.prototype.toString,h=c.hasOwnProperty,p=c.toString,d=RegExp("^"+f.call(h).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");t.exports=i},{}],32:[function(e,t,n){function r(e){return o(e)&&v.call(e,"callee")&&(!y.call(e,"callee")||g.call(e)==f)}function i(e){return null!=e&&s(e.length)&&!a(e)}function o(e){return l(e)&&i(e)}function a(e){var t=u(e)?g.call(e):"";return t==h||t==p}function s(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=c}function u(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function l(e){return!!e&&"object"==typeof e}var c=9007199254740991,f="[object Arguments]",h="[object Function]",p="[object GeneratorFunction]",d=Object.prototype,v=d.hasOwnProperty,g=d.toString,y=d.propertyIsEnumerable;t.exports=r},{}],33:[function(e,t,n){function r(e){return!!e&&"object"==typeof e}function i(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=g}function o(e){return a(e)&&p.call(e)==u}function a(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function s(e){return null!=e&&(o(e)?d.test(f.call(e)):r(e)&&l.test(e))}var u="[object Function]",l=/^\[object .+?Constructor\]$/,c=Object.prototype,f=Function.prototype.toString,h=c.hasOwnProperty,p=c.toString,d=RegExp("^"+f.call(h).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),v=function(e,t){var n=null==e?void 0:e[t];return s(n)?n:void 0}(Array,"isArray"),g=9007199254740991,y=v||function(e){return r(e)&&i(e.length)&&"[object Array]"==p.call(e)};t.exports=y},{}],34:[function(e,t,n){function r(e,t,n,r){n="function"==typeof n?o(n,r,3):void 0;var a=n?n(e,t):void 0;return void 0===a?i(e,t,n):!!a}var i=e("lodash._baseisequal"),o=e("lodash._bindcallback");t.exports=r},{"lodash._baseisequal":29,"lodash._bindcallback":30}],35:[function(e,t,n){function r(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=a}function i(e){return!!e&&"object"==typeof e}function o(e){return i(e)&&r(e.length)&&!!s[l.call(e)]}var a=9007199254740991,s={};s["[object Float32Array]"]=s["[object Float64Array]"]=s["[object Int8Array]"]=s["[object Int16Array]"]=s["[object Int32Array]"]=s["[object Uint8Array]"]=s["[object Uint8ClampedArray]"]=s["[object Uint16Array]"]=s["[object Uint32Array]"]=!0,s["[object Arguments]"]=s["[object Array]"]=s["[object ArrayBuffer]"]=s["[object Boolean]"]=s["[object DataView]"]=s["[object Date]"]=s["[object Error]"]=s["[object Function]"]=s["[object Map]"]=s["[object Number]"]=s["[object Object]"]=s["[object RegExp]"]=s["[object Set]"]=s["[object String]"]=s["[object WeakMap]"]=!1;var u=Object.prototype,l=u.toString;t.exports=o},{}],36:[function(e,t,n){function r(e){return null!=e&&o(y(e))}function i(e,t){return e="number"==typeof e||h.test(e)?+e:-1,t=null==t?g:t,e>-1&&e%1==0&&e<t}function o(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=g}function a(e){for(var t=u(e),n=t.length,r=n&&e.length,a=!!r&&o(r)&&(f(e)||c(e)),s=-1,l=[];++s<n;){var h=t[s];(a&&i(h,r)||d.call(e,h))&&l.push(h)}return l}function s(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function u(e){if(null==e)return[];s(e)||(e=Object(e));var t=e.length;t=t&&o(t)&&(f(e)||c(e))&&t||0;for(var n=e.constructor,r=-1,a="function"==typeof n&&n.prototype===e,u=Array(t),l=t>0;++r<t;)u[r]=r+"";for(var h in e)l&&i(h,t)||"constructor"==h&&(a||!d.call(e,h))||u.push(h);return u}var l=e("lodash._getnative"),c=e("lodash.isarguments"),f=e("lodash.isarray"),h=/^\d+$/,p=Object.prototype,d=p.hasOwnProperty,v=l(Object,"keys"),g=9007199254740991,y=function(e){return function(t){return null==t?void 0:t[e]}}("length"),m=v?function(e){var t=null==e?void 0:e.constructor;return"function"==typeof t&&t.prototype===e||"function"!=typeof e&&r(e)?a(e):s(e)?v(e):[]}:a;t.exports=m},{"lodash._getnative":31,"lodash.isarguments":32,"lodash.isarray":33}],37:[function(e,t,n){"use strict";function r(e){return!!(i()&&o()&&a()&&s()&&u()&&l()&&c()&&f(e&&e.failIfMajorPerformanceCaveat))}function i(){return"undefined"!=typeof window&&"undefined"!=typeof document}function o(){return Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray}function a(){return Function.prototype&&Function.prototype.bind}function s(){return Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions}function u(){return"JSON"in window&&"parse"in JSON&&"stringify"in JSON}function l(){return"Worker"in window}function c(){return"Uint8ClampedArray"in window}function f(e){return void 0===p[e]&&(p[e]=h(e)),p[e]}function h(e){var t=document.createElement("canvas"),n=Object.create(r.webGLContextAttributes);return n.failIfMajorPerformanceCaveat=e,t.probablySupportsContext?t.probablySupportsContext("webgl",n)||t.probablySupportsContext("experimental-webgl",n):t.supportsContext?t.supportsContext("webgl",n)||t.supportsContext("experimental-webgl",n):t.getContext("webgl",n)||t.getContext("experimental-webgl",n)}"undefined"!=typeof t&&t.exports?t.exports=r:window&&(window.mapboxgl=window.mapboxgl||{},window.mapboxgl.supported=r);var p={};r.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0}},{}],38:[function(e,t,n){"use strict";function r(e){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(e)?e:new Uint8Array(e||0),this.pos=0,this.type=0,this.length=this.buf.length}function i(e,t,n){var r,i,o=n.buf;if(i=o[n.pos++],r=(112&i)>>4,i<128)return a(e,r,t);if(i=o[n.pos++],r|=(127&i)<<3,i<128)return a(e,r,t);if(i=o[n.pos++],r|=(127&i)<<10,i<128)return a(e,r,t);if(i=o[n.pos++],r|=(127&i)<<17,i<128)return a(e,r,t);if(i=o[n.pos++],r|=(127&i)<<24,i<128)return a(e,r,t);if(i=o[n.pos++],r|=(1&i)<<31,i<128)return a(e,r,t);throw new Error("Expected varint not more than 10 bytes")}function o(e){return e.type===r.Bytes?e.readVarint()+e.pos:e.pos+1}function a(e,t,n){return n?4294967296*t+(e>>>0):4294967296*(t>>>0)+(e>>>0)}function s(e,t){var n,r;if(e>=0?(n=e%4294967296|0,r=e/4294967296|0):(n=~(-e%4294967296),r=~(-e/4294967296),4294967295^n?n=n+1|0:(n=0,r=r+1|0)),e>=0x10000000000000000||e<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");t.realloc(10),u(n,r,t),l(r,t)}function u(e,t,n){n.buf[n.pos++]=127&e|128,e>>>=7,n.buf[n.pos++]=127&e|128,e>>>=7,n.buf[n.pos++]=127&e|128,e>>>=7,n.buf[n.pos++]=127&e|128,e>>>=7,n.buf[n.pos]=127&e}function l(e,t){var n=(7&e)<<4;t.buf[t.pos++]|=n|((e>>>=3)?128:0),e&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e)))))}function c(e,t,n){var r=t<=16383?1:t<=2097151?2:t<=268435455?3:Math.ceil(Math.log(t)/(7*Math.LN2));n.realloc(r);for(var i=n.pos-1;i>=e;i--)n.buf[i+r]=n.buf[i]}function f(e,t){for(var n=0;n<e.length;n++)t.writeVarint(e[n])}function h(e,t){for(var n=0;n<e.length;n++)t.writeSVarint(e[n])}function p(e,t){for(var n=0;n<e.length;n++)t.writeFloat(e[n])}function d(e,t){for(var n=0;n<e.length;n++)t.writeDouble(e[n])}function v(e,t){for(var n=0;n<e.length;n++)t.writeBoolean(e[n])}function g(e,t){for(var n=0;n<e.length;n++)t.writeFixed32(e[n])}function y(e,t){for(var n=0;n<e.length;n++)t.writeSFixed32(e[n])}function m(e,t){for(var n=0;n<e.length;n++)t.writeFixed64(e[n])}function _(e,t){for(var n=0;n<e.length;n++)t.writeSFixed64(e[n])}function b(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+16777216*e[t+3]}function E(e,t,n){e[n]=t,e[n+1]=t>>>8,e[n+2]=t>>>16,e[n+3]=t>>>24}function x(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+(e[t+3]<<24)}function w(e,t,n){for(var r="",i=t;i<n;){var o=e[i],a=null,s=o>239?4:o>223?3:o>191?2:1;if(i+s>n)break;var u,l,c;1===s?o<128&&(a=o):2===s?128==(192&(u=e[i+1]))&&(a=(31&o)<<6|63&u)<=127&&(a=null):3===s?(u=e[i+1],l=e[i+2],128==(192&u)&&128==(192&l)&&((a=(15&o)<<12|(63&u)<<6|63&l)<=2047||a>=55296&&a<=57343)&&(a=null)):4===s&&(u=e[i+1],l=e[i+2],c=e[i+3],128==(192&u)&&128==(192&l)&&128==(192&c)&&((a=(15&o)<<18|(63&u)<<12|(63&l)<<6|63&c)<=65535||a>=1114112)&&(a=null)),null===a?(a=65533,s=1):a>65535&&(a-=65536,r+=String.fromCharCode(a>>>10&1023|55296),a=56320|1023&a),r+=String.fromCharCode(a),i+=s}return r}function T(e,t,n){for(var r,i,o=0;o<t.length;o++){if((r=t.charCodeAt(o))>55295&&r<57344){if(!i){r>56319||o+1===t.length?(e[n++]=239,e[n++]=191,e[n++]=189):i=r;continue}if(r<56320){e[n++]=239,e[n++]=191,e[n++]=189,i=r;continue}r=i-55296<<10|r-56320|65536,i=null}else i&&(e[n++]=239,e[n++]=191,e[n++]=189,i=null);r<128?e[n++]=r:(r<2048?e[n++]=r>>6|192:(r<65536?e[n++]=r>>12|224:(e[n++]=r>>18|240,e[n++]=r>>12&63|128),e[n++]=r>>6&63|128),e[n++]=63&r|128)}return n}t.exports=r;var S=e("ieee754");r.Varint=0,r.Fixed64=1,r.Bytes=2,r.Fixed32=5;r.prototype={destroy:function(){this.buf=null},readFields:function(e,t,n){for(n=n||this.length;this.pos<n;){var r=this.readVarint(),i=r>>3,o=this.pos;this.type=7&r,e(i,t,this),this.pos===o&&this.skip(r)}return t},readMessage:function(e,t){return this.readFields(e,t,this.readVarint()+this.pos)},readFixed32:function(){var e=b(this.buf,this.pos);return this.pos+=4,e},readSFixed32:function(){var e=x(this.buf,this.pos);return this.pos+=4,e},readFixed64:function(){var e=b(this.buf,this.pos)+4294967296*b(this.buf,this.pos+4);return this.pos+=8,e},readSFixed64:function(){var e=b(this.buf,this.pos)+4294967296*x(this.buf,this.pos+4);return this.pos+=8,e},readFloat:function(){var e=S.read(this.buf,this.pos,!0,23,4);return this.pos+=4,e},readDouble:function(){var e=S.read(this.buf,this.pos,!0,52,8);return this.pos+=8,e},readVarint:function(e){var t,n,r=this.buf;return n=r[this.pos++],t=127&n,n<128?t:(n=r[this.pos++],t|=(127&n)<<7,n<128?t:(n=r[this.pos++],t|=(127&n)<<14,n<128?t:(n=r[this.pos++],t|=(127&n)<<21,n<128?t:(n=r[this.pos],t|=(15&n)<<28,i(t,e,this)))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var e=this.readVarint();return e%2==1?(e+1)/-2:e/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var e=this.readVarint()+this.pos,t=w(this.buf,this.pos,e);return this.pos=e,t},readBytes:function(){var e=this.readVarint()+this.pos,t=this.buf.subarray(this.pos,e);return this.pos=e,t},readPackedVarint:function(e,t){var n=o(this);for(e=e||[];this.pos<n;)e.push(this.readVarint(t));return e},readPackedSVarint:function(e){var t=o(this);for(e=e||[];this.pos<t;)e.push(this.readSVarint());return e},readPackedBoolean:function(e){var t=o(this);for(e=e||[];this.pos<t;)e.push(this.readBoolean());return e},readPackedFloat:function(e){var t=o(this);for(e=e||[];this.pos<t;)e.push(this.readFloat());return e},readPackedDouble:function(e){var t=o(this);for(e=e||[];this.pos<t;)e.push(this.readDouble());return e},readPackedFixed32:function(e){var t=o(this);for(e=e||[];this.pos<t;)e.push(this.readFixed32());return e},readPackedSFixed32:function(e){var t=o(this);for(e=e||[];this.pos<t;)e.push(this.readSFixed32());return e},readPackedFixed64:function(e){var t=o(this);for(e=e||[];this.pos<t;)e.push(this.readFixed64());return e},readPackedSFixed64:function(e){var t=o(this);for(e=e||[];this.pos<t;)e.push(this.readSFixed64());return e},skip:function(e){var t=7&e;if(t===r.Varint)for(;this.buf[this.pos++]>127;);else if(t===r.Bytes)this.pos=this.readVarint()+this.pos;else if(t===r.Fixed32)this.pos+=4;else{if(t!==r.Fixed64)throw new Error("Unimplemented type: "+t);this.pos+=8}},writeTag:function(e,t){this.writeVarint(e<<3|t)},realloc:function(e){for(var t=this.length||16;t<this.pos+e;)t*=2;if(t!==this.length){var n=new Uint8Array(t);n.set(this.buf),this.buf=n,this.length=t}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(e){this.realloc(4),E(this.buf,e,this.pos),this.pos+=4},writeSFixed32:function(e){this.realloc(4),E(this.buf,e,this.pos),this.pos+=4},writeFixed64:function(e){this.realloc(8),E(this.buf,-1&e,this.pos),E(this.buf,Math.floor(e*(1/4294967296)),this.pos+4),this.pos+=8},writeSFixed64:function(e){this.realloc(8),E(this.buf,-1&e,this.pos),E(this.buf,Math.floor(e*(1/4294967296)),this.pos+4),this.pos+=8},writeVarint:function(e){if((e=+e||0)>268435455||e<0)return void s(e,this);this.realloc(4),this.buf[this.pos++]=127&e|(e>127?128:0),e<=127||(this.buf[this.pos++]=127&(e>>>=7)|(e>127?128:0),e<=127||(this.buf[this.pos++]=127&(e>>>=7)|(e>127?128:0),e<=127||(this.buf[this.pos++]=e>>>7&127)))},writeSVarint:function(e){this.writeVarint(e<0?2*-e-1:2*e)},writeBoolean:function(e){this.writeVarint(Boolean(e))},writeString:function(e){e=String(e),this.realloc(4*e.length),this.pos++;var t=this.pos;this.pos=T(this.buf,e,this.pos);var n=this.pos-t;n>=128&&c(t,n,this),this.pos=t-1,this.writeVarint(n),this.pos+=n},writeFloat:function(e){this.realloc(4),S.write(this.buf,e,this.pos,!0,23,4),this.pos+=4},writeDouble:function(e){this.realloc(8),S.write(this.buf,e,this.pos,!0,52,8),this.pos+=8},writeBytes:function(e){var t=e.length;this.writeVarint(t),this.realloc(t);for(var n=0;n<t;n++)this.buf[this.pos++]=e[n]},writeRawMessage:function(e,t){this.pos++;var n=this.pos;e(t,this);var r=this.pos-n;r>=128&&c(n,r,this),this.pos=n-1,this.writeVarint(r),this.pos+=r},writeMessage:function(e,t,n){this.writeTag(e,r.Bytes),this.writeRawMessage(t,n)},writePackedVarint:function(e,t){this.writeMessage(e,f,t)},writePackedSVarint:function(e,t){this.writeMessage(e,h,t)},writePackedBoolean:function(e,t){this.writeMessage(e,v,t)},writePackedFloat:function(e,t){this.writeMessage(e,p,t)},writePackedDouble:function(e,t){this.writeMessage(e,d,t)},writePackedFixed32:function(e,t){this.writeMessage(e,g,t)},writePackedSFixed32:function(e,t){this.writeMessage(e,y,t)},writePackedFixed64:function(e,t){this.writeMessage(e,m,t)},writePackedSFixed64:function(e,t){this.writeMessage(e,_,t)},writeBytesField:function(e,t){this.writeTag(e,r.Bytes),this.writeBytes(t)},writeFixed32Field:function(e,t){this.writeTag(e,r.Fixed32),this.writeFixed32(t)},writeSFixed32Field:function(e,t){this.writeTag(e,r.Fixed32),this.writeSFixed32(t)},writeFixed64Field:function(e,t){this.writeTag(e,r.Fixed64),this.writeFixed64(t)},writeSFixed64Field:function(e,t){this.writeTag(e,r.Fixed64),this.writeSFixed64(t)},writeVarintField:function(e,t){this.writeTag(e,r.Varint),this.writeVarint(t)},writeSVarintField:function(e,t){this.writeTag(e,r.Varint),this.writeSVarint(t)},writeStringField:function(e,t){this.writeTag(e,r.Bytes),this.writeString(t)},writeFloatField:function(e,t){this.writeTag(e,r.Fixed32),this.writeFloat(t)},writeDoubleField:function(e,t){this.writeTag(e,r.Fixed64),this.writeDouble(t)},writeBooleanField:function(e,t){this.writeVarintField(e,Boolean(t))}}},{ieee754:24}],39:[function(e,t,n){function r(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function o(e){if(f===setTimeout)return setTimeout(e,0);if((f===r||!f)&&setTimeout)return f=setTimeout,setTimeout(e,0);try{return f(e,0)}catch(t){try{return f.call(null,e,0)}catch(t){return f.call(this,e,0)}}}function a(e){if(h===clearTimeout)return clearTimeout(e);if((h===i||!h)&&clearTimeout)return h=clearTimeout,clearTimeout(e);try{return h(e)}catch(t){try{return h.call(null,e)}catch(t){return h.call(this,e)}}}function s(){g&&d&&(g=!1,d.length?v=d.concat(v):y=-1,v.length&&u())}function u(){if(!g){var e=o(s);g=!0;for(var t=v.length;t;){for(d=v,v=[];++y<t;)d&&d[y].run();y=-1,t=v.length}d=null,g=!1,a(e)}}function l(e,t){this.fun=e,this.array=t}function c(){}var f,h,p=t.exports={};!function(){try{f="function"==typeof setTimeout?setTimeout:r}catch(e){f=r}try{h="function"==typeof clearTimeout?clearTimeout:i}catch(e){h=i}}();var d,v=[],g=!1,y=-1;p.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];v.push(new l(e,t)),1!==v.length||g||o(u)},l.prototype.run=function(){this.fun.apply(null,this.array)},p.title="browser",p.browser=!0,p.env={},p.argv=[],p.version="",p.versions={},p.on=c,p.addListener=c,p.once=c,p.off=c,p.removeListener=c,p.removeAllListeners=c,p.emit=c,p.prependListener=c,p.prependOnceListener=c,p.listeners=function(e){return[]},p.binding=function(e){throw new Error("process.binding is not supported")},p.cwd=function(){return"/"},p.chdir=function(e){throw new Error("process.chdir is not supported")},p.umask=function(){return 0}},{}],40:[function(e,t,n){"use strict";function r(e,t,n,a,s){for(n=n||0,a=a||e.length-1,s=s||o;a>n;){if(a-n>600){var u=a-n+1,l=t-n+1,c=Math.log(u),f=.5*Math.exp(2*c/3),h=.5*Math.sqrt(c*f*(u-f)/u)*(l-u/2<0?-1:1);r(e,t,Math.max(n,Math.floor(t-l*f/u+h)),Math.min(a,Math.floor(t+(u-l)*f/u+h)),s)}var p=e[t],d=n,v=a;for(i(e,n,t),s(e[a],p)>0&&i(e,n,a);d<v;){for(i(e,d,v),d++,v--;s(e[d],p)<0;)d++;for(;s(e[v],p)>0;)v--}0===s(e[n],p)?i(e,n,v):(v++,i(e,v,a)),v<=t&&(n=v+1),t<=v&&(a=v-1)}}function i(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function o(e,t){return e<t?-1:e>t?1:0}t.exports=r},{}],41:[function(e,t,n){"use strict";function r(e){return new i(e)}function i(e){this.options=p(Object.create(this.options),e),this.trees=new Array(this.options.maxZoom+1)}function o(e,t,n,r,i){return{x:e,y:t,zoom:1/0,id:r,properties:i,parentId:-1,numPoints:n}}function a(e,t){var n=e.geometry.coordinates;return{x:l(n[0]),y:c(n[1]),zoom:1/0,id:t,parentId:-1}}function s(e){return{type:"Feature",properties:u(e),geometry:{type:"Point",coordinates:[f(e.x),h(e.y)]}}}function u(e){var t=e.numPoints,n=t>=1e4?Math.round(t/1e3)+"k":t>=1e3?Math.round(t/100)/10+"k":t;return p(p({},e.properties),{cluster:!0,cluster_id:e.id,point_count:t,point_count_abbreviated:n})}function l(e){return e/360+.5}function c(e){var t=Math.sin(e*Math.PI/180),n=.5-.25*Math.log((1+t)/(1-t))/Math.PI;return n<0?0:n>1?1:n}function f(e){return 360*(e-.5)}function h(e){var t=(180-360*e)*Math.PI/180;return 360*Math.atan(Math.exp(t))/Math.PI-90}function p(e,t){for(var n in t)e[n]=t[n];return e}function d(e){return e.x}function v(e){return e.y}var g=e("kdbush");t.exports=r,i.prototype={options:{minZoom:0,maxZoom:16,radius:40,extent:512,nodeSize:64,log:!1,reduce:null,initial:function(){return{}},map:function(e){return e}},load:function(e){var t=this.options.log;t&&console.time("total time");var n="prepare "+e.length+" points";t&&console.time(n),this.points=e;var r=e.map(a);t&&console.timeEnd(n);for(var i=this.options.maxZoom;i>=this.options.minZoom;i--){var o=+Date.now();this.trees[i+1]=g(r,d,v,this.options.nodeSize,Float32Array),r=this._cluster(r,i),t&&console.log("z%d: %d clusters in %dms",i,r.length,+Date.now()-o)}return this.trees[this.options.minZoom]=g(r,d,v,this.options.nodeSize,Float32Array),t&&console.timeEnd("total time"),this},getClusters:function(e,t){for(var n=this.trees[this._limitZoom(t)],r=n.range(l(e[0]),c(e[3]),l(e[2]),c(e[1])),i=[],o=0;o<r.length;o++){var a=n.points[r[o]];i.push(a.numPoints?s(a):this.points[a.id])}return i},getChildren:function(e,t){for(var n=this.trees[t+1].points[e],r=this.options.radius/(this.options.extent*Math.pow(2,t)),i=this.trees[t+1].within(n.x,n.y,r),o=[],a=0;a<i.length;a++){var u=this.trees[t+1].points[i[a]];u.parentId===e&&o.push(u.numPoints?s(u):this.points[u.id])}return o},getLeaves:function(e,t,n,r){n=n||10,r=r||0;var i=[];return this._appendLeaves(i,e,t,n,r,0),i},getTile:function(e,t,n){var r=this.trees[this._limitZoom(e)],i=Math.pow(2,e),o=this.options.extent,a=this.options.radius,s=a/o,u=(n-s)/i,l=(n+1+s)/i,c={features:[]};return this._addTileFeatures(r.range((t-s)/i,u,(t+1+s)/i,l),r.points,t,n,i,c),0===t&&this._addTileFeatures(r.range(1-s/i,u,1,l),r.points,i,n,i,c),t===i-1&&this._addTileFeatures(r.range(0,u,s/i,l),r.points,-1,n,i,c),c.features.length?c:null},getClusterExpansionZoom:function(e,t){for(;t<this.options.maxZoom;){var n=this.getChildren(e,t);if(t++,1!==n.length)break;e=n[0].properties.cluster_id}return t},_appendLeaves:function(e,t,n,r,i,o){for(var a=this.getChildren(t,n),s=0;s<a.length;s++){var u=a[s].properties;if(u.cluster?o+u.point_count<=i?o+=u.point_count:o=this._appendLeaves(e,u.cluster_id,n+1,r,i,o):o<i?o++:e.push(a[s]),e.length===r)break}return o},_addTileFeatures:function(e,t,n,r,i,o){for(var a=0;a<e.length;a++){var s=t[e[a]];o.features.push({type:1,geometry:[[Math.round(this.options.extent*(s.x*i-n)),Math.round(this.options.extent*(s.y*i-r))]],tags:s.numPoints?u(s):this.points[s.id].properties})}},_limitZoom:function(e){return Math.max(this.options.minZoom,Math.min(e,this.options.maxZoom+1))},_cluster:function(e,t){for(var n=[],r=this.options.radius/(this.options.extent*Math.pow(2,t)),i=0;i<e.length;i++){var a=e[i];if(!(a.zoom<=t)){a.zoom=t;var s=this.trees[t+1],u=s.within(a.x,a.y,r),l=a.numPoints||1,c=a.x*l,f=a.y*l,h=null;this.options.reduce&&(h=this.options.initial(),this._accumulate(h,a));for(var p=0;p<u.length;p++){var d=s.points[u[p]];if(t<d.zoom){var v=d.numPoints||1;d.zoom=t,c+=d.x*v,f+=d.y*v,l+=v,d.parentId=i,this.options.reduce&&this._accumulate(h,d)}}1===l?n.push(a):(a.parentId=i,n.push(o(c/l,f/l,l,i,h)))}}return n},_accumulate:function(e,t){var n=t.numPoints?t.properties:this.options.map(this.points[t.id].properties);this.options.reduce(e,n)}}},{kdbush:25}],42:[function(e,t,n){"use strict";function r(e,t){if(!(this instanceof r))return new r(e,t);if(this.data=e||[],this.length=this.data.length,this.compare=t||i,this.length>0)for(var n=this.length>>1;n>=0;n--)this._down(n)}function i(e,t){return e<t?-1:e>t?1:0}t.exports=r,r.prototype={push:function(e){this.data.push(e),this.length++,this._up(this.length-1)},pop:function(){if(0!==this.length){var e=this.data[0];return this.length--,this.length>0&&(this.data[0]=this.data[this.length],this._down(0)),this.data.pop(),e}},peek:function(){return this.data[0]},_up:function(e){for(var t=this.data,n=this.compare,r=t[e];e>0;){var i=e-1>>1,o=t[i];if(n(r,o)>=0)break;t[e]=o,e=i}t[e]=r},_down:function(e){for(var t=this.data,n=this.compare,r=this.length,i=r>>1,o=t[e];e<i;){var a=1+(e<<1),s=a+1,u=t[a];if(s<r&&n(t[s],u)<0&&(a=s,u=t[s]),n(u,o)>=0)break;t[e]=u,e=a}t[e]=o}}},{}],43:[function(e,t,n){"function"==typeof Object.create?t.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},{}],44:[function(e,t,n){t.exports=function(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},{}],45:[function(e,n,r){(function(t,n){function i(e,t){var n={seen:[],stylize:a};return arguments.length>=3&&(n.depth=arguments[2]),arguments.length>=4&&(n.colors=arguments[3]),v(t)?n.showHidden=t:t&&r._extend(n,t),E(n.showHidden)&&(n.showHidden=!1),E(n.depth)&&(n.depth=2),E(n.colors)&&(n.colors=!1),E(n.customInspect)&&(n.customInspect=!0),n.colors&&(n.stylize=o),u(n,e,n.depth)}function o(e,t){var n=i.styles[t];return n?"\x1b["+i.colors[n][0]+"m"+e+"\x1b["+i.colors[n][1]+"m":e}function a(e,t){return e}function s(e){var t={};return e.forEach(function(e,n){t[e]=!0}),t}function u(e,t,n){if(e.customInspect&&t&&A(t.inspect)&&t.inspect!==r.inspect&&(!t.constructor||t.constructor.prototype!==t)){var i=t.inspect(n,e);return _(i)||(i=u(e,i,n)),i}var o=l(e,t);if(o)return o;var a=Object.keys(t),v=s(a);if(e.showHidden&&(a=Object.getOwnPropertyNames(t)),S(t)&&(a.indexOf("message")>=0||a.indexOf("description")>=0))return c(t);if(0===a.length){if(A(t)){var g=t.name?": "+t.name:"";return e.stylize("[Function"+g+"]","special")}if(x(t))return e.stylize(RegExp.prototype.toString.call(t),"regexp");if(T(t))return e.stylize(Date.prototype.toString.call(t),"date");if(S(t))return c(t)}var y="",m=!1,b=["{","}"];if(d(t)&&(m=!0,b=["[","]"]),A(t)&&(y=" [Function"+(t.name?": "+t.name:"")+"]"),x(t)&&(y=" "+RegExp.prototype.toString.call(t)),T(t)&&(y=" "+Date.prototype.toUTCString.call(t)),S(t)&&(y=" "+c(t)),0===a.length&&(!m||0==t.length))return b[0]+y+b[1];if(n<0)return x(t)?e.stylize(RegExp.prototype.toString.call(t),"regexp"):e.stylize("[Object]","special");e.seen.push(t);var E;return E=m?f(e,t,n,v,a):a.map(function(r){return h(e,t,n,v,r,m)}),e.seen.pop(),p(E,y,b)}function l(e,t){if(E(t))return e.stylize("undefined","undefined");if(_(t)){var n="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(n,"string")}return m(t)?e.stylize(""+t,"number"):v(t)?e.stylize(""+t,"boolean"):g(t)?e.stylize("null","null"):void 0}function c(e){return"["+Error.prototype.toString.call(e)+"]"}function f(e,t,n,r,i){for(var o=[],a=0,s=t.length;a<s;++a)R(t,String(a))?o.push(h(e,t,n,r,String(a),!0)):o.push("");return i.forEach(function(i){i.match(/^\d+$/)||o.push(h(e,t,n,r,i,!0))}),o}function h(e,t,n,r,i,o){var a,s,l;if(l=Object.getOwnPropertyDescriptor(t,i)||{value:t[i]},l.get?s=l.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):l.set&&(s=e.stylize("[Setter]","special")),R(r,i)||(a="["+i+"]"),s||(e.seen.indexOf(l.value)<0?(s=g(n)?u(e,l.value,null):u(e,l.value,n-1),s.indexOf("\n")>-1&&(s=o?s.split("\n").map(function(e){return"  "+e}).join("\n").substr(2):"\n"+s.split("\n").map(function(e){return"   "+e}).join("\n"))):s=e.stylize("[Circular]","special")),E(a)){if(o&&i.match(/^\d+$/))return s;a=JSON.stringify(""+i),a.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),a=e.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),a=e.stylize(a,"string"))}return a+": "+s}function p(e,t,n){var r=0;return e.reduce(function(e,t){return r++,t.indexOf("\n")>=0&&r++,e+t.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60?n[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+n[1]:n[0]+t+" "+e.join(", ")+" "+n[1]}function d(e){return Array.isArray(e)}function v(e){return"boolean"==typeof e}function g(e){return null===e}function y(e){return null==e}function m(e){return"number"==typeof e}function _(e){return"string"==typeof e}function b(e){return"symbol"==typeof e}function E(e){return void 0===e}function x(e){return w(e)&&"[object RegExp]"===O(e)}function w(e){return"object"==typeof e&&null!==e}function T(e){return w(e)&&"[object Date]"===O(e)}function S(e){return w(e)&&("[object Error]"===O(e)||e instanceof Error)}function A(e){return"function"==typeof e}function C(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e}function O(e){return Object.prototype.toString.call(e)}function k(e){return e<10?"0"+e.toString(10):e.toString(10)}function P(){var e=new Date,t=[k(e.getHours()),k(e.getMinutes()),k(e.getSeconds())].join(":");return[e.getDate(),L[e.getMonth()],t].join(" ")}function R(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var I=/%[sdj%]/g;r.format=function(e){if(!_(e)){for(var t=[],n=0;n<arguments.length;n++)t.push(i(arguments[n]));return t.join(" ")}for(var n=1,r=arguments,o=r.length,a=String(e).replace(I,function(e){if("%%"===e)return"%";if(n>=o)return e;switch(e){case"%s":return String(r[n++]);case"%d":return Number(r[n++]);case"%j":try{return JSON.stringify(r[n++])}catch(e){return"[Circular]"}default:return e}}),s=r[n];n<o;s=r[++n])g(s)||!w(s)?a+=" "+s:a+=" "+i(s);return a},r.deprecate=function(e,i){function o(){if(!a){if(t.throwDeprecation)throw new Error(i);t.traceDeprecation?console.trace(i):console.error(i),a=!0}return e.apply(this,arguments)}if(E(n.process))return function(){return r.deprecate(e,i).apply(this,arguments)};if(!0===t.noDeprecation)return e;var a=!1;return o};var N,M={};r.debuglog=function(e){if(E(N)&&(N=t.env.NODE_DEBUG||""),e=e.toUpperCase(),!M[e])if(new RegExp("\\b"+e+"\\b","i").test(N)){var n=t.pid;M[e]=function(){var t=r.format.apply(r,arguments);console.error("%s %d: %s",e,n,t)}}else M[e]=function(){};return M[e]},r.inspect=i,i.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},i.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},r.isArray=d,r.isBoolean=v,r.isNull=g,r.isNullOrUndefined=y,r.isNumber=m,r.isString=_,r.isSymbol=b,r.isUndefined=E,r.isRegExp=x,r.isObject=w,r.isDate=T,r.isError=S,r.isFunction=A,r.isPrimitive=C,r.isBuffer=e("./support/isBuffer");var L=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];r.log=function(){console.log("%s - %s",P(),r.format.apply(r,arguments))},r.inherits=e("inherits"),r._extend=function(e,t){if(!t||!w(t))return e;for(var n=Object.keys(t),r=n.length;r--;)e[n[r]]=t[n[r]];return e}}).call(this,e("_process"),"undefined"!==typeof t?t:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{"./support/isBuffer":44,_process:39,inherits:43}],46:[function(e,t,n){function r(e){var t=new p;return o(e,t),t.finish()}function i(e){var t={};for(var n in e)t[n]=new d(e[n].features),t[n].name=n;return r({layers:t})}function o(e,t){for(var n in e.layers)t.writeMessage(3,a,e.layers[n])}function a(e,t){t.writeVarintField(15,e.version||1),t.writeStringField(1,e.name||""),t.writeVarintField(5,e.extent||4096);var n,r={keys:[],values:[],keycache:{},valuecache:{}};for(n=0;n<e.length;n++)r.feature=e.feature(n),t.writeMessage(2,s,r);var i=r.keys;for(n=0;n<i.length;n++)t.writeStringField(3,i[n]);var o=r.values;for(n=0;n<o.length;n++)t.writeMessage(4,h,o[n])}function s(e,t){var n=e.feature;void 0!==n.id&&t.writeVarintField(1,n.id),t.writeMessage(2,u,e),t.writeVarintField(3,n.type),t.writeMessage(4,f,n)}function u(e,t){var n=e.feature,r=e.keys,i=e.values,o=e.keycache,a=e.valuecache;for(var s in n.properties){var u=o[s];void 0===u&&(r.push(s),u=r.length-1,o[s]=u),t.writeVarint(u);var l=n.properties[s],c=typeof l;"string"!==c&&"boolean"!==c&&"number"!==c&&(l=JSON.stringify(l));var f=c+":"+l,h=a[f];void 0===h&&(i.push(l),h=i.length-1,a[f]=h),t.writeVarint(h)}}function l(e,t){return(t<<3)+(7&e)}function c(e){return e<<1^e>>31}function f(e,t){for(var n=e.loadGeometry(),r=e.type,i=0,o=0,a=n.length,s=0;s<a;s++){var u=n[s],f=1;1===r&&(f=u.length),t.writeVarint(l(1,f));for(var h=0;h<u.length;h++){1===h&&1!==r&&t.writeVarint(l(2,u.length-1));var p=u[h].x-i,d=u[h].y-o;t.writeVarint(c(p)),t.writeVarint(c(d)),i+=p,o+=d}}}function h(e,t){var n=typeof e;"string"===n?t.writeStringField(1,e):"boolean"===n?t.writeBooleanField(7,e):"number"===n&&(e%1!=0?t.writeDoubleField(3,e):e<0?t.writeSVarintField(6,e):t.writeVarintField(5,e))}var p=e("pbf"),d=e("./lib/geojson_wrapper");t.exports=r,t.exports.fromVectorTileJs=r,t.exports.fromGeojsonVt=i,t.exports.GeoJSONWrapper=d},{"./lib/geojson_wrapper":47,pbf:38}],47:[function(e,t,n){"use strict";function r(e){this.features=e,this.length=e.length}function i(e){this.id="number"==typeof e.id?e.id:void 0,this.type=e.type,this.rawGeometry=1===e.type?[e.geometry]:e.geometry,this.properties=e.tags,this.extent=4096}var o=e("@mapbox/point-geometry"),a=e("@mapbox/vector-tile").VectorTileFeature;t.exports=r,r.prototype.feature=function(e){return new i(this.features[e])},i.prototype.loadGeometry=function(){var e=this.rawGeometry;this.geometry=[];for(var t=0;t<e.length;t++){for(var n=e[t],r=[],i=0;i<n.length;i++)r.push(new o(n[i][0],n[i][1]));this.geometry.push(r)}return this.geometry},i.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var e=this.geometry,t=1/0,n=-1/0,r=1/0,i=-1/0,o=0;o<e.length;o++)for(var a=e[o],s=0;s<a.length;s++){var u=a[s];t=Math.min(t,u.x),n=Math.max(n,u.x),r=Math.min(r,u.y),i=Math.max(i,u.y)}return[t,r,n,i]},i.prototype.toGeoJSON=a.prototype.toGeoJSON},{"@mapbox/point-geometry":2,"@mapbox/vector-tile":6}],48:[function(e,t,n){var r=arguments[3],i=arguments[4],o=arguments[5],a=JSON.stringify;t.exports=function(e,t){function n(e){g[e]=!0;for(var t in i[e][1]){var r=i[e][1][t];g[r]||n(r)}}for(var s,u=Object.keys(o),l=0,c=u.length;l<c;l++){var f=u[l],h=o[f].exports;if(h===e||h&&h.default===e){s=f;break}}if(!s){s=Math.floor(Math.pow(16,8)*Math.random()).toString(16);for(var p={},l=0,c=u.length;l<c;l++){var f=u[l];p[f]=f}i[s]=[Function(["require","module","exports"],"("+e+")(self)"),p]}var d=Math.floor(Math.pow(16,8)*Math.random()).toString(16),v={};v[s]=s,i[d]=[Function(["require"],"var f = require("+a(s)+");(f.default ? f.default : f)(self);"),v];var g={};n(d);var y="("+r+")({"+Object.keys(g).map(function(e){return a(e)+":["+i[e][0]+","+a(i[e][1])+"]"}).join(",")+"},{},["+a(d)+"])",m=window.URL||window.webkitURL||window.mozURL||window.msURL,_=new Blob([y],{type:"text/javascript"});if(t&&t.bare)return _;var b=m.createObjectURL(_),E=new Worker(b);return E.objectURL=b,E}},{}],49:[function(e,t,n){t.exports.RADIUS=6378137,t.exports.FLATTENING=1/298.257223563,t.exports.POLAR_RADIUS=6356752.3142},{}],50:[function(e,t,n){t.exports={version:"0.42.2"}},{}],51:[function(e,t,n){"use strict";var r=e("../util/util");t.exports={deserialize:function(e,t){var n={};if(!t)return n;for(var i=0,o=e;i<o.length;i+=1){var a=o[i],s=a.layerIds.map(function(e){return t.getLayer(e)}).filter(Boolean);if(0!==s.length)for(var u=s[0].createBucket(r.extend({layers:s},a)),l=0,c=s;l<c.length;l+=1){var f=c[l];n[f.id]=u}}return n}}},{"../util/util":266}],52:[function(e,t,n){"use strict";function r(e,t,n,r,i){e.emplaceBack(2*t+(r+1)/2,2*n+(i+1)/2)}var i=e("../segment"),o=i.SegmentVector,a=e("../../gl/vertex_buffer"),s=e("../../gl/index_buffer"),u=e("../program_configuration"),l=u.ProgramConfigurationSet,c=e("../vertex_array_type"),f=e("../index_array_type"),h=f.TriangleIndexArray,p=e("../load_geometry"),d=e("../extent"),v={layoutAttributes:[{name:"a_pos",components:2,type:"Int16"}],indexArrayType:h,paintAttributes:[{property:"circle-color"},{property:"circle-radius"},{property:"circle-blur"},{property:"circle-opacity"},{property:"circle-stroke-color"},{property:"circle-stroke-width"},{property:"circle-stroke-opacity"}]},g=c(v.layoutAttributes),y=function(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.index=e.index,this.layoutVertexArray=new g(e.layoutVertexArray),this.indexArray=new h(e.indexArray),this.segments=new o(e.segments),this.programConfigurations=new l(this.constructor.programInterface,e.layers,e.zoom,e.programConfigurations)};y.prototype.populate=function(e,t){for(var n=this,r=0,i=e;r<i.length;r+=1){var o=i[r],a=o.feature,s=o.index,u=o.sourceLayerIndex;if(n.layers[0]._featureFilter({zoom:n.zoom},a)){var l=p(a);n.addFeature(a,l),t.featureIndex.insert(a,l,s,u,n.index)}}},y.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},y.prototype.serialize=function(e){return{zoom:this.zoom,layerIds:this.layers.map(function(e){return e.id}),layoutVertexArray:this.layoutVertexArray.serialize(e),indexArray:this.indexArray.serialize(e),programConfigurations:this.programConfigurations.serialize(e),segments:this.segments.get()}},y.prototype.upload=function(e){this.layoutVertexBuffer=new a(e,this.layoutVertexArray),this.indexBuffer=new s(e,this.indexArray),this.programConfigurations.upload(e)},y.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},y.prototype.addFeature=function(e,t){for(var n=this,i=0,o=t;i<o.length;i+=1)for(var a=o[i],s=0,u=a;s<u.length;s+=1){var l=u[s],c=l.x,f=l.y;if(!(c<0||c>=d||f<0||f>=d)){var h=n.segments.prepareSegment(4,n.layoutVertexArray,n.indexArray),p=h.vertexLength;r(n.layoutVertexArray,c,f,-1,-1),r(n.layoutVertexArray,c,f,1,-1),r(n.layoutVertexArray,c,f,1,1),r(n.layoutVertexArray,c,f,-1,1),n.indexArray.emplaceBack(p,p+1,p+2),n.indexArray.emplaceBack(p,p+3,p+2),h.vertexLength+=4,h.primitiveLength+=2}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e)},y.programInterface=v,t.exports=y},{"../../gl/index_buffer":71,"../../gl/vertex_buffer":72,"../extent":58,"../index_array_type":60,"../load_geometry":61,"../program_configuration":63,"../segment":65,"../vertex_array_type":66}],53:[function(e,t,n){"use strict";var r=e("../segment"),i=r.SegmentVector,o=e("../../gl/vertex_buffer"),a=e("../../gl/index_buffer"),s=e("../program_configuration"),u=s.ProgramConfigurationSet,l=e("../vertex_array_type"),c=e("../index_array_type"),f=c.LineIndexArray,h=c.TriangleIndexArray,p=e("../load_geometry"),d=e("earcut"),v=e("../../util/classify_rings"),g={layoutAttributes:[{name:"a_pos",components:2,type:"Int16"}],indexArrayType:h,indexArrayType2:f,paintAttributes:[{property:"fill-color"},{property:"fill-outline-color"},{property:"fill-opacity"}]},y=l(g.layoutAttributes),m=function(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.index=e.index,this.layoutVertexArray=new y(e.layoutVertexArray),this.indexArray=new h(e.indexArray),this.indexArray2=new f(e.indexArray2),this.programConfigurations=new u(g,e.layers,e.zoom,e.programConfigurations),this.segments=new i(e.segments),this.segments2=new i(e.segments2)};m.prototype.populate=function(e,t){for(var n=this,r=0,i=e;r<i.length;r+=1){var o=i[r],a=o.feature,s=o.index,u=o.sourceLayerIndex;if(n.layers[0]._featureFilter({zoom:n.zoom},a)){var l=p(a);n.addFeature(a,l),t.featureIndex.insert(a,l,s,u,n.index)}}},m.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},m.prototype.serialize=function(e){return{zoom:this.zoom,layerIds:this.layers.map(function(e){return e.id}),layoutVertexArray:this.layoutVertexArray.serialize(e),indexArray:this.indexArray.serialize(e),indexArray2:this.indexArray2.serialize(e),programConfigurations:this.programConfigurations.serialize(e),segments:this.segments.get(),segments2:this.segments2.get()}},m.prototype.upload=function(e){this.layoutVertexBuffer=new o(e,this.layoutVertexArray),this.indexBuffer=new a(e,this.indexArray),this.indexBuffer2=new a(e,this.indexArray2),this.programConfigurations.upload(e)},m.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())},m.prototype.addFeature=function(e,t){for(var n=this,r=0,i=v(t,500);r<i.length;r+=1){for(var o=i[r],a=0,s=0,u=o;s<u.length;s+=1)a+=u[s].length;for(var l=n.segments.prepareSegment(a,n.layoutVertexArray,n.indexArray),c=l.vertexLength,f=[],h=[],p=0,g=o;p<g.length;p+=1){var y=g[p];if(0!==y.length){y!==o[0]&&h.push(f.length/2);var m=n.segments2.prepareSegment(y.length,n.layoutVertexArray,n.indexArray2),_=m.vertexLength;n.layoutVertexArray.emplaceBack(y[0].x,y[0].y),n.indexArray2.emplaceBack(_+y.length-1,_),f.push(y[0].x),f.push(y[0].y);for(var b=1;b<y.length;b++)n.layoutVertexArray.emplaceBack(y[b].x,y[b].y),n.indexArray2.emplaceBack(_+b-1,_+b),f.push(y[b].x),f.push(y[b].y);m.vertexLength+=y.length,m.primitiveLength+=y.length}}for(var E=d(f,h),x=0;x<E.length;x+=3)n.indexArray.emplaceBack(c+E[x],c+E[x+1],c+E[x+2]);l.vertexLength+=a,l.primitiveLength+=E.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e)},m.programInterface=g,t.exports=m},{"../../gl/index_buffer":71,"../../gl/vertex_buffer":72,"../../util/classify_rings":248,"../index_array_type":60,"../load_geometry":61,"../program_configuration":63,"../segment":65,"../vertex_array_type":66,earcut:12}],54:[function(e,t,n){"use strict";function r(e,t,n,r,i,o,a,s){e.emplaceBack(t,n,2*Math.floor(r*b)+a,i*b*2,o*b*2,Math.round(s))}function i(e,t){return e.x===t.x&&(e.x<0||e.x>g)||e.y===t.y&&(e.y<0||e.y>g)}var o=e("../segment"),a=o.SegmentVector,s=o.MAX_VERTEX_ARRAY_LENGTH,u=e("../../gl/vertex_buffer"),l=e("../../gl/index_buffer"),c=e("../program_configuration"),f=c.ProgramConfigurationSet,h=e("../vertex_array_type"),p=e("../index_array_type"),d=p.TriangleIndexArray,v=e("../load_geometry"),g=e("../extent"),y=e("earcut"),m=e("../../util/classify_rings"),_={layoutAttributes:[{name:"a_pos",components:2,type:"Int16"},{name:"a_normal",components:3,type:"Int16"},{name:"a_edgedistance",components:1,type:"Int16"}],indexArrayType:d,paintAttributes:[{property:"fill-extrusion-base"},{property:"fill-extrusion-height"},{property:"fill-extrusion-color"}]},b=Math.pow(2,13),E=h(_.layoutAttributes),x=function(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.index=e.index,this.layoutVertexArray=new E(e.layoutVertexArray),this.indexArray=new d(e.indexArray),this.programConfigurations=new f(_,e.layers,e.zoom,e.programConfigurations),this.segments=new a(e.segments)};x.prototype.populate=function(e,t){for(var n=this,r=0,i=e;r<i.length;r+=1){var o=i[r],a=o.feature,s=o.index,u=o.sourceLayerIndex;if(n.layers[0]._featureFilter({zoom:n.zoom},a)){var l=v(a);n.addFeature(a,l),t.featureIndex.insert(a,l,s,u,n.index)}}},x.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},x.prototype.serialize=function(e){return{zoom:this.zoom,layerIds:this.layers.map(function(e){return e.id}),layoutVertexArray:this.layoutVertexArray.serialize(e),indexArray:this.indexArray.serialize(e),programConfigurations:this.programConfigurations.serialize(e),segments:this.segments.get()}},x.prototype.upload=function(e){this.layoutVertexBuffer=new u(e,this.layoutVertexArray),this.indexBuffer=new l(e,this.indexArray),this.programConfigurations.upload(e)},x.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},x.prototype.addFeature=function(e,t){for(var n=this,o=0,a=m(t,500);o<a.length;o+=1){for(var u=a[o],l=0,c=0,f=u;c<f.length;c+=1)l+=f[c].length;for(var h=n.segments.prepareSegment(4,n.layoutVertexArray,n.indexArray),p=0,d=u;p<d.length;p+=1){var v=d[p];if(0!==v.length)for(var g=0,_=0;_<v.length;_++){var b=v[_];if(_>=1){var E=v[_-1];if(!i(b,E)){h.vertexLength+4>s&&(h=n.segments.prepareSegment(4,n.layoutVertexArray,n.indexArray));var x=b.sub(E)._perp()._unit();r(n.layoutVertexArray,b.x,b.y,x.x,x.y,0,0,g),r(n.layoutVertexArray,b.x,b.y,x.x,x.y,0,1,g),g+=E.dist(b),r(n.layoutVertexArray,E.x,E.y,x.x,x.y,0,0,g),r(n.layoutVertexArray,E.x,E.y,x.x,x.y,0,1,g);var w=h.vertexLength;n.indexArray.emplaceBack(w,w+1,w+2),n.indexArray.emplaceBack(w+1,w+2,w+3),h.vertexLength+=4,h.primitiveLength+=2}}}}h.vertexLength+l>s&&(h=n.segments.prepareSegment(l,n.layoutVertexArray,n.indexArray));for(var T=[],S=[],A=h.vertexLength,C=0,O=u;C<O.length;C+=1){var k=O[C];if(0!==k.length){k!==u[0]&&S.push(T.length/2);for(var P=0;P<k.length;P++){var R=k[P];r(n.layoutVertexArray,R.x,R.y,0,0,1,1,0),T.push(R.x),T.push(R.y)}}}for(var I=y(T,S),N=0;N<I.length;N+=3)n.indexArray.emplaceBack(A+I[N],A+I[N+1],A+I[N+2]);h.primitiveLength+=I.length/3,h.vertexLength+=l}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e)},x.programInterface=_,t.exports=x},{"../../gl/index_buffer":71,"../../gl/vertex_buffer":72,"../../util/classify_rings":248,"../extent":58,"../index_array_type":60,"../load_geometry":61,"../program_configuration":63,"../segment":65,"../vertex_array_type":66,earcut:12}],55:[function(e,t,n){"use strict";var r=e("./circle_bucket"),i={layoutAttributes:r.programInterface.layoutAttributes,indexArrayType:r.programInterface.indexArrayType,paintAttributes:[{property:"heatmap-weight"}]},o=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t}(r);o.programInterface=i,t.exports=o},{"./circle_bucket":52}],56:[function(e,t,n){"use strict";function r(e,t,n,r,i,o,a){e.emplaceBack(t.x,t.y,r?1:0,i?1:-1,Math.round(g*n.x)+128,Math.round(g*n.y)+128,1+(0===o?0:o<0?-1:1)|(a*m&63)<<2,a*m>>6)}var i=e("../segment"),o=i.SegmentVector,a=e("../../gl/vertex_buffer"),s=e("../../gl/index_buffer"),u=e("../program_configuration"),l=u.ProgramConfigurationSet,c=e("../vertex_array_type"),f=e("../index_array_type"),h=f.TriangleIndexArray,p=e("../load_geometry"),d=e("../extent"),v=e("@mapbox/vector-tile").VectorTileFeature.types,g=63,y=Math.cos(Math.PI/180*37.5),m=.5,_=Math.pow(2,14)/m,b={layoutAttributes:[{name:"a_pos_normal",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],paintAttributes:[{property:"line-color"},{property:"line-blur"},{property:"line-opacity"},{property:"line-gap-width",name:"gapwidth"},{property:"line-offset"},{property:"line-width"},{property:"line-floorwidth"}],indexArrayType:h},E=c(b.layoutAttributes),x=function(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.index=e.index,this.layoutVertexArray=new E(e.layoutVertexArray),this.indexArray=new h(e.indexArray),this.programConfigurations=new l(b,e.layers,e.zoom,e.programConfigurations),this.segments=new o(e.segments)};x.prototype.populate=function(e,t){for(var n=this,r=0,i=e;r<i.length;r+=1){var o=i[r],a=o.feature,s=o.index,u=o.sourceLayerIndex;if(n.layers[0]._featureFilter({zoom:n.zoom},a)){var l=p(a);n.addFeature(a,l),t.featureIndex.insert(a,l,s,u,n.index)}}},x.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},x.prototype.serialize=function(e){return{zoom:this.zoom,layerIds:this.layers.map(function(e){return e.id}),layoutVertexArray:this.layoutVertexArray.serialize(e),indexArray:this.indexArray.serialize(e),programConfigurations:this.programConfigurations.serialize(e),segments:this.segments.get()}},x.prototype.upload=function(e){this.layoutVertexBuffer=new a(e,this.layoutVertexArray),this.indexBuffer=new s(e,this.indexArray),this.programConfigurations.upload(e)},x.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},x.prototype.addFeature=function(e,t){for(var n=this,r=this.layers[0].layout,i=r.get("line-join").evaluate(e),o=r.get("line-cap"),a=r.get("line-miter-limit"),s=r.get("line-round-limit"),u=0,l=t;u<l.length;u+=1){var c=l[u];n.addLine(c,e,i,o,a,s)}},x.prototype.addLine=function(e,t,n,r,i,o){for(var a=this,s="Polygon"===v[t.type],u=e.length;u>=2&&e[u-1].equals(e[u-2]);)u--;for(var l=0;l<u-1&&e[l].equals(e[l+1]);)l++;if(!(u<(s?3:2))){"bevel"===n&&(i=1.05);var c=d/(512*this.overscaling)*15,f=e[l],h=this.segments.prepareSegment(10*u,this.layoutVertexArray,this.indexArray);this.distance=0;var p,g,m,_=r,b=s?"butt":r,E=!0,x=void 0,w=void 0,T=void 0,S=void 0;this.e1=this.e2=this.e3=-1,s&&(p=e[u-2],S=f.sub(p)._unit()._perp());for(var A=l;A<u;A++)if(!(w=s&&A===u-1?e[l+1]:e[A+1])||!e[A].equals(w)){S&&(T=S),p&&(x=p),p=e[A],S=w?w.sub(p)._unit()._perp():T,T=T||S;var C=T.add(S);0===C.x&&0===C.y||C._unit();var O=C.x*S.x+C.y*S.y,k=0!==O?1/O:1/0,P=O<y&&x&&w;if(P&&A>l){var R=p.dist(x);if(R>2*c){var I=p.sub(p.sub(x)._mult(c/R)._round());a.distance+=I.dist(x),a.addCurrentVertex(I,a.distance,T.mult(1),0,0,!1,h),x=I}}var N=x&&w,M=N?n:w?_:b;if(N&&"round"===M&&(k<o?M="miter":k<=2&&(M="fakeround")),"miter"===M&&k>i&&(M="bevel"),"bevel"===M&&(k>2&&(M="flipbevel"),k<i&&(M="miter")),x&&(a.distance+=p.dist(x)),"miter"===M)C._mult(k),a.addCurrentVertex(p,a.distance,C,0,0,!1,h);else if("flipbevel"===M){if(k>100)C=S.clone().mult(-1);else{var L=T.x*S.y-T.y*S.x>0?-1:1,D=k*T.add(S).mag()/T.sub(S).mag();C._perp()._mult(D*L)}a.addCurrentVertex(p,a.distance,C,0,0,!1,h),a.addCurrentVertex(p,a.distance,C.mult(-1),0,0,!1,h)}else if("bevel"===M||"fakeround"===M){var F=T.x*S.y-T.y*S.x>0,j=-Math.sqrt(k*k-1);if(F?(m=0,g=j):(g=0,m=j),E||a.addCurrentVertex(p,a.distance,T,g,m,!1,h),"fakeround"===M){for(var B=Math.floor(8*(.5-(O-.5))),U=void 0,z=0;z<B;z++)U=S.mult((z+1)/(B+1))._add(T)._unit(),a.addPieSliceVertex(p,a.distance,U,F,h);a.addPieSliceVertex(p,a.distance,C,F,h);for(var V=B-1;V>=0;V--)U=T.mult((V+1)/(B+1))._add(S)._unit(),a.addPieSliceVertex(p,a.distance,U,F,h)}w&&a.addCurrentVertex(p,a.distance,S,-g,-m,!1,h)}else"butt"===M?(E||a.addCurrentVertex(p,a.distance,T,0,0,!1,h),w&&a.addCurrentVertex(p,a.distance,S,0,0,!1,h)):"square"===M?(E||(a.addCurrentVertex(p,a.distance,T,1,1,!1,h),a.e1=a.e2=-1),w&&a.addCurrentVertex(p,a.distance,S,-1,-1,!1,h)):"round"===M&&(E||(a.addCurrentVertex(p,a.distance,T,0,0,!1,h),a.addCurrentVertex(p,a.distance,T,1,1,!0,h),a.e1=a.e2=-1),w&&(a.addCurrentVertex(p,a.distance,S,-1,-1,!0,h),a.addCurrentVertex(p,a.distance,S,0,0,!1,h)));if(P&&A<u-1){var G=p.dist(w);if(G>2*c){var H=p.add(w.sub(p)._mult(c/G)._round());a.distance+=H.dist(p),a.addCurrentVertex(H,a.distance,S.mult(1),0,0,!1,h),p=H}}E=!1}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t)}},x.prototype.addCurrentVertex=function(e,t,n,i,o,a,s){var u,l=this.layoutVertexArray,c=this.indexArray;u=n.clone(),i&&u._sub(n.perp()._mult(i)),r(l,e,u,a,!1,i,t),this.e3=s.vertexLength++,this.e1>=0&&this.e2>=0&&(c.emplaceBack(this.e1,this.e2,this.e3),s.primitiveLength++),this.e1=this.e2,this.e2=this.e3,u=n.mult(-1),o&&u._sub(n.perp()._mult(o)),r(l,e,u,a,!0,-o,t),this.e3=s.vertexLength++,this.e1>=0&&this.e2>=0&&(c.emplaceBack(this.e1,this.e2,this.e3),s.primitiveLength++),this.e1=this.e2,this.e2=this.e3,t>_/2&&(this.distance=0,this.addCurrentVertex(e,this.distance,n,i,o,a,s))},x.prototype.addPieSliceVertex=function(e,t,n,i,o){n=n.mult(i?-1:1);var a=this.layoutVertexArray,s=this.indexArray;r(a,e,n,!1,i,0,t),this.e3=o.vertexLength++,this.e1>=0&&this.e2>=0&&(s.emplaceBack(this.e1,this.e2,this.e3),o.primitiveLength++),i?this.e2=this.e3:this.e1=this.e3},x.programInterface=b,t.exports=x},{"../../gl/index_buffer":71,"../../gl/vertex_buffer":72,"../extent":58,"../index_array_type":60,"../load_geometry":61,"../program_configuration":63,"../segment":65,"../vertex_array_type":66,"@mapbox/vector-tile":6}],57:[function(e,t,n){"use strict";function r(e,t,n,r,i,o,a,s){e.emplaceBack(t,n,Math.round(64*r),Math.round(64*i),o,a,s?s[0]:void 0,s?s[1]:void 0)}function i(e,t,n){e.emplaceBack(t.x,t.y,n),e.emplaceBack(t.x,t.y,n),e.emplaceBack(t.x,t.y,n),e.emplaceBack(t.x,t.y,n)}var o=e("@mapbox/point-geometry"),a=e("../segment"),s=a.SegmentVector,u=e("../../gl/vertex_buffer"),l=e("../../gl/index_buffer"),c=e("../program_configuration"),f=c.ProgramConfigurationSet,h=e("../vertex_array_type"),p=e("../index_array_type"),d=p.TriangleIndexArray,v=p.LineIndexArray,g=e("../../symbol/transform_text"),y=e("../../symbol/mergelines"),m=e("../../util/script_detection"),_=e("../load_geometry"),b=e("@mapbox/vector-tile").VectorTileFeature.types,E=e("../../util/struct_array"),x=e("../../util/verticalize_punctuation"),w=(e("../../symbol/anchor"),e("../../symbol/opacity_state"),e("../../symbol/symbol_size")),T=w.getSizeData,S=E({members:[{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"hidden"}]}),A=E({members:[{type:"Float32",name:"offsetX"}]}),C=E({members:[{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]}),O=[{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"}],k=[{name:"a_projected_pos",components:3,type:"Float32"}],P=[{name:"a_fade_opacity",components:1,type:"Uint32"}],R=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}],I=[{name:"a_placed",components:2,type:"Uint8"}],N={text:{layoutAttributes:O,dynamicLayoutAttributes:k,indexArrayType:d,opacityAttributes:P,paintAttributes:[{property:"text-color",name:"fill_color"},{property:"text-halo-color",name:"halo_color"},{property:"text-halo-width",name:"halo_width"},{property:"text-halo-blur",name:"halo_blur"},{property:"text-opacity",name:"opacity"}]},icon:{layoutAttributes:O,dynamicLayoutAttributes:k,indexArrayType:d,opacityAttributes:P,paintAttributes:[{property:"icon-color",name:"fill_color"},{property:"icon-halo-color",name:"halo_color"},{property:"icon-halo-width",name:"halo_width"},{property:"icon-halo-blur",name:"halo_blur"},{property:"icon-opacity",name:"opacity"}]},collisionBox:{layoutAttributes:[{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],indexArrayType:v,collisionAttributes:I},collisionCircle:{layoutAttributes:[{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],collisionAttributes:I,indexArrayType:d}},M=function(e,t,n,r){this.programInterface=e;var i=h(e.layoutAttributes),o=e.indexArrayType;if(this.layoutVertexArray=new i(r&&r.layoutVertexArray),this.indexArray=new o(r&&r.indexArray),this.programConfigurations=new f(e,t,n,r&&r.programConfigurations),this.segments=new s(r&&r.segments),e.dynamicLayoutAttributes){var a=h(e.dynamicLayoutAttributes);this.dynamicLayoutVertexArray=new a(r&&r.dynamicLayoutVertexArray)}if(e.opacityAttributes){var u=h(e.opacityAttributes);this.opacityVertexArray=new u(r&&r.opacityVertexArray)}if(e.collisionAttributes){var l=h(e.collisionAttributes);this.collisionVertexArray=new l(r&&r.collisionVertexArray)}};M.prototype.serialize=function(e){return{layoutVertexArray:this.layoutVertexArray.serialize(e),indexArray:this.indexArray.serialize(e),programConfigurations:this.programConfigurations.serialize(e),segments:this.segments.get(),dynamicLayoutVertexArray:this.dynamicLayoutVertexArray&&this.dynamicLayoutVertexArray.serialize(e),opacityVertexArray:this.opacityVertexArray&&this.opacityVertexArray.serialize(e),collisionVertexArray:this.collisionVertexArray&&this.collisionVertexArray.serialize(e)}},M.prototype.upload=function(e,t){this.layoutVertexBuffer=new u(e,this.layoutVertexArray),this.indexBuffer=new l(e,this.indexArray,t),this.programConfigurations.upload(e),this.programInterface.dynamicLayoutAttributes&&(this.dynamicLayoutVertexBuffer=new u(e,this.dynamicLayoutVertexArray,!0)),this.programInterface.opacityAttributes&&(this.opacityVertexBuffer=new u(e,this.opacityVertexArray,!0),this.opacityVertexBuffer.itemSize=1,this.opacityVertexBuffer.attributes=R),this.programInterface.collisionAttributes&&(this.collisionVertexBuffer=new u(e,this.collisionVertexArray,!0))},M.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer&&this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer&&this.opacityVertexBuffer.destroy(),this.collisionVertexBuffer&&this.collisionVertexBuffer.destroy())};var L=function(e){if(this.collisionBoxArray=e.collisionBoxArray,this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.index=e.index,this.sdfIcons=e.sdfIcons,this.iconsNeedLinear=e.iconsNeedLinear,this.pixelRatio=e.pixelRatio,e.text){this.text=new M(N.text,e.layers,e.zoom,e.text),this.icon=new M(N.icon,e.layers,e.zoom,e.icon),this.collisionBox=new M(N.collisionBox,e.layers,e.zoom,e.collisionBox),this.collisionCircle=new M(N.collisionCircle,e.layers,e.zoom,e.collisionCircle),this.textSizeData=e.textSizeData,this.iconSizeData=e.iconSizeData,this.placedGlyphArray=new S(e.placedGlyphArray),this.placedIconArray=new S(e.placedIconArray),this.glyphOffsetArray=new A(e.glyphOffsetArray),this.lineVertexArray=new C(e.lineVertexArray),this.symbolInstances=e.symbolInstances;var t=e.layers[0].layout;this.sortFeaturesByY=t.get("text-allow-overlap")||t.get("icon-allow-overlap")||t.get("text-ignore-placement")||t.get("icon-ignore-placement")}else{var n=this.layers[0],r=n._unevaluatedLayout._values;if(this.textSizeData=T(this.zoom,r["text-size"]),"composite"===this.textSizeData.functionType){var i=this.textSizeData.zoomRange,o=i.min,a=i.max;this.compositeTextSizes=[r["text-size"].possiblyEvaluate({zoom:o}),r["text-size"].possiblyEvaluate({zoom:a})]}if(this.iconSizeData=T(this.zoom,r["icon-size"]),"composite"===this.iconSizeData.functionType){var s=this.iconSizeData.zoomRange,u=s.min,l=s.max;this.compositeIconSizes=[r["icon-size"].possiblyEvaluate({zoom:u}),r["icon-size"].possiblyEvaluate({zoom:l})]}this.layoutTextSize=r["text-size"].possiblyEvaluate({zoom:this.zoom+1}),this.layoutIconSize=r["icon-size"].possiblyEvaluate({zoom:this.zoom+1}),this.textMaxSize=r["text-size"].possiblyEvaluate({zoom:18})}};L.prototype.createArrays=function(){this.text=new M(N.text,this.layers,this.zoom),this.icon=new M(N.icon,this.layers,this.zoom),this.collisionBox=new M(N.collisionBox,this.layers,this.zoom),this.collisionCircle=new M(N.collisionCircle,this.layers,this.zoom),this.placedGlyphArray=new S,this.placedIconArray=new S,this.glyphOffsetArray=new A,this.lineVertexArray=new C},L.prototype.populate=function(e,t){var n=this,r=this.layers[0],i=r.layout,o=i.get("text-font").join(","),a=i.get("text-field"),s=i.get("icon-image"),u="constant"!==a.value.kind||a.value.value.length>0&&o.length>0,l="constant"!==s.value.kind||s.value.value&&s.value.value.length>0;if(this.features=[],u||l){for(var c=t.iconDependencies,f=t.glyphDependencies,h=f[o]=f[o]||{},p={zoom:this.zoom},d=0,v=e;d<v.length;d+=1){var E=v[d],w=E.feature,T=E.index,S=E.sourceLayerIndex;if(r._featureFilter(p,w)){var A=void 0;u&&(A=r.getValueAndResolveTokens("text-field",w),A=g(A,r,w));var C=void 0;if(l&&(C=r.getValueAndResolveTokens("icon-image",w)),A||C){var O={text:A,icon:C,index:T,sourceLayerIndex:S,geometry:_(w),properties:w.properties,type:b[w.type]};if(void 0!==w.id&&(O.id=w.id),n.features.push(O),C&&(c[C]=!0),A)for(var k="map"===i.get("text-rotation-alignment")&&"line"===i.get("symbol-placement"),P=m.allowsVerticalWritingMode(A),R=0;R<A.length;R++)if(h[A.charCodeAt(R)]=!0,k&&P){var I=x.lookup[A.charAt(R)];I&&(h[I.charCodeAt(0)]=!0)}}}}"line"===i.get("symbol-placement")&&(this.features=y(this.features))}},L.prototype.isEmpty=function(){return 0===this.symbolInstances.length},L.prototype.serialize=function(e){return{zoom:this.zoom,layerIds:this.layers.map(function(e){return e.id}),sdfIcons:this.sdfIcons,iconsNeedLinear:this.iconsNeedLinear,textSizeData:this.textSizeData,iconSizeData:this.iconSizeData,placedGlyphArray:this.placedGlyphArray.serialize(e),placedIconArray:this.placedIconArray.serialize(e),glyphOffsetArray:this.glyphOffsetArray.serialize(e),lineVertexArray:this.lineVertexArray.serialize(e),text:this.text.serialize(e),icon:this.icon.serialize(e),collisionBox:this.collisionBox.serialize(e),collisionCircle:this.collisionCircle.serialize(e),symbolInstances:this.symbolInstances}},L.prototype.upload=function(e){this.text.upload(e,this.sortFeaturesByY),this.icon.upload(e,this.sortFeaturesByY),this.collisionBox.upload(e),this.collisionCircle.upload(e)},L.prototype.destroy=function(){this.text.destroy(),this.icon.destroy(),this.collisionBox.destroy(),this.collisionCircle.destroy()},L.prototype.addToLineVertexArray=function(e,t){var n=this,r=this.lineVertexArray.length;if(void 0!==e.segment){for(var i=e.dist(t[e.segment+1]),o=e.dist(t[e.segment]),a={},s=e.segment+1;s<t.length;s++)a[s]={x:t[s].x,y:t[s].y,tileUnitDistanceFromAnchor:i},s<t.length-1&&(i+=t[s+1].dist(t[s]));for(var u=e.segment||0;u>=0;u--)a[u]={x:t[u].x,y:t[u].y,tileUnitDistanceFromAnchor:o},u>0&&(o+=t[u-1].dist(t[u]));for(var l=0;l<t.length;l++){var c=a[l];n.lineVertexArray.emplaceBack(c.x,c.y,c.tileUnitDistanceFromAnchor)}}return{lineStartIndex:r,lineLength:this.lineVertexArray.length-r}},L.prototype.addSymbols=function(e,t,n,o,a,s,u,l,c,f,h){for(var p=this,d=e.indexArray,v=e.layoutVertexArray,g=e.dynamicLayoutVertexArray,y=e.segments.prepareSegment(4*t.length,e.layoutVertexArray,e.indexArray),m=this.glyphOffsetArray.length,_=y.vertexLength,b=0,E=t;b<E.length;b+=1){var x=E[b],w=x.tl,T=x.tr,S=x.bl,A=x.br,C=x.tex,O=y.vertexLength,k=x.glyphOffset[1];r(v,l.x,l.y,w.x,k+w.y,C.x,C.y,n),r(v,l.x,l.y,T.x,k+T.y,C.x+C.w,C.y,n),r(v,l.x,l.y,S.x,k+S.y,C.x,C.y+C.h,n),r(v,l.x,l.y,A.x,k+A.y,C.x+C.w,C.y+C.h,n),i(g,l,0),d.emplaceBack(O,O+1,O+2),d.emplaceBack(O+1,O+2,O+3),y.vertexLength+=4,y.primitiveLength+=2,p.glyphOffsetArray.emplaceBack(x.glyphOffset[0])}h.emplaceBack(l.x,l.y,m,this.glyphOffsetArray.length-m,_,c,f,l.segment,n?n[0]:0,n?n[1]:0,o[0],o[1],u,!1),e.programConfigurations.populatePaintArrays(e.layoutVertexArray.length,s)},L.prototype._addCollisionDebugVertex=function(e,t,n,r,i){return t.emplaceBack(0,0),e.emplaceBack(n.x,n.y,r.x,r.y,Math.round(i.x),Math.round(i.y))},L.prototype.addCollisionDebugVertices=function(e,t,n,r,i,a,s,u){var l=i.segments.prepareSegment(4,i.layoutVertexArray,i.indexArray),c=l.vertexLength,f=i.layoutVertexArray,h=i.indexArray,p=i.collisionVertexArray;this._addCollisionDebugVertex(f,p,a,s.anchor,new o(e,t)),this._addCollisionDebugVertex(f,p,a,s.anchor,new o(n,t)),this._addCollisionDebugVertex(f,p,a,s.anchor,new o(n,r)),this._addCollisionDebugVertex(f,p,a,s.anchor,new o(e,r)),l.vertexLength+=4,u?(h.emplaceBack(c,c+1,c+2),h.emplaceBack(c,c+2,c+3),l.primitiveLength+=2):(h.emplaceBack(c,c+1),h.emplaceBack(c+1,c+2),h.emplaceBack(c+2,c+3),h.emplaceBack(c+3,c),l.primitiveLength+=4)},L.prototype.generateCollisionDebugBuffers=function(){for(var e=this,t=0,n=e.symbolInstances;t<n.length;t+=1){var r=n[t];r.textCollisionFeature={boxStartIndex:r.textBoxStartIndex,boxEndIndex:r.textBoxEndIndex},r.iconCollisionFeature={boxStartIndex:r.iconBoxStartIndex,boxEndIndex:r.iconBoxEndIndex};for(var i=0;i<2;i++){var o=r[0===i?"textCollisionFeature":"iconCollisionFeature"];if(o)for(var a=o.boxStartIndex;a<o.boxEndIndex;a++){var s=e.collisionBoxArray.get(a),u=s.x1,l=s.y1,c=s.x2,f=s.y2,h=s.radius>0;e.addCollisionDebugVertices(u,l,c,f,h?e.collisionCircle:e.collisionBox,s.anchorPoint,r,h)}}}},L.prototype.deserializeCollisionBoxes=function(e,t,n,r,i){for(var o={},a=t;a<n;a++){var s=e.get(a);if(0===s.radius){o.textBox={x1:s.x1,y1:s.y1,x2:s.x2,y2:s.y2,anchorPointX:s.anchorPointX,anchorPointY:s.anchorPointY};break}o.textCircles||(o.textCircles=[]),o.textCircles.push(s.anchorPointX,s.anchorPointY,s.radius,s.signedDistanceFromAnchor,1)}for(var u=r;u<i;u++){var l=e.get(u);if(0===l.radius){o.iconBox={x1:l.x1,y1:l.y1,x2:l.x2,y2:l.y2,anchorPointX:l.anchorPointX,anchorPointY:l.anchorPointY};break}}return o},L.prototype.sortFeatures=function(e){var t=this;if(this.sortFeaturesByY&&this.sortedAngle!==e&&(this.sortedAngle=e,!(this.text.segments.get().length>1||this.icon.segments.get().length>1))){for(var n=[],r=0;r<this.symbolInstances.length;r++)n.push(r);var i=Math.sin(e),o=Math.cos(e);n.sort(function(e,n){var r=t.symbolInstances[e],a=t.symbolInstances[n];return(i*r.anchor.x+o*r.anchor.y|0)-(i*a.anchor.x+o*a.anchor.y|0)||a.featureIndex-r.featureIndex}),this.text.indexArray.clear(),this.icon.indexArray.clear();for(var a=0,s=n;a<s.length;a+=1){for(var u=s[a],l=t.symbolInstances[u],c=0,f=l.placedTextSymbolIndices;c<f.length;c+=1)for(var h=f[c],p=t.placedGlyphArray.get(h),d=p.vertexStartIndex+4*p.numGlyphs,v=p.vertexStartIndex;v<d;v+=4)t.text.indexArray.emplaceBack(v,v+1,v+2),t.text.indexArray.emplaceBack(v+1,v+2,v+3);var g=t.placedIconArray.get(u);if(g.numGlyphs){var y=g.vertexStartIndex;t.icon.indexArray.emplaceBack(y,y+1,y+2),t.icon.indexArray.emplaceBack(y+1,y+2,y+3)}}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray.serialize()),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray.serialize())}},L.programInterfaces=N,L.MAX_GLYPHS=65535,L.addDynamicAttributes=i,t.exports=L},{"../../gl/index_buffer":71,"../../gl/vertex_buffer":72,"../../symbol/anchor":205,"../../symbol/mergelines":214,"../../symbol/opacity_state":215,"../../symbol/symbol_size":221,"../../symbol/transform_text":222,"../../util/script_detection":261,"../../util/struct_array":263,"../../util/verticalize_punctuation":268,"../index_array_type":60,"../load_geometry":61,"../program_configuration":63,"../segment":65,"../vertex_array_type":66,"@mapbox/point-geometry":2,"@mapbox/vector-tile":6}],58:[function(e,t,n){"use strict";t.exports=8192},{}],59:[function(e,t,n){"use strict";function r(e,t){return t-e}var i=(e("@mapbox/point-geometry"),e("./load_geometry")),o=e("./extent"),a=e("../style-spec/feature_filter"),s=e("../util/struct_array"),u=e("grid-index"),l=e("../util/dictionary_coder"),c=e("@mapbox/vector-tile"),f=e("pbf"),h=e("../util/vectortile_to_geojson"),p=e("../util/util").arraysIntersect,d=e("../source/tile_coord"),v=s({members:[{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]}),g=function(e,t,n,r){this.coord=e,this.overscaling=t,this.x=e.x,this.y=e.y,this.z=e.z-Math.log(t)/Math.LN2,this.grid=n||new u(o,16,0),this.featureIndexArray=r||new v};g.deserialize=function(e,t){var n=e.coord,r=new g(new d(n.z,n.x,n.y,n.w),e.overscaling,new u(e.grid),new v(e.featureIndexArray));return r.rawTileData=t,r.bucketLayerIDs=e.bucketLayerIDs,r},g.prototype.insert=function(e,t,n,r,i){var o=this,a=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(n,r,i);for(var s=0;s<t.length;s++){for(var u=t[s],l=[1/0,1/0,-1/0,-1/0],c=0;c<u.length;c++){var f=u[c];l[0]=Math.min(l[0],f.x),l[1]=Math.min(l[1],f.y),l[2]=Math.max(l[2],f.x),l[3]=Math.max(l[3],f.y)}o.grid.insert(a,l[0],l[1],l[2],l[3])}},g.prototype.setCollisionIndex=function(e){this.collisionIndex=e},g.prototype.serialize=function(e){var t=this.grid.toArrayBuffer();return e&&e.push(t),{coord:this.coord,overscaling:this.overscaling,grid:t,featureIndexArray:this.featureIndexArray.serialize(e),bucketLayerIDs:this.bucketLayerIDs}},g.prototype.query=function(e,t){this.vtLayers||(this.vtLayers=new c.VectorTile(new f(this.rawTileData)).layers,this.sourceLayerCoder=new l(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"]));for(var n={},i=e.params||{},s=o/e.tileSize/e.scale,u=a(i.filter),h=e.queryGeometry,p=e.additionalRadius*s,d=1/0,v=1/0,g=-1/0,y=-1/0,m=0;m<h.length;m++)for(var _=h[m],b=0;b<_.length;b++){var E=_[b];d=Math.min(d,E.x),v=Math.min(v,E.y),g=Math.max(g,E.x),y=Math.max(y,E.y)}var x=this.grid.query(d-p,v-p,g+p,y+p);x.sort(r),this.filterMatching(n,x,this.featureIndexArray,h,u,i.layers,t,e.bearing,s);var w=this.collisionIndex?this.collisionIndex.queryRenderedSymbols(h,this.coord,e.tileSourceMaxZoom,o/e.tileSize,e.collisionBoxArray,e.sourceID):[];return w.sort(),this.filterMatching(n,w,e.collisionBoxArray,h,u,i.layers,t,e.bearing,s),n},g.prototype.filterMatching=function(e,t,n,r,o,a,s,u,l){for(var c,f=this,d=0;d<t.length;d++){var v=t[d];if(v!==c){c=v;var g=n.get(v),y=f.bucketLayerIDs[g.bucketIndex];if(!a||p(a,y)){var m=f.sourceLayerCoder.decode(g.sourceLayerIndex),_=f.vtLayers[m],b=_.feature(g.featureIndex);if(o({zoom:f.coord.z},b))for(var E=null,x=0;x<y.length;x++){var w=y[x];if(!(a&&a.indexOf(w)<0)){var T=s[w];if(T&&("symbol"===T.type||(E||(E=i(b)),T.queryIntersectsFeature(r,b,E,f.z,u,l)))){var S=new h(b,f.z,f.x,f.y);S.layer=T.serialize();var A=e[w];void 0===A&&(A=e[w]=[]),A.push({featureIndex:v,feature:S})}}}}}}},g.prototype.hasLayer=function(e){for(var t=this,n=0,r=t.bucketLayerIDs;n<r.length;n+=1)for(var i=r[n],o=0,a=i;o<a.length;o+=1){var s=a[o];if(e===s)return!0}return!1},t.exports=g},{"../source/tile_coord":112,"../style-spec/feature_filter":145,"../util/dictionary_coder":250,"../util/struct_array":263,"../util/util":266,"../util/vectortile_to_geojson":267,"./extent":58,"./load_geometry":61,"@mapbox/point-geometry":2,"@mapbox/vector-tile":6,"grid-index":23,pbf:38}],60:[function(e,t,n){"use strict";function r(e){return i({members:[{type:"Uint16",name:"vertices",components:e}]})}var i=e("../util/struct_array");t.exports={LineIndexArray:r(2),TriangleIndexArray:r(3)}},{"../util/struct_array":263}],61:[function(e,t,n){"use strict";var r=e("../util/util"),i=e("./extent"),o=function(e){return{min:-1*Math.pow(2,e-1),max:Math.pow(2,e-1)-1}}(16);t.exports=function(e){for(var t=i/e.extent,n=e.loadGeometry(),a=0;a<n.length;a++)for(var s=n[a],u=0;u<s.length;u++){var l=s[u];l.x=Math.round(l.x*t),l.y=Math.round(l.y*t),(l.x<o.min||l.x>o.max||l.y<o.min||l.y>o.max)&&r.warnOnce("Geometry exceeds allowed extent, reduce your vector tile buffer size")}return n}},{"../util/util":266,"./extent":58}],62:[function(e,t,n){"use strict";var r=e("../util/struct_array"),i=r({members:[{name:"a_pos",type:"Int16",components:2}]});t.exports=i},{"../util/struct_array":263}],63:[function(e,t,n){"use strict";function r(e){return[o(255*e.r,255*e.g),o(255*e.b,255*e.a)]}var i=e("./vertex_array_type"),o=e("../shaders/encode_attribute").packUint8ToFloat,a=e("../gl/vertex_buffer"),s=e("../style-spec/util/color"),u=function(e,t,n,r){this.value=e,this.name=t,this.type=n,this.property=r,this.statistics={max:-1/0}};u.prototype.defines=function(){return["#define HAS_UNIFORM_u_"+this.name]},u.prototype.populatePaintArray=function(){},u.prototype.setUniforms=function(e,t,n,r){var i=r.constantOr(this.value);"color"===this.type?e.uniform4f(t.uniforms["u_"+this.name],i.r,i.g,i.b,i.a):e.uniform1f(t.uniforms["u_"+this.name],i)};var l=function(e,t,n,r){this.expression=e,this.name=t,this.type=n,this.property=r,this.statistics={max:-1/0}};l.prototype.defines=function(){return[]},l.prototype.populatePaintArray=function(e,t,n,i){var o=this,a=this.expression.evaluate({zoom:0},i);if("color"===this.type)for(var s=r(a),u=t;u<n;u++){var l=e.get(u);l["a_"+o.name+"0"]=s[0],l["a_"+o.name+"1"]=s[1]}else{for(var c=t;c<n;c++)e.get(c)["a_"+o.name]=a;this.statistics.max=Math.max(this.statistics.max,a)}},l.prototype.setUniforms=function(e,t){e.uniform1f(t.uniforms["a_"+this.name+"_t"],0)};var c=function(e,t,n,r,i,o){this.expression=e,this.name=t,this.type=n,this.property=r,this.useIntegerZoom=i,this.zoom=o,this.statistics={max:-1/0}};c.prototype.defines=function(){return[]},c.prototype.populatePaintArray=function(e,t,n,i){var o=this,a=this.expression.evaluate({zoom:this.zoom},i),s=this.expression.evaluate({zoom:this.zoom+1},i);if("color"===this.type)for(var u=r(a),l=r(s),c=t;c<n;c++){var f=e.get(c);f["a_"+o.name+"0"]=u[0],f["a_"+o.name+"1"]=u[1],f["a_"+o.name+"2"]=l[0],f["a_"+o.name+"3"]=l[1]}else{for(var h=t;h<n;h++){var p=e.get(h);p["a_"+o.name+"0"]=a,p["a_"+o.name+"1"]=s}this.statistics.max=Math.max(this.statistics.max,a,s)}},c.prototype.interpolationFactor=function(e){return this.useIntegerZoom?this.expression.interpolationFactor(Math.floor(e),this.zoom,this.zoom+1):this.expression.interpolationFactor(e,this.zoom,this.zoom+1)},c.prototype.setUniforms=function(e,t,n){e.uniform1f(t.uniforms["a_"+this.name+"_t"],this.interpolationFactor(n.zoom))};var f=function(){this.binders={},this.cacheKey=""};f.createDynamic=function(e,t,n){for(var r=new f,o=[],a=0,s=e.paintAttributes||[];a<s.length;a+=1){var h=s[a],p=h.property,d=h.name||p.replace(t.type+"-","").replace(/-/g,"_"),v=t.paint.get(p),g=v.property.specification.type,y=v.property.useIntegerZoom;"constant"===v.value.kind?(r.binders[d]=new u(v.value,d,g,p),r.cacheKey+="/u_"+d):"source"===v.value.kind?(r.binders[d]=new l(v.value,d,g,p),r.cacheKey+="/a_"+d,o.push({name:"a_"+d,type:"Float32",components:"color"===g?2:1})):(r.binders[d]=new c(v.value,d,g,p,y,n),r.cacheKey+="/z_"+d,o.push({name:"a_"+d,type:"Float32",components:"color"===g?4:2}))}return r.PaintVertexArray=i(o),r.interface=e,r.layer=t,r},f.forBackgroundColor=function(e,t){var n=new f;return n.binders.color=new u(e,"color","color","background-color"),n.cacheKey+="/u_color",n.binders.opacity=new u(t,"opacity","number","background-opacity"),n.cacheKey+="/u_opacity",n},f.forBackgroundPattern=function(e){var t=new f;return t.binders.opacity=new u(e,"opacity","number","background-opacity"),t.cacheKey+="/u_opacity",t},f.forTileClippingMask=function(){return f.forBackgroundColor(s.black,1)},f.prototype.populatePaintArray=function(e,t){var n=this,r=this.paintVertexArray;if(0!==r.bytesPerElement){var i=r.length;r.resize(e);for(var o in n.binders)n.binders[o].populatePaintArray(r,i,e,t)}},f.prototype.defines=function(){var e=this,t=[];for(var n in e.binders)t.push.apply(t,e.binders[n].defines());return t},f.prototype.setUniforms=function(e,t,n,r){var i=this;for(var o in i.binders){var a=i.binders[o];a.setUniforms(e,t,r,n.get(a.property))}},f.prototype.serialize=function(e){var t=this;if(0===this.paintVertexArray.length)return null;var n={};for(var r in t.binders)n[t.binders[r].property]=t.binders[r].statistics;return{array:this.paintVertexArray.serialize(e),type:this.paintVertexArray.constructor.serialize(),statistics:n}},f.deserialize=function(e,t,n,r){var o=f.createDynamic(e,t,n);return r&&(o.PaintVertexArray=i(r.type.members),o.paintVertexArray=new o.PaintVertexArray(r.array),o.paintPropertyStatistics=r.statistics),o},f.prototype.upload=function(e){this.paintVertexArray&&(this.paintVertexBuffer=new a(e,this.paintVertexArray))},f.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()};var h=function(e,t,n,r){var i=this;if(this.programConfigurations={},r)for(var o=0,a=t;o<a.length;o+=1){var s=a[o];i.programConfigurations[s.id]=f.deserialize(e,s,n,r[s.id])}else for(var u=0,l=t;u<l.length;u+=1){var c=l[u],h=f.createDynamic(e,c,n);h.paintVertexArray=new h.PaintVertexArray,i.programConfigurations[c.id]=h}};h.prototype.populatePaintArrays=function(e,t){var n=this;for(var r in n.programConfigurations)n.programConfigurations[r].populatePaintArray(e,t)},h.prototype.serialize=function(e){var t=this,n={};for(var r in t.programConfigurations){var i=t.programConfigurations[r].serialize(e);i&&(n[r]=i)}return n},h.prototype.get=function(e){return this.programConfigurations[e]},h.prototype.upload=function(e){var t=this;for(var n in t.programConfigurations)t.programConfigurations[n].upload(e)},h.prototype.destroy=function(){var e=this;for(var t in e.programConfigurations)e.programConfigurations[t].destroy()},t.exports={ProgramConfiguration:f,ProgramConfigurationSet:h}},{"../gl/vertex_buffer":72,"../shaders/encode_attribute":96,"../style-spec/util/color":150,"./vertex_array_type":66}],64:[function(e,t,n){"use strict";var r=e("../util/struct_array"),i=r({members:[{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]});t.exports=i},{"../util/struct_array":263}],65:[function(e,t,n){"use strict";var r=e("../util/util"),i=r.warnOnce,o=Math.pow(2,16)-1,a=function(e){void 0===e&&(e=[]),this.segments=e};a.prototype.prepareSegment=function(e,n,r){var a=this.segments[this.segments.length-1];return e>o&&i("Max vertices per segment is "+o+": bucket requested "+e),(!a||a.vertexLength+e>t.exports.MAX_VERTEX_ARRAY_LENGTH)&&(a={vertexOffset:n.length,primitiveOffset:r.length,vertexLength:0,primitiveLength:0},this.segments.push(a)),a},a.prototype.get=function(){return this.segments},a.prototype.destroy=function(){for(var e=this,t=0,n=e.segments;t<n.length;t+=1){var r=n[t];for(var i in r.vaos)r.vaos[i].destroy()}},t.exports={SegmentVector:a,MAX_VERTEX_ARRAY_LENGTH:o}},{"../util/util":266}],66:[function(e,t,n){"use strict";function r(e){return i({members:e,alignment:4})}var i=e("../util/struct_array");t.exports=r},{"../util/struct_array":263}],67:[function(e,t,n){"use strict";var r=function(e,t,n){this.column=e,this.row=t,this.zoom=n};r.prototype.clone=function(){return new r(this.column,this.row,this.zoom)},r.prototype.zoomTo=function(e){return this.clone()._zoomTo(e)},r.prototype.sub=function(e){return this.clone()._sub(e)},r.prototype._zoomTo=function(e){var t=Math.pow(2,e-this.zoom);return this.column*=t,this.row*=t,this.zoom=e,this},r.prototype._sub=function(e){return e=e.zoomTo(this.zoom),this.column-=e.column,this.row-=e.row,this},t.exports=r},{}],68:[function(e,t,n){"use strict";var r=e("../util/util").wrap,i=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid LngLat object: ("+e+", "+t+")");if(this.lng=+e,this.lat=+t,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")};i.prototype.wrap=function(){return new i(r(this.lng,-180,180),this.lat)},i.prototype.toArray=function(){return[this.lng,this.lat]},i.prototype.toString=function(){return"LngLat("+this.lng+", "+this.lat+")"},i.prototype.toBounds=function(t){var n=360*t/40075017,r=n/Math.cos(Math.PI/180*this.lat);return new(e("./lng_lat_bounds"))(new i(this.lng-r,this.lat-n),new i(this.lng+r,this.lat+n))},i.convert=function(e){if(e instanceof i)return e;if(Array.isArray(e)&&(2===e.length||3===e.length))return new i(Number(e[0]),Number(e[1]));if(!Array.isArray(e)&&"object"==typeof e&&null!==e)return new i(Number(e.lng),Number(e.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")},t.exports=i},{"../util/util":266,"./lng_lat_bounds":69}],69:[function(e,t,n){"use strict";var r=e("./lng_lat"),i=function(e,t){e&&(t?this.setSouthWest(e).setNorthEast(t):4===e.length?this.setSouthWest([e[0],e[1]]).setNorthEast([e[2],e[3]]):this.setSouthWest(e[0]).setNorthEast(e[1]))};i.prototype.setNorthEast=function(e){return this._ne=e instanceof r?new r(e.lng,e.lat):r.convert(e),this},i.prototype.setSouthWest=function(e){return this._sw=e instanceof r?new r(e.lng,e.lat):r.convert(e),this},i.prototype.extend=function(e){var t,n,o=this._sw,a=this._ne;if(e instanceof r)t=e,n=e;else{if(!(e instanceof i))return Array.isArray(e)?e.every(Array.isArray)?this.extend(i.convert(e)):this.extend(r.convert(e)):this;if(t=e._sw,n=e._ne,!t||!n)return this}return o||a?(o.lng=Math.min(t.lng,o.lng),o.lat=Math.min(t.lat,o.lat),a.lng=Math.max(n.lng,a.lng),a.lat=Math.max(n.lat,a.lat)):(this._sw=new r(t.lng,t.lat),this._ne=new r(n.lng,n.lat)),this},i.prototype.getCenter=function(){return new r((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)},i.prototype.getSouthWest=function(){return this._sw},i.prototype.getNorthEast=function(){return this._ne},i.prototype.getNorthWest=function(){return new r(this.getWest(),this.getNorth())},i.prototype.getSouthEast=function(){return new r(this.getEast(),this.getSouth())},i.prototype.getWest=function(){return this._sw.lng},i.prototype.getSouth=function(){return this._sw.lat},i.prototype.getEast=function(){return this._ne.lng},i.prototype.getNorth=function(){return this._ne.lat},i.prototype.toArray=function(){return[this._sw.toArray(),this._ne.toArray()]},i.prototype.toString=function(){return"LngLatBounds("+this._sw.toString()+", "+this._ne.toString()+")"},i.convert=function(e){return!e||e instanceof i?e:new i(e)},t.exports=i},{"./lng_lat":68}],70:[function(e,t,n){"use strict";var r=e("./lng_lat"),i=e("@mapbox/point-geometry"),o=e("./coordinate"),a=e("../util/util"),s=e("../style-spec/util/interpolate").number,u=e("../source/tile_coord"),l=e("../data/extent"),c=e("@mapbox/gl-matrix"),f=c.vec4,h=c.mat4,p=c.mat2,d=function(e,t,n){this.tileSize=512,this._renderWorldCopies=void 0===n||n,this._minZoom=e||0,this._maxZoom=t||22,this.latRange=[-85.05113,85.05113],this.width=0,this.height=0,this._center=new r(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._posMatrixCache={}},v={minZoom:{},maxZoom:{},renderWorldCopies:{},worldSize:{},centerPoint:{},size:{},bearing:{},pitch:{},fov:{},zoom:{},center:{},unmodified:{},x:{},y:{},point:{}};d.prototype.clone=function(){var e=new d(this._minZoom,this._maxZoom,this._renderWorldCopies);return e.tileSize=this.tileSize,e.latRange=this.latRange,e.width=this.width,e.height=this.height,e._center=this._center,e.zoom=this.zoom,e.angle=this.angle,e._fov=this._fov,e._pitch=this._pitch,e._unmodified=this._unmodified,e._calcMatrices(),e},v.minZoom.get=function(){return this._minZoom},v.minZoom.set=function(e){this._minZoom!==e&&(this._minZoom=e,this.zoom=Math.max(this.zoom,e))},v.maxZoom.get=function(){return this._maxZoom},v.maxZoom.set=function(e){this._maxZoom!==e&&(this._maxZoom=e,this.zoom=Math.min(this.zoom,e))},v.renderWorldCopies.get=function(){return this._renderWorldCopies},v.worldSize.get=function(){return this.tileSize*this.scale},v.centerPoint.get=function(){return this.size._div(2)},v.size.get=function(){return new i(this.width,this.height)},v.bearing.get=function(){return-this.angle/Math.PI*180},v.bearing.set=function(e){var t=-a.wrap(e,-180,180)*Math.PI/180;this.angle!==t&&(this._unmodified=!1,this.angle=t,this._calcMatrices(),this.rotationMatrix=p.create(),p.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))},v.pitch.get=function(){return this._pitch/Math.PI*180},v.pitch.set=function(e){var t=a.clamp(e,0,60)/180*Math.PI;this._pitch!==t&&(this._unmodified=!1,this._pitch=t,this._calcMatrices())},v.fov.get=function(){return this._fov/Math.PI*180},v.fov.set=function(e){e=Math.max(.01,Math.min(60,e)),this._fov!==e&&(this._unmodified=!1,this._fov=e/180*Math.PI,this._calcMatrices())},v.zoom.get=function(){return this._zoom},v.zoom.set=function(e){var t=Math.min(Math.max(e,this.minZoom),this.maxZoom);this._zoom!==t&&(this._unmodified=!1,this._zoom=t,this.scale=this.zoomScale(t),this.tileZoom=Math.floor(t),this.zoomFraction=t-this.tileZoom,this._constrain(),this._calcMatrices())},v.center.get=function(){return this._center},v.center.set=function(e){e.lat===this._center.lat&&e.lng===this._center.lng||(this._unmodified=!1,this._center=e,this._constrain(),this._calcMatrices())},d.prototype.coveringZoomLevel=function(e){return(e.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/e.tileSize))},d.prototype.getVisibleWrappedCoordinates=function(e){for(var t=this.pointCoordinate(new i(0,0),0),n=this.pointCoordinate(new i(this.width,0),0),r=Math.floor(t.column),o=Math.floor(n.column),a=[e],s=r;s<=o;s++)0!==s&&a.push(new u(e.z,e.x,e.y,s));return a},d.prototype.coveringTiles=function(e){var t=this.coveringZoomLevel(e),n=t;if(void 0!==e.minzoom&&t<e.minzoom)return[];void 0!==e.maxzoom&&t>e.maxzoom&&(t=e.maxzoom);var r=this.pointCoordinate(this.centerPoint,t),o=new i(r.column-.5,r.row-.5),a=[this.pointCoordinate(new i(0,0),t),this.pointCoordinate(new i(this.width,0),t),this.pointCoordinate(new i(this.width,this.height),t),this.pointCoordinate(new i(0,this.height),t)];return u.cover(t,a,e.reparseOverscaled?n:t,this._renderWorldCopies).sort(function(e,t){return o.dist(e)-o.dist(t)})},d.prototype.resize=function(e,t){this.width=e,this.height=t,this.pixelsToGLUnits=[2/e,-2/t],this._constrain(),this._calcMatrices()},v.unmodified.get=function(){return this._unmodified},d.prototype.zoomScale=function(e){return Math.pow(2,e)},d.prototype.scaleZoom=function(e){return Math.log(e)/Math.LN2},d.prototype.project=function(e){return new i(this.lngX(e.lng),this.latY(e.lat))},d.prototype.unproject=function(e){return new r(this.xLng(e.x),this.yLat(e.y))},v.x.get=function(){return this.lngX(this.center.lng)},v.y.get=function(){return this.latY(this.center.lat)},v.point.get=function(){return new i(this.x,this.y)},d.prototype.lngX=function(e){return(180+e)*this.worldSize/360},d.prototype.latY=function(e){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+e*Math.PI/360)))*this.worldSize/360},d.prototype.xLng=function(e){return 360*e/this.worldSize-180},d.prototype.yLat=function(e){var t=180-360*e/this.worldSize;return 360/Math.PI*Math.atan(Math.exp(t*Math.PI/180))-90},d.prototype.setLocationAtPoint=function(e,t){var n=this.pointCoordinate(t)._sub(this.pointCoordinate(this.centerPoint));this.center=this.coordinateLocation(this.locationCoordinate(e)._sub(n)),this._renderWorldCopies&&(this.center=this.center.wrap())},d.prototype.locationPoint=function(e){return this.coordinatePoint(this.locationCoordinate(e))},d.prototype.pointLocation=function(e){return this.coordinateLocation(this.pointCoordinate(e))},d.prototype.locationCoordinate=function(e){return new o(this.lngX(e.lng)/this.tileSize,this.latY(e.lat)/this.tileSize,this.zoom).zoomTo(this.tileZoom)},d.prototype.coordinateLocation=function(e){var t=e.zoomTo(this.zoom);return new r(this.xLng(t.column*this.tileSize),this.yLat(t.row*this.tileSize))},d.prototype.pointCoordinate=function(e,t){void 0===t&&(t=this.tileZoom);var n=[e.x,e.y,0,1],r=[e.x,e.y,1,1];f.transformMat4(n,n,this.pixelMatrixInverse),f.transformMat4(r,r,this.pixelMatrixInverse);var i=n[3],a=r[3],u=n[0]/i,l=r[0]/a,c=n[1]/i,h=r[1]/a,p=n[2]/i,d=r[2]/a,v=p===d?0:(0-p)/(d-p);return new o(s(u,l,v)/this.tileSize,s(c,h,v)/this.tileSize,this.zoom)._zoomTo(t)},d.prototype.coordinatePoint=function(e){var t=e.zoomTo(this.zoom),n=[t.column*this.tileSize,t.row*this.tileSize,0,1];return f.transformMat4(n,n,this.pixelMatrix),new i(n[0]/n[3],n[1]/n[3])},d.prototype.calculatePosMatrix=function(e,t){var n=e.id.toString();if(t&&(n+=t.toString()),this._posMatrixCache[n])return this._posMatrixCache[n];var r=e.toCoordinate(t),i=this.worldSize/this.zoomScale(r.zoom),o=h.identity(new Float64Array(16));return h.translate(o,o,[r.column*i,r.row*i,0]),h.scale(o,o,[i/l,i/l,1]),h.multiply(o,this.projMatrix,o),this._posMatrixCache[n]=new Float32Array(o),this._posMatrixCache[n]},d.prototype._constrain=function(){if(this.center&&this.width&&this.height&&!this._constraining){this._constraining=!0;var e,t,n,r,o=-90,a=90,s=-180,u=180,l=this.size,c=this._unmodified;if(this.latRange){var f=this.latRange;o=this.latY(f[1]),a=this.latY(f[0]),e=a-o<l.y?l.y/(a-o):0}if(this.lngRange){var h=this.lngRange;s=this.lngX(h[0]),u=this.lngX(h[1]),t=u-s<l.x?l.x/(u-s):0}var p=Math.max(t||0,e||0);if(p)return this.center=this.unproject(new i(t?(u+s)/2:this.x,e?(a+o)/2:this.y)),this.zoom+=this.scaleZoom(p),this._unmodified=c,void(this._constraining=!1);if(this.latRange){var d=this.y,v=l.y/2;d-v<o&&(r=o+v),d+v>a&&(r=a-v)}if(this.lngRange){var g=this.x,y=l.x/2;g-y<s&&(n=s+y),g+y>u&&(n=u-y)}void 0===n&&void 0===r||(this.center=this.unproject(new i(void 0!==n?n:this.x,void 0!==r?r:this.y))),this._unmodified=c,this._constraining=!1}},d.prototype._calcMatrices=function(){if(this.height){this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height;var e=this._fov/2,t=Math.PI/2+this._pitch,n=Math.sin(e)*this.cameraToCenterDistance/Math.sin(Math.PI-t-e),r=Math.cos(Math.PI/2-this._pitch)*n+this.cameraToCenterDistance,i=1.01*r,o=new Float64Array(16);h.perspective(o,this._fov,this.width/this.height,1,i),h.scale(o,o,[1,-1,1]),h.translate(o,o,[0,0,-this.cameraToCenterDistance]),h.rotateX(o,o,this._pitch),h.rotateZ(o,o,this.angle),h.translate(o,o,[-this.x,-this.y,0]);var a=this.worldSize/(2*Math.PI*6378137*Math.abs(Math.cos(this.center.lat*(Math.PI/180))));if(h.scale(o,o,[1,1,a,1]),this.projMatrix=o,o=h.create(),h.scale(o,o,[this.width/2,-this.height/2,1]),h.translate(o,o,[1,-1,0]),this.pixelMatrix=h.multiply(new Float64Array(16),o,this.projMatrix),!(o=h.invert(new Float64Array(16),this.pixelMatrix)))throw new Error("failed to invert matrix");this.pixelMatrixInverse=o,this._posMatrixCache={}}},Object.defineProperties(d.prototype,v),t.exports=d},{"../data/extent":58,"../source/tile_coord":112,"../style-spec/util/interpolate":154,"../util/util":266,"./coordinate":67,"./lng_lat":68,"@mapbox/gl-matrix":1,"@mapbox/point-geometry":2}],71:[function(e,t,n){"use strict";var r=function(e,t,n){this.gl=e,this.buffer=e.createBuffer(),this.dynamicDraw=Boolean(n),this.unbindVAO(),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this.buffer),e.bufferData(e.ELEMENT_ARRAY_BUFFER,t.arrayBuffer,this.dynamicDraw?e.DYNAMIC_DRAW:e.STATIC_DRAW),this.dynamicDraw||delete t.arrayBuffer};r.prototype.unbindVAO=function(){void 0===this.gl.extVertexArrayObject&&(this.gl.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object")),this.gl.extVertexArrayObject&&this.gl.extVertexArrayObject.bindVertexArrayOES(null)},r.prototype.bind=function(){this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,this.buffer)},r.prototype.updateData=function(e){this.unbindVAO(),this.bind(),this.gl.bufferSubData(this.gl.ELEMENT_ARRAY_BUFFER,0,e.arrayBuffer)},r.prototype.destroy=function(){this.buffer&&(this.gl.deleteBuffer(this.buffer),delete this.buffer)},t.exports=r},{}],72:[function(e,t,n){"use strict";var r={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"},i=function(e,t,n){this.length=t.length,this.attributes=t.members,this.itemSize=t.bytesPerElement,this.dynamicDraw=n,this.gl=e,this.buffer=e.createBuffer(),this.gl.bindBuffer(e.ARRAY_BUFFER,this.buffer),this.gl.bufferData(e.ARRAY_BUFFER,t.arrayBuffer,this.dynamicDraw?e.DYNAMIC_DRAW:e.STATIC_DRAW),this.dynamicDraw||delete t.arrayBuffer};i.prototype.bind=function(){this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.buffer)},i.prototype.updateData=function(e){this.bind(),this.gl.bufferSubData(this.gl.ARRAY_BUFFER,0,e.arrayBuffer)},i.prototype.enableAttributes=function(e,t){for(var n=this,r=0;r<this.attributes.length;r++){var i=n.attributes[r],o=t.attributes[i.name];void 0!==o&&e.enableVertexAttribArray(o)}},i.prototype.setVertexAttribPointers=function(e,t,n){for(var i=this,o=0;o<this.attributes.length;o++){var a=i.attributes[o],s=t.attributes[a.name];void 0!==s&&e.vertexAttribPointer(s,a.components,e[r[a.type]],!1,i.itemSize,a.offset+i.itemSize*(n||0))}},i.prototype.destroy=function(){this.buffer&&(this.gl.deleteBuffer(this.buffer),delete this.buffer)},t.exports=i},{}],73:[function(e,t,n){"use strict";var r=e("mapbox-gl-supported"),i=e("./util/browser"),o=e("../package.json").version,a=e("./ui/map"),s=e("./ui/control/navigation_control"),u=e("./ui/control/geolocate_control"),l=e("./ui/control/attribution_control"),c=e("./ui/control/scale_control"),f=e("./ui/control/fullscreen_control"),h=e("./ui/popup"),p=e("./ui/marker"),d=e("./style/style"),v=e("./geo/lng_lat"),g=e("./geo/lng_lat_bounds"),y=e("@mapbox/point-geometry"),m=e("./util/evented"),_=e("./util/config"),b=e("./source/rtl_text_plugin");t.exports={version:o,supported:r,workerCount:Math.max(Math.floor(i.hardwareConcurrency/2),1),setRTLTextPlugin:b.setRTLTextPlugin,Map:a,NavigationControl:s,GeolocateControl:u,AttributionControl:l,ScaleControl:c,FullscreenControl:f,Popup:h,Marker:p,Style:d,LngLat:v,LngLatBounds:g,Point:y,Evented:m,config:_,get accessToken(){return _.ACCESS_TOKEN},set accessToken(e){_.ACCESS_TOKEN=e}}},{"../package.json":50,"./geo/lng_lat":68,"./geo/lng_lat_bounds":69,"./source/rtl_text_plugin":107,"./style/style":185,"./ui/control/attribution_control":225,"./ui/control/fullscreen_control":226,"./ui/control/geolocate_control":227,"./ui/control/navigation_control":229,"./ui/control/scale_control":230,"./ui/map":240,"./ui/marker":241,"./ui/popup":242,"./util/browser":245,"./util/config":249,"./util/evented":253,"@mapbox/point-geometry":2,"mapbox-gl-supported":37}],74:[function(e,t,n){"use strict";function r(e,t,n){var r=n.paint.get("background-color"),o=n.paint.get("background-opacity");if(0!==o){var s=e.gl,f=e.transform,h=f.tileSize,p=n.paint.get("background-pattern"),d={zoom:f.zoom},v=p||1!==r.a||1!==o?"translucent":"opaque";if(e.renderPass===v){s.disable(s.STENCIL_TEST),e.setDepthSublayer(0);var g=new u(c);g._values["background-color"]=new l(c.properties["fill-color"],{kind:"constant",value:r},d),g._values["background-opacity"]=new l(c.properties["fill-opacity"],{kind:"constant",value:o},d);var y;if(p){if(i.isPatternMissing(p,e))return;var m=a.forBackgroundPattern(o);y=e.useProgram("fillPattern",m),m.setUniforms(s,y,g,d),i.prepare(p,e,y),e.tileExtentPatternVAO.bind(s,y,e.tileExtentBuffer)}else{var _=a.forBackgroundColor(r,o);y=e.useProgram("fill",_),_.setUniforms(s,y,g,d),e.tileExtentVAO.bind(s,y,e.tileExtentBuffer)}for(var b=f.coveringTiles({tileSize:h}),E=0,x=b;E<x.length;E+=1){var w=x[E];p&&i.setTile({coord:w,tileSize:h},e,y),s.uniformMatrix4fv(y.uniforms.u_matrix,!1,e.transform.calculatePosMatrix(w)),s.drawArrays(s.TRIANGLE_STRIP,0,e.tileExtentBuffer.length)}}}}var i=e("./pattern"),o=e("../data/program_configuration"),a=o.ProgramConfiguration,s=e("../style/properties"),u=s.PossiblyEvaluated,l=s.PossiblyEvaluatedPropertyValue,c=e("../style/style_layer/fill_style_layer_properties").paint;t.exports=r},{"../data/program_configuration":63,"../style/properties":183,"../style/style_layer/fill_style_layer_properties":194,"./pattern":90}],75:[function(e,t,n){"use strict";function r(e,t,n,r){if("translucent"===e.renderPass){var o=n.paint.get("circle-opacity"),a=n.paint.get("circle-stroke-width"),s=n.paint.get("circle-stroke-opacity");if(0!==o.constantOr(1)||0!==a.constantOr(1)&&0!==s.constantOr(1)){var u=e.gl;e.setDepthSublayer(0),e.depthMask(!1),u.disable(u.STENCIL_TEST);for(var l=0;l<r.length;l++){var c=r[l],f=t.getTile(c),h=f.getBucket(n);if(h){var p=h.programConfigurations.get(n.id),d=e.useProgram("circle",p);if(p.setUniforms(u,d,n.paint,{zoom:e.transform.zoom}),u.uniform1f(d.uniforms.u_camera_to_center_distance,e.transform.cameraToCenterDistance),u.uniform1i(d.uniforms.u_scale_with_map,"map"===n.paint.get("circle-pitch-scale")?1:0),"map"===n.paint.get("circle-pitch-alignment")){u.uniform1i(d.uniforms.u_pitch_with_map,1);var v=i(f,1,e.transform.zoom);u.uniform2f(d.uniforms.u_extrude_scale,v,v)}else u.uniform1i(d.uniforms.u_pitch_with_map,0),u.uniform2fv(d.uniforms.u_extrude_scale,e.transform.pixelsToGLUnits);u.uniformMatrix4fv(d.uniforms.u_matrix,!1,e.translatePosMatrix(c.posMatrix,f,n.paint.get("circle-translate"),n.paint.get("circle-translate-anchor"))),d.draw(u,u.TRIANGLES,n.id,h.layoutVertexBuffer,h.indexBuffer,h.segments,p)}}}}}var i=e("../source/pixels_to_tile_units");t.exports=r},{"../source/pixels_to_tile_units":104}],76:[function(e,t,n){"use strict";function r(e,t,n,r,i){for(var a=e.gl,s=i?e.useProgram("collisionCircle"):e.useProgram("collisionBox"),u=0;u<r.length;u++){var l=r[u],c=t.getTile(l),f=c.getBucket(n);if(f){var h=i?f.collisionCircle:f.collisionBox;if(h){a.uniformMatrix4fv(s.uniforms.u_matrix,!1,l.posMatrix),i||e.lineWidth(1),a.uniform1f(s.uniforms.u_camera_to_center_distance,e.transform.cameraToCenterDistance);var p=o(c,1,e.transform.zoom),d=Math.pow(2,e.transform.zoom-c.coord.z);a.uniform1f(s.uniforms.u_pixels_to_tile_units,p),a.uniform2f(s.uniforms.u_extrude_scale,e.transform.pixelsToGLUnits[0]/(p*d),e.transform.pixelsToGLUnits[1]/(p*d)),s.draw(a,i?a.TRIANGLES:a.LINES,n.id,h.layoutVertexBuffer,h.indexBuffer,h.segments,null,h.collisionVertexBuffer,null)}}}}function i(e,t,n,i){r(e,t,n,i,!1),r(e,t,n,i,!0)}var o=e("../source/pixels_to_tile_units");t.exports=i},{"../source/pixels_to_tile_units":104}],77:[function(e,t,n){"use strict";function r(e,t,n){for(var r=0;r<n.length;r++)i(e,t,n[r])}function i(e,t,n){var r=e.gl;r.disable(r.STENCIL_TEST),e.lineWidth(1*a.devicePixelRatio);var i=n.posMatrix,h=e.useProgram("debug");r.uniformMatrix4fv(h.uniforms.u_matrix,!1,i),r.uniform4f(h.uniforms.u_color,1,0,0,1),e.debugVAO.bind(r,h,e.debugBuffer),r.drawArrays(r.LINE_STRIP,0,e.debugBuffer.length);for(var p=o(n.toString(),50,200,5),d=new f,v=0;v<p.length;v+=2)d.emplaceBack(p[v],p[v+1]);var g=new l(r,d);(new c).bind(r,h,g),r.uniform4f(h.uniforms.u_color,1,1,1,1);for(var y=t.getTile(n).tileSize,m=u/(Math.pow(2,e.transform.zoom-n.z)*y),_=[[-1,-1],[-1,1],[1,-1],[1,1]],b=0;b<_.length;b++){var E=_[b];r.uniformMatrix4fv(h.uniforms.u_matrix,!1,s.translate([],i,[m*E[0],m*E[1],0])),r.drawArrays(r.LINES,0,g.length)}r.uniform4f(h.uniforms.u_color,0,0,0,1),r.uniformMatrix4fv(h.uniforms.u_matrix,!1,i),r.drawArrays(r.LINES,0,g.length)}function o(e,t,n,r){r=r||1;var i,o,a,s,u,l,c,f,p=[];for(i=0,o=e.length;i<o;i++)if(u=h[e[i]]){for(f=null,a=0,s=u[1].length;a<s;a+=2)-1===u[1][a]&&-1===u[1][a+1]?f=null:(l=t+u[1][a]*r,c=n-u[1][a+1]*r,f&&p.push(f.x,f.y,l,c),f={x:l,y:c});t+=u[0]*r}return p}var a=e("../util/browser"),s=e("@mapbox/gl-matrix").mat4,u=e("../data/extent"),l=e("../gl/vertex_buffer"),c=e("./vertex_array_object"),f=e("../data/pos_array");t.exports=r;var h={" ":[16,[]],"!":[10,[5,21,5,7,-1,-1,5,2,4,1,5,0,6,1,5,2]],'"':[16,[4,21,4,14,-1,-1,12,21,12,14]],"#":[21,[11,25,4,-7,-1,-1,17,25,10,-7,-1,-1,4,12,18,12,-1,-1,3,6,17,6]],$:[20,[8,25,8,-4,-1,-1,12,25,12,-4,-1,-1,17,18,15,20,12,21,8,21,5,20,3,18,3,16,4,14,5,13,7,12,13,10,15,9,16,8,17,6,17,3,15,1,12,0,8,0,5,1,3,3]],"%":[24,[21,21,3,0,-1,-1,8,21,10,19,10,17,9,15,7,14,5,14,3,16,3,18,4,20,6,21,8,21,10,20,13,19,16,19,19,20,21,21,-1,-1,17,7,15,6,14,4,14,2,16,0,18,0,20,1,21,3,21,5,19,7,17,7]],"&":[26,[23,12,23,13,22,14,21,14,20,13,19,11,17,6,15,3,13,1,11,0,7,0,5,1,4,2,3,4,3,6,4,8,5,9,12,13,13,14,14,16,14,18,13,20,11,21,9,20,8,18,8,16,9,13,11,10,16,3,18,1,20,0,22,0,23,1,23,2]],"'":[10,[5,19,4,20,5,21,6,20,6,18,5,16,4,15]],"(":[14,[11,25,9,23,7,20,5,16,4,11,4,7,5,2,7,-2,9,-5,11,-7]],")":[14,[3,25,5,23,7,20,9,16,10,11,10,7,9,2,7,-2,5,-5,3,-7]],"*":[16,[8,21,8,9,-1,-1,3,18,13,12,-1,-1,13,18,3,12]],"+":[26,[13,18,13,0,-1,-1,4,9,22,9]],",":[10,[6,1,5,0,4,1,5,2,6,1,6,-1,5,-3,4,-4]],"-":[26,[4,9,22,9]],".":[10,[5,2,4,1,5,0,6,1,5,2]],"/":[22,[20,25,2,-7]],0:[20,[9,21,6,20,4,17,3,12,3,9,4,4,6,1,9,0,11,0,14,1,16,4,17,9,17,12,16,17,14,20,11,21,9,21]],1:[20,[6,17,8,18,11,21,11,0]],2:[20,[4,16,4,17,5,19,6,20,8,21,12,21,14,20,15,19,16,17,16,15,15,13,13,10,3,0,17,0]],3:[20,[5,21,16,21,10,13,13,13,15,12,16,11,17,8,17,6,16,3,14,1,11,0,8,0,5,1,4,2,3,4]],4:[20,[13,21,3,7,18,7,-1,-1,13,21,13,0]],5:[20,[15,21,5,21,4,12,5,13,8,14,11,14,14,13,16,11,17,8,17,6,16,3,14,1,11,0,8,0,5,1,4,2,3,4]],6:[20,[16,18,15,20,12,21,10,21,7,20,5,17,4,12,4,7,5,3,7,1,10,0,11,0,14,1,16,3,17,6,17,7,16,10,14,12,11,13,10,13,7,12,5,10,4,7]],7:[20,[17,21,7,0,-1,-1,3,21,17,21]],8:[20,[8,21,5,20,4,18,4,16,5,14,7,13,11,12,14,11,16,9,17,7,17,4,16,2,15,1,12,0,8,0,5,1,4,2,3,4,3,7,4,9,6,11,9,12,13,13,15,14,16,16,16,18,15,20,12,21,8,21]],9:[20,[16,14,15,11,13,9,10,8,9,8,6,9,4,11,3,14,3,15,4,18,6,20,9,21,10,21,13,20,15,18,16,14,16,9,15,4,13,1,10,0,8,0,5,1,4,3]],":":[10,[5,14,4,13,5,12,6,13,5,14,-1,-1,5,2,4,1,5,0,6,1,5,2]],";":[10,[5,14,4,13,5,12,6,13,5,14,-1,-1,6,1,5,0,4,1,5,2,6,1,6,-1,5,-3,4,-4]],"<":[24,[20,18,4,9,20,0]],"=":[26,[4,12,22,12,-1,-1,4,6,22,6]],">":[24,[4,18,20,9,4,0]],"?":[18,[3,16,3,17,4,19,5,20,7,21,11,21,13,20,14,19,15,17,15,15,14,13,13,12,9,10,9,7,-1,-1,9,2,8,1,9,0,10,1,9,2]],"@":[27,[18,13,17,15,15,16,12,16,10,15,9,14,8,11,8,8,9,6,11,5,14,5,16,6,17,8,-1,-1,12,16,10,14,9,11,9,8,10,6,11,5,-1,-1,18,16,17,8,17,6,19,5,21,5,23,7,24,10,24,12,23,15,22,17,20,19,18,20,15,21,12,21,9,20,7,19,5,17,4,15,3,12,3,9,4,6,5,4,7,2,9,1,12,0,15,0,18,1,20,2,21,3,-1,-1,19,16,18,8,18,6,19,5]],A:[18,[9,21,1,0,-1,-1,9,21,17,0,-1,-1,4,7,14,7]],B:[21,[4,21,4,0,-1,-1,4,21,13,21,16,20,17,19,18,17,18,15,17,13,16,12,13,11,-1,-1,4,11,13,11,16,10,17,9,18,7,18,4,17,2,16,1,13,0,4,0]],C:[21,[18,16,17,18,15,20,13,21,9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5]],D:[21,[4,21,4,0,-1,-1,4,21,11,21,14,20,16,18,17,16,18,13,18,8,17,5,16,3,14,1,11,0,4,0]],E:[19,[4,21,4,0,-1,-1,4,21,17,21,-1,-1,4,11,12,11,-1,-1,4,0,17,0]],F:[18,[4,21,4,0,-1,-1,4,21,17,21,-1,-1,4,11,12,11]],G:[21,[18,16,17,18,15,20,13,21,9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5,18,8,-1,-1,13,8,18,8]],H:[22,[4,21,4,0,-1,-1,18,21,18,0,-1,-1,4,11,18,11]],I:[8,[4,21,4,0]],J:[16,[12,21,12,5,11,2,10,1,8,0,6,0,4,1,3,2,2,5,2,7]],K:[21,[4,21,4,0,-1,-1,18,21,4,7,-1,-1,9,12,18,0]],L:[17,[4,21,4,0,-1,-1,4,0,16,0]],M:[24,[4,21,4,0,-1,-1,4,21,12,0,-1,-1,20,21,12,0,-1,-1,20,21,20,0]],N:[22,[4,21,4,0,-1,-1,4,21,18,0,-1,-1,18,21,18,0]],O:[22,[9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5,19,8,19,13,18,16,17,18,15,20,13,21,9,21]],P:[21,[4,21,4,0,-1,-1,4,21,13,21,16,20,17,19,18,17,18,14,17,12,16,11,13,10,4,10]],Q:[22,[9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5,19,8,19,13,18,16,17,18,15,20,13,21,9,21,-1,-1,12,4,18,-2]],R:[21,[4,21,4,0,-1,-1,4,21,13,21,16,20,17,19,18,17,18,15,17,13,16,12,13,11,4,11,-1,-1,11,11,18,0]],S:[20,[17,18,15,20,12,21,8,21,5,20,3,18,3,16,4,14,5,13,7,12,13,10,15,9,16,8,17,6,17,3,15,1,12,0,8,0,5,1,3,3]],T:[16,[8,21,8,0,-1,-1,1,21,15,21]],U:[22,[4,21,4,6,5,3,7,1,10,0,12,0,15,1,17,3,18,6,18,21]],V:[18,[1,21,9,0,-1,-1,17,21,9,0]],W:[24,[2,21,7,0,-1,-1,12,21,7,0,-1,-1,12,21,17,0,-1,-1,22,21,17,0]],X:[20,[3,21,17,0,-1,-1,17,21,3,0]],Y:[18,[1,21,9,11,9,0,-1,-1,17,21,9,11]],Z:[20,[17,21,3,0,-1,-1,3,21,17,21,-1,-1,3,0,17,0]],"[":[14,[4,25,4,-7,-1,-1,5,25,5,-7,-1,-1,4,25,11,25,-1,-1,4,-7,11,-7]],"\\":[14,[0,21,14,-3]],"]":[14,[9,25,9,-7,-1,-1,10,25,10,-7,-1,-1,3,25,10,25,-1,-1,3,-7,10,-7]],"^":[16,[6,15,8,18,10,15,-1,-1,3,12,8,17,13,12,-1,-1,8,17,8,0]],_:[16,[0,-2,16,-2]],"`":[10,[6,21,5,20,4,18,4,16,5,15,6,16,5,17]],a:[19,[15,14,15,0,-1,-1,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],b:[19,[4,21,4,0,-1,-1,4,11,6,13,8,14,11,14,13,13,15,11,16,8,16,6,15,3,13,1,11,0,8,0,6,1,4,3]],c:[18,[15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],d:[19,[15,21,15,0,-1,-1,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],e:[18,[3,8,15,8,15,10,14,12,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],f:[12,[10,21,8,21,6,20,5,17,5,0,-1,-1,2,14,9,14]],g:[19,[15,14,15,-2,14,-5,13,-6,11,-7,8,-7,6,-6,-1,-1,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],h:[19,[4,21,4,0,-1,-1,4,10,7,13,9,14,12,14,14,13,15,10,15,0]],i:[8,[3,21,4,20,5,21,4,22,3,21,-1,-1,4,14,4,0]],j:[10,[5,21,6,20,7,21,6,22,5,21,-1,-1,6,14,6,-3,5,-6,3,-7,1,-7]],k:[17,[4,21,4,0,-1,-1,14,14,4,4,-1,-1,8,8,15,0]],l:[8,[4,21,4,0]],m:[30,[4,14,4,0,-1,-1,4,10,7,13,9,14,12,14,14,13,15,10,15,0,-1,-1,15,10,18,13,20,14,23,14,25,13,26,10,26,0]],n:[19,[4,14,4,0,-1,-1,4,10,7,13,9,14,12,14,14,13,15,10,15,0]],o:[19,[8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3,16,6,16,8,15,11,13,13,11,14,8,14]],p:[19,[4,14,4,-7,-1,-1,4,11,6,13,8,14,11,14,13,13,15,11,16,8,16,6,15,3,13,1,11,0,8,0,6,1,4,3]],q:[19,[15,14,15,-7,-1,-1,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],r:[13,[4,14,4,0,-1,-1,4,8,5,11,7,13,9,14,12,14]],s:[17,[14,11,13,13,10,14,7,14,4,13,3,11,4,9,6,8,11,7,13,6,14,4,14,3,13,1,10,0,7,0,4,1,3,3]],t:[12,[5,21,5,4,6,1,8,0,10,0,-1,-1,2,14,9,14]],u:[19,[4,14,4,4,5,1,7,0,10,0,12,1,15,4,-1,-1,15,14,15,0]],v:[16,[2,14,8,0,-1,-1,14,14,8,0]],w:[22,[3,14,7,0,-1,-1,11,14,7,0,-1,-1,11,14,15,0,-1,-1,19,14,15,0]],x:[17,[3,14,14,0,-1,-1,14,14,3,0]],y:[16,[2,14,8,0,-1,-1,14,14,8,0,6,-4,4,-6,2,-7,1,-7]],z:[17,[14,14,3,0,-1,-1,3,14,14,14,-1,-1,3,0,14,0]],"{":[14,[9,25,7,24,6,23,5,21,5,19,6,17,7,16,8,14,8,12,6,10,-1,-1,7,24,6,22,6,20,7,18,8,17,9,15,9,13,8,11,4,9,8,7,9,5,9,3,8,1,7,0,6,-2,6,-4,7,-6,-1,-1,6,8,8,6,8,4,7,2,6,1,5,-1,5,-3,6,-5,7,-6,9,-7]],"|":[8,[4,25,4,-7]],"}":[14,[5,25,7,24,8,23,9,21,9,19,8,17,7,16,6,14,6,12,8,10,-1,-1,7,24,8,22,8,20,7,18,6,17,5,15,5,13,6,11,10,9,6,7,5,5,5,3,6,1,7,0,8,-2,8,-4,7,-6,-1,-1,8,8,6,6,6,4,7,2,8,1,9,-1,9,-3,8,-5,7,-6,5,-7]],"~":[24,[3,6,3,8,4,11,6,12,8,12,10,11,14,8,16,7,18,7,20,8,21,10,-1,-1,3,8,4,10,6,11,8,11,10,10,14,7,16,6,18,6,20,7,21,10,21,12]]}},{"../data/extent":58,"../data/pos_array":62,"../gl/vertex_buffer":72,"../util/browser":245,"./vertex_array_object":95,"@mapbox/gl-matrix":1}],78:[function(e,t,n){"use strict";function r(e,t,n,r){var s=n.paint.get("fill-color"),u=n.paint.get("fill-opacity");if(0!==u.constantOr(1)){var c=e.gl;c.enable(c.STENCIL_TEST);var f=n.paint.get("fill-pattern")||1!==s.constantOr(l.transparent).a||1!==u.constantOr(0)?"translucent":"opaque";e.renderPass===f&&(e.setDepthSublayer(1),e.depthMask("opaque"===e.renderPass),i(e,t,n,r,o)),"translucent"===e.renderPass&&n.paint.get("fill-antialias")&&(e.lineWidth(2),e.depthMask(!1),e.setDepthSublayer(n.getPaintProperty("fill-outline-color")?2:0),i(e,t,n,r,a))}}function i(e,t,n,r,i){if(!u.isPatternMissing(n.paint.get("fill-pattern"),e))for(var o=!0,a=0,s=r;a<s.length;a+=1){var l=s[a],c=t.getTile(l),f=c.getBucket(n);f&&(e.enableTileClippingMask(l),i(e,t,n,c,l,f,o),o=!1)}}function o(e,t,n,r,i,o,a){var u=e.gl,l=o.programConfigurations.get(n.id);s("fill",n.paint.get("fill-pattern"),e,l,n,r,i,a).draw(u,u.TRIANGLES,n.id,o.layoutVertexBuffer,o.indexBuffer,o.segments,l)}function a(e,t,n,r,i,o,a){var u=e.gl,l=o.programConfigurations.get(n.id),c=n.getPaintProperty("fill-outline-color")?null:n.paint.get("fill-pattern"),f=s("fillOutline",c,e,l,n,r,i,a);u.uniform2f(f.uniforms.u_world,u.drawingBufferWidth,u.drawingBufferHeight),f.draw(u,u.LINES,n.id,o.layoutVertexBuffer,o.indexBuffer2,o.segments2,l)}function s(e,t,n,r,i,o,a,s){var l,c=n.currentProgram;return t?(l=n.useProgram(e+"Pattern",r),(s||l!==c)&&(r.setUniforms(n.gl,l,i.paint,{zoom:n.transform.zoom}),u.prepare(t,n,l)),u.setTile(o,n,l)):(l=n.useProgram(e,r),(s||l!==c)&&r.setUniforms(n.gl,l,i.paint,{zoom:n.transform.zoom})),n.gl.uniformMatrix4fv(l.uniforms.u_matrix,!1,n.translatePosMatrix(a.posMatrix,o,i.paint.get("fill-translate"),i.paint.get("fill-translate-anchor"))),l}var u=e("./pattern"),l=e("../style-spec/util/color");t.exports=r},{"../style-spec/util/color":150,"./pattern":90}],79:[function(e,t,n){"use strict";function r(e,t,n,r){if(0!==n.paint.get("fill-extrusion-opacity"))if("3d"===e.renderPass){var a=e.gl;a.disable(a.STENCIL_TEST),a.enable(a.DEPTH_TEST),e.clearColor(),e.depthMask(!0);for(var s=0;s<r.length;s++)o(e,t,n,r[s])}else"translucent"===e.renderPass&&i(e,n)}function i(e,t){var n=t.viewportFrame;if(n){var r=e.gl,i=e.useProgram("extrusionTexture");r.disable(r.STENCIL_TEST),r.disable(r.DEPTH_TEST),r.activeTexture(r.TEXTURE0),r.bindTexture(r.TEXTURE_2D,n.texture),r.uniform1f(i.uniforms.u_opacity,t.paint.get("fill-extrusion-opacity")),r.uniform1i(i.uniforms.u_image,0);var o=c.create();c.ortho(o,0,e.width,e.height,0,0,1),r.uniformMatrix4fv(i.uniforms.u_matrix,!1,o),r.uniform2f(i.uniforms.u_world,r.drawingBufferWidth,r.drawingBufferHeight),e.viewportVAO.bind(r,i,e.viewportBuffer),r.drawArrays(r.TRIANGLE_STRIP,0,4)}}function o(e,t,n,r){var i=t.getTile(r),o=i.getBucket(n);if(o){var s=e.gl,l=n.paint.get("fill-extrusion-pattern"),c=o.programConfigurations.get(n.id),f=e.useProgram(l?"fillExtrusionPattern":"fillExtrusion",c);if(c.setUniforms(s,f,n.paint,{zoom:e.transform.zoom}),l){if(u.isPatternMissing(l,e))return;u.prepare(l,e,f),u.setTile(i,e,f),s.uniform1f(f.uniforms.u_height_factor,-Math.pow(2,r.z)/i.tileSize/8)}e.gl.uniformMatrix4fv(f.uniforms.u_matrix,!1,e.translatePosMatrix(r.posMatrix,i,n.paint.get("fill-extrusion-translate"),n.paint.get("fill-extrusion-translate-anchor"))),a(f,e),f.draw(s,s.TRIANGLES,n.id,o.layoutVertexBuffer,o.indexBuffer,o.segments,c)}}function a(e,t){var n=t.gl,r=t.style.light,i=r.properties.get("position"),o=[i.x,i.y,i.z],a=l.create();"viewport"===r.properties.get("anchor")&&l.fromRotation(a,-t.transform.angle),f.transformMat3(o,o,a);var s=r.properties.get("color");n.uniform3fv(e.uniforms.u_lightpos,o),n.uniform1f(e.uniforms.u_lightintensity,r.properties.get("intensity")),n.uniform3f(e.uniforms.u_lightcolor,s.r,s.g,s.b)}var s=e("@mapbox/gl-matrix"),u=e("./pattern"),l=s.mat3,c=s.mat4,f=s.vec3;t.exports=r},{"./pattern":90,"@mapbox/gl-matrix":1}],80:[function(e,t,n){"use strict";function r(e,t,n,r){if(!e.isOpaquePass&&0!==n.paint.get("heatmap-opacity")){var o=e.gl;e.setDepthSublayer(0),e.depthMask(!1),o.disable(o.STENCIL_TEST),i(o,e,n),o.clearColor(0,0,0,0),o.clear(o.COLOR_BUFFER_BIT),o.blendFunc(o.ONE,o.ONE);for(var s=0;s<r.length;s++){var u=r[s];if(!t.hasRenderableParent(u)){var c=t.getTile(u),f=c.getBucket(n);if(f){var h=f.programConfigurations.get(n.id),p=e.useProgram("heatmap",h),d=e.transform,v=d.zoom;h.setUniforms(o,p,n.paint,{zoom:v}),o.uniform1f(p.uniforms.u_radius,n.paint.get("heatmap-radius")),o.uniform1f(p.uniforms.u_extrude_scale,l(c,1,v)),o.uniform1f(p.uniforms.u_intensity,n.paint.get("heatmap-intensity")),o.uniformMatrix4fv(p.uniforms.u_matrix,!1,u.posMatrix),p.draw(o,o.TRIANGLES,n.id,f.layoutVertexBuffer,f.indexBuffer,f.segments,h)}}}a(o,e,n)}}function i(e,t,n){e.activeTexture(e.TEXTURE1),e.viewport(0,0,t.width/4,t.height/4);var r=n.heatmapTexture,i=n.heatmapFbo;r?(e.bindTexture(e.TEXTURE_2D,r),e.bindFramebuffer(e.FRAMEBUFFER,i)):(r=n.heatmapTexture=e.createTexture(),e.bindTexture(e.TEXTURE_2D,r),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),i=n.heatmapFbo=e.createFramebuffer(),o(e,t,r,i))}function o(e,t,n,r){e.texImage2D(e.TEXTURE_2D,0,e.RGBA,t.width/4,t.height/4,0,e.RGBA,t.extTextureHalfFloat?t.extTextureHalfFloat.HALF_FLOAT_OES:e.UNSIGNED_BYTE,null),e.bindFramebuffer(e.FRAMEBUFFER,r),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,n,0),t.extTextureHalfFloat&&e.checkFramebufferStatus(e.FRAMEBUFFER)!==e.FRAMEBUFFER_COMPLETE&&(t.extTextureHalfFloat=null,o(e,t,n,r))}function a(e,t,n){e.bindFramebuffer(e.FRAMEBUFFER,null),e.activeTexture(e.TEXTURE2);var r=n.colorRampTexture;r||(r=n.colorRampTexture=new u(e,n.colorRamp,e.RGBA)),r.bind(e.LINEAR,e.CLAMP_TO_EDGE),e.blendFunc(e.ONE,e.ONE_MINUS_SRC_ALPHA);var i=t.useProgram("heatmapTexture");e.viewport(0,0,t.width,t.height),e.activeTexture(e.TEXTURE0),e.bindTexture(e.TEXTURE_2D,n.heatmapTexture);var o=n.paint.get("heatmap-opacity");e.uniform1f(i.uniforms.u_opacity,o),e.uniform1i(i.uniforms.u_image,1),e.uniform1i(i.uniforms.u_color_ramp,2);var a=s.create();s.ortho(a,0,t.width,t.height,0,0,1),e.uniformMatrix4fv(i.uniforms.u_matrix,!1,a),e.disable(e.DEPTH_TEST),e.uniform2f(i.uniforms.u_world,e.drawingBufferWidth,e.drawingBufferHeight),t.viewportVAO.bind(e,i,t.viewportBuffer),e.drawArrays(e.TRIANGLE_STRIP,0,4),e.enable(e.DEPTH_TEST)}var s=e("@mapbox/gl-matrix").mat4,u=e("./texture"),l=e("../source/pixels_to_tile_units");t.exports=r},{"../source/pixels_to_tile_units":104,"./texture":93,"@mapbox/gl-matrix":1}],81:[function(e,t,n){"use strict";function r(e,t,n,r,a,s,u,l,c){var f,h,p,d,v=t.gl,g=a.paint.get("line-dasharray"),y=a.paint.get("line-pattern");if(l||c){var m=1/o(n,1,t.transform.tileZoom);if(g){f=t.lineAtlas.getDash(g.from,"round"===a.layout.get("line-cap")),h=t.lineAtlas.getDash(g.to,"round"===a.layout.get("line-cap"));var _=f.width*g.fromScale,b=h.width*g.toScale;v.uniform2f(e.uniforms.u_patternscale_a,m/_,-f.height/2),v.uniform2f(e.uniforms.u_patternscale_b,m/b,-h.height/2),v.uniform1f(e.uniforms.u_sdfgamma,t.lineAtlas.width/(256*Math.min(_,b)*i.devicePixelRatio)/2)}else if(y){if(p=t.imageManager.getPattern(y.from),d=t.imageManager.getPattern(y.to),!p||!d)return;v.uniform2f(e.uniforms.u_pattern_size_a,p.displaySize[0]*y.fromScale/m,d.displaySize[1]),v.uniform2f(e.uniforms.u_pattern_size_b,d.displaySize[0]*y.toScale/m,d.displaySize[1]);var E=t.imageManager.getPixelSize(),x=E.width,w=E.height;v.uniform2fv(e.uniforms.u_texsize,[x,w])}v.uniform2f(e.uniforms.u_gl_units_to_pixels,1/t.transform.pixelsToGLUnits[0],1/t.transform.pixelsToGLUnits[1])}l&&(g?(v.uniform1i(e.uniforms.u_image,0),v.activeTexture(v.TEXTURE0),t.lineAtlas.bind(v),v.uniform1f(e.uniforms.u_tex_y_a,f.y),v.uniform1f(e.uniforms.u_tex_y_b,h.y),v.uniform1f(e.uniforms.u_mix,g.t)):y&&(v.uniform1i(e.uniforms.u_image,0),v.activeTexture(v.TEXTURE0),t.imageManager.bind(v),v.uniform2fv(e.uniforms.u_pattern_tl_a,p.tl),v.uniform2fv(e.uniforms.u_pattern_br_a,p.br),v.uniform2fv(e.uniforms.u_pattern_tl_b,d.tl),v.uniform2fv(e.uniforms.u_pattern_br_b,d.br),v.uniform1f(e.uniforms.u_fade,y.t))),t.enableTileClippingMask(s);var T=t.translatePosMatrix(s.posMatrix,n,a.paint.get("line-translate"),a.paint.get("line-translate-anchor"));v.uniformMatrix4fv(e.uniforms.u_matrix,!1,T),v.uniform1f(e.uniforms.u_ratio,1/o(n,1,t.transform.zoom)),e.draw(v,v.TRIANGLES,a.id,r.layoutVertexBuffer,r.indexBuffer,r.segments,u)}var i=e("../util/browser"),o=e("../source/pixels_to_tile_units");t.exports=function(e,t,n,i){if("translucent"===e.renderPass&&0!==n.paint.get("line-opacity").constantOr(1)){e.setDepthSublayer(0),e.depthMask(!1);var o=e.gl;o.enable(o.STENCIL_TEST);for(var a,s=n.paint.get("line-dasharray")?"lineSDF":n.paint.get("line-pattern")?"linePattern":"line",u=!0,l=0,c=i;l<c.length;l+=1){var f=c[l],h=t.getTile(f),p=h.getBucket(n);if(p){var d=p.programConfigurations.get(n.id),v=e.currentProgram,g=e.useProgram(s,d),y=u||g!==v,m=a!==h.coord.z;y&&d.setUniforms(e.gl,g,n.paint,{zoom:e.transform.zoom}),r(g,e,h,p,n,f,d,y,m),a=h.coord.z,u=!1}}}}},{"../source/pixels_to_tile_units":104,"../util/browser":245}],82:[function(e,t,n){"use strict";function r(e,t,n,r){if("translucent"===e.renderPass&&0!==n.paint.get("raster-opacity")){var u=e.gl,c=t.getSource(),f=e.useProgram("raster");u.enable(u.DEPTH_TEST),e.depthMask(1===n.paint.get("raster-opacity")),u.depthFunc(u.LESS),u.disable(u.STENCIL_TEST),u.uniform1f(f.uniforms.u_brightness_low,n.paint.get("raster-brightness-min")),u.uniform1f(f.uniforms.u_brightness_high,n.paint.get("raster-brightness-max")),u.uniform1f(f.uniforms.u_saturation_factor,a(n.paint.get("raster-saturation"))),u.uniform1f(f.uniforms.u_contrast_factor,o(n.paint.get("raster-contrast"))),u.uniform3fv(f.uniforms.u_spin_weights,i(n.paint.get("raster-hue-rotate"))),u.uniform1f(f.uniforms.u_buffer_scale,1),u.uniform1i(f.uniforms.u_image0,0),u.uniform1i(f.uniforms.u_image1,1);for(var h=r.length&&r[0].z,p=0,d=r;p<d.length;p+=1){var v=d[p];e.setDepthSublayer(v.z-h);var g=t.getTile(v),y=e.transform.calculatePosMatrix(v,t.getSource().maxzoom);g.registerFadeDuration(n.paint.get("raster-fade-duration")),u.uniformMatrix4fv(f.uniforms.u_matrix,!1,y);var m=t.findLoadedParent(v,0,{}),_=s(g,m,t,n,e.transform),b=void 0,E=void 0;if(u.activeTexture(u.TEXTURE0),g.texture.bind(u.LINEAR,u.CLAMP_TO_EDGE,u.LINEAR_MIPMAP_NEAREST),u.activeTexture(u.TEXTURE1),m?(m.texture.bind(u.LINEAR,u.CLAMP_TO_EDGE,u.LINEAR_MIPMAP_NEAREST),b=Math.pow(2,m.coord.z-g.coord.z),E=[g.coord.x*b%1,g.coord.y*b%1]):g.texture.bind(u.LINEAR,u.CLAMP_TO_EDGE,u.LINEAR_MIPMAP_NEAREST),u.uniform2fv(f.uniforms.u_tl_parent,E||[0,0]),u.uniform1f(f.uniforms.u_scale_parent,b||1),u.uniform1f(f.uniforms.u_fade_t,_.mix),u.uniform1f(f.uniforms.u_opacity,_.opacity*n.paint.get("raster-opacity")),c instanceof l){var x=c.boundsBuffer;c.boundsVAO.bind(u,f,x),u.drawArrays(u.TRIANGLE_STRIP,0,x.length)}else if(g.maskedBoundsBuffer&&g.maskedIndexBuffer&&g.segments)f.draw(u,u.TRIANGLES,n.id,g.maskedBoundsBuffer,g.maskedIndexBuffer,g.segments);else{var w=e.rasterBoundsBuffer,T=e.rasterBoundsVAO;T.bind(u,f,w),u.drawArrays(u.TRIANGLE_STRIP,0,w.length)}}u.depthFunc(u.LEQUAL)}}function i(e){e*=Math.PI/180;var t=Math.sin(e),n=Math.cos(e);return[(2*n+1)/3,(-Math.sqrt(3)*t-n+1)/3,(Math.sqrt(3)*t-n+1)/3]}function o(e){return e>0?1/(1-e):1+e}function a(e){return e>0?1-1/(1.001-e):-e}function s(e,t,n,r,i){var o=r.paint.get("raster-fade-duration");if(o>0){var a=Date.now(),s=(a-e.timeAdded)/o,l=t?(a-t.timeAdded)/o:-1,c=n.getSource(),f=i.coveringZoomLevel({tileSize:c.tileSize,roundZoom:c.roundZoom}),h=!t||Math.abs(t.coord.z-f)>Math.abs(e.coord.z-f),p=h&&e.refreshedUponExpiration?1:u.clamp(h?s:1-l,0,1);return e.refreshedUponExpiration&&s>=1&&(e.refreshedUponExpiration=!1),t?{opacity:1,mix:1-p}:{opacity:p,mix:0}}return{opacity:1,mix:0}}var u=e("../util/util"),l=e("../source/image_source");t.exports=r},{"../source/image_source":102,"../util/util":266}],83:[function(e,t,n){"use strict";function r(e,t,n,r){if("translucent"===e.renderPass){var o=e.gl;o.disable(o.STENCIL_TEST),e.setDepthSublayer(0),e.depthMask(!1),0!==n.paint.get("icon-opacity").constantOr(1)&&i(e,t,n,r,!1,n.paint.get("icon-translate"),n.paint.get("icon-translate-anchor"),n.layout.get("icon-rotation-alignment"),n.layout.get("icon-pitch-alignment"),n.layout.get("icon-keep-upright")),0!==n.paint.get("text-opacity").constantOr(1)&&i(e,t,n,r,!0,n.paint.get("text-translate"),n.paint.get("text-translate-anchor"),n.layout.get("text-rotation-alignment"),n.layout.get("text-pitch-alignment"),n.layout.get("text-keep-upright")),t.map.showCollisionBoxes&&u(e,t,n,r)}}function i(e,t,n,r,i,s,u,f,h,d){var v=e.gl,g=e.transform,y="map"===f,m="map"===h,_=y&&"line"===n.layout.get("symbol-placement"),b=y&&!m&&!_,E=m;E?v.enable(v.DEPTH_TEST):v.disable(v.DEPTH_TEST);for(var x,w=0,T=r;w<T.length;w+=1){var S=T[w],A=t.getTile(S),C=A.getBucket(n);if(C){var O=i?C.text:C.icon;if(O&&O.segments.get().length){var k=O.programConfigurations.get(n.id),P=i||C.sdfIcons,R=i?C.textSizeData:C.iconSizeData;if(x||(x=e.useProgram(P?"symbolSDF":"symbolIcon",k),k.setUniforms(v,x,n.paint,{zoom:e.transform.zoom}),o(x,e,n,i,b,m,R)),v.activeTexture(v.TEXTURE0),v.uniform1i(x.uniforms.u_texture,0),i)A.glyphAtlasTexture.bind(v.LINEAR,v.CLAMP_TO_EDGE),v.uniform2fv(x.uniforms.u_texsize,A.glyphAtlasTexture.size);else{var I=1!==n.layout.get("icon-size").constantOr(0)||C.iconsNeedLinear,N=m||0!==g.pitch;A.iconAtlasTexture.bind(P||e.options.rotating||e.options.zooming||I||N?v.LINEAR:v.NEAREST,v.CLAMP_TO_EDGE),v.uniform2fv(x.uniforms.u_texsize,A.iconAtlasTexture.size)}e.enableTileClippingMask(S),v.uniformMatrix4fv(x.uniforms.u_matrix,!1,e.translatePosMatrix(S.posMatrix,A,s,u));var M=l(A,1,e.transform.zoom),L=c.getLabelPlaneMatrix(S.posMatrix,m,y,e.transform,M),D=c.getGlCoordMatrix(S.posMatrix,m,y,e.transform,M);v.uniformMatrix4fv(x.uniforms.u_gl_coord_matrix,!1,e.translatePosMatrix(D,A,s,u,!0)),_?(v.uniformMatrix4fv(x.uniforms.u_label_plane_matrix,!1,p),c.updateLineLabels(C,S.posMatrix,e,i,L,D,m,d)):v.uniformMatrix4fv(x.uniforms.u_label_plane_matrix,!1,L),v.uniform1f(x.uniforms.u_fade_change,e.options.collisionFadeDuration?(Date.now()-C.fadeStartTime)/e.options.collisionFadeDuration:1),a(x,k,e,n,A,O,i,P,m)}}}E||v.enable(v.DEPTH_TEST)}function o(e,t,n,r,i,o,a){var s=t.gl,u=t.transform;s.uniform1i(e.uniforms.u_pitch_with_map,o?1:0),s.uniform1f(e.uniforms.u_is_text,r?1:0),s.uniform1f(e.uniforms.u_pitch,u.pitch/360*2*Math.PI);var l="constant"===a.functionType||"source"===a.functionType,c="constant"===a.functionType||"camera"===a.functionType;s.uniform1i(e.uniforms.u_is_size_zoom_constant,l?1:0),s.uniform1i(e.uniforms.u_is_size_feature_constant,c?1:0),s.uniform1f(e.uniforms.u_camera_to_center_distance,u.cameraToCenterDistance);var h=f.evaluateSizeForZoom(a,u.zoom,d.properties[r?"text-size":"icon-size"]);void 0!==h.uSizeT&&s.uniform1f(e.uniforms.u_size_t,h.uSizeT),void 0!==h.uSize&&s.uniform1f(e.uniforms.u_size,h.uSize),s.uniform1f(e.uniforms.u_aspect_ratio,u.width/u.height),s.uniform1i(e.uniforms.u_rotate_symbol,i?1:0)}function a(e,t,n,r,i,o,a,u,l){var c=n.gl,f=n.transform;if(u){var h=0!==r.paint.get(a?"text-halo-width":"icon-halo-width").constantOr(1),p=l?Math.cos(f._pitch)*f.cameraToCenterDistance:1;c.uniform1f(e.uniforms.u_gamma_scale,p),h&&(c.uniform1f(e.uniforms.u_is_halo,1),s(o,r,c,e)),c.uniform1f(e.uniforms.u_is_halo,0)}s(o,r,c,e)}function s(e,t,n,r){r.draw(n,n.TRIANGLES,t.id,e.layoutVertexBuffer,e.indexBuffer,e.segments,e.programConfigurations.get(t.id),e.dynamicLayoutVertexBuffer,e.opacityVertexBuffer)}var u=e("./draw_collision_debug"),l=e("../source/pixels_to_tile_units"),c=e("../symbol/projection"),f=e("../symbol/symbol_size"),h=e("@mapbox/gl-matrix").mat4,p=h.identity(new Float32Array(16)),d=e("../style/style_layer/symbol_style_layer_properties").layout;t.exports=r},{"../source/pixels_to_tile_units":104,"../style/style_layer/symbol_style_layer_properties":202,"../symbol/projection":216,"../symbol/symbol_size":221,"./draw_collision_debug":76,"@mapbox/gl-matrix":1}],84:[function(e,t,n){"use strict";function r(e){var t=a.create({width:0,height:0}),n={},r=new i(0,0,{autoResize:!0});for(var o in e){var u=e[o],l=n[o]={};for(var c in u){var f=u[+c];if(f&&0!==f.bitmap.width&&0!==f.bitmap.height){var h=r.packOne(f.bitmap.width+2*s,f.bitmap.height+2*s);a.resize(t,{width:r.w,height:r.h}),a.copy(f.bitmap,t,{x:0,y:0},{x:h.x+s,y:h.y+s},f.bitmap),l[c]={rect:h,metrics:f.metrics}}}}return r.shrink(),a.resize(t,{width:r.w,height:r.h}),{image:t,positions:n}}var i=e("@mapbox/shelf-pack"),o=e("../util/image"),a=o.AlphaImage,s=1;t.exports={makeGlyphAtlas:r}},{"../util/image":256,"@mapbox/shelf-pack":3}],85:[function(e,t,n){"use strict";var r=e("../style/load_glyph_range"),i=e("@mapbox/tiny-sdf"),o=e("../util/is_char_in_unicode_block"),a=e("../util/util"),s=a.asyncAll,u=e("../util/image"),l=u.AlphaImage,c=function(e,t){this.requestTransform=e,this.localIdeographFontFamily=t,this.entries={}};c.prototype.setURL=function(e){this.url=e},c.prototype.getGlyphs=function(e,t){var n=this,i=[];for(var o in e)for(var a=0,u=e[o];a<u.length;a+=1){var l=u[a];i.push({stack:o,id:l})}s(i,function(e,t){var i=e.stack,o=e.id,a=n.entries[i];a||(a=n.entries[i]={glyphs:{},requests:{}});var s=a.glyphs[o];if(void 0!==s)return void t(null,{stack:i,id:o,glyph:s});if(s=n._tinySDF(a,i,o))return void t(null,{stack:i,id:o,glyph:s});var u=Math.floor(o/256);if(256*u>65535)return void t(new Error("glyphs > 65535 not supported"));var l=a.requests[u];l||(l=a.requests[u]=[],r(i,u,n.url,n.requestTransform,function(e,t){if(t)for(var n in t)a.glyphs[+n]=t[+n];for(var r=0,i=l;r<i.length;r+=1)(0,i[r])(e,t);delete a.requests[u]})),l.push(function(e,n){e?t(e):n&&t(null,{stack:i,id:o,glyph:n[o]||null})})},function(e,n){if(e)t(e);else if(n){for(var r={},i=0,o=n;i<o.length;i+=1){var a=o[i],s=a.stack,u=a.id,l=a.glyph;(r[s]||(r[s]={}))[u]=l}t(null,r)}})},c.prototype._tinySDF=function(e,t,n){var r=this.localIdeographFontFamily;if(r&&(o["CJK Unified Ideographs"](n)||o["Hangul Syllables"](n))){var a=e.tinySDF;if(!a){var s="400";/bold/i.test(t)?s="900":/medium/i.test(t)?s="500":/light/i.test(t)&&(s="200"),a=e.tinySDF=new i(24,3,8,.25,r,s)}return{id:n,bitmap:l.create({width:30,height:30},a.draw(String.fromCharCode(n))),metrics:{width:24,height:24,left:0,top:-8,advance:24}}}},t.exports=c},{"../style/load_glyph_range":179,"../util/image":256,"../util/is_char_in_unicode_block":258,"../util/util":266,"@mapbox/tiny-sdf":4}],86:[function(e,t,n){"use strict";function r(e,t){var n=t.pixelRatio,r={x:e.x+u,y:e.y+u,w:e.w-2*u,h:e.h-2*u};return{pixelRatio:n,textureRect:r,tl:[r.x,r.y],br:[r.x+r.w,r.y+r.h],displaySize:[r.w/n,r.h/n]}}function i(e){var t=s.create({width:0,height:0}),n={},i=new o(0,0,{autoResize:!0});for(var a in e){var l=e[a],c=i.packOne(l.data.width+2*u,l.data.height+2*u);s.resize(t,{width:i.w,height:i.h}),s.copy(l.data,t,{x:0,y:0},{x:c.x+u,y:c.y+u},l.data),n[a]=r(c,l)}return i.shrink(),s.resize(t,{width:i.w,height:i.h}),{image:t,positions:n}}var o=e("@mapbox/shelf-pack"),a=e("../util/image"),s=a.RGBAImage,u=1;t.exports={imagePosition:r,makeImageAtlas:i}},{"../util/image":256,"@mapbox/shelf-pack":3}],87:[function(e,t,n){"use strict";var r=e("@mapbox/shelf-pack"),i=e("../util/image"),o=i.RGBAImage,a=e("./image_atlas"),s=a.imagePosition,u=e("./texture"),l=function(){this.images={},this.loaded=!1,this.requestors=[],this.shelfPack=new r(64,64,{autoResize:!0}),this.patterns={},this.atlasImage=o.create({width:64,height:64}),this.dirty=!0};l.prototype.isLoaded=function(){return this.loaded},l.prototype.setLoaded=function(e){var t=this;if(this.loaded!==e&&(this.loaded=e,e)){for(var n=0,r=t.requestors;n<r.length;n+=1){var i=r[n],o=i.ids,a=i.callback;t._notify(o,a)}this.requestors=[]}},l.prototype.getImage=function(e){return this.images[e]},l.prototype.addImage=function(e,t){this.images[e]=t},l.prototype.removeImage=function(e){delete this.images[e];var t=this.patterns[e];t&&(this.shelfPack.unref(t.bin),delete this.patterns[e])},l.prototype.getImages=function(e,t){var n=this,r=!0;if(!this.isLoaded())for(var i=0,o=e;i<o.length;i+=1){var a=o[i];n.images[a]||(r=!1)}this.isLoaded()||r?this._notify(e,t):this.requestors.push({ids:e,callback:t})},l.prototype._notify=function(e,t){for(var n=this,r={},i=0,o=e;i<o.length;i+=1){var a=o[i],s=n.images[a];s&&(r[a]=s)}t(null,r)},l.prototype.getPixelSize=function(){return{width:this.shelfPack.w,height:this.shelfPack.h}},l.prototype.getPattern=function(e){var t=this.patterns[e];if(t)return t.position;var n=this.getImage(e);if(!n)return null;var r=n.data.width+2,i=n.data.height+2,a=this.shelfPack.packOne(r,i);if(!a)return null;o.resize(this.atlasImage,this.getPixelSize());var u=n.data,l=this.atlasImage,c=a.x+1,f=a.y+1,h=u.width,p=u.height;o.copy(u,l,{x:0,y:0},{x:c,y:f},{width:h,height:p}),o.copy(u,l,{x:0,y:p-1},{x:c,y:f-1},{width:h,height:1}),o.copy(u,l,{x:0,y:0},{x:c,y:f+p},{width:h,height:1}),o.copy(u,l,{x:h-1,y:0},{x:c-1,y:f},{width:1,height:p}),o.copy(u,l,{x:0,y:0},{x:c+h,y:f},{width:1,height:p}),this.dirty=!0;var d=s(a,n);return this.patterns[e]={bin:a,position:d},d},l.prototype.bind=function(e){this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new u(e,this.atlasImage,e.RGBA),this.atlasTexture.bind(e.LINEAR,e.CLAMP_TO_EDGE)},t.exports=l},{"../util/image":256,"./image_atlas":86,"./texture":93,"@mapbox/shelf-pack":3}],88:[function(e,t,n){"use strict";var r=e("../util/util"),i=function(e,t){this.width=e,this.height=t,this.nextRow=0,this.bytes=4,this.data=new Uint8Array(this.width*this.height*this.bytes),this.positions={}};i.prototype.getDash=function(e,t){var n=e.join(",")+String(t);return this.positions[n]||(this.positions[n]=this.addDash(e,t)),this.positions[n]},i.prototype.addDash=function(e,t){var n=this,i=t?7:0,o=2*i+1;if(this.nextRow+o>this.height)return r.warnOnce("LineAtlas out of space"),null;for(var a=0,s=0;s<e.length;s++)a+=e[s];for(var u=this.width/a,l=u/2,c=e.length%2==1,f=-i;f<=i;f++)for(var h=n.nextRow+i+f,p=n.width*h,d=c?-e[e.length-1]:0,v=e[0],g=1,y=0;y<this.width;y++){for(;v<y/u;)d=v,v+=e[g],c&&g===e.length-1&&(v+=e[0]),g++;var m=Math.abs(y-d*u),_=Math.abs(y-v*u),b=Math.min(m,_),E=g%2==1,x=void 0;if(t){var w=i?f/i*(l+1):0;if(E){var T=l-Math.abs(w);x=Math.sqrt(b*b+T*T)}else x=l-Math.sqrt(b*b+w*w)}else x=(E?1:-1)*b;n.data[3+4*(p+y)]=Math.max(0,Math.min(255,x+128))}var S={y:(this.nextRow+i+.5)/this.height,height:2*i/this.height,width:a};return this.nextRow+=o,this.dirty=!0,S},i.prototype.bind=function(e){this.texture?(e.bindTexture(e.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,e.texSubImage2D(e.TEXTURE_2D,0,0,0,this.width,this.height,e.RGBA,e.UNSIGNED_BYTE,this.data))):(this.texture=e.createTexture(),e.bindTexture(e.TEXTURE_2D,this.texture),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.REPEAT),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.REPEAT),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,this.width,this.height,0,e.RGBA,e.UNSIGNED_BYTE,this.data))},t.exports=i},{"../util/util":266}],89:[function(e,t,n){"use strict";var r=e("../util/browser"),i=e("@mapbox/gl-matrix").mat4,o=e("../source/source_cache"),a=e("../data/extent"),s=e("../source/pixels_to_tile_units"),u=e("../util/util"),l=e("../gl/vertex_buffer"),c=e("./vertex_array_object"),f=e("../data/raster_bounds_array"),h=e("../data/pos_array"),p=e("../data/program_configuration"),d=p.ProgramConfiguration,v=e("../symbol/cross_tile_symbol_index"),g=e("../shaders"),y=e("./program"),m=e("./render_texture"),_=e("./tile_mask"),b={symbol:e("./draw_symbol"),circle:e("./draw_circle"),heatmap:e("./draw_heatmap"),line:e("./draw_line"),fill:e("./draw_fill"),"fill-extrusion":e("./draw_fill_extrusion"),raster:e("./draw_raster"),background:e("./draw_background"),debug:e("./draw_debug")},E=function(e,t){this.gl=e,this.transform=t,this._tileTextures={},this.setup(),this.numSublayers=o.maxUnderzooming+o.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.lineWidthRange=e.getParameter(e.ALIASED_LINE_WIDTH_RANGE),this.emptyProgramConfiguration=new d,this.crossTileSymbolIndex=new v};E.prototype.resize=function(e,t){var n=this,i=this.gl;if(this.width=e*r.devicePixelRatio,this.height=t*r.devicePixelRatio,i.viewport(0,0,this.width,this.height),this.style)for(var o=0,a=n.style._order;o<a.length;o+=1){var s=a[o];n.style._layers[s].resize(i)}this.depthRbo&&(this.gl.deleteRenderbuffer(this.depthRbo),this.depthRbo=null)},E.prototype.setup=function(){var e=this.gl;e.enable(e.BLEND),e.blendFunc(e.ONE,e.ONE_MINUS_SRC_ALPHA),e.enable(e.STENCIL_TEST),e.enable(e.DEPTH_TEST),e.depthFunc(e.LEQUAL),this._depthMask=!1,e.depthMask(!1);var t=new h;t.emplaceBack(0,0),t.emplaceBack(a,0),t.emplaceBack(0,a),t.emplaceBack(a,a),this.tileExtentBuffer=new l(e,t),this.tileExtentVAO=new c,this.tileExtentPatternVAO=new c;var n=new h;n.emplaceBack(0,0),n.emplaceBack(a,0),n.emplaceBack(a,a),n.emplaceBack(0,a),n.emplaceBack(0,0),this.debugBuffer=new l(e,n),this.debugVAO=new c;var r=new f;r.emplaceBack(0,0,0,0),r.emplaceBack(a,0,a,0),r.emplaceBack(0,a,0,a),r.emplaceBack(a,a,a,a),this.rasterBoundsBuffer=new l(e,r),this.rasterBoundsVAO=new c;var i=new h;i.emplaceBack(0,0),i.emplaceBack(1,0),i.emplaceBack(0,1),i.emplaceBack(1,1),this.viewportBuffer=new l(e,i),this.viewportVAO=new c,this.extTextureFilterAnisotropic=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=e.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=e.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&e.getExtension("OES_texture_half_float_linear")},E.prototype.clearColor=function(){var e=this.gl;e.clearColor(0,0,0,0),e.clear(e.COLOR_BUFFER_BIT)},E.prototype.clearStencil=function(){var e=this.gl;e.colorMask(!1,!1,!1,!1),this.depthMask(!1),e.disable(e.DEPTH_TEST),e.enable(e.STENCIL_TEST),e.stencilMask(255),e.stencilOp(e.ZERO,e.ZERO,e.ZERO),e.stencilFunc(e.ALWAYS,0,255);var t=i.create();i.ortho(t,0,this.width,this.height,0,0,1),i.scale(t,t,[e.drawingBufferWidth,e.drawingBufferHeight,0]);var n=this.useProgram("fill",d.forTileClippingMask());e.uniformMatrix4fv(n.uniforms.u_matrix,!1,t),this.viewportVAO.bind(e,n,this.viewportBuffer),e.drawArrays(e.TRIANGLE_STRIP,0,4),e.stencilMask(0),e.colorMask(!0,!0,!0,!0),this.depthMask(!0),e.enable(e.DEPTH_TEST)},E.prototype.clearDepth=function(){var e=this.gl;e.clearDepth(1),this.depthMask(!0),e.clear(e.DEPTH_BUFFER_BIT)},E.prototype._renderTileClippingMasks=function(e){var t=this,n=this.gl;n.colorMask(!1,!1,!1,!1),this.depthMask(!1),n.disable(n.DEPTH_TEST),n.enable(n.STENCIL_TEST),n.stencilMask(255),n.stencilOp(n.KEEP,n.KEEP,n.REPLACE);var r=1;this._tileClippingMaskIDs={};for(var i=d.forTileClippingMask(),o=0,a=e;o<a.length;o+=1){var s=a[o],u=t._tileClippingMaskIDs[s.id]=r++;n.stencilFunc(n.ALWAYS,u,255);var l=t.useProgram("fill",i);n.uniformMatrix4fv(l.uniforms.u_matrix,!1,s.posMatrix),t.tileExtentVAO.bind(n,l,t.tileExtentBuffer),n.drawArrays(n.TRIANGLE_STRIP,0,t.tileExtentBuffer.length)}n.stencilMask(0),n.colorMask(!0,!0,!0,!0),this.depthMask(!0),n.enable(n.DEPTH_TEST)},E.prototype.enableTileClippingMask=function(e){var t=this.gl;t.stencilFunc(t.EQUAL,this._tileClippingMaskIDs[e.id],255)},E.prototype.render=function(e,t){var n=this;this.style=e,this.options=t,this.lineAtlas=e.lineAtlas,this.imageManager=e.imageManager,this.glyphManager=e.glyphManager;for(var r in e.sourceCaches){var i=n.style.sourceCaches[r];i.used&&i.prepare(n.gl)}var o=this.style._order,a=u.filterObject(this.style.sourceCaches,function(e){return"raster"===e._source.type});for(var s in a)!function(e){var t=a[e],r=t.getVisibleCoordinates(),i=r.map(function(e){return t.getTile(e)});_(i,n.gl)}(s);this.renderPass="3d";for(var l,c=!0,f=[],h=0;h<o.length;h++){var p=n.style._layers[o[h]];if(p.has3DPass()&&!p.isHidden(n.transform.zoom)&&(p.source!==(l&&l.id)&&(l=n.style.sourceCaches[p.source],f=[],l&&(n.clearStencil(),f=l.getVisibleCoordinates()),f.reverse()),f.length)){n._setup3DRenderbuffer();var d=p.viewportFrame||new m(n);p.viewportFrame=d,d.bindWithDepth(n.depthRbo),c&&(n.clearDepth(),c=!1),n.renderLayer(n,l,p,f),d.unbind()}}this.clearColor(),this.clearDepth(),this.showOverdrawInspector(t.showOverdrawInspector),this.depthRange=(e._order.length+2)*this.numSublayers*this.depthEpsilon,this.renderPass="opaque";var v,g=[];for(this.currentLayer=o.length-1,this._showOverdrawInspector||this.gl.disable(this.gl.BLEND),this.currentLayer;this.currentLayer>=0;this.currentLayer--){var y=n.style._layers[o[n.currentLayer]];y.source!==(v&&v.id)&&(v=n.style.sourceCaches[y.source],g=[],v&&(n.clearStencil(),g=v.getVisibleCoordinates(),v.getSource().isTileClipped&&n._renderTileClippingMasks(g))),n.renderLayer(n,v,y,g)}this.renderPass="translucent";var E,x=[];for(this.gl.enable(this.gl.BLEND),this.currentLayer=0,this.currentLayer;this.currentLayer<o.length;this.currentLayer++){var w=n.style._layers[o[n.currentLayer]];w.source!==(E&&E.id)&&(E=n.style.sourceCaches[w.source],x=[],E&&(n.clearStencil(),x=E.getVisibleCoordinates(),E.getSource().isTileClipped&&n._renderTileClippingMasks(x)),x.reverse()),n.renderLayer(n,E,w,x)}if(this.options.showTileBoundaries){var T=this.style.sourceCaches[Object.keys(this.style.sourceCaches)[0]];T&&b.debug(this,T,T.getVisibleCoordinates())}},E.prototype._setup3DRenderbuffer=function(){if(!this.depthRbo){var e=this.gl;this.depthRbo=e.createRenderbuffer(),e.bindRenderbuffer(e.RENDERBUFFER,this.depthRbo),e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_COMPONENT16,this.width,this.height),e.bindRenderbuffer(e.RENDERBUFFER,null)}this.depthRboAttached=!0},E.prototype.depthMask=function(e){e!==this._depthMask&&(this._depthMask=e,this.gl.depthMask(e))},E.prototype.renderLayer=function(e,t,n,r){n.isHidden(this.transform.zoom)||("background"===n.type||r.length)&&(this.id=n.id,b[n.type](e,t,n,r))},E.prototype.setDepthSublayer=function(e){var t=1-((1+this.currentLayer)*this.numSublayers+e)*this.depthEpsilon,n=t-1+this.depthRange;this.gl.depthRange(n,t)},E.prototype.translatePosMatrix=function(e,t,n,r,o){if(!n[0]&&!n[1])return e;var a=o?"map"===r?this.transform.angle:0:"viewport"===r?-this.transform.angle:0;if(a){var u=Math.sin(a),l=Math.cos(a);n=[n[0]*l-n[1]*u,n[0]*u+n[1]*l]}var c=[o?n[0]:s(t,n[0],this.transform.zoom),o?n[1]:s(t,n[1],this.transform.zoom),0],f=new Float32Array(16);return i.translate(f,e,c),f},E.prototype.saveTileTexture=function(e){var t=this._tileTextures[e.size[0]];t?t.push(e):this._tileTextures[e.size[0]]=[e]},E.prototype.getTileTexture=function(e){var t=this._tileTextures[e];return t&&t.length>0?t.pop():null},E.prototype.lineWidth=function(e){this.gl.lineWidth(u.clamp(e,this.lineWidthRange[0],this.lineWidthRange[1]))},E.prototype.showOverdrawInspector=function(e){if(e||this._showOverdrawInspector){this._showOverdrawInspector=e;var t=this.gl;e?(t.blendFunc(t.CONSTANT_COLOR,t.ONE),t.blendColor(1/8,1/8,1/8,0),t.clearColor(0,0,0,1),t.clear(t.COLOR_BUFFER_BIT)):t.blendFunc(t.ONE,t.ONE_MINUS_SRC_ALPHA)}},E.prototype._createProgramCached=function(e,t){this.cache=this.cache||{};var n=""+e+(t.cacheKey||"")+(this._showOverdrawInspector?"/overdraw":"");return this.cache[n]||(this.cache[n]=new y(this.gl,g[e],t,this._showOverdrawInspector)),this.cache[n]},E.prototype.useProgram=function(e,t){var n=this.gl,r=this._createProgramCached(e,t||this.emptyProgramConfiguration);return this.currentProgram!==r&&(n.useProgram(r.program),this.currentProgram=r),r},t.exports=E},{"../data/extent":58,"../data/pos_array":62,"../data/program_configuration":63,"../data/raster_bounds_array":64,"../gl/vertex_buffer":72,"../shaders":97,"../source/pixels_to_tile_units":104,"../source/source_cache":109,"../symbol/cross_tile_symbol_index":211,"../util/browser":245,"../util/util":266,"./draw_background":74,"./draw_circle":75,"./draw_debug":77,"./draw_fill":78,"./draw_fill_extrusion":79,"./draw_heatmap":80,"./draw_line":81,"./draw_raster":82,"./draw_symbol":83,"./program":91,"./render_texture":92,"./tile_mask":94,"./vertex_array_object":95,"@mapbox/gl-matrix":1}],90:[function(e,t,n){"use strict";var r=e("../source/pixels_to_tile_units");n.isPatternMissing=function(e,t){if(!e)return!1;var n=t.imageManager.getPattern(e.from),r=t.imageManager.getPattern(e.to);return!n||!r},n.prepare=function(e,t,n){var r=t.gl,i=t.imageManager.getPattern(e.from),o=t.imageManager.getPattern(e.to);r.uniform1i(n.uniforms.u_image,0),r.uniform2fv(n.uniforms.u_pattern_tl_a,i.tl),r.uniform2fv(n.uniforms.u_pattern_br_a,i.br),r.uniform2fv(n.uniforms.u_pattern_tl_b,o.tl),r.uniform2fv(n.uniforms.u_pattern_br_b,o.br);var a=t.imageManager.getPixelSize(),s=a.width,u=a.height;r.uniform2fv(n.uniforms.u_texsize,[s,u]),r.uniform1f(n.uniforms.u_mix,e.t),r.uniform2fv(n.uniforms.u_pattern_size_a,i.displaySize),r.uniform2fv(n.uniforms.u_pattern_size_b,o.displaySize),r.uniform1f(n.uniforms.u_scale_a,e.fromScale),r.uniform1f(n.uniforms.u_scale_b,e.toScale),r.activeTexture(r.TEXTURE0),t.imageManager.bind(r)},n.setTile=function(e,t,n){var i=t.gl;i.uniform1f(n.uniforms.u_tile_units_to_pixels,1/r(e,1,t.transform.tileZoom));var o=Math.pow(2,e.coord.z),a=e.tileSize*Math.pow(2,t.transform.tileZoom)/o,s=a*(e.coord.x+e.coord.w*o),u=a*e.coord.y;i.uniform2f(n.uniforms.u_pixel_coord_upper,s>>16,u>>16),i.uniform2f(n.uniforms.u_pixel_coord_lower,65535&s,65535&u)}},{"../source/pixels_to_tile_units":104}],91:[function(e,t,n){"use strict";var r=e("../util/browser"),i=e("../shaders"),o=e("../data/program_configuration"),a=(o.ProgramConfiguration,e("./vertex_array_object")),s=function(e,t,n,o){var a=this;this.gl=e,this.program=e.createProgram();var s=n.defines().concat("#define DEVICE_PIXEL_RATIO "+r.devicePixelRatio.toFixed(1));o&&s.push("#define OVERDRAW_INSPECTOR;");var u=s.concat(i.prelude.fragmentSource,t.fragmentSource).join("\n"),l=s.concat(i.prelude.vertexSource,t.vertexSource).join("\n"),c=e.createShader(e.FRAGMENT_SHADER);e.shaderSource(c,u),e.compileShader(c),e.attachShader(this.program,c);var f=e.createShader(e.VERTEX_SHADER);e.shaderSource(f,l),e.compileShader(f),e.attachShader(this.program,f);for(var h=n.interface?n.interface.layoutAttributes:[],p=0;p<h.length;p++)e.bindAttribLocation(a.program,p,h[p].name);e.linkProgram(this.program),this.numAttributes=e.getProgramParameter(this.program,e.ACTIVE_ATTRIBUTES),this.attributes={},this.uniforms={};for(var d=0;d<this.numAttributes;d++){var v=e.getActiveAttrib(a.program,d);v&&(a.attributes[v.name]=e.getAttribLocation(a.program,v.name))}for(var g=e.getProgramParameter(this.program,e.ACTIVE_UNIFORMS),y=0;y<g;y++){var m=e.getActiveUniform(a.program,y);m&&(a.uniforms[m.name]=e.getUniformLocation(a.program,m.name))}};s.prototype.draw=function(e,t,n,r,i,o,s,u,l){for(var c,f=this,h=(c={},c[e.LINES]=2,c[e.TRIANGLES]=3,c)[t],p=0,d=o.get();p<d.length;p+=1){var v=d[p],g=v.vaos||(v.vaos={});(g[n]||(g[n]=new a)).bind(e,f,r,i,s&&s.paintVertexBuffer,v.vertexOffset,u,l),e.drawElements(t,v.primitiveLength*h,e.UNSIGNED_SHORT,v.primitiveOffset*h*2)}},t.exports=s},{"../data/program_configuration":63,"../shaders":97,"../util/browser":245,"./vertex_array_object":95}],92:[function(e,t,n){"use strict";var r=function(e){var t=this.gl=e.gl,n=this.texture=t.createTexture();t.bindTexture(t.TEXTURE_2D,n),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,e.width,e.height,0,t.RGBA,t.UNSIGNED_BYTE,null),t.bindTexture(t.TEXTURE_2D,null);var r=this.fbo=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,r),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,n,0)};r.prototype.bindWithDepth=function(e){var t=this.gl;t.bindFramebuffer(t.FRAMEBUFFER,this.fbo),this.attachedRbo!==e&&(t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.RENDERBUFFER,e),this.attachedRbo=e)},r.prototype.unbind=function(){var e=this.gl;e.bindFramebuffer(e.FRAMEBUFFER,null)},t.exports=r},{}],93:[function(e,t,n){"use strict";var r=e("../util/window"),i=r.HTMLImageElement,o=r.HTMLCanvasElement,a=r.HTMLVideoElement,s=r.ImageData,u=function(e,t,n){this.gl=e;var r=t.width,i=t.height;this.size=[r,i],this.format=n,this.texture=e.createTexture(),this.update(t)};u.prototype.update=function(e){var t=e.width,n=e.height;this.size=[t,n];var r=this,u=r.gl;u.bindTexture(u.TEXTURE_2D,this.texture),u.pixelStorei(u.UNPACK_ALIGNMENT,1),this.format===u.RGBA&&u.pixelStorei(u.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),e instanceof i||e instanceof o||e instanceof a||e instanceof s?u.texImage2D(u.TEXTURE_2D,0,this.format,this.format,u.UNSIGNED_BYTE,e):u.texImage2D(u.TEXTURE_2D,0,this.format,t,n,0,this.format,u.UNSIGNED_BYTE,e.data)},u.prototype.bind=function(e,t,n){var r=this,i=r.gl;i.bindTexture(i.TEXTURE_2D,this.texture),e!==this.filter&&(i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,e),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,n||e),this.filter=e),t!==this.wrap&&(i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,t),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,t),this.wrap=t)},u.prototype.destroy=function(){this.gl.deleteTexture(this.texture),this.texture=null},t.exports=u},{"../util/window":247}],94:[function(e,t,n){"use strict";function r(e,t,n,o,a){for(var s=0;s<n.length;s++){var u=n[s];if(o.isLessThan(u.coord))break;if(t.id===u.coord.id)return;if(u.coord.isChildOf(t,u.sourceMaxZoom)){for(var l=t.children(1/0),c=0;c<l.length;c++)r(e,l[c],n.slice(s),o,a);return}}var f=t.z-e.z,h=new i(f,t.x-(e.x<<f),t.y-(e.y<<f)).id;a[h]=a[h]||!0}var i=e("../source/tile_coord");t.exports=function(e,t){for(var n=e.sort(function(e,t){return e.coord.isLessThan(t.coord)?-1:t.coord.isLessThan(e.coord)?1:0}),o=0;o<n.length;o++){var a={},s=n[o],u=n.slice(o+1);r(s.coord.wrapped(),s.coord,u,new i(0,0,0,s.coord.w+1),a),s.setMask(a,t)}}},{"../source/tile_coord":112}],95:[function(e,t,n){"use strict";var r=function(){this.boundProgram=null,this.boundVertexBuffer=null,this.boundVertexBuffer2=null,this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null};r.prototype.bind=function(e,t,n,r,i,o,a,s){void 0===e.extVertexArrayObject&&(e.extVertexArrayObject=e.getExtension("OES_vertex_array_object"));var u=!this.vao||this.boundProgram!==t||this.boundVertexBuffer!==n||this.boundVertexBuffer2!==i||this.boundIndexBuffer!==r||this.boundVertexOffset!==o||this.boundDynamicVertexBuffer!==a||this.boundDynamicVertexBuffer2!==s;!e.extVertexArrayObject||u?(this.freshBind(e,t,n,r,i,o,a,s),this.gl=e):(e.extVertexArrayObject.bindVertexArrayOES(this.vao),a&&a.bind(),r&&r.dynamicDraw&&r.bind(),s&&s.bind())},r.prototype.freshBind=function(e,t,n,r,i,o,a,s){var u,l=t.numAttributes;if(e.extVertexArrayObject)this.vao&&this.destroy(),this.vao=e.extVertexArrayObject.createVertexArrayOES(),e.extVertexArrayObject.bindVertexArrayOES(this.vao),u=0,this.boundProgram=t,this.boundVertexBuffer=n,this.boundVertexBuffer2=i,this.boundIndexBuffer=r,this.boundVertexOffset=o,this.boundDynamicVertexBuffer=a,this.boundDynamicVertexBuffer2=s;else{u=e.currentNumAttributes||0;for(var c=l;c<u;c++)e.disableVertexAttribArray(c)}n.enableAttributes(e,t),i&&i.enableAttributes(e,t),a&&a.enableAttributes(e,t),s&&s.enableAttributes(e,t),n.bind(),n.setVertexAttribPointers(e,t,o),i&&(i.bind(),i.setVertexAttribPointers(e,t,o)),a&&(a.bind(),a.setVertexAttribPointers(e,t,o)),r&&r.bind(),s&&(s.bind(),s.setVertexAttribPointers(e,t,o)),e.currentNumAttributes=l},r.prototype.destroy=function(){this.vao&&(this.gl.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)},t.exports=r},{}],96:[function(e,t,n){"use strict";var r=e("../util/util");n.packUint8ToFloat=function(e,t){return e=r.clamp(Math.floor(e),0,255),t=r.clamp(Math.floor(t),0,255),256*e+t}},{"../util/util":266}],97:[function(e,t,n){"use strict";var r={prelude:{fragmentSource:"#ifdef GL_ES\nprecision mediump float;\n#else\n\n#if !defined(lowp)\n#define lowp\n#endif\n\n#if !defined(mediump)\n#define mediump\n#endif\n\n#if !defined(highp)\n#define highp\n#endif\n\n#endif\n",vertexSource:"#ifdef GL_ES\nprecision highp float;\n#else\n\n#if !defined(lowp)\n#define lowp\n#endif\n\n#if !defined(mediump)\n#define mediump\n#endif\n\n#if !defined(highp)\n#define highp\n#endif\n\n#endif\n\n// Unpack a pair of values that have been packed into a single float.\n// The packed values are assumed to be 8-bit unsigned integers, and are\n// packed like so:\n// packedValue = floor(input[0]) * 256 + input[1],\nvec2 unpack_float(const float packedValue) {\n    int packedIntValue = int(packedValue);\n    int v0 = packedIntValue / 256;\n    return vec2(v0, packedIntValue - v0 * 256);\n}\n\nvec2 unpack_opacity(const float packedOpacity) {\n    int intOpacity = int(packedOpacity) / 2;\n    return vec2(float(intOpacity) / 127.0, mod(packedOpacity, 2.0));\n}\n\n// To minimize the number of attributes needed, we encode a 4-component\n// color into a pair of floats (i.e. a vec2) as follows:\n// [ floor(color.r * 255) * 256 + color.g * 255,\n//   floor(color.b * 255) * 256 + color.g * 255 ]\nvec4 decode_color(const vec2 encodedColor) {\n    return vec4(\n        unpack_float(encodedColor[0]) / 255.0,\n        unpack_float(encodedColor[1]) / 255.0\n    );\n}\n\n// Unpack a pair of paint values and interpolate between them.\nfloat unpack_mix_vec2(const vec2 packedValue, const float t) {\n    return mix(packedValue[0], packedValue[1], t);\n}\n\n// Unpack a pair of paint values and interpolate between them.\nvec4 unpack_mix_vec4(const vec4 packedColors, const float t) {\n    vec4 minColor = decode_color(vec2(packedColors[0], packedColors[1]));\n    vec4 maxColor = decode_color(vec2(packedColors[2], packedColors[3]));\n    return mix(minColor, maxColor, t);\n}\n\n// The offset depends on how many pixels are between the world origin and the edge of the tile:\n// vec2 offset = mod(pixel_coord, size)\n//\n// At high zoom levels there are a ton of pixels between the world origin and the edge of the tile.\n// The glsl spec only guarantees 16 bits of precision for highp floats. We need more than that.\n//\n// The pixel_coord is passed in as two 16 bit values:\n// pixel_coord_upper = floor(pixel_coord / 2^16)\n// pixel_coord_lower = mod(pixel_coord, 2^16)\n//\n// The offset is calculated in a series of steps that should preserve this precision:\nvec2 get_pattern_pos(const vec2 pixel_coord_upper, const vec2 pixel_coord_lower,\n    const vec2 pattern_size, const float tile_units_to_pixels, const vec2 pos) {\n\n    vec2 offset = mod(mod(mod(pixel_coord_upper, pattern_size) * 256.0, pattern_size) * 256.0 + pixel_coord_lower, pattern_size);\n    return (tile_units_to_pixels * pos + offset) / pattern_size;\n}\n"},circle:{fragmentSource:"#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\n\nvarying vec3 v_data;\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 color\n    #pragma mapbox: initialize mediump float radius\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize highp vec4 stroke_color\n    #pragma mapbox: initialize mediump float stroke_width\n    #pragma mapbox: initialize lowp float stroke_opacity\n\n    vec2 extrude = v_data.xy;\n    float extrude_length = length(extrude);\n\n    lowp float antialiasblur = v_data.z;\n    float antialiased_blur = -max(blur, antialiasblur);\n\n    float opacity_t = smoothstep(0.0, antialiased_blur, extrude_length - 1.0);\n\n    float color_t = stroke_width < 0.01 ? 0.0 : smoothstep(\n        antialiased_blur,\n        0.0,\n        extrude_length - radius / (radius + stroke_width)\n    );\n\n    gl_FragColor = opacity_t * mix(color * opacity, stroke_color * stroke_opacity, color_t);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\nuniform bool u_scale_with_map;\nuniform bool u_pitch_with_map;\nuniform vec2 u_extrude_scale;\nuniform highp float u_camera_to_center_distance;\n\nattribute vec2 a_pos;\n\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\n\nvarying vec3 v_data;\n\nvoid main(void) {\n    #pragma mapbox: initialize highp vec4 color\n    #pragma mapbox: initialize mediump float radius\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize highp vec4 stroke_color\n    #pragma mapbox: initialize mediump float stroke_width\n    #pragma mapbox: initialize lowp float stroke_opacity\n\n    // unencode the extrusion vector that we snuck into the a_pos vector\n    vec2 extrude = vec2(mod(a_pos, 2.0) * 2.0 - 1.0);\n\n    // multiply a_pos by 0.5, since we had it * 2 in order to sneak\n    // in extrusion data\n    vec2 circle_center = floor(a_pos * 0.5);\n    if (u_pitch_with_map) {\n        vec2 corner_position = circle_center;\n        if (u_scale_with_map) {\n            corner_position += extrude * (radius + stroke_width) * u_extrude_scale;\n        } else {\n            // Pitching the circle with the map effectively scales it with the map\n            // To counteract the effect for pitch-scale: viewport, we rescale the\n            // whole circle based on the pitch scaling effect at its central point\n            vec4 projected_center = u_matrix * vec4(circle_center, 0, 1);\n            corner_position += extrude * (radius + stroke_width) * u_extrude_scale * (projected_center.w / u_camera_to_center_distance);\n        }\n\n        gl_Position = u_matrix * vec4(corner_position, 0, 1);\n    } else {\n        gl_Position = u_matrix * vec4(circle_center, 0, 1);\n\n        if (u_scale_with_map) {\n            gl_Position.xy += extrude * (radius + stroke_width) * u_extrude_scale * u_camera_to_center_distance;\n        } else {\n            gl_Position.xy += extrude * (radius + stroke_width) * u_extrude_scale * gl_Position.w;\n        }\n    }\n\n    // This is a minimum blur distance that serves as a faux-antialiasing for\n    // the circle. since blur is a ratio of the circle's size and the intent is\n    // to keep the blur at roughly 1px, the two are inversely related.\n    lowp float antialiasblur = 1.0 / DEVICE_PIXEL_RATIO / (radius + stroke_width);\n\n    v_data = vec3(extrude.x, extrude.y, antialiasblur);\n}\n"},heatmap:{fragmentSource:"#pragma mapbox: define highp float weight\n\nuniform highp float u_intensity;\nuniform highp float u_radius;\nvarying vec2 v_extrude;\n\n// Gaussian kernel coefficient: 1 / sqrt(2 * PI)\n#define GAUSS_COEF 0.3989422804014327\n\nvoid main() {\n    #pragma mapbox: initialize highp float weight\n\n    // Kernel density estimation with a Gaussian kernel of size 5x5\n    float d = -0.5 * 3.0 * 3.0 * dot(v_extrude, v_extrude);\n    float val = weight * u_intensity * GAUSS_COEF * exp(d);\n\n    gl_FragColor = vec4(val, 1.0, 1.0, 1.0);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"#pragma mapbox: define highp float weight\n\nuniform mat4 u_matrix;\nuniform float u_extrude_scale;\nuniform float u_radius;\nuniform float u_opacity;\nuniform float u_intensity;\n\nattribute vec2 a_pos;\n\nvarying vec2 v_extrude;\n\n// Effective \"0\" in the kernel density texture to adjust the kernel size to;\n// this empirically chosen number minimizes artifacts on overlapping kernels\n// for typical heatmap cases (assuming clustered source)\nconst highp float ZERO = 1.0 / 255.0 / 16.0;\n\n// Gaussian kernel coefficient: 1 / sqrt(2 * PI)\n#define GAUSS_COEF 0.3989422804014327\n\nvoid main(void) {\n    #pragma mapbox: initialize highp float weight\n\n    // unencode the extrusion vector that we snuck into the a_pos vector\n    vec2 unscaled_extrude = vec2(mod(a_pos, 2.0) * 2.0 - 1.0);\n\n    // This 'extrude' comes in ranging from [-1, -1], to [1, 1].  We'll use\n    // it to produce the vertices of a square mesh framing the point feature\n    // we're adding to the kernel density texture.  We'll also pass it as\n    // a varying, so that the fragment shader can determine the distance of\n    // each fragment from the point feature.\n    // Before we do so, we need to scale it up sufficiently so that the\n    // kernel falls effectively to zero at the edge of the mesh.\n    // That is, we want to know S such that\n    // weight * u_intensity * GAUSS_COEF * exp(-0.5 * 3.0^2 * S^2) == ZERO\n    // Which solves to:\n    // S = sqrt(-2.0 * log(ZERO / (weight * u_intensity * GAUSS_COEF))) / 3.0\n    float S = sqrt(-2.0 * log(ZERO / weight / u_intensity / GAUSS_COEF)) / 3.0;\n\n    // Pass the varying in units of u_radius\n    v_extrude = S * unscaled_extrude;\n\n    // Scale by u_radius and the zoom-based scale factor to produce actual\n    // mesh position\n    vec2 extrude = v_extrude * u_radius * u_extrude_scale;\n\n    // multiply a_pos by 0.5, since we had it * 2 in order to sneak\n    // in extrusion data\n    vec4 pos = vec4(floor(a_pos * 0.5) + extrude, 0, 1);\n\n    gl_Position = u_matrix * pos;\n}\n"},heatmapTexture:{fragmentSource:"uniform sampler2D u_image;\nuniform sampler2D u_color_ramp;\nuniform float u_opacity;\nvarying vec2 v_pos;\n\nvoid main() {\n    float t = texture2D(u_image, v_pos).r;\n    vec4 color = texture2D(u_color_ramp, vec2(t, 0.5));\n    gl_FragColor = color * u_opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(0.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\nuniform vec2 u_world;\nattribute vec2 a_pos;\nvarying vec2 v_pos;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos * u_world, 0, 1);\n\n    v_pos.x = a_pos.x;\n    v_pos.y = 1.0 - a_pos.y;\n}\n"},collisionBox:{fragmentSource:"\nvarying float v_placed;\nvarying float v_notUsed;\n\nvoid main() {\n\n    float alpha = 0.5;\n\n    // Red = collision, hide label\n    gl_FragColor = vec4(1.0, 0.0, 0.0, 1.0) * alpha;\n\n    // Blue = no collision, label is showing\n    if (v_placed > 0.5) {\n        gl_FragColor = vec4(0.0, 0.0, 1.0, 0.5) * alpha;\n    }\n\n    if (v_notUsed > 0.5) {\n        // This box not used, fade it out\n        gl_FragColor *= .1;\n    }\n}",vertexSource:"attribute vec2 a_pos;\nattribute vec2 a_anchor_pos;\nattribute vec2 a_extrude;\nattribute vec2 a_placed;\n\nuniform mat4 u_matrix;\nuniform vec2 u_extrude_scale;\nuniform float u_camera_to_center_distance;\n\nvarying float v_placed;\nvarying float v_notUsed;\n\nvoid main() {\n    vec4 projectedPoint = u_matrix * vec4(a_anchor_pos, 0, 1);\n    highp float camera_to_anchor_distance = projectedPoint.w;\n    highp float collision_perspective_ratio = 0.5 + 0.5 * (u_camera_to_center_distance / camera_to_anchor_distance);\n\n    gl_Position = u_matrix * vec4(a_pos, 0.0, 1.0);\n    gl_Position.xy += a_extrude * u_extrude_scale * gl_Position.w * collision_perspective_ratio;\n\n    v_placed = a_placed.x;\n    v_notUsed = a_placed.y;\n}\n"},collisionCircle:{fragmentSource:"\nvarying float v_placed;\nvarying float v_notUsed;\nvarying float v_radius;\nvarying vec2 v_extrude;\nvarying vec2 v_extrude_scale;\n\nvoid main() {\n    float alpha = 0.5;\n\n    // Red = collision, hide label\n    vec4 color = vec4(1.0, 0.0, 0.0, 1.0) * alpha;\n\n    // Blue = no collision, label is showing\n    if (v_placed > 0.5) {\n        color = vec4(0.0, 0.0, 1.0, 0.5) * alpha;\n    }\n\n    if (v_notUsed > 0.5) {\n        // This box not used, fade it out\n        color *= .2;\n    }\n\n    float extrude_scale_length = length(v_extrude_scale);\n    float extrude_length = length(v_extrude) * extrude_scale_length;\n    float stroke_width = 3.0;\n    float radius = v_radius * extrude_scale_length;\n\n    float distance_to_edge = abs(extrude_length - radius);\n    float opacity_t = smoothstep(-stroke_width, 0.0, -distance_to_edge);\n\n    gl_FragColor = opacity_t * color;\n}\n",vertexSource:"attribute vec2 a_pos;\nattribute vec2 a_anchor_pos;\nattribute vec2 a_extrude;\nattribute vec2 a_placed;\n\nuniform mat4 u_matrix;\nuniform vec2 u_extrude_scale;\nuniform float u_camera_to_center_distance;\n\nvarying float v_placed;\nvarying float v_notUsed;\nvarying float v_radius;\n\nvarying vec2 v_extrude;\nvarying vec2 v_extrude_scale;\n\nvoid main() {\n    vec4 projectedPoint = u_matrix * vec4(a_anchor_pos, 0, 1);\n    highp float camera_to_anchor_distance = projectedPoint.w;\n    highp float collision_perspective_ratio = 0.5 + 0.5 * (camera_to_anchor_distance / u_camera_to_center_distance);\n\n    gl_Position = u_matrix * vec4(a_pos, 0.0, 1.0);\n\n    highp float padding_factor = 1.2; // Pad the vertices slightly to make room for anti-alias blur\n    gl_Position.xy += a_extrude * u_extrude_scale * padding_factor * gl_Position.w / collision_perspective_ratio;\n\n    v_placed = a_placed.x;\n    v_notUsed = a_placed.y;\n    v_radius = abs(a_extrude.y); // We don't pitch the circles, so both units of the extrusion vector are equal in magnitude to the radius\n\n    v_extrude = a_extrude * padding_factor;\n    v_extrude_scale = u_extrude_scale * u_camera_to_center_distance / collision_perspective_ratio;\n}\n"},debug:{fragmentSource:"uniform highp vec4 u_color;\n\nvoid main() {\n    gl_FragColor = u_color;\n}\n",vertexSource:"attribute vec2 a_pos;\n\nuniform mat4 u_matrix;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n}\n"},fill:{fragmentSource:"#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 color\n    #pragma mapbox: initialize lowp float opacity\n\n    gl_FragColor = color * opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"attribute vec2 a_pos;\n\nuniform mat4 u_matrix;\n\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 color\n    #pragma mapbox: initialize lowp float opacity\n\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n}\n"},fillOutline:{fragmentSource:"#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\n\nvarying vec2 v_pos;\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 outline_color\n    #pragma mapbox: initialize lowp float opacity\n\n    float dist = length(v_pos - gl_FragCoord.xy);\n    float alpha = 1.0 - smoothstep(0.0, 1.0, dist);\n    gl_FragColor = outline_color * (alpha * opacity);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"attribute vec2 a_pos;\n\nuniform mat4 u_matrix;\nuniform vec2 u_world;\n\nvarying vec2 v_pos;\n\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 outline_color\n    #pragma mapbox: initialize lowp float opacity\n\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n    v_pos = (gl_Position.xy / gl_Position.w + 1.0) / 2.0 * u_world;\n}\n"},fillOutlinePattern:{fragmentSource:"uniform vec2 u_pattern_tl_a;\nuniform vec2 u_pattern_br_a;\nuniform vec2 u_pattern_tl_b;\nuniform vec2 u_pattern_br_b;\nuniform vec2 u_texsize;\nuniform float u_mix;\n\nuniform sampler2D u_image;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\nvarying vec2 v_pos;\n\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize lowp float opacity\n\n    vec2 imagecoord = mod(v_pos_a, 1.0);\n    vec2 pos = mix(u_pattern_tl_a / u_texsize, u_pattern_br_a / u_texsize, imagecoord);\n    vec4 color1 = texture2D(u_image, pos);\n\n    vec2 imagecoord_b = mod(v_pos_b, 1.0);\n    vec2 pos2 = mix(u_pattern_tl_b / u_texsize, u_pattern_br_b / u_texsize, imagecoord_b);\n    vec4 color2 = texture2D(u_image, pos2);\n\n    // find distance to outline for alpha interpolation\n\n    float dist = length(v_pos - gl_FragCoord.xy);\n    float alpha = 1.0 - smoothstep(0.0, 1.0, dist);\n\n\n    gl_FragColor = mix(color1, color2, u_mix) * alpha * opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\nuniform vec2 u_world;\nuniform vec2 u_pattern_size_a;\nuniform vec2 u_pattern_size_b;\nuniform vec2 u_pixel_coord_upper;\nuniform vec2 u_pixel_coord_lower;\nuniform float u_scale_a;\nuniform float u_scale_b;\nuniform float u_tile_units_to_pixels;\n\nattribute vec2 a_pos;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\nvarying vec2 v_pos;\n\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize lowp float opacity\n\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n\n    v_pos_a = get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, u_scale_a * u_pattern_size_a, u_tile_units_to_pixels, a_pos);\n    v_pos_b = get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, u_scale_b * u_pattern_size_b, u_tile_units_to_pixels, a_pos);\n\n    v_pos = (gl_Position.xy / gl_Position.w + 1.0) / 2.0 * u_world;\n}\n"},fillPattern:{fragmentSource:"uniform vec2 u_pattern_tl_a;\nuniform vec2 u_pattern_br_a;\nuniform vec2 u_pattern_tl_b;\nuniform vec2 u_pattern_br_b;\nuniform vec2 u_texsize;\nuniform float u_mix;\n\nuniform sampler2D u_image;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\n\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize lowp float opacity\n\n    vec2 imagecoord = mod(v_pos_a, 1.0);\n    vec2 pos = mix(u_pattern_tl_a / u_texsize, u_pattern_br_a / u_texsize, imagecoord);\n    vec4 color1 = texture2D(u_image, pos);\n\n    vec2 imagecoord_b = mod(v_pos_b, 1.0);\n    vec2 pos2 = mix(u_pattern_tl_b / u_texsize, u_pattern_br_b / u_texsize, imagecoord_b);\n    vec4 color2 = texture2D(u_image, pos2);\n\n    gl_FragColor = mix(color1, color2, u_mix) * opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\nuniform vec2 u_pattern_size_a;\nuniform vec2 u_pattern_size_b;\nuniform vec2 u_pixel_coord_upper;\nuniform vec2 u_pixel_coord_lower;\nuniform float u_scale_a;\nuniform float u_scale_b;\nuniform float u_tile_units_to_pixels;\n\nattribute vec2 a_pos;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\n\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize lowp float opacity\n\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n\n    v_pos_a = get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, u_scale_a * u_pattern_size_a, u_tile_units_to_pixels, a_pos);\n    v_pos_b = get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, u_scale_b * u_pattern_size_b, u_tile_units_to_pixels, a_pos);\n}\n"},fillExtrusion:{fragmentSource:"varying vec4 v_color;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define highp vec4 color\n\nvoid main() {\n    #pragma mapbox: initialize lowp float base\n    #pragma mapbox: initialize lowp float height\n    #pragma mapbox: initialize highp vec4 color\n\n    gl_FragColor = v_color;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\nuniform vec3 u_lightcolor;\nuniform lowp vec3 u_lightpos;\nuniform lowp float u_lightintensity;\n\nattribute vec2 a_pos;\nattribute vec3 a_normal;\nattribute float a_edgedistance;\n\nvarying vec4 v_color;\n\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n\n#pragma mapbox: define highp vec4 color\n\nvoid main() {\n    #pragma mapbox: initialize lowp float base\n    #pragma mapbox: initialize lowp float height\n    #pragma mapbox: initialize highp vec4 color\n\n    base = max(0.0, base);\n    height = max(0.0, height);\n\n    float ed = a_edgedistance; // use each attrib in order to not trip a VAO assert\n    float t = mod(a_normal.x, 2.0);\n\n    gl_Position = u_matrix * vec4(a_pos, t > 0.0 ? height : base, 1);\n\n    // Relative luminance (how dark/bright is the surface color?)\n    float colorvalue = color.r * 0.2126 + color.g * 0.7152 + color.b * 0.0722;\n\n    v_color = vec4(0.0, 0.0, 0.0, 1.0);\n\n    // Add slight ambient lighting so no extrusions are totally black\n    vec4 ambientlight = vec4(0.03, 0.03, 0.03, 1.0);\n    color += ambientlight;\n\n    // Calculate cos(theta), where theta is the angle between surface normal and diffuse light ray\n    float directional = clamp(dot(a_normal / 16384.0, u_lightpos), 0.0, 1.0);\n\n    // Adjust directional so that\n    // the range of values for highlight/shading is narrower\n    // with lower light intensity\n    // and with lighter/brighter surface colors\n    directional = mix((1.0 - u_lightintensity), max((1.0 - colorvalue + u_lightintensity), 1.0), directional);\n\n    // Add gradient along z axis of side surfaces\n    if (a_normal.y != 0.0) {\n        directional *= clamp((t + base) * pow(height / 150.0, 0.5), mix(0.7, 0.98, 1.0 - u_lightintensity), 1.0);\n    }\n\n    // Assign final color based on surface + ambient light color, diffuse light directional, and light color\n    // with lower bounds adjusted to hue of light\n    // so that shading is tinted with the complementary (opposite) color to the light color\n    v_color.r += clamp(color.r * directional * u_lightcolor.r, mix(0.0, 0.3, 1.0 - u_lightcolor.r), 1.0);\n    v_color.g += clamp(color.g * directional * u_lightcolor.g, mix(0.0, 0.3, 1.0 - u_lightcolor.g), 1.0);\n    v_color.b += clamp(color.b * directional * u_lightcolor.b, mix(0.0, 0.3, 1.0 - u_lightcolor.b), 1.0);\n}\n"},fillExtrusionPattern:{fragmentSource:"uniform vec2 u_pattern_tl_a;\nuniform vec2 u_pattern_br_a;\nuniform vec2 u_pattern_tl_b;\nuniform vec2 u_pattern_br_b;\nuniform vec2 u_texsize;\nuniform float u_mix;\n\nuniform sampler2D u_image;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\nvarying vec4 v_lighting;\n\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n\nvoid main() {\n    #pragma mapbox: initialize lowp float base\n    #pragma mapbox: initialize lowp float height\n\n    vec2 imagecoord = mod(v_pos_a, 1.0);\n    vec2 pos = mix(u_pattern_tl_a / u_texsize, u_pattern_br_a / u_texsize, imagecoord);\n    vec4 color1 = texture2D(u_image, pos);\n\n    vec2 imagecoord_b = mod(v_pos_b, 1.0);\n    vec2 pos2 = mix(u_pattern_tl_b / u_texsize, u_pattern_br_b / u_texsize, imagecoord_b);\n    vec4 color2 = texture2D(u_image, pos2);\n\n    vec4 mixedColor = mix(color1, color2, u_mix);\n\n    gl_FragColor = mixedColor * v_lighting;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\nuniform vec2 u_pattern_size_a;\nuniform vec2 u_pattern_size_b;\nuniform vec2 u_pixel_coord_upper;\nuniform vec2 u_pixel_coord_lower;\nuniform float u_scale_a;\nuniform float u_scale_b;\nuniform float u_tile_units_to_pixels;\nuniform float u_height_factor;\n\nuniform vec3 u_lightcolor;\nuniform lowp vec3 u_lightpos;\nuniform lowp float u_lightintensity;\n\nattribute vec2 a_pos;\nattribute vec3 a_normal;\nattribute float a_edgedistance;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\nvarying vec4 v_lighting;\nvarying float v_directional;\n\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n\nvoid main() {\n    #pragma mapbox: initialize lowp float base\n    #pragma mapbox: initialize lowp float height\n\n    base = max(0.0, base);\n    height = max(0.0, height);\n\n    float t = mod(a_normal.x, 2.0);\n    float z = t > 0.0 ? height : base;\n\n    gl_Position = u_matrix * vec4(a_pos, z, 1);\n\n    vec2 pos = a_normal.x == 1.0 && a_normal.y == 0.0 && a_normal.z == 16384.0\n        ? a_pos // extrusion top\n        : vec2(a_edgedistance, z * u_height_factor); // extrusion side\n\n    v_pos_a = get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, u_scale_a * u_pattern_size_a, u_tile_units_to_pixels, pos);\n    v_pos_b = get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, u_scale_b * u_pattern_size_b, u_tile_units_to_pixels, pos);\n\n    v_lighting = vec4(0.0, 0.0, 0.0, 1.0);\n    float directional = clamp(dot(a_normal / 16383.0, u_lightpos), 0.0, 1.0);\n    directional = mix((1.0 - u_lightintensity), max((0.5 + u_lightintensity), 1.0), directional);\n\n    if (a_normal.y != 0.0) {\n        directional *= clamp((t + base) * pow(height / 150.0, 0.5), mix(0.7, 0.98, 1.0 - u_lightintensity), 1.0);\n    }\n\n    v_lighting.rgb += clamp(directional * u_lightcolor, mix(vec3(0.0), vec3(0.3), 1.0 - u_lightcolor), vec3(1.0));\n}\n"},extrusionTexture:{fragmentSource:"uniform sampler2D u_image;\nuniform float u_opacity;\nvarying vec2 v_pos;\n\nvoid main() {\n    gl_FragColor = texture2D(u_image, v_pos) * u_opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(0.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\nuniform vec2 u_world;\nattribute vec2 a_pos;\nvarying vec2 v_pos;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos * u_world, 0, 1);\n\n    v_pos.x = a_pos.x;\n    v_pos.y = 1.0 - a_pos.y;\n}\n"},line:{fragmentSource:"#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n\nvarying vec2 v_width2;\nvarying vec2 v_normal;\nvarying float v_gamma_scale;\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 color\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n\n    // Calculate the distance of the pixel from the line in pixels.\n    float dist = length(v_normal) * v_width2.s;\n\n    // Calculate the antialiasing fade factor. This is either when fading in\n    // the line in case of an offset line (v_width2.t) or when fading out\n    // (v_width2.s)\n    float blur2 = (blur + 1.0 / DEVICE_PIXEL_RATIO) * v_gamma_scale;\n    float alpha = clamp(min(dist - (v_width2.t - blur2), v_width2.s - dist) / blur2, 0.0, 1.0);\n\n    gl_FragColor = color * (alpha * opacity);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"\n\n// the distance over which the line edge fades out.\n// Retina devices need a smaller distance to avoid aliasing.\n#define ANTIALIASING 1.0 / DEVICE_PIXEL_RATIO / 2.0\n\n// floor(127 / 2) == 63.0\n// the maximum allowed miter limit is 2.0 at the moment. the extrude normal is\n// stored in a byte (-128..127). we scale regular normals up to length 63, but\n// there are also \"special\" normals that have a bigger length (of up to 126 in\n// this case).\n// #define scale 63.0\n#define scale 0.015873016\n\nattribute vec4 a_pos_normal;\nattribute vec4 a_data;\n\nuniform mat4 u_matrix;\nuniform mediump float u_ratio;\nuniform vec2 u_gl_units_to_pixels;\n\nvarying vec2 v_normal;\nvarying vec2 v_width2;\nvarying float v_gamma_scale;\n\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 color\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize mediump float gapwidth\n    #pragma mapbox: initialize lowp float offset\n    #pragma mapbox: initialize mediump float width\n\n    vec2 a_extrude = a_data.xy - 128.0;\n    float a_direction = mod(a_data.z, 4.0) - 1.0;\n\n    vec2 pos = a_pos_normal.xy;\n\n    // x is 1 if it's a round cap, 0 otherwise\n    // y is 1 if the normal points up, and -1 if it points down\n    mediump vec2 normal = a_pos_normal.zw;\n    v_normal = normal;\n\n    // these transformations used to be applied in the JS and native code bases.\n    // moved them into the shader for clarity and simplicity.\n    gapwidth = gapwidth / 2.0;\n    float halfwidth = width / 2.0;\n    offset = -1.0 * offset;\n\n    float inset = gapwidth + (gapwidth > 0.0 ? ANTIALIASING : 0.0);\n    float outset = gapwidth + halfwidth * (gapwidth > 0.0 ? 2.0 : 1.0) + ANTIALIASING;\n\n    // Scale the extrusion vector down to a normal and then up by the line width\n    // of this vertex.\n    mediump vec2 dist = outset * a_extrude * scale;\n\n    // Calculate the offset when drawing a line that is to the side of the actual line.\n    // We do this by creating a vector that points towards the extrude, but rotate\n    // it when we're drawing round end points (a_direction = -1 or 1) since their\n    // extrude vector points in another direction.\n    mediump float u = 0.5 * a_direction;\n    mediump float t = 1.0 - abs(u);\n    mediump vec2 offset2 = offset * a_extrude * scale * normal.y * mat2(t, -u, u, t);\n\n    vec4 projected_extrude = u_matrix * vec4(dist / u_ratio, 0.0, 0.0);\n    gl_Position = u_matrix * vec4(pos + offset2 / u_ratio, 0.0, 1.0) + projected_extrude;\n\n    // calculate how much the perspective view squishes or stretches the extrude\n    float extrude_length_without_perspective = length(dist);\n    float extrude_length_with_perspective = length(projected_extrude.xy / gl_Position.w * u_gl_units_to_pixels);\n    v_gamma_scale = extrude_length_without_perspective / extrude_length_with_perspective;\n\n    v_width2 = vec2(outset, inset);\n}\n"},linePattern:{fragmentSource:"uniform vec2 u_pattern_size_a;\nuniform vec2 u_pattern_size_b;\nuniform vec2 u_pattern_tl_a;\nuniform vec2 u_pattern_br_a;\nuniform vec2 u_pattern_tl_b;\nuniform vec2 u_pattern_br_b;\nuniform vec2 u_texsize;\nuniform float u_fade;\n\nuniform sampler2D u_image;\n\nvarying vec2 v_normal;\nvarying vec2 v_width2;\nvarying float v_linesofar;\nvarying float v_gamma_scale;\n\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n\n    // Calculate the distance of the pixel from the line in pixels.\n    float dist = length(v_normal) * v_width2.s;\n\n    // Calculate the antialiasing fade factor. This is either when fading in\n    // the line in case of an offset line (v_width2.t) or when fading out\n    // (v_width2.s)\n    float blur2 = (blur + 1.0 / DEVICE_PIXEL_RATIO) * v_gamma_scale;\n    float alpha = clamp(min(dist - (v_width2.t - blur2), v_width2.s - dist) / blur2, 0.0, 1.0);\n\n    float x_a = mod(v_linesofar / u_pattern_size_a.x, 1.0);\n    float x_b = mod(v_linesofar / u_pattern_size_b.x, 1.0);\n    float y_a = 0.5 + (v_normal.y * v_width2.s / u_pattern_size_a.y);\n    float y_b = 0.5 + (v_normal.y * v_width2.s / u_pattern_size_b.y);\n    vec2 pos_a = mix(u_pattern_tl_a / u_texsize, u_pattern_br_a / u_texsize, vec2(x_a, y_a));\n    vec2 pos_b = mix(u_pattern_tl_b / u_texsize, u_pattern_br_b / u_texsize, vec2(x_b, y_b));\n\n    vec4 color = mix(texture2D(u_image, pos_a), texture2D(u_image, pos_b), u_fade);\n\n    gl_FragColor = color * alpha * opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"// floor(127 / 2) == 63.0\n// the maximum allowed miter limit is 2.0 at the moment. the extrude normal is\n// stored in a byte (-128..127). we scale regular normals up to length 63, but\n// there are also \"special\" normals that have a bigger length (of up to 126 in\n// this case).\n// #define scale 63.0\n#define scale 0.015873016\n\n// We scale the distance before adding it to the buffers so that we can store\n// long distances for long segments. Use this value to unscale the distance.\n#define LINE_DISTANCE_SCALE 2.0\n\n// the distance over which the line edge fades out.\n// Retina devices need a smaller distance to avoid aliasing.\n#define ANTIALIASING 1.0 / DEVICE_PIXEL_RATIO / 2.0\n\nattribute vec4 a_pos_normal;\nattribute vec4 a_data;\n\nuniform mat4 u_matrix;\nuniform mediump float u_ratio;\nuniform vec2 u_gl_units_to_pixels;\n\nvarying vec2 v_normal;\nvarying vec2 v_width2;\nvarying float v_linesofar;\nvarying float v_gamma_scale;\n\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define mediump float width\n\nvoid main() {\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize lowp float offset\n    #pragma mapbox: initialize mediump float gapwidth\n    #pragma mapbox: initialize mediump float width\n\n    vec2 a_extrude = a_data.xy - 128.0;\n    float a_direction = mod(a_data.z, 4.0) - 1.0;\n    float a_linesofar = (floor(a_data.z / 4.0) + a_data.w * 64.0) * LINE_DISTANCE_SCALE;\n\n    vec2 pos = a_pos_normal.xy;\n\n    // x is 1 if it's a round cap, 0 otherwise\n    // y is 1 if the normal points up, and -1 if it points down\n    mediump vec2 normal = a_pos_normal.zw;\n    v_normal = normal;\n\n    // these transformations used to be applied in the JS and native code bases.\n    // moved them into the shader for clarity and simplicity.\n    gapwidth = gapwidth / 2.0;\n    float halfwidth = width / 2.0;\n    offset = -1.0 * offset;\n\n    float inset = gapwidth + (gapwidth > 0.0 ? ANTIALIASING : 0.0);\n    float outset = gapwidth + halfwidth * (gapwidth > 0.0 ? 2.0 : 1.0) + ANTIALIASING;\n\n    // Scale the extrusion vector down to a normal and then up by the line width\n    // of this vertex.\n    mediump vec2 dist = outset * a_extrude * scale;\n\n    // Calculate the offset when drawing a line that is to the side of the actual line.\n    // We do this by creating a vector that points towards the extrude, but rotate\n    // it when we're drawing round end points (a_direction = -1 or 1) since their\n    // extrude vector points in another direction.\n    mediump float u = 0.5 * a_direction;\n    mediump float t = 1.0 - abs(u);\n    mediump vec2 offset2 = offset * a_extrude * scale * normal.y * mat2(t, -u, u, t);\n\n    vec4 projected_extrude = u_matrix * vec4(dist / u_ratio, 0.0, 0.0);\n    gl_Position = u_matrix * vec4(pos + offset2 / u_ratio, 0.0, 1.0) + projected_extrude;\n\n    // calculate how much the perspective view squishes or stretches the extrude\n    float extrude_length_without_perspective = length(dist);\n    float extrude_length_with_perspective = length(projected_extrude.xy / gl_Position.w * u_gl_units_to_pixels);\n    v_gamma_scale = extrude_length_without_perspective / extrude_length_with_perspective;\n\n    v_linesofar = a_linesofar;\n    v_width2 = vec2(outset, inset);\n}\n"},lineSDF:{fragmentSource:"\nuniform sampler2D u_image;\nuniform float u_sdfgamma;\nuniform float u_mix;\n\nvarying vec2 v_normal;\nvarying vec2 v_width2;\nvarying vec2 v_tex_a;\nvarying vec2 v_tex_b;\nvarying float v_gamma_scale;\n\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 color\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize mediump float width\n    #pragma mapbox: initialize lowp float floorwidth\n\n    // Calculate the distance of the pixel from the line in pixels.\n    float dist = length(v_normal) * v_width2.s;\n\n    // Calculate the antialiasing fade factor. This is either when fading in\n    // the line in case of an offset line (v_width2.t) or when fading out\n    // (v_width2.s)\n    float blur2 = (blur + 1.0 / DEVICE_PIXEL_RATIO) * v_gamma_scale;\n    float alpha = clamp(min(dist - (v_width2.t - blur2), v_width2.s - dist) / blur2, 0.0, 1.0);\n\n    float sdfdist_a = texture2D(u_image, v_tex_a).a;\n    float sdfdist_b = texture2D(u_image, v_tex_b).a;\n    float sdfdist = mix(sdfdist_a, sdfdist_b, u_mix);\n    alpha *= smoothstep(0.5 - u_sdfgamma / floorwidth, 0.5 + u_sdfgamma / floorwidth, sdfdist);\n\n    gl_FragColor = color * (alpha * opacity);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"// floor(127 / 2) == 63.0\n// the maximum allowed miter limit is 2.0 at the moment. the extrude normal is\n// stored in a byte (-128..127). we scale regular normals up to length 63, but\n// there are also \"special\" normals that have a bigger length (of up to 126 in\n// this case).\n// #define scale 63.0\n#define scale 0.015873016\n\n// We scale the distance before adding it to the buffers so that we can store\n// long distances for long segments. Use this value to unscale the distance.\n#define LINE_DISTANCE_SCALE 2.0\n\n// the distance over which the line edge fades out.\n// Retina devices need a smaller distance to avoid aliasing.\n#define ANTIALIASING 1.0 / DEVICE_PIXEL_RATIO / 2.0\n\nattribute vec4 a_pos_normal;\nattribute vec4 a_data;\n\nuniform mat4 u_matrix;\nuniform mediump float u_ratio;\nuniform vec2 u_patternscale_a;\nuniform float u_tex_y_a;\nuniform vec2 u_patternscale_b;\nuniform float u_tex_y_b;\nuniform vec2 u_gl_units_to_pixels;\n\nvarying vec2 v_normal;\nvarying vec2 v_width2;\nvarying vec2 v_tex_a;\nvarying vec2 v_tex_b;\nvarying float v_gamma_scale;\n\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 color\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize mediump float gapwidth\n    #pragma mapbox: initialize lowp float offset\n    #pragma mapbox: initialize mediump float width\n    #pragma mapbox: initialize lowp float floorwidth\n\n    vec2 a_extrude = a_data.xy - 128.0;\n    float a_direction = mod(a_data.z, 4.0) - 1.0;\n    float a_linesofar = (floor(a_data.z / 4.0) + a_data.w * 64.0) * LINE_DISTANCE_SCALE;\n\n    vec2 pos = a_pos_normal.xy;\n\n    // x is 1 if it's a round cap, 0 otherwise\n    // y is 1 if the normal points up, and -1 if it points down\n    mediump vec2 normal = a_pos_normal.zw;\n    v_normal = normal;\n\n    // these transformations used to be applied in the JS and native code bases.\n    // moved them into the shader for clarity and simplicity.\n    gapwidth = gapwidth / 2.0;\n    float halfwidth = width / 2.0;\n    offset = -1.0 * offset;\n\n    float inset = gapwidth + (gapwidth > 0.0 ? ANTIALIASING : 0.0);\n    float outset = gapwidth + halfwidth * (gapwidth > 0.0 ? 2.0 : 1.0) + ANTIALIASING;\n\n    // Scale the extrusion vector down to a normal and then up by the line width\n    // of this vertex.\n    mediump vec2 dist =outset * a_extrude * scale;\n\n    // Calculate the offset when drawing a line that is to the side of the actual line.\n    // We do this by creating a vector that points towards the extrude, but rotate\n    // it when we're drawing round end points (a_direction = -1 or 1) since their\n    // extrude vector points in another direction.\n    mediump float u = 0.5 * a_direction;\n    mediump float t = 1.0 - abs(u);\n    mediump vec2 offset2 = offset * a_extrude * scale * normal.y * mat2(t, -u, u, t);\n\n    vec4 projected_extrude = u_matrix * vec4(dist / u_ratio, 0.0, 0.0);\n    gl_Position = u_matrix * vec4(pos + offset2 / u_ratio, 0.0, 1.0) + projected_extrude;\n\n    // calculate how much the perspective view squishes or stretches the extrude\n    float extrude_length_without_perspective = length(dist);\n    float extrude_length_with_perspective = length(projected_extrude.xy / gl_Position.w * u_gl_units_to_pixels);\n    v_gamma_scale = extrude_length_without_perspective / extrude_length_with_perspective;\n\n    v_tex_a = vec2(a_linesofar * u_patternscale_a.x / floorwidth, normal.y * u_patternscale_a.y + u_tex_y_a);\n    v_tex_b = vec2(a_linesofar * u_patternscale_b.x / floorwidth, normal.y * u_patternscale_b.y + u_tex_y_b);\n\n    v_width2 = vec2(outset, inset);\n}\n"},raster:{fragmentSource:"uniform float u_fade_t;\nuniform float u_opacity;\nuniform sampler2D u_image0;\nuniform sampler2D u_image1;\nvarying vec2 v_pos0;\nvarying vec2 v_pos1;\n\nuniform float u_brightness_low;\nuniform float u_brightness_high;\n\nuniform float u_saturation_factor;\nuniform float u_contrast_factor;\nuniform vec3 u_spin_weights;\n\nvoid main() {\n\n    // read and cross-fade colors from the main and parent tiles\n    vec4 color0 = texture2D(u_image0, v_pos0);\n    vec4 color1 = texture2D(u_image1, v_pos1);\n    if (color0.a > 0.0) {\n        color0.rgb = color0.rgb / color0.a;\n    }\n    if (color1.a > 0.0) {\n        color1.rgb = color1.rgb / color1.a;\n    }\n    vec4 color = mix(color0, color1, u_fade_t);\n    color.a *= u_opacity;\n    vec3 rgb = color.rgb;\n\n    // spin\n    rgb = vec3(\n        dot(rgb, u_spin_weights.xyz),\n        dot(rgb, u_spin_weights.zxy),\n        dot(rgb, u_spin_weights.yzx));\n\n    // saturation\n    float average = (color.r + color.g + color.b) / 3.0;\n    rgb += (average - rgb) * u_saturation_factor;\n\n    // contrast\n    rgb = (rgb - 0.5) * u_contrast_factor + 0.5;\n\n    // brightness\n    vec3 u_high_vec = vec3(u_brightness_low, u_brightness_low, u_brightness_low);\n    vec3 u_low_vec = vec3(u_brightness_high, u_brightness_high, u_brightness_high);\n\n    gl_FragColor = vec4(mix(u_high_vec, u_low_vec, rgb) * color.a, color.a);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\nuniform vec2 u_tl_parent;\nuniform float u_scale_parent;\nuniform float u_buffer_scale;\n\nattribute vec2 a_pos;\nattribute vec2 a_texture_pos;\n\nvarying vec2 v_pos0;\nvarying vec2 v_pos1;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n    // We are using Int16 for texture position coordinates to give us enough precision for\n    // fractional coordinates. We use 8192 to scale the texture coordinates in the buffer\n    // as an arbitrarily high number to preserve adequate precision when rendering.\n    // This is also the same value as the EXTENT we are using for our tile buffer pos coordinates,\n    // so math for modifying either is consistent.\n    v_pos0 = (((a_texture_pos / 8192.0) - 0.5) / u_buffer_scale ) + 0.5;\n    v_pos1 = (v_pos0 * u_scale_parent) + u_tl_parent;\n}\n"},symbolIcon:{fragmentSource:"uniform sampler2D u_texture;\n\n#pragma mapbox: define lowp float opacity\n\nvarying vec2 v_tex;\nvarying float v_fade_opacity;\n\nvoid main() {\n    #pragma mapbox: initialize lowp float opacity\n\n    lowp float alpha = opacity * v_fade_opacity;\n    gl_FragColor = texture2D(u_texture, v_tex) * alpha;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"const float PI = 3.141592653589793;\n\nattribute vec4 a_pos_offset;\nattribute vec4 a_data;\nattribute vec3 a_projected_pos;\nattribute float a_fade_opacity;\n\nuniform bool u_is_size_zoom_constant;\nuniform bool u_is_size_feature_constant;\nuniform highp float u_size_t; // used to interpolate between zoom stops when size is a composite function\nuniform highp float u_size; // used when size is both zoom and feature constant\nuniform highp float u_camera_to_center_distance;\nuniform highp float u_pitch;\nuniform bool u_rotate_symbol;\nuniform highp float u_aspect_ratio;\nuniform float u_fade_change;\n\n#pragma mapbox: define lowp float opacity\n\nuniform mat4 u_matrix;\nuniform mat4 u_label_plane_matrix;\nuniform mat4 u_gl_coord_matrix;\n\nuniform bool u_is_text;\nuniform bool u_pitch_with_map;\n\nuniform vec2 u_texsize;\n\nvarying vec2 v_tex;\nvarying float v_fade_opacity;\n\nvoid main() {\n    #pragma mapbox: initialize lowp float opacity\n\n    vec2 a_pos = a_pos_offset.xy;\n    vec2 a_offset = a_pos_offset.zw;\n\n    vec2 a_tex = a_data.xy;\n    vec2 a_size = a_data.zw;\n\n    highp float segment_angle = -a_projected_pos[2];\n\n    float size;\n    if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {\n        size = mix(a_size[0], a_size[1], u_size_t) / 10.0;\n    } else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {\n        size = a_size[0] / 10.0;\n    } else if (!u_is_size_zoom_constant && u_is_size_feature_constant) {\n        size = u_size;\n    } else {\n        size = u_size;\n    }\n\n    vec4 projectedPoint = u_matrix * vec4(a_pos, 0, 1);\n    highp float camera_to_anchor_distance = projectedPoint.w;\n    // See comments in symbol_sdf.vertex\n    highp float distance_ratio = u_pitch_with_map ?\n        camera_to_anchor_distance / u_camera_to_center_distance :\n        u_camera_to_center_distance / camera_to_anchor_distance;\n    highp float perspective_ratio = 0.5 + 0.5 * distance_ratio;\n\n    size *= perspective_ratio;\n\n    float fontScale = u_is_text ? size / 24.0 : size;\n\n    highp float symbol_rotation = 0.0;\n    if (u_rotate_symbol) {\n        // See comments in symbol_sdf.vertex\n        vec4 offsetProjectedPoint = u_matrix * vec4(a_pos + vec2(1, 0), 0, 1);\n\n        vec2 a = projectedPoint.xy / projectedPoint.w;\n        vec2 b = offsetProjectedPoint.xy / offsetProjectedPoint.w;\n\n        symbol_rotation = atan((b.y - a.y) / u_aspect_ratio, b.x - a.x);\n    }\n\n    highp float angle_sin = sin(segment_angle + symbol_rotation);\n    highp float angle_cos = cos(segment_angle + symbol_rotation);\n    mat2 rotation_matrix = mat2(angle_cos, -1.0 * angle_sin, angle_sin, angle_cos);\n\n    vec4 projected_pos = u_label_plane_matrix * vec4(a_projected_pos.xy, 0.0, 1.0);\n    gl_Position = u_gl_coord_matrix * vec4(projected_pos.xy / projected_pos.w + rotation_matrix * (a_offset / 64.0 * fontScale), 0.0, 1.0);\n\n    v_tex = a_tex / u_texsize;\n    vec2 fade_opacity = unpack_opacity(a_fade_opacity);\n    float fade_change = fade_opacity[1] > 0.5 ? u_fade_change : -u_fade_change;\n    v_fade_opacity = max(0.0, min(1.0, fade_opacity[0] + fade_change));\n}\n"},symbolSDF:{fragmentSource:"#define SDF_PX 8.0\n#define EDGE_GAMMA 0.105/DEVICE_PIXEL_RATIO\n\nuniform bool u_is_halo;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\n\nuniform sampler2D u_texture;\nuniform highp float u_gamma_scale;\nuniform bool u_is_text;\n\nvarying vec2 v_data0;\nvarying vec3 v_data1;\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 fill_color\n    #pragma mapbox: initialize highp vec4 halo_color\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize lowp float halo_width\n    #pragma mapbox: initialize lowp float halo_blur\n\n    vec2 tex = v_data0.xy;\n    float gamma_scale = v_data1.x;\n    float size = v_data1.y;\n    float fade_opacity = v_data1[2];\n\n    float fontScale = u_is_text ? size / 24.0 : size;\n\n    lowp vec4 color = fill_color;\n    highp float gamma = EDGE_GAMMA / (fontScale * u_gamma_scale);\n    lowp float buff = (256.0 - 64.0) / 256.0;\n    if (u_is_halo) {\n        color = halo_color;\n        gamma = (halo_blur * 1.19 / SDF_PX + EDGE_GAMMA) / (fontScale * u_gamma_scale);\n        buff = (6.0 - halo_width / fontScale) / SDF_PX;\n    }\n\n    lowp float dist = texture2D(u_texture, tex).a;\n    highp float gamma_scaled = gamma * gamma_scale;\n    highp float alpha = smoothstep(buff - gamma_scaled, buff + gamma_scaled, dist);\n\n    gl_FragColor = color * (alpha * opacity * fade_opacity);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"const float PI = 3.141592653589793;\n\nattribute vec4 a_pos_offset;\nattribute vec4 a_data;\nattribute vec3 a_projected_pos;\nattribute float a_fade_opacity;\n\n// contents of a_size vary based on the type of property value\n// used for {text,icon}-size.\n// For constants, a_size is disabled.\n// For source functions, we bind only one value per vertex: the value of {text,icon}-size evaluated for the current feature.\n// For composite functions:\n// [ text-size(lowerZoomStop, feature),\n//   text-size(upperZoomStop, feature) ]\nuniform bool u_is_size_zoom_constant;\nuniform bool u_is_size_feature_constant;\nuniform highp float u_size_t; // used to interpolate between zoom stops when size is a composite function\nuniform highp float u_size; // used when size is both zoom and feature constant\n\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\n\nuniform mat4 u_matrix;\nuniform mat4 u_label_plane_matrix;\nuniform mat4 u_gl_coord_matrix;\n\nuniform bool u_is_text;\nuniform bool u_pitch_with_map;\nuniform highp float u_pitch;\nuniform bool u_rotate_symbol;\nuniform highp float u_aspect_ratio;\nuniform highp float u_camera_to_center_distance;\nuniform float u_fade_change;\n\nuniform vec2 u_texsize;\n\nvarying vec2 v_data0;\nvarying vec3 v_data1;\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 fill_color\n    #pragma mapbox: initialize highp vec4 halo_color\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize lowp float halo_width\n    #pragma mapbox: initialize lowp float halo_blur\n\n    vec2 a_pos = a_pos_offset.xy;\n    vec2 a_offset = a_pos_offset.zw;\n\n    vec2 a_tex = a_data.xy;\n    vec2 a_size = a_data.zw;\n\n    highp float segment_angle = -a_projected_pos[2];\n    float size;\n\n    if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {\n        size = mix(a_size[0], a_size[1], u_size_t) / 10.0;\n    } else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {\n        size = a_size[0] / 10.0;\n    } else if (!u_is_size_zoom_constant && u_is_size_feature_constant) {\n        size = u_size;\n    } else {\n        size = u_size;\n    }\n\n    vec4 projectedPoint = u_matrix * vec4(a_pos, 0, 1);\n    highp float camera_to_anchor_distance = projectedPoint.w;\n    // If the label is pitched with the map, layout is done in pitched space,\n    // which makes labels in the distance smaller relative to viewport space.\n    // We counteract part of that effect by multiplying by the perspective ratio.\n    // If the label isn't pitched with the map, we do layout in viewport space,\n    // which makes labels in the distance larger relative to the features around\n    // them. We counteract part of that effect by dividing by the perspective ratio.\n    highp float distance_ratio = u_pitch_with_map ?\n        camera_to_anchor_distance / u_camera_to_center_distance :\n        u_camera_to_center_distance / camera_to_anchor_distance;\n    highp float perspective_ratio = 0.5 + 0.5 * distance_ratio;\n\n    size *= perspective_ratio;\n\n    float fontScale = u_is_text ? size / 24.0 : size;\n\n    highp float symbol_rotation = 0.0;\n    if (u_rotate_symbol) {\n        // Point labels with 'rotation-alignment: map' are horizontal with respect to tile units\n        // To figure out that angle in projected space, we draw a short horizontal line in tile\n        // space, project it, and measure its angle in projected space.\n        vec4 offsetProjectedPoint = u_matrix * vec4(a_pos + vec2(1, 0), 0, 1);\n\n        vec2 a = projectedPoint.xy / projectedPoint.w;\n        vec2 b = offsetProjectedPoint.xy / offsetProjectedPoint.w;\n\n        symbol_rotation = atan((b.y - a.y) / u_aspect_ratio, b.x - a.x);\n    }\n\n    highp float angle_sin = sin(segment_angle + symbol_rotation);\n    highp float angle_cos = cos(segment_angle + symbol_rotation);\n    mat2 rotation_matrix = mat2(angle_cos, -1.0 * angle_sin, angle_sin, angle_cos);\n\n    vec4 projected_pos = u_label_plane_matrix * vec4(a_projected_pos.xy, 0.0, 1.0);\n    gl_Position = u_gl_coord_matrix * vec4(projected_pos.xy / projected_pos.w + rotation_matrix * (a_offset / 64.0 * fontScale), 0.0, 1.0);\n    float gamma_scale = gl_Position.w;\n\n    vec2 tex = a_tex / u_texsize;\n    vec2 fade_opacity = unpack_opacity(a_fade_opacity);\n    float fade_change = fade_opacity[1] > 0.5 ? u_fade_change : -u_fade_change;\n    float interpolated_fade_opacity = max(0.0, min(1.0, fade_opacity[0] + fade_change));\n\n    v_data0 = vec2(tex.x, tex.y);\n    v_data1 = vec3(gamma_scale, size, interpolated_fade_opacity);\n}\n"}},i=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g;for(var o in r)!function(e){var t=r[e],n={};t.fragmentSource=t.fragmentSource.replace(i,function(e,t,r,i,o){return n[o]=!0,"define"===t?"\n#ifndef HAS_UNIFORM_u_"+o+"\nvarying "+r+" "+i+" "+o+";\n#else\nuniform "+r+" "+i+" u_"+o+";\n#endif\n":"\n#ifdef HAS_UNIFORM_u_"+o+"\n    "+r+" "+i+" "+o+" = u_"+o+";\n#endif\n"}),t.vertexSource=t.vertexSource.replace(i,function(e,t,r,i,o){var a="float"===i?"vec2":"vec4";return n[o]?"define"===t?"\n#ifndef HAS_UNIFORM_u_"+o+"\nuniform lowp float a_"+o+"_t;\nattribute "+r+" "+a+" a_"+o+";\nvarying "+r+" "+i+" "+o+";\n#else\nuniform "+r+" "+i+" u_"+o+";\n#endif\n":"\n#ifndef HAS_UNIFORM_u_"+o+"\n    "+o+" = unpack_mix_"+a+"(a_"+o+", a_"+o+"_t);\n#else\n    "+r+" "+i+" "+o+" = u_"+o+";\n#endif\n":"define"===t?"\n#ifndef HAS_UNIFORM_u_"+o+"\nuniform lowp float a_"+o+"_t;\nattribute "+r+" "+a+" a_"+o+";\n#else\nuniform "+r+" "+i+" u_"+o+";\n#endif\n":"\n#ifndef HAS_UNIFORM_u_"+o+"\n    "+r+" "+i+" "+o+" = unpack_mix_"+a+"(a_"+o+", a_"+o+"_t);\n#else\n    "+r+" "+i+" "+o+" = u_"+o+";\n#endif\n"})}(o);t.exports=r},{}],98:[function(e,t,n){"use strict";var r=e("./image_source"),i=e("../util/window"),o=function(e){function t(t,n,r,i){e.call(this,t,n,r,i),this.options=n,this.animate=void 0===n.animate||n.animate}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.load=function(){if(this.canvas=this.canvas||i.document.getElementById(this.options.canvas),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions())return this.fire("error",new Error("Canvas dimensions cannot be less than or equal to zero."));this.play=function(){this._playing=!0,this.map._rerender()},this.pause=function(){this._playing=!1},this._finishLoading()},t.prototype.getCanvas=function(){return this.canvas},t.prototype.onAdd=function(e){this.map=e,this.load(),this.canvas&&this.animate&&this.play()},t.prototype.onRemove=function(){this.pause()},t.prototype.prepare=function(){var e=!1;this.canvas.width!==this.width&&(this.width=this.canvas.width,e=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,e=!0),this._hasInvalidDimensions()||0!==Object.keys(this.tiles).length&&this._prepareImage(this.map.painter.gl,this.canvas,e)},t.prototype.serialize=function(){return{type:"canvas",canvas:this.canvas,coordinates:this.coordinates}},t.prototype.hasTransition=function(){return this._playing},t.prototype._hasInvalidDimensions=function(){for(var e=this,t=0,n=[e.canvas.width,e.canvas.height];t<n.length;t+=1){var r=n[t];if(isNaN(r)||r<=0)return!0}return!1},t}(r);t.exports=o},{"../util/window":247,"./image_source":102}],99:[function(e,t,n){"use strict";function r(e){var t=a.document.createElement("a");return t.href=e,t.href}var i=e("../util/evented"),o=e("../util/util"),a=e("../util/window"),s=e("../data/extent"),u=e("../util/ajax").ResourceType,l=e("../util/browser"),c=function(e){function t(t,n,r,i){e.call(this),this.id=t,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this.dispatcher=r,this.setEventedParent(i),this._data=n.data,this._options=o.extend({},n),void 0!==n.maxzoom&&(this.maxzoom=n.maxzoom),n.type&&(this.type=n.type);var a=s/this.tileSize;this.workerOptions=o.extend({source:this.id,cluster:n.cluster||!1,geojsonVtOptions:{buffer:(void 0!==n.buffer?n.buffer:128)*a,tolerance:(void 0!==n.tolerance?n.tolerance:.375)*a,extent:s,maxZoom:this.maxzoom},superclusterOptions:{maxZoom:void 0!==n.clusterMaxZoom?Math.min(n.clusterMaxZoom,this.maxzoom-1):this.maxzoom-1,extent:s,radius:(n.clusterRadius||50)*a,log:!1}},n.workerOptions)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.load=function(){var e=this;this.fire("dataloading",{dataType:"source"}),this._updateWorkerData(function(t){if(t)return void e.fire("error",{error:t});e.fire("data",{dataType:"source",sourceDataType:"metadata"})})},t.prototype.onAdd=function(e){this.map=e,this.load()},t.prototype.setData=function(e){var t=this;return this._data=e,this.fire("dataloading",{dataType:"source"}),this._updateWorkerData(function(e){if(e)return t.fire("error",{error:e});t.fire("data",{dataType:"source",sourceDataType:"content"})}),this},t.prototype._updateWorkerData=function(e){var t=this,n=o.extend({},this.workerOptions),i=this._data;"string"==typeof i?n.request=this.map._transformRequest(r(i),u.Source):n.data=JSON.stringify(i),this.workerID=this.dispatcher.send(this.type+".loadData",n,function(n){t._loaded=!0,e(n)},this.workerID)},t.prototype.loadTile=function(e,t){var n=this,r=void 0===e.workerID||"expired"===e.state?"loadTile":"reloadTile",i={type:this.type,uid:e.uid,coord:e.coord,zoom:e.coord.z,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:l.devicePixelRatio,overscaling:e.coord.z>this.maxzoom?Math.pow(2,e.coord.z-this.maxzoom):1,showCollisionBoxes:this.map.showCollisionBoxes};e.workerID=this.dispatcher.send(r,i,function(r,i){return e.unloadVectorData(),e.aborted?t(null):r?t(r):(e.loadVectorData(i,n.map.painter),t(null))},this.workerID)},t.prototype.abortTile=function(e){e.aborted=!0},t.prototype.unloadTile=function(e){e.unloadVectorData(),this.dispatcher.send("removeTile",{uid:e.uid,type:this.type,source:this.id},null,e.workerID)},t.prototype.onRemove=function(){this.dispatcher.broadcast("removeSource",{type:this.type,source:this.id})},t.prototype.serialize=function(){return o.extend({},this._options,{type:this.type,data:this._data})},t.prototype.hasTransition=function(){return!1},t}(i);t.exports=c},{"../data/extent":58,"../util/ajax":244,"../util/browser":245,"../util/evented":253,"../util/util":266,"../util/window":247}],100:[function(e,t,n){"use strict";function r(e,t){var n=e.source,r=e.coord;if(!this._geoJSONIndexes[n])return t(null,null);var i=this._geoJSONIndexes[n].getTile(Math.min(r.z,e.maxZoom),r.x,r.y);if(!i)return t(null,null);var o=new a(i.features),u=s(o);0===u.byteOffset&&u.byteLength===u.buffer.byteLength||(u=new Uint8Array(u)),t(null,{vectorTile:o,rawData:u.buffer})}var i=e("../util/ajax"),o=e("geojson-rewind"),a=e("./geojson_wrapper"),s=e("vt-pbf"),u=e("supercluster"),l=e("geojson-vt"),c=e("./vector_tile_worker_source"),f=function(e){function t(t,n,i){e.call(this,t,n,r),i&&(this.loadGeoJSON=i),this._geoJSONIndexes={}}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.loadData=function(e,t){var n=this;this.loadGeoJSON(e,function(r,i){if(r||!i)return t(r);if("object"!=typeof i)return t(new Error("Input data is not a valid GeoJSON object."));o(i,!0);try{n._geoJSONIndexes[e.source]=e.cluster?u(e.superclusterOptions).load(i.features):l(i,e.geojsonVtOptions)}catch(r){return t(r)}n.loaded[e.source]={},t(null)})},t.prototype.reloadTile=function(t,n){var r=this.loaded[t.source],i=t.uid;return r&&r[i]?e.prototype.reloadTile.call(this,t,n):this.loadTile(t,n)},t.prototype.loadGeoJSON=function(e,t){if(e.request)i.getJSON(e.request,t);else{if("string"!=typeof e.data)return t(new Error("Input data is not a valid GeoJSON object."));try{return t(null,JSON.parse(e.data))}catch(e){return t(new Error("Input data is not a valid GeoJSON object."))}}},t.prototype.removeSource=function(e,t){this._geoJSONIndexes[e.source]&&delete this._geoJSONIndexes[e.source],t()},t}(c);t.exports=f},{"../util/ajax":244,"./geojson_wrapper":101,"./vector_tile_worker_source":114,"geojson-rewind":14,"geojson-vt":18,supercluster:41,"vt-pbf":46}],101:[function(e,t,n){"use strict";var r=e("@mapbox/point-geometry"),i=e("@mapbox/vector-tile").VectorTileFeature.prototype.toGeoJSON,o=e("../data/extent"),a=function(e){this._feature=e,this.extent=o,this.type=e.type,this.properties=e.tags,"id"in e&&!isNaN(e.id)&&(this.id=parseInt(e.id,10))};a.prototype.loadGeometry=function(){var e=this;if(1===this._feature.type){for(var t=[],n=0,i=e._feature.geometry;n<i.length;n+=1){var o=i[n];t.push([new r(o[0],o[1])])}return t}for(var a=[],s=0,u=e._feature.geometry;s<u.length;s+=1){for(var l=u[s],c=[],f=0,h=l;f<h.length;f+=1){var p=h[f];c.push(new r(p[0],p[1]))}a.push(c)}return a},a.prototype.toGeoJSON=function(e,t,n){return i.call(this,e,t,n)};var s=function(e){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=o,this.length=e.length,this._features=e};s.prototype.feature=function(e){return new a(this._features[e])},t.exports=s},{"../data/extent":58,"@mapbox/point-geometry":2,"@mapbox/vector-tile":6}],102:[function(e,t,n){"use strict";var r=e("../util/util"),i=e("../util/window"),o=e("./tile_coord"),a=e("../geo/lng_lat"),s=e("@mapbox/point-geometry"),u=e("../util/evented"),l=e("../util/ajax"),c=e("../util/browser"),f=e("../data/extent"),h=e("../data/raster_bounds_array"),p=e("../gl/vertex_buffer"),d=e("../render/vertex_array_object"),v=e("../render/texture"),g=function(e){function t(t,n,r,i){e.call(this),this.id=t,this.dispatcher=r,this.coordinates=n.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this.setEventedParent(i),this.options=n,this.textureLoaded=!1}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.load=function(){var e=this;this.fire("dataloading",{dataType:"source"}),this.url=this.options.url,l.getImage(this.map._transformRequest(this.url,l.ResourceType.Image),function(t,n){t?e.fire("error",{error:t}):n&&(e.image=c.getImageData(n),e._finishLoading())})},t.prototype._finishLoading=function(){this.map&&(this.setCoordinates(this.coordinates),this.fire("data",{dataType:"source",sourceDataType:"metadata"}))},t.prototype.onAdd=function(e){this.map=e,this.load()},t.prototype.setCoordinates=function(e){this.coordinates=e;var t=this.map,n=e.map(function(e){return t.transform.locationCoordinate(a.convert(e)).zoomTo(0)}),i=this.centerCoord=r.getCoordinatesCenter(n);i.column=Math.floor(i.column),i.row=Math.floor(i.row),this.coord=new o(i.zoom,i.column,i.row),this.minzoom=this.maxzoom=i.zoom;var u=n.map(function(e){var t=e.zoomTo(i.zoom);return new s(Math.round((t.column-i.column)*f),Math.round((t.row-i.row)*f))});return this._boundsArray=new h,this._boundsArray.emplaceBack(u[0].x,u[0].y,0,0),this._boundsArray.emplaceBack(u[1].x,u[1].y,f,0),this._boundsArray.emplaceBack(u[3].x,u[3].y,0,f),this._boundsArray.emplaceBack(u[2].x,u[2].y,f,f),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire("data",{dataType:"source",sourceDataType:"content"}),this},t.prototype.prepare=function(){0!==Object.keys(this.tiles).length&&this.image&&this._prepareImage(this.map.painter.gl,this.image)},t.prototype._prepareImage=function(e,t,n){var r=this;this.boundsBuffer||(this.boundsBuffer=new p(e,this._boundsArray)),this.boundsVAO||(this.boundsVAO=new d),this.textureLoaded?n?this.texture.update(t):(t instanceof i.HTMLVideoElement||t instanceof i.ImageData||t instanceof i.HTMLCanvasElement)&&(this.texture.bind(e.LINEAR,e.CLAMP_TO_EDGE),e.texSubImage2D(e.TEXTURE_2D,0,0,0,e.RGBA,e.UNSIGNED_BYTE,t)):(this.textureLoaded=!0,this.texture=new v(e,t,e.RGBA),this.texture.bind(e.LINEAR,e.CLAMP_TO_EDGE));for(var o in r.tiles){var a=r.tiles[o];"loaded"!==a.state&&(a.state="loaded",a.texture=r.texture)}},t.prototype.loadTile=function(e,t){this.coord&&this.coord.toString()===e.coord.toString()?(this.tiles[String(e.coord.w)]=e,e.buckets={},t(null)):(e.state="errored",t(null))},t.prototype.serialize=function(){return{type:"image",url:this.options.url,coordinates:this.coordinates}},t.prototype.hasTransition=function(){return!1},t}(u);t.exports=g},{"../data/extent":58,"../data/raster_bounds_array":64,"../geo/lng_lat":68,"../gl/vertex_buffer":72,"../render/texture":93,"../render/vertex_array_object":95,"../util/ajax":244,"../util/browser":245,"../util/evented":253,"../util/util":266,"../util/window":247,"./tile_coord":112,"@mapbox/point-geometry":2}],103:[function(e,t,n){"use strict";var r=e("../util/util"),i=e("../util/ajax"),o=e("../util/browser"),a=e("../util/mapbox").normalizeSourceURL;t.exports=function(e,t,n){var s=function(e,t){if(e)return n(e);if(t){var i=r.pick(t,["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds"]);t.vector_layers&&(i.vectorLayers=t.vector_layers,i.vectorLayerIds=i.vectorLayers.map(function(e){return e.id})),n(null,i)}};e.url?i.getJSON(t(a(e.url),i.ResourceType.Source),s):o.frame(function(){return s(null,e)})}},{"../util/ajax":244,"../util/browser":245,"../util/mapbox":260,"../util/util":266}],104:[function(e,t,n){"use strict";var r=e("../data/extent");t.exports=function(e,t,n){return t*(r/(e.tileSize*Math.pow(2,n-e.coord.z)))}},{"../data/extent":58}],105:[function(e,t,n){"use strict";function r(e,t){var n=e.coord,r=t.coord;return n.z-r.z||n.y-r.y||n.w-r.w||n.x-r.x}function i(e){for(var t={},n={},r=0,i=e;r<i.length;r+=1){var o=i[r],a=o.queryResults,s=o.wrappedTileID,u=n[s]=n[s]||{};for(var l in a)for(var c=a[l],f=u[l]=u[l]||{},h=t[l]=t[l]||[],p=0,d=c;p<d.length;p+=1){var v=d[p];f[v.featureIndex]||(f[v.featureIndex]=!0,h.push(v.feature))}}return t}var o=e("./tile_coord");n.rendered=function(e,t,n,o,a,s){var u=e.tilesIn(n);u.sort(r);for(var l=[],c=0,f=u;c<f.length;c+=1){var h=f[c];l.push({wrappedTileID:h.coord.wrapped().id,queryResults:h.tile.queryRenderedFeatures(t,h.queryGeometry,h.scale,o,s,e.id)})}return i(l)},n.source=function(e,t){for(var n=e.getRenderableIds().map(function(t){return e.getTileByID(t)}),r=[],i={},a=0;a<n.length;a++){var s=n[a],u=new o(Math.min(s.sourceMaxZoom,s.coord.z),s.coord.x,s.coord.y,0).id;i[u]||(i[u]=!0,s.querySourceFeatures(r,t))}return r}},{"./tile_coord":112}],106:[function(e,t,n){"use strict";var r=e("../util/util"),i=e("../util/ajax"),o=e("../util/evented"),a=e("./load_tilejson"),s=e("../util/mapbox").normalizeTileURL,u=e("./tile_bounds"),l=e("../render/texture"),c=function(e){function t(t,n,i,o){e.call(this),this.id=t,this.dispatcher=i,this.setEventedParent(o),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=r.extend({},n),r.extend(this,r.pick(n,["url","scheme","tileSize"]))}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.load=function(){var e=this;this.fire("dataloading",{dataType:"source"}),a(this._options,this.map._transformRequest,function(t,n){t?e.fire("error",t):n&&(r.extend(e,n),n.bounds&&(e.tileBounds=new u(n.bounds,e.minzoom,e.maxzoom)),e.fire("data",{dataType:"source",sourceDataType:"metadata"}),e.fire("data",{dataType:"source",sourceDataType:"content"}))})},t.prototype.onAdd=function(e){this.map=e,this.load()},t.prototype.serialize=function(){return r.extend({},this._options)},t.prototype.hasTile=function(e){return!this.tileBounds||this.tileBounds.contains(e,this.maxzoom)},t.prototype.loadTile=function(e,t){var n=this,r=s(e.coord.url(this.tiles,null,this.scheme),this.url,this.tileSize);e.request=i.getImage(this.map._transformRequest(r,i.ResourceType.Tile),function(r,i){if(delete e.request,e.aborted)e.state="unloaded",t(null);else if(r)e.state="errored",t(r);else if(i){n.map._refreshExpiredTiles&&e.setExpiryData(i),delete i.cacheControl,delete i.expires;var o=n.map.painter.gl;e.texture=n.map.painter.getTileTexture(i.width),e.texture?(e.texture.bind(o.LINEAR,o.CLAMP_TO_EDGE,o.LINEAR_MIPMAP_NEAREST),o.texSubImage2D(o.TEXTURE_2D,0,0,0,o.RGBA,o.UNSIGNED_BYTE,i)):(e.texture=new l(o,i,o.RGBA),e.texture.bind(o.LINEAR,o.CLAMP_TO_EDGE,o.LINEAR_MIPMAP_NEAREST),n.map.painter.extTextureFilterAnisotropic&&o.texParameterf(o.TEXTURE_2D,n.map.painter.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,n.map.painter.extTextureFilterAnisotropicMax)),o.generateMipmap(o.TEXTURE_2D),e.state="loaded",t(null)}})},t.prototype.abortTile=function(e,t){e.request&&(e.request.abort(),delete e.request),t()},t.prototype.unloadTile=function(e,t){e.texture&&this.map.painter.saveTileTexture(e.texture),t()},t.prototype.hasTransition=function(){return!1},t}(o);t.exports=c},{"../render/texture":93,"../util/ajax":244,"../util/evented":253,"../util/mapbox":260,"../util/util":266,"./load_tilejson":103,"./tile_bounds":111}],107:[function(e,t,n){"use strict";var r=e("../util/ajax"),i=e("../util/evented"),o=e("../util/window"),a=!1,s=null;t.exports.evented=new i,t.exports.registerForPluginAvailability=function(e){return s?e({pluginBlobURL:s,errorCallback:t.exports.errorCallback}):t.exports.evented.once("pluginAvailable",e),e},t.exports.createBlobURL=function(e){return o.URL.createObjectURL(new o.Blob([e.data],{type:"text/javascript"}))},t.exports.clearRTLTextPlugin=function(){a=!1,s=null},t.exports.setRTLTextPlugin=function(e,n){if(a)throw new Error("setRTLTextPlugin cannot be called multiple times.");a=!0,t.exports.errorCallback=n,r.getArrayBuffer({url:e},function(e,r){e?n(e):r&&(s=t.exports.createBlobURL(r),t.exports.evented.fire("pluginAvailable",{pluginBlobURL:s,errorCallback:n}))})},t.exports.applyArabicShaping=null,t.exports.processBidirectionalText=null},{"../util/ajax":244,"../util/evented":253,"../util/window":247}],108:[function(e,t,n){"use strict";var r=e("../util/util"),i={vector:e("../source/vector_tile_source"),raster:e("../source/raster_tile_source"),geojson:e("../source/geojson_source"),video:e("../source/video_source"),image:e("../source/image_source"),canvas:e("../source/canvas_source")};n.create=function(e,t,n,o){var a=new i[t.type](e,t,n,o);if(a.id!==e)throw new Error("Expected Source id to be "+e+" instead of "+a.id);return r.bindAll(["load","abort","unload","serialize","prepare"],a),a},n.getType=function(e){return i[e]},n.setType=function(e,t){i[e]=t}},{"../source/canvas_source":98,"../source/geojson_source":99,"../source/image_source":102,"../source/raster_tile_source":106,"../source/vector_tile_source":113,"../source/video_source":115,"../util/util":266}],109:[function(e,t,n){"use strict";function r(e,t,n){var r=n.zoomTo(Math.min(e.z,t));return new p((r.column-(e.x+e.w*Math.pow(2,e.z)))*h,(r.row-e.y)*h)}function i(e){return"raster"===e||"image"===e||"video"===e}var o=e("./source").create,a=e("./tile"),s=e("../util/evented"),u=e("./tile_coord"),l=e("../util/lru_cache"),c=e("../geo/coordinate"),f=e("../util/util"),h=e("../data/extent"),p=e("@mapbox/point-geometry"),d=function(e){function t(t,n,r){var i=this;e.call(this),this.id=t,this.dispatcher=r,this.on("data",function(e){"source"===e.dataType&&"metadata"===e.sourceDataType&&(i._sourceLoaded=!0),i._sourceLoaded&&!i._paused&&"source"===e.dataType&&"content"===e.sourceDataType&&(i.reload(),i.transform&&i.update(i.transform))}),this.on("error",function(){i._sourceErrored=!0}),this._source=o(t,n,r,this),this._tiles={},this._cache=new l(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._isIdRenderable=this._isIdRenderable.bind(this),this._coveredTiles={}}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.onAdd=function(e){this.map=e,this._maxTileCacheSize=e?e._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(e)},t.prototype.onRemove=function(e){this._source&&this._source.onRemove&&this._source.onRemove(e)},t.prototype.loaded=function(){var e=this;if(this._sourceErrored)return!0;if(!this._sourceLoaded)return!1;for(var t in e._tiles){var n=e._tiles[t];if("loaded"!==n.state&&"errored"!==n.state)return!1}return!0},t.prototype.getSource=function(){return this._source},t.prototype.pause=function(){this._paused=!0},t.prototype.getNeedsFullPlacement=function(){return this._needsFullPlacement},t.prototype.resume=function(){if(this._paused){var e=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,e&&this.reload(),this.transform&&this.update(this.transform)}},t.prototype._loadTile=function(e,t){return this._source.loadTile(e,t)},t.prototype._unloadTile=function(e){if(this._source.unloadTile)return this._source.unloadTile(e,function(){})},t.prototype._abortTile=function(e){if(this._source.abortTile)return this._source.abortTile(e,function(){})},t.prototype.serialize=function(){return this._source.serialize()},t.prototype.prepare=function(e){var t=this;this._source.prepare&&this._source.prepare();for(var n in t._tiles)t._tiles[n].upload(e)},t.prototype.getIds=function(){var e=this,t=function(t,n){var r=u.fromID(t),i=u.fromID(n),o=new p(r.x,r.y).rotate(e.transform.angle),a=new p(i.x,i.y).rotate(e.transform.angle);return r.z-i.z||a.y-o.y||a.x-o.x};return Object.keys(this._tiles).map(Number).sort(t)},t.prototype.getRenderableIds=function(){return this.getIds().filter(this._isIdRenderable)},t.prototype.hasRenderableParent=function(e){var t=this.findLoadedParent(e,0,{});return!!t&&this._isIdRenderable(t.coord.id)},t.prototype._isIdRenderable=function(e){return this._tiles[e]&&this._tiles[e].hasData()&&!this._coveredTiles[e]},t.prototype.reload=function(){var e=this;if(this._paused)return void(this._shouldReloadOnResume=!0);this._cache.reset();for(var t in e._tiles)e._reloadTile(t,"reloading")},t.prototype._reloadTile=function(e,t){var n=this._tiles[e];n&&("loading"!==n.state&&(n.state=t),this._loadTile(n,this._tileLoaded.bind(this,n,e,t)))},t.prototype._tileLoaded=function(e,t,n,r){if(r)return e.state="errored",void(404!==r.status?this._source.fire("error",{tile:e,error:r}):this.update(this.transform));e.timeAdded=(new Date).getTime(),"expired"===n&&(e.refreshedUponExpiration=!0),this._setTileReloadTimer(t,e),this._source.fire("data",{dataType:"source",tile:e,coord:e.coord}),this.map&&(this.map.painter.tileExtentVAO.vao=null),this._updatePlacement(),this.map&&e.added(this.map.painter.crossTileSymbolIndex)},t.prototype.getTile=function(e){return this.getTileByID(e.id)},t.prototype.getTileByID=function(e){return this._tiles[e]},t.prototype.getZoom=function(e){return e.zoom+e.scaleZoom(e.tileSize/this._source.tileSize)},t.prototype._findLoadedChildren=function(e,t,n){var r=this,i=!1;for(var o in r._tiles){var a=r._tiles[o];if(!(n[o]||!a.hasData()||a.coord.z<=e.z||a.coord.z>t)){var s=Math.pow(2,Math.min(a.coord.z,r._source.maxzoom)-Math.min(e.z,r._source.maxzoom));if(Math.floor(a.coord.x/s)===e.x&&Math.floor(a.coord.y/s)===e.y)for(n[o]=!0,i=!0;a&&a.coord.z-1>e.z;){var u=a.coord.parent(r._source.maxzoom);if(!u)break;(a=r._tiles[u.id])&&a.hasData()&&(delete n[o],n[u.id]=!0)}}}return i},t.prototype.findLoadedParent=function(e,t,n){for(var r=this,i=e.z-1;i>=t;i--){var o=e.parent(r._source.maxzoom);if(!o)return;e=o;var a=String(e.id),s=r._tiles[a];if(s&&s.hasData())return n[a]=!0,s;if(r._cache.has(a))return n[a]=!0,r._cache.get(a)}},t.prototype.updateCacheSize=function(e){var t=Math.ceil(e.width/this._source.tileSize)+1,n=Math.ceil(e.height/this._source.tileSize)+1,r=t*n,i=Math.floor(5*r),o="number"==typeof this._maxTileCacheSize?Math.min(this._maxTileCacheSize,i):i;this._cache.setMaxSize(o)},t.prototype.update=function(e){var n=this;if(this.transform=e,this._sourceLoaded&&!this._paused){this.updateCacheSize(e),this._coveredTiles={};var r;this.used?this._source.coord?r=e.getVisibleWrappedCoordinates(this._source.coord):(r=e.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}),this._source.hasTile&&(r=r.filter(function(e){return n._source.hasTile(e)}))):r=[];var o=(this._source.roundZoom?Math.round:Math.floor)(this.getZoom(e)),a=Math.max(o-t.maxOverzooming,this._source.minzoom),s=Math.max(o+t.maxUnderzooming,this._source.minzoom),l=this._updateRetainedTiles(r,o),c={};if(i(this._source.type))for(var h=Object.keys(l),p=0;p<h.length;p++){var d=h[p],v=u.fromID(+d),g=n._tiles[d];if(g&&(void 0===g.fadeEndTime||g.fadeEndTime>=Date.now())){n._findLoadedChildren(v,s,l)&&(l[d]=!0);var y=n.findLoadedParent(v,a,c);y&&n._addTile(y.coord)}}var m;for(m in c)l[m]||(n._coveredTiles[m]=!0);for(m in c)l[m]=!0;for(var _=f.keysDifference(this._tiles,l),b=0;b<_.length;b++)n._removeTile(_[b])}},t.prototype._updateRetainedTiles=function(e,n){var r,i,o,a,s=this,u={},l={},c=Math.max(n-t.maxOverzooming,this._source.minzoom);for(r=0;r<e.length;r++){i=e[r],o=s._addTile(i);var f=!1;if(o.hasData())u[i.id]=!0;else{if(f=o.wasRequested(),u[i.id]=!0,a=!0,n+1>s._source.maxzoom){var h=i.children(s._source.maxzoom)[0],p=s.getTile(h);p&&p.hasData()?u[h.id]=!0:a=!1}else for(var d=i.children(s._source.maxzoom),v=0;v<d.length;v++){var g=d[v],y=g?s.getTile(g):null;y&&y.hasData()?u[g.id]=!0:a=!1}if(!a)for(var m=n-1;m>=c;--m){var _=i.scaledTo(m,s._source.maxzoom);if(l[_.id])break;if(l[_.id]=!0,o=s.getTile(_),!o&&f&&(o=s._addTile(_)),o&&(u[_.id]=!0,f=o.wasRequested(),o.hasData()))break}}}return u},t.prototype._addTile=function(e){var t=this._tiles[e.id];if(t)return t;(t=this._cache.getAndRemove(e.id))&&(this._updatePlacement(),this.map&&t.added(this.map.painter.crossTileSymbolIndex),this._cacheTimers[e.id]&&(clearTimeout(this._cacheTimers[e.id]),delete this._cacheTimers[e.id],this._setTileReloadTimer(e.id,t)));var n=Boolean(t);if(!n){var r=e.z,i=r>this._source.maxzoom?Math.pow(2,r-this._source.maxzoom):1;t=new a(e,this._source.tileSize*i,this._source.maxzoom),this._loadTile(t,this._tileLoaded.bind(this,t,e.id,t.state))}return t?(t.uses++,this._tiles[e.id]=t,n||this._source.fire("dataloading",{tile:t,coord:t.coord,dataType:"source"}),t):null},t.prototype._setTileReloadTimer=function(e,t){var n=this,r=t.getExpiryTimeout();r&&(this._timers[e]=setTimeout(function(){n._reloadTile(e,"expired"),delete n._timers[e]},r))},t.prototype._setCacheInvalidationTimer=function(e,t){var n=this,r=t.getExpiryTimeout();r&&(this._cacheTimers[e]=setTimeout(function(){n._cache.remove(e),delete n._cacheTimers[e]},r))},t.prototype._removeTile=function(e){var t=this._tiles[e];if(t&&(t.uses--,delete this._tiles[e],this._timers[e]&&(clearTimeout(this._timers[e]),delete this._timers[e]),!(t.uses>0)))if(this._updatePlacement(),this.map&&t.removed(this.map.painter.crossTileSymbolIndex),t.hasData()){t.coord=t.coord.wrapped();var n=t.coord.id;this._cache.add(n,t),this._setCacheInvalidationTimer(n,t)}else t.aborted=!0,this._abortTile(t),this._unloadTile(t)},t.prototype._updatePlacement=function(){this._needsFullPlacement=!0},t.prototype.clearTiles=function(){var e=this;this._shouldReloadOnResume=!1,this._paused=!1;for(var t in e._tiles)e._removeTile(t);this._cache.reset()},t.prototype.tilesIn=function(e){for(var t=this,n=[],i=this.getIds(),o=1/0,a=1/0,s=-1/0,l=-1/0,f=e[0].zoom,p=0;p<e.length;p++){var d=e[p];o=Math.min(o,d.column),a=Math.min(a,d.row),s=Math.max(s,d.column),l=Math.max(l,d.row)}for(var v=0;v<i.length;v++){var g=t._tiles[i[v]],y=u.fromID(i[v]),m=[r(y,g.sourceMaxZoom,new c(o,a,f)),r(y,g.sourceMaxZoom,new c(s,l,f))];if(m[0].x<h&&m[0].y<h&&m[1].x>=0&&m[1].y>=0){for(var _=[],b=0;b<e.length;b++)_.push(r(y,g.sourceMaxZoom,e[b]));n.push({tile:g,coord:y,queryGeometry:[_],scale:Math.pow(2,t.transform.zoom-g.coord.z)})}}return n},t.prototype.commitPlacement=function(e,t){var n=this;this._needsFullPlacement=!1;for(var r=this.getIds(),i=0;i<r.length;i++)n.getTileByID(r[i]).commitPlacement(e,t,n.transform.angle)},t.prototype.getVisibleCoordinates=function(){for(var e=this,t=this.getRenderableIds().map(u.fromID),n=0,r=t;n<r.length;n+=1){var i=r[n];i.posMatrix=e.transform.calculatePosMatrix(i,e._source.maxzoom)}return t},t.prototype.hasTransition=function(){var e=this;if(this._source.hasTransition())return!0;if(i(this._source.type))for(var t in e._tiles){var n=e._tiles[t];if(void 0!==n.fadeEndTime&&n.fadeEndTime>=Date.now())return!0}return!1},t}(s);d.maxOverzooming=10,d.maxUnderzooming=3,t.exports=d},{"../data/extent":58,"../geo/coordinate":67,"../util/evented":253,"../util/lru_cache":259,"../util/util":266,"./source":108,"./tile":110,"./tile_coord":112,"@mapbox/point-geometry":2}],110:[function(e,t,n){"use strict";var r=e("../util/util"),i=e("../data/bucket").deserialize,o=e("../data/bucket/symbol_bucket"),a=e("../data/feature_index"),s=e("@mapbox/vector-tile"),u=e("pbf"),l=e("../util/vectortile_to_geojson"),c=e("../style-spec/feature_filter"),f=(e("../symbol/collision_index"),e("../symbol/collision_box")),h=e("../data/raster_bounds_array"),p=e("./tile_coord"),d=e("../data/extent"),v=e("@mapbox/point-geometry"),g=e("../gl/vertex_buffer"),y=e("../gl/index_buffer"),m=e("../render/texture"),_=e("../data/segment"),b=_.SegmentVector,E=e("../data/index_array_type"),x=E.TriangleIndexArray,w=e("../symbol/projection"),T=e("../symbol/symbol_placement"),S=T.performSymbolPlacement,A=T.updateOpacities,C=e("../source/pixels_to_tile_units"),O=function(e,t,n){this.coord=e,this.uid=r.uniqueId(),this.uses=0,this.tileSize=t,this.sourceMaxZoom=n,this.buckets={},this.expirationTime=null,this.expiredRequestCount=0,this.state="loading"};O.prototype.registerFadeDuration=function(e){var t=e+this.timeAdded;t<Date.now()||this.fadeEndTime&&t<this.fadeEndTime||(this.fadeEndTime=t)},O.prototype.wasRequested=function(){return"errored"===this.state||"loaded"===this.state||"reloading"===this.state},O.prototype.loadVectorData=function(e,t){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",!e)return void(this.collisionBoxArray=new f);e.rawTileData&&(this.rawTileData=e.rawTileData),this.collisionBoxArray=new f(e.collisionBoxArray),this.featureIndex=a.deserialize(e.featureIndex,this.rawTileData),this.buckets=i(e.buckets,t.style),e.iconAtlasImage&&(this.iconAtlasImage=e.iconAtlasImage),e.glyphAtlasImage&&(this.glyphAtlasImage=e.glyphAtlasImage),e.iconAtlasImage&&(this.iconAtlasImage=e.iconAtlasImage),e.glyphAtlasImage&&(this.glyphAtlasImage=e.glyphAtlasImage)},O.prototype.unloadVectorData=function(){var e=this;for(var t in e.buckets)e.buckets[t].destroy();this.buckets={},this.iconAtlasTexture&&this.iconAtlasTexture.destroy(),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.collisionBoxArray=null,this.featureIndex=null,this.state="unloaded"},O.prototype.added=function(e){var t=this;for(var n in t.buckets){var r=t.buckets[n];r instanceof o&&e.addTileLayer(n,t.coord,t.sourceMaxZoom,r.symbolInstances)}},O.prototype.removed=function(e){var t=this;for(var n in t.buckets)t.buckets[n]instanceof o&&e.removeTileLayer(n,t.coord,t.sourceMaxZoom)},O.prototype.placeLayer=function(e,t,n,r){var i=this.getBucket(n),a=this.collisionBoxArray;if(i&&i instanceof o&&a){var s=t.transform.calculatePosMatrix(this.coord,this.sourceMaxZoom),u="map"===i.layers[0].layout.get("text-pitch-alignment"),l=d/this.tileSize,c=C(this,1,t.transform.zoom),f=w.getLabelPlaneMatrix(s,u,!0,t.transform,c);S(i,t,e,t.transform.zoom,l,s,f,this.coord.id,r,a)}},O.prototype.commitPlacement=function(e,t,n){var r=this;for(var i in r.buckets){var a=r.buckets[i];a instanceof o&&(A(a,t),a.sortFeatures(n))}this.featureIndex&&this.featureIndex.setCollisionIndex(e)},O.prototype.getBucket=function(e){return this.buckets[e.id]},O.prototype.upload=function(e){var t=this;for(var n in t.buckets){var r=t.buckets[n];r.uploaded||(r.upload(e),r.uploaded=!0)}this.iconAtlasImage&&(this.iconAtlasTexture=new m(e,this.iconAtlasImage,e.RGBA),this.iconAtlasImage=null),this.glyphAtlasImage&&(this.glyphAtlasTexture=new m(e,this.glyphAtlasImage,e.ALPHA),this.glyphAtlasImage=null)},O.prototype.queryRenderedFeatures=function(e,t,n,r,i,o){var a=this;if(!this.featureIndex)return{};var s=0;for(var u in e){var l=a.getBucket(e[u]);l&&(s=Math.max(s,e[u].queryRadius(l)))}return this.featureIndex.query({queryGeometry:t,scale:n,tileSize:this.tileSize,bearing:i,params:r,additionalRadius:s,tileSourceMaxZoom:this.sourceMaxZoom,collisionBoxArray:this.collisionBoxArray,sourceID:o},e)},O.prototype.querySourceFeatures=function(e,t){var n=this;if(this.rawTileData){this.vtLayers||(this.vtLayers=new s.VectorTile(new u(this.rawTileData)).layers);var r=t?t.sourceLayer:"",i=this.vtLayers._geojsonTileLayer||this.vtLayers[r];if(i)for(var o=c(t&&t.filter),a={z:this.coord.z,x:this.coord.x,y:this.coord.y},f=0;f<i.length;f++){var h=i.feature(f);if(o({zoom:n.coord.z},h)){var p=new l(h,n.coord.z,n.coord.x,n.coord.y);p.tile=a,e.push(p)}}}},O.prototype.clearMask=function(){this.segments&&(this.segments.destroy(),delete this.segments),this.maskedBoundsBuffer&&(this.maskedBoundsBuffer.destroy(),delete this.maskedBoundsBuffer),this.maskedIndexBuffer&&(this.maskedIndexBuffer.destroy(),delete this.maskedIndexBuffer)},O.prototype.setMask=function(e,t){var n=this;if(!r.deepEqual(this.mask,e)&&(this.mask=e,this.clearMask(),!r.deepEqual(e,{0:!0}))){var i=new h,o=new x;this.segments=new b,this.segments.prepareSegment(0,i,o);for(var a=Object.keys(e),s=0;s<a.length;s++){var u=p.fromID(+a[s]),l=d>>u.z,c=new v(u.x*l,u.y*l),f=new v(c.x+l,c.y+l),m=n.segments.prepareSegment(4,i,o);i.emplaceBack(c.x,c.y,c.x,c.y),i.emplaceBack(f.x,c.y,f.x,c.y),i.emplaceBack(c.x,f.y,c.x,f.y),i.emplaceBack(f.x,f.y,f.x,f.y);var _=m.vertexLength;o.emplaceBack(_,_+1,_+2),o.emplaceBack(_+1,_+2,_+3),m.vertexLength+=4,m.primitiveLength+=2}this.maskedBoundsBuffer=new g(t,i),this.maskedIndexBuffer=new y(t,o)}},O.prototype.hasData=function(){return"loaded"===this.state||"reloading"===this.state||"expired"===this.state},O.prototype.setExpiryData=function(e){var t=this.expirationTime;if(e.cacheControl){var n=r.parseCacheControl(e.cacheControl);n["max-age"]&&(this.expirationTime=Date.now()+1e3*n["max-age"])}else e.expires&&(this.expirationTime=new Date(e.expires).getTime());if(this.expirationTime){var i=Date.now(),o=!1;if(this.expirationTime>i)o=!1;else if(t)if(this.expirationTime<t)o=!0;else{var a=this.expirationTime-t;a?this.expirationTime=i+Math.max(a,3e4):o=!0}else o=!0;o?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}},O.prototype.getExpiryTimeout=function(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-(new Date).getTime(),Math.pow(2,31)-1)},t.exports=O},{"../data/bucket":51,"../data/bucket/symbol_bucket":57,"../data/extent":58,"../data/feature_index":59,"../data/index_array_type":60,"../data/raster_bounds_array":64,"../data/segment":65,"../gl/index_buffer":71,"../gl/vertex_buffer":72,"../render/texture":93,"../source/pixels_to_tile_units":104,"../style-spec/feature_filter":145,"../symbol/collision_box":208,"../symbol/collision_index":210,"../symbol/projection":216,"../symbol/symbol_placement":220,"../util/util":266,"../util/vectortile_to_geojson":267,"./tile_coord":112,"@mapbox/point-geometry":2,"@mapbox/vector-tile":6,pbf:38}],111:[function(e,t,n){"use strict";var r=e("../geo/lng_lat_bounds"),i=e("../util/util").clamp,o=function(e,t,n){this.bounds=r.convert(this.validateBounds(e)),this.minzoom=t||0,this.maxzoom=n||24};o.prototype.validateBounds=function(e){return Array.isArray(e)&&4===e.length?[Math.max(-180,e[0]),Math.max(-90,e[1]),Math.min(180,e[2]),Math.min(90,e[3])]:[-180,-90,180,90]},o.prototype.contains=function(e,t){var n=t?Math.min(e.z,t):e.z,r={minX:Math.floor(this.lngX(this.bounds.getWest(),n)),minY:Math.floor(this.latY(this.bounds.getNorth(),n)),maxX:Math.ceil(this.lngX(this.bounds.getEast(),n)),maxY:Math.ceil(this.latY(this.bounds.getSouth(),n))};return e.x>=r.minX&&e.x<r.maxX&&e.y>=r.minY&&e.y<r.maxY},o.prototype.lngX=function(e,t){return(e+180)*(Math.pow(2,t)/360)},o.prototype.latY=function(e,t){var n=i(Math.sin(Math.PI/180*e),-.9999,.9999),r=Math.pow(2,t)/(2*Math.PI);return Math.pow(2,t-1)+.5*Math.log((1+n)/(1-n))*-r},t.exports=o},{"../geo/lng_lat_bounds":69,"../util/util":266}],112:[function(e,t,n){"use strict";function r(e,t){if(e.row>t.row){var n=e;e=t,t=n}return{x0:e.column,y0:e.row,x1:t.column,y1:t.row,dx:t.column-e.column,dy:t.row-e.row}}function i(e,t,n,r,i){var o=Math.max(n,Math.floor(t.y0)),a=Math.min(r,Math.ceil(t.y1));if(e.x0===t.x0&&e.y0===t.y0?e.x0+t.dy/e.dy*e.dx<t.x1:e.x1-t.dy/e.dy*e.dx<t.x0){var s=e;e=t,t=s}for(var u=e.dx/e.dy,l=t.dx/t.dy,c=e.dx>0,f=t.dx<0,h=o;h<a;h++){var p=u*Math.max(0,Math.min(e.dy,h+c-e.y0))+e.x0,d=l*Math.max(0,Math.min(t.dy,h+f-t.y0))+t.x0;i(Math.floor(d),Math.ceil(p),h)}}function o(e,t,n,o,a,s){var u,l=r(e,t),c=r(t,n),f=r(n,e);l.dy>c.dy&&(u=l,l=c,c=u),l.dy>f.dy&&(u=l,l=f,f=u),c.dy>f.dy&&(u=c,c=f,f=u),l.dy&&i(f,l,o,a,s),c.dy&&i(f,c,o,a,s)}function a(e,t,n){for(var r,i="",o=e;o>0;o--)r=1<<o-1,i+=(t&r?1:0)+(n&r?2:0);return i}var s=e("@mapbox/whoots-js"),u=e("../geo/coordinate"),l=function(e,t,n,r){(void 0===r||isNaN(r))&&(r=0),this.z=+e,this.x=+t,this.y=+n,this.w=+r,(r*=2)<0&&(r=-1*r-1);var i=1<<this.z;this.id=32*(i*i*r+i*this.y+this.x)+this.z,this.posMatrix=null};l.prototype.toString=function(){return this.z+"/"+this.x+"/"+this.y},l.prototype.toCoordinate=function(e){var t=Math.min(this.z,void 0===e?this.z:e),n=Math.pow(2,t),r=this.y,i=this.x+n*this.w;return new u(i,r,t)},l.prototype.url=function(e,t,n){var r=s.getTileBBox(this.x,this.y,this.z),i=a(this.z,this.x,this.y);return e[(this.x+this.y)%e.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",String(Math.min(this.z,t||this.z))).replace("{x}",String(this.x)).replace("{y}",String("tms"===n?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",i).replace("{bbox-epsg-3857}",r)},l.prototype.parent=function(e){return 0===this.z?null:this.z>e?new l(this.z-1,this.x,this.y,this.w):new l(this.z-1,Math.floor(this.x/2),Math.floor(this.y/2),this.w)},l.prototype.wrapped=function(){return new l(this.z,this.x,this.y,0)},l.prototype.isLessThan=function(e){return this.w<e.w||!(this.w>e.w)&&(this.z<e.z||!(this.z>e.z)&&(this.x<e.x||!(this.x>e.x)&&this.y<e.y))},l.prototype.children=function(e){if(this.z>=e)return[new l(this.z+1,this.x,this.y,this.w)];var t=this.z+1,n=2*this.x,r=2*this.y;return[new l(t,n,r,this.w),new l(t,n+1,r,this.w),new l(t,n,r+1,this.w),new l(t,n+1,r+1,this.w)]},l.prototype.scaledTo=function(e,t){return this.z>t?new l(e,this.x,this.y,this.w):e<=this.z?new l(e,this.x>>this.z-e,this.y>>this.z-e,this.w):new l(e,this.x<<e-this.z,this.y<<e-this.z,this.w)},l.prototype.isChildOf=function(e,t){var n=Math.min(t,e.z),r=Math.min(t,this.z);return 0===e.z||e.z<this.z&&e.x===this.x>>r-n&&e.y===this.y>>r-n},l.cover=function(e,t,n,r){function i(e,t,i){var o,u,c,f;if(i>=0&&i<=a)for(o=e;o<t;o++)u=Math.floor(o/a),c=(o%a+a)%a,0!==u&&!0!==r||(f=new l(n,c,i,u),s[f.id]=f)}void 0===r&&(r=!0);var a=1<<e,s={};return o(t[0],t[1],t[2],0,a,i),o(t[2],t[3],t[0],0,a,i),Object.keys(s).map(function(e){return s[e]})},l.fromID=function(e){var t=e%32,n=1<<t,r=(e-t)/32,i=r%n,o=(r-i)/n%n,a=Math.floor(r/(n*n));return a%2!=0&&(a=-1*a-1),a/=2,new l(t,i,o,a)},t.exports=l},{"../geo/coordinate":67,"@mapbox/whoots-js":10}],113:[function(e,t,n){"use strict";var r=e("../util/evented"),i=e("../util/util"),o=e("./load_tilejson"),a=e("../util/mapbox").normalizeTileURL,s=e("./tile_bounds"),u=e("../util/ajax").ResourceType,l=e("../util/browser"),c=function(e){function t(t,n,r,o){if(e.call(this),this.id=t,this.dispatcher=r,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,i.extend(this,i.pick(n,["url","scheme","tileSize"])),this._options=i.extend({type:"vector"},n),512!==this.tileSize)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(o)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.load=function(){var e=this;this.fire("dataloading",{dataType:"source"}),o(this._options,this.map._transformRequest,function(t,n){t?e.fire("error",t):n&&(i.extend(e,n),n.bounds&&(e.tileBounds=new s(n.bounds,e.minzoom,e.maxzoom)),e.fire("data",{dataType:"source",sourceDataType:"metadata"}),e.fire("data",{dataType:"source",sourceDataType:"content"}))})},t.prototype.hasTile=function(e){return!this.tileBounds||this.tileBounds.contains(e,this.maxzoom)},t.prototype.onAdd=function(e){this.map=e,this.load()},t.prototype.serialize=function(){return i.extend({},this._options)},t.prototype.loadTile=function(e,t){function n(n,r){return e.aborted?t(null):n?t(n):(this.map._refreshExpiredTiles&&e.setExpiryData(r),e.loadVectorData(r,this.map.painter),t(null),void(e.reloadCallback&&(this.loadTile(e,e.reloadCallback),e.reloadCallback=null)))}var r=e.coord.z>this.maxzoom?Math.pow(2,e.coord.z-this.maxzoom):1,i=a(e.coord.url(this.tiles,this.maxzoom,this.scheme),this.url),o={request:this.map._transformRequest(i,u.Tile),uid:e.uid,coord:e.coord,zoom:e.coord.z,tileSize:this.tileSize*r,type:this.type,source:this.id,pixelRatio:l.devicePixelRatio,overscaling:r,showCollisionBoxes:this.map.showCollisionBoxes};void 0===e.workerID||"expired"===e.state?e.workerID=this.dispatcher.send("loadTile",o,n.bind(this)):"loading"===e.state?e.reloadCallback=t:this.dispatcher.send("reloadTile",o,n.bind(this),e.workerID)},t.prototype.abortTile=function(e){this.dispatcher.send("abortTile",{uid:e.uid,type:this.type,source:this.id},void 0,e.workerID)},t.prototype.unloadTile=function(e){e.unloadVectorData(),this.dispatcher.send("removeTile",{uid:e.uid,type:this.type,source:this.id},void 0,e.workerID)},t.prototype.hasTransition=function(){return!1},t}(r);t.exports=c},{"../util/ajax":244,"../util/browser":245,"../util/evented":253,"../util/mapbox":260,"../util/util":266,"./load_tilejson":103,"./tile_bounds":111}],114:[function(e,t,n){"use strict";function r(e,t){var n=i.getArrayBuffer(e.request,function(e,n){e?t(e):n&&t(null,{vectorTile:new o.VectorTile(new a(n.data)),rawData:n.data,cacheControl:n.cacheControl,expires:n.expires})});return function(){n.abort(),t()}}var i=e("../util/ajax"),o=e("@mapbox/vector-tile"),a=e("pbf"),s=e("./worker_tile"),u=e("../util/util"),l=function(e,t,n){this.actor=e,this.layerIndex=t,this.loadVectorData=n||r,this.loading={},this.loaded={}};l.prototype.loadTile=function(e,t){var n=this,r=e.source,i=e.uid;this.loading[r]||(this.loading[r]={});var o=this.loading[r][i]=new s(e);o.abort=this.loadVectorData(e,function(e,a){if(delete n.loading[r][i],e||!a)return t(e);var s=a.rawData,l={};a.expires&&(l.expires=a.expires),a.cacheControl&&(l.cacheControl=a.cacheControl),o.vectorTile=a.vectorTile,o.parse(a.vectorTile,n.layerIndex,n.actor,function(e,n,r){if(e||!n)return t(e);t(null,u.extend({rawTileData:s},n,l),r)}),n.loaded[r]=n.loaded[r]||{},n.loaded[r][i]=o})},l.prototype.reloadTile=function(e,t){function n(e,n){if(this.reloadCallback){var r=this.reloadCallback;delete this.reloadCallback,this.parse(this.vectorTile,o.layerIndex,o.actor,r)}t(e,n)}var r=this.loaded[e.source],i=e.uid,o=this;if(r&&r[i]){var a=r[i];a.showCollisionBoxes=e.showCollisionBoxes,"parsing"===a.status?a.reloadCallback=t:"done"===a.status&&a.parse(a.vectorTile,this.layerIndex,this.actor,n.bind(a))}},l.prototype.abortTile=function(e,t){var n=this.loading[e.source],r=e.uid;n&&n[r]&&n[r].abort&&(n[r].abort(),delete n[r]),t()},l.prototype.removeTile=function(e,t){var n=this.loaded[e.source],r=e.uid;n&&n[r]&&delete n[r],t()},t.exports=l},{"../util/ajax":244,"../util/util":266,"./worker_tile":117,"@mapbox/vector-tile":6,pbf:38}],115:[function(e,t,n){"use strict";var r=e("../util/ajax"),i=e("./image_source"),o=function(e){function t(t,n,r,i){e.call(this,t,n,r,i),this.roundZoom=!0,this.type="video",this.options=n}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.load=function(){var e=this,t=this.options;this.urls=t.urls,r.getVideo(t.urls,function(t,n){t?e.fire("error",{error:t}):n&&(e.video=n,e.video.loop=!0,e.video.addEventListener("playing",function(){e.map._rerender()}),e.map&&e.video.play(),e._finishLoading())})},t.prototype.getVideo=function(){return this.video},t.prototype.onAdd=function(e){this.map||(this.map=e,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))},t.prototype.prepare=function(){0===Object.keys(this.tiles).length||this.video.readyState<2||this._prepareImage(this.map.painter.gl,this.video)},t.prototype.serialize=function(){return{type:"video",urls:this.urls,coordinates:this.coordinates}},t.prototype.hasTransition=function(){return this.video&&!this.video.paused},t}(i);t.exports=o},{"../util/ajax":244,"./image_source":102}],116:[function(e,t,n){"use strict";var r=e("../util/actor"),i=e("../style/style_layer_index"),o=e("./vector_tile_worker_source"),a=e("./geojson_worker_source"),s=e("./rtl_text_plugin"),u=function(e){var t=this;this.self=e,this.actor=new r(e,this),this.layerIndexes={},this.workerSourceTypes={vector:o,geojson:a},this.workerSources={},this.self.registerWorkerSource=function(e,n){if(t.workerSourceTypes[e])throw new Error('Worker source with name "'+e+'" already registered.');t.workerSourceTypes[e]=n},this.self.registerRTLTextPlugin=function(e){if(s.applyArabicShaping||s.processBidirectionalText)throw new Error("RTL text plugin already registered.");s.applyArabicShaping=e.applyArabicShaping,s.processBidirectionalText=e.processBidirectionalText}};u.prototype.setLayers=function(e,t,n){this.getLayerIndex(e).replace(t),n()},u.prototype.updateLayers=function(e,t,n){this.getLayerIndex(e).update(t.layers,t.removedIds),n()},u.prototype.loadTile=function(e,t,n){this.getWorkerSource(e,t.type).loadTile(t,n)},u.prototype.reloadTile=function(e,t,n){this.getWorkerSource(e,t.type).reloadTile(t,n)},u.prototype.abortTile=function(e,t,n){this.getWorkerSource(e,t.type).abortTile(t,n)},u.prototype.removeTile=function(e,t,n){this.getWorkerSource(e,t.type).removeTile(t,n)},u.prototype.removeSource=function(e,t,n){var r=this.getWorkerSource(e,t.type);void 0!==r.removeSource?r.removeSource(t,n):n()},u.prototype.loadWorkerSource=function(e,t,n){try{this.self.importScripts(t.url),n()}catch(e){n(e)}},u.prototype.loadRTLTextPlugin=function(e,t,n){try{s.applyArabicShaping||s.processBidirectionalText||(this.self.importScripts(t),s.applyArabicShaping&&s.processBidirectionalText||n(new Error("RTL Text Plugin failed to import scripts from "+t)))}catch(e){n(e)}},u.prototype.getLayerIndex=function(e){var t=this.layerIndexes[e];return t||(t=this.layerIndexes[e]=new i),t},u.prototype.getWorkerSource=function(e,t){var n=this;if(this.workerSources[e]||(this.workerSources[e]={}),!this.workerSources[e][t]){var r={send:function(t,r,i,o){n.actor.send(t,r,i,o,e)}};this.workerSources[e][t]=new this.workerSourceTypes[t](r,this.getLayerIndex(e))}return this.workerSources[e][t]},t.exports=function(e){return new u(e)}},{"../style/style_layer_index":203,"../util/actor":243,"./geojson_worker_source":100,"./rtl_text_plugin":107,"./vector_tile_worker_source":114}],117:[function(e,t,n){"use strict";function r(e,t){for(var n=0,r=e;n<r.length;n+=1)r[n].recalculate({zoom:t,now:Number.MAX_VALUE,defaultFadeDuration:0,zoomHistory:{lastIntegerZoom:0,lastIntegerZoomTime:0,lastZoom:0}})}function i(e,t){return e.filter(function(e){return!e.isEmpty()}).map(function(e){return e.serialize(t)})}var o=e("../data/feature_index"),a=e("../symbol/symbol_layout"),s=a.performSymbolLayout,u=e("../symbol/collision_box"),l=e("../util/dictionary_coder"),c=e("../data/bucket/symbol_bucket"),f=e("../util/util"),h=e("../render/image_atlas"),p=h.makeImageAtlas,d=e("../render/glyph_atlas"),v=d.makeGlyphAtlas,g=function(e){this.coord=e.coord,this.uid=e.uid,this.zoom=e.zoom,this.pixelRatio=e.pixelRatio,this.tileSize=e.tileSize,this.source=e.source,this.overscaling=e.overscaling,this.showCollisionBoxes=e.showCollisionBoxes};g.prototype.parse=function(e,t,n,a){function h(){var e=this;if(R)return a(R);if(I&&N){var t=v(I),n=p(N);for(var o in m){var u=m[o];u instanceof c&&(r(u.layers,e.zoom),s(u,I,t.positions,N,n.positions,e.showCollisionBoxes))}this.status="done";var l=[t.image.data.buffer,n.image.data.buffer];a(null,{buckets:i(f.values(m),l),featureIndex:y.serialize(l),collisionBoxArray:this.collisionBoxArray.serialize(),glyphAtlasImage:t.image,iconAtlasImage:n.image},l)}}var d=this;this.status="parsing",this.data=e,this.collisionBoxArray=new u;var g=new l(Object.keys(e.layers).sort()),y=new o(this.coord,this.overscaling);y.bucketLayerIDs=[];var m={},_={featureIndex:y,iconDependencies:{},glyphDependencies:{}},b=t.familiesBySource[this.source];for(var E in b){var x=e.layers[E];if(x){1===x.version&&f.warnOnce('Vector tile source "'+d.source+'" layer "'+E+'" does not use vector tile spec v2 and therefore may have some rendering errors.');for(var w=g.encode(E),T=[],S=0;S<x.length;S++){var A=x.feature(S);T.push({feature:A,index:S,sourceLayerIndex:w})}for(var C=0,O=b[E];C<O.length;C+=1){var k=O[C],P=k[0];P.minzoom&&d.zoom<Math.floor(P.minzoom)||P.maxzoom&&d.zoom>=P.maxzoom||"none"===P.visibility||(r(k,d.zoom),(m[P.id]=P.createBucket({index:y.bucketLayerIDs.length,layers:k,zoom:d.zoom,pixelRatio:d.pixelRatio,overscaling:d.overscaling,collisionBoxArray:d.collisionBoxArray})).populate(T,_),y.bucketLayerIDs.push(k.map(function(e){return e.id})))}}}var R,I,N,M=f.mapObject(_.glyphDependencies,function(e){return Object.keys(e).map(Number)});Object.keys(M).length?n.send("getGlyphs",{uid:this.uid,stacks:M},function(e,t){R||(R=e,I=t,h.call(d))}):I={};var L=Object.keys(_.iconDependencies);L.length?n.send("getImages",{icons:L},function(e,t){R||(R=e,N=t,h.call(d))}):N={},h.call(this)},t.exports=g},{"../data/bucket/symbol_bucket":57,"../data/feature_index":59,"../render/glyph_atlas":84,"../render/image_atlas":86,"../symbol/collision_box":208,"../symbol/symbol_layout":219,"../util/dictionary_coder":250,"../util/util":266}],118:[function(e,t,n){"use strict";function r(e,t){var n={};for(var r in e)"ref"!==r&&(n[r]=e[r]);return o.forEach(function(e){e in t&&(n[e]=t[e])}),n}function i(e){e=e.slice();for(var t=Object.create(null),n=0;n<e.length;n++)t[e[n].id]=e[n];for(var i=0;i<e.length;i++)"ref"in e[i]&&(e[i]=r(e[i],t[e[i].ref]));return e}var o=e("./util/ref_properties");t.exports=i},{"./util/ref_properties":155}],119:[function(e,t,n){"use strict";function r(e,t,n,r){e=e||{},t=t||{};var i;for(i in e)e.hasOwnProperty(i)&&(t.hasOwnProperty(i)||(n.push({command:c.removeSource,args:[i]}),r[i]=!0));for(i in t)t.hasOwnProperty(i)&&(e.hasOwnProperty(i)?l(e[i],t[i])||("geojson"===e[i].type&&"geojson"===t[i].type?n.push({command:c.setGeoJSONSourceData,args:[i,t[i].data]}):(n.push({command:c.removeSource,args:[i]}),n.push({command:c.addSource,args:[i,t[i]]}),r[i]=!0)):n.push({command:c.addSource,args:[i,t[i]]}))}function i(e,t,n,r,i,o){e=e||{},t=t||{};var a;for(a in e)e.hasOwnProperty(a)&&(l(e[a],t[a])||n.push({command:o,args:[r,a,t[a],i]}));for(a in t)t.hasOwnProperty(a)&&!e.hasOwnProperty(a)&&(l(e[a],t[a])||n.push({command:o,args:[r,a,t[a],i]}))}function o(e){return e.id}function a(e,t){return e[t.id]=t,e}function s(e,t,n){e=e||[],t=t||[];var r,s,u,f,h,p,d,v=e.map(o),g=t.map(o),y=e.reduce(a,{}),m=t.reduce(a,{}),_=v.slice(),b=Object.create(null);for(r=0,s=0;r<v.length;r++)u=v[r],m.hasOwnProperty(u)?s++:(n.push({command:c.removeLayer,args:[u]}),_.splice(_.indexOf(u,s),1));for(r=0,s=0;r<g.length;r++)u=g[g.length-1-r],_[_.length-1-r]!==u&&(y.hasOwnProperty(u)?(n.push({command:c.removeLayer,args:[u]}),_.splice(_.lastIndexOf(u,_.length-s),1)):s++,p=_[_.length-r],n.push({command:c.addLayer,args:[m[u],p]}),_.splice(_.length-r,0,u),b[u]=!0);for(r=0;r<g.length;r++)if(u=g[r],f=y[u],h=m[u],!b[u]&&!l(f,h))if(l(f.source,h.source)&&l(f["source-layer"],h["source-layer"])&&l(f.type,h.type)){i(f.layout,h.layout,n,u,null,c.setLayoutProperty),i(f.paint,h.paint,n,u,null,c.setPaintProperty),l(f.filter,h.filter)||n.push({command:c.setFilter,args:[u,h.filter]}),l(f.minzoom,h.minzoom)&&l(f.maxzoom,h.maxzoom)||n.push({command:c.setLayerZoomRange,args:[u,h.minzoom,h.maxzoom]});for(d in f)f.hasOwnProperty(d)&&"layout"!==d&&"paint"!==d&&"filter"!==d&&"metadata"!==d&&"minzoom"!==d&&"maxzoom"!==d&&(0===d.indexOf("paint.")?i(f[d],h[d],n,u,d.slice(6),c.setPaintProperty):l(f[d],h[d])||n.push({command:c.setLayerProperty,args:[u,d,h[d]]}));for(d in h)h.hasOwnProperty(d)&&!f.hasOwnProperty(d)&&"layout"!==d&&"paint"!==d&&"filter"!==d&&"metadata"!==d&&"minzoom"!==d&&"maxzoom"!==d&&(0===d.indexOf("paint.")?i(f[d],h[d],n,u,d.slice(6),c.setPaintProperty):l(f[d],h[d])||n.push({command:c.setLayerProperty,args:[u,d,h[d]]}))}else n.push({command:c.removeLayer,args:[u]}),p=_[_.lastIndexOf(u)+1],n.push({command:c.addLayer,args:[h,p]})}function u(e,t){if(!e)return[{command:c.setStyle,args:[t]}];var n=[];try{if(!l(e.version,t.version))return[{command:c.setStyle,args:[t]}];l(e.center,t.center)||n.push({command:c.setCenter,args:[t.center]}),l(e.zoom,t.zoom)||n.push({command:c.setZoom,args:[t.zoom]}),l(e.bearing,t.bearing)||n.push({command:c.setBearing,args:[t.bearing]}),l(e.pitch,t.pitch)||n.push({command:c.setPitch,args:[t.pitch]}),l(e.sprite,t.sprite)||n.push({command:c.setSprite,args:[t.sprite]}),l(e.glyphs,t.glyphs)||n.push({command:c.setGlyphs,args:[t.glyphs]}),l(e.transition,t.transition)||n.push({command:c.setTransition,args:[t.transition]}),l(e.light,t.light)||n.push({command:c.setLight,args:[t.light]});var i={},o=[];r(e.sources,t.sources,o,i);var a=[];e.layers&&e.layers.forEach(function(e){i[e.source]?n.push({command:c.removeLayer,args:[e.id]}):a.push(e)}),n=n.concat(o),s(a,t.layers,n)}catch(e){console.warn("Unable to compute style diff:",e),n=[{command:c.setStyle,args:[t]}]}return n}var l=e("lodash.isequal"),c={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};t.exports=u,t.exports.operations=c},{"lodash.isequal":34}],120:[function(e,t,n){"use strict";function r(e,t){for(var n=[],r=arguments.length-2;r-- >0;)n[r]=arguments[r+2];this.message=(e?e+": ":"")+i.apply(i,n),null!==t&&void 0!==t&&t.__line__&&(this.line=t.__line__)}var i=e("util").format;t.exports=r},{util:45}],121:[function(e,t,n){"use strict";function r(e){return{type:e}}function i(e){return Array.isArray(e)?"("+e.map(a).join(", ")+")":"("+a(e.type)+"...)"}var o=e("./types"),a=o.toString,s=e("./parsing_context"),u=(e("./evaluation_context"),function(e,t,n,r){this.name=e,this.type=t,this._evaluate=n,this.args=r});u.prototype.evaluate=function(e){return this._evaluate(e,this.args)},u.prototype.eachChild=function(e){this.args.forEach(e)},u.parse=function(e,t){var n=e[0],r=u.definitions[n];if(!r)return t.error('Unknown expression "'+n+'". If you wanted a literal array, use ["literal", [...]].',0);for(var o=Array.isArray(r)?r[0]:r.type,l=Array.isArray(r)?[[r[1],r[2]]]:r.overloads,c=l.filter(function(t){var n=t[0];return!Array.isArray(n)||n.length===e.length-1}),f=[],h=1;h<e.length;h++){var p=e[h],d=void 0;if(1===c.length){var v=c[0][0];d=Array.isArray(v)?v[h-1]:v.type}var g=t.parse(p,1+f.length,d);if(!g)return null;f.push(g)}for(var y=null,m=0,_=c;m<_.length;m+=1){var b=_[m],E=b[0],x=b[1];if(y=new s(t.definitions,t.path,null,t.scope),Array.isArray(E)&&E.length!==f.length)y.error("Expected "+E.length+" arguments, but found "+f.length+" instead.");else{for(var w=0;w<f.length;w++){var T=Array.isArray(E)?E[w]:E.type,S=f[w];y.concat(w+1).checkSubtype(T,S.type)}if(0===y.errors.length)return new u(n,o,x,f)}}if(1===c.length)t.errors.push.apply(t.errors,y.errors);else{var A=c.length?c:l,C=A.map(function(e){return i(e[0])}).join(" | "),O=f.map(function(e){return a(e.type)}).join(", ");t.error("Expected arguments of type "+C+", but found ("+O+") instead.")}return null},u.register=function(e,t){u.definitions=t;for(var n in t)e[n]=u},t.exports={CompoundExpression:u,varargs:r}},{"./evaluation_context":135,"./parsing_context":138,"./types":143}],122:[function(e,t,n){"use strict";var r=e("../types"),i=r.toString,o=r.array,a=r.ValueType,s=r.StringType,u=r.NumberType,l=r.BooleanType,c=r.checkSubtype,f=e("../values"),h=f.typeOf,p=e("../runtime_error"),d={string:s,number:u,boolean:l},v=function(e,t){this.type=e,this.input=t};v.parse=function(e,t){if(e.length<2||e.length>4)return t.error("Expected 1, 2, or 3 arguments, but found "+(e.length-1)+" instead.");var n,r;if(e.length>2){var i=e[1];if("string"!=typeof i||!(i in d))return t.error('The item type argument of "array" must be one of string, number, boolean',1);n=d[i]}else n=a;if(e.length>3){if("number"!=typeof e[2]||e[2]<0||e[2]!==Math.floor(e[2]))return t.error('The length argument to "array" must be a positive integer literal',2);r=e[2]}var s=o(n,r),u=t.parse(e[e.length-1],e.length-1,a);return u?new v(s,u):null},v.prototype.evaluate=function(e){var t=this.input.evaluate(e);if(c(this.type,h(t)))throw new p("Expected value to be of type "+i(this.type)+", but found "+i(h(t))+" instead.");return t},v.prototype.eachChild=function(e){e(this.input)},t.exports=v},{"../runtime_error":140,"../types":143,"../values":144}],123:[function(e,t,n){"use strict";var r=e("../types"),i=r.ObjectType,o=r.ValueType,a=r.StringType,s=r.NumberType,u=r.BooleanType,l=e("../runtime_error"),c=e("../types"),f=c.checkSubtype,h=c.toString,p=e("../values"),d=p.typeOf,v={string:a,number:s,boolean:u,object:i},g=function(e,t){this.type=e,this.args=t};g.parse=function(e,t){if(e.length<2)return t.error("Expected at least one argument.");for(var n=e[0],r=v[n],i=[],a=1;a<e.length;a++){var s=t.parse(e[a],a,o);if(!s)return null;i.push(s)}return new g(r,i)},g.prototype.evaluate=function(e){for(var t=this,n=0;n<this.args.length;n++){var r=t.args[n].evaluate(e);if(!f(t.type,d(r)))return r;if(n===t.args.length-1)throw new l("Expected value to be of type "+h(t.type)+", but found "+h(d(r))+" instead.")}return null},g.prototype.eachChild=function(e){this.args.forEach(e)},t.exports=g},{"../runtime_error":140,"../types":143,"../values":144}],124:[function(e,t,n){"use strict";var r=e("../types"),i=r.array,o=r.ValueType,a=r.NumberType,s=e("../runtime_error"),u=function(e,t,n){this.type=e,this.index=t,this.input=n};u.parse=function(e,t){if(3!==e.length)return t.error("Expected 2 arguments, but found "+(e.length-1)+" instead.");var n=t.parse(e[1],1,a),r=t.parse(e[2],2,i(t.expectedType||o));if(!n||!r)return null;var s=r.type;return new u(s.itemType,n,r)},u.prototype.evaluate=function(e){var t=this.index.evaluate(e),n=this.input.evaluate(e);if(t<0||t>=n.length)throw new s("Array index out of bounds: "+t+" > "+n.length+".");if(t!==Math.floor(t))throw new s("Array index must be an integer, but found "+t+" instead.");return n[t]},u.prototype.eachChild=function(e){e(this.index),e(this.input)},t.exports=u},{"../runtime_error":140,"../types":143}],125:[function(e,t,n){"use strict";var r=e("../types"),i=r.BooleanType,o=function(e,t,n){this.type=e,this.branches=t,this.otherwise=n};o.parse=function(e,t){if(e.length<4)return t.error("Expected at least 3 arguments, but found only "+(e.length-1)+".");if(e.length%2!=0)return t.error("Expected an odd number of arguments.");var n;t.expectedType&&"value"!==t.expectedType.kind&&(n=t.expectedType);for(var r=[],a=1;a<e.length-1;a+=2){var s=t.parse(e[a],a,i);if(!s)return null;var u=t.parse(e[a+1],a+1,n);if(!u)return null;r.push([s,u]),n=n||u.type}var l=t.parse(e[e.length-1],e.length-1,n);return l?new o(n,r,l):null},o.prototype.evaluate=function(e){for(var t=this,n=0,r=t.branches;n<r.length;n+=1){var i=r[n],o=i[0],a=i[1];if(o.evaluate(e))return a.evaluate(e)}return this.otherwise.evaluate(e)},o.prototype.eachChild=function(e){for(var t=this,n=0,r=t.branches;n<r.length;n+=1){var i=r[n],o=i[0],a=i[1];e(o),e(a)}e(this.otherwise)},t.exports=o},{"../types":143}],126:[function(e,t,n){"use strict";var r=function(e,t){this.type=e,this.args=t};r.parse=function(e,t){if(e.length<2)return t.error("Expectected at least one argument.");var n=null;t.expectedType&&"value"!==t.expectedType.kind&&(n=t.expectedType);for(var i=[],o=0,a=e.slice(1);o<a.length;o+=1){var s=a[o],u=t.parse(s,1+i.length,n);if(!u)return null;n=n||u.type,i.push(u)}return new r(n,i)},r.prototype.evaluate=function(e){for(var t=this,n=null,r=0,i=t.args;r<i.length&&null===(n=i[r].evaluate(e));r+=1);return n},r.prototype.eachChild=function(e){this.args.forEach(e)},t.exports=r},{}],127:[function(e,t,n){"use strict";var r=e("../types"),i=r.ColorType,o=r.ValueType,a=r.NumberType,s=e("../values"),u=s.Color,l=s.validateRGBA,c=e("../runtime_error"),f={"to-number":a,"to-color":i},h=function(e,t){this.type=e,this.args=t};h.parse=function(e,t){if(e.length<2)return t.error("Expected at least one argument.");for(var n=e[0],r=f[n],i=[],a=1;a<e.length;a++){var s=t.parse(e[a],a,o);if(!s)return null;i.push(s)}return new h(r,i)},h.prototype.evaluate=function(e){var t=this;if("color"===this.type.kind){for(var n,r,i=0,o=t.args;i<o.length;i+=1)if(n=o[i].evaluate(e),r=null,"string"==typeof n){var a=e.parseColor(n);if(a)return a}else if(Array.isArray(n)&&!(r=n.length<3||n.length>4?"Invalid rbga value "+JSON.stringify(n)+": expected an array containing either three or four numeric values.":l(n[0],n[1],n[2],n[3])))return new u(n[0]/255,n[1]/255,n[2]/255,n[3]);throw new c(r||"Could not parse color from value '"+("string"==typeof n?n:JSON.stringify(n))+"'")}for(var s=null,f=0,h=t.args;f<h.length;f+=1)if(null!==(s=h[f].evaluate(e))){var p=Number(s);if(!isNaN(p))return p}throw new c("Could not convert "+JSON.stringify(s)+" to number.")},h.prototype.eachChild=function(e){this.args.forEach(e)},t.exports=h},{"../runtime_error":140,"../types":143,"../values":144}],128:[function(e,t,n){"use strict";function r(e,t){var n=t[0],r=t[1],i=t[2],o=t[3];n=n.evaluate(e),r=r.evaluate(e),i=i.evaluate(e),o=o&&o.evaluate(e);var a=C(n,r,i,o);if(a)throw new R(a);return new A(n/255,r/255,i/255,o)}function i(e,t){return e in t}function o(e,t){var n=t[e];return void 0===n?null:n}function a(e,t){return t[0].evaluate(e).length}function s(e,t){var n=t[0],r=t[1];return n.evaluate(e)===r.evaluate(e)}function u(e,t){var n=t[0],r=t[1];return n.evaluate(e)!==r.evaluate(e)}function l(e,t){var n=t[0],r=t[1];return n.evaluate(e)<r.evaluate(e)}function c(e,t){var n=t[0],r=t[1];return n.evaluate(e)>r.evaluate(e)}function f(e,t){var n=t[0],r=t[1];return n.evaluate(e)<=r.evaluate(e)}function h(e,t){var n=t[0],r=t[1];return n.evaluate(e)>=r.evaluate(e)}var p=e("../types"),d=p.NullType,v=p.NumberType,g=p.StringType,y=p.BooleanType,m=p.ColorType,_=p.ObjectType,b=p.ValueType,E=p.ErrorType,x=p.array,w=p.toString,T=e("../values"),S=T.typeOf,A=T.Color,C=T.validateRGBA,O=e("../compound_expression"),k=O.CompoundExpression,P=O.varargs,R=e("../runtime_error"),I=e("./let"),N=e("./var"),M=e("./literal"),L=e("./assertion"),D=e("./array"),F=e("./coercion"),j=e("./at"),B=e("./match"),U=e("./case"),z=e("./step"),V=e("./interpolate"),G=e("./coalesce"),H={let:I,var:N,literal:M,string:L,number:L,boolean:L,object:L,array:D,"to-number":F,"to-color":F,at:j,case:U,match:B,coalesce:G,step:z,interpolate:V};k.register(H,{error:[E,[g],function(e,t){var n=t[0];throw new R(n.evaluate(e))}],typeof:[g,[b],function(e,t){var n=t[0];return w(S(n.evaluate(e)))}],"to-string":[g,[b],function(e,t){var n=t[0];n=n.evaluate(e);var r=typeof n;return null===n||"string"===r||"number"===r||"boolean"===r?String(n):n instanceof A?"rgba("+255*n.r+","+255*n.g+","+255*n.b+","+n.a+")":JSON.stringify(n)}],"to-boolean":[y,[b],function(e,t){var n=t[0];return Boolean(n.evaluate(e))}],"to-rgba":[x(v,4),[m],function(e,t){var n=t[0],r=n.evaluate(e);return[r.r,r.g,r.b,r.a]}],rgb:[m,[v,v,v],r],rgba:[m,[v,v,v,v],r],length:{type:v,overloads:[[[g],a],[[x(b)],a]]},has:{type:y,overloads:[[[g],function(e,t){return i(t[0].evaluate(e),e.properties())}],[[g,_],function(e,t){var n=t[0],r=t[1];return i(n.evaluate(e),r.evaluate(e))}]]},get:{type:b,overloads:[[[g],function(e,t){return o(t[0].evaluate(e),e.properties())}],[[g,_],function(e,t){var n=t[0],r=t[1];return o(n.evaluate(e),r.evaluate(e))}]]},properties:[_,[],function(e){return e.properties()}],"geometry-type":[g,[],function(e){return e.geometryType()}],id:[b,[],function(e){return e.id()}],zoom:[v,[],function(e){return e.globals.zoom}],"heatmap-density":[v,[],function(e){return e.globals.heatmapDensity||0}],"+":[v,P(v),function(e,t){for(var n=0,r=0,i=t;r<i.length;r+=1)n+=i[r].evaluate(e);return n}],"*":[v,P(v),function(e,t){for(var n=1,r=0,i=t;r<i.length;r+=1)n*=i[r].evaluate(e);return n}],"-":{type:v,overloads:[[[v,v],function(e,t){var n=t[0],r=t[1];return n.evaluate(e)-r.evaluate(e)}],[[v],function(e,t){return-t[0].evaluate(e)}]]},"/":[v,[v,v],function(e,t){var n=t[0],r=t[1];return n.evaluate(e)/r.evaluate(e)}],"%":[v,[v,v],function(e,t){var n=t[0],r=t[1];return n.evaluate(e)%r.evaluate(e)}],ln2:[v,[],function(){return Math.LN2}],pi:[v,[],function(){return Math.PI}],e:[v,[],function(){return Math.E}],"^":[v,[v,v],function(e,t){var n=t[0],r=t[1];return Math.pow(n.evaluate(e),r.evaluate(e))}],sqrt:[v,[v],function(e,t){var n=t[0];return Math.sqrt(n.evaluate(e))}],log10:[v,[v],function(e,t){var n=t[0];return Math.log10(n.evaluate(e))}],ln:[v,[v],function(e,t){var n=t[0];return Math.log(n.evaluate(e))}],log2:[v,[v],function(e,t){var n=t[0];return Math.log2(n.evaluate(e))}],sin:[v,[v],function(e,t){var n=t[0];return Math.sin(n.evaluate(e))}],cos:[v,[v],function(e,t){var n=t[0];return Math.cos(n.evaluate(e))}],tan:[v,[v],function(e,t){var n=t[0];return Math.tan(n.evaluate(e))}],asin:[v,[v],function(e,t){var n=t[0];return Math.asin(n.evaluate(e))}],acos:[v,[v],function(e,t){var n=t[0];return Math.acos(n.evaluate(e))}],atan:[v,[v],function(e,t){var n=t[0];return Math.atan(n.evaluate(e))}],min:[v,P(v),function(e,t){return Math.min.apply(Math,t.map(function(t){return t.evaluate(e)}))}],max:[v,P(v),function(e,t){return Math.max.apply(Math,t.map(function(t){return t.evaluate(e)}))}],"==":{type:y,overloads:[[[v,v],s],[[g,g],s],[[y,y],s],[[d,d],s]]},"!=":{type:y,overloads:[[[v,v],u],[[g,g],u],[[y,y],u],[[d,d],u]]},">":{type:y,overloads:[[[v,v],c],[[g,g],c]]},"<":{type:y,overloads:[[[v,v],l],[[g,g],l]]},">=":{type:y,overloads:[[[v,v],h],[[g,g],h]]},"<=":{type:y,overloads:[[[v,v],f],[[g,g],f]]},all:{type:y,overloads:[[[y,y],function(e,t){var n=t[0],r=t[1];return n.evaluate(e)&&r.evaluate(e)}],[P(y),function(e,t){for(var n=0,r=t;n<r.length;n+=1)if(!r[n].evaluate(e))return!1;return!0}]]},any:{type:y,overloads:[[[y,y],function(e,t){var n=t[0],r=t[1];return n.evaluate(e)||r.evaluate(e)}],[P(y),function(e,t){for(var n=0,r=t;n<r.length;n+=1)if(r[n].evaluate(e))return!0;return!1}]]},"!":[y,[y],function(e,t){return!t[0].evaluate(e)}],upcase:[g,[g],function(e,t){return t[0].evaluate(e).toUpperCase()}],downcase:[g,[g],function(e,t){return t[0].evaluate(e).toLowerCase()}],concat:[g,P(g),function(e,t){return t.map(function(t){return t.evaluate(e)}).join("")}]}),t.exports=H},{"../compound_expression":121,"../runtime_error":140,"../types":143,"../values":144,"./array":122,"./assertion":123,"./at":124,"./case":125,"./coalesce":126,"./coercion":127,"./interpolate":129,"./let":130,"./literal":131,"./match":132,"./step":133,"./var":134}],129:[function(e,t,n){"use strict";function r(e,t,n,r){var i=r-n,o=e-n;return 0===i?0:1===t?o/i:(Math.pow(t,o)-1)/(Math.pow(t,i)-1)}var i=e("@mapbox/unitbezier"),o=e("../../util/interpolate"),a=e("../types"),s=a.toString,u=a.NumberType,l=e("../stops"),c=l.findStopLessThanOrEqualTo,f=function(e,t,n,r){var i=this;this.type=e,this.interpolation=t,this.input=n,this.labels=[],this.outputs=[];for(var o=0,a=r;o<a.length;o+=1){var s=a[o],u=s[0],l=s[1];i.labels.push(u),i.outputs.push(l)}};f.interpolationFactor=function(e,t,n,o){var a=0;if("exponential"===e.name)a=r(t,e.base,n,o);else if("linear"===e.name)a=r(t,1,n,o);else if("cubic-bezier"===e.name){var s=e.controlPoints,u=new i(s[0],s[1],s[2],s[3]);a=u.solve(r(t,1,n,o))}return a},f.parse=function(e,t){var n=e[1],r=e[2],i=e.slice(3);if(!Array.isArray(n)||0===n.length)return t.error("Expected an interpolation type expression.",1);if("linear"===n[0])n={name:"linear"};else if("exponential"===n[0]){var o=n[1];if("number"!=typeof o)return t.error("Exponential interpolation requires a numeric base.",1,1);n={name:"exponential",base:o}}else{if("cubic-bezier"!==n[0])return t.error("Unknown interpolation type "+String(n[0]),1,0);var a=n.slice(1);if(4!==a.length||a.some(function(e){return"number"!=typeof e||e<0||e>1}))return t.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);n={name:"cubic-bezier",controlPoints:a}}if(e.length-1<4)return t.error("Expected at least 4 arguments, but found only "+(e.length-1)+".");if((e.length-1)%2!=0)return t.error("Expected an even number of arguments.");if(!(r=t.parse(r,2,u)))return null;var l=[],c=null;t.expectedType&&"value"!==t.expectedType.kind&&(c=t.expectedType);for(var h=0;h<i.length;h+=2){var p=i[h],d=i[h+1],v=h+3,g=h+4;if("number"!=typeof p)return t.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',v);if(l.length&&l[l.length-1][0]>=p)return t.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',v);var y=t.parse(d,g,c);if(!y)return null;c=c||y.type,l.push([p,y])}return"number"===c.kind||"color"===c.kind||"array"===c.kind&&"number"===c.itemType.kind&&"number"==typeof c.N?new f(c,n,r,l):t.error("Type "+s(c)+" is not interpolatable.")},f.prototype.evaluate=function(e){var t=this.labels,n=this.outputs;if(1===t.length)return n[0].evaluate(e);var r=this.input.evaluate(e);if(r<=t[0])return n[0].evaluate(e);var i=t.length;if(r>=t[i-1])return n[i-1].evaluate(e);var a=c(t,r),s=t[a],u=t[a+1],l=f.interpolationFactor(this.interpolation,r,s,u),h=n[a].evaluate(e),p=n[a+1].evaluate(e);return o[this.type.kind.toLowerCase()](h,p,l)},f.prototype.eachChild=function(e){var t=this;e(this.input);for(var n=0,r=t.outputs;n<r.length;n+=1)e(r[n])},t.exports=f},{"../../util/interpolate":154,"../stops":142,"../types":143,"@mapbox/unitbezier":5}],130:[function(e,t,n){"use strict";var r=function(e,t){this.type=t.type,this.bindings=[].concat(e),this.result=t};r.prototype.evaluate=function(e){e.pushScope(this.bindings);var t=this.result.evaluate(e);return e.popScope(),t},r.prototype.eachChild=function(e){for(var t=this,n=0,r=t.bindings;n<r.length;n+=1)e(r[n][1]);e(this.result)},r.parse=function(e,t){if(e.length<4)return t.error("Expected at least 3 arguments, but found "+(e.length-1)+" instead.");for(var n=[],i=1;i<e.length-1;i+=2){var o=e[i];if("string"!=typeof o)return t.error("Expected string, but found "+typeof o+" instead.",i);if(/[^a-zA-Z0-9_]/.test(o))return t.error("Variable names must contain only alphanumeric characters or '_'.",i);var a=t.parse(e[i+1],i+1);if(!a)return null;n.push([o,a])}var s=t.parse(e[e.length-1],e.length-1,void 0,n);return s?new r(n,s):null},t.exports=r},{}],131:[function(e,t,n){"use strict";var r=e("../values"),i=r.isValue,o=r.typeOf,a=function(e,t){this.type=e,this.value=t};a.parse=function(e,t){if(2!==e.length)return t.error("'literal' expression requires exactly one argument, but found "+(e.length-1)+" instead.");if(!i(e[1]))return t.error("invalid value");var n=e[1],r=o(n),s=t.expectedType;return"array"!==r.kind||0!==r.N||!s||"array"!==s.kind||"number"==typeof s.N&&0!==s.N||(r=s),new a(r,n)},a.prototype.evaluate=function(){return this.value},a.prototype.eachChild=function(){},t.exports=a},{"../values":144}],132:[function(e,t,n){"use strict";var r=e("../values"),i=r.typeOf,o=function(e,t,n,r,i,o){this.inputType=e,this.type=t,this.input=n,this.cases=r,this.outputs=i,this.otherwise=o};o.parse=function(e,t){if(e.length<5)return t.error("Expected at least 4 arguments, but found only "+(e.length-1)+".");if(e.length%2!=1)return t.error("Expected an even number of arguments.");var n,r;t.expectedType&&"value"!==t.expectedType.kind&&(r=t.expectedType);for(var a={},s=[],u=2;u<e.length-1;u+=2){var l=e[u],c=e[u+1];Array.isArray(l)||(l=[l]);var f=t.concat(u);if(0===l.length)return f.error("Expected at least one branch label.");for(var h=0,p=l;h<p.length;h+=1){var d=p[h];if("number"!=typeof d&&"string"!=typeof d)return f.error("Branch labels must be numbers or strings.");if("number"==typeof d&&Math.abs(d)>Number.MAX_SAFE_INTEGER)return f.error("Branch labels must be integers no larger than "+Number.MAX_SAFE_INTEGER+".");if("number"==typeof d&&Math.floor(d)!==d)return f.error("Numeric branch labels must be integer values.");if(n){if(f.checkSubtype(n,i(d)))return null}else n=i(d);if(void 0!==a[String(d)])return f.error("Branch labels must be unique.");a[String(d)]=s.length}var v=t.parse(c,u,r);if(!v)return null;r=r||v.type,s.push(v)}var g=t.parse(e[1],1,n);if(!g)return null;var y=t.parse(e[e.length-1],e.length-1,r);return y?new o(n,r,g,a,s,y):null},o.prototype.evaluate=function(e){var t=this.input.evaluate(e);return(this.outputs[this.cases[t]]||this.otherwise).evaluate(e)},o.prototype.eachChild=function(e){e(this.input),this.outputs.forEach(e),e(this.otherwise)},t.exports=o},{"../values":144}],133:[function(e,t,n){"use strict";var r=e("../types"),i=r.NumberType,o=e("../stops"),a=o.findStopLessThanOrEqualTo,s=function(e,t,n){var r=this;this.type=e,this.input=t,this.labels=[],this.outputs=[];for(var i=0,o=n;i<o.length;i+=1){var a=o[i],s=a[0],u=a[1];r.labels.push(s),r.outputs.push(u)}};s.parse=function(e,t){var n=e[1],r=e.slice(2);if(e.length-1<4)return t.error("Expected at least 4 arguments, but found only "+(e.length-1)+".");if((e.length-1)%2!=0)return t.error("Expected an even number of arguments.");if(!(n=t.parse(n,1,i)))return null;var o=[],a=null;t.expectedType&&"value"!==t.expectedType.kind&&(a=t.expectedType),r.unshift(-1/0);for(var u=0;u<r.length;u+=2){var l=r[u],c=r[u+1],f=u+1,h=u+2;if("number"!=typeof l)return t.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',f);if(o.length&&o[o.length-1][0]>=l)return t.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',f);var p=t.parse(c,h,a);if(!p)return null;a=a||p.type,o.push([l,p])}return new s(a,n,o)},s.prototype.evaluate=function(e){var t=this.labels,n=this.outputs;if(1===t.length)return n[0].evaluate(e);var r=this.input.evaluate(e);if(r<=t[0])return n[0].evaluate(e);var i=t.length;return r>=t[i-1]?n[i-1].evaluate(e):n[a(t,r)].evaluate(e)},s.prototype.eachChild=function(e){var t=this;e(this.input);for(var n=0,r=t.outputs;n<r.length;n+=1)e(r[n])},t.exports=s},{"../stops":142,"../types":143}],134:[function(e,t,n){"use strict";var r=function(e,t){this.type=t,this.name=e};r.parse=function(e,t){if(2!==e.length||"string"!=typeof e[1])return t.error("'var' expression requires exactly one string literal argument.");var n=e[1];return t.scope.has(n)?new r(n,t.scope.get(n).type):t.error('Unknown variable "'+n+'". Make sure "'+n+'" has been bound in an enclosing "let" expression before using it.',1)},r.prototype.evaluate=function(e){return e.scope.get(this.name).evaluate(e)},r.prototype.eachChild=function(){},t.exports=r},{}],135:[function(e,t,n){"use strict";var r=e("./scope"),i=e("./values"),o=i.Color,a=["Unknown","Point","LineString","Polygon"],s=function(){this.scope=new r,this._parseColorCache={}};s.prototype.id=function(){return this.feature&&"id"in this.feature?this.feature.id:null},s.prototype.geometryType=function(){return this.feature?"number"==typeof this.feature.type?a[this.feature.type]:this.feature.type:null},s.prototype.properties=function(){return this.feature&&this.feature.properties||{}},s.prototype.pushScope=function(e){this.scope=this.scope.concat(e)},s.prototype.popScope=function(){this.scope=this.scope.parent},s.prototype.parseColor=function(e){var t=this._parseColorCache[e];return t||(t=this._parseColorCache[e]=o.parse(e)),t},t.exports=s},{"./scope":141,"./values":144}],136:[function(e,t,n){"use strict";function r(e){return Array.isArray(e)&&e.length>0&&"string"==typeof e[0]&&e[0]in _}function i(e,t,n){void 0===n&&(n={});var r=new f(_,[],u(t)),i=r.parse(e);if(!i)return T(r.errors);var o,a=new h;if(!1===n.handleErrors)o=function(e,t){return a.globals=e,a.feature=t,i.evaluate(a)};else{var s,c={},p=l(t);"enum"===t.type&&(s=t.values),o=function(e,t){a.globals=e,a.feature=t;try{var n=i.evaluate(a);if(null===n||void 0===n)return p;if(s&&!(n in s))throw new E("Expected value to be one of "+Object.keys(s).map(function(e){return JSON.stringify(e)}).join(", ")+", but found "+JSON.stringify(n)+" instead.");return n}catch(e){return c[e.message]||(c[e.message]=!0,"undefined"!=typeof console&&console.warn(e.message)),p}}}return w({evaluate:o,parsed:i})}function o(e,t,n){if(void 0===n&&(n={}),e=i(e,t,n),"error"===e.result)return e;var r=e.value,o=r.evaluate,a=r.parsed,u=b.isFeatureConstant(a);if(!u&&!t["property-function"])return T([new c("","property expressions not supported")]);var l=b.isGlobalPropertyConstant(a,["zoom"]);if(!l&&!1===t["zoom-function"])return T([new c("","zoom expressions not supported")]);var f=s(a);if(!f&&!l)return T([new c("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')]);if(f instanceof c)return T([f]);if(f instanceof g&&"piecewise-constant"===t.function)return T([new c("",'"interpolate" expressions cannot be used with this property')]);if(!f)return w(u?{kind:"constant",parsed:a,evaluate:o}:{kind:"source",parsed:a,evaluate:o});var h=f instanceof g?g.interpolationFactor.bind(void 0,f.interpolation):function(){return 0},p=f.labels;return w(u?{kind:"camera",parsed:a,evaluate:o,interpolationFactor:h,zoomStops:p}:{kind:"composite",parsed:a,evaluate:o,interpolationFactor:h,zoomStops:p})}function a(e,t){if(A(e))return C(e,t);if(r(e)){var n=o(e,t);if("error"===n.result)throw new Error(n.value.map(function(e){return e.key+": "+e.message}).join(", "));return n.value}var i=e;return"string"==typeof e&&"color"===t.type&&(i=k.parse(e)),{kind:"constant",evaluate:function(){return i}}}function s(e){var t=null;if(e instanceof m)t=s(e.result);else if(e instanceof y)for(var n=0,r=e.args;n<r.length;n+=1){var i=r[n];if(t=s(i))break}else(e instanceof v||e instanceof g)&&e.input instanceof d&&"zoom"===e.input.name&&(t=e);return t instanceof c?t:(e.eachChild(function(e){var n=s(e);n instanceof c?t=n:!t&&n?t=new c("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):t&&n&&t!==n&&(t=new c("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),t)}function u(e){var t={color:R,string:I,number:N,enum:I,boolean:M};return"array"===e.type?D(t[e.value]||L,e.length):t[e.type]||null}function l(e){return"color"===e.type&&A(e.default)?new k(0,0,0,0):"color"===e.type?k.parse(e.default)||null:void 0===e.default?null:e.default}var c=e("./parsing_error"),f=e("./parsing_context"),h=e("./evaluation_context"),p=e("./compound_expression"),d=p.CompoundExpression,v=e("./definitions/step"),g=e("./definitions/interpolate"),y=e("./definitions/coalesce"),m=e("./definitions/let"),_=e("./definitions"),b=e("./is_constant"),E=e("./runtime_error"),x=e("../util/result"),w=x.success,T=x.error,S=e("../function"),A=S.isFunction,C=S.createFunction,O=e("./values"),k=O.Color;t.exports={isExpression:r,createExpression:i,createPropertyExpression:o,normalizePropertyExpression:a};var P=e("./types"),R=P.ColorType,I=P.StringType,N=P.NumberType,M=P.BooleanType,L=P.ValueType,D=P.array},{"../function":146,"../util/result":156,"./compound_expression":121,"./definitions":128,"./definitions/coalesce":126,"./definitions/interpolate":129,"./definitions/let":130,"./definitions/step":133,"./evaluation_context":135,"./is_constant":137,"./parsing_context":138,"./parsing_error":139,"./runtime_error":140,"./types":143,"./values":144}],137:[function(e,t,n){"use strict";function r(e){if(e instanceof a){if("get"===e.name&&1===e.args.length)return!1;if("has"===e.name&&1===e.args.length)return!1;if("properties"===e.name||"geometry-type"===e.name||"id"===e.name)return!1}var t=!0;return e.eachChild(function(e){t&&!r(e)&&(t=!1)}),t}function i(e,t){if(e instanceof a&&t.indexOf(e.name)>=0)return!1;var n=!0;return e.eachChild(function(e){n&&!i(e,t)&&(n=!1)}),n}var o=e("./compound_expression"),a=o.CompoundExpression;t.exports={isFeatureConstant:r,isGlobalPropertyConstant:i}},{"./compound_expression":121}],138:[function(e,t,n){"use strict";function r(t){var n=e("./compound_expression"),r=n.CompoundExpression,i=e("./is_constant"),o=i.isGlobalPropertyConstant,a=i.isFeatureConstant;if(t instanceof e("./definitions/var"))return!1;if(t instanceof r&&"error"===t.name)return!1;var s=!0;return t.eachChild(function(e){e instanceof u||(s=!1)}),!!s&&a(t)&&o(t,["zoom","heatmap-density"])}var i=e("./scope"),o=e("./types"),a=o.checkSubtype,s=e("./parsing_error"),u=e("./definitions/literal"),l=function(e,t,n,r,o){void 0===t&&(t=[]),void 0===r&&(r=new i),void 0===o&&(o=[]),this.definitions=e,this.path=t,this.key=t.map(function(e){return"["+e+"]"}).join(""),this.scope=r,this.errors=o,this.expectedType=n};l.prototype.parse=function(t,n,i,o){var a=this;if(n&&(a=a.concat(n,i,o)),null!==t&&"string"!=typeof t&&"boolean"!=typeof t&&"number"!=typeof t||(t=["literal",t]),Array.isArray(t)){if(0===t.length)return a.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var s=t[0];if("string"!=typeof s)return a.error("Expression name must be a string, but found "+typeof s+' instead. If you wanted a literal array, use ["literal", [...]].',0),null;var l=a.definitions[s];if(l){var c=l.parse(t,a);if(!c)return null;var f=a.expectedType,h=c.type;if(f){if("string"!==f.kind&&"number"!==f.kind&&"boolean"!==f.kind||"value"!==h.kind){if("color"===f.kind&&("value"===h.kind||"string"===h.kind)){var p=e("./definitions/coercion");c=new p(f,[c])}}else c=new(e("./definitions/assertion"))(f,[c]);if(a.checkSubtype(f,c.type))return null}if(!(c instanceof u)&&r(c)){var d=new(e("./evaluation_context"));try{c=new u(c.type,c.evaluate(d))}catch(t){return a.error(t.message),null}}return c}return a.error('Unknown expression "'+s+'". If you wanted a literal array, use ["literal", [...]].',0)}return void 0===t?a.error("'undefined' value invalid. Use null instead."):"object"==typeof t?a.error('Bare objects invalid. Use ["literal", {...}] instead.'):a.error("Expected an array, but found "+typeof t+" instead.")},l.prototype.concat=function(e,t,n){var r="number"==typeof e?this.path.concat(e):this.path,i=n?this.scope.concat(n):this.scope;return new l(this.definitions,r,t||null,i,this.errors)},l.prototype.error=function(e){for(var t=[],n=arguments.length-1;n-- >0;)t[n]=arguments[n+1];var r=""+this.key+t.map(function(e){return"["+e+"]"}).join("");this.errors.push(new s(r,e))},l.prototype.checkSubtype=function(e,t){var n=a(e,t);return n&&this.error(n),n},t.exports=l},{"./compound_expression":121,"./definitions/assertion":123,"./definitions/coercion":127,"./definitions/literal":131,"./definitions/var":134,"./evaluation_context":135,"./is_constant":137,"./parsing_error":139,"./scope":141,"./types":143}],139:[function(e,t,n){"use strict";var r=function(e){function t(t,n){e.call(this,n),this.message=n,this.key=t}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t}(Error);t.exports=r},{}],140:[function(e,t,n){"use strict";var r=function(e){this.name="ExpressionEvaluationError",this.message=e};r.prototype.toJSON=function(){return this.message},t.exports=r},{}],141:[function(e,t,n){"use strict";var r=function(e,t){var n=this;void 0===t&&(t=[]),this.parent=e,this.bindings={};for(var r=0,i=t;r<i.length;r+=1){var o=i[r],a=o[0],s=o[1];n.bindings[a]=s}};r.prototype.concat=function(e){return new r(this,e)},r.prototype.get=function(e){if(this.bindings[e])return this.bindings[e];if(this.parent)return this.parent.get(e);throw new Error(e+" not found in scope.")},r.prototype.has=function(e){return!!this.bindings[e]||!!this.parent&&this.parent.has(e)},t.exports=r},{}],142:[function(e,t,n){"use strict";function r(e,t){for(var n,r,i=e.length,o=0,a=i-1,s=0;o<=a;){if(s=Math.floor((o+a)/2),n=e[s],r=e[s+1],t===n||t>n&&t<r)return s;n<t?o=s+1:n>t&&(a=s-1)}return Math.max(s-1,0)}t.exports={findStopLessThanOrEqualTo:r}},{}],143:[function(e,t,n){"use strict";function r(e,t){return{kind:"array",itemType:e,N:t}}function i(e){if("array"===e.kind){var t=i(e.itemType);return"number"==typeof e.N?"array<"+t+", "+e.N+">":"value"===e.itemType.kind?"array":"array<"+t+">"}return e.kind}function o(e,t){if("error"===t.kind)return null;if("array"===e.kind){if("array"===t.kind&&!o(e.itemType,t.itemType)&&("number"!=typeof e.N||e.N===t.N))return null}else{if(e.kind===t.kind)return null;if("value"===e.kind)for(var n=0,r=d;n<r.length;n+=1){var a=r[n];if(!o(a,t))return null}}return"Expected "+i(e)+" but found "+i(t)+" instead."}var a={kind:"null"},s={kind:"number"},u={kind:"string"},l={kind:"boolean"},c={kind:"color"},f={kind:"object"},h={kind:"value"},p={kind:"error"},d=[a,s,u,l,c,f,r(h)];t.exports={NullType:a,NumberType:s,StringType:u,BooleanType:l,ColorType:c,ObjectType:f,ValueType:h,array:r,ErrorType:p,toString:i,checkSubtype:o}},{}],144:[function(e,t,n){"use strict";function r(e,t,n,r){return"number"==typeof e&&e>=0&&e<=255&&"number"==typeof t&&t>=0&&t<=255&&"number"==typeof n&&n>=0&&n<=255?void 0===r||"number"==typeof r&&r>=0&&r<=1?null:"Invalid rgba value ["+[e,t,n,r].join(", ")+"]: 'a' must be between 0 and 1.":"Invalid rgba value ["+("number"==typeof r?[e,t,n,r]:[e,t,n]).join(", ")+"]: 'r', 'g', and 'b' must be between 0 and 255."}function i(e){if(null===e)return!0;if("string"==typeof e)return!0;if("boolean"==typeof e)return!0;if("number"==typeof e)return!0;if(e instanceof a)return!0;if(Array.isArray(e)){for(var t=0,n=e;t<n.length;t+=1)if(!i(n[t]))return!1;return!0}if("object"==typeof e){for(var r in e)if(!i(e[r]))return!1;return!0}return!1}function o(e){if(null===e)return u;if("string"==typeof e)return c;if("boolean"==typeof e)return f;if("number"==typeof e)return l;if(e instanceof a)return h;if(Array.isArray(e)){for(var t,n=e.length,r=0,i=e;r<i.length;r+=1){var s=i[r],g=o(s);if(t){if(t===g)continue;t=d;break}t=g}return v(t||d,n)}return p}var a=e("../util/color"),s=e("./types"),u=s.NullType,l=s.NumberType,c=s.StringType,f=s.BooleanType,h=s.ColorType,p=s.ObjectType,d=s.ValueType,v=s.array;t.exports={Color:a,validateRGBA:r,isValue:i,typeOf:o}},{"../util/color":150,"./types":143}],145:[function(e,t,n){"use strict";function r(e){if(!Array.isArray(e)||0===e.length)return!1;switch(e[0]){case"has":return e.length>=2&&"$id"!==e[1]&&"$type"!==e[1];case"in":case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return 3===e.length&&(Array.isArray(e[1])||Array.isArray(e[2]));case"any":case"all":for(var t=0,n=e.slice(1);t<n.length;t+=1){var i=n[t];if(!r(i)&&"boolean"!=typeof i)return!1}return!0;default:return!0}}function i(e){if(!e)return function(){return!0};if(!r(e))return new Function("g","f","var p = (f && f.properties || {}); return "+o(e));var t=d(e,g);if("error"===t.result)throw new Error(t.value.map(function(e){return e.key+": "+e.message}).join(", "));return t.value.evaluate}function o(e){if(!e)return"true";var t=e[0];return e.length<=1?"any"===t?"false":"true":"("+("=="===t?s(e[1],e[2],"===",!1):"!="===t?s(e[1],e[2],"!==",!1):"<"===t||">"===t||"<="===t||">="===t?s(e[1],e[2],t,!0):"any"===t?u(e.slice(1),"||"):"all"===t?u(e.slice(1),"&&"):"none"===t?f(u(e.slice(1),"||")):"in"===t?l(e[1],e.slice(2)):"!in"===t?f(l(e[1],e.slice(2))):"has"===t?c(e[1]):"!has"===t?f(c(e[1])):"true")+")"}function a(e){return"$type"===e?"f.type":"$id"===e?"f.id":"p["+JSON.stringify(e)+"]"}function s(e,t,n,r){var i=a(e),o="$type"===e?v.indexOf(t):JSON.stringify(t);return(r?"typeof "+i+"=== typeof "+o+"&&":"")+i+n+o}function u(e,t){return e.map(o).join(t)}function l(e,t){"$type"===e&&(t=t.map(function(e){return v.indexOf(e)}));var n=JSON.stringify(t.sort(h)),r=a(e);return t.length<=200?n+".indexOf("+r+") !== -1":"function(v, a, i, j) {while (i <= j) { var m = (i + j) >> 1;    if (a[m] === v) return true; if (a[m] > v) j = m - 1; else i = m + 1;}return false; }("+r+", "+n+",0,"+(t.length-1)+")"}function c(e){return"$id"===e?'"id" in f':JSON.stringify(e)+" in p"}function f(e){return"!("+e+")"}function h(e,t){return e<t?-1:e>t?1:0}var p=e("../expression"),d=p.createExpression;t.exports=i,t.exports.isExpressionFilter=r;var v=["Unknown","Point","LineString","Polygon"],g={type:"boolean",default:!1,function:!0,"property-function":!0,"zoom-function":!0}},{"../expression":136}],146:[function(e,t,n){"use strict";function r(e){return"object"==typeof e&&null!==e&&!Array.isArray(e)}function i(e){return e}function o(e,t){var n="color"===t.type,r=e.stops&&"object"==typeof e.stops[0][0],f=r||void 0!==e.property,h=r||!f,g=e.type||("interpolated"===t.function?"exponential":"interval");n&&(e=v({},e),e.stops&&(e.stops=e.stops.map(function(e){return[e[0],d.parse(e[1])]})),e.default?e.default=d.parse(e.default):e.default=d.parse(t.default));var y,_,b;if("exponential"===g)y=l;else if("interval"===g)y=u;else if("categorical"===g){y=s,_=Object.create(null);for(var E=0,x=e.stops;E<x.length;E+=1){var w=x[E];_[w[0]]=w[1]}b=typeof e.stops[0][0]}else{if("identity"!==g)throw new Error('Unknown function type "'+g+'"');y=c}var T;if(e.colorSpace&&"rgb"!==e.colorSpace){if(!p[e.colorSpace])throw new Error("Unknown color space: "+e.colorSpace);var S=p[e.colorSpace];e=JSON.parse(JSON.stringify(e));for(var A=0;A<e.stops.length;A++)e.stops[A]=[e.stops[A][0],S.forward(e.stops[A][1])];T=S.reverse}else T=i;if(r){for(var C={},O=[],k=0;k<e.stops.length;k++){var P=e.stops[k],R=P[0].zoom;void 0===C[R]&&(C[R]={zoom:R,type:e.type,property:e.property,default:e.default,stops:[]},O.push(R)),C[R].stops.push([P[0].value,P[1]])}for(var I=[],N=0,M=O;N<M.length;N+=1){var L=M[N];I.push([C[L].zoom,o(C[L],t)])}return{kind:"composite",interpolationFactor:m.interpolationFactor.bind(void 0,{name:"linear"}),zoomStops:I.map(function(e){return e[0]}),evaluate:function(n,r){var i=n.zoom;return T(l({stops:I,base:e.base},t,i).evaluate(i,r))}}}return h?{kind:"camera",interpolationFactor:"exponential"===g?m.interpolationFactor.bind(void 0,{name:"exponential",base:void 0!==e.base?e.base:1}):function(){return 0},zoomStops:e.stops.map(function(e){return e[0]}),evaluate:function(n){var r=n.zoom;return T(y(e,t,r,_,b))}}:{kind:"source",evaluate:function(n,r){var i=r&&r.properties?r.properties[e.property]:void 0;return void 0===i?a(e.default,t.default):T(y(e,t,i,_,b))}}}function a(e,t,n){return void 0!==e?e:void 0!==t?t:void 0!==n?n:void 0}function s(e,t,n,r,i){return a(typeof n===i?r[n]:void 0,e.default,t.default)}function u(e,t,n){if("number"!==g(n))return a(e.default,t.default);var r=e.stops.length;if(1===r)return e.stops[0][1];if(n<=e.stops[0][0])return e.stops[0][1];if(n>=e.stops[r-1][0])return e.stops[r-1][1];var i=f(e.stops,n);return e.stops[i][1]}function l(e,t,n){var r=void 0!==e.base?e.base:1;if("number"!==g(n))return a(e.default,t.default);var o=e.stops.length;if(1===o)return e.stops[0][1];if(n<=e.stops[0][0])return e.stops[0][1];if(n>=e.stops[o-1][0])return e.stops[o-1][1];var s=f(e.stops,n),u=h(n,r,e.stops[s][0],e.stops[s+1][0]),l=e.stops[s][1],c=e.stops[s+1][1],p=y[t.type]||i;return"function"==typeof l.evaluate?{evaluate:function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var n=l.evaluate.apply(void 0,e),r=c.evaluate.apply(void 0,e);if(void 0!==n&&void 0!==r)return p(n,r,u)}}:p(l,c,u)}function c(e,t,n){return"color"===t.type?n=d.parse(n):g(n)===t.type||"enum"===t.type&&t.values[n]||(n=void 0),a(n,e.default,t.default)}function f(e,t){for(var n,r,i=e.length,o=0,a=i-1,s=0;o<=a;){if(s=Math.floor((o+a)/2),n=e[s][0],r=e[s+1][0],t===n||t>n&&t<r)return s;n<t?o=s+1:n>t&&(a=s-1)}return Math.max(s-1,0)}function h(e,t,n,r){var i=r-n,o=e-n;return 0===i?0:1===t?o/i:(Math.pow(t,o)-1)/(Math.pow(t,i)-1)}var p=e("../util/color_spaces"),d=e("../util/color"),v=e("../util/extend"),g=e("../util/get_type"),y=e("../util/interpolate"),m=e("../expression/definitions/interpolate");t.exports={createFunction:o,isFunction:r}},{"../expression/definitions/interpolate":129,"../util/color":150,"../util/color_spaces":151,"../util/extend":152,"../util/get_type":153,"../util/interpolate":154}],147:[function(e,t,n){"use strict";function r(e){var t=typeof e;if("number"===t||"boolean"===t||"string"===t||void 0===e||null===e)return JSON.stringify(e);if(Array.isArray(e)){for(var n="[",i=0,o=e;i<o.length;i+=1)n+=r(o[i])+",";return n+"]"}for(var a=Object.keys(e).sort(),s="{",u=0;u<a.length;u++)s+=JSON.stringify(a[u])+":"+r(e[a[u]])+",";return s+"}"}function i(e){for(var t="",n=0,i=a;n<i.length;n+=1)t+="/"+r(e[i[n]]);return t}function o(e){for(var t={},n=0;n<e.length;n++){var r=i(e[n]),o=t[r];o||(o=t[r]=[]),o.push(e[n])}var a=[];for(var s in t)a.push(t[s]);return a}var a=e("./util/ref_properties");t.exports=o},{"./util/ref_properties":155}],148:[function(e,t,n){"use strict";t.exports=e("./v8.json")},{"./v8.json":149}],149:[function(e,t,n){t.exports={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_geojson","source_video","source_image","source_canvas"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.0511,180,85.0511]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.0511,180,85.0511]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},buffer:{type:"number",default:128,maximum:512,minimum:0},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_canvas:{type:{required:!0,type:"enum",values:{canvas:{}}},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}},animate:{type:"boolean",default:"true"},canvas:{type:"string",required:!0}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},background:{}}},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible"}},layout_fill:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible"}},layout_circle:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible"}},layout_line:{"line-cap":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{butt:{},round:{},square:{}},default:"butt"},"line-join":{type:"enum",function:"piecewise-constant","zoom-function":!0,"property-function":!0,values:{bevel:{},round:{},miter:{}},default:"miter"},"line-miter-limit":{type:"number",default:2,function:"interpolated","zoom-function":!0,requires:[{"line-join":"miter"}]},"line-round-limit":{type:"number",default:1.05,function:"interpolated","zoom-function":!0,requires:[{"line-join":"round"}]},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible"}},layout_symbol:{"symbol-placement":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{point:{},line:{}},default:"point"},"symbol-spacing":{type:"number",default:250,minimum:1,function:"interpolated","zoom-function":!0,units:"pixels",requires:[{"symbol-placement":"line"}]},"symbol-avoid-edges":{type:"boolean",function:"piecewise-constant","zoom-function":!0,default:!1},"icon-allow-overlap":{type:"boolean",function:"piecewise-constant","zoom-function":!0,default:!1,requires:["icon-image"]},"icon-ignore-placement":{type:"boolean",function:"piecewise-constant","zoom-function":!0,default:!1,requires:["icon-image"]},"icon-optional":{type:"boolean",function:"piecewise-constant","zoom-function":!0,default:!1,requires:["icon-image","text-field"]},"icon-rotation-alignment":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"]},"icon-size":{type:"number",default:1,minimum:0,function:"interpolated","zoom-function":!0,"property-function":!0,units:"factor of the original icon size",requires:["icon-image"]},"icon-text-fit":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"]},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",function:"interpolated","zoom-function":!0,requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}]},"icon-image":{type:"string",function:"piecewise-constant","zoom-function":!0,"property-function":!0,tokens:!0},"icon-rotate":{type:"number",default:0,period:360,function:"interpolated","zoom-function":!0,"property-function":!0,units:"degrees",requires:["icon-image"]},"icon-padding":{type:"number",default:2,minimum:0,function:"interpolated","zoom-function":!0,units:"pixels",requires:["icon-image"]},"icon-keep-upright":{type:"boolean",function:"piecewise-constant","zoom-function":!0,default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":"line"}]},"icon-offset":{type:"array",value:"number",units:'pixels multiplied by the value of "icon-size"',length:2,default:[0,0],function:"interpolated","zoom-function":!0,"property-function":!0,requires:["icon-image"]},"icon-anchor":{type:"enum",function:"piecewise-constant","zoom-function":!0,"property-function":!0,values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"]},"icon-pitch-alignment":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"]},"text-pitch-alignment":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"]},"text-rotation-alignment":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"]},"text-field":{type:"string",function:"piecewise-constant","zoom-function":!0,"property-function":!0,default:"",tokens:!0},"text-font":{type:"array",value:"string",function:"piecewise-constant","zoom-function":!0,default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"]},"text-size":{type:"number",default:16,minimum:0,units:"pixels",function:"interpolated","zoom-function":!0,"property-function":!0,requires:["text-field"]},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",function:"interpolated","zoom-function":!0,"property-function":!0,requires:["text-field"]},"text-line-height":{type:"number",default:1.2,units:"ems",function:"interpolated","zoom-function":!0,requires:["text-field"]},"text-letter-spacing":{type:"number",default:0,units:"ems",function:"interpolated","zoom-function":!0,"property-function":!0,requires:["text-field"]},"text-justify":{type:"enum",function:"piecewise-constant","zoom-function":!0,"property-function":!0,values:{left:{},center:{},right:{}},default:"center",requires:["text-field"]},"text-anchor":{type:"enum",function:"piecewise-constant","zoom-function":!0,"property-function":!0,values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field"]},"text-max-angle":{type:"number",default:45,units:"degrees",function:"interpolated","zoom-function":!0,requires:["text-field",{"symbol-placement":"line"}]},"text-rotate":{type:"number",default:0,period:360,units:"degrees",function:"interpolated","zoom-function":!0,"property-function":!0,requires:["text-field"]},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",function:"interpolated","zoom-function":!0,requires:["text-field"]},"text-keep-upright":{type:"boolean",function:"piecewise-constant","zoom-function":!0,default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":"line"}]},"text-transform":{type:"enum",function:"piecewise-constant","zoom-function":!0,"property-function":!0,values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"]},"text-offset":{type:"array",value:"number",units:"ems",function:"interpolated","zoom-function":!0,"property-function":!0,length:2,default:[0,0],requires:["text-field"]},"text-allow-overlap":{type:"boolean",function:"piecewise-constant","zoom-function":!0,default:!1,requires:["text-field"]},"text-ignore-placement":{type:"boolean",function:"piecewise-constant","zoom-function":!0,default:!1,requires:["text-field"]},"text-optional":{type:"boolean",function:"piecewise-constant","zoom-function":!0,default:!1,requires:["text-field","icon-image"]},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:22,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},expression_name:{type:"enum",values:{let:{group:"Variable binding"},var:{group:"Variable binding"},literal:{group:"Types"},array:{group:"Types"},at:{group:"Lookup"},case:{group:"Decision"},match:{group:"Decision"},coalesce:{group:"Decision"},step:{group:"Ramps, scales, curves"},interpolate:{group:"Ramps, scales, curves"},ln2:{group:"Math"},pi:{group:"Math"},e:{group:"Math"},typeof:{group:"Types"},string:{group:"Types"},number:{group:"Types"},boolean:{group:"Types"},object:{group:"Types"},"to-string":{group:"Types"},"to-number":{group:"Types"},"to-boolean":{group:"Types"},"to-rgba":{group:"Color"},"to-color":{group:"Types"},rgb:{group:"Color"},rgba:{group:"Color"},get:{group:"Lookup"},has:{group:"Lookup"},length:{group:"Lookup"},properties:{group:"Feature data"},"geometry-type":{group:"Feature data"},id:{group:"Feature data"},zoom:{group:"Zoom"},"heatmap-density":{group:"Heatmap"},"+":{group:"Math"},"*":{group:"Math"},"-":{group:"Math"},"/":{group:"Math"},"%":{group:"Math"},"^":{group:"Math"},sqrt:{group:"Math"},log10:{group:"Math"},ln:{group:"Math"},log2:{group:"Math"},sin:{group:"Math"},cos:{group:"Math"},tan:{group:"Math"},asin:{group:"Math"},acos:{group:"Math"},atan:{group:"Math"},min:{group:"Math"},max:{group:"Math"},"==":{group:"Decision"},"!=":{group:"Decision"},">":{group:"Decision"},"<":{group:"Decision"},">=":{group:"Decision"},"<=":{group:"Decision"},all:{group:"Decision"},any:{group:"Decision"},"!":{group:"Decision"},upcase:{group:"String"},downcase:{group:"String"},concat:{group:"String"}}},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},transition:!1,"zoom-function":!0,"property-function":!1,function:"piecewise-constant"},position:{type:"array",default:[1.15,210,30],length:3,value:"number",transition:!0,function:"interpolated","zoom-function":!0,"property-function":!1},color:{type:"color",default:"#ffffff",function:"interpolated","zoom-function":!0,"property-function":!1,transition:!0},intensity:{type:"number",default:.5,minimum:0,maximum:1,function:"interpolated","zoom-function":!0,"property-function":!1,transition:!0}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",function:"piecewise-constant","zoom-function":!0,default:!0},"fill-opacity":{type:"number",function:"interpolated","zoom-function":!0,"property-function":!0,default:1,minimum:0,maximum:1,transition:!0},"fill-color":{type:"color",default:"#000000",function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,requires:[{"!":"fill-pattern"}]},"fill-outline-color":{type:"color",function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}]},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],function:"interpolated","zoom-function":!0,transition:!0,units:"pixels"},"fill-translate-anchor":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{map:{},viewport:{}},default:"map",requires:["fill-translate"]},"fill-pattern":{type:"string",function:"piecewise-constant","zoom-function":!0,transition:!0}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",function:"interpolated","zoom-function":!0,"property-function":!1,default:1,minimum:0,maximum:1,transition:!0},"fill-extrusion-color":{type:"color",default:"#000000",function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,requires:[{"!":"fill-extrusion-pattern"}]},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],function:"interpolated","zoom-function":!0,transition:!0,units:"pixels"},"fill-extrusion-translate-anchor":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"]},"fill-extrusion-pattern":{type:"string",function:"piecewise-constant","zoom-function":!0,transition:!0},"fill-extrusion-height":{type:"number",function:"interpolated","zoom-function":!0,"property-function":!0,default:0,minimum:0,units:"meters",transition:!0},"fill-extrusion-base":{type:"number",function:"interpolated","zoom-function":!0,"property-function":!0,default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"]}},paint_line:{"line-opacity":{type:"number",function:"interpolated","zoom-function":!0,"property-function":!0,default:1,minimum:0,maximum:1,transition:!0},"line-color":{type:"color",default:"#000000",function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,requires:[{"!":"line-pattern"}]},"line-translate":{type:"array",value:"number",length:2,default:[0,0],function:"interpolated","zoom-function":!0,transition:!0,units:"pixels"},"line-translate-anchor":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{map:{},viewport:{}},default:"map",requires:["line-translate"]},"line-width":{type:"number",default:1,minimum:0,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels"},"line-gap-width":{type:"number",default:0,minimum:0,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels"},"line-offset":{type:"number",default:0,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels"},"line-blur":{type:"number",default:0,minimum:0,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels"},"line-dasharray":{type:"array",value:"number",function:"piecewise-constant","zoom-function":!0,minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}]},"line-pattern":{type:"string",function:"piecewise-constant","zoom-function":!0,transition:!0}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels"},"circle-color":{type:"color",default:"#000000",function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0},"circle-blur":{type:"number",default:0,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],function:"interpolated","zoom-function":!0,transition:!0,units:"pixels"},"circle-translate-anchor":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{map:{},viewport:{}},default:"map",requires:["circle-translate"]},"circle-pitch-scale":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{map:{},viewport:{}},default:"map"},"circle-pitch-alignment":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{map:{},viewport:{}},default:"viewport"},"circle-stroke-width":{type:"number",default:0,minimum:0,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels"},"circle-stroke-color":{type:"color",default:"#000000",function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,function:"interpolated","zoom-function":!0,"property-function":!1,transition:!0,units:"pixels"},"heatmap-weight":{type:"number",default:1,minimum:0,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!1},"heatmap-intensity":{type:"number",default:1,minimum:0,function:"interpolated","zoom-function":!0,"property-function":!1,transition:!0},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],function:"interpolated","zoom-function":!1,"property-function":!1,transition:!0},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,function:"interpolated","zoom-function":!0,"property-function":!1,transition:!0}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,requires:["icon-image"]},"icon-color":{type:"color",default:"#000000",function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,requires:["icon-image"]},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,requires:["icon-image"]},"icon-halo-width":{type:"number",default:0,minimum:0,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels",requires:["icon-image"]},"icon-halo-blur":{type:"number",default:0,minimum:0,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels",requires:["icon-image"]},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],function:"interpolated","zoom-function":!0,transition:!0,units:"pixels",requires:["icon-image"]},"icon-translate-anchor":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"]},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,requires:["text-field"]},"text-color":{type:"color",default:"#000000",function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,requires:["text-field"]},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,requires:["text-field"]},"text-halo-width":{type:"number",default:0,minimum:0,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels",requires:["text-field"]},"text-halo-blur":{type:"number",default:0,minimum:0,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels",requires:["text-field"]},"text-translate":{type:"array",value:"number",length:2,default:[0,0],function:"interpolated","zoom-function":!0,transition:!0,units:"pixels",requires:["text-field"]},"text-translate-anchor":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"]}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,function:"interpolated","zoom-function":!0,transition:!0},"raster-hue-rotate":{type:"number",default:0,period:360,function:"interpolated","zoom-function":!0,transition:!0,units:"degrees"},"raster-brightness-min":{type:"number",function:"interpolated","zoom-function":!0,default:0,minimum:0,maximum:1,transition:!0},"raster-brightness-max":{type:"number",function:"interpolated","zoom-function":!0,default:1,minimum:0,maximum:1,transition:!0},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,function:"interpolated","zoom-function":!0,transition:!0},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,function:"interpolated","zoom-function":!0,transition:!0},"raster-fade-duration":{type:"number",default:300,minimum:0,function:"interpolated","zoom-function":!0,transition:!0,units:"milliseconds"}},paint_background:{"background-color":{type:"color",default:"#000000",function:"interpolated","zoom-function":!0,transition:!0,requires:[{"!":"background-pattern"}]},"background-pattern":{type:"string",function:"piecewise-constant","zoom-function":!0,transition:!0},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,function:"interpolated","zoom-function":!0,transition:!0}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}}}},{}],150:[function(e,t,n){"use strict";var r=e("csscolorparser"),i=r.parseCSSColor,o=function(e,t,n,r){void 0===r&&(r=1),this.r=e,this.g=t,this.b=n,this.a=r};o.parse=function(e){if(e){if(e instanceof o)return e;if("string"==typeof e){var t=i(e);if(t)return new o(t[0]/255*t[3],t[1]/255*t[3],t[2]/255*t[3],t[3])}}},o.black=new o(0,0,0,1),o.white=new o(1,1,1,1),o.transparent=new o(0,0,0,0),t.exports=o},{csscolorparser:11}],151:[function(e,t,n){"use strict";function r(e){return e>m?Math.pow(e,1/3):e/y+v}function i(e){return e>g?e*e*e:y*(e-v)}function o(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function a(e){return e/=255,e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function s(e){var t=a(e.r),n=a(e.g),i=a(e.b),o=r((.4124564*t+.3575761*n+.1804375*i)/h),s=r((.2126729*t+.7151522*n+.072175*i)/p);return{l:116*s-16,a:500*(o-s),b:200*(s-r((.0193339*t+.119192*n+.9503041*i)/d)),alpha:e.a}}function u(e){var t=(e.l+16)/116,n=isNaN(e.a)?t:t+e.a/500,r=isNaN(e.b)?t:t-e.b/200;return t=p*i(t),n=h*i(n),r=d*i(r),new f(o(3.2404542*n-1.5371385*t-.4985314*r),o(-.969266*n+1.8760108*t+.041556*r),o(.0556434*n-.2040259*t+1.0572252*r),e.alpha)}function l(e){var t=s(e),n=t.l,r=t.a,i=t.b,o=Math.atan2(i,r)*b;return{h:o<0?o+360:o,c:Math.sqrt(r*r+i*i),l:n,alpha:e.a}}function c(e){var t=e.h*_,n=e.c;return u({l:e.l,a:Math.cos(t)*n,b:Math.sin(t)*n,alpha:e.alpha})}var f=e("./color"),h=.95047,p=1,d=1.08883,v=4/29,g=6/29,y=3*g*g,m=g*g*g,_=Math.PI/180,b=180/Math.PI;t.exports={lab:{forward:s,reverse:u},hcl:{forward:l,reverse:c}}},{"./color":150}],152:[function(e,t,n){"use strict";t.exports=function(e){for(var t=[],n=arguments.length-1;n-- >0;)t[n]=arguments[n+1];for(var r=0,i=t;r<i.length;r+=1){var o=i[r];for(var a in o)e[a]=o[a]}return e}},{}],153:[function(e,t,n){"use strict";t.exports=function(e){return e instanceof Number?"number":e instanceof String?"string":e instanceof Boolean?"boolean":Array.isArray(e)?"array":null===e?"null":typeof e}},{}],154:[function(e,t,n){"use strict";function r(e,t,n){return e*(1-n)+t*n}function i(e,t,n){return new a(r(e.r,t.r,n),r(e.g,t.g,n),r(e.b,t.b,n),r(e.a,t.a,n))}function o(e,t,n){return e.map(function(e,i){return r(e,t[i],n)})}var a=e("./color");t.exports={number:r,color:i,array:o}},{"./color":150}],155:[function(e,t,n){"use strict";t.exports=["type","source","source-layer","minzoom","maxzoom","filter","layout"]},{}],156:[function(e,t,n){"use strict";function r(e){return{result:"success",value:e}}function i(e){return{result:"error",value:e}}t.exports={success:r,error:i}},{}],157:[function(e,t,n){"use strict";function r(e){return e instanceof Number||e instanceof String||e instanceof Boolean?e.valueOf():e}function i(e){return Array.isArray(e)?e.map(i):r(e)}t.exports=r,t.exports.deep=i},{}],158:[function(e,t,n){"use strict";var r=e("../error/validation_error"),i=e("../util/get_type"),o=e("../util/extend"),a=e("../util/unbundle_jsonlint"),s=e("../expression"),u=s.isExpression,l=e("../function"),c=l.isFunction;t.exports=function(t){var n=e("./validate_function"),s=e("./validate_expression"),l=e("./validate_object"),f={"*":function(){return[]},array:e("./validate_array"),boolean:e("./validate_boolean"),number:e("./validate_number"),color:e("./validate_color"),constants:e("./validate_constants"),enum:e("./validate_enum"),filter:e("./validate_filter"),function:e("./validate_function"),layer:e("./validate_layer"),object:e("./validate_object"),source:e("./validate_source"),light:e("./validate_light"),string:e("./validate_string")},h=t.value,p=t.valueSpec,d=t.key,v=t.styleSpec,g=t.style;if("string"===i(h)&&"@"===h[0]){if(v.$version>7)return[new r(d,h,"constants have been deprecated as of v8")];if(!(h in g.constants))return[new r(d,h,'constant "%s" not found',h)];t=o({},t,{value:g.constants[h]})}return p.function&&c(a(h))?n(t):p.function&&u(a.deep(h))?s(t):p.type&&f[p.type]?f[p.type](t):l(o({},t,{valueSpec:p.type?v[p.type]:p}))}},{"../error/validation_error":120,"../expression":136,"../function":146,"../util/extend":152,"../util/get_type":153,"../util/unbundle_jsonlint":157,"./validate_array":159,"./validate_boolean":160,"./validate_color":161,"./validate_constants":162,"./validate_enum":163,"./validate_expression":164,"./validate_filter":165,"./validate_function":166,"./validate_layer":168,"./validate_light":170,"./validate_number":171,"./validate_object":172,"./validate_source":175,"./validate_string":176}],159:[function(e,t,n){"use strict";var r=e("../util/get_type"),i=e("./validate"),o=e("../error/validation_error");t.exports=function(e){var t=e.value,n=e.valueSpec,a=e.style,s=e.styleSpec,u=e.key,l=e.arrayElementValidator||i;if("array"!==r(t))return[new o(u,t,"array expected, %s found",r(t))];if(n.length&&t.length!==n.length)return[new o(u,t,"array length %d expected, length %d found",n.length,t.length)];if(n["min-length"]&&t.length<n["min-length"])return[new o(u,t,"array length at least %d expected, length %d found",n["min-length"],t.length)];var c={type:n.value};s.$version<7&&(c.function=n.function),"object"===r(n.value)&&(c=n.value);for(var f=[],h=0;h<t.length;h++)f=f.concat(l({array:t,arrayIndex:h,value:t[h],valueSpec:c,style:a,styleSpec:s,key:u+"["+h+"]"}));return f}},{"../error/validation_error":120,"../util/get_type":153,"./validate":158}],160:[function(e,t,n){"use strict";var r=e("../util/get_type"),i=e("../error/validation_error");t.exports=function(e){var t=e.value,n=e.key,o=r(t);return"boolean"!==o?[new i(n,t,"boolean expected, %s found",o)]:[]}},{"../error/validation_error":120,"../util/get_type":153}],161:[function(e,t,n){"use strict";var r=e("../error/validation_error"),i=e("../util/get_type"),o=e("csscolorparser").parseCSSColor;t.exports=function(e){var t=e.key,n=e.value,a=i(n);return"string"!==a?[new r(t,n,"color expected, %s found",a)]:null===o(n)?[new r(t,n,'color expected, "%s" found',n)]:[]}},{"../error/validation_error":120,"../util/get_type":153,csscolorparser:11}],162:[function(e,t,n){"use strict";var r=e("../error/validation_error");t.exports=function(e){var t=e.key,n=e.value;return n?[new r(t,n,"constants have been deprecated as of v8")]:[]}},{"../error/validation_error":120}],163:[function(e,t,n){"use strict";var r=e("../error/validation_error"),i=e("../util/unbundle_jsonlint");t.exports=function(e){var t=e.key,n=e.value,o=e.valueSpec,a=[];return Array.isArray(o.values)?-1===o.values.indexOf(i(n))&&a.push(new r(t,n,"expected one of [%s], %s found",o.values.join(", "),JSON.stringify(n))):-1===Object.keys(o.values).indexOf(i(n))&&a.push(new r(t,n,"expected one of [%s], %s found",Object.keys(o.values).join(", "),JSON.stringify(n))),a}},{"../error/validation_error":120,"../util/unbundle_jsonlint":157}],164:[function(e,t,n){"use strict";var r=e("../error/validation_error"),i=e("../expression"),o=i.createExpression,a=i.createPropertyExpression,s=e("../util/unbundle_jsonlint");t.exports=function(e){var t=("property"===e.expressionContext?a:o)(s.deep(e.value),e.valueSpec);return"error"!==t.result?[]:t.value.map(function(t){return new r(""+e.key+t.key,e.value,t.message)})}},{"../error/validation_error":120,"../expression":136,"../util/unbundle_jsonlint":157}],165:[function(e,t,n){"use strict";function r(e){var t=e.value,n=e.key;if("array"!==s(t))return[new i(n,t,"array expected, %s found",s(t))];var o,l=e.styleSpec,c=[];if(t.length<1)return[new i(n,t,"filter array must have at least 1 element")];switch(c=c.concat(a({key:n+"[0]",value:t[0],valueSpec:l.filter_operator,style:e.style,styleSpec:e.styleSpec})),u(t[0])){case"<":case"<=":case">":case">=":t.length>=2&&"$type"===u(t[1])&&c.push(new i(n,t,'"$type" cannot be use with operator "%s"',t[0]));case"==":case"!=":3!==t.length&&c.push(new i(n,t,'filter array for operator "%s" must have 3 elements',t[0]));case"in":case"!in":t.length>=2&&"string"!==(o=s(t[1]))&&c.push(new i(n+"[1]",t[1],"string expected, %s found",o));for(var f=2;f<t.length;f++)o=s(t[f]),"$type"===u(t[1])?c=c.concat(a({key:n+"["+f+"]",value:t[f],valueSpec:l.geometry_type,style:e.style,styleSpec:e.styleSpec})):"string"!==o&&"number"!==o&&"boolean"!==o&&c.push(new i(n+"["+f+"]",t[f],"string, number, or boolean expected, %s found",o));break;case"any":case"all":case"none":for(var h=1;h<t.length;h++)c=c.concat(r({key:n+"["+h+"]",value:t[h],style:e.style,styleSpec:e.styleSpec}));break;case"has":case"!has":o=s(t[1]),2!==t.length?c.push(new i(n,t,'filter array for "%s" operator must have 2 elements',t[0])):"string"!==o&&c.push(new i(n+"[1]",t[1],"string expected, %s found",o))}return c}var i=e("../error/validation_error"),o=e("./validate_expression"),a=e("./validate_enum"),s=e("../util/get_type"),u=e("../util/unbundle_jsonlint"),l=e("../util/extend"),c=e("../feature_filter"),f=c.isExpressionFilter;t.exports=function(e){return f(u.deep(e.value))?o(l({},e,{expressionContext:"filter",valueSpec:{value:"boolean"}})):r(e)}},{"../error/validation_error":120,"../feature_filter":145,"../util/extend":152,"../util/get_type":153,"../util/unbundle_jsonlint":157,"./validate_enum":163,"./validate_expression":164}],166:[function(e,t,n){"use strict";var r=e("../error/validation_error"),i=e("../util/get_type"),o=e("./validate"),a=e("./validate_object"),s=e("./validate_array"),u=e("./validate_number"),l=e("../util/unbundle_jsonlint");t.exports=function(e){function t(e){if("identity"===g)return[new r(e.key,e.value,'identity function may not have a "stops" property')];var t=[],o=e.value;return t=t.concat(s({key:e.key,value:o,valueSpec:e.valueSpec,style:e.style,styleSpec:e.styleSpec,arrayElementValidator:n})),"array"===i(o)&&0===o.length&&t.push(new r(e.key,o,"array must have at least one stop")),t}function n(e){var t=[],n=e.value,s=e.key;if("array"!==i(n))return[new r(s,n,"array expected, %s found",i(n))];if(2!==n.length)return[new r(s,n,"array length %d expected, length %d found",2,n.length)];if(b){if("object"!==i(n[0]))return[new r(s,n,"object expected, %s found",i(n[0]))];if(void 0===n[0].zoom)return[new r(s,n,"object stop key must have zoom")];if(void 0===n[0].value)return[new r(s,n,"object stop key must have value")];if(d&&d>l(n[0].zoom))return[new r(s,n[0].zoom,"stop zoom values must appear in ascending order")];l(n[0].zoom)!==d&&(d=l(n[0].zoom),p=void 0,y={}),t=t.concat(a({key:s+"[0]",value:n[0],valueSpec:{zoom:{}},style:e.style,styleSpec:e.styleSpec,objectElementValidators:{zoom:u,value:c}}))}else t=t.concat(c({key:s+"[0]",value:n[0],valueSpec:{},style:e.style,styleSpec:e.styleSpec},n));return t.concat(o({key:s+"[1]",value:n[1],valueSpec:v,style:e.style,styleSpec:e.styleSpec}))}function c(e,t){var n=i(e.value),o=l(e.value),a=null!==e.value?e.value:t;if(h){if(n!==h)return[new r(e.key,a,"%s stop domain type must match previous stop domain type %s",n,h)]}else h=n;if("number"!==n&&"string"!==n&&"boolean"!==n)return[new r(e.key,a,"stop domain value must be a number, string, or boolean")];if("number"!==n&&"categorical"!==g){var s="number expected, %s found";return v["property-function"]&&void 0===g&&(s+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new r(e.key,a,s,n)]}return"categorical"!==g||"number"!==n||isFinite(o)&&Math.floor(o)===o?"categorical"!==g&&"number"===n&&void 0!==p&&o<p?[new r(e.key,a,"stop domain values must appear in ascending order")]:(p=o,"categorical"===g&&o in y?[new r(e.key,a,"stop domain values must be unique")]:(y[o]=!0,[])):[new r(e.key,a,"integer expected, found %s",o)]}function f(e){return o({key:e.key,value:e.value,valueSpec:v,style:e.style,styleSpec:e.styleSpec})}var h,p,d,v=e.valueSpec,g=l(e.value.type),y={},m="categorical"!==g&&void 0===e.value.property,_=!m,b="array"===i(e.value.stops)&&"array"===i(e.value.stops[0])&&"object"===i(e.value.stops[0][0]),E=a({key:e.key,value:e.value,valueSpec:e.styleSpec.function,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{stops:t,default:f}});return"identity"===g&&m&&E.push(new r(e.key,e.value,'missing required property "property"')),"identity"===g||e.value.stops||E.push(new r(e.key,e.value,'missing required property "stops"')),"exponential"===g&&"piecewise-constant"===e.valueSpec.function&&E.push(new r(e.key,e.value,"exponential functions not supported")),e.styleSpec.$version>=8&&(_&&!e.valueSpec["property-function"]?E.push(new r(e.key,e.value,"property functions not supported")):m&&!e.valueSpec["zoom-function"]&&"heatmap-color"!==e.objectKey&&E.push(new r(e.key,e.value,"zoom functions not supported"))),"categorical"!==g&&!b||void 0!==e.value.property||E.push(new r(e.key,e.value,'"property" property is required')),E}},{"../error/validation_error":120,"../util/get_type":153,"../util/unbundle_jsonlint":157,"./validate":158,"./validate_array":159,"./validate_number":171,"./validate_object":172}],167:[function(e,t,n){"use strict";var r=e("../error/validation_error"),i=e("./validate_string");t.exports=function(e){var t=e.value,n=e.key,o=i(e);return o.length?o:(-1===t.indexOf("{fontstack}")&&o.push(new r(n,t,'"glyphs" url must include a "{fontstack}" token')),-1===t.indexOf("{range}")&&o.push(new r(n,t,'"glyphs" url must include a "{range}" token')),o)}},{"../error/validation_error":120,"./validate_string":176}],168:[function(e,t,n){"use strict";var r=e("../error/validation_error"),i=e("../util/unbundle_jsonlint"),o=e("./validate_object"),a=e("./validate_filter"),s=e("./validate_paint_property"),u=e("./validate_layout_property"),l=e("../util/extend");t.exports=function(e){var t=[],n=e.value,c=e.key,f=e.style,h=e.styleSpec;n.type||n.ref||t.push(new r(c,n,'either "type" or "ref" is required'));var p=i(n.type),d=i(n.ref);if(n.id)for(var v=i(n.id),g=0;g<e.arrayIndex;g++){var y=f.layers[g];i(y.id)===v&&t.push(new r(c,n.id,'duplicate layer id "%s", previously used at line %d',n.id,y.id.__line__))}if("ref"in n){["type","source","source-layer","filter","layout"].forEach(function(e){e in n&&t.push(new r(c,n[e],'"%s" is prohibited for ref layers',e))});var m;f.layers.forEach(function(e){i(e.id)===d&&(m=e)}),m?m.ref?t.push(new r(c,n.ref,"ref cannot reference another ref layer")):p=i(m.type):t.push(new r(c,n.ref,'ref layer "%s" not found',d))}else if("background"!==p)if(n.source){var _=f.sources&&f.sources[n.source],b=_&&i(_.type);_?"vector"===b&&"raster"===p?t.push(new r(c,n.source,'layer "%s" requires a raster source',n.id)):"raster"===b&&"raster"!==p?t.push(new r(c,n.source,'layer "%s" requires a vector source',n.id)):"vector"!==b||n["source-layer"]||t.push(new r(c,n,'layer "%s" must specify a "source-layer"',n.id)):t.push(new r(c,n.source,'source "%s" not found',n.source))}else t.push(new r(c,n,'missing required property "source"'));return t=t.concat(o({key:c,value:n,valueSpec:h.layer,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{"*":function(){return[]},filter:a,layout:function(e){return o({layer:n,key:e.key,value:e.value,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{"*":function(e){return u(l({layerType:p},e))}}})},paint:function(e){return o({layer:n,key:e.key,value:e.value,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{"*":function(e){return s(l({layerType:p},e))}}})}}}))}},{"../error/validation_error":120,"../util/extend":152,"../util/unbundle_jsonlint":157,"./validate_filter":165,"./validate_layout_property":169,"./validate_object":172,"./validate_paint_property":173}],169:[function(e,t,n){"use strict";var r=e("./validate_property");t.exports=function(e){return r(e,"layout")}},{"./validate_property":174}],170:[function(e,t,n){"use strict";var r=e("../error/validation_error"),i=e("../util/get_type"),o=e("./validate");t.exports=function(e){var t=e.value,n=e.styleSpec,a=n.light,s=e.style,u=[],l=i(t);if(void 0===t)return u;if("object"!==l)return u=u.concat([new r("light",t,"object expected, %s found",l)]);for(var c in t){var f=c.match(/^(.*)-transition$/);u=f&&a[f[1]]&&a[f[1]].transition?u.concat(o({key:c,value:t[c],valueSpec:n.transition,style:s,styleSpec:n})):a[c]?u.concat(o({key:c,value:t[c],valueSpec:a[c],style:s,styleSpec:n})):u.concat([new r(c,t[c],'unknown property "%s"',c)])}return u}},{"../error/validation_error":120,"../util/get_type":153,"./validate":158}],171:[function(e,t,n){"use strict";var r=e("../util/get_type"),i=e("../error/validation_error");t.exports=function(e){var t=e.key,n=e.value,o=e.valueSpec,a=r(n);return"number"!==a?[new i(t,n,"number expected, %s found",a)]:"minimum"in o&&n<o.minimum?[new i(t,n,"%s is less than the minimum value %s",n,o.minimum)]:"maximum"in o&&n>o.maximum?[new i(t,n,"%s is greater than the maximum value %s",n,o.maximum)]:[]}},{"../error/validation_error":120,"../util/get_type":153}],172:[function(e,t,n){"use strict";var r=e("../error/validation_error"),i=e("../util/get_type"),o=e("./validate");t.exports=function(e){var t=e.key,n=e.value,a=e.valueSpec||{},s=e.objectElementValidators||{},u=e.style,l=e.styleSpec,c=[],f=i(n);if("object"!==f)return[new r(t,n,"object expected, %s found",f)];for(var h in n){var p=h.split(".")[0],d=a[p]||a["*"],v=void 0;if(s[p])v=s[p];else if(a[p])v=o;else if(s["*"])v=s["*"];else{if(!a["*"]){c.push(new r(t,n[h],'unknown property "%s"',h));continue}v=o}c=c.concat(v({key:(t?t+".":t)+h,value:n[h],valueSpec:d,style:u,styleSpec:l,object:n,objectKey:h},n))}for(var g in a)a[g].required&&void 0===a[g].default&&void 0===n[g]&&c.push(new r(t,n,'missing required property "%s"',g));return c}},{"../error/validation_error":120,"../util/get_type":153,"./validate":158}],173:[function(e,t,n){"use strict";var r=e("./validate_property");t.exports=function(e){return r(e,"paint")}},{"./validate_property":174}],174:[function(e,t,n){"use strict";var r=e("./validate"),i=e("../error/validation_error"),o=e("../util/get_type");t.exports=function(e,t){var n=e.key,a=e.style,s=e.styleSpec,u=e.value,l=e.objectKey,c=s[t+"_"+e.layerType];if(!c)return[];var f=l.match(/^(.*)-transition$/);if("paint"===t&&f&&c[f[1]]&&c[f[1]].transition)return r({key:n,value:u,valueSpec:s.transition,style:a,styleSpec:s});var h=e.valueSpec||c[l];if(!h)return[new i(n,u,'unknown property "%s"',l)];var p;if("string"===o(u)&&h["property-function"]&&!h.tokens&&(p=/^{([^}]+)}$/.exec(u)))return[new i(n,u,'"%s" does not support interpolation syntax\nUse an identity property function instead: `{ "type": "identity", "property": %s` }`.',l,JSON.stringify(p[1]))];var d=[];return"symbol"===e.layerType&&"text-field"===l&&a&&!a.glyphs&&d.push(new i(n,u,'use of "text-field" requires a style "glyphs" property')),d.concat(r({key:e.key,value:u,valueSpec:h,style:a,styleSpec:s,expressionContext:"property"}))}},{"../error/validation_error":120,"../util/get_type":153,"./validate":158}],175:[function(e,t,n){"use strict";var r=e("../error/validation_error"),i=e("../util/unbundle_jsonlint"),o=e("./validate_object"),a=e("./validate_enum");t.exports=function(e){var t=e.value,n=e.key,s=e.styleSpec,u=e.style;if(!t.type)return[new r(n,t,'"type" is required')];var l=i(t.type),c=[];switch(l){case"vector":case"raster":if(c=c.concat(o({key:n,value:t,valueSpec:s["source_"+l],style:e.style,styleSpec:s})),"url"in t)for(var f in t)["type","url","tileSize"].indexOf(f)<0&&c.push(new r(n+"."+f,t[f],'a source with a "url" property may not include a "%s" property',f));return c;case"geojson":return o({key:n,value:t,valueSpec:s.source_geojson,style:u,styleSpec:s});case"video":return o({key:n,value:t,valueSpec:s.source_video,style:u,styleSpec:s});case"image":return o({key:n,value:t,valueSpec:s.source_image,style:u,styleSpec:s});case"canvas":return o({key:n,value:t,valueSpec:s.source_canvas,style:u,styleSpec:s});default:return a({key:n+".type",value:t.type,valueSpec:{values:["vector","raster","geojson","video","image","canvas"]},style:u,styleSpec:s})}}},{"../error/validation_error":120,"../util/unbundle_jsonlint":157,"./validate_enum":163,"./validate_object":172}],176:[function(e,t,n){"use strict";var r=e("../util/get_type"),i=e("../error/validation_error");t.exports=function(e){var t=e.value,n=e.key,o=r(t);return"string"!==o?[new i(n,t,"string expected, %s found",o)]:[]}},{"../error/validation_error":120,"../util/get_type":153}],177:[function(e,t,n){"use strict";function r(e,t){t=t||u;var n=[];return n=n.concat(s({key:"",value:e,valueSpec:t.$root,styleSpec:t,style:e,objectElementValidators:{glyphs:l,"*":function(){return[]}}})),e.constants&&(n=n.concat(a({key:"constants",value:e.constants,style:e,styleSpec:t}))),i(n)}function i(e){return[].concat(e).sort(function(e,t){return e.line-t.line})}function o(e){return function(){return i(e.apply(this,arguments))}}var a=e("./validate/validate_constants"),s=e("./validate/validate"),u=e("./reference/latest"),l=e("./validate/validate_glyphs_url");r.source=o(e("./validate/validate_source")),r.light=o(e("./validate/validate_light")),r.layer=o(e("./validate/validate_layer")),r.filter=o(e("./validate/validate_filter")),r.paintProperty=o(e("./validate/validate_paint_property")),r.layoutProperty=o(e("./validate/validate_layout_property")),t.exports=r},{"./reference/latest":148,"./validate/validate":158,"./validate/validate_constants":162,"./validate/validate_filter":165,"./validate/validate_glyphs_url":167,"./validate/validate_layer":168,"./validate/validate_layout_property":169,"./validate/validate_light":170,"./validate/validate_paint_property":173,"./validate/validate_source":175}],178:[function(e,t,n){"use strict";var r=e("../style-spec/reference/latest"),i=e("../util/util"),o=e("../util/evented"),a=e("./validate_style"),s=e("../util/util"),u=s.sphericalToCartesian,l=(e("../style-spec/util/color"),e("../style-spec/util/interpolate")),c=e("./properties"),f=c.Properties,h=c.Transitionable,p=(c.Transitioning,c.PossiblyEvaluated,c.DataConstantProperty),d=function(){this.specification=r.light.position};d.prototype.possiblyEvaluate=function(e,t){return u(e.expression.evaluate(t))},d.prototype.interpolate=function(e,t,n){return{x:l.number(e.x,t.x,n),y:l.number(e.y,t.y,n),z:l.number(e.z,t.z,n)}};var v=new f({anchor:new p(r.light.anchor),position:new d,color:new p(r.light.color),intensity:new p(r.light.intensity)}),g=function(e){function t(t){e.call(this),this._transitionable=new h(v),this.setLight(t),this._transitioning=this._transitionable.untransitioned()}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.getLight=function(){return this._transitionable.serialize()},t.prototype.setLight=function(e){var t=this;if(!this._validate(a.light,e))for(var n in e){var r=e[n];i.endsWith(n,"-transition")?t._transitionable.setTransition(n.slice(0,-"-transition".length),r):t._transitionable.setValue(n,r)}},t.prototype.updateTransitions=function(e,t){!1===e.transition?this._transitioning=this._transitionable.untransitioned():this._transitioning=this._transitionable.transitioned({now:Date.now(),transition:t},this._transitioning)},t.prototype.hasTransition=function(){return this._transitioning.hasTransition()},t.prototype.recalculate=function(e){this.properties=this._transitioning.possiblyEvaluate(e)},t.prototype._validate=function(e,t){return a.emitErrors(this,e.call(a,i.extend({value:t,style:{glyphs:!0,sprite:!0},styleSpec:r})))},t}(o);t.exports=g},{"../style-spec/reference/latest":148,"../style-spec/util/color":150,"../style-spec/util/interpolate":154,"../util/evented":253,"../util/util":266,"./properties":183,"./validate_style":204}],179:[function(e,t,n){"use strict";var r=e("../util/mapbox"),i=r.normalizeGlyphsURL,o=e("../util/ajax"),a=e("./parse_glyph_pbf");t.exports=function(e,t,n,r,s){var u=256*t,l=u+255,c=r(i(n).replace("{fontstack}",e).replace("{range}",u+"-"+l),o.ResourceType.Glyphs);o.getArrayBuffer(c,function(e,t){if(e)s(e);else if(t){for(var n={},r=0,i=a(t.data);r<i.length;r+=1){var o=i[r];n[o.id]=o}s(null,n)}})}},{"../util/ajax":244,"../util/mapbox":260,"./parse_glyph_pbf":181}],180:[function(e,t,n){"use strict";var r=e("../util/ajax"),i=e("../util/browser"),o=e("../util/mapbox"),a=o.normalizeSpriteURL,s=e("../util/image"),u=s.RGBAImage;t.exports=function(e,t,n){function o(){if(c)n(c);else if(s&&l){var e=i.getImageData(l),t={};for(var r in s){var o=s[r],a=o.width,f=o.height,h=o.x,p=o.y,d=o.sdf,v=o.pixelRatio,g=u.create({width:a,height:f});u.copy(e,g,{x:h,y:p},{x:0,y:0},{width:a,height:f}),t[r]={data:g,pixelRatio:v,sdf:d}}n(null,t)}}var s,l,c,f=i.devicePixelRatio>1?"@2x":"";r.getJSON(t(a(e,f,".json"),r.ResourceType.SpriteJSON),function(e,t){c||(c=e,s=t,o())}),r.getImage(t(a(e,f,".png"),r.ResourceType.SpriteImage),function(e,t){c||(c=e,l=t,o())})}},{"../util/ajax":244,"../util/browser":245,"../util/image":256,"../util/mapbox":260}],181:[function(e,t,n){"use strict";function r(e,t,n){1===e&&n.readMessage(i,t)}function i(e,t,n){if(3===e){var r=n.readMessage(o,{}),i=r.id,a=r.bitmap,u=r.width,c=r.height,f=r.left,h=r.top,p=r.advance;t.push({id:i,bitmap:s.create({width:u+2*l,height:c+2*l},a),metrics:{width:u,height:c,left:f,top:h,advance:p}})}}function o(e,t,n){1===e?t.id=n.readVarint():2===e?t.bitmap=n.readBytes():3===e?t.width=n.readVarint():4===e?t.height=n.readVarint():5===e?t.left=n.readSVarint():6===e?t.top=n.readSVarint():7===e&&(t.advance=n.readVarint())}var a=e("../util/image"),s=a.AlphaImage,u=e("pbf"),l=3;t.exports=function(e){return new u(e).readFields(r,[])},t.exports.GLYPH_PBF_BORDER=l},{"../util/image":256,pbf:38}],182:[function(e,t,n){"use strict";function r(e,t){var n=a.fromID(e),r=a.fromID(t);return n.isLessThan(r)?-1:r.isLessThan(n)?1:0}var i=e("../util/browser"),o=e("../symbol/collision_index"),a=e("../source/tile_coord"),s=function(e){this._currentTileIndex=0,this._tileIDs=e};s.prototype.continuePlacement=function(e,t,n,r,i){for(var o=this;this._currentTileIndex<this._tileIDs.length;)if(e.getTileByID(o._tileIDs[o._currentTileIndex]).placeLayer(n,t,r,e.id),o._currentTileIndex++,i())return!0};var u=function(e,t,n,r,a,s){this.collisionIndex=new o(e.clone()),this._currentPlacementIndex=t.length-1,this._forceFullPlacement=n,this._showCollisionBoxes=r,this._sourceCacheTileIDs={},this._done=!1,this._delayUntil=n||!s?i.now():s._delayUntil+300,this._collisionFadeTimes=s?s._collisionFadeTimes:{latestStart:0,duration:a}};u.prototype.isDone=function(){return this._done},u.prototype.continuePlacement=function(e,t,n){var o=this,a=i.now();if(a<this._delayUntil)return!0;for(var u=function(){var e=i.now()-a;return!o._forceFullPlacement&&e>2};this._currentPlacementIndex>=0;){var l=e[o._currentPlacementIndex],c=t[l];if("symbol"===c.type){var f=n[c.source];if(o._inProgressLayer||(o._sourceCacheTileIDs[c.source]||(o._sourceCacheTileIDs[c.source]=f.getRenderableIds().sort(r)),o._inProgressLayer=new s(o._sourceCacheTileIDs[c.source])),o._inProgressLayer.continuePlacement(f,o.collisionIndex,o._showCollisionBoxes,c,u))return;delete o._inProgressLayer}o._currentPlacementIndex--}for(var h in n)n[h].commitPlacement(o.collisionIndex,o._collisionFadeTimes);this._done=!0},u.prototype.stillFading=function(){return Date.now()<this._collisionFadeTimes.latestStart+this._collisionFadeTimes.duration},t.exports=u},{"../source/tile_coord":112,"../symbol/collision_index":210,"../util/browser":245}],183:[function(e,t,n){"use strict";var r=e("../util/util"),i=r.extend,o=r.easeCubicInOut,a=e("../style-spec/util/interpolate"),s=e("../style-spec/expression"),u=s.normalizePropertyExpression,l=(e("../style-spec/util/color"),function(e,t){this.property=e,this.value=t,this.expression=u(void 0===t?e.specification.default:t,e.specification)});l.prototype.isDataDriven=function(){return"source"===this.expression.kind||"composite"===this.expression.kind},l.prototype.possiblyEvaluate=function(e){return this.property.possiblyEvaluate(this,e)};var c=function(e){this.property=e,this.value=new l(e,void 0)};c.prototype.transitioned=function(e,t){return new h(this.property,this.value,t,i({},this.transition,e.transition),e.now)},c.prototype.untransitioned=function(){return new h(this.property,this.value,null,{},0)};var f=function(e){this._properties=e,this._values=Object.create(e.defaultTransitionablePropertyValues)};f.prototype.getValue=function(e){return this._values[e].value.value},f.prototype.setValue=function(e,t){this._values.hasOwnProperty(e)||(this._values[e]=new c(this._values[e].property)),this._values[e].value=new l(this._values[e].property,null===t?void 0:t)},f.prototype.getTransition=function(e){return this._values[e].transition},f.prototype.setTransition=function(e,t){this._values.hasOwnProperty(e)||(this._values[e]=new c(this._values[e].property)),this._values[e].transition=t||void 0},f.prototype.serialize=function(){for(var e=this,t={},n=0,r=Object.keys(e._values);n<r.length;n+=1){var i=r[n],o=e.getValue(i);void 0!==o&&(t[i]=o);var a=e.getTransition(i);void 0!==a&&(t[i+"-transition"]=a)}return t},f.prototype.transitioned=function(e,t){for(var n=this,r=new p(this._properties),i=0,o=Object.keys(n._values);i<o.length;i+=1){var a=o[i];r._values[a]=n._values[a].transitioned(e,t._values[a])}return r},f.prototype.untransitioned=function(){for(var e=this,t=new p(this._properties),n=0,r=Object.keys(e._values);n<r.length;n+=1){var i=r[n];t._values[i]=e._values[i].untransitioned()}return t};var h=function(e,t,n,r,i){this.property=e,this.value=t,this.begin=i+r.delay||0,this.end=this.begin+r.duration||0,(r.delay||r.duration)&&(this.prior=n)};h.prototype.possiblyEvaluate=function(e){var t=e.now||0,n=this.value.possiblyEvaluate(e),r=this.prior;if(r){if(t>this.end)return this.prior=null,n;if(this.value.isDataDriven())return this.prior=null,n;if(t<this.begin)return r.possiblyEvaluate(e);var i=(t-this.begin)/(this.end-this.begin);return this.property.interpolate(r.possiblyEvaluate(e),n,o(i))}return n};var p=function(e){this._properties=e,this._values=Object.create(e.defaultTransitioningPropertyValues)};p.prototype.possiblyEvaluate=function(e){for(var t=this,n=new g(this._properties),r=0,i=Object.keys(t._values);r<i.length;r+=1){var o=i[r];n._values[o]=t._values[o].possiblyEvaluate(e)}return n},p.prototype.hasTransition=function(){for(var e=this,t=0,n=Object.keys(e._values);t<n.length;t+=1){var r=n[t];if(e._values[r].prior)return!0}return!1};var d=function(e){this._properties=e,this._values=Object.create(e.defaultPropertyValues)};d.prototype.getValue=function(e){return this._values[e].value},d.prototype.setValue=function(e,t){this._values[e]=new l(this._values[e].property,null===t?void 0:t)},d.prototype.serialize=function(){for(var e=this,t={},n=0,r=Object.keys(e._values);n<r.length;n+=1){var i=r[n],o=e.getValue(i);void 0!==o&&(t[i]=o)}return t},d.prototype.possiblyEvaluate=function(e){for(var t=this,n=new g(this._properties),r=0,i=Object.keys(t._values);r<i.length;r+=1){var o=i[r];n._values[o]=t._values[o].possiblyEvaluate(e)}return n};var v=function(e,t,n){this.property=e,this.value=t,this.globals=n};v.prototype.isConstant=function(){return"constant"===this.value.kind},v.prototype.constantOr=function(e){return"constant"===this.value.kind?this.value.value:e},v.prototype.evaluate=function(e){return this.property.evaluate(this.value,this.globals,e)};var g=function(e){this._properties=e,this._values=Object.create(e.defaultPossiblyEvaluatedValues)};g.prototype.get=function(e){return this._values[e]};var y=function(e){this.specification=e};y.prototype.possiblyEvaluate=function(e,t){return e.expression.evaluate(t)},y.prototype.interpolate=function(e,t,n){var r=a[this.specification.type];return r?r(e,t,n):e};var m=function(e,t){void 0===t&&(t=!1),this.specification=e,this.useIntegerZoom=t};m.prototype.possiblyEvaluate=function(e,t){return this.useIntegerZoom&&(t=i({},t,{zoom:Math.floor(t.zoom)})),"constant"===e.expression.kind||"camera"===e.expression.kind?new v(this,{kind:"constant",value:e.expression.evaluate(t)},t):new v(this,e.expression,t)},m.prototype.interpolate=function(e,t,n){if("constant"!==e.value.kind||"constant"!==t.value.kind)return e;if(void 0!==e.value.value&&void 0!==e.value.value){var r=a[this.specification.type];return r?new v(this,{kind:"constant",value:r(e.value.value,t.value.value,n)},e.globals):e}},m.prototype.evaluate=function(e,t,n){return this.useIntegerZoom&&(t=i({},t,{zoom:Math.floor(t.zoom)})),"constant"===e.kind?e.value:e.evaluate(t,n)};var _=function(e){this.specification=e};_.prototype.possiblyEvaluate=function(e,t){if(void 0!==e.value){if("constant"===e.expression.kind){var n=e.expression.evaluate(t);return this._calculate(n,n,n,t)}return this._calculate(e.expression.evaluate({zoom:t.zoom-1}),e.expression.evaluate({zoom:t.zoom}),e.expression.evaluate({zoom:t.zoom+1}),t)}},_.prototype._calculate=function(e,t,n,r){var i=r.zoom,o=i-Math.floor(i),a=r.defaultFadeDuration,s=0!==a?Math.min((r.now-r.zoomHistory.lastIntegerZoomTime)/a,1):1;return i>r.zoomHistory.lastIntegerZoom?{from:e,to:t,fromScale:2,toScale:1,t:o+(1-o)*s}:{from:n,to:t,fromScale:.5,toScale:1,t:1-(1-s)*o}},_.prototype.interpolate=function(e){return e};var b=function(e){this.specification=e};b.prototype.possiblyEvaluate=function(){},b.prototype.interpolate=function(){};var E=function(e){var t=this;this.properties=e,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={};for(var n in e){var r=e[n],i=t.defaultPropertyValues[n]=new l(r,void 0),o=t.defaultTransitionablePropertyValues[n]=new c(r);t.defaultTransitioningPropertyValues[n]=o.untransitioned(),t.defaultPossiblyEvaluatedValues[n]=i.possiblyEvaluate({})}};t.exports={PropertyValue:l,Transitionable:f,Transitioning:p,Layout:d,PossiblyEvaluatedPropertyValue:v,PossiblyEvaluated:g,DataConstantProperty:y,DataDrivenProperty:m,CrossFadedProperty:_,HeatmapColorProperty:b,Properties:E}},{"../style-spec/expression":136,"../style-spec/util/color":150,"../style-spec/util/interpolate":154,"../util/util":266}],184:[function(e,t,n){"use strict";function r(e,t,n){var r=t.paint.get(e).value;return"constant"===r.kind?r.value:n.programConfigurations.get(t.id).paintPropertyStatistics[e].max}function i(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1])}function o(e,t,n,r,i){if(!t[0]&&!t[1])return e;var o=a.convert(t);"viewport"===n&&o._rotate(-r);for(var s=[],u=0;u<e.length;u++){for(var l=e[u],c=[],f=0;f<l.length;f++)c.push(l[f].sub(o._mult(i)));s.push(c)}return s}var a=e("@mapbox/point-geometry");t.exports={getMaximumPaintValue:r,translateDistance:i,translate:o}},{"@mapbox/point-geometry":2}],185:[function(e,t,n){"use strict";var r=e("../util/evented"),i=e("./style_layer"),o=e("./load_sprite"),a=e("../render/image_manager"),s=e("../render/glyph_manager"),u=e("./light"),l=e("../render/line_atlas"),c=e("../util/util"),f=e("../util/ajax"),h=e("../util/mapbox"),p=e("../util/browser"),d=e("../util/dispatcher"),v=e("./validate_style"),g=e("../source/source").getType,y=e("../source/source").setType,m=e("../source/query_features"),_=e("../source/source_cache"),b=(e("../source/geojson_source"),e("../style-spec/reference/latest")),E=e("../util/global_worker_pool"),x=e("../style-spec/deref"),w=e("../style-spec/diff"),T=e("../source/rtl_text_plugin"),S=e("./placement"),A=c.pick(w.operations,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),C=c.pick(w.operations,["setCenter","setZoom","setBearing","setPitch"]),O=function(e){function t(t,n){var r=this;void 0===n&&(n={}),e.call(this),this.map=t,this.dispatcher=new d(E(),this),this.imageManager=new a,this.glyphManager=new s(t._transformRequest,n.localIdeographFontFamily),this.lineAtlas=new l(256,512),this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory={},this._loaded=!1,this._resetUpdates();var i=this;this._rtlTextPluginCallback=T.registerForPluginAvailability(function(e){i.dispatcher.broadcast("loadRTLTextPlugin",e.pluginBlobURL,e.errorCallback);for(var t in i.sourceCaches)i.sourceCaches[t].reload()}),this.on("data",function(e){if("source"===e.dataType&&"metadata"===e.sourceDataType){var t=r.sourceCaches[e.sourceId];if(t){var n=t.getSource();if(n&&n.vectorLayerIds)for(var i in r._layers){var o=r._layers[i];o.source===n.id&&r._validateLayer(o)}}}})}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.loadURL=function(e,t){var n=this;void 0===t&&(t={}),this.fire("dataloading",{dataType:"style"});var r="boolean"==typeof t.validate?t.validate:!h.isMapboxURL(e);e=h.normalizeStyleURL(e,t.accessToken);var i=this.map._transformRequest(e,f.ResourceType.Style);f.getJSON(i,function(e,t){e?n.fire("error",{error:e}):t&&n._load(t,r)})},t.prototype.loadJSON=function(e,t){var n=this;void 0===t&&(t={}),this.fire("dataloading",{dataType:"style"}),p.frame(function(){n._load(e,!1!==t.validate)})},t.prototype._load=function(e,t){var n=this;if(!t||!v.emitErrors(this,v(e))){this._loaded=!0,this.stylesheet=e,this.updatePaintProperties();for(var r in e.sources)n.addSource(r,e.sources[r],{validate:!1});e.sprite?o(e.sprite,this.map._transformRequest,function(e,t){if(e)n.fire("error",e);else if(t)for(var r in t)n.imageManager.addImage(r,t[r]);n.imageManager.setLoaded(!0),n.fire("data",{dataType:"style"})}):this.imageManager.setLoaded(!0),this.glyphManager.setURL(e.glyphs);var a=x(this.stylesheet.layers);this._order=a.map(function(e){return e.id}),this._layers={};for(var s=0,l=a;s<l.length;s+=1){var c=l[s];c=i.create(c),c.setEventedParent(n,{layer:{id:c.id}}),n._layers[c.id]=c}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new u(this.stylesheet.light),this.fire("data",{dataType:"style"}),this.fire("style.load")}},t.prototype._validateLayer=function(e){var t=this.sourceCaches[e.source];if(t){var n=e.sourceLayer;if(n){var r=t.getSource();("geojson"===r.type||r.vectorLayerIds&&-1===r.vectorLayerIds.indexOf(n))&&this.fire("error",{error:new Error('Source layer "'+n+'" does not exist on source "'+r.id+'" as specified by style layer "'+e.id+'"')})}}},t.prototype.loaded=function(){var e=this;if(!this._loaded)return!1;if(Object.keys(this._updatedSources).length)return!1;for(var t in e.sourceCaches)if(!e.sourceCaches[t].loaded())return!1;return!!this.imageManager.isLoaded()},t.prototype._serializeLayers=function(e){var t=this;return e.map(function(e){return t._layers[e].serialize()})},t.prototype._applyPaintPropertyUpdates=function(e){var t=this;if(this._loaded){e=e||{transition:!0};var n=c.extend({duration:300,delay:0},this.stylesheet.transition),r=this._updatedAllPaintProps?this._layers:this._updatedPaintProps;for(var i in r)t._layers[i].updatePaintTransitions(e,n);this.light.updateTransitions(e,n)}},t.prototype._recalculate=function(e){var t=this;if(this._loaded){for(var n in t.sourceCaches)t.sourceCaches[n].used=!1;for(var r={zoom:e,now:Date.now(),defaultFadeDuration:300,zoomHistory:this._updateZoomHistory(e)},i=0,o=t._order;i<o.length;i+=1){var a=o[i],s=t._layers[a];s.recalculate(r),!s.isHidden(e)&&s.source&&(t.sourceCaches[s.source].used=!0)}this.light.recalculate(r),this.z=e}},t.prototype.hasTransitions=function(){var e=this;if(this.light&&this.light.hasTransition())return!0;for(var t in e.sourceCaches)if(e.sourceCaches[t].hasTransition())return!0;for(var n in e._layers)if(e._layers[n].hasTransition())return!0;return!1},t.prototype._updateZoomHistory=function(e){var t=this.zoomHistory;return void 0===t.lastIntegerZoom&&(t.lastIntegerZoom=Math.floor(e),t.lastIntegerZoomTime=0,t.lastZoom=e),Math.floor(t.lastZoom)<Math.floor(e)?(t.lastIntegerZoom=Math.floor(e),t.lastIntegerZoomTime=Date.now()):Math.floor(t.lastZoom)>Math.floor(e)&&(t.lastIntegerZoom=Math.floor(e+1),t.lastIntegerZoomTime=Date.now()),t.lastZoom=e,t},t.prototype._checkLoaded=function(){if(!this._loaded)throw new Error("Style is not done loading")},t.prototype.update=function(e){var t=this;if(this._changed){var n=Object.keys(this._updatedLayers),r=Object.keys(this._removedLayers);(n.length||r.length)&&this._updateWorkerLayers(n,r);for(var i in t._updatedSources){var o=t._updatedSources[i];"reload"===o?t._reloadSource(i):"clear"===o&&t._clearSource(i)}this._applyPaintPropertyUpdates(e),this._resetUpdates(),this.fire("data",{dataType:"style"})}},t.prototype._updateWorkerLayers=function(e,t){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(e),removedIds:t})},t.prototype._resetUpdates=function(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._updatedAllPaintProps=!1},t.prototype.setState=function(e){var t=this;if(this._checkLoaded(),v.emitErrors(this,v(e)))return!1;e=c.clone(e),e.layers=x(e.layers);var n=w(this.serialize(),e).filter(function(e){return!(e.command in C)});if(0===n.length)return!1;var r=n.filter(function(e){return!(e.command in A)});if(r.length>0)throw new Error("Unimplemented: "+r.map(function(e){return e.command}).join(", ")+".");return n.forEach(function(e){"setTransition"!==e.command&&t[e.command].apply(t,e.args)}),this.stylesheet=e,!0},t.prototype.addImage=function(e,t){if(this.imageManager.getImage(e))return this.fire("error",{error:new Error("An image with this name already exists.")});this.imageManager.addImage(e,t),this.fire("data",{dataType:"style"})},t.prototype.removeImage=function(e){if(!this.imageManager.getImage(e))return this.fire("error",{error:new Error("No image with this name exists.")});this.imageManager.removeImage(e),this.fire("data",{dataType:"style"})},t.prototype.addSource=function(e,t,n){var r=this;if(this._checkLoaded(),void 0!==this.sourceCaches[e])throw new Error("There is already a source with this ID");if(!t.type)throw new Error("The type property must be defined, but the only the following properties were given: "+Object.keys(t).join(", ")+".");if(!(["vector","raster","geojson","video","image","canvas"].indexOf(t.type)>=0&&this._validate(v.source,"sources."+e,t,null,n))){var i=this.sourceCaches[e]=new _(e,t,this.dispatcher);i.style=this,i.setEventedParent(this,function(){return{isSourceLoaded:r.loaded(),source:i.serialize(),sourceId:e}}),i.onAdd(this.map),this._changed=!0}},t.prototype.removeSource=function(e){if(this._checkLoaded(),void 0===this.sourceCaches[e])throw new Error("There is no source with this ID");var t=this.sourceCaches[e];delete this.sourceCaches[e],delete this._updatedSources[e],t.fire("data",{sourceDataType:"metadata",dataType:"source",sourceId:e}),t.setEventedParent(null),t.clearTiles(),t.onRemove&&t.onRemove(this.map),this._changed=!0},t.prototype.setGeoJSONSourceData=function(e,t){this._checkLoaded(),this.sourceCaches[e].getSource().setData(t),this._changed=!0},t.prototype.getSource=function(e){return this.sourceCaches[e]&&this.sourceCaches[e].getSource()},t.prototype.addLayer=function(e,t,n){this._checkLoaded();var r=e.id;if("object"==typeof e.source&&(this.addSource(r,e.source),e=c.clone(e),e=c.extend(e,{source:r})),!this._validate(v.layer,"layers."+r,e,{arrayIndex:-1},n)){var o=i.create(e);this._validateLayer(o),o.setEventedParent(this,{layer:{id:r}});var a=t?this._order.indexOf(t):this._order.length;if(t&&-1===a)return void this.fire("error",{message:new Error('Layer with id "'+t+'" does not exist on this map.')});if(this._order.splice(a,0,r),this._layerOrderChanged=!0,this._layers[r]=o,this._removedLayers[r]&&o.source){var s=this._removedLayers[r];delete this._removedLayers[r],s.type!==o.type?this._updatedSources[o.source]="clear":(this._updatedSources[o.source]="reload",this.sourceCaches[o.source].pause())}this._updateLayer(o),this.updatePaintProperties(r)}},t.prototype.moveLayer=function(e,t){if(this._checkLoaded(),this._changed=!0,!this._layers[e])return void this.fire("error",{error:new Error("The layer '"+e+"' does not exist in the map's style and cannot be moved.")});var n=this._order.indexOf(e);this._order.splice(n,1);var r=t?this._order.indexOf(t):this._order.length;this._order.splice(r,0,e),this._layerOrderChanged=!0},t.prototype.removeLayer=function(e){this._checkLoaded();var t=this._layers[e];if(!t)return void this.fire("error",{error:new Error("The layer '"+e+"' does not exist in the map's style and cannot be removed.")});t.setEventedParent(null);var n=this._order.indexOf(e);this._order.splice(n,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[e]=t,delete this._layers[e],delete this._updatedLayers[e],delete this._updatedPaintProps[e]},t.prototype.getLayer=function(e){return this._layers[e]},t.prototype.setLayerZoomRange=function(e,t,n){this._checkLoaded();var r=this.getLayer(e);if(!r)return void this.fire("error",{error:new Error("The layer '"+e+"' does not exist in the map's style and cannot have zoom extent.")});r.minzoom===t&&r.maxzoom===n||(null!=t&&(r.minzoom=t),null!=n&&(r.maxzoom=n),this._updateLayer(r))},t.prototype.setFilter=function(e,t){this._checkLoaded();var n=this.getLayer(e);return n?c.deepEqual(n.filter,t)?void 0:null===t||void 0===t?(n.filter=void 0,void this._updateLayer(n)):void(this._validate(v.filter,"layers."+n.id+".filter",t)||(n.filter=c.clone(t),this._updateLayer(n))):void this.fire("error",{error:new Error("The layer '"+e+"' does not exist in the map's style and cannot be filtered.")})},t.prototype.getFilter=function(e){return c.clone(this.getLayer(e).filter)},t.prototype.setLayoutProperty=function(e,t,n){this._checkLoaded();var r=this.getLayer(e);if(!r)return void this.fire("error",{error:new Error("The layer '"+e+"' does not exist in the map's style and cannot be styled.")});c.deepEqual(r.getLayoutProperty(t),n)||(r.setLayoutProperty(t,n),this._updateLayer(r))},t.prototype.getLayoutProperty=function(e,t){return this.getLayer(e).getLayoutProperty(t)},t.prototype.setPaintProperty=function(e,t,n){this._checkLoaded();var r=this.getLayer(e);if(!r)return void this.fire("error",{error:new Error("The layer '"+e+"' does not exist in the map's style and cannot be styled.")});if(!c.deepEqual(r.getPaintProperty(t),n)){var i=r._transitionablePaint._values[t].value.isDataDriven();r.setPaintProperty(t,n),(r._transitionablePaint._values[t].value.isDataDriven()||i)&&this._updateLayer(r),this.updatePaintProperties(e,t)}},t.prototype.getPaintProperty=function(e,t){return this.getLayer(e).getPaintProperty(t)},t.prototype.getTransition=function(){return c.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)},t.prototype.updatePaintProperties=function(e,t){if(this._changed=!0,e){var n=this._updatedPaintProps;n[e]||(n[e]={}),n[e][t||"all"]=!0}else this._updatedAllPaintProps=!0},t.prototype.serialize=function(){var e=this;return c.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:c.mapObject(this.sourceCaches,function(e){return e.serialize()}),layers:this._order.map(function(t){return e._layers[t].serialize()})},function(e){return void 0!==e})},t.prototype._updateLayer=function(e){this._updatedLayers[e.id]=!0,e.source&&!this._updatedSources[e.source]&&(this._updatedSources[e.source]="reload",this.sourceCaches[e.source].pause()),this._changed=!0},t.prototype._flattenRenderedFeatures=function(e){for(var t=this,n=[],r=this._order.length-1;r>=0;r--)for(var i=t._order[r],o=0,a=e;o<a.length;o+=1){var s=a[o],u=s[i];if(u)for(var l=0,c=u;l<c.length;l+=1){var f=c[l];n.push(f)}}return n},t.prototype.queryRenderedFeatures=function(e,t,n,r){var i=this;t&&t.filter&&this._validate(v.filter,"queryRenderedFeatures.filter",t.filter);var o={};if(t&&t.layers){if(!Array.isArray(t.layers))return this.fire("error",{error:"parameters.layers must be an Array."}),[];for(var a=0,s=t.layers;a<s.length;a+=1){var u=s[a],l=i._layers[u];if(!l)return i.fire("error",{error:"The layer '"+u+"' does not exist in the map's style and cannot be queried for features."}),[];o[l.source]=!0}}var c=[];for(var f in i.sourceCaches)if(!t.layers||o[f]){var h=m.rendered(i.sourceCaches[f],i._layers,e,t,n,r);c.push(h)}return this._flattenRenderedFeatures(c)},t.prototype.querySourceFeatures=function(e,t){t&&t.filter&&this._validate(v.filter,"querySourceFeatures.filter",t.filter);var n=this.sourceCaches[e];return n?m.source(n,t):[]},t.prototype.addSourceType=function(e,t,n){return g(e)?n(new Error('A source type called "'+e+'" already exists.')):(y(e,t),t.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:e,url:t.workerSourceURL},n):n(null,null))},t.prototype.getLight=function(){return this.light.getLight()},t.prototype.setLight=function(e,t){this._checkLoaded();var n=this.light.getLight(),r=!1;for(var i in e)if(!c.deepEqual(e[i],n[i])){r=!0;break}if(r){t=t||{transition:!0};var o=c.extend({duration:300,delay:0},this.stylesheet.transition);this.light.setLight(e),this.light.updateTransitions(t,o)}},t.prototype._validate=function(e,t,n,r,i){return(!i||!1!==i.validate)&&v.emitErrors(this,e.call(v,c.extend({key:t,style:this.serialize(),value:n,styleSpec:b},r)))},t.prototype._remove=function(){var e=this;T.evented.off("pluginAvailable",this._rtlTextPluginCallback);for(var t in e.sourceCaches)e.sourceCaches[t].clearTiles();this.dispatcher.remove()},t.prototype._clearSource=function(e){this.sourceCaches[e].clearTiles()},t.prototype._reloadSource=function(e){this.sourceCaches[e].resume(),this.sourceCaches[e].reload()},t.prototype._updateSources=function(e){var t=this;for(var n in t.sourceCaches)t.sourceCaches[n].update(e)},t.prototype.getNeedsFullPlacement=function(){var e=this;if(this._layerOrderChanged)return!0;for(var t in e.sourceCaches)if(e.sourceCaches[t].getNeedsFullPlacement())return!0;return!1},t.prototype._generateCollisionBoxes=function(){var e=this;for(var t in e.sourceCaches)e._reloadSource(t)},t.prototype._updatePlacement=function(e,t,n){var r=this.getNeedsFullPlacement();return(r||!this.placement||this.placement.isDone())&&(this.placement=new S(e,this._order,r,t,n,this.placement),this._layerOrderChanged=!1),this.placement.continuePlacement(this._order,this._layers,this.sourceCaches),this.placement.isDone()&&(this.collisionIndex=this.placement.collisionIndex),!this.placement.isDone()||this.placement.stillFading()},t.prototype.getImages=function(e,t,n){this.imageManager.getImages(t.icons,n)},t.prototype.getGlyphs=function(e,t,n){this.glyphManager.getGlyphs(t.stacks,n)},t}(r);t.exports=O},{"../render/glyph_manager":85,"../render/image_manager":87,"../render/line_atlas":88,"../source/geojson_source":99,"../source/query_features":105,"../source/rtl_text_plugin":107,"../source/source":108,"../source/source_cache":109,"../style-spec/deref":118,"../style-spec/diff":119,"../style-spec/reference/latest":148,"../util/ajax":244,"../util/browser":245,"../util/dispatcher":251,"../util/evented":253,"../util/global_worker_pool":255,"../util/mapbox":260,"../util/util":266,"./light":178,"./load_sprite":180,"./placement":182,"./style_layer":186,"./validate_style":204}],186:[function(e,t,n){"use strict";var r=e("../util/util"),i=e("../style-spec/reference/latest"),o=e("./validate_style"),a=e("../util/evented"),s=e("./properties"),u=s.Layout,l=s.Transitionable,c=(s.Transitioning,s.Properties,function(e){function t(t,n){var r=this;e.call(this),this.id=t.id,this.metadata=t.metadata,this.type=t.type,this.minzoom=t.minzoom,this.maxzoom=t.maxzoom,this.visibility="visible","background"!==t.type&&(this.source=t.source,this.sourceLayer=t["source-layer"],this.filter=t.filter),this._featureFilter=function(){return!0},n.layout&&(this._unevaluatedLayout=new u(n.layout)),this._transitionablePaint=new l(n.paint);for(var i in t.paint)r.setPaintProperty(i,t.paint[i],{validate:!1});for(var o in t.layout)r.setLayoutProperty(o,t.layout[o],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned()}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.getLayoutProperty=function(e){return"visibility"===e?this.visibility:this._unevaluatedLayout.getValue(e)},t.prototype.setLayoutProperty=function(e,t,n){if(null!==t&&void 0!==t){var r="layers."+this.id+".layout."+e;if(this._validate(o.layoutProperty,r,e,t,n))return}if("visibility"===e)return void(this.visibility="none"===t?t:"visible");this._unevaluatedLayout.setValue(e,t)},t.prototype.getPaintProperty=function(e){return r.endsWith(e,"-transition")?this._transitionablePaint.getTransition(e.slice(0,-"-transition".length)):this._transitionablePaint.getValue(e)},t.prototype.setPaintProperty=function(e,t,n){if(null!==t&&void 0!==t){var i="layers."+this.id+".paint."+e;if(this._validate(o.paintProperty,i,e,t,n))return}r.endsWith(e,"-transition")?this._transitionablePaint.setTransition(e.slice(0,-"-transition".length),t||void 0):this._transitionablePaint.setValue(e,t)},t.prototype.isHidden=function(e){return!!(this.minzoom&&e<this.minzoom)||!!(this.maxzoom&&e>=this.maxzoom)||"none"===this.visibility},t.prototype.updatePaintTransitions=function(e,t){!1===e.transition?this._transitioningPaint=this._transitionablePaint.untransitioned():this._transitioningPaint=this._transitionablePaint.transitioned({now:Date.now(),transition:t},this._transitioningPaint)},t.prototype.hasTransition=function(){return this._transitioningPaint.hasTransition()},t.prototype.recalculate=function(e){this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(e)),this.paint=this._transitioningPaint.possiblyEvaluate(e)},t.prototype.serialize=function(){var e={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return"none"===this.visibility&&(e.layout=e.layout||{},e.layout.visibility="none"),r.filterObject(e,function(e,t){return!(void 0===e||"layout"===t&&!Object.keys(e).length||"paint"===t&&!Object.keys(e).length)})},t.prototype._validate=function(e,t,n,r,a){return(!a||!1!==a.validate)&&o.emitErrors(this,e.call(o,{key:t,layerType:this.type,objectKey:n,value:r,styleSpec:i,style:{glyphs:!0,sprite:!0}}))},t.prototype.has3DPass=function(){return!1},t.prototype.resize=function(e){},t}(a));t.exports=c;var f={circle:e("./style_layer/circle_style_layer"),heatmap:e("./style_layer/heatmap_style_layer"),fill:e("./style_layer/fill_style_layer"),"fill-extrusion":e("./style_layer/fill_extrusion_style_layer"),line:e("./style_layer/line_style_layer"),symbol:e("./style_layer/symbol_style_layer"),background:e("./style_layer/background_style_layer"),raster:e("./style_layer/raster_style_layer")};c.create=function(e){return new f[e.type](e)}},{"../style-spec/reference/latest":148,"../util/evented":253,"../util/util":266,"./properties":183,"./style_layer/background_style_layer":187,"./style_layer/circle_style_layer":189,"./style_layer/fill_extrusion_style_layer":191,"./style_layer/fill_style_layer":193,"./style_layer/heatmap_style_layer":195,"./style_layer/line_style_layer":197,"./style_layer/raster_style_layer":199,"./style_layer/symbol_style_layer":201,"./validate_style":204}],187:[function(e,t,n){"use strict";var r=e("../style_layer"),i=e("./background_style_layer_properties"),o=e("../properties"),a=(o.Transitionable,o.Transitioning,o.PossiblyEvaluated,function(e){function t(t){e.call(this,t,i)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t}(r));t.exports=a},{"../properties":183,"../style_layer":186,"./background_style_layer_properties":188}],188:[function(e,t,n){"use strict";var r=e("../../style-spec/reference/latest"),i=e("../properties"),o=i.Properties,a=i.DataConstantProperty,s=(i.DataDrivenProperty,i.CrossFadedProperty),u=(i.HeatmapColorProperty,new o({"background-color":new a(r.paint_background["background-color"]),"background-pattern":new s(r.paint_background["background-pattern"]),"background-opacity":new a(r.paint_background["background-opacity"])}));t.exports={paint:u}},{"../../style-spec/reference/latest":148,"../properties":183}],189:[function(e,t,n){"use strict";var r=e("../style_layer"),i=e("../../data/bucket/circle_bucket"),o=e("../../util/intersection_tests"),a=o.multiPolygonIntersectsBufferedMultiPoint,s=e("../query_utils"),u=s.getMaximumPaintValue,l=s.translateDistance,c=s.translate,f=e("./circle_style_layer_properties"),h=e("../properties"),p=(h.Transitionable,h.Transitioning,h.PossiblyEvaluated,function(e){function t(t){e.call(this,t,f)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.createBucket=function(e){return new i(e)},t.prototype.queryRadius=function(e){var t=e;return u("circle-radius",this,t)+u("circle-stroke-width",this,t)+l(this.paint.get("circle-translate"))},t.prototype.queryIntersectsFeature=function(e,t,n,r,i,o){var s=c(e,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),i,o),u=this.paint.get("circle-radius").evaluate(t)*o,l=this.paint.get("circle-stroke-width").evaluate(t)*o;return a(s,n,u+l)},t}(r));t.exports=p},{"../../data/bucket/circle_bucket":52,"../../util/intersection_tests":257,"../properties":183,"../query_utils":184,"../style_layer":186,"./circle_style_layer_properties":190}],190:[function(e,t,n){"use strict";var r=e("../../style-spec/reference/latest"),i=e("../properties"),o=i.Properties,a=i.DataConstantProperty,s=i.DataDrivenProperty,u=(i.CrossFadedProperty,i.HeatmapColorProperty,new o({"circle-radius":new s(r.paint_circle["circle-radius"]),"circle-color":new s(r.paint_circle["circle-color"]),"circle-blur":new s(r.paint_circle["circle-blur"]),"circle-opacity":new s(r.paint_circle["circle-opacity"]),"circle-translate":new a(r.paint_circle["circle-translate"]),"circle-translate-anchor":new a(r.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new a(r.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new a(r.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new s(r.paint_circle["circle-stroke-width"]),"circle-stroke-color":new s(r.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new s(r.paint_circle["circle-stroke-opacity"])}));t.exports={paint:u}},{"../../style-spec/reference/latest":148,"../properties":183}],191:[function(e,t,n){"use strict";var r=e("../style_layer"),i=e("../../data/bucket/fill_extrusion_bucket"),o=e("../../util/intersection_tests"),a=o.multiPolygonIntersectsMultiPolygon,s=e("../query_utils"),u=s.translateDistance,l=s.translate,c=e("./fill_extrusion_style_layer_properties"),f=e("../properties"),h=(f.Transitionable,f.Transitioning,f.PossiblyEvaluated,function(e){function t(t){e.call(this,t,c)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.createBucket=function(e){return new i(e)},t.prototype.queryRadius=function(){return u(this.paint.get("fill-extrusion-translate"))},t.prototype.queryIntersectsFeature=function(e,t,n,r,i,o){var s=l(e,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),i,o);return a(s,n)},t.prototype.has3DPass=function(){return 0!==this.paint.get("fill-extrusion-opacity")&&"none"!==this.visibility},t.prototype.resize=function(e){if(this.viewportFrame){var t=this.viewportFrame,n=t.texture,r=t.fbo;e.deleteTexture(n),e.deleteFramebuffer(r),this.viewportFrame=null}},t}(r));t.exports=h},{"../../data/bucket/fill_extrusion_bucket":54,"../../util/intersection_tests":257,"../properties":183,"../query_utils":184,"../style_layer":186,"./fill_extrusion_style_layer_properties":192}],192:[function(e,t,n){"use strict";var r=e("../../style-spec/reference/latest"),i=e("../properties"),o=i.Properties,a=i.DataConstantProperty,s=i.DataDrivenProperty,u=i.CrossFadedProperty,l=(i.HeatmapColorProperty,new o({"fill-extrusion-opacity":new a(r["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new s(r["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new a(r["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new a(r["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new u(r["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new s(r["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new s(r["paint_fill-extrusion"]["fill-extrusion-base"])}));t.exports={paint:l}},{"../../style-spec/reference/latest":148,"../properties":183}],193:[function(e,t,n){"use strict";var r=e("../style_layer"),i=e("../../data/bucket/fill_bucket"),o=e("../../util/intersection_tests"),a=o.multiPolygonIntersectsMultiPolygon,s=e("../query_utils"),u=s.translateDistance,l=s.translate,c=e("./fill_style_layer_properties"),f=e("../properties"),h=(f.Transitionable,f.Transitioning,f.PossiblyEvaluated,function(e){function t(t){e.call(this,t,c)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.recalculate=function(e){this.paint=this._transitioningPaint.possiblyEvaluate(e),void 0===this._transitionablePaint.getValue("fill-outline-color")&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])},t.prototype.createBucket=function(e){return new i(e)},t.prototype.queryRadius=function(){return u(this.paint.get("fill-translate"))},t.prototype.queryIntersectsFeature=function(e,t,n,r,i,o){var s=l(e,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),i,o);return a(s,n)},t}(r));t.exports=h},{"../../data/bucket/fill_bucket":53,"../../util/intersection_tests":257,"../properties":183,"../query_utils":184,"../style_layer":186,"./fill_style_layer_properties":194}],194:[function(e,t,n){"use strict";var r=e("../../style-spec/reference/latest"),i=e("../properties"),o=i.Properties,a=i.DataConstantProperty,s=i.DataDrivenProperty,u=i.CrossFadedProperty,l=(i.HeatmapColorProperty,new o({"fill-antialias":new a(r.paint_fill["fill-antialias"]),"fill-opacity":new s(r.paint_fill["fill-opacity"]),"fill-color":new s(r.paint_fill["fill-color"]),"fill-outline-color":new s(r.paint_fill["fill-outline-color"]),"fill-translate":new a(r.paint_fill["fill-translate"]),"fill-translate-anchor":new a(r.paint_fill["fill-translate-anchor"]),"fill-pattern":new u(r.paint_fill["fill-pattern"])}));t.exports={paint:l}},{"../../style-spec/reference/latest":148,"../properties":183}],195:[function(e,t,n){"use strict";var r=e("../style_layer"),i=e("../../data/bucket/heatmap_bucket"),o=e("../../util/image").RGBAImage,a=e("./heatmap_style_layer_properties"),s=e("../properties"),u=(s.Transitionable,s.Transitioning,s.PossiblyEvaluated,function(e){function t(t){e.call(this,t,a),this._updateColorRamp()}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.createBucket=function(e){return new i(e)},t.prototype.setPaintProperty=function(t,n,r){e.prototype.setPaintProperty.call(this,t,n,r),"heatmap-color"===t&&this._updateColorRamp()},t.prototype._updateColorRamp=function(){for(var e=this._transitionablePaint._values["heatmap-color"].value.expression,t=new Uint8Array(1024),n=t.length,r=4;r<n;r+=4){var i=e.evaluate({heatmapDensity:r/n});t[r+0]=Math.floor(255*i.r/i.a),t[r+1]=Math.floor(255*i.g/i.a),t[r+2]=Math.floor(255*i.b/i.a),t[r+3]=Math.floor(255*i.a)}this.colorRamp=o.create({width:256,height:1},t),this.colorRampTexture=null},t.prototype.resize=function(e){this.heatmapTexture&&(e.deleteTexture(this.heatmapTexture),this.heatmapTexture=null),this.heatmapFbo&&(e.deleteFramebuffer(this.heatmapFbo),this.heatmapFbo=null)},t.prototype.queryRadius=function(){return 0},t.prototype.queryIntersectsFeature=function(){return!1},t}(r));t.exports=u},{"../../data/bucket/heatmap_bucket":55,"../../util/image":256,"../properties":183,"../style_layer":186,"./heatmap_style_layer_properties":196}],196:[function(e,t,n){"use strict";var r=e("../../style-spec/reference/latest"),i=e("../properties"),o=i.Properties,a=i.DataConstantProperty,s=i.DataDrivenProperty,u=(i.CrossFadedProperty,i.HeatmapColorProperty),l=new o({"heatmap-radius":new a(r.paint_heatmap["heatmap-radius"]),"heatmap-weight":new s(r.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new a(r.paint_heatmap["heatmap-intensity"]),"heatmap-color":new u(r.paint_heatmap["heatmap-color"]),"heatmap-opacity":new a(r.paint_heatmap["heatmap-opacity"])});t.exports={paint:l}},{"../../style-spec/reference/latest":148,"../properties":183}],197:[function(e,t,n){"use strict";function r(e,t){return t>0?t+2*e:e}function i(e,t){for(var n=[],r=new o(0,0),i=0;i<e.length;i++){for(var a=e[i],s=[],u=0;u<a.length;u++){var l=a[u-1],c=a[u],f=a[u+1],h=0===u?r:c.sub(l)._unit()._perp(),p=u===a.length-1?r:f.sub(c)._unit()._perp(),d=h._add(p)._unit(),v=d.x*p.x+d.y*p.y;d._mult(1/v),s.push(d._mult(t)._add(c))}n.push(s)}return n}var o=e("@mapbox/point-geometry"),a=e("../style_layer"),s=e("../../data/bucket/line_bucket"),u=e("../../util/intersection_tests"),l=u.multiPolygonIntersectsBufferedMultiLine,c=e("../query_utils"),f=c.getMaximumPaintValue,h=c.translateDistance,p=c.translate,d=e("./line_style_layer_properties"),v=e("../properties"),g=(v.Transitionable,v.Transitioning,v.Layout,v.PossiblyEvaluated,v.DataDrivenProperty),y=new g(d.paint.properties["line-width"].specification,!0),m=function(e){function t(t){e.call(this,t,d)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.recalculate=function(t){e.prototype.recalculate.call(this,t),this.paint._values["line-floorwidth"]=y.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,t)},t.prototype.createBucket=function(e){return new s(e)},t.prototype.queryRadius=function(e){var t=e,n=r(f("line-width",this,t),f("line-gap-width",this,t)),i=f("line-offset",this,t);return n/2+Math.abs(i)+h(this.paint.get("line-translate"))},t.prototype.queryIntersectsFeature=function(e,t,n,o,a,s){var u=p(e,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),a,s),c=s/2*r(this.paint.get("line-width").evaluate(t),this.paint.get("line-gap-width").evaluate(t)),f=this.paint.get("line-offset").evaluate(t);return f&&(n=i(n,f*s)),l(u,n,c)},t}(a);t.exports=m},{"../../data/bucket/line_bucket":56,"../../util/intersection_tests":257,"../properties":183,"../query_utils":184,"../style_layer":186,"./line_style_layer_properties":198,"@mapbox/point-geometry":2}],198:[function(e,t,n){"use strict";var r=e("../../style-spec/reference/latest"),i=e("../properties"),o=i.Properties,a=i.DataConstantProperty,s=i.DataDrivenProperty,u=i.CrossFadedProperty,l=(i.HeatmapColorProperty,new o({"line-cap":new a(r.layout_line["line-cap"]),"line-join":new s(r.layout_line["line-join"]),"line-miter-limit":new a(r.layout_line["line-miter-limit"]),"line-round-limit":new a(r.layout_line["line-round-limit"])})),c=new o({"line-opacity":new s(r.paint_line["line-opacity"]),"line-color":new s(r.paint_line["line-color"]),"line-translate":new a(r.paint_line["line-translate"]),"line-translate-anchor":new a(r.paint_line["line-translate-anchor"]),"line-width":new s(r.paint_line["line-width"]),"line-gap-width":new s(r.paint_line["line-gap-width"]),"line-offset":new s(r.paint_line["line-offset"]),"line-blur":new s(r.paint_line["line-blur"]),"line-dasharray":new u(r.paint_line["line-dasharray"]),"line-pattern":new u(r.paint_line["line-pattern"])});t.exports={paint:c,layout:l}},{"../../style-spec/reference/latest":148,"../properties":183}],199:[function(e,t,n){"use strict";var r=e("../style_layer"),i=e("./raster_style_layer_properties"),o=e("../properties"),a=(o.Transitionable,o.Transitioning,o.PossiblyEvaluated,function(e){function t(t){e.call(this,t,i)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t}(r));t.exports=a},{"../properties":183,"../style_layer":186,"./raster_style_layer_properties":200}],200:[function(e,t,n){"use strict";var r=e("../../style-spec/reference/latest"),i=e("../properties"),o=i.Properties,a=i.DataConstantProperty,s=(i.DataDrivenProperty,i.CrossFadedProperty,i.HeatmapColorProperty,new o({"raster-opacity":new a(r.paint_raster["raster-opacity"]),"raster-hue-rotate":new a(r.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new a(r.paint_raster["raster-brightness-min"]),"raster-brightness-max":new a(r.paint_raster["raster-brightness-max"]),"raster-saturation":new a(r.paint_raster["raster-saturation"]),"raster-contrast":new a(r.paint_raster["raster-contrast"]),"raster-fade-duration":new a(r.paint_raster["raster-fade-duration"])}));t.exports={paint:s}},{"../../style-spec/reference/latest":148,"../properties":183}],201:[function(e,t,n){"use strict";var r=e("../style_layer"),i=e("../../data/bucket/symbol_bucket"),o=e("../../util/token"),a=e("../../style-spec/expression"),s=a.isExpression,u=e("./symbol_style_layer_properties"),l=e("../properties"),c=(l.Transitionable,l.Transitioning,l.Layout,l.PossiblyEvaluated,function(e){function t(t){e.call(this,t,u)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.recalculate=function(t){e.prototype.recalculate.call(this,t),"auto"===this.layout.get("icon-rotation-alignment")&&("line"===this.layout.get("symbol-placement")?this.layout._values["icon-rotation-alignment"]="map":this.layout._values["icon-rotation-alignment"]="viewport"),"auto"===this.layout.get("text-rotation-alignment")&&("line"===this.layout.get("symbol-placement")?this.layout._values["text-rotation-alignment"]="map":this.layout._values["text-rotation-alignment"]="viewport"),"auto"===this.layout.get("text-pitch-alignment")&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),"auto"===this.layout.get("icon-pitch-alignment")&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment"))},t.prototype.getValueAndResolveTokens=function(e,t){var n=this.layout.get(e).evaluate(t),r=this._unevaluatedLayout._values[e];return r.isDataDriven()||s(r.value)?n:o(t.properties,n)},t.prototype.createBucket=function(e){return new i(e)},t.prototype.queryRadius=function(){return 0},t.prototype.queryIntersectsFeature=function(){return!1},t}(r));t.exports=c},{"../../data/bucket/symbol_bucket":57,"../../style-spec/expression":136,"../../util/token":265,"../properties":183,"../style_layer":186,"./symbol_style_layer_properties":202}],202:[function(e,t,n){"use strict";var r=e("../../style-spec/reference/latest"),i=e("../properties"),o=i.Properties,a=i.DataConstantProperty,s=i.DataDrivenProperty,u=(i.CrossFadedProperty,i.HeatmapColorProperty,new o({"symbol-placement":new a(r.layout_symbol["symbol-placement"]),"symbol-spacing":new a(r.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new a(r.layout_symbol["symbol-avoid-edges"]),"icon-allow-overlap":new a(r.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new a(r.layout_symbol["icon-ignore-placement"]),"icon-optional":new a(r.layout_symbol["icon-optional"]),"icon-rotation-alignment":new a(r.layout_symbol["icon-rotation-alignment"]),"icon-size":new s(r.layout_symbol["icon-size"]),"icon-text-fit":new a(r.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new a(r.layout_symbol["icon-text-fit-padding"]),"icon-image":new s(r.layout_symbol["icon-image"]),"icon-rotate":new s(r.layout_symbol["icon-rotate"]),"icon-padding":new a(r.layout_symbol["icon-padding"]),"icon-keep-upright":new a(r.layout_symbol["icon-keep-upright"]),"icon-offset":new s(r.layout_symbol["icon-offset"]),"icon-anchor":new s(r.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new a(r.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new a(r.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new a(r.layout_symbol["text-rotation-alignment"]),"text-field":new s(r.layout_symbol["text-field"]),"text-font":new a(r.layout_symbol["text-font"]),"text-size":new s(r.layout_symbol["text-size"]),"text-max-width":new s(r.layout_symbol["text-max-width"]),"text-line-height":new a(r.layout_symbol["text-line-height"]),"text-letter-spacing":new s(r.layout_symbol["text-letter-spacing"]),"text-justify":new s(r.layout_symbol["text-justify"]),"text-anchor":new s(r.layout_symbol["text-anchor"]),"text-max-angle":new a(r.layout_symbol["text-max-angle"]),"text-rotate":new s(r.layout_symbol["text-rotate"]),"text-padding":new a(r.layout_symbol["text-padding"]),"text-keep-upright":new a(r.layout_symbol["text-keep-upright"]),"text-transform":new s(r.layout_symbol["text-transform"]),"text-offset":new s(r.layout_symbol["text-offset"]),"text-allow-overlap":new a(r.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new a(r.layout_symbol["text-ignore-placement"]),"text-optional":new a(r.layout_symbol["text-optional"])})),l=new o({"icon-opacity":new s(r.paint_symbol["icon-opacity"]),"icon-color":new s(r.paint_symbol["icon-color"]),"icon-halo-color":new s(r.paint_symbol["icon-halo-color"]),"icon-halo-width":new s(r.paint_symbol["icon-halo-width"]),"icon-halo-blur":new s(r.paint_symbol["icon-halo-blur"]),"icon-translate":new a(r.paint_symbol["icon-translate"]),"icon-translate-anchor":new a(r.paint_symbol["icon-translate-anchor"]),"text-opacity":new s(r.paint_symbol["text-opacity"]),"text-color":new s(r.paint_symbol["text-color"]),"text-halo-color":new s(r.paint_symbol["text-halo-color"]),"text-halo-width":new s(r.paint_symbol["text-halo-width"]),"text-halo-blur":new s(r.paint_symbol["text-halo-blur"]),"text-translate":new a(r.paint_symbol["text-translate"]),"text-translate-anchor":new a(r.paint_symbol["text-translate-anchor"])});t.exports={paint:l,layout:u}},{"../../style-spec/reference/latest":148,"../properties":183}],203:[function(e,t,n){"use strict";var r=e("./style_layer"),i=e("../util/util"),o=e("../style-spec/feature_filter"),a=e("../style-spec/group_by_layout"),s=function(e){e&&this.replace(e)};s.prototype.replace=function(e){this._layerConfigs={},this._layers={},this.update(e,[])},s.prototype.update=function(e,t){for(var n=this,s=0,u=e;s<u.length;s+=1){var l=u[s];n._layerConfigs[l.id]=l;var c=n._layers[l.id]=r.create(l);c._featureFilter=o(c.filter)}for(var f=0,h=t;f<h.length;f+=1){var p=h[f];delete n._layerConfigs[p],delete n._layers[p]}this.familiesBySource={};for(var d=a(i.values(this._layerConfigs)),v=0,g=d;v<g.length;v+=1){var y=g[v],m=y.map(function(e){return n._layers[e.id]}),_=m[0];if("none"!==_.visibility){var b=_.source||"",E=n.familiesBySource[b];E||(E=n.familiesBySource[b]={});var x=_.sourceLayer||"_geojsonTileLayer",w=E[x];w||(w=E[x]=[]),w.push(m)}}},t.exports=s},{"../style-spec/feature_filter":145,"../style-spec/group_by_layout":147,"../util/util":266,"./style_layer":186}],204:[function(e,t,n){"use strict";t.exports=e("../style-spec/validate_style.min"),t.exports.emitErrors=function(e,t){if(t&&t.length){for(var n=0,r=t;n<r.length;n+=1){var i=r[n],o=i.message;e.fire("error",{error:new Error(o)})}return!0}return!1}},{"../style-spec/validate_style.min":177}],205:[function(e,t,n){"use strict";var r=e("@mapbox/point-geometry"),i=function(e){function t(t,n,r,i){e.call(this,t,n),this.angle=r,void 0!==i&&(this.segment=i)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.clone=function(){return new t(this.x,this.y,this.angle,this.segment)},t}(r);t.exports=i},{"@mapbox/point-geometry":2}],206:[function(e,t,n){"use strict";function r(e,t,n,r,i){if(void 0===t.segment)return!0;for(var o=t,a=t.segment+1,s=0;s>-n/2;){if(--a<0)return!1;s-=e[a].dist(o),o=e[a]}s+=e[a].dist(e[a+1]),a++;for(var u=[],l=0;s<n/2;){var c=e[a-1],f=e[a],h=e[a+1];if(!h)return!1;var p=c.angleTo(f)-f.angleTo(h);for(p=Math.abs((p+3*Math.PI)%(2*Math.PI)-Math.PI),u.push({distance:s,angleDelta:p}),l+=p;s-u[0].distance>r;)l-=u.shift().angleDelta;if(l>i)return!1;a++,s+=f.dist(h)}return!0}t.exports=r},{}],207:[function(e,t,n){"use strict";function r(e,t,n,r,o){for(var a=[],s=0;s<e.length;s++)for(var u=e[s],l=void 0,c=0;c<u.length-1;c++){var f=u[c],h=u[c+1];f.x<t&&h.x<t||(f.x<t?f=new i(t,f.y+(h.y-f.y)*((t-f.x)/(h.x-f.x)))._round():h.x<t&&(h=new i(t,f.y+(h.y-f.y)*((t-f.x)/(h.x-f.x)))._round()),f.y<n&&h.y<n||(f.y<n?f=new i(f.x+(h.x-f.x)*((n-f.y)/(h.y-f.y)),n)._round():h.y<n&&(h=new i(f.x+(h.x-f.x)*((n-f.y)/(h.y-f.y)),n)._round()),f.x>=r&&h.x>=r||(f.x>=r?f=new i(r,f.y+(h.y-f.y)*((r-f.x)/(h.x-f.x)))._round():h.x>=r&&(h=new i(r,f.y+(h.y-f.y)*((r-f.x)/(h.x-f.x)))._round()),f.y>=o&&h.y>=o||(f.y>=o?f=new i(f.x+(h.x-f.x)*((o-f.y)/(h.y-f.y)),o)._round():h.y>=o&&(h=new i(f.x+(h.x-f.x)*((o-f.y)/(h.y-f.y)),o)._round()),l&&f.equals(l[l.length-1])||(l=[f],a.push(l)),l.push(h)))))}return a}var i=e("@mapbox/point-geometry");t.exports=r},{"@mapbox/point-geometry":2}],208:[function(e,t,n){"use strict";var r=e("../util/struct_array"),i=e("@mapbox/point-geometry"),o=r({members:[{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"},{type:"Int16",name:"radius"},{type:"Int16",name:"signedDistanceFromAnchor"}]});Object.defineProperty(o.prototype.StructType.prototype,"anchorPoint",{get:function(){return new i(this.anchorPointX,this.anchorPointY)}}),t.exports=o},{"../util/struct_array":263,"@mapbox/point-geometry":2}],209:[function(e,t,n){"use strict";var r=function(e,t,n,r,i,o,a,s,u,l,c){var f=a.top*s-u,h=a.bottom*s+u,p=a.left*s-u,d=a.right*s+u;if(this.boxStartIndex=e.length,l){var v=h-f,g=d-p;v>0&&(v=Math.max(10*s,v),this._addLineCollisionCircles(e,t,n,n.segment,g,v,r,i,o,c))}else e.emplaceBack(n.x,n.y,p,f,d,h,r,i,o,0,0);this.boxEndIndex=e.length};r.prototype._addLineCollisionCircles=function(e,t,n,r,i,o,a,s,u,l){var c=o/2,f=Math.floor(i/c),h=1+.4*Math.log(l)/Math.LN2,p=Math.floor(f*h/2),d=-o/2,v=n,g=r+1,y=d,m=-i/2,_=m-i/4;do{if(--g<0){if(y>m)return;g=0;break}y-=t[g].dist(v),v=t[g]}while(y>_);for(var b=t[g].dist(t[g+1]),E=-p;E<f+p;E++){var x=E*c,w=m+x;if(x<0&&(w+=x),x>i&&(w+=x-i),!(w<y)){for(;y+b<w;){if(y+=b,++g+1>=t.length)return;b=t[g].dist(t[g+1])}var T=w-y,S=t[g],A=t[g+1],C=A.sub(S)._unit()._mult(T)._add(S)._round(),O=Math.abs(w-d)<c?0:.8*(w-d);e.emplaceBack(C.x,C.y,-o/2,-o/2,o/2,o/2,a,s,u,o/2,O)}}},t.exports=r},{}],210:[function(e,t,n){"use strict";function r(e,t,n){e[t+4]=n?1:0}var i=e("@mapbox/point-geometry"),o=e("../util/intersection_tests"),a=e("./grid_index"),s=e("@mapbox/gl-matrix"),u=(s.mat4,e("../symbol/projection")),l=function(e,t,n){void 0===t&&(t=new a(e.width+200,e.height+200,25)),void 0===n&&(n=new a(e.width+200,e.height+200,25)),this.transform=e,this.grid=t,this.ignoredGrid=n,this.pitchfactor=Math.cos(e._pitch)*e.cameraToCenterDistance};l.prototype.placeCollisionBox=function(e,t,n,r){var i=this.projectAndGetPerspectiveRatio(r,e.anchorPointX,e.anchorPointY),o=n*i.perspectiveRatio,a=e.x1/o+i.point.x,s=e.y1/o+i.point.y,u=e.x2/o+i.point.x,l=e.y2/o+i.point.y;return!t&&this.grid.hitTest(a,s,u,l)?[]:[a,s,u,l]},l.prototype.approximateTileDistance=function(e,t,n,r,i){var o=i?1:r/this.pitchfactor,a=e.lastSegmentViewportDistance*n;return e.prevTileDistance+a+(o-1)*a*Math.abs(Math.sin(t))},l.prototype.placeCollisionCircles=function(e,t,n,o,a,s,l,c,f,h,p,d,v){var g=this,y=[],m=this.projectAnchor(h,s.anchorX,s.anchorY),_={},b=f/24,E=s.lineOffsetX*f,x=s.lineOffsetY*f,w=new i(s.anchorX,s.anchorY),T=u.project(w,p).point,S=u.placeFirstAndLastGlyph(b,c,E,x,!1,T,w,s,l,p,_,!0),A=!1,C=m.perspectiveRatio*o,O=C/n,k=0,P=0;S&&(k=this.approximateTileDistance(S.first.tileDistance,S.first.angle,O,m.cameraDistance,v),P=this.approximateTileDistance(S.last.tileDistance,S.last.angle,O,m.cameraDistance,v));for(var R=0;R<e.length;R+=5){var I=e[R],N=e[R+1],M=e[R+2],L=e[R+3];if(!S||L<-k||L>P)r(e,R,!1);else{var D=g.projectPoint(h,I,N),F=M/C;if(y.length>0){var j=D.x-y[y.length-4],B=D.y-y[y.length-3];if(F*F*2>j*j+B*B&&R+8<e.length){var U=e[R+8];if(U>-k&&U<P){r(e,R,!1);continue}}}var z=R/5;if(y.push(D.x,D.y,F,z),r(e,R,!0),!t&&g.grid.hitTestCircle(D.x,D.y,F)){if(!d)return[];A=!0}}}return A?[]:y},l.prototype.queryRenderedSymbols=function(e,t,n,r,a,s){var u=this,l={},c=[];if(0===e.length||0===this.grid.keysLength()&&0===this.ignoredGrid.keysLength())return c;for(var f=this.transform.calculatePosMatrix(t,n),h=[],p=1/0,d=1/0,v=-1/0,g=-1/0,y=0;y<e.length;y++)for(var m=e[y],_=0;_<m.length;_++){var b=u.projectPoint(f,m[_].x,m[_].y);p=Math.min(p,b.x),d=Math.min(d,b.y),v=Math.max(v,b.x),g=Math.max(g,b.y),h.push(b)}for(var E=t.id,x=[],w=this.grid.query(p,d,v,g),T=0;T<w.length;T++)w[T].sourceID===s&&w[T].tileID===E&&x.push(w[T].boxIndex);for(var S=this.ignoredGrid.query(p,d,v,g),A=0;A<S.length;A++)S[A].sourceID===s&&S[A].tileID===E&&x.push(S[A].boxIndex);for(var C=0;C<x.length;C++){var O=a.get(x[C]),k=O.sourceLayerIndex,P=O.featureIndex,R=O.bucketIndex;if(void 0===l[k]&&(l[k]={}),void 0===l[k][P]&&(l[k][P]={}),!l[k][P][R]){var I=u.projectAndGetPerspectiveRatio(f,O.anchorPointX,O.anchorPointY),N=r*I.perspectiveRatio,M=O.x1/N+I.point.x,L=O.y1/N+I.point.y,D=O.x2/N+I.point.x,F=O.y2/N+I.point.y,j=[new i(M,L),new i(D,L),new i(D,F),new i(M,F)];o.polygonIntersectsPolygon(h,j)&&(l[k][P][R]=!0,c.push(x[C]))}}return c},l.prototype.insertCollisionBox=function(e,t,n,r,i){var o=t?this.ignoredGrid:this.grid,a={tileID:n,sourceID:r,boxIndex:i};o.insert(a,e[0],e[1],e[2],e[3])},l.prototype.insertCollisionCircles=function(e,t,n,r,i){for(var o=t?this.ignoredGrid:this.grid,a=0;a<e.length;a+=4){var s={tileID:n,sourceID:r,boxIndex:i+e[a+3]};o.insertCircle(s,e[a],e[a+1],e[a+2])}},l.prototype.projectAnchor=function(e,t,n){var r=[t,n,0,1];return u.xyTransformMat4(r,r,e),{perspectiveRatio:.5+r[3]/this.transform.cameraToCenterDistance*.5,cameraDistance:r[3]}},l.prototype.projectPoint=function(e,t,n){var r=[t,n,0,1];return u.xyTransformMat4(r,r,e),new i((r[0]/r[3]+1)/2*this.transform.width+100,(-r[1]/r[3]+1)/2*this.transform.height+100)},l.prototype.projectAndGetPerspectiveRatio=function(e,t,n){var r=[t,n,0,1];return u.xyTransformMat4(r,r,e),{point:new i((r[0]/r[3]+1)/2*this.transform.width+100,(-r[1]/r[3]+1)/2*this.transform.height+100),perspectiveRatio:.5+r[3]/this.transform.cameraToCenterDistance*.5}},t.exports=l},{"../symbol/projection":216,"../util/intersection_tests":257,"./grid_index":213,"@mapbox/gl-matrix":1,"@mapbox/point-geometry":2}],211:[function(e,t,n){"use strict";var r=e("../data/extent"),i=e("./opacity_state"),o=512/r/2,a=function(e,t,n){var r=this;this.coord=e,this.sourceMaxZoom=t,this.symbolInstances={};for(var o=0,a=n;o<a.length;o+=1){var s=a[o],u=s.key;r.symbolInstances[u]||(r.symbolInstances[u]=[]),r.symbolInstances[u].push({instance:s,coordinates:r.getScaledCoordinates(s,e)}),s.isDuplicate=!1,s.textOpacityState=new i,s.iconOpacityState=new i}};a.prototype.getScaledCoordinates=function(e,t){var n=Math.min(this.sourceMaxZoom,t.z)-Math.min(this.sourceMaxZoom,this.coord.z),i=o/(1<<n),a=e.anchor;return{x:Math.floor((t.x*r+a.x)*i),y:Math.floor((t.y*r+a.y)*i)}},a.prototype.getMatchingSymbol=function(e,t){var n=this;if(this.symbolInstances[e.key])for(var r=this.getScaledCoordinates(e,t),i=0,o=n.symbolInstances[e.key];i<o.length;i+=1){var a=o[i];if(Math.abs(a.coordinates.x-r.x)<=1&&Math.abs(a.coordinates.y-r.y)<=1)return a.instance}},a.prototype.forEachSymbolInstance=function(e){var t=this;for(var n in t.symbolInstances)for(var r=t.symbolInstances[n],i=0,o=r;i<o.length;i+=1){var a=o[i];e(a.instance)}};var s=function(){this.indexes={}};s.prototype.addTile=function(e,t,n){var r=this,i=25,o=0;for(var s in r.indexes)i=Math.min(s,i),o=Math.max(s,o);for(var u=new a(e,t,n),l=o;l>e.z;l--){var c=r.indexes[l];for(var f in c){var h=c[f];h.coord.isChildOf(e,t)&&r.blockLabels(h,u,!1)}}var p=this.indexes[e.z]&&this.indexes[e.z][e.id];p&&(this.blockLabels(u,p,!0),this.removeTile(e,t));for(var d=e.z-1;d>=i;d--){var v=e.scaledTo(d,t),g=r.indexes[d]&&r.indexes[d][v.id];g&&r.blockLabels(u,g,!0)}void 0===this.indexes[e.z]&&(this.indexes[e.z]={}),this.indexes[e.z][e.id]=u},s.prototype.removeTile=function(e,t){var n=this,r=this.indexes[e.z][e.id];delete this.indexes[e.z][e.id],0===Object.keys(this.indexes[e.z]).length&&delete this.indexes[e.z];for(var i=Math.min.apply(Math,[25].concat(Object.keys(this.indexes))),o=e,a=e.z-1;a>=i&&(o=o.parent(t));a--){var s=n.indexes[a]&&n.indexes[a][o.id];s&&n.unblockLabels(r,s)}},s.prototype.blockLabels=function(e,t,n){e.forEachSymbolInstance(function(r){if(!r.isDuplicate){var i=t.getMatchingSymbol(r,e.coord);void 0!==i&&(i.isDuplicate||(i.isDuplicate=!0,n&&(r.textOpacityState=i.textOpacityState.clone(),r.iconOpacityState=i.iconOpacityState.clone())))}})},s.prototype.unblockLabels=function(e,t){e.forEachSymbolInstance(function(n){if(!n.isDuplicate){var r=t.getMatchingSymbol(n,e.coord);void 0!==r&&(r.isDuplicate=!1,r.textOpacityState=n.textOpacityState.clone(),r.iconOpacityState=n.iconOpacityState.clone(),n.isDuplicate=!0)}})};var u=function(){this.layerIndexes={}};u.prototype.addTileLayer=function(e,t,n,r){var i=this.layerIndexes[e];void 0===i&&(i=this.layerIndexes[e]=new s),i.addTile(t,n,r)},u.prototype.removeTileLayer=function(e,t,n){var r=this.layerIndexes[e];void 0!==r&&r.removeTile(t,n)},t.exports=u},{"../data/extent":58,"./opacity_state":215}],212:[function(e,t,n){"use strict";function r(e,t,n,r,o,a,s,u,l){var c=r?.6*a*s:0,f=Math.max(r?r.right-r.left:0,o?o.right-o.left:0),h=0===e[0].x||e[0].x===l||0===e[0].y||e[0].y===l;t-f*s<t/4&&(t=f*s+t/4);var p=2*a;return i(e,h?t/2*u%t:(f/2+p)*s*u%t,t,c,n,f*s,h,!1,l)}function i(e,t,n,r,u,l,c,f,h){for(var p=l/2,d=0,v=0;v<e.length-1;v++)d+=e[v].dist(e[v+1]);for(var g=0,y=t-n,m=[],_=0;_<e.length-1;_++){for(var b=e[_],E=e[_+1],x=b.dist(E),w=E.angleTo(b);y+n<g+x;){y+=n;var T=(y-g)/x,S=o(b.x,E.x,T),A=o(b.y,E.y,T);if(S>=0&&S<h&&A>=0&&A<h&&y-p>=0&&y+p<=d){var C=new a(S,A,w,_);C._round(),r&&!s(e,C,l,r,u)||m.push(C)}}g+=x}return f||m.length||c||(m=i(e,g/2,n,r,u,l,c,!0,h)),m}var o=e("../style-spec/util/interpolate").number,a=e("../symbol/anchor"),s=e("./check_max_angle");t.exports=r},{"../style-spec/util/interpolate":154,"../symbol/anchor":205,"./check_max_angle":206}],213:[function(e,t,n){"use strict";var r=function(e,t,n){var r=this.boxCells=[],i=this.circleCells=[];this.xCellCount=Math.ceil(e/n),this.yCellCount=Math.ceil(t/n);for(var o=0;o<this.xCellCount*this.yCellCount;o++)r.push([]),i.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=e,this.height=t,this.xScale=this.xCellCount/e,this.yScale=this.yCellCount/t,this.boxUid=0,this.circleUid=0};r.prototype.keysLength=function(){return this.boxKeys.length+this.circleKeys.length},r.prototype.insert=function(e,t,n,r,i){this._forEachCell(t,n,r,i,this._insertBoxCell,this.boxUid++),this.boxKeys.push(e),this.bboxes.push(t),this.bboxes.push(n),this.bboxes.push(r),this.bboxes.push(i)},r.prototype.insertCircle=function(e,t,n,r){this._forEachCell(t-r,n-r,t+r,n+r,this._insertCircleCell,this.circleUid++),this.circleKeys.push(e),this.circles.push(t),this.circles.push(n),this.circles.push(r)},r.prototype._insertBoxCell=function(e,t,n,r,i,o){this.boxCells[i].push(o)},r.prototype._insertCircleCell=function(e,t,n,r,i,o){this.circleCells[i].push(o)},r.prototype._query=function(e,t,n,r,i){if(n<0||e>this.width||r<0||t>this.height)return!i&&[];var o=[];if(e<=0&&t<=0&&this.width<=n&&this.height<=r)o=Array.prototype.slice.call(this.boxKeys).concat(this.circleKeys);else{var a={hitTest:i,seenUids:{box:{},circle:{}}};this._forEachCell(e,t,n,r,this._queryCell,o,a)}return i?o.length>0:o},r.prototype._queryCircle=function(e,t,n,r){var i=e-n,o=e+n,a=t-n,s=t+n;if(o<0||i>this.width||s<0||a>this.height)return!r&&[];var u=[],l={hitTest:r,circle:{x:e,y:t,radius:n},seenUids:{box:{},circle:{}}};return this._forEachCell(i,a,o,s,this._queryCellCircle,u,l),r?u.length>0:u},r.prototype.query=function(e,t,n,r){return this._query(e,t,n,r,!1)},r.prototype.hitTest=function(e,t,n,r){return this._query(e,t,n,r,!0)},r.prototype.hitTestCircle=function(e,t,n){return this._queryCircle(e,t,n,!0)},r.prototype._queryCell=function(e,t,n,r,i,o,a){var s=this,u=a.seenUids,l=this.boxCells[i];if(null!==l)for(var c=this.bboxes,f=0,h=l;f<h.length;f+=1){var p=h[f];if(!u.box[p]){u.box[p]=!0;var d=4*p;if(e<=c[d+2]&&t<=c[d+3]&&n>=c[d+0]&&r>=c[d+1]){if(a.hitTest)return o.push(!0),!0;o.push(s.boxKeys[p])}}}var v=this.circleCells[i];if(null!==v)for(var g=this.circles,y=0,m=v;y<m.length;y+=1){var _=m[y];if(!u.circle[_]){u.circle[_]=!0;var b=3*_;if(s._circleAndRectCollide(g[b],g[b+1],g[b+2],e,t,n,r)){if(a.hitTest)return o.push(!0),!0;o.push(s.circleKeys[_])}}}},r.prototype._queryCellCircle=function(e,t,n,r,i,o,a){var s=this,u=a.circle,l=a.seenUids,c=this.boxCells[i];if(null!==c)for(var f=this.bboxes,h=0,p=c;h<p.length;h+=1){var d=p[h];if(!l.box[d]){l.box[d]=!0;var v=4*d;if(s._circleAndRectCollide(u.x,u.y,u.radius,f[v+0],f[v+1],f[v+2],f[v+3]))return o.push(!0),!0}}var g=this.circleCells[i];if(null!==g)for(var y=this.circles,m=0,_=g;m<_.length;m+=1){var b=_[m];if(!l.circle[b]){l.circle[b]=!0;var E=3*b;if(s._circlesCollide(y[E],y[E+1],y[E+2],u.x,u.y,u.radius))return o.push(!0),!0}}},r.prototype._forEachCell=function(e,t,n,r,i,o,a){for(var s=this,u=this._convertToXCellCoord(e),l=this._convertToYCellCoord(t),c=this._convertToXCellCoord(n),f=this._convertToYCellCoord(r),h=u;h<=c;h++)for(var p=l;p<=f;p++){var d=s.xCellCount*p+h;if(i.call(s,e,t,n,r,d,o,a))return}},r.prototype._convertToXCellCoord=function(e){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(e*this.xScale)))},r.prototype._convertToYCellCoord=function(e){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(e*this.yScale)))},r.prototype._circlesCollide=function(e,t,n,r,i,o){var a=r-e,s=i-t,u=n+o;return u*u>a*a+s*s},r.prototype._circleAndRectCollide=function(e,t,n,r,i,o,a){var s=(o-r)/2,u=Math.abs(e-(r+s));if(u>s+n)return!1;var l=(a-i)/2,c=Math.abs(t-(i+l));if(c>l+n)return!1;if(u<=s||c<=l)return!0;var f=u-s,h=c-l;return f*f+h*h<=n*n},t.exports=r},{}],214:[function(e,t,n){"use strict";t.exports=function(e){function t(t){s.push(e[t]),u++}function n(e,t,n){var r=a[e];return delete a[e],a[t]=r,s[r].geometry[0].pop(),s[r].geometry[0]=s[r].geometry[0].concat(n[0]),r}function r(e,t,n){var r=o[t];return delete o[t],o[e]=r,s[r].geometry[0].shift(),s[r].geometry[0]=n[0].concat(s[r].geometry[0]),r}function i(e,t,n){var r=n?t[0][t[0].length-1]:t[0][0];return e+":"+r.x+":"+r.y}for(var o={},a={},s=[],u=0,l=0;l<e.length;l++){var c=e[l],f=c.geometry,h=c.text;if(h){var p=i(h,f),d=i(h,f,!0);if(p in a&&d in o&&a[p]!==o[d]){var v=r(p,d,f),g=n(p,d,s[v].geometry);delete o[p],delete a[d],a[i(h,s[g].geometry,!0)]=g,s[v].geometry=null}else p in a?n(p,d,f):d in o?r(p,d,f):(t(l),o[p]=u-1,a[d]=u-1)}else t(l)}return s.filter(function(e){return e.geometry})}},{}],215:[function(e,t,n){"use strict";var r=function(){this.opacity=0,this.targetOpacity=0,this.time=0};r.prototype.clone=function(){var e=new r;return e.opacity=this.opacity,e.targetOpacity=this.targetOpacity,e.time=this.time,e},t.exports=r},{}],216:[function(e,t,n){"use strict";function r(e,t,n,r,i){var o=y.identity(new Float32Array(16));return t?(y.identity(o),y.scale(o,o,[1/i,1/i,1]),n||y.rotateZ(o,o,r.angle)):(y.scale(o,o,[r.width/2,-r.height/2,1]),y.translate(o,o,[1,-1,0]),y.multiply(o,o,e)),o}function i(e,t,n,r,i){var o=y.identity(new Float32Array(16));return t?(y.multiply(o,o,e),y.scale(o,o,[i,i,1]),n||y.rotateZ(o,o,-r.angle)):(y.scale(o,o,[1,-1,1]),y.translate(o,o,[-1,-1,0]),y.scale(o,o,[2/r.width,2/r.height,1])),o}function o(e,t){var n=[e.x,e.y,0,1];d(n,n,t);var r=n[3];return{point:new v(n[0]/r,n[1]/r),signedDistanceFromCamera:r}}function a(e,t){var n=e[0]/e[3],r=e[1]/e[3];return n>=-t[0]&&n<=t[0]&&r>=-t[1]&&r<=t[1]}function s(e,t,n,r,i,s,u,l){var f=r?e.textSizeData:e.iconSizeData,h=_.evaluateSizeForZoom(f,n.transform.zoom,x.properties[r?"text-size":"icon-size"]),d=[256/n.width*2+1,256/n.height*2+1],g=r?e.text.dynamicLayoutVertexArray:e.icon.dynamicLayoutVertexArray;g.clear();for(var y=e.lineVertexArray,b=r?e.placedGlyphArray:e.placedIconArray,E=n.transform.width/n.transform.height,T=!1,S=0;S<b.length;S++){var A=b.get(S);if(A.hidden||A.writingMode===w.vertical&&!T)p(A.numGlyphs,g);else{T=!1;var C=[A.anchorX,A.anchorY,0,1];if(m.transformMat4(C,C,t),a(C,d)){var O=C[3],k=.5+O/n.transform.cameraToCenterDistance*.5,P=_.evaluateSizeForFeature(f,h,A),R=u?P*k:P/k,I=new v(A.anchorX,A.anchorY),N=o(I,i).point,M={},L=c(A,R,!1,l,t,i,s,e.glyphOffsetArray,y,g,N,I,M,E);T=L.useVertical,(L.notEnoughRoom||T||L.needsFlipping&&c(A,R,!0,l,t,i,s,e.glyphOffsetArray,y,g,N,I,M,E).notEnoughRoom)&&p(A.numGlyphs,g)}else p(A.numGlyphs,g)}}r?e.text.dynamicLayoutVertexBuffer.updateData(g.serialize()):e.icon.dynamicLayoutVertexBuffer.updateData(g.serialize())}function u(e,t,n,r,i,o,a,s,u,l,c,f){var p=s.glyphStartIndex+s.numGlyphs,d=s.lineStartIndex,v=s.lineStartIndex+s.lineLength,g=t.getoffsetX(s.glyphStartIndex),y=t.getoffsetX(p-1),m=h(e*g,n,r,i,o,a,s.segment,d,v,u,l,c,f);if(!m)return null;var _=h(e*y,n,r,i,o,a,s.segment,d,v,u,l,c,f);return _?{first:m,last:_}:null}function l(e,t,n,r){return e===w.horizontal&&Math.abs(n.y-t.y)>Math.abs(n.x-t.x)*r?{useVertical:!0}:(e===w.vertical?t.y<n.y:t.x>n.x)?{needsFlipping:!0}:null}function c(e,t,n,r,i,a,s,c,p,d,g,y,m,_){var b,x=t/24,w=e.lineOffsetX*t,T=e.lineOffsetY*t;if(e.numGlyphs>1){var S=e.glyphStartIndex+e.numGlyphs,A=e.lineStartIndex,C=e.lineStartIndex+e.lineLength,O=u(x,c,w,T,n,g,y,e,p,a,m,!1);if(!O)return{notEnoughRoom:!0};var k=o(O.first.point,s).point,P=o(O.last.point,s).point;if(r&&!n){var R=l(e.writingMode,k,P,_);if(R)return R}b=[O.first];for(var I=e.glyphStartIndex+1;I<S-1;I++)b.push(h(x*c.getoffsetX(I),w,T,n,g,y,e.segment,A,C,p,a,m,!1));b.push(O.last)}else{if(r&&!n){var N=o(y,i).point,M=e.lineStartIndex+e.segment+1,L=new v(p.getx(M),p.gety(M)),D=o(L,i),F=D.signedDistanceFromCamera>0?D.point:f(y,L,N,1,i),j=l(e.writingMode,N,F,_);if(j)return j}var B=h(x*c.getoffsetX(e.glyphStartIndex),w,T,n,g,y,e.segment,e.lineStartIndex,e.lineStartIndex+e.lineLength,p,a,m,!1);if(!B)return{notEnoughRoom:!0};b=[B]}for(var U=0,z=b;U<z.length;U+=1){var V=z[U];E(d,V.point,V.angle)}return{}}function f(e,t,n,r,i){var a=o(e.add(e.sub(t)._unit()),i).point,s=n.sub(a);return n.add(s._mult(r/s.mag()))}function h(e,t,n,r,i,a,s,u,l,c,h,p,d){var g=r?e-t:e+t,y=g>0?1:-1,m=0;r&&(y*=-1,m=Math.PI),y<0&&(m+=Math.PI);for(var _=y>0?u+s:u+s+1,b=_,E=i,x=i,w=0,T=0,S=Math.abs(g);w+T<=S;){if((_+=y)<u||_>=l)return null;if(x=E,void 0===(E=p[_])){var A=new v(c.getx(_),c.gety(_)),C=o(A,h);if(C.signedDistanceFromCamera>0)E=p[_]=C.point;else{var O=_-y;E=f(0===w?a:new v(c.getx(O),c.gety(O)),A,x,S-w+1,h)}}w+=T,T=x.dist(E)}var k=(S-w)/T,P=E.sub(x),R=P.mult(k)._add(x);return R._add(P._unit()._perp()._mult(n*y)),{point:R,angle:m+Math.atan2(E.y-x.y,E.x-x.x),tileDistance:d?{prevTileDistance:_-y===b?0:c.gettileUnitDistanceFromAnchor(_-y),lastSegmentViewportDistance:S-w}:null}}function p(e,t){for(var n=0;n<e;n++){var r=t.length;t.resize(r+4),t.float32.set(T,3*r)}}function d(e,t,n){var r=t[0],i=t[1];return e[0]=n[0]*r+n[4]*i+n[12],e[1]=n[1]*r+n[5]*i+n[13],e[3]=n[3]*r+n[7]*i+n[15],e}var v=e("@mapbox/point-geometry"),g=e("@mapbox/gl-matrix"),y=g.mat4,m=g.vec4,_=e("./symbol_size"),b=e("../data/bucket/symbol_bucket"),E=b.addDynamicAttributes,x=e("../style/style_layer/symbol_style_layer_properties").layout,w=e("../symbol/shaping").WritingMode;t.exports={updateLineLabels:s,getLabelPlaneMatrix:r,getGlCoordMatrix:i,project:o,placeFirstAndLastGlyph:u,xyTransformMat4:d};var T=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0])},{"../data/bucket/symbol_bucket":57,"../style/style_layer/symbol_style_layer_properties":202,"../symbol/shaping":218,"./symbol_size":221,"@mapbox/gl-matrix":1,"@mapbox/point-geometry":2}],217:[function(e,t,n){"use strict";function r(e,t,n,r,i,a,s){var u,l,c,f,h=t.image,p=n.layout,d=t.top-1/h.pixelRatio,v=t.left-1/h.pixelRatio,g=t.bottom+1/h.pixelRatio,y=t.right+1/h.pixelRatio;if("none"!==p.get("icon-text-fit")&&i){var m=y-v,_=g-d,b=p.get("text-size").evaluate(s)/24,E=i.left*b,x=i.right*b,w=i.top*b,T=i.bottom*b,S=x-E,A=T-w,C=p.get("icon-text-fit-padding")[0],O=p.get("icon-text-fit-padding")[1],k=p.get("icon-text-fit-padding")[2],P=p.get("icon-text-fit-padding")[3],R="width"===p.get("icon-text-fit")?.5*(A-_):0,I="height"===p.get("icon-text-fit")?.5*(S-m):0,N="width"===p.get("icon-text-fit")||"both"===p.get("icon-text-fit")?S:m,M="height"===p.get("icon-text-fit")||"both"===p.get("icon-text-fit")?A:_;u=new o(E+I-P,w+R-C),l=new o(E+I+O+N,w+R-C),c=new o(E+I+O+N,w+R+k+M),f=new o(E+I-P,w+R+k+M)}else u=new o(v,d),l=new o(y,d),c=new o(y,g),f=new o(v,g);var L=n.layout.get("icon-rotate").evaluate(s)*Math.PI/180;if(L){var D=Math.sin(L),F=Math.cos(L),j=[F,-D,D,F];u._matMult(j),l._matMult(j),f._matMult(j),c._matMult(j)}return[{tl:u,tr:l,bl:f,br:c,tex:{x:h.textureRect.x-1,y:h.textureRect.y-1,w:h.textureRect.w+2,h:h.textureRect.h+2},writingMode:void 0,glyphOffset:[0,0]}]}function i(e,t,n,r,i,a,u){for(var l=n.layout.get("text-rotate").evaluate(a)*Math.PI/180,c=n.layout.get("text-offset").evaluate(a).map(function(e){return 24*e}),f=t.positionedGlyphs,h=[],p=0;p<f.length;p++){var d=f[p],v=u[d.glyph];if(v){var g=v.rect;if(g){var y=s+1,m=v.metrics.advance/2,_=r?[d.x+m,d.y]:[0,0],b=r?[0,0]:[d.x+m+c[0],d.y+c[1]],E=v.metrics.left-y-m+b[0],x=-v.metrics.top-y+b[1],w=E+g.w,T=x+g.h,S=new o(E,x),A=new o(w,x),C=new o(E,T),O=new o(w,T);if(r&&d.vertical){var k=new o(-m,m),P=-Math.PI/2,R=new o(5,0);S._rotateAround(P,k)._add(R),A._rotateAround(P,k)._add(R),C._rotateAround(P,k)._add(R),O._rotateAround(P,k)._add(R)}if(l){var I=Math.sin(l),N=Math.cos(l),M=[N,-I,I,N];S._matMult(M),A._matMult(M),C._matMult(M),O._matMult(M)}h.push({tl:S,tr:A,bl:C,br:O,tex:g,writingMode:t.writingMode,glyphOffset:_})}}}return h}var o=e("@mapbox/point-geometry"),a=e("../style/parse_glyph_pbf"),s=a.GLYPH_PBF_BORDER;t.exports={getIconQuads:r,getGlyphQuads:i}},{"../style/parse_glyph_pbf":181,"@mapbox/point-geometry":2}],218:[function(e,t,n){"use strict";function r(e,t){for(var n=[],r=0,i=0,o=t;i<o.length;i+=1){var a=o[i];n.push(e.substring(r,a)),r=a}return r<e.length&&n.push(e.substring(r,e.length)),n}function i(e,t,n,i,o,a,s,u,l,f){var p=e.trim();f===_.vertical&&(p=y(p));var d,v=[],g={positionedGlyphs:v,text:p,top:u[1],bottom:u[1],left:u[0],right:u[0],writingMode:f},b=m.processBidirectionalText;return d=b?b(p,c(p,s,n,t)):r(p,c(p,s,n,t)),h(g,t,d,i,o,a,f,s,l),!!v.length&&g}function o(e,t,n,r){for(var i=0,o=0;o<e.length;o++){var a=r[e.charCodeAt(o)];a&&(i+=a.metrics.advance+t)}return i/Math.max(1,Math.ceil(i/n))}function a(e,t,n,r){var i=Math.pow(e-t,2);return r?e<t?i/2:2*i:i+Math.abs(n)*n}function s(e,t){var n=0;return 10===e&&(n-=1e4),40!==e&&65288!==e||(n+=50),41!==t&&65289!==t||(n+=50),n}function u(e,t,n,r,i,o){for(var s=null,u=a(t,n,i,o),l=0,c=r;l<c.length;l+=1){var f=c[l],h=t-f.x,p=a(h,n,i,o)+f.badness;p<=u&&(s=f,u=p)}return{index:e,x:t,priorBreak:s,badness:u}}function l(e){return e?l(e.priorBreak).concat(e.index):[]}function c(e,t,n,r){if(!n)return[];if(!e)return[];for(var i=[],a=o(e,t,n,r),c=0,f=0;f<e.length;f++){var h=e.charCodeAt(f),p=r[h];p&&!b[h]&&(c+=p.metrics.advance+t),f<e.length-1&&(E[h]||g.charAllowsIdeographicBreaking(h))&&i.push(u(f+1,c,a,i,s(h,e.charCodeAt(f+1)),!1))}return l(u(e.length,c,a,i,0,!0))}function f(e){var t=.5,n=.5;switch(e){case"right":case"top-right":case"bottom-right":t=1;break;case"left":case"top-left":case"bottom-left":t=0}switch(e){case"bottom":case"bottom-right":case"bottom-left":n=1;break;case"top":case"top-right":case"top-left":n=0}return{horizontalAlign:t,verticalAlign:n}}function h(e,t,n,r,i,o,a,s,u){for(var l=0,c=-17,h=0,v=e.positionedGlyphs,y="right"===o?1:"left"===o?0:.5,m=0,b=n;m<b.length;m+=1){var E=b[m];if(E=E.trim(),E.length){for(var x=v.length,w=0;w<E.length;w++){var T=E.charCodeAt(w),S=t[T];S&&(g.charHasUprightVerticalOrientation(T)&&a!==_.horizontal?(v.push({glyph:T,x:l,y:0,vertical:!0}),l+=u+s):(v.push({glyph:T,x:l,y:c,vertical:!1}),l+=S.metrics.advance+s))}if(v.length!==x){var A=l-s;h=Math.max(A,h),p(v,t,x,v.length-1,y)}l=0,c+=r}else c+=r}var C=f(i),O=C.horizontalAlign,k=C.verticalAlign;d(v,y,O,k,h,r,n.length);var P=n.length*r;e.top+=-k*P,e.bottom=e.top+P,e.left+=-O*h,e.right=e.left+h}function p(e,t,n,r,i){if(i){var o=t[e[r].glyph];if(o)for(var a=o.metrics.advance,s=(e[r].x+a)*i,u=n;u<=r;u++)e[u].x-=s}}function d(e,t,n,r,i,o,a){for(var s=(t-n)*i,u=(-r*a+.5)*o,l=0;l<e.length;l++)e[l].x+=s,e[l].y+=u}function v(e,t,n){var r=f(n),i=r.horizontalAlign,o=r.verticalAlign,a=t[0],s=t[1],u=a-e.displaySize[0]*i,l=u+e.displaySize[0],c=s-e.displaySize[1]*o;return{image:e,top:c,bottom:c+e.displaySize[1],left:u,right:l}}var g=e("../util/script_detection"),y=e("../util/verticalize_punctuation"),m=e("../source/rtl_text_plugin"),_={horizontal:1,vertical:2,horizontalOnly:3};t.exports={shapeText:i,shapeIcon:v,WritingMode:_};var b={};b[9]=!0,b[10]=!0,b[11]=!0,b[12]=!0,b[13]=!0,b[32]=!0;var E={};E[10]=!0,E[32]=!0,E[38]=!0,E[40]=!0,E[41]=!0,E[43]=!0,E[45]=!0,E[47]=!0,E[173]=!0,E[183]=!0,E[8203]=!0,E[8208]=!0,E[8211]=!0,E[8231]=!0},{"../source/rtl_text_plugin":107,"../util/script_detection":261,"../util/verticalize_punctuation":268}],219:[function(e,t,n){"use strict";function r(e,t,n,r,o,a){e.createArrays(),e.symbolInstances=[];var s=512*e.overscaling;e.tilePixelRatio=T/s,e.compareText={},e.iconsNeedLinear=!1;for(var u=e.layers[0].layout,l=24*u.get("text-line-height"),c=u.get("text-font").join(","),f="map"===u.get("text-rotation-alignment")&&"line"===u.get("symbol-placement"),h=u.get("text-keep-upright"),g=t[c]||{},y=n[c]||{},m=0,_=e.features;m<_.length;m+=1){var x=_[m],w={},S=x.text;if(S){var A=E.allowsVerticalWritingMode(S),C=u.get("text-offset").evaluate(x).map(function(e){return 24*e}),O=24*u.get("text-letter-spacing").evaluate(x),k=E.allowsLetterSpacing(S)?O:0,P=u.get("text-anchor").evaluate(x),R=u.get("text-justify").evaluate(x),I="line"!==u.get("symbol-placement")?24*u.get("text-max-width").evaluate(x):0;w.horizontal=p(S,g,I,l,P,R,k,C,24,v.horizontal),A&&f&&h&&(w.vertical=p(S,g,I,l,P,R,k,C,24,v.vertical))}var N=void 0;if(x.icon){var M=r[x.icon];M&&(N=d(o[x.icon],u.get("icon-offset").evaluate(x),u.get("icon-anchor").evaluate(x)),void 0===e.sdfIcons?e.sdfIcons=M.sdf:e.sdfIcons!==M.sdf&&b.warnOnce("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),M.pixelRatio!==e.pixelRatio?e.iconsNeedLinear=!0:0!==u.get("icon-rotate").constantOr(1)&&(e.iconsNeedLinear=!0))}(w.horizontal||N)&&i(e,x,w,N,y)}a&&e.generateCollisionDebugBuffers()}function i(e,t,n,r,i){var o=e.layoutTextSize.evaluate(t),f=e.layoutIconSize.evaluate(t),h=e.textMaxSize.evaluate(t);void 0===h&&(h=o);var p=e.layers[0].layout,d=p.get("text-offset").evaluate(t),v=p.get("icon-offset").evaluate(t),g=o/24,y=e.tilePixelRatio*g,m=e.tilePixelRatio*h/24,_=e.tilePixelRatio*f,b=e.tilePixelRatio*p.get("symbol-spacing"),E=p.get("text-padding")*e.tilePixelRatio,S=p.get("icon-padding")*e.tilePixelRatio,A=p.get("text-max-angle")/180*Math.PI,C="map"===p.get("text-rotation-alignment")&&"line"===p.get("symbol-placement"),O="map"===p.get("icon-rotation-alignment")&&"line"===p.get("symbol-placement"),k=p.get("symbol-placement"),P=b/2,R=function(o,s){s.x<0||s.x>=T||s.y<0||s.y>=T||e.symbolInstances.push(a(e,s,o,n,r,e.layers[0],e.collisionBoxArray,t.index,t.sourceLayerIndex,e.index,y,E,C,d,_,S,O,v,{zoom:e.zoom},t,i))};if("line"===k)for(var I=0,N=c(t.geometry,0,0,T,T);I<N.length;I+=1)for(var M=N[I],L=l(M,b,A,n.vertical||n.horizontal,r,24,m,e.overscaling,T),D=0,F=L;D<F.length;D+=1){var j=F[D],B=n.horizontal;B&&s(e,B.text,P,j)||R(M,j)}else if("Polygon"===t.type)for(var U=0,z=w(t.geometry,0);U<z.length;U+=1){var V=z[U],G=x(V,16);R(V[0],new u(G.x,G.y,0))}else if("LineString"===t.type)for(var H=0,q=t.geometry;H<q.length;H+=1){var W=q[H];R(W,new u(W[0].x,W[0].y,0))}else if("Point"===t.type)for(var X=0,$=t.geometry;X<$.length;X+=1)for(var Y=$[X],Z=0,K=Y;Z<K.length;Z+=1){var J=K[Z];R([J],new u(J.x,J.y,0))}}function o(e,t,n,r,i,o,a,s,u,l,c,f){var h=y(t,n,r,i,o,a,f),p=e.textSizeData,d=null;return"source"===p.functionType?d=[10*r.layout.get("text-size").evaluate(a)]:"composite"===p.functionType&&(d=[10*e.compositeTextSizes[0].evaluate(a),10*e.compositeTextSizes[1].evaluate(a)]),e.addSymbols(e.text,h,d,s,i,a,l,t,u.lineStartIndex,u.lineLength,e.placedGlyphArray),c.push(e.placedGlyphArray.length-1),4*h.length}function a(e,t,n,r,i,a,s,u,l,c,h,p,d,g,y,E,x,w,T,A,C){var O,k,P=e.addToLineVertexArray(t,n),R=0,I=0,N=0,M=r.horizontal?r.horizontal.text:"",L=[];r.horizontal&&(O=new _(s,n,t,u,l,c,r.horizontal,h,p,d,e.overscaling),I+=o(e,t,r.horizontal,a,d,T,A,g,P,r.vertical?v.horizontal:v.horizontalOnly,L,C),r.vertical&&(N+=o(e,t,r.vertical,a,d,T,A,g,P,v.vertical,L,C)));var D=O?O.boxStartIndex:e.collisionBoxArray.length,F=O?O.boxEndIndex:e.collisionBoxArray.length;if(i){var j=m(t,i,a,x,r.horizontal,T,A);k=new _(s,n,t,u,l,c,i,y,E,!1,e.overscaling),R=4*j.length;var B=e.iconSizeData,U=null;"source"===B.functionType?U=[10*a.layout.get("icon-size").evaluate(A)]:"composite"===B.functionType&&(U=[10*e.compositeIconSizes[0].evaluate(A),10*e.compositeIconSizes[1].evaluate(A)]),e.addSymbols(e.icon,j,U,w,x,A,!1,t,P.lineStartIndex,P.lineLength,e.placedIconArray)}var z=k?k.boxStartIndex:e.collisionBoxArray.length,V=k?k.boxEndIndex:e.collisionBoxArray.length;return e.glyphOffsetArray.length>=S.MAX_GLYPHS&&b.warnOnce("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),{key:M,textBoxStartIndex:D,textBoxEndIndex:F,iconBoxStartIndex:z,iconBoxEndIndex:V,textOffset:g,iconOffset:w,anchor:t,line:n,featureIndex:u,feature:A,numGlyphVertices:I,numVerticalGlyphVertices:N,numIconVertices:R,textOpacityState:new f,iconOpacityState:new f,isDuplicate:!1,placedTextSymbolIndices:L}}function s(e,t,n,r){var i=e.compareText;if(t in i){for(var o=i[t],a=o.length-1;a>=0;a--)if(r.dist(o[a])<n)return!0}else i[t]=[];return i[t].push(r),!1}var u=e("./anchor"),l=e("./get_anchors"),c=e("./clip_line"),f=e("./opacity_state"),h=e("./shaping"),p=h.shapeText,d=h.shapeIcon,v=h.WritingMode,g=e("./quads"),y=g.getGlyphQuads,m=g.getIconQuads,_=e("./collision_feature"),b=e("../util/util"),E=e("../util/script_detection"),x=e("../util/find_pole_of_inaccessibility"),w=e("../util/classify_rings"),T=e("../data/extent"),S=e("../data/bucket/symbol_bucket");e("@mapbox/point-geometry");t.exports={performSymbolLayout:r}},{"../data/bucket/symbol_bucket":57,"../data/extent":58,"../util/classify_rings":248,"../util/find_pole_of_inaccessibility":254,"../util/script_detection":261,"../util/util":266,"./anchor":205,"./clip_line":207,"./collision_feature":209,"./get_anchors":212,"./opacity_state":215,"./quads":217,"./shaping":218,"@mapbox/point-geometry":2}],220:[function(e,t,n){"use strict";function r(e,t,n,r,i){if(e.isDuplicate)t.opacity=0,t.targetOpacity=0;else{t.targetOpacity!==n&&(i.latestStart=r);var o=i.duration?(r-t.time)/i.duration:1;t.opacity=Math.max(0,Math.min(1,t.opacity+(1===t.targetOpacity?o:-o))),t.targetOpacity=n,t.time=r}}function i(e){if(0===e.opacity&&0===e.targetOpacity)return 0;if(1===e.opacity&&1===e.targetOpacity)return 4294967295;var t=1===e.targetOpacity?1:0,n=Math.floor(127*e.opacity);return n*f+t*h+n*p+t*d+n*v+t*g+n*y+t}function o(e,t){var n=e.text&&e.text.opacityVertexArray,o=e.icon&&e.icon.opacityVertexArray;n&&n.clear(),o&&o.clear(),e.fadeStartTime=Date.now();for(var a=0,s=e.symbolInstances;a<s.length;a+=1){var u=s[a],l=!(u.textBoxStartIndex===u.textBoxEndIndex),c=!(u.iconBoxStartIndex===u.iconBoxEndIndex);if(l||c){if(l){var f=u.placedText?1:0,h=u.textOpacityState,p=0===h.opacity&&0===h.targetOpacity;r(u,h,f,e.fadeStartTime,t);var d=0===h.opacity&&0===h.targetOpacity;if(p!==d)for(var v=0,g=u.placedTextSymbolIndices;v<g.length;v+=1){var y=g[v],m=e.placedGlyphArray.get(y);m.hidden=d}for(var _=(u.numGlyphVertices+u.numVerticalGlyphVertices)/4,b=i(h),E=0;E<_;E++)n.emplaceBack(b)}if(c){var x=u.placedIcon?1:0,w=u.iconOpacityState;r(u,w,x,e.fadeStartTime,t);for(var T=u.numIconVertices/4,S=i(w),A=0;A<T;A++)o.emplaceBack(S)}}}n&&e.text.opacityVertexBuffer&&e.text.opacityVertexBuffer.updateData(n.serialize()),o&&e.icon.opacityVertexBuffer&&e.icon.opacityVertexBuffer.updateData(o.serialize())}function a(e,t){e.emplaceBack(t?1:0,0),e.emplaceBack(t?1:0,0),e.emplaceBack(t?1:0,0),e.emplaceBack(t?1:0,0)}function s(e,t,n,r){for(var i=0;i<t.length;i+=5){var o=r||0===t[i+4];e.emplaceBack(n?1:0,o?1:0),e.emplaceBack(n?1:0,o?1:0),e.emplaceBack(n?1:0,o?1:0),e.emplaceBack(n?1:0,o?1:0)}}function u(e,t,n,r,i,o,u,f,h,p){var d,v,g=e.layers[0],y=g.layout,m=Math.pow(2,r-e.zoom);n&&(e.collisionBox&&e.collisionBox.collisionVertexArray&&e.collisionBox.collisionVertexArray.length&&(d=e.collisionBox.collisionVertexArray,d.clear()),e.collisionCircle&&e.collisionCircle.collisionVertexArray&&e.collisionCircle.collisionVertexArray.length&&(v=e.collisionCircle.collisionVertexArray,v.clear()));for(var _=l.evaluateSizeForZoom(e.textSizeData,t.transform.zoom,c.properties["text-size"]),b="map"===y.get("text-pitch-alignment"),E=0,x=e.symbolInstances;E<x.length;E+=1){var w=x[E],T=!(w.textBoxStartIndex===w.textBoxEndIndex),S=!(w.iconBoxStartIndex===w.iconBoxEndIndex),A=y.get("text-optional")||!T,C=y.get("icon-optional")||!S;w.collisionArrays||(w.collisionArrays=e.deserializeCollisionBoxes(p,w.textBoxStartIndex,w.textBoxEndIndex,w.iconBoxStartIndex,w.iconBoxEndIndex));var O=[],k=[],P=[],R=!1;if(!w.isDuplicate){w.collisionArrays.textBox&&(O=t.placeCollisionBox(w.collisionArrays.textBox,y.get("text-allow-overlap"),i,o)),w.collisionArrays.iconBox&&(k=t.placeCollisionBox(w.collisionArrays.iconBox,y.get("icon-allow-overlap"),i,o));var I=w.collisionArrays.textCircles;if(I){var N=e.placedGlyphArray.get(w.placedTextSymbolIndices[0]),M=l.evaluateSizeForFeature(e.textSizeData,_,N);P=t.placeCollisionCircles(I,y.get("text-allow-overlap"),m,i,w.key,N,e.lineVertexArray,e.glyphOffsetArray,M,o,u,n,b),R=y.get("text-allow-overlap")||P.length>0}}var L=O.length>0||R,D=k.length>0;A||C?C?A||(D=D&&L):L=D&&L:D=L=D&&L,w.placedText=L,w.placedIcon=D,w.collisionArrays.textBox&&(d&&a(d,L),L&&t.insertCollisionBox(O,y.get("text-ignore-placement"),f,h,w.textBoxStartIndex)),w.collisionArrays.iconBox&&(d&&a(d,D),D&&t.insertCollisionBox(k,y.get("icon-ignore-placement"),f,h,w.iconBoxStartIndex)),w.collisionArrays.textCircles&&(v&&s(v,w.collisionArrays.textCircles,L,w.isDuplicate),L&&t.insertCollisionCircles(P,y.get("text-ignore-placement"),f,h,w.textBoxStartIndex))}d&&e.collisionBox.collisionVertexBuffer&&e.collisionBox.collisionVertexBuffer.updateData(d.serialize()),v&&e.collisionCircle.collisionVertexBuffer&&e.collisionCircle.collisionVertexBuffer.updateData(v.serialize())}var l=e("./symbol_size"),c=e("../style/style_layer/symbol_style_layer_properties").layout;e("@mapbox/gl-matrix").mat4;t.exports={updateOpacities:o,performSymbolPlacement:u};var f=Math.pow(2,25),h=Math.pow(2,24),p=Math.pow(2,17),d=Math.pow(2,16),v=Math.pow(2,9),g=Math.pow(2,8),y=Math.pow(2,1)},{"../style/style_layer/symbol_style_layer_properties":202,"./symbol_size":221,"@mapbox/gl-matrix":1}],221:[function(e,t,n){"use strict";function r(e,t){var n=t.expression;if("constant"===n.kind)return{functionType:"constant",layoutSize:n.evaluate({zoom:e+1})};if("source"===n.kind)return{functionType:"source"};for(var r=n.zoomStops,i=0;i<r.length&&r[i]<=e;)i++;i=Math.max(0,i-1);for(var o=i;o<r.length&&r[o]<e+1;)o++;o=Math.min(r.length-1,o);var a={min:r[i],max:r[o]};return"composite"===n.kind?{functionType:"composite",zoomRange:a,propertyValue:t.value}:{functionType:"camera",layoutSize:n.evaluate({zoom:e+1}),zoomRange:a,sizeRange:{min:n.evaluate({zoom:a.min}),max:n.evaluate({zoom:a.max})},propertyValue:t.value}}function i(e,t,n){var r=t;return"source"===e.functionType?n.lowerSize/10:"composite"===e.functionType?u.number(n.lowerSize/10,n.upperSize/10,r.uSizeT):r.uSize}function o(e,t,n){if("constant"===e.functionType)return{uSizeT:0,uSize:e.layoutSize};if("source"===e.functionType)return{uSizeT:0,uSize:0};if("camera"===e.functionType){var r=e.propertyValue,i=e.zoomRange,o=e.sizeRange,a=s(r,n.specification),u=l.clamp(a.interpolationFactor(t,i.min,i.max),0,1);return{uSizeT:0,uSize:o.min+u*(o.max-o.min)}}var c=e.propertyValue,f=e.zoomRange,h=s(c,n.specification);return{uSizeT:l.clamp(h.interpolationFactor(t,f.min,f.max),0,1),uSize:0}}var a=e("../style-spec/expression"),s=a.normalizePropertyExpression,u=e("../style-spec/util/interpolate"),l=e("../util/util");t.exports={getSizeData:r,evaluateSizeForFeature:i,evaluateSizeForZoom:o}},{"../style-spec/expression":136,"../style-spec/util/interpolate":154,"../util/util":266}],222:[function(e,t,n){"use strict";var r=e("../source/rtl_text_plugin");t.exports=function(e,t,n){var i=t.layout.get("text-transform").evaluate(n);return"uppercase"===i?e=e.toLocaleUpperCase():"lowercase"===i&&(e=e.toLocaleLowerCase()),r.applyArabicShaping&&(e=r.applyArabicShaping(e)),e}},{"../source/rtl_text_plugin":107}],223:[function(e,t,n){"use strict";var r=e("../util/dom"),i=e("@mapbox/point-geometry"),o={scrollZoom:e("./handler/scroll_zoom"),boxZoom:e("./handler/box_zoom"),dragRotate:e("./handler/drag_rotate"),dragPan:e("./handler/drag_pan"),keyboard:e("./handler/keyboard"),doubleClickZoom:e("./handler/dblclick_zoom"),touchZoomRotate:e("./handler/touch_zoom_rotate")};t.exports=function(e,t){function n(e){y("mouseout",e)}function a(t){e.doubleClickZoom.isActive()||e.stop(),x=r.mousePos(_,t),y("mousedown",t),E=!0}function s(t){var n=e.dragRotate&&e.dragRotate.isActive();b&&!n&&y("contextmenu",b),b=null,E=!1,y("mouseup",t)}function u(t){if(!(e.dragPan&&e.dragPan.isActive()||e.dragRotate&&e.dragRotate.isActive())){for(var n=t.toElement||t.target;n&&n!==_;)n=n.parentNode;n===_&&y("mousemove",t)}}function l(t){e.stop(),m("touchstart",t),!t.touches||t.touches.length>1||(w?(clearTimeout(w),w=null,y("dblclick",t)):w=setTimeout(p,300))}function c(e){m("touchmove",e)}function f(e){m("touchend",e)}function h(e){m("touchcancel",e)}function p(){w=null}function d(e){r.mousePos(_,e).equals(x)&&y("click",e)}function v(e){y("dblclick",e),e.preventDefault()}function g(t){var n=e.dragRotate&&e.dragRotate.isActive();E||n?E&&(b=t):y("contextmenu",t),t.preventDefault()}function y(t,n){var i=r.mousePos(_,n);return e.fire(t,{lngLat:e.unproject(i),point:i,originalEvent:n})}function m(t,n){var o=r.touchPos(_,n),a=o.reduce(function(e,t,n,r){return e.add(t.div(r.length))},new i(0,0));return e.fire(t,{lngLat:e.unproject(a),point:a,lngLats:o.map(function(t){return e.unproject(t)},this),points:o,originalEvent:n})}var _=e.getCanvasContainer(),b=null,E=!1,x=null,w=null;for(var T in o)e[T]=new o[T](e,t),t.interactive&&t[T]&&e[T].enable(t[T]);_.addEventListener("mouseout",n,!1),_.addEventListener("mousedown",a,!1),_.addEventListener("mouseup",s,!1),_.addEventListener("mousemove",u,!1),_.addEventListener("touchstart",l,!1),_.addEventListener("touchend",f,!1),_.addEventListener("touchmove",c,!1),_.addEventListener("touchcancel",h,!1),_.addEventListener("click",d,!1),_.addEventListener("dblclick",v,!1),_.addEventListener("contextmenu",g,!1)}},{"../util/dom":252,"./handler/box_zoom":232,"./handler/dblclick_zoom":233,"./handler/drag_pan":234,"./handler/drag_rotate":235,"./handler/keyboard":236,"./handler/scroll_zoom":237,"./handler/touch_zoom_rotate":238,"@mapbox/point-geometry":2}],224:[function(e,t,n){"use strict";var r=e("../util/util"),i=e("../style-spec/util/interpolate").number,o=e("../util/browser"),a=e("../geo/lng_lat"),s=e("../geo/lng_lat_bounds"),u=e("@mapbox/point-geometry"),l=e("../util/evented"),c=function(e){function t(t,n){e.call(this),this.moving=!1,this.transform=t,this._bearingSnap=n.bearingSnap}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.getCenter=function(){return this.transform.center},t.prototype.setCenter=function(e,t){return this.jumpTo({center:e},t)},t.prototype.panBy=function(e,t,n){return e=u.convert(e).mult(-1),this.panTo(this.transform.center,r.extend({offset:e},t),n)},t.prototype.panTo=function(e,t,n){return this.easeTo(r.extend({center:e},t),n)},t.prototype.getZoom=function(){return this.transform.zoom},t.prototype.setZoom=function(e,t){return this.jumpTo({zoom:e},t),this},t.prototype.zoomTo=function(e,t,n){return this.easeTo(r.extend({zoom:e},t),n)},t.prototype.zoomIn=function(e,t){return this.zoomTo(this.getZoom()+1,e,t),this},t.prototype.zoomOut=function(e,t){return this.zoomTo(this.getZoom()-1,e,t),this},t.prototype.getBearing=function(){return this.transform.bearing},t.prototype.setBearing=function(e,t){return this.jumpTo({bearing:e},t),this},t.prototype.rotateTo=function(e,t,n){return this.easeTo(r.extend({bearing:e},t),n)},t.prototype.resetNorth=function(e,t){return this.rotateTo(0,r.extend({duration:1e3},e),t),this},t.prototype.snapToNorth=function(e,t){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(e,t):this},t.prototype.getPitch=function(){return this.transform.pitch},t.prototype.setPitch=function(e,t){return this.jumpTo({pitch:e},t),this},t.prototype.fitBounds=function(e,t,n){if(t=r.extend({padding:{top:0,bottom:0,right:0,left:0},offset:[0,0],maxZoom:this.transform.maxZoom},t),"number"==typeof t.padding){var i=t.padding;t.padding={top:i,bottom:i,right:i,left:i}}if(!r.deepEqual(Object.keys(t.padding).sort(function(e,t){return e<t?-1:e>t?1:0}),["bottom","left","right","top"]))return r.warnOnce("options.padding must be a positive number, or an Object with keys 'bottom', 'left', 'right', 'top'"),this;e=s.convert(e);var o=[(t.padding.left-t.padding.right)/2,(t.padding.top-t.padding.bottom)/2],a=Math.min(t.padding.right,t.padding.left),l=Math.min(t.padding.top,t.padding.bottom);t.offset=[t.offset[0]+o[0],t.offset[1]+o[1]];var c=u.convert(t.offset),f=this.transform,h=f.project(e.getNorthWest()),p=f.project(e.getSouthEast()),d=p.sub(h),v=(f.width-2*a-2*Math.abs(c.x))/d.x,g=(f.height-2*l-2*Math.abs(c.y))/d.y;return g<0||v<0?(r.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset."),this):(t.center=f.unproject(h.add(p).div(2)),t.zoom=Math.min(f.scaleZoom(f.scale*Math.min(v,g)),t.maxZoom),t.bearing=0,t.linear?this.easeTo(t,n):this.flyTo(t,n))},t.prototype.jumpTo=function(e,t){this.stop();var n=this.transform,r=!1,i=!1,o=!1;return"zoom"in e&&n.zoom!==+e.zoom&&(r=!0,n.zoom=+e.zoom),void 0!==e.center&&(n.center=a.convert(e.center)),"bearing"in e&&n.bearing!==+e.bearing&&(i=!0,n.bearing=+e.bearing),"pitch"in e&&n.pitch!==+e.pitch&&(o=!0,n.pitch=+e.pitch),this.fire("movestart",t).fire("move",t),r&&this.fire("zoomstart",t).fire("zoom",t).fire("zoomend",t),i&&this.fire("rotate",t),o&&this.fire("pitchstart",t).fire("pitch",t).fire("pitchend",t),this.fire("moveend",t)},t.prototype.easeTo=function(e,t){var n=this;this.stop(),e=r.extend({offset:[0,0],duration:500,easing:r.ease},e),!1===e.animate&&(e.duration=0),e.smoothEasing&&0!==e.duration&&(e.easing=this._smoothOutEasing(e.duration));var o=this.transform,s=this.getZoom(),l=this.getBearing(),c=this.getPitch(),f="zoom"in e?+e.zoom:s,h="bearing"in e?this._normalizeBearing(e.bearing,l):l,p="pitch"in e?+e.pitch:c,d=o.centerPoint.add(u.convert(e.offset)),v=o.pointLocation(d),g=a.convert(e.center||v);this._normalizeCenter(g);var y,m,_=o.project(v),b=o.project(g).sub(_),E=o.zoomScale(f-s);return e.around&&(y=a.convert(e.around),m=o.locationPoint(y)),this.zooming=f!==s,this.rotating=l!==h,this.pitching=p!==c,this._prepareEase(t,e.noMoveStart),clearTimeout(this._onEaseEnd),this._ease(function(e){if(this.zooming&&(o.zoom=i(s,f,e)),this.rotating&&(o.bearing=i(l,h,e)),this.pitching&&(o.pitch=i(c,p,e)),y)o.setLocationAtPoint(y,m);else{var n=o.zoomScale(o.zoom-s),r=f>s?Math.min(2,E):Math.max(.5,E),a=Math.pow(r,1-e),u=o.unproject(_.add(b.mult(e*a)).mult(n));o.setLocationAtPoint(o.renderWorldCopies?u.wrap():u,d)}this._fireMoveEvents(t)},function(){e.delayEndEvents?n._onEaseEnd=setTimeout(function(){return n._easeToEnd(t)},e.delayEndEvents):n._easeToEnd(t)},e),this},t.prototype._prepareEase=function(e,t){this.moving=!0,t||this.fire("movestart",e),this.zooming&&this.fire("zoomstart",e),this.pitching&&this.fire("pitchstart",e)},t.prototype._fireMoveEvents=function(e){this.fire("move",e),this.zooming&&this.fire("zoom",e),this.rotating&&this.fire("rotate",e),this.pitching&&this.fire("pitch",e)},t.prototype._easeToEnd=function(e){var t=this.zooming,n=this.pitching;this.moving=!1,this.zooming=!1,this.rotating=!1,this.pitching=!1,t&&this.fire("zoomend",e),n&&this.fire("pitchend",e),this.fire("moveend",e)},t.prototype.flyTo=function(e,t){function n(e){var t=(A*A-S*S+(e?-1:1)*P*P*C*C)/(2*(e?A:S)*P*C);return Math.log(Math.sqrt(t*t+1)-t)}function o(e){return(Math.exp(e)-Math.exp(-e))/2}function s(e){return(Math.exp(e)+Math.exp(-e))/2}function l(e){return o(e)/s(e)}var c=this;this.stop(),e=r.extend({offset:[0,0],speed:1.2,curve:1.42,easing:r.ease},e);var f=this.transform,h=this.getZoom(),p=this.getBearing(),d=this.getPitch(),v="zoom"in e?r.clamp(+e.zoom,f.minZoom,f.maxZoom):h,g="bearing"in e?this._normalizeBearing(e.bearing,p):p,y="pitch"in e?+e.pitch:d,m=f.zoomScale(v-h),_=f.centerPoint.add(u.convert(e.offset)),b=f.pointLocation(_),E=a.convert(e.center||b);this._normalizeCenter(E);var x=f.project(b),w=f.project(E).sub(x),T=e.curve,S=Math.max(f.width,f.height),A=S/m,C=w.mag();if("minZoom"in e){var O=r.clamp(Math.min(e.minZoom,h,v),f.minZoom,f.maxZoom),k=S/f.zoomScale(O-h);T=Math.sqrt(k/C*2)}var P=T*T,R=n(0),I=function(e){return s(R)/s(R+T*e)},N=function(e){return S*((s(R)*l(R+T*e)-o(R))/P)/C},M=(n(1)-R)/T;if(Math.abs(C)<1e-6||!isFinite(M)){if(Math.abs(S-A)<1e-6)return this.easeTo(e,t);var L=A<S?-1:1;M=Math.abs(Math.log(A/S))/T,N=function(){return 0},I=function(e){return Math.exp(L*T*e)}}if("duration"in e)e.duration=+e.duration;else{var D="screenSpeed"in e?+e.screenSpeed/T:+e.speed;e.duration=1e3*M/D}return e.maxDuration&&e.duration>e.maxDuration&&(e.duration=0),this.zooming=!0,this.rotating=p!==g,this.pitching=y!==d,this._prepareEase(t,!1),this._ease(function(e){var n=e*M,r=1/I(n);f.zoom=h+f.scaleZoom(r),this.rotating&&(f.bearing=i(p,g,e)),this.pitching&&(f.pitch=i(d,y,e));var o=f.unproject(x.add(w.mult(N(n))).mult(r));f.setLocationAtPoint(f.renderWorldCopies?o.wrap():o,_),this._fireMoveEvents(t)},function(){return c._easeToEnd(t)},e),this},t.prototype.isEasing=function(){return!!this._abortFn},t.prototype.isMoving=function(){return this.moving},t.prototype.stop=function(){return this._abortFn&&(this._abortFn(),this._finishEase()),this},t.prototype._ease=function(e,t,n){this._finishFn=t,this._abortFn=o.timed(function(t){e.call(this,n.easing(t)),1===t&&this._finishEase()},!1===n.animate?0:n.duration,this)},t.prototype._finishEase=function(){delete this._abortFn;var e=this._finishFn;delete this._finishFn,e.call(this)},t.prototype._normalizeBearing=function(e,t){e=r.wrap(e,-180,180);var n=Math.abs(e-t);return Math.abs(e-360-t)<n&&(e-=360),Math.abs(e+360-t)<n&&(e+=360),e},t.prototype._normalizeCenter=function(e){var t=this.transform;if(t.renderWorldCopies&&!t.lngRange){var n=e.lng-t.center.lng;e.lng+=n>180?-360:n<-180?360:0}},t.prototype._smoothOutEasing=function(e){var t=r.ease;if(this._prevEase){var n=this._prevEase,i=(Date.now()-n.start)/n.duration,o=n.easing(i+.01)-n.easing(i),a=.27/Math.sqrt(o*o+1e-4)*.01,s=Math.sqrt(.0729-a*a);t=r.bezier(a,s,.25,1)}return this._prevEase={start:(new Date).getTime(),duration:e,easing:t},t},t}(l);t.exports=c},{"../geo/lng_lat":68,"../geo/lng_lat_bounds":69,"../style-spec/util/interpolate":154,"../util/browser":245,"../util/evented":253,"../util/util":266,"@mapbox/point-geometry":2}],225:[function(e,t,n){"use strict";var r=e("../../util/dom"),i=e("../../util/util"),o=e("../../util/config"),a=function(e){this.options=e,i.bindAll(["_updateEditLink","_updateData","_updateCompact"],this)};a.prototype.getDefaultPosition=function(){return"bottom-right"},a.prototype.onAdd=function(e){var t=this.options&&this.options.compact;return this._map=e,this._container=r.create("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),t&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),void 0===t&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container},a.prototype.onRemove=function(){r.remove(this._container),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0},a.prototype._updateEditLink=function(){var e=this._editLink;e||(e=this._editLink=this._container.querySelector(".mapbox-improve-map"));var t=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:o.ACCESS_TOKEN}];if(e){var n=t.reduce(function(e,n,r){return n.value&&(e+=n.key+"="+n.value+(r<t.length-1?"&":"")),e},"?");e.href="https://www.mapbox.com/feedback/"+n+(this._map._hash?this._map._hash.getHashString(!0):"")}},a.prototype._updateData=function(e){e&&"metadata"===e.sourceDataType&&(this._updateAttributions(),this._updateEditLink())},a.prototype._updateAttributions=function(){if(this._map.style){var e=[];if(this._map.style.stylesheet){var t=this._map.style.stylesheet;this.styleOwner=t.owner,this.styleId=t.id}var n=this._map.style.sourceCaches;for(var r in n){var i=n[r].getSource();i.attribution&&e.indexOf(i.attribution)<0&&e.push(i.attribution)}e.sort(function(e,t){return e.length-t.length}),e=e.filter(function(t,n){for(var r=n+1;r<e.length;r++)if(e[r].indexOf(t)>=0)return!1;return!0}),this._container.innerHTML=e.join(" | "),this._editLink=null}},a.prototype._updateCompact=function(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact")},t.exports=a},{"../../util/config":249,"../../util/dom":252,"../../util/util":266}],226:[function(e,t,n){"use strict";var r=e("../../util/dom"),i=e("../../util/util"),o=e("../../util/window"),a=function(){this._fullscreen=!1,i.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in o.document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in o.document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in o.document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in o.document&&(this._fullscreenchange="MSFullscreenChange"),this._className="mapboxgl-ctrl"};a.prototype.onAdd=function(e){return this._map=e,this._mapContainer=this._map.getContainer(),this._container=r.create("div",this._className+" mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._container.style.display="none",i.warnOnce("This device does not support fullscreen mode.")),this._container},a.prototype.onRemove=function(){r.remove(this._container),this._map=null,o.document.removeEventListener(this._fullscreenchange,this._changeIcon)},a.prototype._checkFullscreenSupport=function(){return!!(o.document.fullscreenEnabled||o.document.mozFullScreenEnabled||o.document.msFullscreenEnabled||o.document.webkitFullscreenEnabled)},a.prototype._setupUI=function(){var e=this._fullscreenButton=r.create("button",this._className+"-icon "+this._className+"-fullscreen",this._container);e.setAttribute("aria-label","Toggle fullscreen"),e.type="button",this._fullscreenButton.addEventListener("click",this._onClickFullscreen),o.document.addEventListener(this._fullscreenchange,this._changeIcon)},a.prototype._isFullscreen=function(){return this._fullscreen},a.prototype._changeIcon=function(){(o.document.fullscreenElement||o.document.mozFullScreenElement||o.document.webkitFullscreenElement||o.document.msFullscreenElement)===this._mapContainer!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle(this._className+"-shrink"),this._fullscreenButton.classList.toggle(this._className+"-fullscreen"))},a.prototype._onClickFullscreen=function(){this._isFullscreen()?o.document.exitFullscreen?o.document.exitFullscreen():o.document.mozCancelFullScreen?o.document.mozCancelFullScreen():o.document.msExitFullscreen?o.document.msExitFullscreen():o.document.webkitCancelFullScreen&&o.document.webkitCancelFullScreen():this._mapContainer.requestFullscreen?this._mapContainer.requestFullscreen():this._mapContainer.mozRequestFullScreen?this._mapContainer.mozRequestFullScreen():this._mapContainer.msRequestFullscreen?this._mapContainer.msRequestFullscreen():this._mapContainer.webkitRequestFullscreen&&this._mapContainer.webkitRequestFullscreen()},t.exports=a},{"../../util/dom":252,"../../util/util":266,"../../util/window":247}],227:[function(e,t,n){"use strict";function r(e){void 0!==i?e(i):void 0!==s.navigator.permissions?s.navigator.permissions.query({name:"geolocation"}).then(function(t){i="denied"!==t.state,e(i)}):(i=!!s.navigator.geolocation,e(i))}var i,o=e("../../util/evented"),a=e("../../util/dom"),s=e("../../util/window"),u=e("../../util/util"),l=e("../../geo/lng_lat"),c=e("../marker"),f={positionOptions:{enableHighAccuracy:!1,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showUserLocation:!0},h=function(e){function t(t){e.call(this),this.options=u.extend({},f,t),u.bindAll(["_onSuccess","_onError","_finish","_setupUI","_updateCamera","_updateMarker","_onClickGeolocate"],this)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.onAdd=function(e){return this._map=e,this._container=a.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),r(this._setupUI),this._container},t.prototype.onRemove=function(){void 0!==this._geolocationWatchID&&(s.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker.remove(),a.remove(this._container),this._map=void 0},t.prototype._onSuccess=function(e){if(this.options.trackUserLocation)switch(this._lastKnownPosition=e,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&"OFF"!==this._watchState&&this._updateMarker(e),this.options.trackUserLocation&&"ACTIVE_LOCK"!==this._watchState||this._updateCamera(e),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire("geolocate",e),this._finish()},t.prototype._updateCamera=function(e){var t=new l(e.coords.longitude,e.coords.latitude),n=e.coords.accuracy;this._map.fitBounds(t.toBounds(n),this.options.fitBoundsOptions,{geolocateSource:!0})},t.prototype._updateMarker=function(e){e?this._userLocationDotMarker.setLngLat([e.coords.longitude,e.coords.latitude]).addTo(this._map):this._userLocationDotMarker.remove()},t.prototype._onError=function(e){if(this.options.trackUserLocation)if(1===e.code)this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),void 0!==this._geolocationWatchID&&this._clearWatch();else switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}"OFF"!==this._watchState&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire("error",e),this._finish()},t.prototype._finish=function(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},t.prototype._setupUI=function(e){var t=this;!1!==e&&(this._container.addEventListener("contextmenu",function(e){return e.preventDefault()}),this._geolocateButton=a.create("button","mapboxgl-ctrl-icon mapboxgl-ctrl-geolocate",this._container),this._geolocateButton.type="button",this._geolocateButton.setAttribute("aria-label","Geolocate"),this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=a.create("div","mapboxgl-user-location-dot"),this._userLocationDotMarker=new c(this._dotElement),this.options.trackUserLocation&&(this._watchState="OFF")),this._geolocateButton.addEventListener("click",this._onClickGeolocate.bind(this)),this.options.trackUserLocation&&this._map.on("movestart",function(e){e.geolocateSource||"ACTIVE_LOCK"!==t._watchState||(t._watchState="BACKGROUND",t._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),t._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),t.fire("trackuserlocationend"))}))},t.prototype._onClickGeolocate=function(){if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire("trackuserlocationstart");break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire("trackuserlocationend");break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire("trackuserlocationstart")}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}"OFF"===this._watchState&&void 0!==this._geolocationWatchID?this._clearWatch():void 0===this._geolocationWatchID&&(this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),this._geolocationWatchID=s.navigator.geolocation.watchPosition(this._onSuccess,this._onError,this.options.positionOptions))}else s.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4)},t.prototype._clearWatch=function(){s.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)},t}(o);t.exports=h},{"../../geo/lng_lat":68,"../../util/dom":252,"../../util/evented":253,"../../util/util":266,"../../util/window":247,"../marker":241}],228:[function(e,t,n){"use strict";var r=e("../../util/dom"),i=e("../../util/util"),o=function(){i.bindAll(["_updateLogo"],this)};o.prototype.onAdd=function(e){this._map=e,this._container=r.create("div","mapboxgl-ctrl");var t=r.create("a","mapboxgl-ctrl-logo");return t.target="_blank",t.href="https://www.mapbox.com/",t.setAttribute("aria-label","Mapbox logo"),this._container.appendChild(t),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._container},o.prototype.onRemove=function(){r.remove(this._container),this._map.off("sourcedata",this._updateLogo)},o.prototype.getDefaultPosition=function(){return"bottom-left"},o.prototype._updateLogo=function(e){e&&"metadata"!==e.sourceDataType||(this._container.style.display=this._logoRequired()?"block":"none")},o.prototype._logoRequired=function(){if(this._map.style){var e=this._map.style.sourceCaches;for(var t in e)if(e[t].getSource().mapbox_logo)return!0;return!1}},t.exports=o},{"../../util/dom":252,"../../util/util":266}],229:[function(e,t,n){"use strict";var r=e("../../util/dom"),i=e("../../util/util"),o=e("../handler/drag_rotate"),a=function(){var e=this;i.bindAll(["_rotateCompassArrow"],this),this._container=r.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",function(e){return e.preventDefault()}),this._zoomInButton=this._createButton("mapboxgl-ctrl-icon mapboxgl-ctrl-zoom-in","Zoom In",function(){return e._map.zoomIn()}),this._zoomOutButton=this._createButton("mapboxgl-ctrl-icon mapboxgl-ctrl-zoom-out","Zoom Out",function(){return e._map.zoomOut()}),this._compass=this._createButton("mapboxgl-ctrl-icon mapboxgl-ctrl-compass","Reset North",function(){return e._map.resetNorth()}),this._compassArrow=r.create("span","mapboxgl-ctrl-compass-arrow",this._compass)};a.prototype._rotateCompassArrow=function(){var e="rotate("+this._map.transform.angle*(180/Math.PI)+"deg)";this._compassArrow.style.transform=e},a.prototype.onAdd=function(e){return this._map=e,this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new o(e,{button:"left",element:this._compass}),this._handler.enable(),this._container},a.prototype.onRemove=function(){r.remove(this._container),this._map.off("rotate",this._rotateCompassArrow),delete this._map,this._handler.disable(),delete this._handler},a.prototype._createButton=function(e,t,n){var i=r.create("button",e,this._container);return i.type="button",i.setAttribute("aria-label",t),i.addEventListener("click",n),i},t.exports=a},{"../../util/dom":252,"../../util/util":266,"../handler/drag_rotate":235}],230:[function(e,t,n){"use strict";function r(e,t,n){var r=n&&n.maxWidth||100,a=e._container.clientHeight/2,s=o(e.unproject([0,a]),e.unproject([r,a]));if(n&&"imperial"===n.unit){var u=3.2808*s;u>5280?i(t,r,u/5280,"mi"):i(t,r,u,"ft")}else if(n&&"nautical"===n.unit){var l=s/1852;i(t,r,l,"nm")}else i(t,r,s,"m")}function i(e,t,n,r){var i=a(n),o=i/n;"m"===r&&i>=1e3&&(i/=1e3,r="km"),e.style.width=t*o+"px",e.innerHTML=i+r}function o(e,t){var n=Math.PI/180,r=e.lat*n,i=t.lat*n,o=Math.sin(r)*Math.sin(i)+Math.cos(r)*Math.cos(i)*Math.cos((t.lng-e.lng)*n);return 6371e3*Math.acos(Math.min(o,1))}function a(e){var t=Math.pow(10,(""+Math.floor(e)).length-1),n=e/t;return n=n>=10?10:n>=5?5:n>=3?3:n>=2?2:1,t*n}var s=e("../../util/dom"),u=e("../../util/util"),l=function(e){this.options=e,u.bindAll(["_onMove"],this)};l.prototype.getDefaultPosition=function(){return"bottom-left"},l.prototype._onMove=function(){r(this._map,this._container,this.options)},l.prototype.onAdd=function(e){return this._map=e,this._container=s.create("div","mapboxgl-ctrl mapboxgl-ctrl-scale",e.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container},l.prototype.onRemove=function(){s.remove(this._container),this._map.off("move",this._onMove),this._map=void 0},t.exports=l},{"../../util/dom":252,"../../util/util":266}],231:[function(e,t,n){"use strict"},{}],232:[function(e,t,n){"use strict";var r=e("../../util/dom"),i=e("../../geo/lng_lat_bounds"),o=e("../../util/util"),a=e("../../util/window"),s=function(e){this._map=e,this._el=e.getCanvasContainer(),this._container=e.getContainer(),o.bindAll(["_onMouseDown","_onMouseMove","_onMouseUp","_onKeyDown"],this)};s.prototype.isEnabled=function(){return!!this._enabled},s.prototype.isActive=function(){return!!this._active},s.prototype.enable=function(){this.isEnabled()||(this._map.dragPan&&this._map.dragPan.disable(),this._el.addEventListener("mousedown",this._onMouseDown,!1),this._map.dragPan&&this._map.dragPan.enable(),this._enabled=!0)},s.prototype.disable=function(){this.isEnabled()&&(this._el.removeEventListener("mousedown",this._onMouseDown),this._enabled=!1)},s.prototype._onMouseDown=function(e){e.shiftKey&&0===e.button&&(a.document.addEventListener("mousemove",this._onMouseMove,!1),a.document.addEventListener("keydown",this._onKeyDown,!1),a.document.addEventListener("mouseup",this._onMouseUp,!1),r.disableDrag(),this._startPos=r.mousePos(this._el,e),this._active=!0)},s.prototype._onMouseMove=function(e){var t=this._startPos,n=r.mousePos(this._el,e);this._box||(this._box=r.create("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",e));var i=Math.min(t.x,n.x),o=Math.max(t.x,n.x),a=Math.min(t.y,n.y),s=Math.max(t.y,n.y);r.setTransform(this._box,"translate("+i+"px,"+a+"px)"),this._box.style.width=o-i+"px",this._box.style.height=s-a+"px"},s.prototype._onMouseUp=function(e){if(0===e.button){var t=this._startPos,n=r.mousePos(this._el,e),o=(new i).extend(this._map.unproject(t)).extend(this._map.unproject(n));this._finish(),t.x===n.x&&t.y===n.y?this._fireEvent("boxzoomcancel",e):this._map.fitBounds(o,{linear:!0}).fire("boxzoomend",{originalEvent:e,boxZoomBounds:o})}},s.prototype._onKeyDown=function(e){27===e.keyCode&&(this._finish(),this._fireEvent("boxzoomcancel",e))},s.prototype._finish=function(){this._active=!1,a.document.removeEventListener("mousemove",this._onMouseMove,!1),a.document.removeEventListener("keydown",this._onKeyDown,!1),a.document.removeEventListener("mouseup",this._onMouseUp,!1),this._container.classList.remove("mapboxgl-crosshair"),this._box&&(r.remove(this._box),this._box=null),r.enableDrag()},s.prototype._fireEvent=function(e,t){return this._map.fire(e,{originalEvent:t})},t.exports=s},{"../../geo/lng_lat_bounds":69,"../../util/dom":252,"../../util/util":266,"../../util/window":247}],233:[function(e,t,n){"use strict";var r=e("../../util/util"),i=function(e){this._map=e,r.bindAll(["_onDblClick","_onZoomEnd"],this)};i.prototype.isEnabled=function(){return!!this._enabled},i.prototype.isActive=function(){return!!this._active},i.prototype.enable=function(){this.isEnabled()||(this._map.on("dblclick",this._onDblClick),this._enabled=!0)},i.prototype.disable=function(){this.isEnabled()&&(this._map.off("dblclick",this._onDblClick),this._enabled=!1)},i.prototype._onDblClick=function(e){this._active=!0,this._map.on("zoomend",this._onZoomEnd),this._map.zoomTo(this._map.getZoom()+(e.originalEvent.shiftKey?-1:1),{around:e.lngLat},e)},i.prototype._onZoomEnd=function(){this._active=!1,this._map.off("zoomend",this._onZoomEnd)},t.exports=i},{"../../util/util":266}],234:[function(e,t,n){"use strict";var r=e("../../util/dom"),i=e("../../util/util"),o=e("../../util/window"),a=i.bezier(0,0,.3,1),s=function(e){this._map=e,this._el=e.getCanvasContainer(),i.bindAll(["_onDown","_onMove","_onUp","_onTouchEnd","_onMouseUp"],this)};s.prototype.isEnabled=function(){return!!this._enabled},s.prototype.isActive=function(){return!!this._active},s.prototype.enable=function(){this.isEnabled()||(this._el.classList.add("mapboxgl-touch-drag-pan"),this._el.addEventListener("mousedown",this._onDown),this._el.addEventListener("touchstart",this._onDown),this._enabled=!0)},s.prototype.disable=function(){this.isEnabled()&&(this._el.classList.remove("mapboxgl-touch-drag-pan"),this._el.removeEventListener("mousedown",this._onDown),this._el.removeEventListener("touchstart",this._onDown),this._enabled=!1)},s.prototype._onDown=function(e){this._ignoreEvent(e)||this.isActive()||(e.touches?(o.document.addEventListener("touchmove",this._onMove),o.document.addEventListener("touchend",this._onTouchEnd)):(o.document.addEventListener("mousemove",this._onMove),o.document.addEventListener("mouseup",this._onMouseUp)),o.addEventListener("blur",this._onMouseUp),this._active=!1,this._startPos=this._pos=r.mousePos(this._el,e),this._inertia=[[Date.now(),this._pos]])},s.prototype._onMove=function(e){if(!this._ignoreEvent(e)){this.isActive()||(this._active=!0,this._map.moving=!0,this._fireEvent("dragstart",e),this._fireEvent("movestart",e));var t=r.mousePos(this._el,e),n=this._map;n.stop(),this._drainInertiaBuffer(),this._inertia.push([Date.now(),t]),n.transform.setLocationAtPoint(n.transform.pointLocation(this._pos),t),this._fireEvent("drag",e),this._fireEvent("move",e),this._pos=t,e.preventDefault()}},s.prototype._onUp=function(e){var t=this;if(this.isActive()){this._active=!1,this._fireEvent("dragend",e),this._drainInertiaBuffer();var n=function(){t._map.moving=!1,t._fireEvent("moveend",e)},r=this._inertia;if(r.length<2)return void n();var i=r[r.length-1],o=r[0],s=i[1].sub(o[1]),u=(i[0]-o[0])/1e3;if(0===u||i[1].equals(o[1]))return void n();var l=s.mult(.3/u),c=l.mag();c>1400&&(c=1400,l._unit()._mult(c));var f=c/750,h=l.mult(-f/2);this._map.panBy(h,{duration:1e3*f,easing:a,noMoveStart:!0},{originalEvent:e})}},s.prototype._onMouseUp=function(e){this._ignoreEvent(e)||(this._onUp(e),o.document.removeEventListener("mousemove",this._onMove),o.document.removeEventListener("mouseup",this._onMouseUp),o.removeEventListener("blur",this._onMouseUp))},s.prototype._onTouchEnd=function(e){this._ignoreEvent(e)||(this._onUp(e),o.document.removeEventListener("touchmove",this._onMove),o.document.removeEventListener("touchend",this._onTouchEnd))},s.prototype._fireEvent=function(e,t){return this._map.fire(e,{originalEvent:t})},s.prototype._ignoreEvent=function(e){var t=this._map;return!(!t.boxZoom||!t.boxZoom.isActive())||!(!t.dragRotate||!t.dragRotate.isActive())||(e.touches?e.touches.length>1:!!e.ctrlKey||"mousemove"!==e.type&&e.button&&0!==e.button)},s.prototype._drainInertiaBuffer=function(){for(var e=this._inertia,t=Date.now();e.length>0&&t-e[0][0]>160;)e.shift()},t.exports=s},{"../../util/dom":252,"../../util/util":266,"../../util/window":247}],235:[function(e,t,n){"use strict";var r=e("../../util/dom"),i=e("../../util/util"),o=e("../../util/window"),a=i.bezier(0,0,.25,1),s=function(e,t){this._map=e,this._el=t.element||e.getCanvasContainer(),this._button=t.button||"right",this._bearingSnap=t.bearingSnap||0,this._pitchWithRotate=!1!==t.pitchWithRotate,i.bindAll(["_onDown","_onMove","_onUp"],this)};s.prototype.isEnabled=function(){return!!this._enabled},s.prototype.isActive=function(){return!!this._active},s.prototype.enable=function(){this.isEnabled()||(this._el.addEventListener("mousedown",this._onDown),this._enabled=!0)},s.prototype.disable=function(){this.isEnabled()&&(this._el.removeEventListener("mousedown",this._onDown),this._enabled=!1)},s.prototype._onDown=function(e){if(!(this._map.boxZoom&&this._map.boxZoom.isActive()||this._map.dragPan&&this._map.dragPan.isActive()||this.isActive())){if("right"===this._button){var t=e.ctrlKey?0:2,n=e.button;if(void 0!==o.InstallTrigger&&2===e.button&&e.ctrlKey&&o.navigator.platform.toUpperCase().indexOf("MAC")>=0&&(n=0),n!==t)return}else if(e.ctrlKey||0!==e.button)return;r.disableDrag(),o.document.addEventListener("mousemove",this._onMove,{capture:!0}),o.document.addEventListener("mouseup",this._onUp),o.addEventListener("blur",this._onUp),this._active=!1,this._inertia=[[Date.now(),this._map.getBearing()]],this._startPos=this._pos=r.mousePos(this._el,e),this._center=this._map.transform.centerPoint,e.preventDefault()}},s.prototype._onMove=function(e){this.isActive()||(this._active=!0,this._map.moving=!0,this._fireEvent("rotatestart",e),this._fireEvent("movestart",e),this._pitchWithRotate&&this._fireEvent("pitchstart",e));var t=this._map;t.stop();var n=this._pos,i=r.mousePos(this._el,e),o=.8*(n.x-i.x),a=-.5*(n.y-i.y),s=t.getBearing()-o,u=t.getPitch()-a,l=this._inertia,c=l[l.length-1];this._drainInertiaBuffer(),l.push([Date.now(),t._normalizeBearing(s,c[1])]),t.transform.bearing=s,this._pitchWithRotate&&(this._fireEvent("pitch",e),t.transform.pitch=u),this._fireEvent("rotate",e),this._fireEvent("move",e),this._pos=i},s.prototype._onUp=function(e){var t=this;if(o.document.removeEventListener("mousemove",this._onMove,{capture:!0}),o.document.removeEventListener("mouseup",this._onUp),o.removeEventListener("blur",this._onUp),r.enableDrag(),this.isActive()){this._active=!1,this._fireEvent("rotateend",e),this._drainInertiaBuffer();var n=this._map,i=n.getBearing(),s=this._inertia,u=function(){Math.abs(i)<t._bearingSnap?n.resetNorth({noMoveStart:!0},{originalEvent:e}):(t._map.moving=!1,t._fireEvent("moveend",e)),t._pitchWithRotate&&t._fireEvent("pitchend",e)};if(s.length<2)return void u();var l=s[0],c=s[s.length-1],f=s[s.length-2],h=n._normalizeBearing(i,f[1]),p=c[1]-l[1],d=p<0?-1:1,v=(c[0]-l[0])/1e3;if(0===p||0===v)return void u();var g=Math.abs(p*(.25/v));g>180&&(g=180);var y=g/180;h+=d*g*(y/2),Math.abs(n._normalizeBearing(h,0))<this._bearingSnap&&(h=n._normalizeBearing(0,h)),n.rotateTo(h,{duration:1e3*y,easing:a,noMoveStart:!0},{originalEvent:e})}},s.prototype._fireEvent=function(e,t){return this._map.fire(e,{originalEvent:t})},s.prototype._drainInertiaBuffer=function(){for(var e=this._inertia,t=Date.now();e.length>0&&t-e[0][0]>160;)e.shift()},t.exports=s},{"../../util/dom":252,"../../util/util":266,"../../util/window":247}],236:[function(e,t,n){"use strict";function r(e){return e*(2-e)}var i=e("../../util/util"),o=function(e){this._map=e,this._el=e.getCanvasContainer(),i.bindAll(["_onKeyDown"],this)};o.prototype.isEnabled=function(){return!!this._enabled},o.prototype.enable=function(){this.isEnabled()||(this._el.addEventListener("keydown",this._onKeyDown,!1),this._enabled=!0)},o.prototype.disable=function(){this.isEnabled()&&(this._el.removeEventListener("keydown",this._onKeyDown),this._enabled=!1)},o.prototype._onKeyDown=function(e){if(!(e.altKey||e.ctrlKey||e.metaKey)){var t=0,n=0,i=0,o=0,a=0;switch(e.keyCode){case 61:case 107:case 171:case 187:t=1;break;case 189:case 109:case 173:t=-1;break;case 37:e.shiftKey?n=-1:(e.preventDefault(),o=-1);break;case 39:e.shiftKey?n=1:(e.preventDefault(),o=1);break;case 38:e.shiftKey?i=1:(e.preventDefault(),a=-1);break;case 40:e.shiftKey?i=-1:(a=1,e.preventDefault());break;default:return}var s=this._map,u=s.getZoom(),l={duration:300,delayEndEvents:500,easing:r,zoom:t?Math.round(u)+t*(e.shiftKey?2:1):u,bearing:s.getBearing()+15*n,pitch:s.getPitch()+10*i,offset:[100*-o,100*-a],center:s.getCenter()};s.easeTo(l,{originalEvent:e})}},t.exports=o},{"../../util/util":266}],237:[function(e,t,n){"use strict";var r=e("../../util/dom"),i=e("../../util/util"),o=e("../../util/browser"),a=e("../../util/window"),s=a.navigator.userAgent.toLowerCase(),u=-1!==s.indexOf("firefox"),l=-1!==s.indexOf("safari")&&-1===s.indexOf("chrom"),c=function(e){this._map=e,this._el=e.getCanvasContainer(),i.bindAll(["_onWheel","_onTimeout"],this)};c.prototype.isEnabled=function(){return!!this._enabled},c.prototype.enable=function(e){this.isEnabled()||(this._el.addEventListener("wheel",this._onWheel,!1),this._el.addEventListener("mousewheel",this._onWheel,!1),this._enabled=!0,this._aroundCenter=e&&"center"===e.around)},c.prototype.disable=function(){this.isEnabled()&&(this._el.removeEventListener("wheel",this._onWheel),this._el.removeEventListener("mousewheel",this._onWheel),this._enabled=!1)},c.prototype._onWheel=function(e){var t=0;"wheel"===e.type?(t=e.deltaY,u&&e.deltaMode===a.WheelEvent.DOM_DELTA_PIXEL&&(t/=o.devicePixelRatio),e.deltaMode===a.WheelEvent.DOM_DELTA_LINE&&(t*=40)):"mousewheel"===e.type&&(t=-e.wheelDeltaY,l&&(t/=3));var n=o.now(),i=n-(this._time||0);this._pos=r.mousePos(this._el,e),this._time=n,0!==t&&t%4.000244140625==0?this._type="wheel":0!==t&&Math.abs(t)<4?this._type="trackpad":i>400?(this._type=null,this._lastValue=t,this._timeout=setTimeout(this._onTimeout,40)):this._type||(this._type=Math.abs(i*t)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,t+=this._lastValue)),e.shiftKey&&t&&(t/=4),this._type&&this._zoom(-t,e),e.preventDefault()},c.prototype._onTimeout=function(){this._type="wheel",this._zoom(-this._lastValue)},c.prototype._zoom=function(e,t){if(0!==e){var n=this._map,r=2/(1+Math.exp(-Math.abs(e/100)));e<0&&0!==r&&(r=1/r);var i=n.ease?n.ease.to:n.transform.scale,o=n.transform.scaleZoom(i*r);n.zoomTo(o,{duration:"wheel"===this._type?200:0,around:this._aroundCenter?n.getCenter():n.unproject(this._pos),delayEndEvents:200,smoothEasing:!0},{originalEvent:t})}},t.exports=c},{"../../util/browser":245,"../../util/dom":252,"../../util/util":266,"../../util/window":247}],238:[function(e,t,n){"use strict";var r=e("../../util/dom"),i=e("../../util/util"),o=e("../../util/window"),a=i.bezier(0,0,.15,1),s=function(e){this._map=e,this._el=e.getCanvasContainer(),i.bindAll(["_onStart","_onMove","_onEnd"],this)};s.prototype.isEnabled=function(){return!!this._enabled},s.prototype.enable=function(e){this.isEnabled()||(this._el.classList.add("mapboxgl-touch-zoom-rotate"),this._el.addEventListener("touchstart",this._onStart,!1),this._enabled=!0,this._aroundCenter=e&&"center"===e.around)},s.prototype.disable=function(){this.isEnabled()&&(this._el.classList.remove("mapboxgl-touch-zoom-rotate"),this._el.removeEventListener("touchstart",this._onStart),this._enabled=!1)},s.prototype.disableRotation=function(){this._rotationDisabled=!0},s.prototype.enableRotation=function(){this._rotationDisabled=!1},s.prototype._onStart=function(e){if(2===e.touches.length){var t=r.mousePos(this._el,e.touches[0]),n=r.mousePos(this._el,e.touches[1]);this._startVec=t.sub(n),this._startScale=this._map.transform.scale,this._startBearing=this._map.transform.bearing,this._gestureIntent=void 0,this._inertia=[],o.document.addEventListener("touchmove",this._onMove,!1),o.document.addEventListener("touchend",this._onEnd,!1)}},s.prototype._onMove=function(e){if(2===e.touches.length){var t=r.mousePos(this._el,e.touches[0]),n=r.mousePos(this._el,e.touches[1]),i=t.add(n).div(2),o=t.sub(n),a=o.mag()/this._startVec.mag(),s=this._rotationDisabled?0:180*o.angleWith(this._startVec)/Math.PI,u=this._map;if(this._gestureIntent){var l={duration:0,around:u.unproject(i)};"rotate"===this._gestureIntent&&(l.bearing=this._startBearing+s),"zoom"!==this._gestureIntent&&"rotate"!==this._gestureIntent||(l.zoom=u.transform.scaleZoom(this._startScale*a)),u.stop(),this._drainInertiaBuffer(),this._inertia.push([Date.now(),a,i]),u.easeTo(l,{originalEvent:e})}else{var c=Math.abs(1-a)>.15;Math.abs(s)>10?this._gestureIntent="rotate":c&&(this._gestureIntent="zoom"),this._gestureIntent&&(this._startVec=o,this._startScale=u.transform.scale,this._startBearing=u.transform.bearing)}e.preventDefault()}},s.prototype._onEnd=function(e){o.document.removeEventListener("touchmove",this._onMove),o.document.removeEventListener("touchend",this._onEnd),this._drainInertiaBuffer();var t=this._inertia,n=this._map;if(t.length<2)return void n.snapToNorth({},{originalEvent:e});var r=t[t.length-1],i=t[0],s=n.transform.scaleZoom(this._startScale*r[1]),u=n.transform.scaleZoom(this._startScale*i[1]),l=s-u,c=(r[0]-i[0])/1e3,f=r[2];if(0===c||s===u)return void n.snapToNorth({},{originalEvent:e});var h=.15*l/c;Math.abs(h)>2.5&&(h=h>0?2.5:-2.5);var p=1e3*Math.abs(h/(12*.15)),d=s+h*p/2e3;d<0&&(d=0),n.easeTo({zoom:d,duration:p,easing:a,around:this._aroundCenter?n.getCenter():n.unproject(f)},{originalEvent:e})},s.prototype._drainInertiaBuffer=function(){for(var e=this._inertia,t=Date.now();e.length>2&&t-e[0][0]>160;)e.shift()},t.exports=s},{"../../util/dom":252,"../../util/util":266,"../../util/window":247}],239:[function(e,t,n){"use strict";var r=e("../util/util"),i=e("../util/window"),o=e("../util/throttle"),a=function(){r.bindAll(["_onHashChange","_updateHash"],this),this._updateHash=o(this._updateHashUnthrottled.bind(this),300)};a.prototype.addTo=function(e){return this._map=e,i.addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this},a.prototype.remove=function(){return i.removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),delete this._map,this},a.prototype.getHashString=function(e){var t=this._map.getCenter(),n=Math.round(100*this._map.getZoom())/100,r=Math.max(0,Math.ceil(Math.log(n)/Math.LN2)),i=Math.round(t.lng*Math.pow(10,r))/Math.pow(10,r),o=Math.round(t.lat*Math.pow(10,r))/Math.pow(10,r),a=this._map.getBearing(),s=this._map.getPitch(),u="";return u+=e?"#/"+i+"/"+o+"/"+n:"#"+n+"/"+o+"/"+i,(a||s)&&(u+="/"+Math.round(10*a)/10),s&&(u+="/"+Math.round(s)),u},a.prototype._onHashChange=function(){var e=i.location.hash.replace("#","").split("/");return e.length>=3&&(this._map.jumpTo({center:[+e[2],+e[1]],zoom:+e[0],bearing:+(e[3]||0),pitch:+(e[4]||0)}),!0)},a.prototype._updateHashUnthrottled=function(){var e=this.getHashString();i.history.replaceState("","",e)},t.exports=a},{"../util/throttle":264,"../util/util":266,"../util/window":247}],240:[function(e,t,n){"use strict";function r(e){e.parentNode&&e.parentNode.removeChild(e)}var i=e("../util/util"),o=e("../util/browser"),a=e("../util/window"),s=e("../util/window"),u=s.HTMLImageElement,l=s.HTMLElement,c=e("../util/dom"),f=e("../util/ajax"),h=e("../style/style"),p=e("../render/painter"),d=e("../geo/transform"),v=e("./hash"),g=e("./bind_handlers"),y=e("./camera"),m=e("../geo/lng_lat"),_=e("../geo/lng_lat_bounds"),b=e("@mapbox/point-geometry"),E=e("./control/attribution_control"),x=e("./control/logo_control"),w=e("mapbox-gl-supported");e("./events");var T={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:0,maxZoom:22,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,bearingSnap:7,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,transformRequest:null,collisionFadeDuration:300},S=function(e){function t(t){var n=this;if(t=i.extend({},T,t),null!=t.minZoom&&null!=t.maxZoom&&t.minZoom>t.maxZoom)throw new Error("maxZoom must be greater than minZoom");var r=new d(t.minZoom,t.maxZoom,t.renderWorldCopies);e.call(this,r,t),this._interactive=t.interactive,this._maxTileCacheSize=t.maxTileCacheSize,this._failIfMajorPerformanceCaveat=t.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=t.preserveDrawingBuffer,this._trackResize=t.trackResize,this._bearingSnap=t.bearingSnap,this._refreshExpiredTiles=t.refreshExpiredTiles,this._collisionFadeDuration=t.collisionFadeDuration;var o=t.transformRequest;if(this._transformRequest=o?function(e,t){return o(e,t)||{url:e}}:function(e){return{url:e}},"string"==typeof t.container){var s=a.document.getElementById(t.container);if(!s)throw new Error("Container '"+t.container+"' not found.");this._container=s}else{if(!(t.container instanceof l))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=t.container}t.maxBounds&&this.setMaxBounds(t.maxBounds),i.bindAll(["_onWindowOnline","_onWindowResize","_contextLost","_contextRestored","_update","_render","_onData","_onDataLoading"],this),this._setupContainer(),this._setupPainter(),this.on("move",this._update.bind(this,!1)),this.on("zoom",this._update.bind(this,!0)),this.on("move",function(){n._rerender()}),void 0!==a&&(a.addEventListener("online",this._onWindowOnline,!1),a.addEventListener("resize",this._onWindowResize,!1)),g(this,t),this._hash=t.hash&&(new v).addTo(this),this._hash&&this._hash._onHashChange()||this.jumpTo({center:t.center,zoom:t.zoom,bearing:t.bearing,pitch:t.pitch}),this.resize(),t.style&&this.setStyle(t.style,{localIdeographFontFamily:t.localIdeographFontFamily}),t.attributionControl&&this.addControl(new E),this.addControl(new x,t.logoPosition),this.on("style.load",function(){this.transform.unmodified&&this.jumpTo(this.style.stylesheet),this.style.update({transition:!1})}),this.on("data",this._onData),this.on("dataloading",this._onDataLoading)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={showTileBoundaries:{},showCollisionBoxes:{},showOverdrawInspector:{},repaint:{},vertices:{}};return t.prototype.addControl=function(e,t){void 0===t&&e.getDefaultPosition&&(t=e.getDefaultPosition()),void 0===t&&(t="top-right");var n=e.onAdd(this),r=this._controlPositions[t];return-1!==t.indexOf("bottom")?r.insertBefore(n,r.firstChild):r.appendChild(n),this},t.prototype.removeControl=function(e){return e.onRemove(this),this},t.prototype.resize=function(){var e=this._containerDimensions(),t=e[0],n=e[1];return this._resizeCanvas(t,n),this.transform.resize(t,n),this.painter.resize(t,n),this.fire("movestart").fire("move").fire("resize").fire("moveend")},t.prototype.getBounds=function(){var e=new _(this.transform.pointLocation(new b(0,this.transform.height)),this.transform.pointLocation(new b(this.transform.width,0)));return(this.transform.angle||this.transform.pitch)&&(e.extend(this.transform.pointLocation(new b(this.transform.size.x,0))),e.extend(this.transform.pointLocation(new b(0,this.transform.size.y)))),e},t.prototype.getMaxBounds=function(){return this.transform.latRange&&2===this.transform.latRange.length&&this.transform.lngRange&&2===this.transform.lngRange.length?new _([this.transform.lngRange[0],this.transform.latRange[0]],[this.transform.lngRange[1],this.transform.latRange[1]]):null},t.prototype.setMaxBounds=function(e){if(e){var t=_.convert(e);this.transform.lngRange=[t.getWest(),t.getEast()],this.transform.latRange=[t.getSouth(),t.getNorth()],this.transform._constrain(),this._update()}else null!==e&&void 0!==e||(this.transform.lngRange=null,this.transform.latRange=null,this._update());return this},t.prototype.setMinZoom=function(e){if((e=null===e||void 0===e?0:e)>=0&&e<=this.transform.maxZoom)return this.transform.minZoom=e,this._update(),this.getZoom()<e&&this.setZoom(e),this;throw new Error("minZoom must be between 0 and the current maxZoom, inclusive")},t.prototype.getMinZoom=function(){return this.transform.minZoom},t.prototype.setMaxZoom=function(e){if((e=null===e||void 0===e?22:e)>=this.transform.minZoom)return this.transform.maxZoom=e,this._update(),this.getZoom()>e&&this.setZoom(e),this;throw new Error("maxZoom must be greater than the current minZoom")},t.prototype.getMaxZoom=function(){return this.transform.maxZoom},t.prototype.project=function(e){return this.transform.locationPoint(m.convert(e))},t.prototype.unproject=function(e){return this.transform.pointLocation(b.convert(e))},t.prototype.on=function(t,n,r){var o=this;if(void 0===r)return e.prototype.on.call(this,t,n);var a=function(){if("mouseenter"===t||"mouseover"===t){var e=!1;return{layer:n,listener:r,delegates:{mousemove:function(a){var s=o.getLayer(n)?o.queryRenderedFeatures(a.point,{layers:[n]}):[];s.length?e||(e=!0,r.call(o,i.extend({features:s},a,{type:t}))):e=!1},mouseout:function(){e=!1}}}}if("mouseleave"===t||"mouseout"===t){var a=!1;return{layer:n,listener:r,delegates:{mousemove:function(e){(o.getLayer(n)?o.queryRenderedFeatures(e.point,{layers:[n]}):[]).length?a=!0:a&&(a=!1,r.call(o,i.extend({},e,{type:t})))},mouseout:function(e){a&&(a=!1,r.call(o,i.extend({},e,{type:t})))}}}}var s=function(e){var t=o.getLayer(n)?o.queryRenderedFeatures(e.point,{layers:[n]}):[];t.length&&r.call(o,i.extend({features:t},e))};return{layer:n,listener:r,delegates:(u={},u[t]=s,u)};var u}();this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[t]=this._delegatedListeners[t]||[],this._delegatedListeners[t].push(a);for(var s in a.delegates)o.on(s,a.delegates[s]);return this},t.prototype.off=function(t,n,r){var i=this;if(void 0===r)return e.prototype.off.call(this,t,n);if(this._delegatedListeners&&this._delegatedListeners[t])for(var o=this._delegatedListeners[t],a=0;a<o.length;a++){var s=o[a];if(s.layer===n&&s.listener===r){for(var u in s.delegates)i.off(u,s.delegates[u]);return o.splice(a,1),i}}return this},t.prototype.queryRenderedFeatures=function(e,t){return 2===arguments.length?(e=arguments[0],t=arguments[1]):1===arguments.length&&function(e){return e instanceof b||Array.isArray(e)}(arguments[0])?(e=arguments[0],t={}):1===arguments.length?(e=void 0,t=arguments[0]):(e=void 0,t={}),this.style?this.style.queryRenderedFeatures(this._makeQueryGeometry(e),t,this.transform.zoom,this.transform.angle):[]},t.prototype._makeQueryGeometry=function(e){var t=this;void 0===e&&(e=[b.convert([0,0]),b.convert([this.transform.width,this.transform.height])]);var n;if(e instanceof b||"number"==typeof e[0])n=[b.convert(e)];else{var r=[b.convert(e[0]),b.convert(e[1])];n=[r[0],new b(r[1].x,r[0].y),r[1],new b(r[0].x,r[1].y),r[0]]}return n=n.map(function(e){return t.transform.pointCoordinate(e)})},t.prototype.querySourceFeatures=function(e,t){return this.style.querySourceFeatures(e,t)},t.prototype.setStyle=function(e,t){if((!t||!1!==t.diff&&!t.localIdeographFontFamily)&&this.style&&e&&"object"==typeof e)try{return this.style.setState(e)&&this._update(!0),this}catch(e){i.warnOnce("Unable to perform style diff: "+(e.message||e.error||e)+".  Rebuilding the style from scratch.")}return this.style&&(this.style.setEventedParent(null),this.style._remove()),e?(this.style=new h(this,t||{}),this.style.setEventedParent(this,{style:this.style}),"string"==typeof e?this.style.loadURL(e):this.style.loadJSON(e),this):(delete this.style,this)},t.prototype.getStyle=function(){if(this.style)return this.style.serialize()},t.prototype.isStyleLoaded=function(){return this.style?this.style.loaded():i.warnOnce("There is no style added to the map.")},t.prototype.addSource=function(e,t){return this.style.addSource(e,t),this._update(!0),this},t.prototype.isSourceLoaded=function(e){var t=this.style&&this.style.sourceCaches[e];return void 0===t?void this.fire("error",{error:new Error("There is no source with ID '"+e+"'")}):t.loaded()},t.prototype.areTilesLoaded=function(){var e=this.style&&this.style.sourceCaches;for(var t in e){var n=e[t],r=n._tiles;for(var i in r){var o=r[i];if("loaded"!==o.state&&"errored"!==o.state)return!1}}return!0},t.prototype.addSourceType=function(e,t,n){return this.style.addSourceType(e,t,n)},t.prototype.removeSource=function(e){return this.style.removeSource(e),this._update(!0),this},t.prototype.getSource=function(e){return this.style.getSource(e)},t.prototype.addImage=function(e,t,n){void 0===n&&(n={});var r=n.pixelRatio;void 0===r&&(r=1);var i=n.sdf;if(void 0===i&&(i=!1),t instanceof u)t=o.getImageData(t);else if(void 0===t.width||void 0===t.height)return this.fire("error",{error:new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")});this.style.addImage(e,{data:t,pixelRatio:r,sdf:i})},t.prototype.removeImage=function(e){this.style.removeImage(e)},t.prototype.loadImage=function(e,t){f.getImage(this._transformRequest(e,f.ResourceType.Image),t)},t.prototype.addLayer=function(e,t){return this.style.addLayer(e,t),this._update(!0),this},t.prototype.moveLayer=function(e,t){return this.style.moveLayer(e,t),this._update(!0),this},t.prototype.removeLayer=function(e){return this.style.removeLayer(e),this._update(!0),this},t.prototype.getLayer=function(e){return this.style.getLayer(e)},t.prototype.setFilter=function(e,t){return this.style.setFilter(e,t),this._update(!0),this},t.prototype.setLayerZoomRange=function(e,t,n){return this.style.setLayerZoomRange(e,t,n),this._update(!0),this},t.prototype.getFilter=function(e){return this.style.getFilter(e)},t.prototype.setPaintProperty=function(e,t,n){return this.style.setPaintProperty(e,t,n),this._update(!0),this},t.prototype.getPaintProperty=function(e,t){return this.style.getPaintProperty(e,t)},t.prototype.setLayoutProperty=function(e,t,n){return this.style.setLayoutProperty(e,t,n),this._update(!0),this},t.prototype.getLayoutProperty=function(e,t){return this.style.getLayoutProperty(e,t)},t.prototype.setLight=function(e){return this.style.setLight(e),this._update(!0),this},t.prototype.getLight=function(){return this.style.getLight()},t.prototype.getContainer=function(){return this._container},t.prototype.getCanvasContainer=function(){return this._canvasContainer},t.prototype.getCanvas=function(){return this._canvas},t.prototype._containerDimensions=function(){var e=0,t=0;return this._container&&(e=this._container.offsetWidth||400,t=this._container.offsetHeight||300),[e,t]},t.prototype._setupContainer=function(){var e=this._container;e.classList.add("mapboxgl-map"),(this._missingCSSContainer=c.create("div","mapboxgl-missing-css",e)).innerHTML="Missing Mapbox GL JS CSS";var t=this._canvasContainer=c.create("div","mapboxgl-canvas-container",e);this._interactive&&t.classList.add("mapboxgl-interactive"),this._canvas=c.create("canvas","mapboxgl-canvas",t),this._canvas.style.position="absolute",this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map");var n=this._containerDimensions();this._resizeCanvas(n[0],n[1]);var r=this._controlContainer=c.create("div","mapboxgl-control-container",e),i=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(function(e){i[e]=c.create("div","mapboxgl-ctrl-"+e,r)})},t.prototype._resizeCanvas=function(e,t){var n=a.devicePixelRatio||1;this._canvas.width=n*e,this._canvas.height=n*t,this._canvas.style.width=e+"px",this._canvas.style.height=t+"px"},t.prototype._setupPainter=function(){var e=i.extend({failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer},w.webGLContextAttributes),t=this._canvas.getContext("webgl",e)||this._canvas.getContext("experimental-webgl",e);if(!t)return void this.fire("error",{error:new Error("Failed to initialize WebGL")});this.painter=new p(t,this.transform)},t.prototype._contextLost=function(e){e.preventDefault(),this._frameId&&(o.cancelFrame(this._frameId),this._frameId=null),this.fire("webglcontextlost",{originalEvent:e})},t.prototype._contextRestored=function(e){this._setupPainter(),this.resize(),this._update(),this.fire("webglcontextrestored",{originalEvent:e})},t.prototype.loaded=function(){return!(this._styleDirty||this._sourcesDirty||this._placementDirty)&&!(!this.style||!this.style.loaded())},t.prototype._update=function(e){return this.style?(this._styleDirty=this._styleDirty||e,this._sourcesDirty=!0,this._rerender(),this):this},t.prototype._render=function(){return this.style&&this._styleDirty&&(this._styleDirty=!1,this.style.update(),this.style._recalculate(this.transform.zoom)),this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._collisionFadeDuration),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.rotating,zooming:this.zooming,collisionFadeDuration:this._collisionFadeDuration}),this.fire("render"),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire("load")),this._frameId=null,this.style&&this.style.hasTransitions()&&(this._styleDirty=!0),(this._sourcesDirty||this._repaint||this._styleDirty||this._placementDirty)&&this._rerender(),this},t.prototype.remove=function(){this._hash&&this._hash.remove(),o.cancelFrame(this._frameId),this._frameId=null,this.setStyle(null),void 0!==a&&(a.removeEventListener("resize",this._onWindowResize,!1),a.removeEventListener("online",this._onWindowOnline,!1));var e=this.painter.gl.getExtension("WEBGL_lose_context");e&&e.loseContext(),r(this._canvasContainer),r(this._controlContainer),r(this._missingCSSContainer),this._container.classList.remove("mapboxgl-map"),this.fire("remove")},t.prototype._rerender=function(){this.style&&!this._frameId&&(this._frameId=o.frame(this._render))},t.prototype._onWindowOnline=function(){this._update()},t.prototype._onWindowResize=function(){this._trackResize&&this.stop().resize()._update()},n.showTileBoundaries.get=function(){return!!this._showTileBoundaries},n.showTileBoundaries.set=function(e){this._showTileBoundaries!==e&&(this._showTileBoundaries=e,this._update())},n.showCollisionBoxes.get=function(){return!!this._showCollisionBoxes},n.showCollisionBoxes.set=function(e){this._showCollisionBoxes!==e&&(this._showCollisionBoxes=e,e?this.style._generateCollisionBoxes():this._update())},n.showOverdrawInspector.get=function(){return!!this._showOverdrawInspector},n.showOverdrawInspector.set=function(e){this._showOverdrawInspector!==e&&(this._showOverdrawInspector=e,this._update())},n.repaint.get=function(){return!!this._repaint},n.repaint.set=function(e){this._repaint=e,this._update()},n.vertices.get=function(){return!!this._vertices},n.vertices.set=function(e){this._vertices=e,this._update()},t.prototype._onData=function(e){this._update("style"===e.dataType),this.fire(e.dataType+"data",e)},t.prototype._onDataLoading=function(e){this.fire(e.dataType+"dataloading",e)},Object.defineProperties(t.prototype,n),t}(y);t.exports=S},{"../geo/lng_lat":68,"../geo/lng_lat_bounds":69,"../geo/transform":70,"../render/painter":89,"../style/style":185,"../util/ajax":244,"../util/browser":245,"../util/dom":252,"../util/util":266,"../util/window":247,"./bind_handlers":223,"./camera":224,"./control/attribution_control":225,"./control/logo_control":228,"./events":231,"./hash":239,"@mapbox/point-geometry":2,"mapbox-gl-supported":37}],241:[function(e,t,n){"use strict";var r=e("../util/dom"),i=e("../geo/lng_lat"),o=e("@mapbox/point-geometry"),a=e("../util/smart_wrap"),s=e("../util/util"),u=s.bindAll,l=function(e,t){if(this._offset=o.convert(t&&t.offset||[0,0]),u(["_update","_onMapClick"],this),!e){e=r.create("div");var n=r.createNS("http://www.w3.org/2000/svg","svg");n.setAttributeNS(null,"height","41px"),n.setAttributeNS(null,"width","27px"),n.setAttributeNS(null,"viewBox","0 0 27 41");var i=r.createNS("http://www.w3.org/2000/svg","g");i.setAttributeNS(null,"stroke","none"),i.setAttributeNS(null,"stroke-width","1"),i.setAttributeNS(null,"fill","none"),i.setAttributeNS(null,"fill-rule","evenodd");var a=r.createNS("http://www.w3.org/2000/svg","g");a.setAttributeNS(null,"fill-rule","nonzero");var s=r.createNS("http://www.w3.org/2000/svg","g");s.setAttributeNS(null,"transform","translate(3.0, 29.0)"),s.setAttributeNS(null,"fill","#000000");for(var l=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}],c=0,f=l;c<f.length;c+=1){var h=f[c],p=r.createNS("http://www.w3.org/2000/svg","ellipse");p.setAttributeNS(null,"opacity","0.04"),p.setAttributeNS(null,"cx","10.5"),p.setAttributeNS(null,"cy","5.80029008"),p.setAttributeNS(null,"rx",h.rx),p.setAttributeNS(null,"ry",h.ry),s.appendChild(p)}var d=r.createNS("http://www.w3.org/2000/svg","g");d.setAttributeNS(null,"fill","#3FB1CE");var v=r.createNS("http://www.w3.org/2000/svg","path");v.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),d.appendChild(v);var g=r.createNS("http://www.w3.org/2000/svg","g");g.setAttributeNS(null,"opacity","0.25"),g.setAttributeNS(null,"fill","#000000");var y=r.createNS("http://www.w3.org/2000/svg","path");y.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),g.appendChild(y);var m=r.createNS("http://www.w3.org/2000/svg","g");m.setAttributeNS(null,"transform","translate(6.0, 7.0)"),m.setAttributeNS(null,"fill","#FFFFFF");var _=r.createNS("http://www.w3.org/2000/svg","g");_.setAttributeNS(null,"transform","translate(8.0, 8.0)");var b=r.createNS("http://www.w3.org/2000/svg","circle");b.setAttributeNS(null,"fill","#000000"),b.setAttributeNS(null,"opacity","0.25"),b.setAttributeNS(null,"cx","5.5"),b.setAttributeNS(null,"cy","5.5"),b.setAttributeNS(null,"r","5.4999962");var E=r.createNS("http://www.w3.org/2000/svg","circle");E.setAttributeNS(null,"fill","#FFFFFF"),E.setAttributeNS(null,"cx","5.5"),E.setAttributeNS(null,"cy","5.5"),E.setAttributeNS(null,"r","5.4999962"),_.appendChild(b),_.appendChild(E),a.appendChild(s),a.appendChild(d),a.appendChild(g),a.appendChild(m),a.appendChild(_),n.appendChild(a),e.appendChild(n)}e.classList.add("mapboxgl-marker"),this._element=e,this._popup=null};l.prototype.addTo=function(e){return this.remove(),this._map=e,e.getCanvasContainer().appendChild(this._element),e.on("move",this._update),e.on("moveend",this._update),this._update(),this._map.on("click",this._onMapClick),this},l.prototype.remove=function(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),delete this._map),r.remove(this._element),this._popup&&this._popup.remove(),this},l.prototype.getLngLat=function(){return this._lngLat},l.prototype.setLngLat=function(e){return this._lngLat=i.convert(e),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this},l.prototype.getElement=function(){return this._element},l.prototype.setPopup=function(e){return this._popup&&(this._popup.remove(),this._popup=null),e&&("offset"in e.options||(e.options.offset=this._offset),this._popup=e,this._popup.setLngLat(this._lngLat)),this},l.prototype._onMapClick=function(e){var t=e.originalEvent.target,n=this._element;this._popup&&(t===n||n.contains(t))&&this.togglePopup()},l.prototype.getPopup=function(){return this._popup},l.prototype.togglePopup=function(){var e=this._popup;return e?(e.isOpen()?e.remove():e.addTo(this._map),this):this},l.prototype._update=function(e){this._map&&(this._map.transform.renderWorldCopies&&(this._lngLat=a(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset),e&&"moveend"!==e.type||(this._pos=this._pos.round()),r.setTransform(this._element,"translate(-50%, -50%) translate("+this._pos.x+"px, "+this._pos.y+"px)"))},t.exports=l},{"../geo/lng_lat":68,"../util/dom":252,"../util/smart_wrap":262,"../util/util":266,"@mapbox/point-geometry":2}],242:[function(e,t,n){"use strict";function r(e){if(e){if("number"==typeof e){var t=Math.round(Math.sqrt(.5*Math.pow(e,2)));return{top:new u(0,e),"top-left":new u(t,t),"top-right":new u(-t,t),bottom:new u(0,-e),"bottom-left":new u(t,-t),"bottom-right":new u(-t,-t),left:new u(e,0),right:new u(-e,0)}}if(e instanceof u||Array.isArray(e)){var n=u.convert(e);return{top:n,"top-left":n,"top-right":n,bottom:n,"bottom-left":n,"bottom-right":n,left:n,right:n}}return{top:u.convert(e.top||[0,0]),"top-left":u.convert(e["top-left"]||[0,0]),"top-right":u.convert(e["top-right"]||[0,0]),bottom:u.convert(e.bottom||[0,0]),"bottom-left":u.convert(e["bottom-left"]||[0,0]),"bottom-right":u.convert(e["bottom-right"]||[0,0]),left:u.convert(e.left||[0,0]),right:u.convert(e.right||[0,0])}}return r(new u(0,0))}var i=e("../util/util"),o=e("../util/evented"),a=e("../util/dom"),s=e("../geo/lng_lat"),u=e("@mapbox/point-geometry"),l=e("../util/window"),c=e("../util/smart_wrap"),f={closeButton:!0,closeOnClick:!0},h=function(e){function t(t){e.call(this),this.options=i.extend(Object.create(f),t),i.bindAll(["_update","_onClickClose"],this)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.addTo=function(e){return this._map=e,this._map.on("move",this._update),this.options.closeOnClick&&this._map.on("click",this._onClickClose),this._update(),this},t.prototype.isOpen=function(){return!!this._map},t.prototype.remove=function(){return this._content&&a.remove(this._content),this._container&&(a.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("click",this._onClickClose),delete this._map),this.fire("close"),this},t.prototype.getLngLat=function(){return this._lngLat},t.prototype.setLngLat=function(e){return this._lngLat=s.convert(e),this._pos=null,this._update(),this},t.prototype.setText=function(e){return this.setDOMContent(l.document.createTextNode(e))},t.prototype.setHTML=function(e){var t,n=l.document.createDocumentFragment(),r=l.document.createElement("body");for(r.innerHTML=e;t=r.firstChild;)n.appendChild(t);return this.setDOMContent(n)},t.prototype.setDOMContent=function(e){return this._createContent(),this._content.appendChild(e),this._update(),this},t.prototype._createContent=function(){this._content&&a.remove(this._content),this._content=a.create("div","mapboxgl-popup-content",this._container),this.options.closeButton&&(this._closeButton=a.create("button","mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClickClose))},t.prototype._update=function(){if(this._map&&this._lngLat&&this._content){this._container||(this._container=a.create("div","mapboxgl-popup",this._map.getContainer()),this._tip=a.create("div","mapboxgl-popup-tip",this._container),this._container.appendChild(this._content)),this._map.transform.renderWorldCopies&&(this._lngLat=c(this._lngLat,this._pos,this._map.transform));var e=this._pos=this._map.project(this._lngLat),t=this.options.anchor,n=r(this.options.offset);if(!t){var i=this._container.offsetWidth,o=this._container.offsetHeight;t=e.y+n.bottom.y<o?["top"]:e.y>this._map.transform.height-o?["bottom"]:[],e.x<i/2?t.push("left"):e.x>this._map.transform.width-i/2&&t.push("right"),t=0===t.length?"bottom":t.join("-")}var s=e.add(n[t]).round(),u={top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"},l=this._container.classList;for(var f in u)l.remove("mapboxgl-popup-anchor-"+f);l.add("mapboxgl-popup-anchor-"+t),a.setTransform(this._container,u[t]+" translate("+s.x+"px,"+s.y+"px)")}},t.prototype._onClickClose=function(){this.remove()},t}(o);t.exports=h},{"../geo/lng_lat":68,"../util/dom":252,"../util/evented":253,"../util/smart_wrap":262,"../util/util":266,"../util/window":247,"@mapbox/point-geometry":2}],243:[function(e,t,n){"use strict";var r=e("./util"),i=function(e,t,n){this.target=e,this.parent=t,this.mapId=n,this.callbacks={},this.callbackID=0,r.bindAll(["receive"],this),this.target.addEventListener("message",this.receive,!1)};i.prototype.send=function(e,t,n,r,i){var o=n?this.mapId+":"+this.callbackID++:null;n&&(this.callbacks[o]=n),this.target.postMessage({targetMapId:i,sourceMapId:this.mapId,type:e,id:String(o),data:t},r)},i.prototype.receive=function(e){var t,n=this,r=e.data,i=r.id;if(!r.targetMapId||this.mapId===r.targetMapId){var o=function(e,t,r){n.target.postMessage({sourceMapId:n.mapId,type:"<response>",id:String(i),error:e?String(e):null,data:t},r)};if("<response>"===r.type)t=this.callbacks[r.id],delete this.callbacks[r.id],t&&r.error?t(new Error(r.error)):t&&t(null,r.data);else if(void 0!==r.id&&this.parent[r.type])this.parent[r.type](r.sourceMapId,r.data,o);else if(void 0!==r.id&&this.parent.getWorkerSource){var a=r.type.split("."),s=this.parent.getWorkerSource(r.sourceMapId,a[0]);s[a[1]](r.data,o)}else this.parent[r.type](r.data)}},i.prototype.remove=function(){this.target.removeEventListener("message",this.receive,!1)},t.exports=i},{"./util":266}],244:[function(e,t,n){"use strict";function r(e){var t=new o.XMLHttpRequest;t.open("GET",e.url,!0);for(var n in e.headers)t.setRequestHeader(n,e.headers[n]);return t.withCredentials="include"===e.credentials,t}function i(e){var t=o.document.createElement("a");return t.href=e,t.protocol===o.document.location.protocol&&t.host===o.document.location.host}var o=e("./window"),a={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};n.ResourceType=a,"function"==typeof Object.freeze&&Object.freeze(a);var s=function(e){function t(t,n){e.call(this,t),this.status=n}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t}(Error);n.getJSON=function(e,t){var n=r(e);return n.setRequestHeader("Accept","application/json"),n.onerror=function(){t(new Error(n.statusText))},n.onload=function(){if(n.status>=200&&n.status<300&&n.response){var e;try{e=JSON.parse(n.response)}catch(e){return t(e)}t(null,e)}else t(new s(n.statusText,n.status))},n.send(),n},n.getArrayBuffer=function(e,t){var n=r(e);return n.responseType="arraybuffer",n.onerror=function(){t(new Error(n.statusText))},n.onload=function(){var e=n.response;if(0===e.byteLength&&200===n.status)return t(new Error("http status 200 returned without content."));n.status>=200&&n.status<300&&n.response?t(null,{data:e,cacheControl:n.getResponseHeader("Cache-Control"),expires:n.getResponseHeader("Expires")}):t(new s(n.statusText,n.status))},n.send(),n};n.getImage=function(e,t){return n.getArrayBuffer(e,function(e,n){if(e)t(e);else if(n){var r=new o.Image,i=o.URL||o.webkitURL;r.onload=function(){t(null,r),i.revokeObjectURL(r.src)};var a=new o.Blob([new Uint8Array(n.data)],{type:"image/png"});r.cacheControl=n.cacheControl,r.expires=n.expires,r.src=n.data.byteLength?i.createObjectURL(a):"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII="}})},n.getVideo=function(e,t){var n=o.document.createElement("video");n.onloadstart=function(){t(null,n)};for(var r=0;r<e.length;r++){var a=o.document.createElement("source");i(e[r])||(n.crossOrigin="Anonymous"),a.src=e[r],n.appendChild(a)}return n}},{"./window":247}],245:[function(e,t,n){"use strict";var r=e("./window"),i=r.performance&&r.performance.now?r.performance.now.bind(r.performance):Date.now.bind(Date),o=r.requestAnimationFrame||r.mozRequestAnimationFrame||r.webkitRequestAnimationFrame||r.msRequestAnimationFrame,a=r.cancelAnimationFrame||r.mozCancelAnimationFrame||r.webkitCancelAnimationFrame||r.msCancelAnimationFrame;t.exports={now:i,frame:function(e){return o(e)},cancelFrame:function(e){return a(e)},timed:function(e,t,n){function r(){if(!a){var u=i();u>=s+t?e.call(n,1):(e.call(n,(u-s)/t),o(r))}}if(!t)return e.call(n,1),null;var a=!1,s=i();return o(r),function(){a=!0}},getImageData:function(e){var t=r.document.createElement("canvas"),n=t.getContext("2d");if(!n)throw new Error("failed to create canvas 2d context");return t.width=e.width,t.height=e.height,n.drawImage(e,0,0,e.width,e.height),n.getImageData(0,0,e.width,e.height)},hardwareConcurrency:r.navigator.hardwareConcurrency||4,get devicePixelRatio(){return r.devicePixelRatio},supportsWebp:!1};var s=r.document.createElement("img");s.onload=function(){t.exports.supportsWebp=!0},s.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="},{"./window":247}],246:[function(e,t,n){"use strict";var r=e("webworkify"),i=e("../window"),o=i.URL.createObjectURL(new r(e("../../source/worker"),{bare:!0}));t.exports=function(){return new i.Worker(o)}},{"../../source/worker":116,"../window":247,webworkify:48}],247:[function(e,t,n){"use strict";t.exports=self},{}],248:[function(e,t,n){"use strict";function r(e,t){return t.area-e.area}var i=e("quickselect"),o=e("./util").calculateSignedArea;t.exports=function(e,t){var n=e.length;if(n<=1)return[e];for(var a,s,u=[],l=0;l<n;l++){var c=o(e[l]);0!==c&&(e[l].area=Math.abs(c),void 0===s&&(s=c<0),s===c<0?(a&&u.push(a),a=[e[l]]):a.push(e[l]))}if(a&&u.push(a),t>1)for(var f=0;f<u.length;f++)u[f].length<=t||(i(u[f],t,1,u[f].length-1,r),u[f]=u[f].slice(0,t));return u}},{"./util":266,quickselect:40}],249:[function(e,t,n){"use strict";var r={API_URL:"https://api.mapbox.com",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null};t.exports=r},{}],250:[function(e,t,n){"use strict";var r=function(e){var t=this;this._stringToNumber={},this._numberToString=[];for(var n=0;n<e.length;n++){var r=e[n];t._stringToNumber[r]=n,t._numberToString[n]=r}};r.prototype.encode=function(e){return this._stringToNumber[e]},r.prototype.decode=function(e){return this._numberToString[e]},t.exports=r},{}],251:[function(e,t,n){"use strict";var r=e("./util"),i=e("./actor"),o=function(e,t){var n=this;this.workerPool=e,this.actors=[],this.currentActor=0,this.id=r.uniqueId();for(var o=this.workerPool.acquire(this.id),a=0;a<o.length;a++){var s=o[a],u=new i(s,t,n.id);u.name="Worker "+a,n.actors.push(u)}};o.prototype.broadcast=function(e,t,n){n=n||function(){},r.asyncAll(this.actors,function(n,r){n.send(e,t,r)},n)},o.prototype.send=function(e,t,n,r,i){return("number"!=typeof r||isNaN(r))&&(r=this.currentActor=(this.currentActor+1)%this.actors.length),this.actors[r].send(e,t,n,i),r},o.prototype.remove=function(){this.actors.forEach(function(e){e.remove()}),this.actors=[],this.workerPool.release(this.id)},t.exports=o},{"./actor":243,"./util":266}],252:[function(e,t,n){"use strict";function r(e){for(var t=0;t<e.length;t++)if(e[t]in s)return e[t];return e[0]}var i=e("@mapbox/point-geometry"),o=e("./window");n.create=function(e,t,n){var r=o.document.createElement(e);return t&&(r.className=t),n&&n.appendChild(r),r},n.createNS=function(e,t){return o.document.createElementNS(e,t)};var a,s=o.document.documentElement.style,u=r(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]);n.disableDrag=function(){u&&(a=s[u],s[u]="none")},n.enableDrag=function(){u&&(s[u]=a)};var l=r(["transform","WebkitTransform"]);n.setTransform=function(e,t){e.style[l]=t};var c=function(e){e.preventDefault(),e.stopPropagation(),o.removeEventListener("click",c,!0)};n.suppressClick=function(){o.addEventListener("click",c,!0),o.setTimeout(function(){o.removeEventListener("click",c,!0)},0)},n.mousePos=function(e,t){var n=e.getBoundingClientRect();return t=t.touches?t.touches[0]:t,new i(t.clientX-n.left-e.clientLeft,t.clientY-n.top-e.clientTop)},n.touchPos=function(e,t){for(var n=e.getBoundingClientRect(),r=[],o="touchend"===t.type?t.changedTouches:t.touches,a=0;a<o.length;a++)r.push(new i(o[a].clientX-n.left-e.clientLeft,o[a].clientY-n.top-e.clientTop));return r},n.remove=function(e){e.parentNode&&e.parentNode.removeChild(e)}},{"./window":247,"@mapbox/point-geometry":2}],253:[function(e,t,n){"use strict";function r(e,t,n){n[e]=n[e]||[],n[e].push(t)}function i(e,t,n){if(n&&n[e]){var r=n[e].indexOf(t);-1!==r&&n[e].splice(r,1)}}var o=e("./util"),a=function(){};a.prototype.on=function(e,t){return this._listeners=this._listeners||{},r(e,t,this._listeners),this},a.prototype.off=function(e,t){return i(e,t,this._listeners),i(e,t,this._oneTimeListeners),this},a.prototype.once=function(e,t){return this._oneTimeListeners=this._oneTimeListeners||{},r(e,t,this._oneTimeListeners),this},a.prototype.fire=function(e,t){var n=this;if(this.listens(e)){t=o.extend({},t,{type:e,target:this});for(var r=this._listeners&&this._listeners[e]?this._listeners[e].slice():[],a=0;a<r.length;a++)r[a].call(n,t);for(var s=this._oneTimeListeners&&this._oneTimeListeners[e]?this._oneTimeListeners[e].slice():[],u=0;u<s.length;u++)s[u].call(n,t),i(e,s[u],n._oneTimeListeners);this._eventedParent&&this._eventedParent.fire(e,o.extend({},t,"function"==typeof this._eventedParentData?this._eventedParentData():this._eventedParentData))}else o.endsWith(e,"error")&&console.error(t&&t.error||t||"Empty error event");return this},a.prototype.listens=function(e){return this._listeners&&this._listeners[e]&&this._listeners[e].length>0||this._oneTimeListeners&&this._oneTimeListeners[e]&&this._oneTimeListeners[e].length>0||this._eventedParent&&this._eventedParent.listens(e)},a.prototype.setEventedParent=function(e,t){return this._eventedParent=e,this._eventedParentData=t,this},t.exports=a},{"./util":266}],254:[function(e,t,n){"use strict";function r(e,t){return t.max-e.max}function i(e,t,n,r){this.p=new u(e,t),this.h=n,this.d=o(this.p,r),this.max=this.d+this.h*Math.SQRT2}function o(e,t){for(var n=!1,r=1/0,i=0;i<t.length;i++)for(var o=t[i],a=0,s=o.length,u=s-1;a<s;u=a++){var c=o[a],f=o[u];c.y>e.y!=f.y>e.y&&e.x<(f.x-c.x)*(e.y-c.y)/(f.y-c.y)+c.x&&(n=!n),r=Math.min(r,l(e,c,f))}return(n?1:-1)*Math.sqrt(r)}function a(e){for(var t=0,n=0,r=0,o=e[0],a=0,s=o.length,u=s-1;a<s;u=a++){var l=o[a],c=o[u],f=l.x*c.y-c.x*l.y;n+=(l.x+c.x)*f,r+=(l.y+c.y)*f,t+=3*f}return new i(n/t,r/t,0,e)}var s=e("tinyqueue"),u=e("@mapbox/point-geometry"),l=e("./intersection_tests").distToSegmentSquared;t.exports=function(e,t,n){void 0===t&&(t=1),void 0===n&&(n=!1);for(var o=1/0,l=1/0,c=-1/0,f=-1/0,h=e[0],p=0;p<h.length;p++){var d=h[p];(!p||d.x<o)&&(o=d.x),(!p||d.y<l)&&(l=d.y),(!p||d.x>c)&&(c=d.x),(!p||d.y>f)&&(f=d.y)}var v=c-o,g=f-l,y=Math.min(v,g),m=y/2,_=new s(null,r);if(0===y)return new u(o,l);for(var b=o;b<c;b+=y)for(var E=l;E<f;E+=y)_.push(new i(b+m,E+m,m,e));for(var x=a(e),w=_.length;_.length;){var T=_.pop();(T.d>x.d||!x.d)&&(x=T,n&&console.log("found best %d after %d probes",Math.round(1e4*T.d)/1e4,w)),T.max-x.d<=t||(m=T.h/2,_.push(new i(T.p.x-m,T.p.y-m,m,e)),_.push(new i(T.p.x+m,T.p.y-m,m,e)),_.push(new i(T.p.x-m,T.p.y+m,m,e)),_.push(new i(T.p.x+m,T.p.y+m,m,e)),w+=4)}return n&&(console.log("num probes: "+w),console.log("best distance: "+x.d)),x.p}},{"./intersection_tests":257,"@mapbox/point-geometry":2,tinyqueue:42}],255:[function(e,t,n){"use strict";var r,i=e("./worker_pool");t.exports=function(){return r||(r=new i),r}},{"./worker_pool":269}],256:[function(e,t,n){"use strict";function r(e,t,n){var r=e.width,i=e.height;if(n){if(n.length!==r*i*t)throw new RangeError("mismatched image size")}else n=new Uint8Array(r*i*t);return{width:r,height:i,data:n}}function i(e,t,n){var i=t.width,a=t.height;if(i===e.width&&a===e.height)return e;var s=r({width:i,height:a},n);o(e,s,{x:0,y:0},{x:0,y:0},{width:Math.min(e.width,i),height:Math.min(e.height,a)},n),e.width=i,e.height=a,e.data=s.data}function o(e,t,n,r,i,o){if(0===i.width||0===i.height)return t;if(i.width>e.width||i.height>e.height||n.x>e.width-i.width||n.y>e.height-i.height)throw new RangeError("out of range source coordinates for image copy");if(i.width>t.width||i.height>t.height||r.x>t.width-i.width||r.y>t.height-i.height)throw new RangeError("out of range destination coordinates for image copy");for(var a=e.data,s=t.data,u=0;u<i.height;u++)for(var l=((n.y+u)*e.width+n.x)*o,c=((r.y+u)*t.width+r.x)*o,f=0;f<i.width*o;f++)s[c+f]=a[l+f];return t}var a=function(){};a.create=function(e,t){return r(e,1,t)},a.resize=function(e,t){i(e,t,1)},a.copy=function(e,t,n,r,i){o(e,t,n,r,i,1)};var s=function(){};s.create=function(e,t){return r(e,4,t)},s.resize=function(e,t){i(e,t,4)},s.copy=function(e,t,n,r,i){o(e,t,n,r,i,4)},t.exports={AlphaImage:a,RGBAImage:s}},{}],257:[function(e,t,n){"use strict";function r(e,t){for(var n=0;n<e.length;n++)if(p(t,e[n]))return!0;for(var r=0;r<t.length;r++)if(p(e,t[r]))return!0;return!!u(e,t)}function i(e,t,n){for(var r=0;r<e.length;r++)for(var i=e[r],o=0;o<t.length;o++)for(var a=t[o],s=0;s<a.length;s++){var u=a[s];if(p(i,u))return!0;if(c(u,i,n))return!0}return!1}function o(e,t){if(1===e.length&&1===e[0].length)return h(t,e[0][0]);for(var n=0;n<t.length;n++)for(var r=t[n],i=0;i<r.length;i++)if(h(e,r[i]))return!0;for(var o=0;o<e.length;o++){for(var a=e[o],s=0;s<a.length;s++)if(h(t,a[s]))return!0;for(var l=0;l<t.length;l++)if(u(a,t[l]))return!0}return!1}function a(e,t,n){for(var r=0;r<t.length;r++)for(var i=t[r],o=0;o<e.length;o++){var a=e[o];if(a.length>=3)for(var u=0;u<i.length;u++)if(p(a,i[u]))return!0;if(s(a,i,n))return!0}return!1}function s(e,t,n){if(e.length>1){if(u(e,t))return!0;for(var r=0;r<t.length;r++)if(c(t[r],e,n))return!0}for(var i=0;i<e.length;i++)if(c(e[i],t,n))return!0;return!1}function u(e,t){if(0===e.length||0===t.length)return!1;for(var n=0;n<e.length-1;n++)for(var r=e[n],i=e[n+1],o=0;o<t.length-1;o++){var a=t[o],s=t[o+1];if(l(r,i,a,s))return!0}return!1}function l(e,t,n,r){return v(e,n,r)!==v(t,n,r)&&v(e,t,n)!==v(e,t,r)}function c(e,t,n){var r=n*n;if(1===t.length)return e.distSqr(t[0])<r;for(var i=1;i<t.length;i++)if(f(e,t[i-1],t[i])<r)return!0;return!1}function f(e,t,n){var r=t.distSqr(n);if(0===r)return e.distSqr(t);var i=((e.x-t.x)*(n.x-t.x)+(e.y-t.y)*(n.y-t.y))/r;return i<0?e.distSqr(t):i>1?e.distSqr(n):e.distSqr(n.sub(t)._mult(i)._add(t))}function h(e,t){for(var n,r,i,o=!1,a=0;a<e.length;a++){n=e[a];for(var s=0,u=n.length-1;s<n.length;u=s++)r=n[s],i=n[u],r.y>t.y!=i.y>t.y&&t.x<(i.x-r.x)*(t.y-r.y)/(i.y-r.y)+r.x&&(o=!o)}return o}function p(e,t){for(var n=!1,r=0,i=e.length-1;r<e.length;i=r++){var o=e[r],a=e[i];o.y>t.y!=a.y>t.y&&t.x<(a.x-o.x)*(t.y-o.y)/(a.y-o.y)+o.x&&(n=!n)}return n}var d=e("./util"),v=d.isCounterClockwise;t.exports={multiPolygonIntersectsBufferedMultiPoint:i,multiPolygonIntersectsMultiPolygon:o,multiPolygonIntersectsBufferedMultiLine:a,polygonIntersectsPolygon:r,distToSegmentSquared:f}},{"./util":266}],258:[function(e,t,n){"use strict";var r={"Latin-1 Supplement":function(e){return e>=128&&e<=255},Arabic:function(e){return e>=1536&&e<=1791},"Arabic Supplement":function(e){return e>=1872&&e<=1919},"Arabic Extended-A":function(e){return e>=2208&&e<=2303},"Hangul Jamo":function(e){return e>=4352&&e<=4607},"Unified Canadian Aboriginal Syllabics":function(e){return e>=5120&&e<=5759},"Unified Canadian Aboriginal Syllabics Extended":function(e){return e>=6320&&e<=6399},"General Punctuation":function(e){return e>=8192&&e<=8303},"Letterlike Symbols":function(e){return e>=8448&&e<=8527},"Number Forms":function(e){return e>=8528&&e<=8591},"Miscellaneous Technical":function(e){return e>=8960&&e<=9215},"Control Pictures":function(e){return e>=9216&&e<=9279},"Optical Character Recognition":function(e){return e>=9280&&e<=9311},"Enclosed Alphanumerics":function(e){return e>=9312&&e<=9471},"Geometric Shapes":function(e){return e>=9632&&e<=9727},"Miscellaneous Symbols":function(e){return e>=9728&&e<=9983},"Miscellaneous Symbols and Arrows":function(e){return e>=11008&&e<=11263},"CJK Radicals Supplement":function(e){return e>=11904&&e<=12031},"Kangxi Radicals":function(e){return e>=12032&&e<=12255},"Ideographic Description Characters":function(e){return e>=12272&&e<=12287},"CJK Symbols and Punctuation":function(e){return e>=12288&&e<=12351},Hiragana:function(e){return e>=12352&&e<=12447},Katakana:function(e){return e>=12448&&e<=12543},Bopomofo:function(e){return e>=12544&&e<=12591},"Hangul Compatibility Jamo":function(e){return e>=12592&&e<=12687},Kanbun:function(e){return e>=12688&&e<=12703},"Bopomofo Extended":function(e){return e>=12704&&e<=12735},"CJK Strokes":function(e){return e>=12736&&e<=12783},"Katakana Phonetic Extensions":function(e){return e>=12784&&e<=12799},"Enclosed CJK Letters and Months":function(e){return e>=12800&&e<=13055},"CJK Compatibility":function(e){return e>=13056&&e<=13311},"CJK Unified Ideographs Extension A":function(e){return e>=13312&&e<=19903},"Yijing Hexagram Symbols":function(e){return e>=19904&&e<=19967},"CJK Unified Ideographs":function(e){return e>=19968&&e<=40959},"Yi Syllables":function(e){return e>=40960&&e<=42127},"Yi Radicals":function(e){return e>=42128&&e<=42191},"Hangul Jamo Extended-A":function(e){return e>=43360&&e<=43391},"Hangul Syllables":function(e){return e>=44032&&e<=55215},"Hangul Jamo Extended-B":function(e){return e>=55216&&e<=55295},"Private Use Area":function(e){return e>=57344&&e<=63743},"CJK Compatibility Ideographs":function(e){return e>=63744&&e<=64255},"Arabic Presentation Forms-A":function(e){return e>=64336&&e<=65023},"Vertical Forms":function(e){return e>=65040&&e<=65055},"CJK Compatibility Forms":function(e){return e>=65072&&e<=65103},"Small Form Variants":function(e){return e>=65104&&e<=65135},"Arabic Presentation Forms-B":function(e){return e>=65136&&e<=65279},"Halfwidth and Fullwidth Forms":function(e){return e>=65280&&e<=65519}};t.exports=r},{}],259:[function(e,t,n){"use strict";var r=function(e,t){this.max=e,this.onRemove=t,this.reset()};r.prototype.reset=function(){var e=this;for(var t in e.data)e.onRemove(e.data[t]);return this.data={},this.order=[],this},r.prototype.add=function(e,t){if(this.has(e))this.order.splice(this.order.indexOf(e),1),this.data[e]=t,this.order.push(e);else if(this.data[e]=t,this.order.push(e),this.order.length>this.max){var n=this.getAndRemove(this.order[0]);n&&this.onRemove(n)}return this},r.prototype.has=function(e){return e in this.data},r.prototype.keys=function(){return this.order},r.prototype.getAndRemove=function(e){if(!this.has(e))return null;var t=this.data[e];return delete this.data[e],this.order.splice(this.order.indexOf(e),1),t},r.prototype.get=function(e){return this.has(e)?this.data[e]:null},r.prototype.remove=function(e){if(!this.has(e))return this;var t=this.data[e];return delete this.data[e],this.onRemove(t),this.order.splice(this.order.indexOf(e),1),this},r.prototype.setMaxSize=function(e){var t=this;for(this.max=e;this.order.length>this.max;){var n=t.getAndRemove(t.order[0]);n&&t.onRemove(n)}return this},t.exports=r},{}],260:[function(e,t,n){"use strict";function r(e,t){var n=a(u.API_URL);if(e.protocol=n.protocol,e.authority=n.authority,"/"!==n.path&&(e.path=""+n.path+e.path),!u.REQUIRE_ACCESS_TOKEN)return s(e);if(!(t=t||u.ACCESS_TOKEN))throw new Error("An API access token is required to use Mapbox GL. "+c);if("s"===t[0])throw new Error("Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). "+c);return e.params.push("access_token="+t),s(e)}function i(e){return 0===e.indexOf("mapbox:")}function o(e){for(var t=0;t<e.length;t++)0===e[t].indexOf("access_token=tk.")&&(e[t]="access_token="+(u.ACCESS_TOKEN||""))}function a(e){var t=e.match(h);if(!t)throw new Error("Unable to parse URL object");return{protocol:t[1],authority:t[2],path:t[3]||"/",params:t[4]?t[4].split("&"):[]}}function s(e){var t=e.params.length?"?"+e.params.join("&"):"";return e.protocol+"://"+e.authority+e.path+t}var u=e("./config"),l=e("./browser"),c="See https://www.mapbox.com/api-documentation/#access-tokens";n.isMapboxURL=i,n.normalizeStyleURL=function(e,t){if(!i(e))return e;var n=a(e);return n.path="/styles/v1"+n.path,r(n,t)},n.normalizeGlyphsURL=function(e,t){if(!i(e))return e;var n=a(e);return n.path="/fonts/v1"+n.path,r(n,t)},n.normalizeSourceURL=function(e,t){if(!i(e))return e;var n=a(e);return n.path="/v4/"+n.authority+".json",n.params.push("secure"),r(n,t)},n.normalizeSpriteURL=function(e,t,n,o){var u=a(e);return i(e)?(u.path="/styles/v1"+u.path+"/sprite"+t+n,r(u,o)):(u.path+=""+t+n,s(u))};var f=/(\.(png|jpg)\d*)(?=$)/;n.normalizeTileURL=function(e,t,n){if(!t||!i(t))return e;var r=a(e),u=l.devicePixelRatio>=2||512===n?"@2x":"",c=l.supportsWebp?".webp":"$1";return r.path=r.path.replace(f,""+u+c),o(r.params),s(r)};var h=/^(\w+):\/\/([^\/?]*)(\/[^?]+)?\??(.+)?/},{"./browser":245,"./config":249}],261:[function(e,t,n){"use strict";var r=e("./is_char_in_unicode_block");t.exports.allowsIdeographicBreaking=function(e){for(var t=0,r=e;t<r.length;t+=1){var i=r[t];if(!n.charAllowsIdeographicBreaking(i.charCodeAt(0)))return!1}return!0},t.exports.allowsVerticalWritingMode=function(e){for(var t=0,r=e;t<r.length;t+=1){var i=r[t];if(n.charHasUprightVerticalOrientation(i.charCodeAt(0)))return!0}return!1},t.exports.allowsLetterSpacing=function(e){for(var t=0,r=e;t<r.length;t+=1){var i=r[t];if(!n.charAllowsLetterSpacing(i.charCodeAt(0)))return!1}return!0},t.exports.charAllowsLetterSpacing=function(e){return!r.Arabic(e)&&!r["Arabic Supplement"](e)&&!r["Arabic Extended-A"](e)&&!r["Arabic Presentation Forms-A"](e)&&!r["Arabic Presentation Forms-B"](e)},t.exports.charAllowsIdeographicBreaking=function(e){return!(e<11904)&&(!!r["Bopomofo Extended"](e)||!!r.Bopomofo(e)||!!r["CJK Compatibility Forms"](e)||!!r["CJK Compatibility Ideographs"](e)||!!r["CJK Compatibility"](e)||!!r["CJK Radicals Supplement"](e)||!!r["CJK Strokes"](e)||!!r["CJK Symbols and Punctuation"](e)||!!r["CJK Unified Ideographs Extension A"](e)||!!r["CJK Unified Ideographs"](e)||!!r["Enclosed CJK Letters and Months"](e)||!!r["Halfwidth and Fullwidth Forms"](e)||!!r.Hiragana(e)||!!r["Ideographic Description Characters"](e)||!!r["Kangxi Radicals"](e)||!!r["Katakana Phonetic Extensions"](e)||!!r.Katakana(e)||!!r["Vertical Forms"](e)||!!r["Yi Radicals"](e)||!!r["Yi Syllables"](e))},n.charHasUprightVerticalOrientation=function(e){return 746===e||747===e||!(e<4352)&&(!!r["Bopomofo Extended"](e)||!!r.Bopomofo(e)||!(!r["CJK Compatibility Forms"](e)||e>=65097&&e<=65103)||!!r["CJK Compatibility Ideographs"](e)||!!r["CJK Compatibility"](e)||!!r["CJK Radicals Supplement"](e)||!!r["CJK Strokes"](e)||!(!r["CJK Symbols and Punctuation"](e)||e>=12296&&e<=12305||e>=12308&&e<=12319||12336===e)||!!r["CJK Unified Ideographs Extension A"](e)||!!r["CJK Unified Ideographs"](e)||!!r["Enclosed CJK Letters and Months"](e)||!!r["Hangul Compatibility Jamo"](e)||!!r["Hangul Jamo Extended-A"](e)||!!r["Hangul Jamo Extended-B"](e)||!!r["Hangul Jamo"](e)||!!r["Hangul Syllables"](e)||!!r.Hiragana(e)||!!r["Ideographic Description Characters"](e)||!!r.Kanbun(e)||!!r["Kangxi Radicals"](e)||!!r["Katakana Phonetic Extensions"](e)||!(!r.Katakana(e)||12540===e)||!(!r["Halfwidth and Fullwidth Forms"](e)||65288===e||65289===e||65293===e||e>=65306&&e<=65310||65339===e||65341===e||65343===e||e>=65371&&e<=65503||65507===e||e>=65512&&e<=65519)||!(!r["Small Form Variants"](e)||e>=65112&&e<=65118||e>=65123&&e<=65126)||!!r["Unified Canadian Aboriginal Syllabics"](e)||!!r["Unified Canadian Aboriginal Syllabics Extended"](e)||!!r["Vertical Forms"](e)||!!r["Yijing Hexagram Symbols"](e)||!!r["Yi Syllables"](e)||!!r["Yi Radicals"](e))},n.charHasNeutralVerticalOrientation=function(e){return!(!r["Latin-1 Supplement"](e)||167!==e&&169!==e&&174!==e&&177!==e&&188!==e&&189!==e&&190!==e&&215!==e&&247!==e)||!(!r["General Punctuation"](e)||8214!==e&&8224!==e&&8225!==e&&8240!==e&&8241!==e&&8251!==e&&8252!==e&&8258!==e&&8263!==e&&8264!==e&&8265!==e&&8273!==e)||!!r["Letterlike Symbols"](e)||!!r["Number Forms"](e)||!(!r["Miscellaneous Technical"](e)||!(e>=8960&&e<=8967||e>=8972&&e<=8991||e>=8996&&e<=9e3||9003===e||e>=9085&&e<=9114||e>=9150&&e<=9165||9167===e||e>=9169&&e<=9179||e>=9186&&e<=9215))||!(!r["Control Pictures"](e)||9251===e)||!!r["Optical Character Recognition"](e)||!!r["Enclosed Alphanumerics"](e)||!!r["Geometric Shapes"](e)||!(!r["Miscellaneous Symbols"](e)||e>=9754&&e<=9759)||!(!r["Miscellaneous Symbols and Arrows"](e)||!(e>=11026&&e<=11055||e>=11088&&e<=11097||e>=11192&&e<=11243))||!!r["CJK Symbols and Punctuation"](e)||!!r.Katakana(e)||!!r["Private Use Area"](e)||!!r["CJK Compatibility Forms"](e)||!!r["Small Form Variants"](e)||!!r["Halfwidth and Fullwidth Forms"](e)||8734===e||8756===e||8757===e||e>=9984&&e<=10087||e>=10102&&e<=10131||65532===e||65533===e},n.charHasRotatedVerticalOrientation=function(e){return!(n.charHasUprightVerticalOrientation(e)||n.charHasNeutralVerticalOrientation(e))}},{"./is_char_in_unicode_block":258}],262:[function(e,t,n){"use strict";var r=e("../geo/lng_lat");t.exports=function(e,t,n){if(e=new r(e.lng,e.lat),t){var i=new r(e.lng-360,e.lat),o=new r(e.lng+360,e.lat),a=n.locationPoint(e).distSqr(t);n.locationPoint(i).distSqr(t)<a?e=i:n.locationPoint(o).distSqr(t)<a&&(e=o)}for(;Math.abs(e.lng-n.center.lng)>180;){var s=n.locationPoint(e);if(s.x>=0&&s.y>=0&&s.x<=n.width&&s.y<=n.height)break;e.lng>n.center.lng?e.lng-=360:e.lng+=360}return e}},{"../geo/lng_lat":68}],263:[function(e,t,n){"use strict";function r(e){var t=JSON.stringify(e);if(d[t])return d[t];var n=void 0===e.alignment?1:e.alignment,r=0,a=0,u=["Uint8"],f=e.members.map(function(e){u.indexOf(e.type)<0&&u.push(e.type);var t=o(e.type),s=r=i(r,Math.max(n,t)),l=e.components||1;return a=Math.max(a,t),r+=t*l,{name:e.name,type:e.type,components:l,offset:s}}),v=i(r,Math.max(a,n)),g=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t}(h);g.prototype.alignment=n,g.prototype.size=v;for(var y=0,m=f;y<m.length;y+=1)for(var _=m[y],b=0;b<_.components;b++){var E=_.name;if(_.components>1&&(E+=b),E in g.prototype)throw new Error(E+" is a reserved name and cannot be used as a member name.");Object.defineProperty(g.prototype,E,c(_,b))}var x=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t}(p);x.prototype.members=f,x.prototype.StructType=g,x.prototype.bytesPerElement=v,x.prototype.emplaceBack=s(f,v),x.prototype._usedTypes=u,d[t]=x;for(var w=0,T=f;w<T.length;w+=1)for(var S=T[w],A=0;A<S.components;A++){var C="get"+S.name;if(S.components>1&&(C+=A),C in x.prototype)throw new Error(C+" is a reserved name and cannot be used as a member name.");x.prototype[C]=l(S,A,v)}return x}function i(e,t){return Math.ceil(e/t)*t}function o(e){return f[e].BYTES_PER_ELEMENT}function a(e){return e.toLowerCase()}function s(e,t){for(var n=[],r=[],i="var i = this.length;\nthis.resize(this.length + 1);\n",s=0,u=e;s<u.length;s+=1){var l=u[s],c=o(l.type);n.indexOf(c)<0&&(n.push(c),i+="var o"+c.toFixed(0)+" = i * "+(t/c).toFixed(0)+";\n");for(var f=0;f<l.components;f++){var h="v"+r.length,p="o"+c.toFixed(0)+" + "+(l.offset/c+f).toFixed(0);i+="this."+a(l.type)+"["+p+"] = "+h+";\n",r.push(h)}}return i+="return i;",new Function(r.toString(),i)}function u(e,t){var n="this._pos"+o(e.type).toFixed(0),r=(e.offset/o(e.type)+t).toFixed(0),i=n+" + "+r;return"this._structArray."+a(e.type)+"["+i+"]"}function l(e,t,n){var r=(e.offset/o(e.type)+t).toFixed(0),i=n/o(e.type);return new Function("index","return this."+a(e.type)+"[index * "+i+" + "+r+"];")}function c(e,t){var n=u(e,t);return{get:new Function("return "+n+";"),set:new Function("x",n+" = x;")}}t.exports=r;var f={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array},h=function(e,t){this._structArray=e,this._pos1=t*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8},p=function(e){this.isTransferred=!1,void 0!==e?(this.arrayBuffer=e.arrayBuffer,this.length=e.length,this.capacity=this.arrayBuffer.byteLength/this.bytesPerElement,this._refreshViews()):(this.capacity=-1,this.resize(0))};p.serialize=function(){return{members:this.prototype.members,alignment:this.prototype.StructType.prototype.alignment}},p.prototype.serialize=function(e){return this._trim(),e&&(this.isTransferred=!0,e.push(this.arrayBuffer)),{length:this.length,arrayBuffer:this.arrayBuffer}},p.prototype.get=function(e){return new this.StructType(this,e)},p.prototype._trim=function(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())},p.prototype.clear=function(){this.length=0},p.prototype.resize=function(e){if(this.length=e,e>this.capacity){this.capacity=Math.max(e,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);var t=this.uint8;this._refreshViews(),t&&this.uint8.set(t)}},p.prototype._refreshViews=function(){for(var e=this,t=0,n=e._usedTypes;t<n.length;t+=1){var r=n[t];e[a(r)]=new f[r](e.arrayBuffer)}},p.prototype.toArray=function(e,t){for(var n=this,r=[],i=e;i<t;i++){var o=n.get(i);r.push(o)}return r};var d={}},{}],264:[function(e,t,n){"use strict";t.exports=function(e,t){var n=!1,r=0,i=function(){r=0,n&&(e(),r=setTimeout(i,t),n=!1)};return function(){return n=!0,r||i(),r}}},{}],265:[function(e,t,n){"use strict";function r(e,t){return t.replace(/{([^{}]+)}/g,function(t,n){return n in e?String(e[n]):""})}t.exports=r},{}],266:[function(e,t,n){"use strict";var r=e("@mapbox/unitbezier"),i=e("../geo/coordinate");e("@mapbox/point-geometry");n.easeCubicInOut=function(e){if(e<=0)return 0;if(e>=1)return 1;var t=e*e,n=t*e;return 4*(e<.5?n:3*(e-t)+n-.75)},n.bezier=function(e,t,n,i){var o=new r(e,t,n,i);return function(e){return o.solve(e)}},n.ease=n.bezier(.25,.1,.25,1),n.clamp=function(e,t,n){return Math.min(n,Math.max(t,e))},n.wrap=function(e,t,n){var r=n-t,i=((e-t)%r+r)%r+t;return i===t?n:i},n.asyncAll=function(e,t,n){if(!e.length)return n(null,[]);var r=e.length,i=new Array(e.length),o=null;e.forEach(function(e,a){t(e,function(e,t){e&&(o=e),i[a]=t,0==--r&&n(o,i)})})},n.values=function(e){var t=[];for(var n in e)t.push(e[n]);return t},n.keysDifference=function(e,t){var n=[];for(var r in e)r in t||n.push(r);return n},n.extend=function(e){for(var t=[],n=arguments.length-1;n-- >0;)t[n]=arguments[n+1];for(var r=0,i=t;r<i.length;r+=1){var o=i[r];for(var a in o)e[a]=o[a]}return e},n.pick=function(e,t){for(var n={},r=0;r<t.length;r++){var i=t[r];i in e&&(n[i]=e[i])}return n};var o=1;n.uniqueId=function(){return o++},n.bindAll=function(e,t){e.forEach(function(e){t[e]&&(t[e]=t[e].bind(t))})},n.getCoordinatesCenter=function(e){for(var t=1/0,n=1/0,r=-1/0,o=-1/0,a=0;a<e.length;a++)t=Math.min(t,e[a].column),n=Math.min(n,e[a].row),r=Math.max(r,e[a].column),o=Math.max(o,e[a].row);var s=r-t,u=o-n,l=Math.max(s,u),c=Math.max(0,Math.floor(-Math.log(l)/Math.LN2));return new i((t+r)/2,(n+o)/2,0).zoomTo(c)},n.endsWith=function(e,t){return-1!==e.indexOf(t,e.length-t.length)},n.mapObject=function(e,t,n){var r=this,i={};for(var o in e)i[o]=t.call(n||r,e[o],o,e);return i},n.filterObject=function(e,t,n){var r=this,i={};for(var o in e)t.call(n||r,e[o],o,e)&&(i[o]=e[o]);return i},n.deepEqual=function(e,t){if(Array.isArray(e)){if(!Array.isArray(t)||e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(!n.deepEqual(e[r],t[r]))return!1;return!0}if("object"==typeof e&&null!==e&&null!==t){if("object"!=typeof t)return!1;if(Object.keys(e).length!==Object.keys(t).length)return!1;for(var i in e)if(!n.deepEqual(e[i],t[i]))return!1;return!0}return e===t},n.clone=function(e){return Array.isArray(e)?e.map(n.clone):"object"==typeof e&&e?n.mapObject(e,n.clone):e},n.arraysIntersect=function(e,t){for(var n=0;n<e.length;n++)if(t.indexOf(e[n])>=0)return!0;return!1};var a={};n.warnOnce=function(e){a[e]||("undefined"!=typeof console&&console.warn(e),a[e]=!0)},n.isCounterClockwise=function(e,t,n){return(n.y-e.y)*(t.x-e.x)>(t.y-e.y)*(n.x-e.x)},n.calculateSignedArea=function(e){for(var t=0,n=0,r=e.length,i=r-1,o=void 0,a=void 0;n<r;i=n++)o=e[n],a=e[i],t+=(a.x-o.x)*(o.y+a.y);return t},n.isClosedPolygon=function(e){if(e.length<4)return!1;var t=e[0],r=e[e.length-1];return!(Math.abs(t.x-r.x)>0||Math.abs(t.y-r.y)>0)&&Math.abs(n.calculateSignedArea(e))>.01},n.sphericalToCartesian=function(e){var t=e[0],n=e[1],r=e[2];return n+=90,n*=Math.PI/180,r*=Math.PI/180,{x:t*Math.cos(n)*Math.sin(r),y:t*Math.sin(n)*Math.sin(r),z:t*Math.cos(r)}},n.parseCacheControl=function(e){var t=/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,n={};if(e.replace(t,function(e,t,r,i){var o=r||i;return n[t]=!o||o.toLowerCase(),""}),n["max-age"]){var r=parseInt(n["max-age"],10);isNaN(r)?delete n["max-age"]:n["max-age"]=r}return n}},{"../geo/coordinate":67,"@mapbox/point-geometry":2,"@mapbox/unitbezier":5}],267:[function(e,t,n){"use strict";var r=function(e,t,n,r){this.type="Feature",this._vectorTileFeature=e,e._z=t,e._x=n,e._y=r,this.properties=e.properties,null!=e.id&&(this.id=e.id)},i={geometry:{}};i.geometry.get=function(){return void 0===this._geometry&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry},i.geometry.set=function(e){this._geometry=e},r.prototype.toJSON=function(){var e=this,t={geometry:this.geometry};for(var n in e)"_geometry"!==n&&"_vectorTileFeature"!==n&&(t[n]=e[n]);return t},Object.defineProperties(r.prototype,i),t.exports=r},{}],268:[function(e,t,n){"use strict";var r=e("./script_detection");t.exports=function(e){for(var n="",i=0;i<e.length;i++){var o=e.charCodeAt(i+1)||null,a=e.charCodeAt(i-1)||null;o&&r.charHasRotatedVerticalOrientation(o)&&!t.exports.lookup[e[i+1]]||a&&r.charHasRotatedVerticalOrientation(a)&&!t.exports.lookup[e[i-1]]||!t.exports.lookup[e[i]]?n+=e[i]:n+=t.exports.lookup[e[i]]}return n},t.exports.lookup={"!":"\ufe15","#":"\uff03",$:"\uff04","%":"\uff05","&":"\uff06","(":"\ufe35",")":"\ufe36","*":"\uff0a","+":"\uff0b",",":"\ufe10","-":"\ufe32",".":"\u30fb","/":"\uff0f",":":"\ufe13",";":"\ufe14","<":"\ufe3f","=":"\uff1d",">":"\ufe40","?":"\ufe16","@":"\uff20","[":"\ufe47","\\":"\uff3c","]":"\ufe48","^":"\uff3e",_:"\ufe33","`":"\uff40","{":"\ufe37","|":"\u2015","}":"\ufe38","~":"\uff5e","\xa2":"\uffe0","\xa3":"\uffe1","\xa5":"\uffe5","\xa6":"\uffe4","\xac":"\uffe2","\xaf":"\uffe3","\u2013":"\ufe32","\u2014":"\ufe31","\u2018":"\ufe43","\u2019":"\ufe44","\u201c":"\ufe41","\u201d":"\ufe42","\u2026":"\ufe19","\u2027":"\u30fb","\u20a9":"\uffe6","\u3001":"\ufe11","\u3002":"\ufe12","\u3008":"\ufe3f","\u3009":"\ufe40","\u300a":"\ufe3d","\u300b":"\ufe3e","\u300c":"\ufe41","\u300d":"\ufe42","\u300e":"\ufe43","\u300f":"\ufe44","\u3010":"\ufe3b","\u3011":"\ufe3c","\u3014":"\ufe39","\u3015":"\ufe3a","\u3016":"\ufe17","\u3017":"\ufe18","\uff01":"\ufe15","\uff08":"\ufe35","\uff09":"\ufe36","\uff0c":"\ufe10","\uff0d":"\ufe32","\uff0e":"\u30fb","\uff1a":"\ufe13","\uff1b":"\ufe14","\uff1c":"\ufe3f","\uff1e":"\ufe40","\uff1f":"\ufe16","\uff3b":"\ufe47","\uff3d":"\ufe48","\uff3f":"\ufe33","\uff5b":"\ufe37","\uff5c":"\u2015","\uff5d":"\ufe38","\uff5f":"\ufe35","\uff60":"\ufe36","\uff61":"\ufe12","\uff62":"\ufe41","\uff63":"\ufe42"}},{"./script_detection":261}],269:[function(e,t,n){"use strict";var r=e("./web_worker"),i=function(){this.active={}};i.prototype.acquire=function(t){var n=this;if(!this.workers){var i=e("../").workerCount;for(this.workers=[];this.workers.length<i;)n.workers.push(new r)}return this.active[t]=!0,this.workers.slice()},i.prototype.release=function(e){delete this.active[e],0===Object.keys(this.active).length&&(this.workers.forEach(function(e){e.terminate()}),this.workers=null)},t.exports=i},{"../":73,"./web_worker":246}]},{},[73])(73)})}).call(t,n(18))},function(e,t,n){e.exports={default:n(379),__esModule:!0}},function(e,t,n){n(380),e.exports=n(8).Math.log2},function(e,t,n){var r=n(23);r(r.S,"Math",{log2:function(e){return Math.log(e)/Math.LN2}})},function(e,t,n){e.exports={default:n(382),__esModule:!0}},function(e,t,n){n(113),n(106),e.exports=n(383)},function(e,t,n){var r=n(168),i=n(24)("iterator"),o=n(55);e.exports=n(8).isIterable=function(e){var t=Object(e);return void 0!==t[i]||"@@iterator"in t||o.hasOwnProperty(r(t))}},function(e,t,n){n(385),e.exports=n(8).Number.isFinite},function(e,t,n){var r=n(23),i=n(22).isFinite;r(r.S,"Number",{isFinite:function(e){return"number"==typeof e&&i(e)}})},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(33),o=r(i),a=n(11),s=r(a),u=n(6),l=r(u),c=n(7),f=r(c),h=n(14),p=r(h),d=n(15),v=r(d),g=n(0),y=r(g),m=n(134),_=r(m),b=n(25),E=n(226),x=["longitude","latitude","zoom","bearing","pitch"],w=["latitude","longitude","zoom","width","height"],T=["bearing","pitch"],S=function(e){function t(){(0,l.default)(this,t);var e=(0,p.default)(this,(t.__proto__||(0,s.default)(t)).call(this));return e.propNames=x,e}return(0,v.default)(t,e),(0,f.default)(t,[{key:"initializeProps",value:function(e,t){var n={},r={},i=!0,a=!1,s=void 0;try{for(var u,l=(0,o.default)(w);!(i=(u=l.next()).done);i=!0){var c=u.value,f=e[c],h=t[c];(0,y.default)((0,E.isValid)(f)&&(0,E.isValid)(h),c+" must be supplied for transition"),n[c]=f,r[c]=(0,E.getEndValueByShortestPath)(c,f,h)}}catch(e){a=!0,s=e}finally{try{!i&&l.return&&l.return()}finally{if(a)throw s}}var p=!0,d=!1,v=void 0;try{for(var g,m=(0,o.default)(T);!(p=(g=m.next()).done);p=!0){var _=g.value,b=e[_]||0,x=t[_]||0;n[_]=b,r[_]=(0,E.getEndValueByShortestPath)(_,b,x)}}catch(e){d=!0,v=e}finally{try{!p&&m.return&&m.return()}finally{if(d)throw v}}return{start:n,end:r}}},{key:"interpolateProps",value:function(e,t,n){var r=(0,b.flyToViewport)(e,t,n),i=!0,a=!1,s=void 0;try{for(var u,l=(0,o.default)(T);!(i=(u=l.next()).done);i=!0){var c=u.value;r[c]=(0,E.lerp)(e[c],t[c],n)}}catch(e){a=!0,s=e}finally{try{!i&&l.return&&l.return()}finally{if(a)throw s}}return r}}]),t}(_.default);t.default=S},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(33),o=r(i),a=n(11),s=r(a),u=n(6),l=r(u),c=n(7),f=r(c),h=n(14),p=r(h),d=n(15),v=r(d),g=n(0),y=r(g),m=n(134),_=r(m),b=n(226),E=["longitude","latitude","zoom","bearing","pitch"],x=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E;(0,l.default)(this,t);var n=(0,p.default)(this,(t.__proto__||(0,s.default)(t)).call(this));return n.propNames=e,n}return(0,v.default)(t,e),(0,f.default)(t,[{key:"initializeProps",value:function(e,t){var n={},r={},i=!0,a=!1,s=void 0;try{for(var u,l=(0,o.default)(this.propNames);!(i=(u=l.next()).done);i=!0){var c=u.value,f=e[c],h=t[c];(0,y.default)((0,b.isValid)(f)&&(0,b.isValid)(h),c+" must be supplied for transition"),n[c]=f,r[c]=(0,b.getEndValueByShortestPath)(c,f,h)}}catch(e){a=!0,s=e}finally{try{!i&&l.return&&l.return()}finally{if(a)throw s}}return{start:n,end:r}}},{key:"interpolateProps",value:function(e,t,n){var r={},i=!0,a=!1,s=void 0;try{for(var u,l=(0,o.default)(this.propNames);!(i=(u=l.next()).done);i=!0){var c=u.value;r[c]=(0,b.lerp)(e[c],t[c],n)}}catch(e){a=!0,s=e}finally{try{!i&&l.return&&l.return()}finally{if(a)throw s}}return r}}]),t}(_.default);t.default=x},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){e.preventDefault()}Object.defineProperty(t,"__esModule",{value:!0});var o=n(9),a=r(o),s=n(57),u=r(s),l=n(6),c=r(l),f=n(7),h=r(f),p=n(227),d=n(391),v=r(d),g=n(392),y=r(g),m=n(393),_=r(m),b=n(84),E=n(394),x=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,c.default)(this,e),this.options=n,this.eventHandlers=[],this._onBasicInput=this._onBasicInput.bind(this),this._onOtherEvent=this._onOtherEvent.bind(this),this.setElement(t);var r=n.events;r&&this.on(r)}return(0,h.default)(e,[{key:"setElement",value:function(e){var t=this;if(this.element&&this.destroy(),this.element=e,e){var n=this.options,r=n.Manager||p.Manager;this.manager=new r(e,{recognizers:n.recognizers||b.RECOGNIZERS}).on("hammer.input",this._onBasicInput),n.recognizers||(0,u.default)(b.RECOGNIZER_COMPATIBLE_MAP).forEach(function(e){var n=t.manager.get(e);n&&b.RECOGNIZER_COMPATIBLE_MAP[e].forEach(function(e){n.recognizeWith(e)})}),this.wheelInput=new v.default(e,this._onOtherEvent,{enable:!1}),this.moveInput=new y.default(e,this._onOtherEvent,{enable:!1}),this.keyInput=new _.default(e,this._onOtherEvent,{enable:!1}),n.rightButton&&e.addEventListener("contextmenu",i),this.eventHandlers.forEach(function(e){var n=e.recognizerName,r=e.eventAlias,i=e.wrappedHandler;t._toggleRecognizer(n,!0),t.manager.on(r,i)})}}},{key:"destroy",value:function(){this.element&&(this.element.removeEventListener("contextmenu",i),this.wheelInput.destroy(),this.moveInput.destroy(),this.keyInput.destroy(),this.manager.destroy(),this.wheelInput=null,this.moveInput=null,this.keyInput=null,this.manager=null,this.element=null)}},{key:"on",value:function(e,t,n){if("string"===typeof e)this._addEventHandler(e,t,n);else{n=t;for(var r in e)this._addEventHandler(r,e[r],n)}}},{key:"off",value:function(e,t){if("string"===typeof e)this._removeEventHandler(e,t);else for(var n in e)this._removeEventHandler(n,e[n])}},{key:"_toggleRecognizer",value:function(e,t){var n=this.manager;if(n){var r=n.get(e);if(r){r.set({enable:t});var i=b.RECOGNIZER_FALLBACK_MAP[e];i&&!this.options.recognizers&&i.forEach(function(r){var i=n.get(r);t?i.requireFailure(e):i.dropRequireFailure(e)})}this.wheelInput.enableEventType(e,t),this.moveInput.enableEventType(e,t),this.keyInput.enableEventType(e,t)}}},{key:"_addEventHandler",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=this.manager,i=this.eventHandlers,o=this._wrapEventHandler(e,t,n),a=b.GESTURE_EVENT_ALIASES[e]||e,s=b.EVENT_RECOGNIZER_MAP[a]||a;this._toggleRecognizer(s,!0);var u=i.filter(function(e){return e.eventAlias===a&&e.srcElement!==n&&(!e.srcElement||e.srcElement.contains(n))});i.push({event:e,eventAlias:a,recognizerName:s,srcElement:n,handler:t,wrappedHandler:o}),u.forEach(function(e){return r.off(a,e.wrappedHandler)}),r&&r.on(a,o),u.forEach(function(e){return r.on(a,e.wrappedHandler)})}},{key:"_removeEventHandler",value:function(e,t){for(var n=this.manager,r=this.eventHandlers,i=!1,o=r.length;o--;){var a=r[o];a.event===e&&a.handler===t&&(n&&n.off(a.eventAlias,a.wrappedHandler),r.splice(o,1),i=!0)}if(i){var s=b.GESTURE_EVENT_ALIASES[e]||e,u=b.EVENT_RECOGNIZER_MAP[s]||s;r.find(function(e){return e.recognizerName===u})||this._toggleRecognizer(u,!1)}}},{key:"_wrapEventHandler",value:function(e,t,n){var r=this;return function(i){var o=i.mjolnirEvent;(o||(o=r._normalizeEvent(i),i.mjolnirEvent=o),o.handled&&o.handled!==n)||(!n||n.contains(i.srcEvent.target))&&t((0,a.default)({},o,{type:e,stopPropagation:function(){o.handled||(o.handled=n)}}))}}},{key:"_normalizeEvent",value:function(e){var t=this.element;return(0,a.default)({},e,(0,E.whichButtons)(e),(0,E.getOffsetPosition)(e,t),{handled:!1,rootElement:t})}},{key:"_onBasicInput",value:function(e){var t=e.srcEvent,n=b.BASIC_EVENT_ALIASES[t.type];n&&this.manager.emit(n,e)}},{key:"_onOtherEvent",value:function(e){this.manager.emit(e.type,e)}}]),e}();t.default=x},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<e.length;n++)if(t(e[n]))return!0;return!1}function i(e){var t=e.prototype.handler;e.prototype.handler=function(e){var n=this.store;e.button>0&&(r(n,function(t){return t.pointerId===e.pointerId})||n.push(e)),t.call(this,e)}}function o(e){e.prototype.handler=function(e){var t=l[e.type];t&a&&e.button>=0&&(this.pressed=!0),t&s&&0===e.which&&(t=u),this.pressed&&(t&u&&(this.pressed=!1),this.callback(this.manager,t,{pointers:[e],changedPointers:[e],pointerType:"mouse",srcEvent:e}))}}Object.defineProperty(t,"__esModule",{value:!0}),t.enhancePointerEventInput=i,t.enhanceMouseInput=o;var a=1,s=2,u=4,l={mousedown:a,mousemove:s,mouseup:u}},function(e,t,n){var r;!function(i,o,a,s){"use strict";function u(e,t,n){return setTimeout(p(e,n),t)}function l(e,t,n){return!!Array.isArray(e)&&(c(e,n[t],n),!0)}function c(e,t,n){var r;if(e)if(e.forEach)e.forEach(t,n);else if(e.length!==s)for(r=0;r<e.length;)t.call(n,e[r],r,e),r++;else for(r in e)e.hasOwnProperty(r)&&t.call(n,e[r],r,e)}function f(e,t,n){var r="DEPRECATED METHOD: "+t+"\n"+n+" AT \n";return function(){var t=new Error("get-stack-trace"),n=t&&t.stack?t.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",o=i.console&&(i.console.warn||i.console.log);return o&&o.call(i.console,r,n),e.apply(this,arguments)}}function h(e,t,n){var r,i=t.prototype;r=e.prototype=Object.create(i),r.constructor=e,r._super=i,n&&de(r,n)}function p(e,t){return function(){return e.apply(t,arguments)}}function d(e,t){return typeof e==ye?e.apply(t?t[0]||s:s,t):e}function v(e,t){return e===s?t:e}function g(e,t,n){c(b(t),function(t){e.addEventListener(t,n,!1)})}function y(e,t,n){c(b(t),function(t){e.removeEventListener(t,n,!1)})}function m(e,t){for(;e;){if(e==t)return!0;e=e.parentNode}return!1}function _(e,t){return e.indexOf(t)>-1}function b(e){return e.trim().split(/\s+/g)}function E(e,t,n){if(e.indexOf&&!n)return e.indexOf(t);for(var r=0;r<e.length;){if(n&&e[r][n]==t||!n&&e[r]===t)return r;r++}return-1}function x(e){return Array.prototype.slice.call(e,0)}function w(e,t,n){for(var r=[],i=[],o=0;o<e.length;){var a=t?e[o][t]:e[o];E(i,a)<0&&r.push(e[o]),i[o]=a,o++}return n&&(r=t?r.sort(function(e,n){return e[t]>n[t]}):r.sort()),r}function T(e,t){for(var n,r,i=t[0].toUpperCase()+t.slice(1),o=0;o<ve.length;){if(n=ve[o],(r=n?n+i:t)in e)return r;o++}return s}function S(){return we++}function A(e){var t=e.ownerDocument||e;return t.defaultView||t.parentWindow||i}function C(e,t){var n=this;this.manager=e,this.callback=t,this.element=e.element,this.target=e.options.inputTarget,this.domHandler=function(t){d(e.options.enable,[e])&&n.handler(t)},this.init()}function O(e){var t=e.options.inputClass;return new(t||(Ae?V:Ce?q:Se?X:z))(e,k)}function k(e,t,n){var r=n.pointers.length,i=n.changedPointers.length,o=t&ke&&r-i===0,a=t&(Re|Ie)&&r-i===0;n.isFirst=!!o,n.isFinal=!!a,o&&(e.session={}),n.eventType=t,P(e,n),e.emit("hammer.input",n),e.recognize(n),e.session.prevInput=n}function P(e,t){var n=e.session,r=t.pointers,i=r.length;n.firstInput||(n.firstInput=N(t)),i>1&&!n.firstMultiple?n.firstMultiple=N(t):1===i&&(n.firstMultiple=!1);var o=n.firstInput,a=n.firstMultiple,s=a?a.center:o.center,u=t.center=M(r);t.timeStamp=be(),t.deltaTime=t.timeStamp-o.timeStamp,t.angle=j(s,u),t.distance=F(s,u),R(n,t),t.offsetDirection=D(t.deltaX,t.deltaY);var l=L(t.deltaTime,t.deltaX,t.deltaY);t.overallVelocityX=l.x,t.overallVelocityY=l.y,t.overallVelocity=_e(l.x)>_e(l.y)?l.x:l.y,t.scale=a?U(a.pointers,r):1,t.rotation=a?B(a.pointers,r):0,t.maxPointers=n.prevInput?t.pointers.length>n.prevInput.maxPointers?t.pointers.length:n.prevInput.maxPointers:t.pointers.length,I(n,t);var c=e.element;m(t.srcEvent.target,c)&&(c=t.srcEvent.target),t.target=c}function R(e,t){var n=t.center,r=e.offsetDelta||{},i=e.prevDelta||{},o=e.prevInput||{};t.eventType!==ke&&o.eventType!==Re||(i=e.prevDelta={x:o.deltaX||0,y:o.deltaY||0},r=e.offsetDelta={x:n.x,y:n.y}),t.deltaX=i.x+(n.x-r.x),t.deltaY=i.y+(n.y-r.y)}function I(e,t){var n,r,i,o,a=e.lastInterval||t,u=t.timeStamp-a.timeStamp;if(t.eventType!=Ie&&(u>Oe||a.velocity===s)){var l=t.deltaX-a.deltaX,c=t.deltaY-a.deltaY,f=L(u,l,c);r=f.x,i=f.y,n=_e(f.x)>_e(f.y)?f.x:f.y,o=D(l,c),e.lastInterval=t}else n=a.velocity,r=a.velocityX,i=a.velocityY,o=a.direction;t.velocity=n,t.velocityX=r,t.velocityY=i,t.direction=o}function N(e){for(var t=[],n=0;n<e.pointers.length;)t[n]={clientX:me(e.pointers[n].clientX),clientY:me(e.pointers[n].clientY)},n++;return{timeStamp:be(),pointers:t,center:M(t),deltaX:e.deltaX,deltaY:e.deltaY}}function M(e){var t=e.length;if(1===t)return{x:me(e[0].clientX),y:me(e[0].clientY)};for(var n=0,r=0,i=0;i<t;)n+=e[i].clientX,r+=e[i].clientY,i++;return{x:me(n/t),y:me(r/t)}}function L(e,t,n){return{x:t/e||0,y:n/e||0}}function D(e,t){return e===t?Ne:_e(e)>=_e(t)?e<0?Me:Le:t<0?De:Fe}function F(e,t,n){n||(n=ze);var r=t[n[0]]-e[n[0]],i=t[n[1]]-e[n[1]];return Math.sqrt(r*r+i*i)}function j(e,t,n){n||(n=ze);var r=t[n[0]]-e[n[0]],i=t[n[1]]-e[n[1]];return 180*Math.atan2(i,r)/Math.PI}function B(e,t){return j(t[1],t[0],Ve)+j(e[1],e[0],Ve)}function U(e,t){return F(t[0],t[1],Ve)/F(e[0],e[1],Ve)}function z(){this.evEl=He,this.evWin=qe,this.pressed=!1,C.apply(this,arguments)}function V(){this.evEl=$e,this.evWin=Ye,C.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}function G(){this.evTarget=Ke,this.evWin=Je,this.started=!1,C.apply(this,arguments)}function H(e,t){var n=x(e.touches),r=x(e.changedTouches);return t&(Re|Ie)&&(n=w(n.concat(r),"identifier",!0)),[n,r]}function q(){this.evTarget=et,this.targetIds={},C.apply(this,arguments)}function W(e,t){var n=x(e.touches),r=this.targetIds;if(t&(ke|Pe)&&1===n.length)return r[n[0].identifier]=!0,[n,n];var i,o,a=x(e.changedTouches),s=[],u=this.target;if(o=n.filter(function(e){return m(e.target,u)}),t===ke)for(i=0;i<o.length;)r[o[i].identifier]=!0,i++;for(i=0;i<a.length;)r[a[i].identifier]&&s.push(a[i]),t&(Re|Ie)&&delete r[a[i].identifier],i++;return s.length?[w(o.concat(s),"identifier",!0),s]:void 0}function X(){C.apply(this,arguments);var e=p(this.handler,this);this.touch=new q(this.manager,e),this.mouse=new z(this.manager,e),this.primaryTouch=null,this.lastTouches=[]}function $(e,t){e&ke?(this.primaryTouch=t.changedPointers[0].identifier,Y.call(this,t)):e&(Re|Ie)&&Y.call(this,t)}function Y(e){var t=e.changedPointers[0];if(t.identifier===this.primaryTouch){var n={x:t.clientX,y:t.clientY};this.lastTouches.push(n);var r=this.lastTouches,i=function(){var e=r.indexOf(n);e>-1&&r.splice(e,1)};setTimeout(i,tt)}}function Z(e){for(var t=e.srcEvent.clientX,n=e.srcEvent.clientY,r=0;r<this.lastTouches.length;r++){var i=this.lastTouches[r],o=Math.abs(t-i.x),a=Math.abs(n-i.y);if(o<=nt&&a<=nt)return!0}return!1}function K(e,t){this.manager=e,this.set(t)}function J(e){if(_(e,st))return st;var t=_(e,ut),n=_(e,lt);return t&&n?st:t||n?t?ut:lt:_(e,at)?at:ot}function Q(e){this.options=de({},this.defaults,e||{}),this.id=S(),this.manager=null,this.options.enable=v(this.options.enable,!0),this.state=ft,this.simultaneous={},this.requireFail=[]}function ee(e){return e&gt?"cancel":e&dt?"end":e&pt?"move":e&ht?"start":""}function te(e){return e==Fe?"down":e==De?"up":e==Me?"left":e==Le?"right":""}function ne(e,t){var n=t.manager;return n?n.get(e):e}function re(){Q.apply(this,arguments)}function ie(){re.apply(this,arguments),this.pX=null,this.pY=null}function oe(){re.apply(this,arguments)}function ae(){Q.apply(this,arguments),this._timer=null,this._input=null}function se(){re.apply(this,arguments)}function ue(){re.apply(this,arguments)}function le(){Q.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function ce(e,t){return t=t||{},t.recognizers=v(t.recognizers,ce.defaults.preset),new fe(e,t)}function fe(e,t){this.options=de({},ce.defaults,t||{}),this.options.inputTarget=this.options.inputTarget||e,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=e,this.input=O(this),this.touchAction=new K(this,this.options.touchAction),he(this,!0),c(this.options.recognizers,function(e){var t=this.add(new e[0](e[1]));e[2]&&t.recognizeWith(e[2]),e[3]&&t.requireFailure(e[3])},this)}function he(e,t){var n=e.element;if(n.style){var r;c(e.options.cssProps,function(i,o){r=T(n.style,o),t?(e.oldCssProps[r]=n.style[r],n.style[r]=i):n.style[r]=e.oldCssProps[r]||""}),t||(e.oldCssProps={})}}function pe(e,t){var n=o.createEvent("Event");n.initEvent(e,!0,!0),n.gesture=t,t.target.dispatchEvent(n)}var de,ve=["","webkit","Moz","MS","ms","o"],ge=o.createElement("div"),ye="function",me=Math.round,_e=Math.abs,be=Date.now;de="function"!==typeof Object.assign?function(e){if(e===s||null===e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),n=1;n<arguments.length;n++){var r=arguments[n];if(r!==s&&null!==r)for(var i in r)r.hasOwnProperty(i)&&(t[i]=r[i])}return t}:Object.assign;var Ee=f(function(e,t,n){for(var r=Object.keys(t),i=0;i<r.length;)(!n||n&&e[r[i]]===s)&&(e[r[i]]=t[r[i]]),i++;return e},"extend","Use `assign`."),xe=f(function(e,t){return Ee(e,t,!0)},"merge","Use `assign`."),we=1,Te=/mobile|tablet|ip(ad|hone|od)|android/i,Se="ontouchstart"in i,Ae=T(i,"PointerEvent")!==s,Ce=Se&&Te.test(navigator.userAgent),Oe=25,ke=1,Pe=2,Re=4,Ie=8,Ne=1,Me=2,Le=4,De=8,Fe=16,je=Me|Le,Be=De|Fe,Ue=je|Be,ze=["x","y"],Ve=["clientX","clientY"];C.prototype={handler:function(){},init:function(){this.evEl&&g(this.element,this.evEl,this.domHandler),this.evTarget&&g(this.target,this.evTarget,this.domHandler),this.evWin&&g(A(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&y(this.element,this.evEl,this.domHandler),this.evTarget&&y(this.target,this.evTarget,this.domHandler),this.evWin&&y(A(this.element),this.evWin,this.domHandler)}};var Ge={mousedown:ke,mousemove:Pe,mouseup:Re},He="mousedown",qe="mousemove mouseup";h(z,C,{handler:function(e){var t=Ge[e.type];t&ke&&0===e.button&&(this.pressed=!0),t&Pe&&1!==e.which&&(t=Re),this.pressed&&(t&Re&&(this.pressed=!1),this.callback(this.manager,t,{pointers:[e],changedPointers:[e],pointerType:"mouse",srcEvent:e}))}});var We={pointerdown:ke,pointermove:Pe,pointerup:Re,pointercancel:Ie,pointerout:Ie},Xe={2:"touch",3:"pen",4:"mouse",5:"kinect"},$e="pointerdown",Ye="pointermove pointerup pointercancel";i.MSPointerEvent&&!i.PointerEvent&&($e="MSPointerDown",Ye="MSPointerMove MSPointerUp MSPointerCancel"),h(V,C,{handler:function(e){var t=this.store,n=!1,r=e.type.toLowerCase().replace("ms",""),i=We[r],o=Xe[e.pointerType]||e.pointerType,a="touch"==o,s=E(t,e.pointerId,"pointerId");i&ke&&(0===e.button||a)?s<0&&(t.push(e),s=t.length-1):i&(Re|Ie)&&(n=!0),s<0||(t[s]=e,this.callback(this.manager,i,{pointers:t,changedPointers:[e],pointerType:o,srcEvent:e}),n&&t.splice(s,1))}});var Ze={touchstart:ke,touchmove:Pe,touchend:Re,touchcancel:Ie},Ke="touchstart",Je="touchstart touchmove touchend touchcancel";h(G,C,{handler:function(e){var t=Ze[e.type];if(t===ke&&(this.started=!0),this.started){var n=H.call(this,e,t);t&(Re|Ie)&&n[0].length-n[1].length===0&&(this.started=!1),this.callback(this.manager,t,{pointers:n[0],changedPointers:n[1],pointerType:"touch",srcEvent:e})}}});var Qe={touchstart:ke,touchmove:Pe,touchend:Re,touchcancel:Ie},et="touchstart touchmove touchend touchcancel";h(q,C,{handler:function(e){var t=Qe[e.type],n=W.call(this,e,t);n&&this.callback(this.manager,t,{pointers:n[0],changedPointers:n[1],pointerType:"touch",srcEvent:e})}});var tt=2500,nt=25;h(X,C,{handler:function(e,t,n){var r="touch"==n.pointerType,i="mouse"==n.pointerType;if(!(i&&n.sourceCapabilities&&n.sourceCapabilities.firesTouchEvents)){if(r)$.call(this,t,n);else if(i&&Z.call(this,n))return;this.callback(e,t,n)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var rt=T(ge.style,"touchAction"),it=rt!==s,ot="auto",at="manipulation",st="none",ut="pan-x",lt="pan-y",ct=function(){if(!it)return!1;var e={},t=i.CSS&&i.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(n){e[n]=!t||i.CSS.supports("touch-action",n)}),e}();K.prototype={set:function(e){"compute"==e&&(e=this.compute()),it&&this.manager.element.style&&ct[e]&&(this.manager.element.style[rt]=e),this.actions=e.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var e=[];return c(this.manager.recognizers,function(t){d(t.options.enable,[t])&&(e=e.concat(t.getTouchAction()))}),J(e.join(" "))},preventDefaults:function(e){var t=e.srcEvent,n=e.offsetDirection;if(this.manager.session.prevented)return void t.preventDefault();var r=this.actions,i=_(r,st)&&!ct[st],o=_(r,lt)&&!ct[lt],a=_(r,ut)&&!ct[ut];if(i){var s=1===e.pointers.length,u=e.distance<2,l=e.deltaTime<250;if(s&&u&&l)return}return a&&o?void 0:i||o&&n&je||a&&n&Be?this.preventSrc(t):void 0},preventSrc:function(e){this.manager.session.prevented=!0,e.preventDefault()}};var ft=1,ht=2,pt=4,dt=8,vt=dt,gt=16;Q.prototype={defaults:{},set:function(e){return de(this.options,e),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(e){if(l(e,"recognizeWith",this))return this;var t=this.simultaneous;return e=ne(e,this),t[e.id]||(t[e.id]=e,e.recognizeWith(this)),this},dropRecognizeWith:function(e){return l(e,"dropRecognizeWith",this)?this:(e=ne(e,this),delete this.simultaneous[e.id],this)},requireFailure:function(e){if(l(e,"requireFailure",this))return this;var t=this.requireFail;return e=ne(e,this),-1===E(t,e)&&(t.push(e),e.requireFailure(this)),this},dropRequireFailure:function(e){if(l(e,"dropRequireFailure",this))return this;e=ne(e,this);var t=E(this.requireFail,e);return t>-1&&this.requireFail.splice(t,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(e){return!!this.simultaneous[e.id]},emit:function(e){function t(t){n.manager.emit(t,e)}var n=this,r=this.state;r<dt&&t(n.options.event+ee(r)),t(n.options.event),e.additionalEvent&&t(e.additionalEvent),r>=dt&&t(n.options.event+ee(r))},tryEmit:function(e){if(this.canEmit())return this.emit(e);this.state=32},canEmit:function(){for(var e=0;e<this.requireFail.length;){if(!(this.requireFail[e].state&(32|ft)))return!1;e++}return!0},recognize:function(e){var t=de({},e);if(!d(this.options.enable,[this,t]))return this.reset(),void(this.state=32);this.state&(vt|gt|32)&&(this.state=ft),this.state=this.process(t),this.state&(ht|pt|dt|gt)&&this.tryEmit(t)},process:function(e){},getTouchAction:function(){},reset:function(){}},h(re,Q,{defaults:{pointers:1},attrTest:function(e){var t=this.options.pointers;return 0===t||e.pointers.length===t},process:function(e){var t=this.state,n=e.eventType,r=t&(ht|pt),i=this.attrTest(e);return r&&(n&Ie||!i)?t|gt:r||i?n&Re?t|dt:t&ht?t|pt:ht:32}}),h(ie,re,{defaults:{event:"pan",threshold:10,pointers:1,direction:Ue},getTouchAction:function(){var e=this.options.direction,t=[];return e&je&&t.push(lt),e&Be&&t.push(ut),t},directionTest:function(e){var t=this.options,n=!0,r=e.distance,i=e.direction,o=e.deltaX,a=e.deltaY;return i&t.direction||(t.direction&je?(i=0===o?Ne:o<0?Me:Le,n=o!=this.pX,r=Math.abs(e.deltaX)):(i=0===a?Ne:a<0?De:Fe,n=a!=this.pY,r=Math.abs(e.deltaY))),e.direction=i,n&&r>t.threshold&&i&t.direction},attrTest:function(e){return re.prototype.attrTest.call(this,e)&&(this.state&ht||!(this.state&ht)&&this.directionTest(e))},emit:function(e){this.pX=e.deltaX,this.pY=e.deltaY;var t=te(e.direction);t&&(e.additionalEvent=this.options.event+t),this._super.emit.call(this,e)}}),h(oe,re,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[st]},attrTest:function(e){return this._super.attrTest.call(this,e)&&(Math.abs(e.scale-1)>this.options.threshold||this.state&ht)},emit:function(e){if(1!==e.scale){var t=e.scale<1?"in":"out";e.additionalEvent=this.options.event+t}this._super.emit.call(this,e)}}),h(ae,Q,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[ot]},process:function(e){var t=this.options,n=e.pointers.length===t.pointers,r=e.distance<t.threshold,i=e.deltaTime>t.time;if(this._input=e,!r||!n||e.eventType&(Re|Ie)&&!i)this.reset();else if(e.eventType&ke)this.reset(),this._timer=u(function(){this.state=vt,this.tryEmit()},t.time,this);else if(e.eventType&Re)return vt;return 32},reset:function(){clearTimeout(this._timer)},emit:function(e){this.state===vt&&(e&&e.eventType&Re?this.manager.emit(this.options.event+"up",e):(this._input.timeStamp=be(),this.manager.emit(this.options.event,this._input)))}}),h(se,re,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[st]},attrTest:function(e){return this._super.attrTest.call(this,e)&&(Math.abs(e.rotation)>this.options.threshold||this.state&ht)}}),h(ue,re,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:je|Be,pointers:1},getTouchAction:function(){return ie.prototype.getTouchAction.call(this)},attrTest:function(e){var t,n=this.options.direction;return n&(je|Be)?t=e.overallVelocity:n&je?t=e.overallVelocityX:n&Be&&(t=e.overallVelocityY),this._super.attrTest.call(this,e)&&n&e.offsetDirection&&e.distance>this.options.threshold&&e.maxPointers==this.options.pointers&&_e(t)>this.options.velocity&&e.eventType&Re},emit:function(e){var t=te(e.offsetDirection);t&&this.manager.emit(this.options.event+t,e),this.manager.emit(this.options.event,e)}}),h(le,Q,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[at]},process:function(e){var t=this.options,n=e.pointers.length===t.pointers,r=e.distance<t.threshold,i=e.deltaTime<t.time;if(this.reset(),e.eventType&ke&&0===this.count)return this.failTimeout();if(r&&i&&n){if(e.eventType!=Re)return this.failTimeout();var o=!this.pTime||e.timeStamp-this.pTime<t.interval,a=!this.pCenter||F(this.pCenter,e.center)<t.posThreshold;this.pTime=e.timeStamp,this.pCenter=e.center,a&&o?this.count+=1:this.count=1,this._input=e;if(0===this.count%t.taps)return this.hasRequireFailures()?(this._timer=u(function(){this.state=vt,this.tryEmit()},t.interval,this),ht):vt}return 32},failTimeout:function(){return this._timer=u(function(){this.state=32},this.options.interval,this),32},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==vt&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),ce.VERSION="2.0.7",ce.defaults={domEvents:!1,touchAction:"compute",enable:!0,inputTarget:null,inputClass:null,preset:[[se,{enable:!1}],[oe,{enable:!1},["rotate"]],[ue,{direction:je}],[ie,{direction:je},["swipe"]],[le],[le,{event:"doubletap",taps:2},["tap"]],[ae]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};fe.prototype={set:function(e){return de(this.options,e),e.touchAction&&this.touchAction.update(),e.inputTarget&&(this.input.destroy(),this.input.target=e.inputTarget,this.input.init()),this},stop:function(e){this.session.stopped=e?2:1},recognize:function(e){var t=this.session;if(!t.stopped){this.touchAction.preventDefaults(e);var n,r=this.recognizers,i=t.curRecognizer;(!i||i&&i.state&vt)&&(i=t.curRecognizer=null);for(var o=0;o<r.length;)n=r[o],2===t.stopped||i&&n!=i&&!n.canRecognizeWith(i)?n.reset():n.recognize(e),!i&&n.state&(ht|pt|dt)&&(i=t.curRecognizer=n),o++}},get:function(e){if(e instanceof Q)return e;for(var t=this.recognizers,n=0;n<t.length;n++)if(t[n].options.event==e)return t[n];return null},add:function(e){if(l(e,"add",this))return this;var t=this.get(e.options.event);return t&&this.remove(t),this.recognizers.push(e),e.manager=this,this.touchAction.update(),e},remove:function(e){if(l(e,"remove",this))return this;if(e=this.get(e)){var t=this.recognizers,n=E(t,e);-1!==n&&(t.splice(n,1),this.touchAction.update())}return this},on:function(e,t){if(e!==s&&t!==s){var n=this.handlers;return c(b(e),function(e){n[e]=n[e]||[],n[e].push(t)}),this}},off:function(e,t){if(e!==s){var n=this.handlers;return c(b(e),function(e){t?n[e]&&n[e].splice(E(n[e],t),1):delete n[e]}),this}},emit:function(e,t){this.options.domEvents&&pe(e,t);var n=this.handlers[e]&&this.handlers[e].slice();if(n&&n.length){t.type=e,t.preventDefault=function(){t.srcEvent.preventDefault()};for(var r=0;r<n.length;)n[r](t),r++}},destroy:function(){this.element&&he(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},de(ce,{INPUT_START:ke,INPUT_MOVE:Pe,INPUT_END:Re,INPUT_CANCEL:Ie,STATE_POSSIBLE:ft,STATE_BEGAN:ht,STATE_CHANGED:pt,STATE_ENDED:dt,STATE_RECOGNIZED:vt,STATE_CANCELLED:gt,STATE_FAILED:32,DIRECTION_NONE:Ne,DIRECTION_LEFT:Me,DIRECTION_RIGHT:Le,DIRECTION_UP:De,DIRECTION_DOWN:Fe,DIRECTION_HORIZONTAL:je,DIRECTION_VERTICAL:Be,DIRECTION_ALL:Ue,Manager:fe,Input:C,TouchAction:K,TouchInput:q,MouseInput:z,PointerEventInput:V,TouchMouseInput:X,SingleTouchInput:G,Recognizer:Q,AttrRecognizer:re,Tap:le,Pan:ie,Swipe:ue,Pinch:oe,Rotate:se,Press:ae,on:g,off:y,each:c,merge:xe,extend:Ee,assign:de,inherit:h,bindFn:p,prefixed:T}),("undefined"!==typeof i?i:"undefined"!==typeof self?self:{}).Hammer=ce,(r=function(){return ce}.call(t,n,t,e))!==s&&(e.exports=r)}(window,document)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(9),o=r(i),a=n(6),s=r(a),u=n(7),l=r(u),c=n(84),f=n(228),h=-1!==f.userAgent.indexOf("firefox"),p=c.INPUT_EVENT_TYPES.WHEEL_EVENTS,d=function(){function e(t,n){var r=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};(0,s.default)(this,e),this.element=t,this.callback=n,this.options=(0,o.default)({enable:!0},i),this.time=0,this.wheelPosition=null,this.type=null,this.timeout=null,this.lastValue=0,this.events=p.concat(i.events||[]),this.handleEvent=this.handleEvent.bind(this),this.events.forEach(function(e){return t.addEventListener(e,r.handleEvent)})}return(0,l.default)(e,[{key:"destroy",value:function(){var e=this;this.events.forEach(function(t){return e.element.removeEventListener(t,e.handleEvent)})}},{key:"enableEventType",value:function(e,t){"wheel"===e&&(this.options.enable=t)}},{key:"handleEvent",value:function(e){if(this.options.enable){e.preventDefault();var t=e.deltaY;f.window.WheelEvent&&(h&&e.deltaMode===f.window.WheelEvent.DOM_DELTA_PIXEL&&(t/=f.window.devicePixelRatio),e.deltaMode===f.window.WheelEvent.DOM_DELTA_LINE&&(t*=40));var n=this.type,r=this.timeout,i=this.lastValue,o=this.time,a=(f.window&&f.window.performance||Date).now(),s=a-(o||0);this.wheelPosition={x:e.clientX,y:e.clientY},o=a,0!==t&&t%4.000244140625===0?(n="wheel",t=Math.floor(t/4.000244140625)):0!==t&&Math.abs(t)<4?n="trackpad":s>400?(n=null,i=t,r=f.window.setTimeout(function(){this._onWheel(e,-i,this.wheelPosition),n="wheel"}.bind(this),40)):n||(n=Math.abs(s*t)<200?"trackpad":"wheel",r&&(f.window.clearTimeout(r),r=null,t+=i)),e.shiftKey&&t&&(t*=.25),n&&this._onWheel(e,-t,this.wheelPosition)}}},{key:"_onWheel",value:function(e,t,n){this.callback({type:"wheel",center:n,delta:t,srcEvent:e,pointerType:"mouse",target:e.target})}}]),e}();t.default=d},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(9),o=r(i),a=n(6),s=r(a),u=n(7),l=r(u),c=n(84),f=c.INPUT_EVENT_TYPES.MOUSE_EVENTS,h=function(){function e(t,n){var r=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};(0,s.default)(this,e),this.element=t,this.callback=n,this.pressed=!1,this.options=(0,o.default)({enable:!0},i),this.enableMoveEvent=this.options.enable,this.enableLeaveEvent=this.options.enable,this.events=f.concat(i.events||[]),this.handleEvent=this.handleEvent.bind(this),this.events.forEach(function(e){return t.addEventListener(e,r.handleEvent)})}return(0,l.default)(e,[{key:"destroy",value:function(){var e=this;this.events.forEach(function(t){return e.element.removeEventListener(t,e.handleEvent)})}},{key:"enableEventType",value:function(e,t){"pointermove"===e&&(this.enableMoveEvent=t),"pointerleave"===e&&(this.enableLeaveEvent=t)}},{key:"handleEvent",value:function(e){if(this.enableLeaveEvent&&"mouseleave"===e.type&&this.callback({type:"pointerleave",srcEvent:e,pointerType:"mouse",target:e.target}),this.enableMoveEvent)switch(e.type){case"mousedown":e.button>=0&&(this.pressed=!0);break;case"mousemove":0===e.which&&(this.pressed=!1),this.pressed||this.callback({type:"pointermove",srcEvent:e,pointerType:"mouse",target:e.target});break;case"mouseup":this.pressed=!1}}}]),e}();t.default=h},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(9),o=r(i),a=n(6),s=r(a),u=n(7),l=r(u),c=n(84),f=c.INPUT_EVENT_TYPES.KEY_EVENTS,h=function(){function e(t,n){var r=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};(0,s.default)(this,e),this.element=t,this.callback=n,this.options=(0,o.default)({enable:!0},i),this.enableDownEvent=this.options.enable,this.enableUpEvent=this.options.enable,this.events=f.concat(i.events||[]),this.handleEvent=this.handleEvent.bind(this),t.tabIndex=1,t.style.outline="none",this.events.forEach(function(e){return t.addEventListener(e,r.handleEvent)})}return(0,l.default)(e,[{key:"destroy",value:function(){var e=this;this.events.forEach(function(t){return e.element.removeEventListener(t,e.handleEvent)})}},{key:"enableEventType",value:function(e,t){"keydown"===e&&(this.enableDownEvent=t),"keyup"===e&&(this.enableUpEvent=t)}},{key:"handleEvent",value:function(e){var t=e.target||e.srcElement;"INPUT"===t.tagName&&"text"===t.type||"TEXTAREA"===t.tagName||(this.enableDownEvent&&"keydown"===e.type&&this.callback({type:"keydown",srcEvent:e,key:e.key,target:e.target}),this.enableUpEvent&&"keyup"===e.type&&this.callback({type:"keyup",srcEvent:e,key:e.key,target:e.target}))}}]),e}();t.default=h},function(e,t,n){"use strict";function r(e){var t=c[e.srcEvent.type];if(!t)return null;var n=e.srcEvent,r=n.buttons,i=n.button,o=n.which,b=!1,E=!1,x=!1;return t===l||t===u&&!(0,a.default)(r)?(b=o===f,E=o===h,x=o===p):t===u?(b=Boolean(r&y),E=Boolean(r&_),x=Boolean(r&m)):t===s&&(b=i===d,E=i===v,x=i===g),{leftButton:b,middleButton:E,rightButton:x}}function i(e,t){var n=e.srcEvent;if(!e.center&&!(0,a.default)(n.clientX))return null;var r=e.center||{x:n.clientX,y:n.clientY},i=t.getBoundingClientRect(),o=i.width/t.offsetWidth,s=i.height/t.offsetHeight;return{center:r,offsetCenter:{x:(r.x-i.left-t.clientLeft)/o,y:(r.y-i.top-t.clientTop)/s}}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(132),a=function(e){return e&&e.__esModule?e:{default:e}}(o);t.whichButtons=r,t.getOffsetPosition=i;var s=1,u=2,l=4,c={pointerdown:s,pointermove:u,pointerup:l,mousedown:s,mousemove:u,mouseup:l},f=1,h=2,p=3,d=0,v=1,g=2,y=1,m=2,_=4},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(396),i=function(e){return e&&e.__esModule?e:{default:e}}(r),o=i.default.webkit||i.default.blink?"-webkit-":i.default.gecko?"-moz-":"";t.default={DEFAULTS:{},CURSOR:{GRABBING:o+"grabbing",GRAB:o+"grab",POINTER:"pointer"}}},function(e,t,n){!function(t,r,i){"undefined"!=typeof e&&e.exports?e.exports=i():n(230)("bowser",i)}(0,0,function(){function e(e){function t(t){var n=e.match(t);return n&&n.length>1&&n[1]||""}function n(t){var n=e.match(t);return n&&n.length>1&&n[2]||""}var r,i=t(/(ipod|iphone|ipad)/i).toLowerCase(),o=/like android/i.test(e),s=!o&&/android/i.test(e),u=/nexus\s*[0-6]\s*/i.test(e),l=!u&&/nexus\s*[0-9]+/i.test(e),c=/CrOS/.test(e),f=/silk/i.test(e),h=/sailfish/i.test(e),p=/tizen/i.test(e),d=/(web|hpw)os/i.test(e),v=/windows phone/i.test(e),g=(/SamsungBrowser/i.test(e),!v&&/windows/i.test(e)),y=!i&&!f&&/macintosh/i.test(e),m=!s&&!h&&!p&&!d&&/linux/i.test(e),_=n(/edg([ea]|ios)\/(\d+(\.\d+)?)/i),b=t(/version\/(\d+(\.\d+)?)/i),E=/tablet/i.test(e)&&!/tablet pc/i.test(e),x=!E&&/[^-]mobi/i.test(e),w=/xbox/i.test(e);/opera/i.test(e)?r={name:"Opera",opera:a,version:b||t(/(?:opera|opr|opios)[\s\/](\d+(\.\d+)?)/i)}:/opr\/|opios/i.test(e)?r={name:"Opera",opera:a,version:t(/(?:opr|opios)[\s\/](\d+(\.\d+)?)/i)||b}:/SamsungBrowser/i.test(e)?r={name:"Samsung Internet for Android",samsungBrowser:a,version:b||t(/(?:SamsungBrowser)[\s\/](\d+(\.\d+)?)/i)}:/coast/i.test(e)?r={name:"Opera Coast",coast:a,version:b||t(/(?:coast)[\s\/](\d+(\.\d+)?)/i)}:/yabrowser/i.test(e)?r={name:"Yandex Browser",yandexbrowser:a,version:b||t(/(?:yabrowser)[\s\/](\d+(\.\d+)?)/i)}:/ucbrowser/i.test(e)?r={name:"UC Browser",ucbrowser:a,version:t(/(?:ucbrowser)[\s\/](\d+(?:\.\d+)+)/i)}:/mxios/i.test(e)?r={name:"Maxthon",maxthon:a,version:t(/(?:mxios)[\s\/](\d+(?:\.\d+)+)/i)}:/epiphany/i.test(e)?r={name:"Epiphany",epiphany:a,version:t(/(?:epiphany)[\s\/](\d+(?:\.\d+)+)/i)}:/puffin/i.test(e)?r={name:"Puffin",puffin:a,version:t(/(?:puffin)[\s\/](\d+(?:\.\d+)?)/i)}:/sleipnir/i.test(e)?r={name:"Sleipnir",sleipnir:a,version:t(/(?:sleipnir)[\s\/](\d+(?:\.\d+)+)/i)}:/k-meleon/i.test(e)?r={name:"K-Meleon",kMeleon:a,version:t(/(?:k-meleon)[\s\/](\d+(?:\.\d+)+)/i)}:v?(r={name:"Windows Phone",osname:"Windows Phone",windowsphone:a},_?(r.msedge=a,r.version=_):(r.msie=a,r.version=t(/iemobile\/(\d+(\.\d+)?)/i))):/msie|trident/i.test(e)?r={name:"Internet Explorer",msie:a,version:t(/(?:msie |rv:)(\d+(\.\d+)?)/i)}:c?r={name:"Chrome",osname:"Chrome OS",chromeos:a,chromeBook:a,chrome:a,version:t(/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i)}:/edg([ea]|ios)/i.test(e)?r={name:"Microsoft Edge",msedge:a,version:_}:/vivaldi/i.test(e)?r={name:"Vivaldi",vivaldi:a,version:t(/vivaldi\/(\d+(\.\d+)?)/i)||b}:h?r={name:"Sailfish",osname:"Sailfish OS",sailfish:a,version:t(/sailfish\s?browser\/(\d+(\.\d+)?)/i)}:/seamonkey\//i.test(e)?r={name:"SeaMonkey",seamonkey:a,version:t(/seamonkey\/(\d+(\.\d+)?)/i)}:/firefox|iceweasel|fxios/i.test(e)?(r={name:"Firefox",firefox:a,version:t(/(?:firefox|iceweasel|fxios)[ \/](\d+(\.\d+)?)/i)},/\((mobile|tablet);[^\)]*rv:[\d\.]+\)/i.test(e)&&(r.firefoxos=a,r.osname="Firefox OS")):f?r={name:"Amazon Silk",silk:a,version:t(/silk\/(\d+(\.\d+)?)/i)}:/phantom/i.test(e)?r={name:"PhantomJS",phantom:a,version:t(/phantomjs\/(\d+(\.\d+)?)/i)}:/slimerjs/i.test(e)?r={name:"SlimerJS",slimer:a,version:t(/slimerjs\/(\d+(\.\d+)?)/i)}:/blackberry|\bbb\d+/i.test(e)||/rim\stablet/i.test(e)?r={name:"BlackBerry",osname:"BlackBerry OS",blackberry:a,version:b||t(/blackberry[\d]+\/(\d+(\.\d+)?)/i)}:d?(r={name:"WebOS",osname:"WebOS",webos:a,version:b||t(/w(?:eb)?osbrowser\/(\d+(\.\d+)?)/i)},/touchpad\//i.test(e)&&(r.touchpad=a)):/bada/i.test(e)?r={name:"Bada",osname:"Bada",bada:a,version:t(/dolfin\/(\d+(\.\d+)?)/i)}:p?r={name:"Tizen",osname:"Tizen",tizen:a,version:t(/(?:tizen\s?)?browser\/(\d+(\.\d+)?)/i)||b}:/qupzilla/i.test(e)?r={name:"QupZilla",qupzilla:a,version:t(/(?:qupzilla)[\s\/](\d+(?:\.\d+)+)/i)||b}:/chromium/i.test(e)?r={name:"Chromium",chromium:a,version:t(/(?:chromium)[\s\/](\d+(?:\.\d+)?)/i)||b}:/chrome|crios|crmo/i.test(e)?r={name:"Chrome",chrome:a,version:t(/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i)}:s?r={name:"Android",version:b}:/safari|applewebkit/i.test(e)?(r={name:"Safari",safari:a},b&&(r.version=b)):i?(r={name:"iphone"==i?"iPhone":"ipad"==i?"iPad":"iPod"},b&&(r.version=b)):r=/googlebot/i.test(e)?{name:"Googlebot",googlebot:a,version:t(/googlebot\/(\d+(\.\d+))/i)||b}:{name:t(/^(.*)\/(.*) /),version:n(/^(.*)\/(.*) /)},!r.msedge&&/(apple)?webkit/i.test(e)?(/(apple)?webkit\/537\.36/i.test(e)?(r.name=r.name||"Blink",r.blink=a):(r.name=r.name||"Webkit",r.webkit=a),!r.version&&b&&(r.version=b)):!r.opera&&/gecko\//i.test(e)&&(r.name=r.name||"Gecko",r.gecko=a,r.version=r.version||t(/gecko\/(\d+(\.\d+)?)/i)),r.windowsphone||!s&&!r.silk?!r.windowsphone&&i?(r[i]=a,r.ios=a,r.osname="iOS"):y?(r.mac=a,r.osname="macOS"):w?(r.xbox=a,r.osname="Xbox"):g?(r.windows=a,r.osname="Windows"):m&&(r.linux=a,r.osname="Linux"):(r.android=a,r.osname="Android");var T="";r.windows?T=function(e){switch(e){case"NT":return"NT";case"XP":return"XP";case"NT 5.0":return"2000";case"NT 5.1":return"XP";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return}}(t(/Windows ((NT|XP)( \d\d?.\d)?)/i)):r.windowsphone?T=t(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i):r.mac?(T=t(/Mac OS X (\d+([_\.\s]\d+)*)/i),T=T.replace(/[_\s]/g,".")):i?(T=t(/os (\d+([_\s]\d+)*) like mac os x/i),T=T.replace(/[_\s]/g,".")):s?T=t(/android[ \/-](\d+(\.\d+)*)/i):r.webos?T=t(/(?:web|hpw)os\/(\d+(\.\d+)*)/i):r.blackberry?T=t(/rim\stablet\sos\s(\d+(\.\d+)*)/i):r.bada?T=t(/bada\/(\d+(\.\d+)*)/i):r.tizen&&(T=t(/tizen[\/\s](\d+(\.\d+)*)/i)),T&&(r.osversion=T);var S=!r.windows&&T.split(".")[0];return E||l||"ipad"==i||s&&(3==S||S>=4&&!x)||r.silk?r.tablet=a:(x||"iphone"==i||"ipod"==i||s||u||r.blackberry||r.webos||r.bada)&&(r.mobile=a),r.msedge||r.msie&&r.version>=10||r.yandexbrowser&&r.version>=15||r.vivaldi&&r.version>=1||r.chrome&&r.version>=20||r.samsungBrowser&&r.version>=4||r.firefox&&r.version>=20||r.safari&&r.version>=6||r.opera&&r.version>=10||r.ios&&r.osversion&&r.osversion.split(".")[0]>=6||r.blackberry&&r.version>=10.1||r.chromium&&r.version>=20?r.a=a:r.msie&&r.version<10||r.chrome&&r.version<20||r.firefox&&r.version<20||r.safari&&r.version<6||r.opera&&r.version<10||r.ios&&r.osversion&&r.osversion.split(".")[0]<6||r.chromium&&r.version<20?r.c=a:r.x=a,r}function t(e){return e.split(".").length}function n(e,t){var n,r=[];if(Array.prototype.map)return Array.prototype.map.call(e,t);for(n=0;n<e.length;n++)r.push(t(e[n]));return r}function r(e){for(var r=Math.max(t(e[0]),t(e[1])),i=n(e,function(e){var i=r-t(e);return e+=new Array(i+1).join(".0"),n(e.split("."),function(e){return new Array(20-e.length).join("0")+e}).reverse()});--r>=0;){if(i[0][r]>i[1][r])return 1;if(i[0][r]!==i[1][r])return-1;if(0===r)return 0}}function i(t,n,i){var o=s;"string"===typeof n&&(i=n,n=void 0),void 0===n&&(n=!1),i&&(o=e(i));var a=""+o.version;for(var u in t)if(t.hasOwnProperty(u)&&o[u]){if("string"!==typeof t[u])throw new Error("Browser version in the minVersion map should be a string: "+u+": "+String(t));return r([a,t[u]])<0}return n}function o(e,t,n){return!i(e,t,n)}var a=!0,s=e("undefined"!==typeof navigator?navigator.userAgent||"":"");return s.test=function(e){for(var t=0;t<e.length;++t){var n=e[t];if("string"===typeof n&&n in s)return!0}return!1},s.isUnsupportedBrowser=i,s.compareVersions=r,s.check=o,s._detect=e,s.detect=e,s})},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(82),o=r(i),a=n(11),s=r(a),u=n(6),l=r(u),c=n(7),f=r(c),h=n(14),p=r(h),d=n(15),v=r(d),g=n(9),y=r(g),m=n(5),_=n(10),b=r(_),E=n(34),x=r(E),w=(0,y.default)({},x.default.propTypes,{className:b.default.string,longitude:b.default.number.isRequired,latitude:b.default.number.isRequired,offsetLeft:b.default.number,offsetTop:b.default.number}),T=(0,y.default)({},x.default.defaultProps,{className:"",offsetLeft:0,offsetTop:0}),S=function(e){function t(){return(0,l.default)(this,t),(0,p.default)(this,(t.__proto__||(0,s.default)(t)).apply(this,arguments))}return(0,v.default)(t,e),(0,f.default)(t,[{key:"render",value:function(){var e=this.props,t=e.className,n=e.longitude,r=e.latitude,i=e.offsetLeft,a=e.offsetTop,s=this.context.viewport.project([n,r]),u=(0,o.default)(s,2),l=u[0],c=u[1],f={position:"absolute",left:l+i,top:c+a};return(0,m.createElement)("div",{className:"mapboxgl-marker "+t,ref:this._onContainerLoad,style:f,children:this.props.children})}}]),t}(x.default);t.default=S,S.displayName="Marker",S.propTypes=w,S.defaultProps=T},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(82),o=r(i),a=n(11),s=r(a),u=n(6),l=r(u),c=n(7),f=r(c),h=n(14),p=r(h),d=n(15),v=r(d),g=n(57),y=r(g),m=n(9),_=r(m),b=n(5),E=n(10),x=r(E),w=n(34),T=r(w),S=n(44),A=r(S),C=n(399),O=(0,_.default)({},T.default.propTypes,{className:x.default.string,longitude:x.default.number.isRequired,latitude:x.default.number.isRequired,offsetLeft:x.default.number,offsetTop:x.default.number,tipSize:x.default.number,closeButton:x.default.bool,closeOnClick:x.default.bool,anchor:x.default.oneOf((0,y.default)(C.ANCHOR_POSITION)),dynamicPosition:x.default.bool,onClose:x.default.func}),k=(0,_.default)({},T.default.defaultProps,{className:"",offsetLeft:0,offsetTop:0,tipSize:10,anchor:"bottom",dynamicPosition:!0,closeButton:!0,closeOnClick:!0,onClose:function(){}}),P=function(e){function t(e){(0,l.default)(this,t);var n=(0,p.default)(this,(t.__proto__||(0,s.default)(t)).call(this,e));return(0,A.default)(n),n}return(0,v.default)(t,e),(0,f.default)(t,[{key:"componentDidMount",value:function(){this.forceUpdate()}},{key:"_getPosition",value:function(e,t){var n=this.context.viewport,r=this.props,i=r.anchor,o=r.dynamicPosition,a=r.tipSize;return this._content&&o?(0,C.getDynamicPosition)({x:e,y:t,anchor:i,padding:a,width:n.width,height:n.height,selfWidth:this._content.clientWidth,selfHeight:this._content.clientHeight}):i}},{key:"_onClose",value:function(){this.props.onClose()}},{key:"_contentLoaded",value:function(e){this._content=e}},{key:"_renderTip",value:function(){var e=this.props.tipSize;return(0,b.createElement)("div",{key:"tip",className:"mapboxgl-popup-tip",style:{borderWidth:e}})}},{key:"_renderContent",value:function(){var e=this.props,t=e.closeButton,n=e.children;return(0,b.createElement)("div",{key:"content",ref:this._contentLoaded,className:"mapboxgl-popup-content"},[t&&(0,b.createElement)("button",{key:"close-button",className:"mapboxgl-popup-close-button",type:"button",onClick:this._onClose},"\xd7"),n])}},{key:"render",value:function(){var e=this.props,t=e.className,n=e.longitude,r=e.latitude,i=e.offsetLeft,a=e.offsetTop,s=e.closeOnClick,u=this.context.viewport.project([n,r]),l=(0,o.default)(u,2),c=l[0],f=l[1],h=this._getPosition(c,f),p=C.ANCHOR_POSITION[h],d={position:"absolute",left:c+i,top:f+a,transform:"translate("+100*-p.x+"%, "+100*-p.y+"%)"};return(0,b.createElement)("div",{className:"mapboxgl-popup mapboxgl-popup-anchor-"+h+" "+t,style:d,ref:this._onContainerLoad,onClick:s?this._onClose:null},[this._renderTip(),this._renderContent()])}}]),t}(T.default);t.default=P,P.displayName="Popup",P.propTypes=O,P.defaultProps=k},function(e,t,n){"use strict";function r(e){var t=e.x,n=e.y,r=e.width,i=e.height,s=e.selfWidth,u=e.selfHeight,l=e.anchor,c=e.padding,f=void 0===c?0:c,h=a[l],p=h.x,d=h.y,v=n-d*u,g=v+u;if(v<f)for(;v<f&&d>=.5;)d-=.5,v+=.5*u;else if(g>i-f)for(;g>i-f&&d<=.5;)d+=.5,g-=.5*u;var y=t-p*s,m=y+s,_=.5;if(.5===d&&(p=Math.floor(p),_=1),y<f)for(;y<f&&p>=_;)p-=_,y+=_*s;else if(m>r-f)for(;m>r-f&&p<=1-_;)p+=_,m-=_*s;return(0,o.default)(a).find(function(e){var t=a[e];return t.x===p&&t.y===d})}Object.defineProperty(t,"__esModule",{value:!0}),t.ANCHOR_POSITION=void 0;var i=n(57),o=function(e){return e&&e.__esModule?e:{default:e}}(i);t.getDynamicPosition=r;var a=t.ANCHOR_POSITION={top:{x:.5,y:0},"top-left":{x:0,y:0},"top-right":{x:1,y:0},bottom:{x:.5,y:1},"bottom-left":{x:0,y:1},"bottom-right":{x:1,y:1},left:{x:0,y:.5},right:{x:1,y:.5}}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(11),o=r(i),a=n(6),s=r(a),u=n(7),l=r(u),c=n(14),f=r(c),h=n(15),p=r(h),d=n(9),v=r(d),g=n(5),y=n(10),m=r(y),_=n(34),b=r(_),E=n(44),x=r(E),w=n(81),T=r(w),S=n(83),A=r(S),C=n(231),O=r(C),k=(0,v.default)({},A.default.defaultProps,{transitionDuration:300}),P=(0,v.default)({},b.default.propTypes,{className:m.default.string,onViewportChange:m.default.func.isRequired}),R=(0,v.default)({},b.default.defaultProps,{className:"",onViewportChange:function(){}}),I=function(e){function t(e){(0,s.default)(this,t);var n=(0,f.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e));return(0,x.default)(n),(0,O.default)(e),n}return(0,p.default)(t,e),(0,l.default)(t,[{key:"shouldComponentUpdate",value:function(e,t,n){return this.context.viewport.bearing!==n.viewport.bearing}},{key:"_updateViewport",value:function(e){var t=this.context.viewport,n=new T.default((0,v.default)({},t,e));(this.props.onChangeViewport||this.props.onViewportChange)((0,v.default)({},n.getViewportProps(),k))}},{key:"_onZoomIn",value:function(){this._updateViewport({zoom:this.context.viewport.zoom+1})}},{key:"_onZoomOut",value:function(){this._updateViewport({zoom:this.context.viewport.zoom-1})}},{key:"_onResetNorth",value:function(){this._updateViewport({bearing:0,pitch:0})}},{key:"_renderCompass",value:function(){var e=this.context.viewport.bearing;return(0,g.createElement)("span",{className:"mapboxgl-ctrl-compass-arrow",style:{transform:"rotate("+e+"deg)"}})}},{key:"_renderButton",value:function(e,t,n,r){return(0,g.createElement)("button",{key:e,className:"mapboxgl-ctrl-icon mapboxgl-ctrl-"+e,type:"button",title:t,onClick:n,children:r})}},{key:"render",value:function(){var e=this.props.className;return(0,g.createElement)("div",{className:"mapboxgl-ctrl mapboxgl-ctrl-group "+e,ref:this._onContainerLoad},[this._renderButton("zoom-in","Zoom In",this._onZoomIn),this._renderButton("zoom-out","Zoom Out",this._onZoomOut),this._renderButton("compass","Reset North",this._onResetNorth,this._renderCompass())])}}]),t}(b.default);t.default=I,I.displayName="NavigationControl",I.propTypes=P,I.defaultProps=R},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(11),o=r(i),a=n(6),s=r(a),u=n(7),l=r(u),c=n(14),f=r(c),h=n(15),p=r(h),d=n(9),v=r(d),g=n(5),y=n(10),m=r(y),_=n(34),b=r(_),E=n(402),x=n(44),w=r(x),T=(0,v.default)({},b.default.propTypes,{redraw:m.default.func.isRequired}),S={captureScroll:!1,captureDrag:!1,captureClick:!1,captureDoubleClick:!1},A=function(e){function t(e){(0,s.default)(this,t);var n=(0,f.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e));return(0,w.default)(n),n}return(0,p.default)(t,e),(0,l.default)(t,[{key:"componentDidMount",value:function(){this._redraw()}},{key:"componentDidUpdate",value:function(){this._redraw()}},{key:"_redraw",value:function(){var e=E.window.devicePixelRatio||1,t=this._canvas,n=t.getContext("2d");n.save(),n.scale(e,e);var r=this.context,i=r.viewport,o=r.isDragging;this.props.redraw({width:i.width,height:i.height,ctx:n,isDragging:o,project:i.project.bind(i),unproject:i.unproject.bind(i)}),n.restore()}},{key:"_canvasLoaded",value:function(e){this._canvas=e,this._onContainerLoad(e)}},{key:"render",value:function(){var e=E.window.devicePixelRatio||1,t=this.context.viewport,n=t.width,r=t.height;return(0,g.createElement)("canvas",{ref:this._canvasLoaded,width:n*e,height:r*e,style:{width:n+"px",height:r+"px",position:"absolute",pointerEvents:"none",left:0,top:0}})}}]),t}(b.default);t.default=A,A.displayName="CanvasOverlay",A.propTypes=T,A.defaultProps=S},function(e,t,n){"use strict";(function(t){e.exports={window:"undefined"!==typeof window?window:t,global:"undefined"!==typeof t?t:window,document:"undefined"!==typeof document?document:{}}}).call(t,n(18))},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(11),o=r(i),a=n(6),s=r(a),u=n(7),l=r(u),c=n(14),f=r(c),h=n(15),p=r(h),d=n(9),v=r(d),g=n(5),y=n(10),m=r(y),_=n(34),b=r(_),E=(0,v.default)({},b.default.propTypes,{redraw:m.default.func.isRequired,style:m.default.object}),x={captureScroll:!1,captureDrag:!1,captureClick:!1,captureDoubleClick:!1},w=function(e){function t(){return(0,s.default)(this,t),(0,f.default)(this,(t.__proto__||(0,o.default)(t)).apply(this,arguments))}return(0,p.default)(t,e),(0,l.default)(t,[{key:"render",value:function(){var e=this.context,t=e.viewport,n=e.isDragging,r=(0,v.default)({position:"absolute",pointerEvents:"none",left:0,top:0,width:t.width,height:t.height},this.props.style);return(0,g.createElement)("div",{ref:this._onContainerLoad,style:r},this.props.redraw({width:t.width,height:t.height,isDragging:n,project:t.project.bind(t),unproject:t.unproject.bind(t)}))}}]),t}(b.default);t.default=w,w.displayName="HTMLOverlay",w.propTypes=E,w.defaultProps=x},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(11),o=r(i),a=n(6),s=r(a),u=n(7),l=r(u),c=n(14),f=r(c),h=n(15),p=r(h),d=n(9),v=r(d),g=n(5),y=n(10),m=r(y),_=n(34),b=r(_),E=(0,v.default)({},b.default.propTypes,{redraw:m.default.func.isRequired,style:m.default.object}),x={captureScroll:!1,captureDrag:!1,captureClick:!1,captureDoubleClick:!1},w=function(e){function t(){return(0,s.default)(this,t),(0,f.default)(this,(t.__proto__||(0,o.default)(t)).apply(this,arguments))}return(0,p.default)(t,e),(0,l.default)(t,[{key:"render",value:function(){var e=this.context,t=e.viewport,n=e.isDragging,r=(0,v.default)({pointerEvents:"none",position:"absolute",left:0,top:0},this.props.style);return(0,g.createElement)("svg",{width:t.width,height:t.height,ref:this._onContainerLoad,style:r},this.props.redraw({width:t.width,height:t.height,isDragging:n,project:t.project.bind(t),unproject:t.unproject.bind(t)}))}}]),t}(b.default);t.default=w,w.displayName="SVGOverlay",w.propTypes=E,w.defaultProps=x},function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function a(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=n(5),u=n.n(s),l=n(406),c=n(4),f=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),h={Accommodations:[152,78,163],"Arts Entertainment and Recreation":[55,126,184],"Food Services":[247,129,191],"Retail Trade":[77,175,74],"Everything Else":[255,127,0],2:[166,86,40],3:[228,26,28]},p=function(e){function t(e){return i(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return a(t,e),f(t,[{key:"_initialize",value:function(e){Object(c.q)(e,{depthTest:!0,depthFunc:e.LEQUAL,blend:!0,blendColor:new Float32Array([.5,.5,.5,0]),blendEquation:[e.FUNC_SUBTRACT,e.MIN],blendFunc:[e.SRC_COLOR,e.DST_COLOR,e.SRC_ALPHA,e.DST_ALPHA]})}},{key:"_getLayer",value:function(e){var t;return new l.a((t={id:"heatmap",data:e.data,radiusScale:4,outline:!0,radiusMinPixels:1},r(t,"radiusMinPixels",2),r(t,"getPosition",function(e){return[parseFloat(e.lng),parseFloat(e.lat),0]}),r(t,"strokeWidth",4),r(t,"onHover",e.onHover),r(t,"onClick",e.onClick),r(t,"getColor",function(e){return h[e.business_type]?h[e.business_type]:[255,127,0,30]}),r(t,"fp64",!0),r(t,"pickable",!0),t))}},{key:"render",value:function(){if(!this.props.data)return console.log("no data"),null;var e=this._getLayer(this.props);return u.a.createElement(l.b,Object.assign({},this.props.viewport,{layers:[e]}))}}],[{key:"defaultViewport",get:function(){return{longitude:-122.4726194,latitude:37.7576948,zoom:12,maxZoom:16,pitch:0,bearing:0}}}]),t}(s.Component);t.a=p},function(e,t,n){"use strict";var r=n(3),i=n(478);n.d(t,"a",function(){return i.a});var o=n(524),a=n(289);n.d(t,"b",function(){return a.d});var s={},u=r.d.ViewState,l=r.d.FirstPersonState,c=r.d.OrbitState,f=r.d.MapState,h=r.d.Controller,p=r.d.FirstPersonController,d=r.d.FirstPersonViewport,v=r.d.OrbitViewport,g=r.d.ThirdPersonViewport,y=r.d.TRANSITION_EVENTS,m=r.d.LinearInterpolator,_=r.d.ViewportFlyToInterpolator,b=r.d.DeckGLJS,E=r.d.MapControllerJS,x=r.d.EffectManager,w=r.d.Effect;Object.assign(s,{ViewState:u,FirstPersonState:l,OrbitState:c,MapState:f,Controller:h,FirstPersonController:p,FirstPersonViewport:d,OrbitViewport:v,ThirdPersonViewport:g,TRANSITION_EVENTS:y,LinearInterpolator:m,ViewportFlyToInterpolator:_,DeckGLJS:b,MapControllerJS:E,EffectManager:x,Effect:w});var T=r.d.TransitionManager,S=r.d.extractViewportFrom,A=r.d.BinSorter,C=r.d.linearScale,O=r.d.getLinearScale,k=r.d.quantizeScale,P=r.d.getQuantizeScale,R=r.d.clamp,I=r.d.defaultColorRange,N=r.d.log,M=r.d.get,L=r.d.count,D=r.d.flatten,F=r.d.countVertices,j=r.d.flattenVertices,B=r.d.fillArray,U=r.d.enable64bitSupport,z=r.d.fp64ify,V=r.d.fp64LowPart;Object.assign(s,{TransitionManager:T,extractViewportFrom:S,BinSorter:A,linearScale:C,getLinearScale:O,quantizeScale:k,getQuantizeScale:P,clamp:R,defaultColorRange:I,log:N,get:M,count:L,flatten:D,countVertices:F,flattenVertices:j,fillArray:B,enable64bitSupport:U,fp64ify:z,fp64LowPart:V}),Object.assign(s,{ReflectionEffect:o.a}),Object.assign(s,{MapController:a.a,OrbitController:a.b,ViewportController:a.c})},function(e,t,n){"use strict";var r=n(408),i=(n.n(r),n(12));if(r.global.deck&&"5.0.2"!==r.global.deck.VERSION)throw new Error("deck.gl - multiple versions detected: "+r.global.deck.VERSION+" vs 5.0.2");r.global.deck||(console.log("deck.gl 5.0.2 - set deck.log.priority=1 (or higher) to trace attribute updates"),r.global.deck=r.global.deck||{VERSION:"5.0.2",version:"5.0.2",log:i.a}),console.table||(console.table=function(){}),n(232)},function(e,t,n){(function(t,n){var r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i="object"!==("undefined"===typeof t?"undefined":r(t))||"[object process]"!==String(t)||t.browser;e.exports={window:"undefined"!==typeof window?window:n,global:"undefined"!==typeof n?n:window,document:"undefined"!==typeof document?document:{},isBrowser:i}}).call(t,n(45),n(18))},function(e,t,n){"use strict";function r(e,t){if("string"!==typeof t)return t;var n=Number(t);if(!isNaN(n))return n;t=t.replace(/^.*\./,"");var r=e[t];return s()(void 0!==r,"Accessing undefined constant GL."+t),r}function i(e,t){t=Number(t);for(var n in e)if(e[n]===t)return"gl."+n;return String(t)}function o(e,t){s()(void 0!==t,"undefined key"),t=Number(t);for(var n in e)if(e[n]===t)return"gl."+n;return String(t)}t.c=r,t.a=i,t.b=o;var a=n(0),s=n.n(a)},function(e,t,n){"use strict";function r(){return h}function i(e){var t=e.width,n=void 0===t?800:t,i=e.height,o=void 0===i?600:i,a=e.id,s=void 0===a?"gl-canvas":a,u=e.insert,l=void 0===u||u,c=document.createElement("canvas");return c.id=s,c.style.width=Number.isFinite(n)?n+"px":"100%",c.style.height=Number.isFinite(o)?o+"px":"100%",l&&r().then(function(e){var t=e.body;t.insertBefore(c,t.firstChild)}),c}function o(e){var t=e.id;if(!f)throw new Error("createGLContext called on canvas '"+t+"' before page was loaded");return document.getElementById(t)}function a(e){return{width:e.clientWidth,height:e.clientHeight}}function s(e,t){var n=t.useDevicePixelRatio,r=void 0===n?null:n,i=t.useDevicePixels,o=void 0===i||i;null!==r&&(l.e.deprecated("useDevicePixelRatio","useDevicePixels"),o=r);var s=o?window.devicePixelRatio||1:1,u=a(e);return{width:Math.floor(u.width*s),height:Math.floor(u.height*s),devicePixelRatio:s}}function u(e,t){var n=t.useDevicePixelRatio,r=void 0===n?null:n,i=t.useDevicePixels,o=void 0===i||i;null!==r&&(l.e.deprecated("useDevicePixelRatio","useDevicePixels"),o=r);var a=s(e,{useDevicePixels:o});a.width===e.width&&a.height===e.height||(e.width=a.width,e.height=a.height)}t.c=r,t.a=i,t.b=o,t.d=u;var l=n(2),c="undefined"!==typeof window,f=c&&"complete"===document.readyState,h=c?new Promise(function(e,t){if(f)return void e(document);window.onload=function(){f=!0,e(document)}}):Promise.resolve({})},function(e,t,n){"use strict"},function(e,t,n){"use strict";function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"id";return s[e]=s[e]||1,e+"-"+s[e]++}function i(e){return a()("number"===typeof e,"Input must be a number"),e&&0===(e&e-1)}t.b=r,t.a=i;var o=n(0),a=n.n(o),s={}},function(e,t,n){"use strict";function r(e){function t(e){a("WebGL context: "+(e.statusMessage||"Unknown error"))}var n=e.canvas,r=e.opts,i=void 0===r?{}:r,o=e.onError,a=void 0===o?function(e){return null}:o;n.addEventListener("webglcontextcreationerror",t,!1);var s=i.webgl1,u=void 0===s||s,l=i.webgl2,c=void 0===l||l,f=null;return c&&(f=f||n.getContext("webgl2",i),f=f||n.getContext("experimental-webgl2",i)),u&&(f=f||n.getContext("webgl",i),f=f||n.getContext("experimental-webgl",i)),n.removeEventListener("webglcontextcreationerror",t,!1),f||a("Failed to create "+(c&&!u?"WebGL2":"WebGL")+" context")}t.a=r;var i=n(0);n.n(i)},function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e){return e&&32874===e.TEXTURE_BINDING_3D}function o(e,t,n){var r=l[n],i="function"===typeof r?r(e,t,n):r;return void 0!==i?i:t(n)}t.a=o;var a,s=n(27),u=function(e){return i(e)?void 0:0},l=(a={},r(a,s.a.READ_BUFFER,function(e){return i(e)?void 0:s.a.COLOR_ATTACHMENT0}),r(a,35723,function(e){return i(e)?void 0:4352}),r(a,s.a.RASTERIZER_DISCARD,u),r(a,s.a.SAMPLES,u),r(a,36795,function(e,t){var n=i(e)?e.getExtension("EXT_disjoint_timer_query_webgl2"):e.getExtension("EXT_disjoint_timer_query");return n&&n.GPU_DISJOINT_EXT?t(n.GPU_DISJOINT_EXT):0}),r(a,37445,function(e,t){var n=e.getExtension("WEBGL_debug_renderer_info");return t(n&&n.UNMASKED_VENDOR_WEBGL||s.a.VENDOR)}),r(a,37446,function(e,t){var n=e.getExtension("WEBGL_debug_renderer_info");return t(n&&n.UNMASKED_RENDERER_WEBGL||s.a.RENDERER)}),r(a,34047,function(e,t){var n=e.luma.extensions.EXT_texture_filter_anisotropic;return n?t(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT):1}),r(a,s.a.MAX_3D_TEXTURE_SIZE,u),r(a,s.a.MAX_ARRAY_TEXTURE_LAYERS,u),r(a,s.a.MAX_CLIENT_WAIT_TIMEOUT_WEBGL,u),r(a,s.a.MAX_COLOR_ATTACHMENTS,function(e,t){if(!i(e)){var n=e.getExtension("WEBGL_draw_buffers");return n?t(n.MAX_COLOR_ATTACHMENTS_WEBGL):0}}),r(a,s.a.MAX_COMBINED_FRAGMENT_UNIFORM_COMPONENTS,u),r(a,s.a.MAX_COMBINED_UNIFORM_BLOCKS,u),r(a,s.a.MAX_COMBINED_VERTEX_UNIFORM_COMPONENTS,u),r(a,s.a.MAX_DRAW_BUFFERS,function(e){if(!i(e)){var t=e.getExtension("WEBGL_draw_buffers");return t?t.MAX_DRAW_BUFFERS_WEBGL:0}}),r(a,s.a.MAX_ELEMENT_INDEX,function(e){return e.getExtension("OES_element_index")?2147483647:65535}),r(a,s.a.MAX_ELEMENTS_INDICES,function(e){return e.getExtension("OES_element_index")?16777216:65535}),r(a,s.a.MAX_ELEMENTS_VERTICES,function(e){return 16777216}),r(a,s.a.MAX_FRAGMENT_INPUT_COMPONENTS,u),r(a,s.a.MAX_FRAGMENT_UNIFORM_BLOCKS,u),r(a,s.a.MAX_FRAGMENT_UNIFORM_COMPONENTS,u),r(a,s.a.MAX_SAMPLES,u),r(a,s.a.MAX_SERVER_WAIT_TIMEOUT,u),r(a,s.a.MAX_TEXTURE_LOD_BIAS,u),r(a,s.a.MAX_TRANSFORM_FEEDBACK_INTERLEAVED_COMPONENTS,u),r(a,s.a.MAX_TRANSFORM_FEEDBACK_SEPARATE_ATTRIBS,u),r(a,s.a.MAX_TRANSFORM_FEEDBACK_SEPARATE_COMPONENTS,u),r(a,s.a.MAX_UNIFORM_BLOCK_SIZE,u),r(a,s.a.MAX_UNIFORM_BUFFER_BINDINGS,u),r(a,s.a.MAX_VARYING_COMPONENTS,u),r(a,s.a.MAX_VERTEX_OUTPUT_COMPONENTS,u),r(a,s.a.MAX_VERTEX_UNIFORM_BLOCKS,u),r(a,s.a.MAX_VERTEX_UNIFORM_COMPONENTS,u),r(a,s.a.MIN_PROGRAM_TEXEL_OFFSET,u),r(a,s.a.MAX_PROGRAM_TEXEL_OFFSET,u),r(a,s.a.UNIFORM_BUFFER_OFFSET_ALIGNMENT,u),a)},function(e,t,n){"use strict";function r(e,t,n){for(var r=e.split(/\r?\n/),a={},u={},l=Object(s.a)(t)||"(unnamed)",c=Object(s.b)(n)+" shader "+l,f=0;f<r.length;f++){var h=r[f];if(!(h.length<=1)){var p=h.split(":"),d=p[0],v=parseInt(p[2],10);if(isNaN(v))throw new Error("GLSL compilation error in "+c+": "+e);"WARNING"!==d?a[v]=h:u[v]=h}}var g=o(t);return{shaderName:c,errors:i(a,g),warnings:i(u,g)}}function i(e,t){for(var n="",r=0;r<t.length;r++){var i=t[r];if((e[r+3]||e[r+2]||e[r+1])&&(n+=i+"\n",e[r+1])){var o=e[r+1],s=o.split(":",3),u=s[0],l=parseInt(s[1],10)||0;n+=a("^^^ "+u+": "+o.substring(s.join(":").length+1).trim()+"\n\n",l)}}return n}function o(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:": ",r=e.split(/\r?\n/),i=String(r.length+t-1).length;return r.map(function(e,r){var o=r+t,s=String(o).length;return a(o,i-s)+n+e})}function a(e,t){for(var n="",r=0;r<t;++r)n+=" ";return""+n+e}t.a=r;var s=n(237)},function(e,t,n){(function(t){WebGLDebugUtils=function(){function e(e){if(null==d){d={},v={};for(var t in e)"number"==typeof e[t]&&(d[e[t]]=t,v[t]=e[t])}}function n(){if(null==d)throw"WebGLDebugUtils.init(ctx) not called"}function r(e){return n(),void 0!==d[e]}function i(e){n();var t=d[e];return void 0!==t?"gl."+t:"/*UNKNOWN WebGL ENUM*/ 0x"+e.toString(16)}function o(e,t,n,r){var o=p[e];if(void 0!==o){var o=o[t];if(void 0!==o&&o[n]){if("object"===typeof o[n]&&void 0!==o[n].enumBitwiseOr){for(var a=o[n].enumBitwiseOr,s=0,u=[],l=0;l<a.length;++l){var c=v[a[l]];0!==(r&c)&&(s|=c,u.push(i(c)))}return s===r?u.join(" | "):i(r)}return i(r)}}return null===r?"null":void 0===r?"undefined":r.toString()}function a(e,t){for(var n="",r=t.length,i=0;i<r;++i)n+=(0==i?"":", ")+o(e,r,i,t[i]);return n}function s(e,t,n){e.__defineGetter__(n,function(){return t[n]}),e.__defineSetter__(n,function(e){t[n]=e})}function u(t,n,r,a){function l(e,t){return function(){r&&r(t,arguments);var i=e[t].apply(e,arguments),o=a.getError();return 0!=o&&(c[o]=!0,n(o,t,arguments)),i}}a=a||t,e(t),n=n||function(e,t,n){for(var r="",a=n.length,s=0;s<a;++s)r+=(0==s?"":", ")+o(t,a,s,n[s]);h("WebGL error "+i(e)+" in "+t+"("+r+")")};var c={},f={};for(var p in t)if("function"==typeof t[p])if("getExtension"!=p)f[p]=l(t,p);else{var d=l(t,p);f[p]=function(){return u(d.apply(t,arguments),n,r,a)}}else s(f,t,p);return f.getError=function(){for(var e in c)if(c.hasOwnProperty(e)&&c[e])return c[e]=!1,e;return t.NO_ERROR},f}function l(e){var t=e.getParameter(e.MAX_VERTEX_ATTRIBS),n=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,n);for(var r=0;r<t;++r)e.disableVertexAttribArray(r),e.vertexAttribPointer(r,4,e.FLOAT,!1,0,0),e.vertexAttrib1f(r,0);e.deleteBuffer(n);for(var i=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),r=0;r<i;++r)e.activeTexture(e.TEXTURE0+r),e.bindTexture(e.TEXTURE_CUBE_MAP,null),e.bindTexture(e.TEXTURE_2D,null);for(e.activeTexture(e.TEXTURE0),e.useProgram(null),e.bindBuffer(e.ARRAY_BUFFER,null),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.bindRenderbuffer(e.RENDERBUFFER,null),e.disable(e.BLEND),e.disable(e.CULL_FACE),e.disable(e.DEPTH_TEST),e.disable(e.DITHER),e.disable(e.SCISSOR_TEST),e.blendColor(0,0,0,0),e.blendEquation(e.FUNC_ADD),e.blendFunc(e.ONE,e.ZERO),e.clearColor(0,0,0,0),e.clearDepth(1),e.clearStencil(-1),e.colorMask(!0,!0,!0,!0),e.cullFace(e.BACK),e.depthFunc(e.LESS),e.depthMask(!0),e.depthRange(0,1),e.frontFace(e.CCW),e.hint(e.GENERATE_MIPMAP_HINT,e.DONT_CARE),e.lineWidth(1),e.pixelStorei(e.PACK_ALIGNMENT,4),e.pixelStorei(e.UNPACK_ALIGNMENT,4),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,!1),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),e.UNPACK_COLORSPACE_CONVERSION_WEBGL&&e.pixelStorei(e.UNPACK_COLORSPACE_CONVERSION_WEBGL,e.BROWSER_DEFAULT_WEBGL),e.polygonOffset(0,0),e.sampleCoverage(1,!1),e.scissor(0,0,e.canvas.width,e.canvas.height),e.stencilFunc(e.ALWAYS,0,4294967295),e.stencilMask(4294967295),e.stencilOp(e.KEEP,e.KEEP,e.KEEP),e.viewport(0,0,e.canvas.width,e.canvas.height),e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT|e.STENCIL_BUFFER_BIT);e.getError(););}function c(e){function t(e){return"function"==typeof e?e:function(t){e.handleEvent(t)}}function n(){for(var e=Object.keys(E),t=0;t<e.length;++t)delete E[e]}function r(){++m,v||y==m&&e.loseContext()}function i(e,t){var n=e[t];return function(){if(r(),!v){return n.apply(e,arguments)}}}function o(){for(var e=0;e<g.length;++e){var t=g[e];t instanceof WebGLBuffer?c.deleteBuffer(t):t instanceof WebGLFramebuffer?c.deleteFramebuffer(t):t instanceof WebGLProgram?c.deleteProgram(t):t instanceof WebGLRenderbuffer?c.deleteRenderbuffer(t):t instanceof WebGLShader?c.deleteShader(t):t instanceof WebGLTexture&&c.deleteTexture(t)}}function a(e){return{statusMessage:e,preventDefault:function(){_=!0}}}function u(e){for(var t in e)"function"==typeof e[t]?f[t]=i(e,t):s(f,e,t);f.getError=function(){if(r(),!v)for(var e;e=c.getError();)E[e]=!0;for(var e in E)if(E[e])return delete E[e],e;return f.NO_ERROR};for(var n=["createBuffer","createFramebuffer","createProgram","createRenderbuffer","createShader","createTexture"],o=0;o<n.length;++o){var a=n[o];f[a]=function(t){return function(){if(r(),v)return null;var n=t.apply(e,arguments);return n.__webglDebugContextLostId__=d,g.push(n),n}}(e[a])}for(var u=["getActiveAttrib","getActiveUniform","getBufferParameter","getContextAttributes","getAttachedShaders","getFramebufferAttachmentParameter","getParameter","getProgramParameter","getProgramInfoLog","getRenderbufferParameter","getShaderParameter","getShaderInfoLog","getShaderSource","getTexParameter","getUniform","getUniformLocation","getVertexAttrib"],o=0;o<u.length;++o){var a=u[o];f[a]=function(t){return function(){return r(),v?null:t.apply(e,arguments)}}(f[a])}for(var l=["isBuffer","isEnabled","isFramebuffer","isProgram","isRenderbuffer","isShader","isTexture"],o=0;o<l.length;++o){var a=l[o];f[a]=function(t){return function(){return r(),!v&&t.apply(e,arguments)}}(f[a])}return f.checkFramebufferStatus=function(t){return function(){return r(),v?f.FRAMEBUFFER_UNSUPPORTED:t.apply(e,arguments)}}(f.checkFramebufferStatus),f.getAttribLocation=function(t){return function(){return r(),v?-1:t.apply(e,arguments)}}(f.getAttribLocation),f.getVertexAttribOffset=function(t){return function(){return r(),v?0:t.apply(e,arguments)}}(f.getVertexAttribOffset),f.isContextLost=function(){return v},f}var c,f,h=[],p=[],f={},d=1,v=!1,g=[],y=0,m=0,_=!1,b=0,E={};e.getContext=function(t){return function(){var n=t.apply(e,arguments);if(n instanceof WebGLRenderingContext){if(n!=c){if(c)throw"got different context";c=n,f=u(c)}return f}return n}}(e.getContext);var x=function(e){h.push(t(e))},w=function(e){p.push(t(e))};return function(e){var t=e.addEventListener;e.addEventListener=function(n,r,i){switch(n){case"webglcontextlost":x(r);break;case"webglcontextrestored":w(r);break;default:t.apply(e,arguments)}}}(e),e.loseContext=function(){if(!v){for(v=!0,y=0,++d;c.getError(););n(),E[c.CONTEXT_LOST_WEBGL]=!0;var t=a("context lost"),r=h.slice();setTimeout(function(){for(var n=0;n<r.length;++n)r[n](t);b>=0&&setTimeout(function(){e.restoreContext()},b)},0)}},e.restoreContext=function(){v&&p.length&&setTimeout(function(){if(!_)throw"can not restore. webglcontestlost listener did not call event.preventDefault";o(),l(c),v=!1,m=0,_=!1;for(var e=p.slice(),t=a("context restored"),n=0;n<e.length;++n)e[n](t)},0)},e.loseContextInNCalls=function(e){if(v)throw"You can not ask a lost contet to be lost";y=m+e},e.getNumCalls=function(){return m},e.setRestoreTimeout=function(e){b=e},e}"undefined"==typeof window&&(window=t);var f=function(e){window.console&&window.console.log&&window.console.log(e)},h=function(e){window.console&&window.console.error?window.console.error(e):f(e)},p={enable:{1:{0:!0}},disable:{1:{0:!0}},getParameter:{1:{0:!0}},drawArrays:{3:{0:!0}},drawElements:{4:{0:!0,2:!0}},createShader:{1:{0:!0}},getShaderParameter:{2:{1:!0}},getProgramParameter:{2:{1:!0}},getShaderPrecisionFormat:{2:{0:!0,1:!0}},getVertexAttrib:{2:{1:!0}},vertexAttribPointer:{6:{2:!0}},bindTexture:{2:{0:!0}},activeTexture:{1:{0:!0}},getTexParameter:{2:{0:!0,1:!0}},texParameterf:{3:{0:!0,1:!0}},texParameteri:{3:{0:!0,1:!0,2:!0}},texImage2D:{9:{0:!0,2:!0,6:!0,7:!0},6:{0:!0,2:!0,3:!0,4:!0}},texSubImage2D:{9:{0:!0,6:!0,7:!0},7:{0:!0,4:!0,5:!0}},copyTexImage2D:{8:{0:!0,2:!0}},copyTexSubImage2D:{8:{0:!0}},generateMipmap:{1:{0:!0}},compressedTexImage2D:{7:{0:!0,2:!0}},compressedTexSubImage2D:{8:{0:!0,6:!0}},bindBuffer:{2:{0:!0}},bufferData:{3:{0:!0,2:!0}},bufferSubData:{3:{0:!0}},getBufferParameter:{2:{0:!0,1:!0}},pixelStorei:{2:{0:!0,1:!0}},readPixels:{7:{4:!0,5:!0}},bindRenderbuffer:{2:{0:!0}},bindFramebuffer:{2:{0:!0}},checkFramebufferStatus:{1:{0:!0}},framebufferRenderbuffer:{4:{0:!0,1:!0,2:!0}},framebufferTexture2D:{5:{0:!0,1:!0,2:!0}},getFramebufferAttachmentParameter:{3:{0:!0,1:!0,2:!0}},getRenderbufferParameter:{2:{0:!0,1:!0}},renderbufferStorage:{4:{0:!0,1:!0}},clear:{1:{0:{enumBitwiseOr:["COLOR_BUFFER_BIT","DEPTH_BUFFER_BIT","STENCIL_BUFFER_BIT"]}}},depthFunc:{1:{0:!0}},blendFunc:{2:{0:!0,1:!0}},blendFuncSeparate:{4:{0:!0,1:!0,2:!0,3:!0}},blendEquation:{1:{0:!0}},blendEquationSeparate:{2:{0:!0,1:!0}},stencilFunc:{3:{0:!0}},stencilFuncSeparate:{4:{0:!0,1:!0}},stencilMaskSeparate:{2:{0:!0}},stencilOp:{3:{0:!0,1:!0,2:!0}},stencilOpSeparate:{4:{0:!0,1:!0,2:!0,3:!0}},cullFace:{1:{0:!0}},frontFace:{1:{0:!0}},drawArraysInstancedANGLE:{4:{0:!0}},drawElementsInstancedANGLE:{5:{0:!0,2:!0}},blendEquationEXT:{1:{0:!0}}},d=null,v=null;return{init:e,mightBeEnum:r,glEnumToString:i,glFunctionArgToString:o,glFunctionArgsToString:a,makeDebugContext:u,makeLostContextSimulatingCanvas:c,resetToInitialState:l}}(),e.exports=WebGLDebugUtils}).call(t,n(18))},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(20),s=n(1),u=n(63),l=n(36),c=n(51),f=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();l.a},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(1),s=n(36),u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();s.a},function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var i,o=n(0),a=(n.n(o),function(){function e(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}}(),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}}(),5124),s=5126,u=5125;i={},r(i,s,[s,1]),r(i,35664,[s,2]),r(i,35665,[s,3]),r(i,35666,[s,4]),r(i,a,[a,1]),r(i,35667,[a,2]),r(i,35668,[a,3]),r(i,35669,[a,4]),r(i,u,[u,1]),r(i,36294,[u,2]),r(i,36295,[u,3]),r(i,36296,[u,4]),r(i,35670,[s,1]),r(i,35671,[s,2]),r(i,35672,[s,3]),r(i,35673,[s,4]),r(i,35674,[s,8]),r(i,35685,[s,8]),r(i,35686,[s,8]),r(i,35675,[s,12]),r(i,35687,[s,12]),r(i,35688,[s,12]),r(i,35676,[s,16]),r(i,35689,[s,16]),r(i,35690,[s,16])},function(e,t){function n(e,t){var n=t[0]-e[0],r=t[1]-e[1],i=t[2]-e[2];return Math.sqrt(n*n+r*r+i*i)}e.exports=n},function(e,t){function n(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e}e.exports=n},function(e,t){function n(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e}e.exports=n},function(e,t){function n(e,t,n,r){var i=t[0],o=t[1],a=t[2];return e[0]=i+r*(n[0]-i),e[1]=o+r*(n[1]-o),e[2]=a+r*(n[2]-a),e}e.exports=n},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e){return e>=0&&e<6}function s(e){if(e<0&&e>=6)throw new Error(d);return e}var u=n(54),l=n(21),c=n(251),f=n(252),h=n(92),p=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),d="Unknown Euler angle order",v=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t.DefaultOrder;r(this,t);var s=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return arguments.length>0&&Array.isArray(arguments[0])?s.fromVector3.apply(s,arguments):s.set(e,n,o,a),s}return o(t,e),p(t,[{key:"ELEMENTS",get:function(){return 4}}],[{key:"rotationOrder",value:function(e){return t.RotationOrders[e]}},{key:"ZYX",get:function(){return 0}},{key:"YXZ",get:function(){return 1}},{key:"XZY",get:function(){return 2}},{key:"ZXY",get:function(){return 3}},{key:"YZX",get:function(){return 4}},{key:"XYZ",get:function(){return 5}},{key:"RollPitchYaw",get:function(){return 0}},{key:"DefaultOrder",get:function(){return t.ZYX}},{key:"RotationOrders",get:function(){return["ZYX","YXZ","XZY","ZXY","YZX","XYZ"]}}]),p(t,[{key:"copy",value:function(e){for(var t=0;t<3;++t)this[t]=e[t];return this[3]=Number.isFinite(e[3])||this.order,this.check(),this}},{key:"set",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments[3];return this[0]=e,this[1]=t,this[2]=n,this[3]=Number.isFinite(r)?r:this[3],this.check(),this}},{key:"validate",value:function(){return a(this[3])&&Number.isFinite(this[0])&&Number.isFinite(this[1])&&Number.isFinite(this[2])}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this[0],e[t+1]=this[1],e[t+2]=this[2],e}},{key:"toArray4",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this[0],e[t+1]=this[1],e[t+2]=this[2],e[t+3]=this[3],e}},{key:"toVector3",value:function(e){return e?e.set(this[0],this[1],this[2]):new h.a(this[0],this[1],this[2])}},{key:"fromVector3",value:function(e,t){return this.set(e[0],e[1],e[2],Number.isFinite(t)?t:this[3])}},{key:"fromArray",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this[0]=e[0+t],this[1]=e[1+t],this[2]=e[2+t],void 0!==e[3]&&(this[3]=e[3]),this.check(),this}},{key:"fromRollPitchYaw",value:function(e,n,r){return this.set(e,n,r,t.ZYX)}},{key:"fromQuaternion",value:function(e,t){return this._fromRotationMatrix(c.a.fromQuaternion(e),t),this.check(),this}},{key:"fromRotationMatrix",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t.DefaultOrder;return this._fromRotationMatrix(e,n),this.check(),this}},{key:"getRotationMatrix",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new c.a;return this._getRotationMatrix(e),e}},{key:"getQuaternion",value:function(){var e=new f.a;switch(this[4]){case t.XYZ:return e.rotateX(this[0]).rotateY(this[1]).rotateZ(this[2]);case t.YXZ:return e.rotateY(this[0]).rotateX(this[1]).rotateZ(this[2]);case t.ZXY:return e.rotateZ(this[0]).rotateX(this[1]).rotateY(this[2]);case t.ZYX:return e.rotateZ(this[0]).rotateY(this[1]).rotateX(this[2]);case t.YZX:return e.rotateY(this[0]).rotateZ(this[1]).rotateX(this[2]);case t.XZY:return e.rotateX(this[0]).rotateZ(this[1]).rotateY(this[2]);default:throw new Error(d)}}},{key:"_fromRotationMatrix",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t.DefaultOrder,r=e.elements,i=r[0],o=r[4],a=r[8],s=r[1],u=r[5],c=r[9],f=r[2],h=r[6],p=r[10];switch(n=n||this[3]){case t.XYZ:this[1]=Math.asin(Object(l.b)(a,-1,1)),Math.abs(a)<.99999?(this[0]=Math.atan2(-c,p),this[2]=Math.atan2(-o,i)):(this[0]=Math.atan2(h,u),this[2]=0);break;case t.YXZ:this[0]=Math.asin(-Object(l.b)(c,-1,1)),Math.abs(c)<.99999?(this[1]=Math.atan2(a,p),this[2]=Math.atan2(s,u)):(this[1]=Math.atan2(-f,i),this[2]=0);break;case t.ZXY:this[0]=Math.asin(Object(l.b)(h,-1,1)),Math.abs(h)<.99999?(this[1]=Math.atan2(-f,p),this[2]=Math.atan2(-o,u)):(this[1]=0,this[2]=Math.atan2(s,i));break;case t.ZYX:this[1]=Math.asin(-Object(l.b)(f,-1,1)),Math.abs(f)<.99999?(this[0]=Math.atan2(h,p),this[2]=Math.atan2(s,i)):(this[0]=0,this[2]=Math.atan2(-o,u));break;case t.YZX:this[2]=Math.asin(Object(l.b)(s,-1,1)),Math.abs(s)<.99999?(this[0]=Math.atan2(-c,u),this[1]=Math.atan2(-f,i)):(this[0]=0,this[1]=Math.atan2(a,p));break;case t.XZY:this[2]=Math.asin(-Object(l.b)(o,-1,1)),Math.abs(o)<.99999?(this[0]=Math.atan2(h,u),this[1]=Math.atan2(a,i)):(this[0]=Math.atan2(-c,p),this[1]=0);break;default:throw new Error(d)}return this[3]=n,this}},{key:"_getRotationMatrix",value:function(){var e=new c.a,n=this.x,r=this.y,i=this.z,o=Math.cos(n),a=Math.cos(r),s=Math.cos(i),u=Math.sin(n),l=Math.sin(r),f=Math.sin(i);switch(this[3]){case t.XYZ:var h=o*s,p=o*f,v=u*s,g=u*f;e[0]=a*s,e[4]=-a*f,e[8]=l,e[1]=p+v*l,e[5]=h-g*l,e[9]=-u*a,e[2]=g-h*l,e[6]=v+p*l,e[10]=o*a;break;case t.YXZ:var y=a*s,m=a*f,_=l*s,b=l*f;e[0]=y+b*u,e[4]=_*u-m,e[8]=o*l,e[1]=o*f,e[5]=o*s,e[9]=-u,e[2]=m*u-_,e[6]=b+y*u,e[10]=o*a;break;case t.ZXY:var E=a*s,x=a*f,w=l*s,T=l*f;e[0]=E-T*u,e[4]=-o*f,e[8]=w+x*u,e[1]=x+w*u,e[5]=o*s,e[9]=T-E*u,e[2]=-o*l,e[6]=u,e[10]=o*a;break;case t.ZYX:var S=o*s,A=o*f,C=u*s,O=u*f;e[0]=a*s,e[4]=C*l-A,e[8]=S*l+O,e[1]=a*f,e[5]=O*l+S,e[9]=A*l-C,e[2]=-l,e[6]=u*a,e[10]=o*a;break;case t.YZX:var k=o*a,P=o*l,R=u*a,I=u*l;e[0]=a*s,e[4]=I-k*f,e[8]=R*f+P,e[1]=f,e[5]=o*s,e[9]=-u*s,e[2]=-l*s,e[6]=P*f+R,e[10]=k-I*f;break;case t.XZY:var N=o*a,M=o*l,L=u*a,D=u*l;e[0]=a*s,e[4]=-f,e[8]=l*s,e[1]=N*f+D,e[5]=o*s,e[9]=M*f-L,e[2]=L*f-M,e[6]=u*s,e[10]=D*f+N;break;default:throw new Error(d)}return e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}},{key:"x",get:function(){return this[0]},set:function(e){return this[0]=Object(l.a)(e)}},{key:"y",get:function(){return this[1]},set:function(e){return this[1]=Object(l.a)(e)}},{key:"z",get:function(){return this[2]},set:function(e){return this[2]=Object(l.a)(e)}},{key:"alpha",get:function(){return this[0]},set:function(e){return this[0]=Object(l.a)(e)}},{key:"beta",get:function(){return this[1]},set:function(e){return this[1]=Object(l.a)(e)}},{key:"gamma",get:function(){return this[2]},set:function(e){return this[2]=Object(l.a)(e)}},{key:"phi",get:function(){return this[0]},set:function(e){return this[0]=Object(l.a)(e)}},{key:"theta",get:function(){return this[1]},set:function(e){return this[1]=Object(l.a)(e)}},{key:"psi",get:function(){return this[2]},set:function(e){return this[2]=Object(l.a)(e)}},{key:"roll",get:function(){return this[0]},set:function(e){return this[0]=Object(l.a)(e)}},{key:"pitch",get:function(){return this[1]},set:function(e){return this[1]=Object(l.a)(e)}},{key:"yaw",get:function(){return this[2]},set:function(e){return this[2]=Object(l.a)(e)}},{key:"order",get:function(){return this[3]},set:function(e){return this[3]=s(e)}}]),t}(u.a);t.a=v},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=n(21),o=n(92),a=n(79),s=n.n(a),u=n(0),l=n.n(u),c=function(){function e(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),f=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),h=6371e3,p=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.phi,i=t.theta,o=t.radius,a=t.bearing,s=t.pitch,u=(t.altitude,t.radiusScale),l=void 0===u?h:u;r(this,e),0===arguments.length?(this.phi=0,this.theta=0,this.radius=1):Number.isFinite(n)||Number.isFinite(i)?(this.phi=n||0,this.theta=i||0):(Number.isFinite(a)||Number.isFinite(s))&&(this.bearing=a||0,this.pitch=s||0),this.radius=o||1,this.radiusScale=l||1,this.check()}return f(e,[{key:"toString",value:function(){return this.formatString(i.c)}},{key:"formatString",value:function(e){var t=e.printTypes,n=(e.printDegrees,i.f);return(t?"Spherical":"")+"[rho:"+n(this.radius)+",theta:"+n(this.theta)+",phi:"+n(this.phi)+"]"}},{key:"equals",value:function(e){return Object(i.e)(this.radius,e.radius)&&Object(i.e)(this.theta,e.theta)&&Object(i.e)(this.phi,e.phi)}},{key:"exactEquals",value:function(e){return this.radius===e.radius&&this.theta===e.theta&&this.phi===e.phi}},{key:"set",value:function(e,t,n){return this.radius=e,this.phi=t,this.theta=n,this.check()}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this.check()}},{key:"fromLngLatZ",value:function(e){var t=c(e,3),n=t[0],r=t[1],o=t[2];this.radius=1+o/this.radiusScale,this.phi=Object(i.g)(r),this.theta=Object(i.g)(n)}},{key:"fromVector3",value:function(e){return this.radius=s()(e),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e[0],e[1]),this.phi=Math.acos(Object(i.b)(e[2]/this.radius,-1,1))),this.check()}},{key:"toVector3",value:function(){return new o.a(0,0,this.radius).rotateX({radians:this.theta}).rotateZ({radians:this.phi})}},{key:"makeSafe",value:function(){this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi))}},{key:"check",value:function(){return l()(Number.isFinite(this.phi)&&Number.isFinite(this.theta)&&this.radius>0),this}},{key:"bearing",get:function(){return 180-Object(i.d)(this.phi)},set:function(e){this.phi=Math.PI-Object(i.g)(e)}},{key:"pitch",get:function(){return Object(i.d)(this.theta)},set:function(e){this.theta=Object(i.g)(e)}},{key:"longitude",get:function(){return Object(i.d)(this.phi)}},{key:"latitude",get:function(){return Object(i.d)(this.theta)}},{key:"lng",get:function(){return Object(i.d)(this.phi)}},{key:"lat",get:function(){return Object(i.d)(this.theta)}},{key:"z",get:function(){return(this.radius-1)*this.radiusScale}}]),e}();t.a=p},function(e,t,n){"use strict";n.d(t,"a",function(){return o});var r=n(427),i=n(428),o={vs:r.a,fs:i.a,defaultUniforms:{}}},function(e,t,n){"use strict";t.a="#define SHADER_NAME luma_modular_vertex\n\n// object attributes\nattribute vec3 positions;\nattribute vec3 normals;\nattribute vec4 colors;\nattribute vec2 texCoords;\nattribute vec3 pickingColors;\n\nvoid main(void) {\n\n  // Set up position\n#ifdef MODULE_GEOMETRY\n  geometry_setPosition(positions);\n  geometry_setNormal(normals);\n#endif\n\n#ifdef MODULE_PROJECT\n  project_setPositionAndNormal_Model(positions, normals);\n  gl_Position = project_model_to_clipspace(positions);\n#endif\n\n  // Set up depth\n#ifdef MODULE_LOGDEPTH\n  logdepth_adjustPosition(gl_Position);\n#endif\n\n#ifdef MODULE_DIFFUSE\n  diffuse_setTextureCoordinate(texCoords);\n#endif\n\n  // Set up color calculations\n#ifdef MODULE_MATERIAL\n  material_setDiffuseColor(colors);\n  material_setDiffuseTextureCoordinates(texCoords);\n#endif\n\n#ifdef MODULE_LIGHTING\n  lighting_setPositionAndNormal(positions, normals);\n  lighting_apply_light(positions);\n  lighting_apply_reflection(positions);\n#endif\n\n#ifdef MODULE_PICKING\n  picking_setPickingColor(pickingColors);\n#endif\n\n}\n"},function(e,t,n){"use strict";t.a="#define SHADER_NAME luma-modular-fragment\n\n#ifdef GL_ES\nprecision highp float;\n#endif\n\n// varyings\nvarying vec4 vColor;\n\nvoid main(){\n  gl_FragColor = vec4(1., 0., 1., 1.);\n\n#ifdef MODULE_DIFFUSE\n  gl_FragColor = diffuse_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_MATERIAL\n  gl_FragColor = material_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_LIGHTING\n  gl_FragColor = lighting_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_FOG\n  gl_FragColor = fog_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_PICKING\n  gl_FragColor = picking_filterHighlightColor(gl_FragColor);\n  gl_FragColor = picking_filterPickingColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_LOGDEPTH\n  logdepth_setFragDepth(gl_Position);\n#endif\n}\n"},function(e,t,n){"use strict";var r=(n(143),n(253));n.d(t,"a",function(){return r.a});n(254)},function(e,t,n){"use strict";function r(e,t){var n=e.vendor,r=e.renderer,i=void 0;switch(t){case"nvidia":i=n.match(/NVIDIA/i)||r.match(/NVIDIA/i);break;case"intel":i=n.match(/INTEL/i)||r.match(/INTEL/i);break;case"amd":i=n.match(/AMD/i)||r.match(/AMD/i)||n.match(/ATI/i)||r.match(/ATI/i);break;default:i=!1}return i}function i(e){var t="",n=Object(a.getContextInfo)(e);return r(n,"nvidia")?t+="#define NVIDIA_GPU\n// Nvidia optimizes away the calculation necessary for emulated fp64\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\n":r(n,"intel")?t+="#define INTEL_GPU\n// Intel optimizes away the calculation necessary for emulated fp64\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\n// Intel's built-in 'tan' function doesn't have acceptable precision\n#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1\n":r(n,"amd")?t+="#define AMD_GPU\n":t+="#define DEFAULT_GPU\n// Prevent driver from optimizing away the calculation necessary for emulated fp64\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\n// Intel's built-in 'tan' function doesn't have acceptable precision\n#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1\n",t}function o(e){var t="// Defines for shader portability\n#if (__VERSION__ > 120)\n# define attribute in\n# define varying out\n# define FRAG_DEPTH\n# define DERIVATIVES\n# define DRAW_BUFFERS\n# define TEXTURE_LOD\n#else\n// # define in attribute\n// # define out varying\n#endif // __VERSION\n";return Object(s.c)(e,s.a.GLSL_FRAG_DEPTH)&&(t+="// FRAG_DEPTH => gl_FragDepth is available\n#ifdef GL_EXT_frag_depth\n#extension GL_EXT_frag_depth : enable\n# define FRAG_DEPTH\n# define gl_FragDepth gl_FragDepthEXT\n#endif\n"),Object(s.c)(e,s.a.GLSL_DERIVATIVES)&&(t+="// DERIVATIVES => dxdF, dxdY and fwidth are available\n#ifdef GL_OES_standard_derivatives\n#extension GL_OES_standard_derivatives : enable\n# define DERIVATIVES\n#endif\n"),Object(s.c)(e,s.a.GLSL_FRAG_DATA)&&(t+="// DRAW_BUFFERS => gl_FragData[] is available\n#ifdef GL_EXT_draw_buffers\n#extension GL_EXT_draw_buffers : require\n#define DRAW_BUFFERS\n#endif\n"),Object(s.c)(e,s.a.GLSL_TEXTURE_LOD)&&(t+="// TEXTURE_LOD => texture2DLod etc are available\n#ifdef GL_EXT_shader_texture_lod\n#extension GL_EXT_shader_texture_lod : enable\n# define TEXTURE_LOD\n#define texture2DLod texture2DLodEXT\n#define texture2DProjLod texture2DProjLodEXT\n#define texture2DProjLod texture2DProjLodEXT\n#define textureCubeLod textureCubeLodEXT\n#define texture2DGrad texture2DGradEXT\n#define texture2DProjGrad texture2DProjGradEXT\n#define texture2DProjGrad texture2DProjGradEXT\n#define textureCubeGrad textureCubeGradEXT\n#endif\n"),t}t.a=i,t.b=o;var a=n(37),s=n(86)},function(e,t,n){"use strict";n.d(t,"b",function(){return r}),n.d(t,"a",function(){return i});var r="#ifdef MODULE_LOGDEPTH\n  logdepth_adjustPosition(gl_Position);\n#endif\n",i="#ifdef MODULE_MATERIAL\n  gl_FragColor = material_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_LIGHTING\n  gl_FragColor = lighting_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_FOG\n  gl_FragColor = fog_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_PICKING\n  gl_FragColor = picking_filterHighlightColor(gl_FragColor);\n  gl_FragColor = picking_filterPickingColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_LOGDEPTH\n  logdepth_setFragDepth();\n#endif\n"},function(e,t,n){"use strict";n.d(t,"a",function(){return s}),n.d(t,"c",function(){return u}),n.d(t,"d",function(){return l}),n.d(t,"b",function(){return p});var r=n(144),i=n.n(r),o=n(234),a={},s=function(e){a[e.id]||(a[e.id]=e,i.a.listItem("luma.gl",e.id))},u=function(e,t){if(o.b.__SEER_INITIALIZED__&&!i.a.throttle("luma.gl:"+e.id,1e3)){var n=Object.assign({},e.geometry.attributes,e.attributes),r=Object.assign({},e.uniforms,t);i.a.multiUpdate("luma.gl",e.id,[{path:"objects.uniforms",data:r},{path:"objects.attributes",data:n}])}},l=function(e){delete a[e],i.a.deleteItem("luma.gl",e)},c=function e(t,n,r){t&&(n.length>1?e(t[n[0]],n.slice(1),r):t[n[0]]=r)},f=new Map,h=function(e,t,n){if(o.b.__SEER_INITIALIZED__){f.has(e)||f.set(e,new Map);f.get(e).set(t,n)}},p=function(e,t){if(o.b.__SEER_INITIALIZED__&&e){var n=f.get(e);n&&n.forEach(function(e,n){c(t,n,e)})}};i.a.listenFor("luma.gl",function(e){var t=a[e.itemKey];if(t&&"edit"===e.type&&"uniforms"===e.valuePath[0]){var n=e.valuePath.slice(1);h(e.itemKey,n,e.value);var r=t.getUniforms();c(r,n,e.value),t.setUniforms(r)}})},function(e,t,n){"use strict";var r=(n(37),n(2),n(434),n(0));n.n(r),function(){function e(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}}()},function(e,t,n){"use strict";function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function a(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=n(248),u=n(53),l=n(0),c=n.n(l),f=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),h=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,t);var n=e.children,r=void 0===n?[]:n;r.every(function(e){return c()(e instanceof s.a)});var a=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.children=r,a}return a(t,e),f(t,[{key:"add",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var i=!0,o=!1,a=void 0;try{for(var s,u=t[Symbol.iterator]();!(i=(s=u.next()).done);i=!0){var l=s.value;Array.isArray(l)?this.add.apply(this,r(l)):this.children.push(l)}}catch(e){o=!0,a=e}finally{try{!i&&u.return&&u.return()}finally{if(o)throw a}}return this}},{key:"remove",value:function(e){var t=this.children,n=t.indexOf(e);return n>-1&&t.splice(n,1),this}},{key:"removeAll",value:function(){return this.children=[],this}},{key:"traverse",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.modelMatrix,i=void 0===r?new u.a:r,o=!0,a=!1,s=void 0;try{for(var l,c=this.children[Symbol.iterator]();!(o=(l=c.next()).done);o=!0){var f=l.value,h=f.matrix;i=i.multiplyRight(h);var p=void 0;if(p=f instanceof t?f.traverse(e,{modelMatrix:i}):e(f,{}))return p}}catch(e){a=!0,s=e}finally{try{!o&&c.return&&c.return()}finally{if(a)throw s}}return null}},{key:"traverseReverse",value:function(e){for(var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.modelMatrix,i=void 0===r?new u.a:r,o=this.children.length-1;o>=0;--o){var a=this.children[o],s=a.matrix;i=i.multiplyRight(s);var l=void 0;if(l=a instanceof t?a.traverseReverse(e,{modelMatrix:i}):e(a,{}))return l}return null}}]),t}(s.a);t.a=h},function(e,t,n){"use strict";(function(){function e(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}})(),new Uint8Array([0,0,0])},function(e,t,n){"use strict";n(437)},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e){return!0!==e&&e}function o(e){var t=e.getBoundingClientRect();return{x:t.left,y:t.top,bbox:t}}function a(e,t){return t=t||window,e||t.event}function s(e){return e.wheelDelta?e.wheelDelta/120:-(e.detail||0)/3}function u(e){var t=e.which||e.keyCode,n=h(t),r=t-111;return r>0&&r<13&&(n="f"+r),n=n||String.fromCharCode(t).toLowerCase(),{code:t,key:n,shift:e.shiftKey,control:e.ctrlKey,alt:e.altKey,meta:e.metaKey}}function l(e){return 3===e.which||2===e.button}function c(e,t){t=t||window,e=e||t.event;var n=t.document;if(n=n.documentElement||n.body,e.touches&&e.touches.length){for(var r=[],i=e.touches.length,o=void 0,a=0;a<i;++a)o=e.touches[a],r.push({x:o.pageX||o.clientX+n.scrollLeft,y:o.pageY||o.clientY+n.scrollTop});return r}return[{x:e.pageX||e.clientX+n.scrollLeft,y:e.pageY||e.clientY+n.scrollTop}]}function f(e){e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0,e.preventDefault?e.preventDefault():e.returnValue=!1}function h(e){var t=g;for(var n in t)if(t[n]===e)return n;return null}var p=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),d={enter:13,up:38,down:40,left:37,right:39,esc:27,space:32,backspace:8,tab:9,delete:46},v=function(){function e(t,n){r(this,e),this.scene=n.scene,this.domElem=t,this.pos=o(t),this.opt=this.callbacks=n,this.size={width:t.width||t.offsetWidth,height:t.height||t.offsetHeight},this.attachEvents()}return p(e,[{key:"attachEvents",value:function(){var e=this,t=this.domElem,n=this.opt;if(n.disableContextMenu&&(t.oncontextmenu=function(){return!1}),n.enableMouse){["mouseup","mousedown","mousemove","mouseover","mouseout"].forEach(function(n){t.addEventListener(n,function(t,r){e[n](e.eventInfo(n,t,r))},!1)});var r="";r=document.getBoxObjectFor||null!==window.mozInnerScreenX?"DOMMouseScroll":"mousewheel",t.addEventListener(r,function(t,n){e.mousewheel(e.eventInfo("mousewheel",t,n))},!1)}n.enableTouch&&["touchstart","touchmove","touchend"].forEach(function(n){t.addEventListener(n,function(t,r){e[n](e.eventInfo(n,t,r))},!1)}),n.enableKeyboard&&["keydown","keyup"].forEach(function(t){document.addEventListener(t,function(n,r){e[t](e.eventInfo(t,n,r))},!1)})}},{key:"eventInfo",value:function(e,t,n){for(var r=this.domElem,i=this.scene,h=this.opt,p=this.getSize(),d=h.relative,v=h.centerOrigin,g=h.cachePosition&&this.pos||o(r),y=a(t,n),m=c(t,n),_={x:m[0].x,y:m[0].y},b={},E=void 0,x=void 0,w=0,T=m.length;w<T;++w)E=m[w].x,x=m[w].y,d&&(E-=g.x,x-=g.y,v&&(E-=p.width/2,x-=p.height/2,x*=-1)),m[w].x=E,m[w].y=x;switch(e){case"mousewheel":b.wheel=s(y);break;case"keydown":case"keyup":Object.assign(b,u(y));break;case"mouseup":b.isRightClick=l(y)}var S=void 0;return Object.assign(b,{x:m[0].x,y:m[0].y,posArray:m,cache:!1,stop:function(){f(y)},getTarget:function(){return S||(S=h.picking&&i.pick(_.x-g.x,_.y-g.y)||!0)}}),b.event=y,b}},{key:"getSize",value:function(){if(this.cacheSize)return this.size;var e=this.domElem;return{width:e.width||e.offsetWidth,height:e.height||e.offsetHeight}}},{key:"mouseup",value:function(e){this.moved||(e.isRightClick?this.callbacks.onRightClick(e,this.hovered):this.callbacks.onClick(e,i(this.pressed))),this.pressed&&(this.moved?this.callbacks.onDragEnd(e,i(this.pressed)):this.callbacks.onDragCancel(e,i(this.pressed)),this.pressed=this.moved=!1)}},{key:"mouseout",value:function(e){for(var t=e.relatedTarget,n=this.domElem;t&&t.parentNode;){if(n===t.parentNode)return;t=t.parentNode}this.hovered&&(this.callbacks.onMouseLeave(e,this.hovered),this.hovered=!1),this.pressed&&this.moved&&(this.callbacks.onDragEnd(e),this.pressed=this.moved=!1)}},{key:"mouseover",value:function(e){}},{key:"mousemove",value:function(e){if(this.pressed)return this.moved=!0,void this.callbacks.onDragMove(e,i(this.pressed));if(this.hovered){var t=i(e.getTarget());t&&t.hash===this.hash?this.callbacks.onMouseMove(e,this.hovered):(this.callbacks.onMouseLeave(e,this.hovered),this.hovered=t,this.hash=t,t&&(this.hash=t.hash,this.callbacks.onMouseEnter(e,this.hovered)))}else this.hovered=i(e.getTarget()),this.hash=this.hovered,this.hovered&&(this.hash=this.hovered.hash,this.callbacks.onMouseEnter(e,this.hovered));this.opt.picking||this.callbacks.onMouseMove(e)}},{key:"mousewheel",value:function(e){this.callbacks.onMouseWheel(e)}},{key:"mousedown",value:function(e){this.pressed=e.getTarget(),this.callbacks.onDragStart(e,i(this.pressed))}},{key:"touchstart",value:function(e){this.touched=e.getTarget(),this.touchedLastPosition={x:e.x,y:e.y},this.callbacks.onTouchStart(e,i(this.touched))}},{key:"touchmove",value:function(e){this.touched&&(this.touchMoved=!0,this.callbacks.onTouchMove(e,i(this.touched)))}},{key:"touchend",value:function(e){this.touched&&(this.touchMoved?this.callbacks.onTouchEnd(e,i(this.touched)):(e.x=isNaN(e.x)?this.touchedLastPosition.x:e.x,e.y=isNaN(e.y)?this.touchedLastPosition.y:e.y,this.callbacks.onTap(e,i(this.touched)),this.callbacks.onTouchCancel(e,i(this.touched))),this.touched=this.touchMoved=!1)}},{key:"keydown",value:function(e){this.callbacks.onKeyDown(e)}},{key:"keyup",value:function(e){this.callbacks.onKeyUp(e)}}]),e}();Object.assign(v.prototype,{hovered:!1,pressed:!1,touched:!1,touchedLastPosition:{x:0,y:0},touchMoved:!1,moved:!1});var g=d},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(26),s=n(38);s.Model},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(26),s=n(38),u=n(2);s.Model},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(26),s=n(91);s.a},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(38),s=n(26);a.Model},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(26),s=n(91),u=n(2);s.a},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(38),s=n(26),u=n(2);a.Model},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(26),s=n(38);s.Model},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(38),s=n(26),u=n(37),l="attribute vec2 aClipSpacePosition;\nattribute vec2 aTexCoord;\nattribute vec2 aCoordinate;\n\nvarying vec2 position;\nvarying vec2 coordinate;\nvarying vec2 uv;\n\nvoid main(void) {\n  gl_Position = vec4(aClipSpacePosition, 0., 1.);\n  position = aClipSpacePosition;\n  coordinate = aCoordinate;\n  uv = aTexCoord;\n}\n",c=[-1,-1,1,-1,-1,1,1,1];a.Model},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(262);Object.defineProperty(t,"setPathPrefix",{enumerable:!0,get:function(){return r.setPathPrefix}}),Object.defineProperty(t,"loadFile",{enumerable:!0,get:function(){return r.loadFile}}),Object.defineProperty(t,"loadImage",{enumerable:!0,get:function(){return r.loadImage}});var i=n(448);Object.defineProperty(t,"loadFiles",{enumerable:!0,get:function(){return i.loadFiles}}),Object.defineProperty(t,"loadImages",{enumerable:!0,get:function(){return i.loadImages}}),Object.defineProperty(t,"loadTextures",{enumerable:!0,get:function(){return i.loadTextures}}),Object.defineProperty(t,"loadProgram",{enumerable:!0,get:function(){return i.loadProgram}}),Object.defineProperty(t,"loadModel",{enumerable:!0,get:function(){return i.loadModel}}),Object.defineProperty(t,"parseModel",{enumerable:!0,get:function(){return i.parseModel}})},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(){}function o(e){return new u(e).sendAsync()}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t.requestFile=o;var s={UNINITIALIZED:0,LOADING:1,LOADED:2,INTERACTIVE:3,COMPLETED:4},u=function(){function e(t){var n=t.url,o=t.path,a=void 0===o?null:o,s=t.method,u=void 0===s?"GET":s,l=t.asynchronous,c=void 0===l||l,f=t.noCache,h=void 0!==f&&f,p=t.sendAsBinary,d=void 0!==p&&p,v=t.responseType,g=void 0!==v&&v,y=t.onProgress,m=void 0===y?i:y,_=t.onError,b=void 0===_?i:_,E=t.onAbort,x=void 0===E?i:E,w=t.onComplete,T=void 0===w?i:w;r(this,e),this.url=a?a.join(a,n):n,this.method=u,this.async=c,this.noCache=h,this.sendAsBinary=d,this.responseType=g,this.req=new XMLHttpRequest,this.req.onload=function(e){return T(e)},this.req.onerror=function(e){return b(e)},this.req.onabort=function(e){return x(e)},this.req.onprogress=function(e){e.lengthComputable?m(e,Math.round(e.loaded/e.total*100)):m(e,-1)}}return a(e,[{key:"setRequestHeader",value:function(e,t){return this.req.setRequestHeader(e,t),this}},{key:"sendAsync",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.body||null;return new Promise(function(n,r){try{var i=e.req,o=e.method,a=e.noCache,u=e.sendAsBinary,l=e.responseType,c=a?e.url+(e.url.indexOf("?")>=0?"&":"?")+Date.now():e.url;i.open(o,c,e.async),l&&(i.responseType=l),e.async&&(i.onreadystatechange=function(e){i.readyState===s.COMPLETED&&(200===i.status?n(i.responseType?i.response:i.responseText):r(new Error(i.status+": "+c)))}),u?i.sendAsBinary(t):i.send(t),e.async||(200===i.status?n(i.responseType?i.response:i.responseText):r(new Error(i.status+": "+c)))}catch(e){r(e)}})}}]),e}()},function(e,t,n){"use strict";function r(){}function i(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=n.urls,o=n.onProgress,s=void 0===o?r:o;return(0,d.default)("string"===typeof t,"loadTexture: url must be string"),a(Object.assign({urls:i,onProgress:s},n)).then(function(t){return t.map(function(t,r){return new g.Texture2D(e,Object.assign({id:i[r]},n,{data:t}))})})}function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.urls,n=e.onProgress,i=void 0===n?r:n;(0,d.default)(t.every(function(e){return"string"===typeof e}),"loadImages: {urls} must be array of strings");var o=0;return Promise.all(t.map(function(n){var r=(0,v.loadFile)(Object.assign({url:n},e));return r.then(function(e){return i({progress:++o/t.length,count:o,total:t.length,url:n})}),r}))}function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.urls,n=e.onProgress,i=void 0===n?r:n;(0,d.default)(t.every(function(e){return"string"===typeof e}),"loadImages: {urls} must be array of strings");var o=0;return Promise.all(t.map(function(n){var r=(0,v.loadImage)(n,e);return r.then(function(e){return i({progress:++o/t.length,count:o,total:t.length,url:n})}),r}))}function s(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.urls,i=t.onProgress,o=void 0===i?r:i;return(0,d.default)(n.every(function(e){return"string"===typeof e}),"loadTextures: {urls} must be array of strings"),a(Object.assign({urls:n,onProgress:o},t)).then(function(r){return r.map(function(r,i){var o=Array.isArray(t.parameters)?t.parameters[i]:t.parameters;return o=void 0===o?{}:o,new g.Texture2D(e,Object.assign({id:n[i]},o,{data:r}))})})}function u(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.vs,i=t.fs,a=t.onProgress,s=void 0===a?r:a;return o(Object.assign({urls:[n,i],onProgress:s},t)).then(function(n){var r=h(n,2),i=r[0],o=r[1];return new g.Program(e,Object.assign({vs:i,fs:o},t))})}function l(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.url,i=t.onProgress,a=void 0===i?r:i;return o(Object.assign({urls:[n],onProgress:a},t)).then(function(n){var r=h(n,1),i=r[0];return c(e,Object.assign({file:i},t))})}function c(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.file,r=t.program,i=void 0===r?new g.Program(e):r,o="string"===typeof n?f(n):n,a={},s={};for(var u in o){var l=o[u];Array.isArray(l)?a[u]="indices"===u?new Uint16Array(l):new Float32Array(l):s[u]=l}return new y.Model(e,Object.assign({program:i,geometry:new m.Geometry({attributes:a})},s,t))}function f(e){try{return JSON.parse(e)}catch(e){throw new Error("Failed to parse JSON: "+e)}}Object.defineProperty(t,"__esModule",{value:!0});var h=function(){function e(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();t.loadTexture=i,t.loadFiles=o,t.loadImages=a,t.loadTextures=s,t.loadProgram=u,t.loadModel=l,t.parseModel=c;var p=n(0),d=function(e){return e&&e.__esModule?e:{default:e}}(p),v=n(262),g=n(37),y=n(38),m=n(26)},function(e,t,n){"use strict";t.a={name:"fp32",vs:"#ifdef LUMA_FP32_TAN_PRECISION_WORKAROUND\n\n// All these functions are for substituting tan() function from Intel GPU only\nconst float TWO_PI = 6.2831854820251465;\nconst float PI_2 = 1.5707963705062866;\nconst float PI_16 = 0.1963495463132858;\n\nconst float SIN_TABLE_0 = 0.19509032368659973;\nconst float SIN_TABLE_1 = 0.3826834261417389;\nconst float SIN_TABLE_2 = 0.5555702447891235;\nconst float SIN_TABLE_3 = 0.7071067690849304;\n\nconst float COS_TABLE_0 = 0.9807852506637573;\nconst float COS_TABLE_1 = 0.9238795042037964;\nconst float COS_TABLE_2 = 0.8314695954322815;\nconst float COS_TABLE_3 = 0.7071067690849304;\n\nconst float INVERSE_FACTORIAL_3 = 1.666666716337204e-01; // 1/3!\nconst float INVERSE_FACTORIAL_5 = 8.333333767950535e-03; // 1/5!\nconst float INVERSE_FACTORIAL_7 = 1.9841270113829523e-04; // 1/7!\nconst float INVERSE_FACTORIAL_9 = 2.75573188446287533e-06; // 1/9!\n\nfloat sin_taylor_fp32(float a) {\n  float r, s, t, x;\n\n  if (a == 0.0) {\n    return 0.0;\n  }\n\n  x = -a * a;\n  s = a;\n  r = a;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_3;\n  s = s + t;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_5;\n  s = s + t;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_7;\n  s = s + t;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_9;\n  s = s + t;\n\n  return s;\n}\n\nvoid sincos_taylor_fp32(float a, out float sin_t, out float cos_t) {\n  if (a == 0.0) {\n    sin_t = 0.0;\n    cos_t = 1.0;\n  }\n  sin_t = sin_taylor_fp32(a);\n  cos_t = sqrt(1.0 - sin_t * sin_t);\n}\n\nfloat tan_taylor_fp32(float a) {\n    float sin_a;\n    float cos_a;\n\n    if (a == 0.0) {\n        return 0.0;\n    }\n\n    // 2pi range reduction\n    float z = floor(a / TWO_PI);\n    float r = a - TWO_PI * z;\n\n    float t;\n    float q = floor(r / PI_2 + 0.5);\n    int j = int(q);\n\n    if (j < -2 || j > 2) {\n        return 0.0 / 0.0;\n    }\n\n    t = r - PI_2 * q;\n\n    q = floor(t / PI_16 + 0.5);\n    int k = int(q);\n    int abs_k = int(abs(float(k)));\n\n    if (abs_k > 4) {\n        return 0.0 / 0.0;\n    } else {\n        t = t - PI_16 * q;\n    }\n\n    float u = 0.0;\n    float v = 0.0;\n\n    float sin_t, cos_t;\n    float s, c;\n    sincos_taylor_fp32(t, sin_t, cos_t);\n\n    if (k == 0) {\n        s = sin_t;\n        c = cos_t;\n    } else {\n        if (abs(float(abs_k) - 1.0) < 0.5) {\n            u = COS_TABLE_0;\n            v = SIN_TABLE_0;\n        } else if (abs(float(abs_k) - 2.0) < 0.5) {\n            u = COS_TABLE_1;\n            v = SIN_TABLE_1;\n        } else if (abs(float(abs_k) - 3.0) < 0.5) {\n            u = COS_TABLE_2;\n            v = SIN_TABLE_2;\n        } else if (abs(float(abs_k) - 4.0) < 0.5) {\n            u = COS_TABLE_3;\n            v = SIN_TABLE_3;\n        }\n        if (k > 0) {\n            s = u * sin_t + v * cos_t;\n            c = u * cos_t - v * sin_t;\n        } else {\n            s = u * sin_t - v * cos_t;\n            c = u * cos_t + v * sin_t;\n        }\n    }\n\n    if (j == 0) {\n        sin_a = s;\n        cos_a = c;\n    } else if (j == 1) {\n        sin_a = c;\n        cos_a = -s;\n    } else if (j == -1) {\n        sin_a = -c;\n        cos_a = s;\n    } else {\n        sin_a = -s;\n        cos_a = -c;\n    }\n    return sin_a / cos_a;\n}\n#endif\n\nfloat tan_fp32(float a) {\n#ifdef LUMA_FP32_TAN_PRECISION_WORKAROUND\n  return tan_taylor_fp32(a);\n#else\n  return tan(a);\n#endif\n}\n",fs:null}},function(e,t,n){"use strict";var r=(n(451),n(452)),i=n(453),o=r.a+"\n"+i.a;t.a={name:"fp64",vs:o,fs:null};r.a},function(e,t,n){"use strict"},function(e,t,n){"use strict";t.a="uniform float ONE;\n\n/*\nAbout LUMA_FP64_CODE_ELIMINATION_WORKAROUND\n\nThe purpose of this workaround is to prevent shader compilers from\noptimizing away necessary arithmetic operations by swapping their sequences\nor transform the equation to some 'equivalent' from.\n\nThe method is to multiply an artifical variable, ONE, which will be known to\nthe compiler to be 1 only at runtime. The whole expression is then represented\nas a polynomial with respective to ONE. In the coefficients of all terms, only one a\nand one b should appear\n\nerr = (a + b) * ONE^6 - a * ONE^5 - (a + b) * ONE^4 + a * ONE^3 - b - (a + b) * ONE^2 + a * ONE\n*/\n\nvec2 split(float a) {\n  const float SPLIT = 4097.0;\n  float t = a * SPLIT;\n#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)\n  float a_hi = t * ONE - (t - a);\n  float a_lo = a * ONE - a_hi;\n#else\n  float a_hi = t - (t - a);\n  float a_lo = a - a_hi;\n#endif\n  return vec2(a_hi, a_lo);\n}\n\nvec2 quickTwoSum(float a, float b) {\n#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)\n  float sum = (a + b) * ONE;\n  float err = b - (sum - a) * ONE;\n#else\n  float sum = a + b;\n  float err = b - (sum - a);\n#endif\n  return vec2(sum, err);\n}\n\nvec2 twoSum(float a, float b) {\n  float s = (a + b);\n#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)\n  float v = (s * ONE - a) * ONE;\n  float err = (a - (s - v) * ONE) * ONE * ONE * ONE + (b - v);\n#else\n  float v = s - a;\n  float err = (a - (s - v)) + (b - v);\n#endif\n  return vec2(s, err);\n}\n\nvec2 twoSub(float a, float b) {\n  float s = (a - b);\n#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)\n  float v = (s * ONE - a) * ONE;\n  float err = (a - (s - v) * ONE) * ONE * ONE * ONE - (b + v);\n#else\n  float v = s - a;\n  float err = (a - (s - v)) - (b + v);\n#endif\n  return vec2(s, err);\n}\n\nvec2 twoSqr(float a) {\n  float prod = a * a;\n  vec2 a_fp64 = split(a);\n#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)\n  float err = ((a_fp64.x * a_fp64.x - prod) * ONE + 2.0 * a_fp64.x *\n    a_fp64.y * ONE * ONE) + a_fp64.y * a_fp64.y * ONE * ONE * ONE;\n#else\n  float err = ((a_fp64.x * a_fp64.x - prod) + 2.0 * a_fp64.x * a_fp64.y) + a_fp64.y * a_fp64.y;\n#endif\n  return vec2(prod, err);\n}\n\nvec2 twoProd(float a, float b) {\n  float prod = a * b;\n  vec2 a_fp64 = split(a);\n  vec2 b_fp64 = split(b);\n  float err = ((a_fp64.x * b_fp64.x - prod) + a_fp64.x * b_fp64.y +\n    a_fp64.y * b_fp64.x) + a_fp64.y * b_fp64.y;\n  return vec2(prod, err);\n}\n\nvec2 sum_fp64(vec2 a, vec2 b) {\n  vec2 s, t;\n  s = twoSum(a.x, b.x);\n  t = twoSum(a.y, b.y);\n  s.y += t.x;\n  s = quickTwoSum(s.x, s.y);\n  s.y += t.y;\n  s = quickTwoSum(s.x, s.y);\n  return s;\n}\n\nvec2 sub_fp64(vec2 a, vec2 b) {\n  vec2 s, t;\n  s = twoSub(a.x, b.x);\n  t = twoSub(a.y, b.y);\n  s.y += t.x;\n  s = quickTwoSum(s.x, s.y);\n  s.y += t.y;\n  s = quickTwoSum(s.x, s.y);\n  return s;\n}\n\nvec2 mul_fp64(vec2 a, vec2 b) {\n  vec2 prod = twoProd(a.x, b.x);\n  // y component is for the error\n  prod.y += a.x * b.y;\n  prod.y += a.y * b.x;\n  prod = quickTwoSum(prod.x, prod.y);\n  return prod;\n}\n\nvec2 div_fp64(vec2 a, vec2 b) {\n  float xn = 1.0 / b.x;\n  vec2 yn = a * xn;\n  float diff = (sub_fp64(a, mul_fp64(b, yn))).x;\n  vec2 prod = twoProd(xn, diff);\n  return sum_fp64(yn, prod);\n}\n\nvec2 sqrt_fp64(vec2 a) {\n  if (a.x == 0.0 && a.y == 0.0) return vec2(0.0, 0.0);\n  if (a.x < 0.0) return vec2(0.0 / 0.0, 0.0 / 0.0);\n\n  float x = 1.0 / sqrt(a.x);\n  float yn = a.x * x;\n#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)\n  vec2 yn_sqr = twoSqr(yn) * ONE;\n#else\n  vec2 yn_sqr = twoSqr(yn);\n#endif\n  float diff = sub_fp64(a, yn_sqr).x;\n  vec2 prod = twoProd(x * 0.5, diff);\n  return sum_fp64(vec2(yn, 0.0), prod);\n}\n"},function(e,t,n){"use strict";t.a="const vec2 E_FP64 = vec2(2.7182817459106445e+00, 8.254840366817007e-08);\nconst vec2 LOG2_FP64 = vec2(0.6931471824645996e+00, -1.9046542121259336e-09);\nconst vec2 PI_FP64 = vec2(3.1415927410125732, -8.742278012618954e-8);\nconst vec2 TWO_PI_FP64 = vec2(6.2831854820251465, -1.7484556025237907e-7);\nconst vec2 PI_2_FP64 = vec2(1.5707963705062866, -4.371139006309477e-8);\nconst vec2 PI_4_FP64 = vec2(0.7853981852531433, -2.1855695031547384e-8);\nconst vec2 PI_16_FP64 = vec2(0.19634954631328583, -5.463923757886846e-9);\nconst vec2 PI_16_2_FP64 = vec2(0.39269909262657166, -1.0927847515773692e-8);\nconst vec2 PI_16_3_FP64 = vec2(0.5890486240386963, -1.4906100798128818e-9);\nconst vec2 PI_180_FP64 = vec2(0.01745329238474369, 1.3519960498364902e-10);\n\nconst vec2 SIN_TABLE_0_FP64 = vec2(0.19509032368659973, -1.6704714833615242e-9);\nconst vec2 SIN_TABLE_1_FP64 = vec2(0.3826834261417389, 6.22335089017767e-9);\nconst vec2 SIN_TABLE_2_FP64 = vec2(0.5555702447891235, -1.1769521357507529e-8);\nconst vec2 SIN_TABLE_3_FP64 = vec2(0.7071067690849304, 1.2101617041793133e-8);\n\nconst vec2 COS_TABLE_0_FP64 = vec2(0.9807852506637573, 2.9739473106360492e-8);\nconst vec2 COS_TABLE_1_FP64 = vec2(0.9238795042037964, 2.8307490351764386e-8);\nconst vec2 COS_TABLE_2_FP64 = vec2(0.8314695954322815, 1.6870263741530778e-8);\nconst vec2 COS_TABLE_3_FP64 = vec2(0.7071067690849304, 1.2101617152815436e-8);\n\nconst vec2 INVERSE_FACTORIAL_3_FP64 = vec2(1.666666716337204e-01, -4.967053879312289e-09); // 1/3!\nconst vec2 INVERSE_FACTORIAL_4_FP64 = vec2(4.16666679084301e-02, -1.2417634698280722e-09); // 1/4!\nconst vec2 INVERSE_FACTORIAL_5_FP64 = vec2(8.333333767950535e-03, -4.34617203337595e-10); // 1/5!\nconst vec2 INVERSE_FACTORIAL_6_FP64 = vec2(1.3888889225199819e-03, -3.3631094437103215e-11); // 1/6!\nconst vec2 INVERSE_FACTORIAL_7_FP64 = vec2(1.9841270113829523e-04,  -2.725596874933456e-12); // 1/7!\nconst vec2 INVERSE_FACTORIAL_8_FP64 = vec2(2.4801587642286904e-05, -3.406996025904184e-13); // 1/8!\nconst vec2 INVERSE_FACTORIAL_9_FP64 = vec2(2.75573188446287533e-06, 3.7935713937038186e-14); // 1/9!\nconst vec2 INVERSE_FACTORIAL_10_FP64 = vec2(2.755731998149713e-07, -7.575112367869873e-15); // 1/10!\n\nfloat nint(float d) {\n    if (d == floor(d)) return d;\n    return floor(d + 0.5);\n}\n\nvec2 nint_fp64(vec2 a) {\n    float hi = nint(a.x);\n    float lo;\n    vec2 tmp;\n    if (hi == a.x) {\n        lo = nint(a.y);\n        tmp = quickTwoSum(hi, lo);\n    } else {\n        lo = 0.0;\n        if (abs(hi - a.x) == 0.5 && a.y < 0.0) {\n            hi -= 1.0;\n        }\n        tmp = vec2(hi, lo);\n    }\n    return tmp;\n}\n\n/* k_power controls how much range reduction we would like to have\nRange reduction uses the following method:\nassume a = k_power * r + m * log(2), k and m being integers.\nSet k_power = 4 (we can choose other k to trade accuracy with performance.\nwe only need to calculate exp(r) and using exp(a) = 2^m * exp(r)^k_power;\n*/\n\nvec2 exp_fp64(vec2 a) {\n  // We need to make sure these two numbers match\n  // as bit-wise shift is not available in GLSL 1.0\n  const int k_power = 4;\n  const float k = 16.0;\n\n  const float inv_k = 1.0 / k;\n\n  if (a.x <= -88.0) return vec2(0.0, 0.0);\n  if (a.x >= 88.0) return vec2(1.0 / 0.0, 1.0 / 0.0);\n  if (a.x == 0.0 && a.y == 0.0) return vec2(1.0, 0.0);\n  if (a.x == 1.0 && a.y == 0.0) return E_FP64;\n\n  float m = floor(a.x / LOG2_FP64.x + 0.5);\n  vec2 r = sub_fp64(a, mul_fp64(LOG2_FP64, vec2(m, 0.0))) * inv_k;\n  vec2 s, t, p;\n\n  p = mul_fp64(r, r);\n  s = sum_fp64(r, p * 0.5);\n  p = mul_fp64(p, r);\n  t = mul_fp64(p, INVERSE_FACTORIAL_3_FP64);\n\n  s = sum_fp64(s, t);\n  p = mul_fp64(p, r);\n  t = mul_fp64(p, INVERSE_FACTORIAL_4_FP64);\n\n  s = sum_fp64(s, t);\n  p = mul_fp64(p, r);\n  t = mul_fp64(p, INVERSE_FACTORIAL_5_FP64);\n\n  // s = sum_fp64(s, t);\n  // p = mul_fp64(p, r);\n  // t = mul_fp64(p, INVERSE_FACTORIAL_6_FP64);\n\n  // s = sum_fp64(s, t);\n  // p = mul_fp64(p, r);\n  // t = mul_fp64(p, INVERSE_FACTORIAL_7_FP64);\n\n  s = sum_fp64(s, t);\n\n\n  // At this point, s = exp(r) - 1; but after following 4 recursions, we will get exp(r) ^ 512 - 1.\n  for (int i = 0; i < k_power; i++) {\n    s = sum_fp64(s * 2.0, mul_fp64(s, s));\n  }\n\n#if defined(NVIDIA_FP64_WORKAROUND) || defined(INTEL_FP64_WORKAROUND)\n  s = sum_fp64(s, vec2(ONE, 0.0));\n#else\n  s = sum_fp64(s, vec2(1.0, 0.0));\n#endif\n\n  return s * pow(2.0, m);\n//   return r;\n}\n\nvec2 log_fp64(vec2 a)\n{\n  if (a.x == 1.0 && a.y == 0.0) return vec2(0.0, 0.0);\n  if (a.x <= 0.0) return vec2(0.0 / 0.0, 0.0 / 0.0);\n  vec2 x = vec2(log(a.x), 0.0);\n  vec2 s;\n#if defined(NVIDIA_FP64_WORKAROUND) || defined(INTEL_FP64_WORKAROUND)\n  s = vec2(ONE, 0.0);\n#else\n  s = vec2(1.0, 0.0);\n#endif\n\n  x = sub_fp64(sum_fp64(x, mul_fp64(a, exp_fp64(-x))), s);\n  return x;\n}\n\nvec2 sin_taylor_fp64(vec2 a) {\n  vec2 r, s, t, x;\n\n  if (a.x == 0.0 && a.y == 0.0) {\n    return vec2(0.0, 0.0);\n  }\n\n  x = -mul_fp64(a, a);\n  s = a;\n  r = a;\n\n  r = mul_fp64(r, x);\n  t = mul_fp64(r, INVERSE_FACTORIAL_3_FP64);\n  s = sum_fp64(s, t);\n\n  r = mul_fp64(r, x);\n  t = mul_fp64(r, INVERSE_FACTORIAL_5_FP64);\n  s = sum_fp64(s, t);\n\n  /* keep the following commented code in case we need them\n  for extra accuracy from the Taylor expansion*/\n\n  // r = mul_fp64(r, x);\n  // t = mul_fp64(r, INVERSE_FACTORIAL_7_FP64);\n  // s = sum_fp64(s, t);\n\n  // r = mul_fp64(r, x);\n  // t = mul_fp64(r, INVERSE_FACTORIAL_9_FP64);\n  // s = sum_fp64(s, t);\n\n  return s;\n}\n\nvec2 cos_taylor_fp64(vec2 a) {\n  vec2 r, s, t, x;\n\n  if (a.x == 0.0 && a.y == 0.0) {\n    return vec2(1.0, 0.0);\n  }\n\n  x = -mul_fp64(a, a);\n  r = x;\n  s = sum_fp64(vec2(1.0, 0.0), r * 0.5);\n\n  r = mul_fp64(r, x);\n  t = mul_fp64(r, INVERSE_FACTORIAL_4_FP64);\n  s = sum_fp64(s, t);\n\n  r = mul_fp64(r, x);\n  t = mul_fp64(r, INVERSE_FACTORIAL_6_FP64);\n  s = sum_fp64(s, t);\n\n  /* keep the following commented code in case we need them\n  for extra accuracy from the Taylor expansion*/\n\n  // r = mul_fp64(r, x);\n  // t = mul_fp64(r, INVERSE_FACTORIAL_8_FP64);\n  // s = sum_fp64(s, t);\n\n  // r = mul_fp64(r, x);\n  // t = mul_fp64(r, INVERSE_FACTORIAL_10_FP64);\n  // s = sum_fp64(s, t);\n\n  return s;\n}\n\nvoid sincos_taylor_fp64(vec2 a, out vec2 sin_t, out vec2 cos_t) {\n  if (a.x == 0.0 && a.y == 0.0) {\n    sin_t = vec2(0.0, 0.0);\n    cos_t = vec2(1.0, 0.0);\n  }\n\n  sin_t = sin_taylor_fp64(a);\n  cos_t = sqrt_fp64(sub_fp64(vec2(1.0, 0.0), mul_fp64(sin_t, sin_t)));\n}\n\nvec2 sin_fp64(vec2 a) {\n    if (a.x == 0.0 && a.y == 0.0) {\n        return vec2(0.0, 0.0);\n    }\n\n    // 2pi range reduction\n    vec2 z = nint_fp64(div_fp64(a, TWO_PI_FP64));\n    vec2 r = sub_fp64(a, mul_fp64(TWO_PI_FP64, z));\n\n    vec2 t;\n    float q = floor(r.x / PI_2_FP64.x + 0.5);\n    int j = int(q);\n\n    if (j < -2 || j > 2) {\n        return vec2(0.0 / 0.0, 0.0 / 0.0);\n    }\n\n    t = sub_fp64(r, mul_fp64(PI_2_FP64, vec2(q, 0.0)));\n\n    q = floor(t.x / PI_16_FP64.x + 0.5);\n    int k = int(q);\n\n    if (k == 0) {\n        if (j == 0) {\n            return sin_taylor_fp64(t);\n        } else if (j == 1) {\n            return cos_taylor_fp64(t);\n        } else if (j == -1) {\n            return -cos_taylor_fp64(t);\n        } else {\n            return -sin_taylor_fp64(t);\n        }\n    }\n\n    int abs_k = int(abs(float(k)));\n\n    if (abs_k > 4) {\n        return vec2(0.0 / 0.0, 0.0 / 0.0);\n    } else {\n        t = sub_fp64(t, mul_fp64(PI_16_FP64, vec2(q, 0.0)));\n    }\n\n    vec2 u = vec2(0.0, 0.0);\n    vec2 v = vec2(0.0, 0.0);\n\n#if defined(NVIDIA_FP64_WORKAROUND) || defined(INTEL_FP64_WORKAROUND)\n    if (abs(float(abs_k) - 1.0) < 0.5) {\n        u = COS_TABLE_0_FP64;\n        v = SIN_TABLE_0_FP64;\n    } else if (abs(float(abs_k) - 2.0) < 0.5) {\n        u = COS_TABLE_1_FP64;\n        v = SIN_TABLE_1_FP64;\n    } else if (abs(float(abs_k) - 3.0) < 0.5) {\n        u = COS_TABLE_2_FP64;\n        v = SIN_TABLE_2_FP64;\n    } else if (abs(float(abs_k) - 4.0) < 0.5) {\n        u = COS_TABLE_3_FP64;\n        v = SIN_TABLE_3_FP64;\n    }\n#else\n    if (abs_k == 1) {\n        u = COS_TABLE_0_FP64;\n        v = SIN_TABLE_0_FP64;\n    } else if (abs_k == 2) {\n        u = COS_TABLE_1_FP64;\n        v = SIN_TABLE_1_FP64;\n    } else if (abs_k == 3) {\n        u = COS_TABLE_2_FP64;\n        v = SIN_TABLE_2_FP64;\n    } else if (abs_k == 4) {\n        u = COS_TABLE_3_FP64;\n        v = SIN_TABLE_3_FP64;\n    }\n#endif\n\n    vec2 sin_t, cos_t;\n    sincos_taylor_fp64(t, sin_t, cos_t);\n\n\n\n    vec2 result = vec2(0.0, 0.0);\n    if (j == 0) {\n        if (k > 0) {\n            result = sum_fp64(mul_fp64(u, sin_t), mul_fp64(v, cos_t));\n        } else {\n            result = sub_fp64(mul_fp64(u, sin_t), mul_fp64(v, cos_t));\n        }\n    } else if (j == 1) {\n        if (k > 0) {\n            result = sub_fp64(mul_fp64(u, cos_t), mul_fp64(v, sin_t));\n        } else {\n            result = sum_fp64(mul_fp64(u, cos_t), mul_fp64(v, sin_t));\n        }\n    } else if (j == -1) {\n        if (k > 0) {\n            result = sub_fp64(mul_fp64(v, sin_t), mul_fp64(u, cos_t));\n        } else {\n            result = -sum_fp64(mul_fp64(v, sin_t), mul_fp64(u, cos_t));\n        }\n    } else {\n        if (k > 0) {\n            result = -sum_fp64(mul_fp64(u, sin_t), mul_fp64(v, cos_t));\n        } else {\n            result = sub_fp64(mul_fp64(v, cos_t), mul_fp64(u, sin_t));\n        }\n    }\n\n    return result;\n}\n\nvec2 cos_fp64(vec2 a) {\n    if (a.x == 0.0 && a.y == 0.0) {\n        return vec2(1.0, 0.0);\n    }\n\n    // 2pi range reduction\n    vec2 z = nint_fp64(div_fp64(a, TWO_PI_FP64));\n    vec2 r = sub_fp64(a, mul_fp64(TWO_PI_FP64, z));\n\n    vec2 t;\n    float q = floor(r.x / PI_2_FP64.x + 0.5);\n    int j = int(q);\n\n    if (j < -2 || j > 2) {\n        return vec2(0.0 / 0.0, 0.0 / 0.0);\n    }\n\n    t = sub_fp64(r, mul_fp64(PI_2_FP64, vec2(q, 0.0)));\n\n    q = floor(t.x / PI_16_FP64.x + 0.5);\n    int k = int(q);\n\n    if (k == 0) {\n        if (j == 0) {\n            return cos_taylor_fp64(t);\n        } else if (j == 1) {\n            return -sin_taylor_fp64(t);\n        } else if (j == -1) {\n            return sin_taylor_fp64(t);\n        } else {\n            return -cos_taylor_fp64(t);\n        }\n    }\n\n    int abs_k = int(abs(float(k)));\n\n    if (abs_k > 4) {\n        return vec2(0.0 / 0.0, 0.0 / 0.0);\n    } else {\n        t = sub_fp64(t, mul_fp64(PI_16_FP64, vec2(q, 0.0)));\n    }\n\n    vec2 u = vec2(0.0, 0.0);\n    vec2 v = vec2(0.0, 0.0);\n\n#if defined(NVIDIA_FP64_WORKAROUND) || defined(INTEL_FP64_WORKAROUND)\n    if (abs(float(abs_k) - 1.0) < 0.5) {\n        u = COS_TABLE_0_FP64;\n        v = SIN_TABLE_0_FP64;\n    } else if (abs(float(abs_k) - 2.0) < 0.5) {\n        u = COS_TABLE_1_FP64;\n        v = SIN_TABLE_1_FP64;\n    } else if (abs(float(abs_k) - 3.0) < 0.5) {\n        u = COS_TABLE_2_FP64;\n        v = SIN_TABLE_2_FP64;\n    } else if (abs(float(abs_k) - 4.0) < 0.5) {\n        u = COS_TABLE_3_FP64;\n        v = SIN_TABLE_3_FP64;\n    }\n#else\n    if (abs_k == 1) {\n        u = COS_TABLE_0_FP64;\n        v = SIN_TABLE_0_FP64;\n    } else if (abs_k == 2) {\n        u = COS_TABLE_1_FP64;\n        v = SIN_TABLE_1_FP64;\n    } else if (abs_k == 3) {\n        u = COS_TABLE_2_FP64;\n        v = SIN_TABLE_2_FP64;\n    } else if (abs_k == 4) {\n        u = COS_TABLE_3_FP64;\n        v = SIN_TABLE_3_FP64;\n    }\n#endif\n\n    vec2 sin_t, cos_t;\n    sincos_taylor_fp64(t, sin_t, cos_t);\n\n    vec2 result = vec2(0.0, 0.0);\n    if (j == 0) {\n        if (k > 0) {\n            result = sub_fp64(mul_fp64(u, cos_t), mul_fp64(v, sin_t));\n        } else {\n            result = sum_fp64(mul_fp64(u, cos_t), mul_fp64(v, sin_t));\n        }\n    } else if (j == 1) {\n        if (k > 0) {\n            result = -sum_fp64(mul_fp64(u, sin_t), mul_fp64(v, cos_t));\n        } else {\n            result = sub_fp64(mul_fp64(v, cos_t), mul_fp64(u, sin_t));\n        }\n    } else if (j == -1) {\n        if (k > 0) {\n            result = sum_fp64(mul_fp64(u, sin_t), mul_fp64(v, cos_t));\n        } else {\n            result = sub_fp64(mul_fp64(u, sin_t), mul_fp64(v, cos_t));\n        }\n    } else {\n        if (k > 0) {\n            result = sub_fp64(mul_fp64(v, sin_t), mul_fp64(u, cos_t));\n        } else {\n            result = -sum_fp64(mul_fp64(u, cos_t), mul_fp64(v, sin_t));\n        }\n    }\n\n    return result;\n}\n\nvec2 tan_fp64(vec2 a) {\n    vec2 sin_a;\n    vec2 cos_a;\n\n    if (a.x == 0.0 && a.y == 0.0) {\n        return vec2(0.0, 0.0);\n    }\n\n    // 2pi range reduction\n    vec2 z = nint_fp64(div_fp64(a, TWO_PI_FP64));\n    vec2 r = sub_fp64(a, mul_fp64(TWO_PI_FP64, z));\n\n    vec2 t;\n    float q = floor(r.x / PI_2_FP64.x + 0.5);\n    int j = int(q);\n\n\n    if (j < -2 || j > 2) {\n        return vec2(0.0 / 0.0, 0.0 / 0.0);\n    }\n\n    t = sub_fp64(r, mul_fp64(PI_2_FP64, vec2(q, 0.0)));\n\n    q = floor(t.x / PI_16_FP64.x + 0.5);\n    int k = int(q);\n    int abs_k = int(abs(float(k)));\n\n    // We just can't get PI/16 * 3.0 very accurately.\n    // so let's just store it\n    if (abs_k > 4) {\n        return vec2(0.0 / 0.0, 0.0 / 0.0);\n    } else {\n        t = sub_fp64(t, mul_fp64(PI_16_FP64, vec2(q, 0.0)));\n    }\n\n\n    vec2 u = vec2(0.0, 0.0);\n    vec2 v = vec2(0.0, 0.0);\n\n    vec2 sin_t, cos_t;\n    vec2 s, c;\n    sincos_taylor_fp64(t, sin_t, cos_t);\n\n    if (k == 0) {\n        s = sin_t;\n        c = cos_t;\n    } else {\n#if defined(NVIDIA_FP64_WORKAROUND) || defined(INTEL_FP64_WORKAROUND)\n        if (abs(float(abs_k) - 1.0) < 0.5) {\n            u = COS_TABLE_0_FP64;\n            v = SIN_TABLE_0_FP64;\n        } else if (abs(float(abs_k) - 2.0) < 0.5) {\n            u = COS_TABLE_1_FP64;\n            v = SIN_TABLE_1_FP64;\n        } else if (abs(float(abs_k) - 3.0) < 0.5) {\n            u = COS_TABLE_2_FP64;\n            v = SIN_TABLE_2_FP64;\n        } else if (abs(float(abs_k) - 4.0) < 0.5) {\n            u = COS_TABLE_3_FP64;\n            v = SIN_TABLE_3_FP64;\n        }\n#else\n        if (abs_k == 1) {\n            u = COS_TABLE_0_FP64;\n            v = SIN_TABLE_0_FP64;\n        } else if (abs_k == 2) {\n            u = COS_TABLE_1_FP64;\n            v = SIN_TABLE_1_FP64;\n        } else if (abs_k == 3) {\n            u = COS_TABLE_2_FP64;\n            v = SIN_TABLE_2_FP64;\n        } else if (abs_k == 4) {\n            u = COS_TABLE_3_FP64;\n            v = SIN_TABLE_3_FP64;\n        }\n#endif\n        if (k > 0) {\n            s = sum_fp64(mul_fp64(u, sin_t), mul_fp64(v, cos_t));\n            c = sub_fp64(mul_fp64(u, cos_t), mul_fp64(v, sin_t));\n        } else {\n            s = sub_fp64(mul_fp64(u, sin_t), mul_fp64(v, cos_t));\n            c = sum_fp64(mul_fp64(u, cos_t), mul_fp64(v, sin_t));\n        }\n    }\n\n    if (j == 0) {\n        sin_a = s;\n        cos_a = c;\n    } else if (j == 1) {\n        sin_a = c;\n        cos_a = -s;\n    } else if (j == -1) {\n        sin_a = -c;\n        cos_a = s;\n    } else {\n        sin_a = -s;\n        cos_a = -c;\n    }\n    return div_fp64(sin_a, cos_a);\n}\n\nvec2 radians_fp64(vec2 degree) {\n  return mul_fp64(degree, PI_180_FP64);\n}\n\nvec2 mix_fp64(vec2 a, vec2 b, float x) {\n  vec2 range = sub_fp64(b, a);\n  return sum_fp64(a, mul_fp64(range, vec2(x, 0.0)));\n}\n\n// Vector functions\n// vec2 functions\nvoid vec2_sum_fp64(vec2 a[2], vec2 b[2], out vec2 out_val[2]) {\n    out_val[0] = sum_fp64(a[0], b[0]);\n    out_val[1] = sum_fp64(a[1], b[1]);\n}\n\nvoid vec2_sub_fp64(vec2 a[2], vec2 b[2], out vec2 out_val[2]) {\n    out_val[0] = sub_fp64(a[0], b[0]);\n    out_val[1] = sub_fp64(a[1], b[1]);\n}\n\nvoid vec2_mul_fp64(vec2 a[2], vec2 b[2], out vec2 out_val[2]) {\n    out_val[0] = mul_fp64(a[0], b[0]);\n    out_val[1] = mul_fp64(a[1], b[1]);\n}\n\nvoid vec2_div_fp64(vec2 a[2], vec2 b[2], out vec2 out_val[2]) {\n    out_val[0] = div_fp64(a[0], b[0]);\n    out_val[1] = div_fp64(a[1], b[1]);\n}\n\nvoid vec2_mix_fp64(vec2 x[2], vec2 y[2], float a, out vec2 out_val[2]) {\n  vec2 range[2];\n  vec2_sub_fp64(y, x, range);\n  vec2 portion[2];\n  portion[0] = range[0] * a;\n  portion[1] = range[1] * a;\n  vec2_sum_fp64(x, portion, out_val);\n}\n\nvec2 vec2_length_fp64(vec2 x[2]) {\n  return sqrt_fp64(sum_fp64(mul_fp64(x[0], x[0]), mul_fp64(x[1], x[1])));\n}\n\nvoid vec2_normalize_fp64(vec2 x[2], out vec2 out_val[2]) {\n  vec2 length = vec2_length_fp64(x);\n  vec2 length_vec2[2];\n  length_vec2[0] = length;\n  length_vec2[1] = length;\n\n  vec2_div_fp64(x, length_vec2, out_val);\n}\n\nvec2 vec2_distance_fp64(vec2 x[2], vec2 y[2]) {\n  vec2 diff[2];\n  vec2_sub_fp64(x, y, diff);\n  return vec2_length_fp64(diff);\n}\n\nvec2 vec2_dot_fp64(vec2 a[2], vec2 b[2]) {\n  vec2 v[2];\n\n  v[0] = mul_fp64(a[0], b[0]);\n  v[1] = mul_fp64(a[1], b[1]);\n\n  return sum_fp64(v[0], v[1]);\n}\n\n// vec3 functions\nvoid vec3_sub_fp64(vec2 a[3], vec2 b[3], out vec2 out_val[3]) {\n  for (int i = 0; i < 3; i++) {\n    out_val[i] = sum_fp64(a[i], b[i]);\n  }\n}\n\nvoid vec3_sum_fp64(vec2 a[3], vec2 b[3], out vec2 out_val[3]) {\n  for (int i = 0; i < 3; i++) {\n    out_val[i] = sum_fp64(a[i], b[i]);\n  }\n}\n\nvec2 vec3_length_fp64(vec2 x[3]) {\n  return sqrt_fp64(sum_fp64(sum_fp64(mul_fp64(x[0], x[0]), mul_fp64(x[1], x[1])),\n    mul_fp64(x[2], x[2])));\n}\n\nvec2 vec3_distance_fp64(vec2 x[3], vec2 y[3]) {\n  vec2 diff[3];\n  vec3_sub_fp64(x, y, diff);\n  return vec3_length_fp64(diff);\n}\n\n// vec4 functions\nvoid vec4_fp64(vec4 a, out vec2 out_val[4]) {\n  out_val[0].x = a[0];\n  out_val[0].y = 0.0;\n\n  out_val[1].x = a[1];\n  out_val[1].y = 0.0;\n\n  out_val[2].x = a[2];\n  out_val[2].y = 0.0;\n\n  out_val[3].x = a[3];\n  out_val[3].y = 0.0;\n}\n\nvoid vec4_scalar_mul_fp64(vec2 a[4], vec2 b, out vec2 out_val[4]) {\n  out_val[0] = mul_fp64(a[0], b);\n  out_val[1] = mul_fp64(a[1], b);\n  out_val[2] = mul_fp64(a[2], b);\n  out_val[3] = mul_fp64(a[3], b);\n}\n\nvoid vec4_sum_fp64(vec2 a[4], vec2 b[4], out vec2 out_val[4]) {\n  for (int i = 0; i < 4; i++) {\n    out_val[i] = sum_fp64(a[i], b[i]);\n  }\n}\n\nvoid vec4_dot_fp64(vec2 a[4], vec2 b[4], out vec2 out_val) {\n  vec2 v[4];\n\n  v[0] = mul_fp64(a[0], b[0]);\n  v[1] = mul_fp64(a[1], b[1]);\n  v[2] = mul_fp64(a[2], b[2]);\n  v[3] = mul_fp64(a[3], b[3]);\n\n  out_val = sum_fp64(sum_fp64(v[0], v[1]), sum_fp64(v[2], v[3]));\n}\n\nvoid mat4_vec4_mul_fp64(vec2 b[16], vec2 a[4], out vec2 out_val[4]) {\n  vec2 tmp[4];\n\n  for (int i = 0; i < 4; i++)\n  {\n    for (int j = 0; j < 4; j++)\n    {\n      tmp[j] = b[j + i * 4];\n    }\n    vec4_dot_fp64(a, tmp, out_val[i]);\n  }\n}\n"},function(e,t,n){"use strict";var r=(n(53),n(455)),i=n(456),o=n(457);r.a,i.a,r.a,o.a},function(e,t,n){"use strict";t.a="  // empty\n"},function(e,t,n){"use strict";t.a="#define LIGHT_MAX 4\n\n/*\n// lighting configuration\nuniform bool enableLights;\nuniform vec3 ambientColor;\nuniform vec3 directionalColor;\nuniform vec3 lightingDirection;\n\n// point lights configuration\nuniform vec3 pointLocation[LIGHT_MAX];\nuniform vec3 pointColor[LIGHT_MAX];\nuniform int numberPoints;\n\n// reflection / refraction configuration\nuniform bool useReflection;\n*/\n\nuniform bool lighting_uEnableLights;\nuniform vec3 lighting_uAmbientColor;\nuniform vec3 lighting_uDirection;\nuniform vec3 lighting_uDirectionalColor;\n\n// point lights configuration\nuniform int  lighting_uPointCount;\nuniform vec3 lighting_uPointLocation[LIGHT_MAX];\nuniform vec3 lighting_uPointColor[LIGHT_MAX];\n\n// reflection / refraction configuration\nuniform bool lighting_uEnableReflections;\n\n// varyings\nvarying vec4 lighting_vPosition;\nvarying vec4 lighting_vNormal;\nvarying vec3 lighting_vColor;\nvarying vec3 lighting_vLightWeighting;\nvarying vec3 lighting_vReflection;\n\nvoid lighting_setPositionAndNormal(vec3 position, vec3 normal) {\n  lighting_vPosition = worldMatrix * vec4(position, 1.);\n  lighting_vNormal = worldInverseTransposeMatrix * vec4(normal, 1.);;\n}\n\nvoid lighting__getLightWeigting() {\n  float directionalLightWeighting = max(dot(lighting_vNormal.xyz, lighting_uDirection), 0.);\n  vec3 pointWeight = vec3(0., 0., 0.);\n  for (int i = 0; i < LIGHT_MAX; i++) {\n    if (i < numberPoints) {\n      vec4 mvLightPosition = viewMatrix * vec4(lighting_uPointLocation[i], 1.);\n      vec3 pointLightDirection = normalize(mvLightPosition.xyz - lighting_vPosition.xyz);\n      pointWeight += max(dot(lighting_vNormal.xyz, pointLightDirection), 0.) * pointColor[i];\n     } else {\n       break;\n     }\n   }\n   return ambientColor + (directionalColor * directionalLightWeighting) + pointWeight;\n}\n\nvoid lighting_apply(vec3 position, vec3 normal) {\n  lighting_setPositionAndNormal(position, normal);\n\n  // lighting code\n  if(!lighting_uEnableLights) {\n    lighting_vLightWeighting = vec3(1., 1., 1.);\n  } else {\n    lighting_vLightWeighting = lighting__getLightWeighting();\n  }\n}\n\nvoid lighting_set_reflection(vec3 position) {\n    // refraction / reflection code\n  if (lighting_uEnableReflections) {\n    lighting_vReflection = (viewInverseMatrix[3] - (worldMatrix * vec4(position, 1.))).xyz;\n  } else {\n    lighting_vReflection = vec3(1., 1., 1.);\n  }\n}\n"},function(e,t,n){"use strict";t.a="#ifdef GL_ES\nprecision highp float;\n#endif\n\n#define LIGHT_MAX 4\n\nvarying vec3 lighting_vLightWeighting;\n\nvec4 lighting_apply(vec4 color) {\n  // set color from texture\n  return vec4(color.rgb * lighting_vLightWeighting, color.a);\n}\n\n// spec-map.fs\n\nuniform mat4 viewMatrix;\n\n\nvarying vec4 lighting_vColor;\nvarying vec4 lighting_vTransformedNormal;\nvarying vec4 lighting_vPosition;\n\nuniform float shininess;\nuniform bool enableSpecularMap;\nuniform bool enableLights;\n\nuniform vec3 ambientColor;\nuniform vec3 directionalColor;\nuniform vec3 lightingDirection;\n\nuniform vec3 lighting_uPointLocation[LIGHT_MAX];\nuniform vec3 lighting_uPointColor[LIGHT_MAX];\nuniform float lighting_uPointSpecularEnable[LIGHT_MAX];\nuniform vec3 lighting_uPointSpecularColor[LIGHT_MAX];\nuniform int numberPoints;\n\n\nvec3 lighting__calculate_light_weighting() {\n\treturn lighting__calculate_light_weighting(shininess);\n}\n\nvec3 lighting__calculate_light_weighting(shininess) {\n  vec3 normal = vTransformedNormal.xyz;\n  vec3 eyeDirection = normalize(-vPosition.xyz);\n\n  vec3 specularLight = vec3(0., 0., 0.);\n  vec3 diffuseLight = vec3(0., 0., 0.);\n\n  for (int i = 0; i < LIGHT_MAX; i++) {\n    if (i < numberPoints) {\n      vec3 transformedPointLocation = (viewMatrix * vec4(lighting_uPointLocation[i], 1.0)).xyz;\n      vec3 lightDirection = normalize(transformedPointLocation - vPosition.xyz);\n\n      if (lighting_uPointSpecularEnable > 0.) {\n        vec3 reflectionDirection = reflect(-lightDirection, normal);\n        float specularLightWeighting =\n          pow(max(dot(reflectionDirection, eyeDirection), 0.0), shininessVal);\n        specularLight += specularLightWeighting * lighting_uPointSpecularColor[i];\n      }\n\n      float diffuseLightWeighting = max(dot(normal, lightDirection), 0.0);\n      diffuseLight += diffuseLightWeighting * lighting_uPointColor[i];\n    } else {\n      break;\n    }\n  }\n\n  return ambientColor + diffuseLight + specularLight;\n}\n\nvoid lighting_filterColor(fragmentColor) {\n  if (!lighting_enable) {\n  \treturn fragmentColor;\n  } else {\n  \tvec3 lightWeighting = lighting__calculate_light_weighting();\n  \treturn vec4(fragmentColor.rgb * lightWeighting, fragmentColor.a);\n  }\n}\n\n// render-tex.fs\n\nuniform vec3 material_uAmbientColor;\nuniform vec3 material_uDiffuseColor;\nuniform vec3 material_uSpecularColor;\nuniform vec3 material_uEmissiveColor;\n\nuniform bool hasTexture1;\nuniform sampler2D sampler1;\n\nuniform mat4 viewMatrix;\n\nvoid apply_lighting(color) {\n  vec3 ambientLightWeighting = ambientColor;\n\n  vec3 normal = vTransformedNormal.xyz;\n  vec3 eyeDirection = normalize(-vPosition.xyz);\n\n  vec3 specularLight = vec3(0.0, 0.0, 0.0);\n  vec3 diffuseLight = vec3(0.0, 0.0, 0.0);\n\n  for (int i = 0; i < LIGHT_MAX; i++) {\n    if (i < numberPoints) {\n      vec3 transformedPointLocation = (viewMatrix * vec4(pointLocation[i], 1.0)).xyz;\n      vec3 lightDirection = normalize(transformedPointLocation - vPosition.xyz);\n\n      if (enableSpecularHighlights) {\n        vec3 reflectionDirection = reflect(-lightDirection, normal);\n        float specularLightWeighting =\n          pow(max(dot(reflectionDirection, eyeDirection), 0.0), shininess);\n        specularLight += specularLightWeighting * pointSpecularColor[i];\n      }\n\n      float diffuseLightWeighting = max(dot(normal, lightDirection), 0.0);\n      diffuseLight += diffuseLightWeighting * pointColor[i];\n    } else {\n        break;\n    }\n  }\n\n  vec3 matAmbientColor = material_uAmbientColor * color.rgb;\n  vec3 matDiffuseColor = material_uDiffuseColor * color.rgb;\n  vec3 matSpecularColor = material_uSpecularColor * color.rgb;\n  vec3 matEmissiveColor = material_uEmissiveColor * color.rgb;\n  gl_FragColor = vec4(\n    matAmbientColor * ambientLightWeighting\n    + matDiffuseColor * diffuseLightWeighting\n    + matSpecularColor * specularLightWeighting\n    + matEmissiveColor,\n    color.a\n  );\n}\n\n/// frag-lighting\n\n  vec3 lightWeighting;\n  if (!enableLights) {\n    lightWeighting = vec3(1.0, 1.0, 1.0);\n  } else {\n    vec3 lightDirection;\n    float specularLightWeighting = 0.0;\n    float diffuseLightWeighting = 0.0;\n    vec3  specularLight = vec3(0.0, 0.0, 0.0);\n    vec3  diffuseLight = vec3(0.0, 0.0, 0.0);\n\n    vec3 transformedPointLocation;\n    vec3 normal = vTransformedNormal.xyz;\n\n    vec3 eyeDirection = normalize(-vPosition.xyz);\n    vec3 reflectionDirection;\n\n    vec3 pointWeight = vec3(0.0, 0.0, 0.0);\n\n    for (int i = 0; i < LIGHT_MAX; i++) {\n      if (i < numberPoints) {\n        transformedPointLocation = (viewMatrix * vec4(pointLocation[i], 1.0)).xyz;\n        lightDirection = normalize(transformedPointLocation - vPosition.xyz);\n\n        if (enableSpecular[i] > 0.0) {\n          reflectionDirection = reflect(-lightDirection, normal);\n          specularLightWeighting = pow(max(dot(reflectionDirection, eyeDirection), 0.0), shininess);\n          specularLight += specularLightWeighting * pointSpecularColor[i];\n        }\n\n        diffuseLightWeighting = max(dot(normal, lightDirection), 0.0);\n        diffuseLight += diffuseLightWeighting * pointColor[i];\n      } else {\n        break;\n      }\n    }\n\n    lightWeighting = ambientColor + diffuseLight + specularLight;\n  }\n\n// reflection / refraction configs\nuniform float reflection;\nuniform float refraction;\n\n///\n  // has cube texture then apply reflection\n  // if (hasTextureCube1) {\n  //   vec3 nReflection = normalize(vReflection);\n  //   vec3 reflectionValue;\n  //   if (refraction > 0.0) {\n  //    reflectionValue = refract(nReflection, vNormal.xyz, refraction);\n  //   } else {\n  //    reflectionValue = -reflect(nReflection, vNormal.xyz);\n  //   }\n\n  //   // TODO(nico): check whether this is right.\n  //   vec4 cubeColor = textureCube(samplerCube1,\n  //       vec3(-reflectionValue.x, -reflectionValue.y, reflectionValue.z));\n  //   gl_FragColor = vec4(mix(gl_FragColor.xyz, cubeColor.xyz, reflection), 1.0);\n  // }\n"},function(e,t,n){"use strict";function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a,t={};return e.lightDirection&&(t.dirlight_uLightDirection=e.lightDirection),t}var i=n(263),o=new Float32Array([1,1,2]),a={lightDirection:o};i.a},function(e,t,n){"use strict";function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o,t={};if(void 0!==e.pickingSelectedColor)if(null===e.pickingSelectedColor)t.picking_uSelectedColorValid=0;else{var n=[e.pickingSelectedColor[0],e.pickingSelectedColor[1],e.pickingSelectedColor[2]];t.picking_uSelectedColorValid=1,t.picking_uSelectedColor=n}return void 0!==e.pickingHighlightColor&&(t.picking_uHighlightColor=e.pickingHighlightColor),void 0!==e.pickingThreshold&&(t.picking_uThreshold=e.pickingThreshold),void 0!==e.pickingActive&&(t.picking_uActive=e.pickingActive?1:0),t}var i=new Uint8Array([0,255,255,255]),o={pickingSelectedColor:null,pickingHighlightColor:i,pickingThreshold:1,pickingActive:!1};t.a={name:"picking",vs:"uniform vec3 picking_uSelectedColor;\nuniform float picking_uThreshold;\nuniform bool picking_uSelectedColorValid;\n\nvarying vec4 picking_vRGBcolor_Aselected;\n\nconst float COLOR_SCALE = 1. / 255.;\n\nbool isVertexPicked(vec3 vertexColor) {\n  return\n    picking_uSelectedColorValid &&\n    abs(vertexColor.r - picking_uSelectedColor.r) < picking_uThreshold &&\n    abs(vertexColor.g - picking_uSelectedColor.g) < picking_uThreshold &&\n    abs(vertexColor.b - picking_uSelectedColor.b) < picking_uThreshold;\n}\n\nvoid picking_setPickingColor(vec3 pickingColor) {\n  // Do the comparison with selected item color in vertex shader as it should mean fewer compares\n  picking_vRGBcolor_Aselected.a =\n    float(isVertexPicked(pickingColor));\n\n  // Stores the picking color so that the fragment shader can render it during picking\n  picking_vRGBcolor_Aselected.rgb = pickingColor * COLOR_SCALE;\n}\n",fs:"uniform bool picking_uActive; // true during rendering to offscreen picking buffer\nuniform vec3 picking_uSelectedColor;\nuniform vec4 picking_uHighlightColor;\n\nvarying vec4 picking_vRGBcolor_Aselected;\n\nconst float COLOR_SCALE = 1. / 255.;\n\n/*\n * Returns highlight color if this item is selected.\n */\nvec4 picking_filterHighlightColor(vec4 color) {\n  bool selected = bool(picking_vRGBcolor_Aselected.a);\n  return selected ? (picking_uHighlightColor * COLOR_SCALE) : color;\n}\n\n/*\n * Returns picking color if picking enabled else unmodified argument.\n */\nvec4 picking_filterPickingColor(vec4 color) {\n  vec3 pickingColor = picking_vRGBcolor_Aselected.rgb;\n  return picking_uActive ? vec4(pickingColor, 1.0) : color;\n}\n",getUniforms:r}},function(e,t,n){"use strict"},function(e,t,n){"use strict";t.a='// EXTERNAL CONSTANTS: these must match JavaScript constants in "src/core/lib/constants.js"\nconst float COORDINATE_SYSTEM_IDENTITY = 0.;\nconst float COORDINATE_SYSTEM_LNG_LAT = 1.;\nconst float COORDINATE_SYSTEM_METER_OFFSETS = 2.;\nconst float COORDINATE_SYSTEM_LNGLAT_OFFSETS = 3.;\n\nuniform float project_uCoordinateSystem;\nuniform float project_uScale;\nuniform vec3 project_uPixelsPerMeter;\nuniform vec3 project_uPixelsPerDegree;\nuniform vec3 project_uPixelsPerUnit;\nuniform vec3 project_uPixelsPerUnit2;\nuniform vec4 project_uCenter;\nuniform mat4 project_uModelMatrix;\nuniform mat4 project_uViewProjectionMatrix;\nuniform vec2 project_uViewportSize;\nuniform float project_uDevicePixelRatio;\nuniform float project_uFocalDistance;\nuniform vec3 project_uCameraPosition;\n\nconst float TILE_SIZE = 512.0;\nconst float PI = 3.1415926536;\nconst float WORLD_SCALE = TILE_SIZE / (PI * 2.0);\n\n//\n// Scaling offsets - scales meters to "pixels"\n// Note the scalar version of project_scale is for scaling the z component only\n//\nfloat project_scale(float meters) {\n  return meters * project_uPixelsPerMeter.z;\n}\n\nvec2 project_scale(vec2 meters) {\n  return meters * project_uPixelsPerMeter.xy;\n}\n\nvec3 project_scale(vec3 meters) {\n  return meters * project_uPixelsPerMeter;\n}\n\nvec4 project_scale(vec4 meters) {\n  return vec4(meters.xyz * project_uPixelsPerMeter, meters.w);\n}\n\n//\n// Projecting normal - transform deltas from current coordinate system to\n// normals in the worldspace\n//\nvec3 project_normal(vec3 vector) {\n  if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNG_LAT ||\n    project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSETS) {\n    return normalize(vector * project_uPixelsPerDegree);\n  }\n  return normalize(vector * project_uPixelsPerMeter);\n}\n\nvec4 project_offset_(vec4 offset) {\n  vec3 pixelsPerUnit = project_uPixelsPerUnit + project_uPixelsPerUnit2 * offset.y;\n  return vec4(offset.xyz * pixelsPerUnit, offset.w);\n}\n\n//\n// Projecting positions - non-linear projection: lnglats => unit tile [0-1, 0-1]\n//\nvec2 project_mercator_(vec2 lnglat) {\n  return vec2(\n    radians(lnglat.x) + PI,\n    PI - log(tan_fp32(PI * 0.25 + radians(lnglat.y) * 0.5))\n  );\n}\n\n//\n// Projects lnglats (or meter offsets, depending on mode) to pixels\n//\nvec4 project_position(vec4 position) {\n  // TODO - why not simply subtract center and fall through?\n  if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNG_LAT) {\n    return project_uModelMatrix * vec4(\n      project_mercator_(position.xy) * WORLD_SCALE * project_uScale,\n      project_scale(position.z),\n      position.w\n    );\n  }\n\n  if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSETS) {\n    return project_offset_(position);\n  }\n\n  // METER_OFFSETS or IDENTITY\n  // Apply model matrix\n  vec4 position_modelspace = project_uModelMatrix * position;\n  return project_offset_(position_modelspace);\n}\n\nvec3 project_position(vec3 position) {\n  vec4 projected_position = project_position(vec4(position, 1.0));\n  return projected_position.xyz;\n}\n\nvec2 project_position(vec2 position) {\n  vec4 projected_position = project_position(vec4(position, 0.0, 1.0));\n  return projected_position.xy;\n}\n\n//\n// Projects from "world" coordinates to clip space.\n// Uses project_uViewProjectionMatrix\n//\nvec4 project_to_clipspace(vec4 position) {\n  if (project_uCoordinateSystem == COORDINATE_SYSTEM_METER_OFFSETS ||\n    project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSETS) {\n    // Needs to be divided with project_uPixelsPerMeter\n    position.w *= project_uPixelsPerMeter.z;\n  }\n  return project_uViewProjectionMatrix * position + project_uCenter;\n}\n\n// Returns a clip space offset that corresponds to a given number of **non-device** pixels\nvec4 project_pixel_to_clipspace(vec2 pixels) {\n  vec2 offset = pixels / project_uViewportSize * project_uDevicePixelRatio;\n  return vec4(offset * project_uFocalDistance, 0.0, 0.0);\n}\n'},function(e,t,n){"use strict";t.a="float scale(float position) {\n  return project_scale(position);\n}\n\nvec2 scale(vec2 position) {\n  return project_scale(position);\n}\n\nvec3 scale(vec3 position) {\n  return project_scale(position);\n}\n\nvec4 scale(vec4 position) {\n  return project_scale(position);\n}\n\nvec2 preproject(vec2 position) {\n  return project_position(position);\n}\n\nvec3 preproject(vec3 position) {\n  return project_position(position);\n}\n\nvec4 preproject(vec4 position) {\n  return project_position(position);\n}\n\nvec4 project(vec4 position) {\n  return project_to_clipspace(position);\n}\n"},function(e,t,n){"use strict";function r(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=Math.fround(e),i=e-r;return t[n]=r,t[n+1]=i,t}function i(e){for(var t=new Float32Array(32),n=0;n<4;++n)for(var i=0;i<4;++i){var o=4*n+i;r(e[4*i+n],t,2*o)}return t}function o(e){var t=e.viewport,n=(e.modelMatrix,e.coordinateSystem),r=e.coordinateOrigin,i=e.coordinateZoom,o=t.viewMatrixUncentered,a=t.viewMatrix,s=t.projectionMatrix,u=t.viewProjectionMatrix,c=void 0;switch(n){case v.a.IDENTITY:case v.a.LNGLAT:c=y;break;case v.a.LNGLAT_OFFSETS:case v.a.METER_OFFSETS:var h=Object(g.lngLatToWorld)(r,Math.pow(2,i));c=f()([],[h[0],h[1],0,1],u),a=o||a,u=l()([],s,a),u=l()([],u,m);break;default:throw new Error("Unknown projection mode")}return{viewMatrix:a,viewProjectionMatrix:u,projectionCenter:c,cameraPos:t.cameraPosition}}function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.viewport,n=e.modelMatrix,r=void 0===n?null:n,i=e.coordinateSystem,a=void 0===i?v.a.LNGLAT:i,u=e.coordinateOrigin,l=void 0===u?[0,0]:u,c=e.fp64,f=void 0!==c&&c,p=e.projectionMode,g=e.positionOrigin;d()(t),void 0!==p&&h.a.removed("projectionMode","coordinateSystem"),void 0!==g&&h.a.removed("positionOrigin","coordinateOrigin");var y=t.zoom;d()(y>=0);var m=o({coordinateSystem:a,coordinateOrigin:l,coordinateZoom:y,modelMatrix:r,viewport:t}),E=m.projectionCenter,x=m.viewProjectionMatrix,w=m.cameraPos;d()(x,"Viewport missing modelViewProjectionMatrix");var T=t.getDistanceScales(),S=window&&window.devicePixelRatio||1,A=[t.width*S,t.height*S],C=r||_,O={project_uCoordinateSystem:a,project_uCenter:E,project_uViewportSize:A,project_uDevicePixelRatio:S,project_uFocalDistance:t.focalDistance||1,project_uPixelsPerMeter:T.pixelsPerMeter,project_uPixelsPerDegree:T.pixelsPerDegree,project_uPixelsPerUnit:T.pixelsPerMeter,project_uPixelsPerUnit2:b,project_uScale:t.scale,project_uModelMatrix:C,project_uViewProjectionMatrix:x,project_uCameraPosition:w};if(a===v.a.METER_OFFSETS){var k=t.getDistanceScales(l);O.project_uPixelsPerUnit=k.pixelsPerMeter,O.project_uPixelsPerUnit2=k.pixelsPerMeter2}if(a===v.a.LNGLAT_OFFSETS){var P=t.getDistanceScales(l);O.project_uPixelsPerUnit=P.pixelsPerDegree,O.project_uPixelsPerUnit2=P.pixelsPerDegree2}return f?s(O):O}function s(e){var t=i(e.project_uViewProjectionMatrix),n=r(e.project_uScale);return e.project_uViewProjectionMatrixFP64=t,e.project64_uViewProjectionMatrix=t,e.project64_uScale=n,e}t.a=a;var u=n(47),l=n.n(u),c=n(60),f=n.n(c),h=n(12),p=n(0),d=n.n(p),v=n(64),g=n(25),y=[0,0,0,0],m=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0],_=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],b=[0,0,0]},function(e,t,n){"use strict";t.a="\nconst vec2 WORLD_SCALE_FP64 = vec2(81.4873275756836, 0.0000032873668232014097);\n\nuniform vec2 project64_uScale;\nuniform vec2 project_uViewProjectionMatrixFP64[16];\n\n// longitude: lnglat_fp64.xy; latitude: lnglat_fp64.zw\nvoid mercatorProject_fp64(vec4 lnglat_fp64, out vec2 out_val[2]) {\n\n#if defined(NVIDIA_FP64_WORKAROUND)\n  out_val[0] = sum_fp64(radians_fp64(lnglat_fp64.xy), PI_FP64 * ONE);\n#else\n  out_val[0] = sum_fp64(radians_fp64(lnglat_fp64.xy), PI_FP64);\n#endif\n  out_val[1] = sub_fp64(PI_FP64,\n    log_fp64(tan_fp64(sum_fp64(PI_4_FP64, radians_fp64(lnglat_fp64.zw) / 2.0))));\n  return;\n}\n\nvoid project_position_fp64(vec4 position_fp64, out vec2 out_val[2]) {\n  vec2 pos_fp64[2];\n  mercatorProject_fp64(position_fp64, pos_fp64);\n  vec2 x_fp64 = mul_fp64(pos_fp64[0], project64_uScale);\n  vec2 y_fp64 = mul_fp64(pos_fp64[1], project64_uScale);\n  out_val[0] = mul_fp64(x_fp64, WORLD_SCALE_FP64);\n  out_val[1] = mul_fp64(y_fp64, WORLD_SCALE_FP64);\n\n  return;\n}\n\nvec4 project_to_clipspace_fp64(vec2 vertex_pos_modelspace[4]) {\n  vec2 vertex_pos_clipspace[4];\n  mat4_vec4_mul_fp64(project_uViewProjectionMatrixFP64, vertex_pos_modelspace,\n    vertex_pos_clipspace);\n  return vec4(\n    vertex_pos_clipspace[0].x,\n    vertex_pos_clipspace[1].x,\n    vertex_pos_clipspace[2].x,\n    vertex_pos_clipspace[3].x\n    );\n}\n"},function(e,t,n){"use strict";t.a="#define NUM_OF_LIGHTS 2\n\n// TODO these should be using lighting_ prefix\nuniform vec3 lightsPosition[16];\nuniform vec2 lightsStrength[16];\nuniform float ambientRatio;\nuniform float diffuseRatio;\nuniform float specularRatio;\n\nfloat lighting_getLightWeight(vec3 position_worldspace_vec3, vec3 normals_worldspace) {\n  float lightWeight = 0.0;\n\n  vec3 normals_worldspace_vec3 = normals_worldspace.xyz;\n\n  vec3 camera_pos_worldspace = project_uCameraPosition;\n  vec3 view_direction = normalize(camera_pos_worldspace - position_worldspace_vec3);\n\n  for (int i = 0; i < NUM_OF_LIGHTS; i++) {\n    vec3 light_position_worldspace = project_position(lightsPosition[i]);\n    vec3 light_direction = normalize(light_position_worldspace - position_worldspace_vec3);\n\n    vec3 halfway_direction = normalize(light_direction + view_direction);\n    float lambertian = dot(light_direction, normals_worldspace_vec3);\n    float specular = 0.0;\n    if (lambertian > 0.0) {\n      float specular_angle = max(dot(normals_worldspace_vec3, halfway_direction), 0.0);\n      specular = pow(specular_angle, 32.0);\n    }\n    lambertian = max(lambertian, 0.0);\n    lightWeight += (ambientRatio + lambertian * diffuseRatio + specular * specularRatio) *\n      lightsStrength[i].x;\n\n  }\n\n  return lightWeight;\n}\n\n// DEPRECATED - Backwards compatibility\n\nfloat getLightWeight(vec3 position_worldspace_vec3, vec3 normals_worldspace) {\n  return lighting_getLightWeight(position_worldspace_vec3, normals_worldspace);\n}\n"},function(e,t,n){"use strict";function r(e,t){var n=t.layers,r=t.viewports,i=t.x,a=t.y,l=t.radius,f=t.layerFilter,h=t.mode,p=t.onViewportActive,v=t.pickingFBO,g=t.lastPickedInfo,y=t.useDevicePixels,_=Object(d.c)({useDevicePixels:y}),b=Math.round(i*_),E=Math.round(e.canvas.height-a*_),x=Math.round(l*_),w=s({deviceX:b,deviceY:E,deviceRadius:x,deviceWidth:v.width,deviceHeight:v.height}),T=w&&o(e,{layers:n,viewports:r,onViewportActive:p,useDevicePixels:y,pickingFBO:v,deviceRect:w,layerFilter:f,redrawReason:h});return u({pickInfo:T&&c(e,{pickedColors:T,layers:n,deviceX:b,deviceY:E,deviceRadius:x,deviceRect:w})||m,lastPickedInfo:g,mode:h,layers:n,viewports:r,x:i,y:a,deviceX:b,deviceY:E,pixelRatio:_})}function i(e,t){var n=t.layers,r=t.viewports,i=t.x,s=t.y,u=t.width,l=t.height,c=t.mode,v=t.layerFilter,g=t.onViewportActive,y=t.pickingFBO,m=t.useDevicePixels,_=Object(d.c)({useDevicePixels:m}),b=Math.round(i*_),E=Math.round(e.canvas.height-s*_),x=Math.round((i+u)*_),w=Math.round(e.canvas.height-(s+l)*_),T={x:b,y:w,width:x-b,height:E-w},S=o(e,{layers:n,viewports:r,onViewportActive:g,pickingFBO:y,useDevicePixels:m,deviceRect:T,layerFilter:v,redrawReason:c}),A=f(e,{pickedColors:S,layers:n}),C=new Map;return A.forEach(function(e){var t=a({viewports:r}),n=h([e.x/_,e.y/_],t);n.devicePixel=[e.x,e.y],n.pixelRatio=_,n.color=e.pickedColor,n.index=e.pickedObjectIndex,n.picked=!0,n=p({layer:e.pickedLayer,info:n,mode:c}),C.has(n.object)||C.set(n.object,n)}),Array.from(C.values())}function o(e,t){var n=t.layers,r=t.viewports,i=t.onViewportActive,o=t.useDevicePixels,a=t.pickingFBO,s=t.deviceRect,u=t.layerFilter,l=t.redrawReason;if(y()(s),y()(Number.isFinite(s.width)&&s.width>0,"`width` must be > 0"),y()(Number.isFinite(s.height)&&s.height>0,"`height` must be > 0"),n.filter(function(e){return e.isPickable()}).length<1)return null;Object(d.b)(e,{layers:n,viewports:r,onViewportActive:i,useDevicePixels:o,pickingFBO:a,deviceRect:s,layerFilter:u,redrawReason:l});var c=s.x,f=s.y,h=s.width,p=s.height,v=new Uint8Array(h*p*4);return a.readPixels({x:c,y:f,width:h,height:p,pixelArray:v}),v}function a(e){return e.viewports[0]}function s(e){var t=e.deviceX,n=e.deviceY,r=e.deviceRadius,i=e.deviceWidth,o=e.deviceHeight;if(!(t>=0&&n>=0&&t<i&&n<o))return null;var a=Math.max(0,t-r),s=Math.max(0,n-r);return{x:a,y:s,width:Math.min(i,t+r)-a+1,height:Math.min(o,n+r)-s+1}}function u(e){var t=e.pickInfo,n=e.lastPickedInfo,r=e.mode,i=e.layers,o=e.viewports,s=e.x,u=e.y,c=e.deviceX,f=e.deviceY,d=e.pixelRatio,v=t.pickedColor,g=t.pickedLayer,y=t.pickedObjectIndex,m=g?[g]:[];if("hover"===r){var _=n.index,b=n.layerId,E=g&&g.props.id;if(E!==b||y!==_){if(E!==b){var x=i.find(function(e){return e.props.id===b});x&&m.unshift(x)}n.layerId=E,n.index=y}}var w=a({viewports:o}),T=h([s,u],w);T.devicePixel=[c,f],T.pixelRatio=d;var S=new Map;return m.forEach(function(e){var t=Object.assign({},T);e===g&&(t.color=v,t.index=y,t.picked=!0),(t=p({layer:e,info:t,mode:r}))&&S.set(t.layer.id,t);var n=e.props.autoHighlight&&g===e?v:null,i={pickingSelectedColor:n},o=!0,a=!1,s=void 0;try{for(var u,l=e.getModels()[Symbol.iterator]();!(o=(u=l.next()).done);o=!0){u.value.updateModuleSettings(i)}}catch(e){a=!0,s=e}finally{try{!o&&l.return&&l.return()}finally{if(a)throw s}}}),l(S,r)}function l(e,t){var n=[];return e.forEach(function(e){var r=!1;switch(t){case"click":r=e.layer.props.onClick(e);break;case"hover":r=e.layer.props.onHover(e);break;case"query":break;default:throw new Error("unknown pick type")}r||n.push(e)}),n}function c(e,t){var n=t.pickedColors,r=t.layers,i=t.deviceX,o=t.deviceY,a=t.deviceRadius,s=t.deviceRect;y()(n);for(var u=s.x,l=s.y,c=s.width,f=s.height,h=a*a,p=-1,d=0,g=0;g<f;g++){var _=g+l-o,b=_*_;if(b>h)d+=4*c;else for(var E=0;E<c;E++){var x=n[d+3]-1;if(x>=0){var w=E+u-i,T=w*w+b;T<=h&&(h=T,p=d)}d+=4}}if(p>=0){var S=n[p+3]-1,A=n.slice(p,p+4),C=r[S];if(C){return{pickedColor:A,pickedLayer:C,pickedObjectIndex:C.decodePickingColor(A)}}v.a.error("Picked non-existent layer. Is picking buffer corrupt?")}return m}function f(e,t){var n=t.pickedColors,r=t.layers,i=new Map;if(n)for(var o=0;o<n.length;o+=4){var a=n[o+3]-1;if(a>=0){var s=n.slice(o,o+4),u=s.join(",");if(!i.has(u)){var l=r[a];l?i.set(u,{pickedColor:s,pickedLayer:l,pickedObjectIndex:l.decodePickingColor(s)}):v.a.error("Picked non-existent layer. Is picking buffer corrupt?")}}}return Array.from(i.values())}function h(e,t){return{color:null,layer:null,index:-1,picked:!1,x:e[0],y:e[1],pixel:e,lngLat:t.unproject(e)}}function p(e){for(var t=e.layer,n=e.info,r=e.mode;t&&n;){var i=n.layer||t;n.layer=t,n=t.pickLayer({info:n,mode:r,sourceLayer:i}),t=t.parentLayer}return n}t.a=r,t.b=i;var d=n(272),v=n(12),g=n(0),y=n.n(g),m={pickedColor:null,pickedLayer:null,pickedObjectIndex:-1}},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(145),s=n(12),u=n(146),l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=function(e){function t(e){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return o(t,e),l(t,[{key:"getSubLayers",value:function(){return this.internalState.subLayers||[]}},{key:"initializeState",value:function(){}},{key:"getPickingInfo",value:function(e){return e.info}},{key:"renderLayers",value:function(){return null}},{key:"getSubLayerProps",value:function(e){var t=this.props,n=t.opacity,r=t.pickable,i=t.visible,o=t.parameters,a=t.getPolygonOffset,s=t.highlightedObjectIndex,u=t.autoHighlight,l=t.highlightColor,c=t.coordinateSystem,f=t.coordinateOrigin,h=t.modelMatrix,p={opacity:n,pickable:r,visible:i,parameters:o,getPolygonOffset:a,highlightedObjectIndex:s,autoHighlight:u,highlightColor:l,coordinateSystem:c,coordinateOrigin:f,modelMatrix:h};return e&&Object.assign(p,e,{id:this.props.id+"-"+e.id,updateTriggers:Object.assign({all:this.props.updateTriggers.all},e.updateTriggers)}),p}},{key:"_renderLayers",value:function(){var e=this.internalState.subLayers;e&&!this.needsUpdate()?s.a.log(3,"Composite layer reused subLayers "+this,this.internalState.subLayers):(e=this.renderLayers(),e=Object(u.c)(e,{filter:Boolean}),this.internalState.subLayers=e,s.a.log(2,"Composite layer rendered new subLayers "+this,e));var t=!0,n=!1,r=void 0;try{for(var i,o=e[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){i.value.parentLayer=this}}catch(e){n=!0,r=e}finally{try{!t&&o.return&&o.return()}finally{if(n)throw r}}}},{key:"isComposite",get:function(){return!0}}]),t}(a.a);t.a=c},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(29),s=n(59),u=n.n(s),l=n(46),c=n.n(l),f=Math.PI/180;!function(e){function t(e){var n=e.width,o=e.height,a=e.eye,s=e.lookAt,l=void 0===s?[0,0,0]:s,h=e.up,p=void 0===h?[0,1,0]:h,d=e.fovy,v=void 0===d?75:d,g=e.near,y=void 0===g?1:g,m=e.far,_=void 0===m?100:m,b=e.aspect,E=void 0===b?null:b;r(this,t);var x=v*f;return E=Number.isFinite(E)?E:n/o,i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,{viewMatrix:u()([],a,l,p),projectionMatrix:c()([],x,E,y,_),width:n,height:o}))}o(t,e)}(a.a)},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(29),s=n(59),u=n.n(s),l=n(128),c=n.n(l);!function(e){function t(e){var n=e.width,o=e.height,a=e.eye,s=void 0===a?[0,0,1]:a,l=e.lookAt,f=void 0===l?[0,0,0]:l,h=e.up,p=void 0===h?[0,1,0]:h,d=e.near,v=void 0===d?1:d,g=e.far,y=void 0===g?100:g,m=e.left,_=e.top,b=e.right,E=void 0===b?null:b,x=e.bottom,w=void 0===x?null:x;return r(this,t),E=Number.isFinite(E)?E:m+n,w=Number.isFinite(w)?w:_+o,i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,{viewMatrix:u()([],s,f,p),projectionMatrix:c()([],m,E,w,_,v,y),width:n,height:o}))}o(t,e)}(a.a)},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e,t,n){return e<t?t:e>n?n:e}function s(e,t){return Number.isFinite(e)?e:t}var u=n(273),l=n(19),c=n(0),f=n.n(c),h=function(){function e(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),p=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),d=function(e){function t(e){var n=e.width,o=e.height,a=e.position,s=e.bearing,u=e.pitch,l=e.longitude,c=e.latitude,f=e.zoom,h=(e.syncBearing,e.bounds,e.startPanEventPosition),p=e.startPanPosition,d=e.startRotateCenter,v=e.startRotateViewport,g=e.startZoomPos,y=e.startZoom;r(this,t);var m=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,{width:n,height:o,position:a,bearing:s,pitch:u,longitude:l,latitude:c,zoom:f}));return m._interactiveState={startPanEventPosition:h,startPanPosition:p,startRotateCenter:d,startRotateViewport:v,startZoomPos:g,startZoom:y},m}return o(t,e),p(t,[{key:"getInteractiveState",value:function(){return this._interactiveState}},{key:"panStart",value:function(e){var t=e.pos,n=this._viewportProps,r=n.translationX,i=n.translationY;return this._getUpdatedState({startPanPosition:[r,i],startPanEventPosition:t})}},{key:"pan",value:function(e){var t=e.pos,n=e.startPos,r=this._interactiveState.startPanEventPosition||n;f()(r,"`startPanEventPosition` props is required");var i=this._interactiveState.startPanPosition||[],o=h(i,2),a=o[0],u=o[1];a=s(a,this._viewportProps.translationX),u=s(u,this._viewportProps.translationY);var l=t[0]-r[0],c=t[1]-r[1];return this._getUpdatedState({translationX:a+l,translationY:u-c})}},{key:"panEnd",value:function(){return this._getUpdatedState({startPanPosition:null,startPanPos:null})}},{key:"rotateStart",value:function(e){e.pos;return this._getUpdatedState({startRotateCenter:this._viewportProps.position,startRotateViewport:this._viewportProps})}},{key:"rotate",value:function(e){var t=e.deltaScaleX,n=e.deltaScaleY,r=this._viewportProps,i=r.bearing,o=r.pitch;return this._getUpdatedState({bearing:i+10*t,pitch:o-10*n})}},{key:"rotateEnd",value:function(){return this._getUpdatedState({startRotateCenter:null,startRotateViewport:null})}},{key:"zoomStart",value:function(e){var t=e.pos;return this._getUpdatedState({startZoomPos:t,startZoom:this._viewportProps.zoom})}},{key:"zoom",value:function(e){var t=e.pos,n=e.startPos,r=e.scale,i=this._viewportProps,o=i.zoom,s=i.minZoom,u=i.maxZoom,l=i.width,c=i.height,f=(i.translationX,i.translationY,this._interactiveState.startZoomPos||n||t),h=a(o*r,s,u);t[0],f[0],t[1],f[1],f[0],f[1];return h/o<1?this.moveBackward():this.moveForward()}},{key:"zoomEnd",value:function(){return this._getUpdatedState({startZoomPos:null,startZoom:null})}},{key:"moveLeft",value:function(){var e=this._viewportProps.bearing,t=e-2;return this._getUpdatedState({bearing:t})}},{key:"moveRight",value:function(){var e=this._viewportProps.bearing,t=e+2;return this._getUpdatedState({bearing:t})}},{key:"moveForward",value:function(){var e=this._viewportProps.position,t=this.getDirection(),n=new l.Vector3(t).normalize().scale(1);return this._getUpdatedState({position:new l.Vector3(e).add(n)})}},{key:"moveBackward",value:function(){var e=this._viewportProps.position,t=this.getDirection(),n=new l.Vector3(t).normalize().scale(-1);return this._getUpdatedState({position:new l.Vector3(e).add(n)})}},{key:"moveUp",value:function(){var e=this._viewportProps.position,t=[0,0,1];return this._getUpdatedState({position:new l.Vector3(e).add(t)})}},{key:"moveDown",value:function(){var e=this._viewportProps.position,t=e[2]>=1?[0,0,-1]:[0,0,0];return this._getUpdatedState({position:new l.Vector3(e).add(t)})}},{key:"zoomIn",value:function(){return this._getUpdatedState({zoom:this._viewportProps.zoom+.2})}},{key:"zoomOut",value:function(){return this._getUpdatedState({zoom:this._viewportProps.zoom-.2})}},{key:"_getUpdatedState",value:function(e){return new t(Object.assign({},this._viewportProps,this._interactiveState,e))}}]),t}(u.a);t.a=d},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e){var t=e.bearing,n=e.pitch;return new l({bearing:t,pitch:n}).toVector3().normalize()}var s=n(29),u=n(19),l=u.experimental.SphericalCoordinates,c=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r(this,t);var n=e.modelMatrix,o=void 0===n?null:n,s=e.bearing,l=e.up,c=void 0===l?[0,0,1]:l,f=a({bearing:s,pitch:89}),h=o?o.transformDirection(f):f,p=(new u.Matrix4).lookAt({eye:[0,0,0],center:h,up:c});return i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,Object.assign({},e,{zoom:null,viewMatrix:p})))}return o(t,e),t}(s.a);t.a=c,c.displayName="FirstPersonViewport"},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e){var t=e.bearing,n=e.pitch;return new l({bearing:t,pitch:n}).toVector3().normalize()}var s=n(29),u=n(19),l=u.experimental.SphericalCoordinates,c=function(e){function t(e){r(this,t);var n=e.bearing,o=e.pitch,s=e.position,l=e.up,c=e.zoom,f=a({bearing:n,pitch:o}),h=50*c,p=f.scale(-h).multiply(new u.Vector3(1,1,-1)),d=(new u.Matrix4).multiplyRight((new u.Matrix4).lookAt({eye:p,center:s,up:l}));return i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,Object.assign({},e,{zoom:null,viewMatrix:d})))}return o(t,e),t}(s.a);t.a=c,c.displayName="ThirdPersonViewport"},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(){}var o=n(266),a=n(276),s=n(148),u=n(65),l=n(62),c=(n.n(l),n(4)),f=n(10),h=n.n(f),p=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),d={id:h.a.string,width:h.a.number.isRequired,height:h.a.number.isRequired,layers:h.a.array.isRequired,viewports:h.a.array,effects:h.a.arrayOf(h.a.instanceOf(s.a)),layerFilter:h.a.func,glOptions:h.a.object,gl:h.a.object,pickingRadius:h.a.number,onWebGLInitialized:h.a.func,onBeforeRender:h.a.func,onAfterRender:h.a.func,onLayerClick:h.a.func,onLayerHover:h.a.func,useDevicePixels:h.a.bool,debug:h.a.bool,drawPickingColors:h.a.bool},v={id:"deckgl-overlay",pickingRadius:0,layerFilter:null,glOptions:{},gl:null,effects:[],onWebGLInitialized:i,onBeforeRender:i,onAfterRender:i,onLayerClick:null,onLayerHover:null,useDevicePixels:!0,debug:!1,drawPickingColors:!1},g=function(){function e(t){var n=this;r(this,e),t=Object.assign({},v,t),this.state={},this.needsRedraw=!0,this.layerManager=null,this.effectManager=null,this.viewports=[],this._onRendererInitialized=this._onRendererInitialized.bind(this),this._onRenderFrame=this._onRenderFrame.bind(this),this.canvas=this._createCanvas(t);var i=t,o=i.width,a=i.height,s=i.gl,u=i.glOptions,l=i.debug,f=i.useDevicePixels;this.animationLoop=new c.a({width:o,height:a,useDevicePixels:f,onCreateContext:function(e){return s||Object(c.j)(Object.assign({},u,{canvas:n.canvas,debug:l}))},onInitialize:this._onRendererInitialized,onRender:this._onRenderFrame,onBeforeRender:t.onBeforeRender,onAfterRender:t.onAfterRender}),this.animationLoop.start(),this.setProps(t)}return p(e,[{key:"setProps",value:function(e){if(e=Object.assign({},this.props,e),this.props=e,this.layerManager){var t=e,n=t.layers,r=t.pickingRadius,i=t.onLayerClick,o=t.onLayerHover,a=t.useDevicePixels,s=t.drawPickingColors,l=t.layerFilter,c=e.viewports||e.viewport;if(!c){var f=e,h=f.width,p=f.height,d=f.latitude,v=f.longitude,g=f.zoom,y=f.pitch,m=f.bearing;c=[new u.a({width:h,height:p,latitude:d,longitude:v,zoom:g,pitch:y,bearing:m})]}this.layerManager.setParameters({layers:n,viewports:c,useDevicePixels:a,drawPickingColors:s,layerFilter:l,pickingRadius:r,onLayerClick:i,onLayerHover:o}),this.animationLoop.setViewParameters({useDevicePixels:a})}}},{key:"finalize",value:function(){this.animationLoop.stop(),this.animationLoop=null,this.layerManager&&(this.layerManager.finalize(),this.layerManager=null)}},{key:"pickObject",value:function(e){var t=e.x,n=e.y,r=e.radius,i=void 0===r?0:r,o=e.layerIds,a=void 0===o?null:o,s=this.layerManager.pickObject({x:t,y:n,radius:i,layerIds:a,mode:"query"});return s.length?s[0]:null}},{key:"pickObjects",value:function(e){var t=e.x,n=e.y,r=e.width,i=void 0===r?1:r,o=e.height,a=void 0===o?1:o,s=e.layerIds,u=void 0===s?null:s;return this.layerManager.pickObjects({x:t,y:n,width:i,height:a,layerIds:u})}},{key:"getViewports",value:function(){return this.layerManager?this.layerManager.getViewports():[]}},{key:"_createCanvas",value:function(e){if(e.canvas)return e.canvas;var t=e.id,n=e.width,r=e.height,i=e.style,o=document.createElement("canvas");return o.id=t,o.width=n,o.height=r,o.style=i,(e.parent||document.body).appendChild(o),o}},{key:"_onRendererInitialized",value:function(e){var t=e.gl,n=e.canvas;Object(c.q)(t,{blend:!0,blendFunc:[c.e.SRC_ALPHA,c.e.ONE_MINUS_SRC_ALPHA,c.e.ONE,c.e.ONE_MINUS_SRC_ALPHA],polygonOffsetFill:!0,depthTest:!0,depthFunc:c.e.LEQUAL}),this.props.onWebGLInitialized(t),this.layerManager=new o.a(t,{eventManager:new l.EventManager(n)}),this.effectManager=new a.a({gl:t,layerManager:this.layerManager});var r=!0,i=!1,s=void 0;try{for(var u,f=this.props.effects[Symbol.iterator]();!(r=(u=f.next()).done);r=!0){var h=u.value;this.effectManager.addEffect(h)}}catch(e){i=!0,s=e}finally{try{!r&&f.return&&f.return()}finally{if(i)throw s}}this.setProps(this.props)}},{key:"_onRenderFrame",value:function(e){var t=e.gl,n=this.layerManager.needsRedraw({clearRedrawFlags:!0});n&&(this.props.onBeforeRender({gl:t}),this.layerManager.drawLayers({pass:"screen",redrawReason:n,drawPickingColors:this.props.drawPickingColors}),this.props.onAfterRender({gl:t}))}}]),e}();t.a=g,g.propTypes=d,g.defaultProps=v},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(281),s=n(98),u=n(25),l=n(0),c=n.n(l),f=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),h=["longitude","latitude","zoom","bearing","pitch"],p=["latitude","longitude","zoom","width","height"],d=["bearing","pitch"],v=function(e){function t(){r(this,t);var e=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.propNames=h,e}return o(t,e),f(t,[{key:"initializeProps",value:function(e,t){var n={},r={},i=!0,o=!1,a=void 0;try{for(var u,l=p[Symbol.iterator]();!(i=(u=l.next()).done);i=!0){var f=u.value,h=e[f],v=t[f];c()(Object(s.c)(h)&&Object(s.c)(v),f+" must be supplied for transition"),n[f]=h,r[f]=Object(s.b)(f,h,v)}}catch(e){o=!0,a=e}finally{try{!i&&l.return&&l.return()}finally{if(o)throw a}}var g=!0,y=!1,m=void 0;try{for(var _,b=d[Symbol.iterator]();!(g=(_=b.next()).done);g=!0){var E=_.value,x=e[E]||0,w=t[E]||0;n[E]=x,r[E]=Object(s.b)(E,x,w)}}catch(e){y=!0,m=e}finally{try{!g&&b.return&&b.return()}finally{if(y)throw m}}return{start:n,end:r}}},{key:"interpolateProps",value:function(e,t,n){var r=Object(u.flyToViewport)(e,t,n),i=!0,o=!1,a=void 0;try{for(var l,c=d[Symbol.iterator]();!(i=(l=c.next()).done);i=!0){var f=l.value;r[f]=Object(s.d)(e[f],t[f],n)}}catch(e){o=!0,a=e}finally{try{!i&&c.return&&c.return()}finally{if(o)throw a}}return r}}]),t}(a.a);t.a=v},function(e,t,n){"use strict";function r(e,t){var n=a(t),r=e,s=!0,u=!1,l=void 0;try{for(var c,f=n[Symbol.iterator]();!(s=(c=f.next()).done);s=!0){var h=c.value;if(!i(r))return;r=o(r)(r,h)}}catch(e){u=!0,l=e}finally{try{!s&&f.return&&f.return()}finally{if(u)throw l}}return r}function i(e){return null!==e&&"object"===("undefined"===typeof e?"undefined":s(e))}function o(e){return Object.getPrototypeOf(e).get?l:u}function a(e){if("string"===typeof e){var t=c[e];return t||(t=e.split("."),c[e]=t),t}return Array.isArray(e)?e:[e]}t.a=r;var s="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u=function(e,t){return e[t]},l=function(e,t){return e.get(t)},c={}},function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var a=function(){function e(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=function(e){return e.length},l=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:u;o(this,e),this.sortedBins=this.getSortedBins(t,n),this.maxCount=this.getMaxCount(),this.binMap=this.getBinMap()}return s(e,[{key:"getSortedBins",value:function(e,t){return e.reduce(function(e,n,r){var i=t(n.points);return null!==i&&void 0!==i&&e.push({i:Number.isFinite(n.index)?n.index:r,value:i,counts:n.points.length}),e},[]).sort(function(e,t){return e.value-t.value})}},{key:"getValueRange",value:function(e){var t=a(e,2),n=t[0],r=t[1],i=this.sortedBins.length;if(!i)return[0,0];var o=Math.ceil(n/100*(i-1)),s=Math.floor(r/100*(i-1));return[this.sortedBins[o].value,this.sortedBins[s].value]}},{key:"getMaxCount",value:function(){return Math.max.apply(Math,i(this.sortedBins.map(function(e){return e.counts})))}},{key:"getBinMap",value:function(){return this.sortedBins.reduce(function(e,t){return Object.assign(e,r({},t.i,t))},{})}}]),e}();t.a=l},function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r=[[255,255,178],[254,217,118],[254,178,76],[253,141,60],[240,59,32],[189,0,38]]},function(e,t,n){"use strict";var r=(n(479),n(483),n(487),n(491),n(284));n.d(t,"a",function(){return r.a});n(498),n(501),n(285),n(506),n(286),n(149),n(516),n(522)},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(3),s=n(4),u=n(480),l=n(481),c=n(482),f=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),h=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},p=a.d.fp64LowPart,d=a.d.enable64bitSupport,v=[0,0,0,255],g={strokeWidth:1,fp64:!1,getSourcePosition:function(e){return e.sourcePosition},getTargetPosition:function(e){return e.targetPosition},getSourceColor:function(e){return e.color||v},getTargetColor:function(e){return e.color||v}},y=function(e){function t(){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),f(t,[{key:"getShaders",value:function(){return d(this.props)?{vs:l.a,fs:c.a,modules:["project64","picking"]}:{vs:u.a,fs:c.a,modules:["picking"]}}},{key:"initializeState",value:function(){this.state.attributeManager.addInstanced({instancePositions:{size:4,accessor:["getSourcePosition","getTargetPosition"],update:this.calculateInstancePositions},instanceSourceColors:{size:4,type:s.e.UNSIGNED_BYTE,accessor:"getSourceColor",update:this.calculateInstanceSourceColors},instanceTargetColors:{size:4,type:s.e.UNSIGNED_BYTE,accessor:"getTargetColor",update:this.calculateInstanceTargetColors}})}},{key:"updateAttribute",value:function(e){var t=e.props,n=e.oldProps;e.changeFlags;if(t.fp64!==n.fp64){var r=this.state.attributeManager;r.invalidateAll(),t.fp64&&t.coordinateSystem===a.a.LNGLAT?r.addInstanced({instancePositions64Low:{size:4,accessor:["getSourcePosition","getTargetPosition"],update:this.calculateInstancePositions64Low}}):r.remove(["instancePositions64Low"])}}},{key:"updateState",value:function(e){var n=e.props,r=e.oldProps,i=e.changeFlags;if(h(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateState",this).call(this,{props:n,oldProps:r,changeFlags:i}),n.fp64!==r.fp64){var o=this.context.gl;this.setState({model:this._getModel(o)})}this.updateAttribute({props:n,oldProps:r,changeFlags:i})}},{key:"draw",value:function(e){var t=e.uniforms,n=this.props.strokeWidth;this.state.model.render(Object.assign({},t,{strokeWidth:n}))}},{key:"_getModel",value:function(e){for(var t=[],n=0;n<50;n++)t=t.concat([n,-1,0,n,1,0]);var r=new s.g(e,Object.assign({},this.getShaders(),{id:this.props.id,geometry:new s.f({drawMode:s.e.TRIANGLE_STRIP,attributes:{positions:new Float32Array(t)}}),isInstanced:!0,shaderCache:this.context.shaderCache}));return r.setUniforms({numSegments:50}),r}},{key:"calculateInstancePositions",value:function(e){var t=this.props,n=t.data,r=t.getSourcePosition,i=t.getTargetPosition,o=e.value,a=e.size,s=0,u=!0,l=!1,c=void 0;try{for(var f,h=n[Symbol.iterator]();!(u=(f=h.next()).done);u=!0){var p=f.value,d=r(p),v=i(p);o[s+0]=d[0],o[s+1]=d[1],o[s+2]=v[0],o[s+3]=v[1],s+=a}}catch(e){l=!0,c=e}finally{try{!u&&h.return&&h.return()}finally{if(l)throw c}}}},{key:"calculateInstancePositions64Low",value:function(e){var t=this.props,n=t.data,r=t.getSourcePosition,i=t.getTargetPosition,o=e.value,a=e.size,s=0,u=!0,l=!1,c=void 0;try{for(var f,h=n[Symbol.iterator]();!(u=(f=h.next()).done);u=!0){var d=f.value,v=r(d),g=i(d);o[s+0]=p(v[0]),o[s+1]=p(v[1]),o[s+2]=p(g[0]),o[s+3]=p(g[1]),s+=a}}catch(e){l=!0,c=e}finally{try{!u&&h.return&&h.return()}finally{if(l)throw c}}}},{key:"calculateInstanceSourceColors",value:function(e){var t=this.props,n=t.data,r=t.getSourceColor,i=e.value,o=e.size,a=0,s=!0,u=!1,l=void 0;try{for(var c,f=n[Symbol.iterator]();!(s=(c=f.next()).done);s=!0){var h=c.value,p=r(h);i[a+0]=p[0],i[a+1]=p[1],i[a+2]=p[2],i[a+3]=isNaN(p[3])?255:p[3],a+=o}}catch(e){u=!0,l=e}finally{try{!s&&f.return&&f.return()}finally{if(u)throw l}}}},{key:"calculateInstanceTargetColors",value:function(e){var t=this.props,n=t.data,r=t.getTargetColor,i=e.value,o=e.size,a=0,s=!0,u=!1,l=void 0;try{for(var c,f=n[Symbol.iterator]();!(s=(c=f.next()).done);s=!0){var h=c.value,p=r(h);i[a+0]=p[0],i[a+1]=p[1],i[a+2]=p[2],i[a+3]=isNaN(p[3])?255:p[3],a+=o}}catch(e){u=!0,l=e}finally{try{!s&&f.return&&f.return()}finally{if(u)throw l}}}}]),t}(a.c);y.layerName="ArcLayer",y.defaultProps=g},function(e,t,n){"use strict";t.a="#define SHADER_NAME arc-layer-vertex-shader\n\nattribute vec3 positions;\nattribute vec4 instanceSourceColors;\nattribute vec4 instanceTargetColors;\nattribute vec4 instancePositions;\nattribute vec3 instancePickingColors;\n\nuniform float numSegments;\nuniform float strokeWidth;\nuniform float opacity;\n\nvarying vec4 vColor;\n\nfloat paraboloid(vec2 source, vec2 target, float ratio) {\n\n  vec2 x = mix(source, target, ratio);\n  vec2 center = mix(source, target, 0.5);\n\n  float dSourceCenter = distance(source, center);\n  float dXCenter = distance(x, center);\n  return (dSourceCenter + dXCenter) * (dSourceCenter - dXCenter);\n}\n\n// offset vector by strokeWidth pixels\n// offset_direction is -1 (left) or 1 (right)\nvec2 getExtrusionOffset(vec2 line_clipspace, float offset_direction) {\n  // normalized direction of the line\n  vec2 dir_screenspace = normalize(line_clipspace * project_uViewportSize);\n  // rotate by 90 degrees\n  dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);\n\n  vec2 offset_screenspace = dir_screenspace * offset_direction * strokeWidth / 2.0;\n  vec2 offset_clipspace = project_pixel_to_clipspace(offset_screenspace).xy;\n\n  return offset_clipspace;\n}\n\nfloat getSegmentRatio(float index) {\n  return smoothstep(0.0, 1.0, index / (numSegments - 1.0));\n}\n\nvec3 getPos(vec2 source, vec2 target, float segmentRatio) {\n  float vertex_height = paraboloid(source, target, segmentRatio);\n\n  return vec3(\n    mix(source, target, segmentRatio),\n    sqrt(max(0.0, vertex_height))\n  );\n}\n\nvoid main(void) {\n  vec2 source = project_position(instancePositions.xy);\n  vec2 target = project_position(instancePositions.zw);\n\n  float segmentIndex = positions.x;\n  float segmentRatio = getSegmentRatio(segmentIndex);\n  // if it's the first point, use next - current as direction\n  // otherwise use current - prev\n  float indexDir = mix(-1.0, 1.0, step(segmentIndex, 0.0));\n  float nextSegmentRatio = getSegmentRatio(segmentIndex + indexDir);\n\n  vec3 currPos = getPos(source, target, segmentRatio);\n  vec3 nextPos = getPos(source, target, nextSegmentRatio);\n  vec4 curr = project_to_clipspace(vec4(currPos, 1.0));\n  vec4 next = project_to_clipspace(vec4(nextPos, 1.0));\n\n  // extrude\n  vec2 offset = getExtrusionOffset((next.xy - curr.xy) * indexDir, positions.y);\n  gl_Position = curr + vec4(offset, 0.0, 0.0);\n\n  vec4 color = mix(instanceSourceColors, instanceTargetColors, segmentRatio) / 255.;\n  vColor = vec4(color.rgb, color.a * opacity);\n\n  // Set color to be rendered to picking fbo (also used to check for selection highlight).\n  picking_setPickingColor(instancePickingColors);\n}\n"},function(e,t,n){"use strict";t.a="#define SHADER_NAME arc-layer-vertex-shader-64\n\nattribute vec3 positions;\nattribute vec4 instanceSourceColors;\nattribute vec4 instanceTargetColors;\n\nattribute vec4 instancePositions;\nattribute vec4 instancePositions64Low;\n\nattribute vec3 instancePickingColors;\n\nuniform float numSegments;\nuniform float strokeWidth;\nuniform float opacity;\n\nvarying vec4 vColor;\n\nvec2 paraboloid_fp64(vec2 source[2], vec2 target[2], float ratio) {\n\n  vec2 x[2];\n  vec2_mix_fp64(source, target, ratio, x);\n  vec2 center[2];\n  vec2_mix_fp64(source, target, 0.5, center);\n\n  vec2 dSourceCenter = vec2_distance_fp64(source, center);\n  vec2 dXCenter = vec2_distance_fp64(x, center);\n  return mul_fp64(sum_fp64(dSourceCenter, dXCenter), sub_fp64(dSourceCenter, dXCenter));\n}\n\n// offset vector by strokeWidth pixels\n// offset_direction is -1 (left) or 1 (right)\nvec2 getExtrusionOffset(vec2 line_clipspace, float offset_direction) {\n  // normalized direction of the line\n  vec2 dir_screenspace = normalize(line_clipspace * project_uViewportSize);\n  // rotate by 90 degrees\n  dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);\n\n  vec2 offset_screenspace = dir_screenspace * offset_direction * strokeWidth / 2.0;\n  vec2 offset_clipspace = project_pixel_to_clipspace(offset_screenspace).xy;\n\n  return offset_clipspace;\n}\n\nfloat getSegmentRatio(float index) {\n  return smoothstep(0.0, 1.0, index / (numSegments - 1.0));\n}\n\nvoid get_pos_fp64(vec2 source[2], vec2 target[2], float segmentRatio, out vec2 position[4]) {\n\n  vec2 vertex_height = paraboloid_fp64(source, target, segmentRatio);\n\n  vec2 position_temp[2];\n\n  vec2_mix_fp64(source, target, segmentRatio, position_temp);\n\n  position[0] = position_temp[0];\n  position[1] = position_temp[1];\n\n  if (vertex_height.x < 0.0 || (vertex_height.x == 0.0 && vertex_height.y <= 0.0)) {\n    vertex_height = vec2(0.0, 0.0);\n  }\n\n  position[2] = sqrt_fp64(vertex_height);\n  position[3] = vec2(1.0, 0.0);\n}\n\nvoid main(void) {\n  vec4 instanceSourcePositions64 = vec4(instancePositions.x,\n    instancePositions64Low.x, instancePositions.y, instancePositions64Low.y);\n  vec4 instanceTargetPositions64 = vec4(instancePositions.z,\n    instancePositions64Low.z, instancePositions.w, instancePositions64Low.w);\n\n  vec2 projected_source_coord[2];\n  vec2 projected_target_coord[2];\n\n  project_position_fp64(instanceSourcePositions64, projected_source_coord);\n  project_position_fp64(instanceTargetPositions64, projected_target_coord);\n\n  float segmentIndex = positions.x;\n  float segmentRatio = getSegmentRatio(segmentIndex);\n\n  // if it's the first point, use next - current as direction\n  // otherwise use current - prev\n  float indexDir = mix(-1.0, 1.0, step(segmentIndex, 0.0));\n  float nextSegmentRatio = getSegmentRatio(segmentIndex + indexDir);\n\n  vec2 curr_pos_modelspace[4];\n\n  get_pos_fp64(projected_source_coord, projected_target_coord, segmentRatio,\n    curr_pos_modelspace);\n\n  vec2 next_pos_modelspace[4];\n\n  get_pos_fp64(projected_source_coord, projected_target_coord, nextSegmentRatio,\n    next_pos_modelspace);\n\n  vec4 curr_pos_clipspace = project_to_clipspace_fp64(curr_pos_modelspace);\n  vec4 next_pos_clipspace = project_to_clipspace_fp64(next_pos_modelspace);\n\n  vec2 offset = getExtrusionOffset(next_pos_clipspace.xy - curr_pos_clipspace.xy, positions.y);\n\n  gl_Position = curr_pos_clipspace + vec4(offset, 0.0, 0.0);\n\n  vec4 color = mix(instanceSourceColors, instanceTargetColors, segmentRatio) / 255.;\n  vColor = vec4(color.rgb, color.a * opacity);\n\n  // Set color to be rendered to picking fbo (also used to check for selection highlight).\n  picking_setPickingColor(instancePickingColors);\n}\n"},function(e,t,n){"use strict";t.a="#define SHADER_NAME arc-layer-fragment-shader\n\n#ifdef GL_ES\nprecision highp float;\n#endif\n\nvarying vec4 vColor;\n\nvoid main(void) {\n  gl_FragColor = vColor;\n\n  // use highlight color if this fragment belongs to the selected object.\n  gl_FragColor = picking_filterHighlightColor(gl_FragColor);\n\n  // use picking color if rendering to picking FBO.\n  gl_FragColor = picking_filterPickingColor(gl_FragColor);\n}\n"},function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function a(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=n(3),u=n(4),l=n(484),c=n(485),f=n(486),h=function(){function e(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),p=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),d=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},v=s.d.fp64LowPart,g=s.d.enable64bitSupport,y=[0,0,0,255],m=u.e.LINEAR_MIPMAP_LINEAR,_=u.e.LINEAR,b={iconAtlas:null,iconMapping:{},sizeScale:1,fp64:!1,getPosition:function(e){return e.position},getIcon:function(e){return e.icon},getColor:function(e){return e.color||y},getSize:function(e){return e.size||1},getAngle:function(e){return e.angle||0}},E=function(e){function t(){return i(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),p(t,[{key:"getShaders",value:function(){return g(this.props)?{vs:c.a,fs:f.a,modules:["project64","picking"]}:{vs:l.a,fs:f.a,modules:["picking"]}}},{key:"initializeState",value:function(){this.state.attributeManager.addInstanced({instancePositions:{size:3,accessor:"getPosition",update:this.calculateInstancePositions},instanceSizes:{size:1,accessor:"getSize",update:this.calculateInstanceSizes},instanceOffsets:{size:2,accessor:"getIcon",update:this.calculateInstanceOffsets},instanceIconFrames:{size:4,accessor:"getIcon",update:this.calculateInstanceIconFrames},instanceColorModes:{size:1,type:u.e.UNSIGNED_BYTE,accessor:"getIcon",update:this.calculateInstanceColorMode},instanceColors:{size:4,type:u.e.UNSIGNED_BYTE,accessor:"getColor",update:this.calculateInstanceColors},instanceAngles:{size:1,accessor:"getAngle",update:this.calculateInstanceAngles}})}},{key:"updateAttribute",value:function(e){var t=e.props,n=e.oldProps;e.changeFlags;if(t.fp64!==n.fp64){var r=this.state.attributeManager;r.invalidateAll(),t.fp64&&t.coordinateSystem===s.a.LNGLAT?r.addInstanced({instancePositions64xyLow:{size:2,accessor:"getPosition",update:this.calculateInstancePositions64xyLow}}):r.remove(["instancePositions64xyLow"])}}},{key:"updateState",value:function(e){var n=this,i=e.oldProps,o=e.props,a=e.changeFlags;d(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateState",this).call(this,{props:o,oldProps:i,changeFlags:a});var s=o.iconAtlas,l=o.iconMapping;if(i.iconMapping!==l){var c=this.state.attributeManager;c.invalidate("instanceOffsets"),c.invalidate("instanceIconFrames"),c.invalidate("instanceColorModes")}if(i.iconAtlas!==s)if(s instanceof u.i){var f;s.setParameters((f={},r(f,u.e.TEXTURE_MIN_FILTER,m),r(f,u.e.TEXTURE_MAG_FILTER,_),f)),this.setState({iconsTexture:s})}else"string"===typeof s&&Object(u.m)(this.context.gl,{urls:[s]}).then(function(e){var t,i=h(e,1),o=i[0];o.setParameters((t={},r(t,u.e.TEXTURE_MIN_FILTER,m),r(t,u.e.TEXTURE_MAG_FILTER,_),t)),n.setState({iconsTexture:o})});if(o.fp64!==i.fp64){var p=this.context.gl;this.setState({model:this._getModel(p)})}this.updateAttribute({props:o,oldProps:i,changeFlags:a})}},{key:"draw",value:function(e){var t=e.uniforms,n=this.props.sizeScale,r=this.state.iconsTexture;r&&this.state.model.render(Object.assign({},t,{iconsTexture:r,iconsTextureDim:[r.width,r.height],sizeScale:n}))}},{key:"_getModel",value:function(e){var t=[-1,-1,0,-1,1,0,1,1,0,1,-1,0];return new u.g(e,Object.assign({},this.getShaders(),{id:this.props.id,geometry:new u.f({drawMode:u.e.TRIANGLE_FAN,attributes:{positions:new Float32Array(t)}}),isInstanced:!0,shaderCache:this.context.shaderCache}))}},{key:"calculateInstancePositions",value:function(e){var t=this.props,n=t.data,r=t.getPosition,i=e.value,o=0,a=!0,s=!1,u=void 0;try{for(var l,c=n[Symbol.iterator]();!(a=(l=c.next()).done);a=!0){var f=l.value,h=r(f);i[o++]=h[0],i[o++]=h[1],i[o++]=h[2]||0}}catch(e){s=!0,u=e}finally{try{!a&&c.return&&c.return()}finally{if(s)throw u}}}},{key:"calculateInstancePositions64xyLow",value:function(e){var t=this.props,n=t.data,r=t.getPosition,i=e.value,o=0,a=!0,s=!1,u=void 0;try{for(var l,c=n[Symbol.iterator]();!(a=(l=c.next()).done);a=!0){var f=l.value,h=r(f);i[o++]=v(h[0]),i[o++]=v(h[1])}}catch(e){s=!0,u=e}finally{try{!a&&c.return&&c.return()}finally{if(s)throw u}}}},{key:"calculateInstanceSizes",value:function(e){var t=this.props,n=t.data,r=t.getSize,i=e.value,o=0,a=!0,s=!1,u=void 0;try{for(var l,c=n[Symbol.iterator]();!(a=(l=c.next()).done);a=!0){var f=l.value;i[o++]=r(f)}}catch(e){s=!0,u=e}finally{try{!a&&c.return&&c.return()}finally{if(s)throw u}}}},{key:"calculateInstanceAngles",value:function(e){var t=this.props,n=t.data,r=t.getAngle,i=e.value,o=0,a=!0,s=!1,u=void 0;try{for(var l,c=n[Symbol.iterator]();!(a=(l=c.next()).done);a=!0){var f=l.value;i[o++]=r(f)}}catch(e){s=!0,u=e}finally{try{!a&&c.return&&c.return()}finally{if(s)throw u}}}},{key:"calculateInstanceColors",value:function(e){var t=this.props,n=t.data,r=t.getColor,i=e.value,o=0,a=!0,s=!1,u=void 0;try{for(var l,c=n[Symbol.iterator]();!(a=(l=c.next()).done);a=!0){var f=l.value,h=r(f);i[o++]=h[0],i[o++]=h[1],i[o++]=h[2],i[o++]=isNaN(h[3])?255:h[3]}}catch(e){s=!0,u=e}finally{try{!a&&c.return&&c.return()}finally{if(s)throw u}}}},{key:"calculateInstanceOffsets",value:function(e){var t=this.props,n=t.data,r=t.iconMapping,i=t.getIcon,o=e.value,a=0,s=!0,u=!1,l=void 0;try{for(var c,f=n[Symbol.iterator]();!(s=(c=f.next()).done);s=!0){var h=c.value,p=i(h),d=r[p]||{};o[a++]=d.width/2-d.anchorX||0,o[a++]=d.height/2-d.anchorY||0}}catch(e){u=!0,l=e}finally{try{!s&&f.return&&f.return()}finally{if(u)throw l}}}},{key:"calculateInstanceColorMode",value:function(e){var t=this.props,n=t.data,r=t.iconMapping,i=t.getIcon,o=e.value,a=0,s=!0,u=!1,l=void 0;try{for(var c,f=n[Symbol.iterator]();!(s=(c=f.next()).done);s=!0){var h=c.value,p=i(h),d=r[p]&&r[p].mask;o[a++]=d?1:0}}catch(e){u=!0,l=e}finally{try{!s&&f.return&&f.return()}finally{if(u)throw l}}}},{key:"calculateInstanceIconFrames",value:function(e){var t=this.props,n=t.data,r=t.iconMapping,i=t.getIcon,o=e.value,a=0,s=!0,u=!1,l=void 0;try{for(var c,f=n[Symbol.iterator]();!(s=(c=f.next()).done);s=!0){var h=c.value,p=i(h),d=r[p]||{};o[a++]=d.x||0,o[a++]=d.y||0,o[a++]=d.width||0,o[a++]=d.height||0}}catch(e){u=!0,l=e}finally{try{!s&&f.return&&f.return()}finally{if(u)throw l}}}}]),t}(s.c);E.layerName="IconLayer",E.defaultProps=b},function(e,t,n){"use strict";t.a='#define SHADER_NAME icon-layer-vertex-shader\n\nattribute vec2 positions;\n\nattribute vec3 instancePositions;\nattribute float instanceSizes;\nattribute float instanceAngles;\nattribute vec4 instanceColors;\nattribute vec3 instancePickingColors;\nattribute vec4 instanceIconFrames;\nattribute float instanceColorModes;\nattribute vec2 instanceOffsets;\n\nuniform float sizeScale;\nuniform vec2 iconsTextureDim;\n\nvarying float vColorMode;\nvarying vec4 vColor;\nvarying vec2 vTextureCoords;\n\nvec2 rotate_by_angle(vec2 vertex, float angle) {\n  float angle_radian = angle * PI / 180.0;\n  float cos_angle = cos(angle_radian);\n  float sin_angle = sin(angle_radian);\n  mat2 rotationMatrix = mat2(cos_angle, -sin_angle, sin_angle, cos_angle);\n  return rotationMatrix * vertex;\n}\n\nvoid main(void) {\n  vec2 iconSize = instanceIconFrames.zw;\n  // scale icon height to match instanceSize\n  float instanceScale = iconSize.y == 0.0 ? 0.0 : instanceSizes / iconSize.y;\n\n  // scale and rotate vertex in "pixel" value and convert back to fraction in clipspace\n  vec2 pixelOffset = positions / 2.0 * iconSize + instanceOffsets;\n  pixelOffset = rotate_by_angle(pixelOffset, instanceAngles) * sizeScale * instanceScale;\n  pixelOffset.y *= -1.0;\n\n  vec3 center = project_position(instancePositions);\n  gl_Position = project_to_clipspace(vec4(center, 1.0));\n  gl_Position += project_pixel_to_clipspace(pixelOffset);\n\n  vTextureCoords = mix(\n    instanceIconFrames.xy,\n    instanceIconFrames.xy + iconSize,\n    (positions.xy + 1.0) / 2.0\n  ) / iconsTextureDim;\n\n  vTextureCoords.y = 1.0 - vTextureCoords.y;\n\n  vColor = instanceColors / 255.;\n\n  vColorMode = instanceColorModes;\n\n  // Set color to be rendered to picking fbo (also used to check for selection highlight).\n  picking_setPickingColor(instancePickingColors);\n}\n'},function(e,t,n){"use strict";t.a='#define SHADER_NAME icon-layer-vertex-shader-64\n\nattribute vec2 positions;\n\nattribute vec3 instancePositions;\nattribute vec2 instancePositions64xyLow;\nattribute float instanceSizes;\nattribute float instanceAngles;\nattribute vec4 instanceColors;\nattribute vec3 instancePickingColors;\nattribute vec4 instanceIconFrames;\nattribute float instanceColorModes;\nattribute vec2 instanceOffsets;\n\nuniform float sizeScale;\nuniform vec2 iconsTextureDim;\n\nvarying float vColorMode;\nvarying vec4 vColor;\nvarying vec2 vTextureCoords;\n\nvec2 rotate_by_angle(vec2 vertex, float angle) {\n  float angle_radian = angle * PI / 180.0;\n  float cos_angle = cos(angle_radian);\n  float sin_angle = sin(angle_radian);\n  mat2 rotationMatrix = mat2(cos_angle, -sin_angle, sin_angle, cos_angle);\n  return rotationMatrix * vertex;\n}\n\nvoid main(void) {\n  vec2 iconSize = instanceIconFrames.zw;\n  // scale icon height to match instanceSize\n  float instanceScale = iconSize.y == 0.0 ? 0.0 : instanceSizes / iconSize.y;\n\n  // scale and rotate vertex in "pixel" value and convert back to fraction in clipspace\n  vec2 pixelOffset = positions / 2.0 * iconSize + instanceOffsets;\n  pixelOffset = rotate_by_angle(pixelOffset, instanceAngles) * sizeScale * instanceScale;\n  pixelOffset.y *= -1.0;\n\n  vec4 instancePositions64xy = vec4(\n    instancePositions.x, instancePositions64xyLow.x,\n    instancePositions.y, instancePositions64xyLow.y);\n\n  vec2 projected_coord_xy[2];\n  project_position_fp64(instancePositions64xy, projected_coord_xy);\n\n  vec2 vertex_pos_modelspace[4];\n  vertex_pos_modelspace[0] = projected_coord_xy[0];\n  vertex_pos_modelspace[1] = projected_coord_xy[1];\n  vertex_pos_modelspace[2] = vec2(project_scale(instancePositions.z), 0.0);\n  vertex_pos_modelspace[3] = vec2(1.0, 0.0);\n\n  gl_Position = project_to_clipspace_fp64(vertex_pos_modelspace);\n  gl_Position += project_pixel_to_clipspace(pixelOffset);\n\n  vTextureCoords = mix(\n    instanceIconFrames.xy,\n    instanceIconFrames.xy + iconSize,\n    (positions.xy + 1.0) / 2.0\n  ) / iconsTextureDim;\n\n  vTextureCoords.y = 1.0 - vTextureCoords.y;\n\n  vColor = instanceColors / 255.;\n\n  vColorMode = instanceColorModes;\n\n  // Set color to be rendered to picking fbo (also used to check for selection highlight).\n  picking_setPickingColor(instancePickingColors);\n}\n'},function(e,t,n){"use strict";t.a="#define SHADER_NAME icon-layer-fragment-shader\n\n#ifdef GL_ES\nprecision highp float;\n#endif\n\nuniform float opacity;\nuniform sampler2D iconsTexture;\n\nvarying float vColorMode;\nvarying vec4 vColor;\nvarying vec2 vTextureCoords;\n\nconst float MIN_ALPHA = 0.05;\n\nvoid main(void) {\n  vec4 texColor = texture2D(iconsTexture, vTextureCoords);\n\n  // if colorMode == 0, use pixel color from the texture\n  // if colorMode == 1 or rendering picking buffer, use texture as transparency mask\n  vec3 color = mix(texColor.rgb, vColor.rgb, vColorMode);\n  float a = texColor.a * opacity * mix(1.0, vColor.a, vColorMode);\n\n  if (a < MIN_ALPHA) {\n    discard;\n  }\n\n  gl_FragColor = vec4(color, a);\n\n  // use highlight color if this fragment belongs to the selected object.\n  gl_FragColor = picking_filterHighlightColor(gl_FragColor);\n\n  // use picking color if rendering to picking FBO.\n  gl_FragColor = picking_filterPickingColor(gl_FragColor);\n}\n"},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(3),s=n(4),u=n(488),l=n(489),c=n(490),f=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),h=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},p=a.d.fp64LowPart,d=a.d.enable64bitSupport,v=[0,0,0,255],g={strokeWidth:1,fp64:!1,getSourcePosition:function(e){return e.sourcePosition},getTargetPosition:function(e){return e.targetPosition},getColor:function(e){return e.color||v}},y=function(e){function t(){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),f(t,[{key:"getShaders",value:function(){return d(this.props)?{vs:l.a,fs:c.a,modules:["project64","picking"]}:{vs:u.a,fs:c.a,modules:["picking"]}}},{key:"initializeState",value:function(){this.state.attributeManager.addInstanced({instanceSourcePositions:{size:3,accessor:"getSourcePosition",update:this.calculateInstanceSourcePositions},instanceTargetPositions:{size:3,accessor:"getTargetPosition",update:this.calculateInstanceTargetPositions},instanceColors:{size:4,type:s.e.UNSIGNED_BYTE,accessor:"getColor",update:this.calculateInstanceColors}})}},{key:"updateAttribute",value:function(e){var t=e.props,n=e.oldProps;e.changeFlags;if(t.fp64!==n.fp64){var r=this.state.attributeManager;r.invalidateAll(),t.fp64&&t.coordinateSystem===a.a.LNGLAT?r.addInstanced({instanceSourceTargetPositions64xyLow:{size:4,accessor:["getSourcePosition","getTargetPosition"],update:this.calculateInstanceSourceTargetPositions64xyLow}}):r.remove(["instanceSourceTargetPositions64xyLow"])}}},{key:"updateState",value:function(e){var n=e.props,r=e.oldProps,i=e.changeFlags;if(h(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateState",this).call(this,{props:n,oldProps:r,changeFlags:i}),n.fp64!==r.fp64){var o=this.context.gl;this.setState({model:this._getModel(o)})}this.updateAttribute({props:n,oldProps:r,changeFlags:i})}},{key:"draw",value:function(e){var t=e.uniforms,n=this.props.strokeWidth;this.state.model.render(Object.assign({},t,{strokeWidth:n}))}},{key:"_getModel",value:function(e){var t=[0,-1,0,0,1,0,1,-1,0,1,1,0];return new s.g(e,Object.assign({},this.getShaders(),{id:this.props.id,geometry:new s.f({drawMode:s.e.TRIANGLE_STRIP,attributes:{positions:new Float32Array(t)}}),isInstanced:!0,shaderCache:this.context.shaderCache}))}},{key:"calculateInstanceSourcePositions",value:function(e){var t=this.props,n=t.data,r=t.getSourcePosition,i=e.value,o=e.size,a=0,s=!0,u=!1,l=void 0;try{for(var c,f=n[Symbol.iterator]();!(s=(c=f.next()).done);s=!0){var h=c.value,p=r(h);i[a+0]=p[0],i[a+1]=p[1],i[a+2]=isNaN(p[2])?0:p[2],a+=o}}catch(e){u=!0,l=e}finally{try{!s&&f.return&&f.return()}finally{if(u)throw l}}}},{key:"calculateInstanceTargetPositions",value:function(e){var t=this.props,n=t.data,r=t.getTargetPosition,i=e.value,o=e.size,a=0,s=!0,u=!1,l=void 0;try{for(var c,f=n[Symbol.iterator]();!(s=(c=f.next()).done);s=!0){var h=c.value,p=r(h);i[a+0]=p[0],i[a+1]=p[1],i[a+2]=isNaN(p[2])?0:p[2],a+=o}}catch(e){u=!0,l=e}finally{try{!s&&f.return&&f.return()}finally{if(u)throw l}}}},{key:"calculateInstanceSourceTargetPositions64xyLow",value:function(e){var t=this.props,n=t.data,r=t.getSourcePosition,i=t.getTargetPosition,o=e.value,a=e.size,s=0,u=!0,l=!1,c=void 0;try{for(var f,h=n[Symbol.iterator]();!(u=(f=h.next()).done);u=!0){var d=f.value,v=r(d),g=i(d);o[s+0]=p(v[0]),o[s+1]=p(v[1]),o[s+2]=p(g[0]),o[s+3]=p(g[1]),s+=a}}catch(e){l=!0,c=e}finally{try{!u&&h.return&&h.return()}finally{if(l)throw c}}}},{key:"calculateInstanceColors",value:function(e){var t=this.props,n=t.data,r=t.getColor,i=e.value,o=e.size,a=0,s=!0,u=!1,l=void 0;try{for(var c,f=n[Symbol.iterator]();!(s=(c=f.next()).done);s=!0){var h=c.value,p=r(h);i[a+0]=p[0],i[a+1]=p[1],i[a+2]=p[2],i[a+3]=isNaN(p[3])?255:p[3],a+=o}}catch(e){u=!0,l=e}finally{try{!s&&f.return&&f.return()}finally{if(u)throw l}}}}]),t}(a.c);y.layerName="LineLayer",y.defaultProps=g},function(e,t,n){"use strict";t.a="#define SHADER_NAME line-layer-vertex-shader\n\nattribute vec3 positions;\nattribute vec3 instanceSourcePositions;\nattribute vec3 instanceTargetPositions;\nattribute vec4 instanceColors;\nattribute vec3 instancePickingColors;\n\nuniform float strokeWidth;\nuniform float opacity;\n\nvarying vec4 vColor;\n\n// offset vector by strokeWidth pixels\n// offset_direction is -1 (left) or 1 (right)\nvec2 getExtrusionOffset(vec2 line_clipspace, float offset_direction) {\n  // normalized direction of the line\n  vec2 dir_screenspace = normalize(line_clipspace * project_uViewportSize);\n  // rotate by 90 degrees\n  dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);\n\n  vec2 offset_screenspace = dir_screenspace * offset_direction * strokeWidth / 2.0;\n  vec2 offset_clipspace = project_pixel_to_clipspace(offset_screenspace).xy;\n\n  return offset_clipspace;\n}\n\nvoid main(void) {\n  // Position\n  vec3 sourcePos = project_position(instanceSourcePositions);\n  vec3 targetPos = project_position(instanceTargetPositions);\n  vec4 source = project_to_clipspace(vec4(sourcePos, 1.0));\n  vec4 target = project_to_clipspace(vec4(targetPos, 1.0));\n\n  // linear interpolation of source & target to pick right coord\n  float segmentIndex = positions.x;\n  vec4 p = mix(source, target, segmentIndex);\n\n  // extrude\n  vec2 offset = getExtrusionOffset(target.xy - source.xy, positions.y);\n  gl_Position = p + vec4(offset, 0.0, 0.0);\n\n  // Color\n  vColor = vec4(instanceColors.rgb, instanceColors.a * opacity) / 255.;\n\n  // Set color to be rendered to picking fbo (also used to check for selection highlight).\n  picking_setPickingColor(instancePickingColors);\n}\n"},function(e,t,n){"use strict";t.a="#define SHADER_NAME line-layer-vertex-shader-64\n\nattribute vec3 positions;\nattribute vec3 instanceSourcePositions;\nattribute vec3 instanceTargetPositions;\nattribute vec4 instanceSourceTargetPositions64xyLow;\nattribute vec4 instanceColors;\nattribute vec3 instancePickingColors;\n\nuniform float strokeWidth;\nuniform float opacity;\n\nvarying vec4 vColor;\n\n// offset vector by strokeWidth pixels\n// offset_direction is -1 (left) or 1 (right)\nvec2 getExtrusionOffset(vec2 line_clipspace, float offset_direction) {\n  // normalized direction of the line\n  vec2 dir_screenspace = normalize(line_clipspace * project_uViewportSize);\n  // rotate by 90 degrees\n  dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);\n\n  vec2 offset_screenspace = dir_screenspace * offset_direction * strokeWidth / 2.0;\n  vec2 offset_clipspace = project_pixel_to_clipspace(offset_screenspace).xy;\n\n  return offset_clipspace;\n}\n\nvoid main(void) {\n  // Position\n  vec4 instanceSourcePositions64 = vec4(\n    instanceSourcePositions.x, instanceSourceTargetPositions64xyLow.x,\n    instanceSourcePositions.y, instanceSourceTargetPositions64xyLow.y);\n\n  vec4 instanceTargetPositions64 = vec4(\n    instanceTargetPositions.x, instanceSourceTargetPositions64xyLow.z,\n    instanceTargetPositions.y, instanceSourceTargetPositions64xyLow.w);\n\n  vec2 projected_source_coord[2];\n  vec2 projected_target_coord[2];\n\n  project_position_fp64(instanceSourcePositions64, projected_source_coord);\n  project_position_fp64(instanceTargetPositions64, projected_target_coord);\n\n  vec2 source_pos_modelspace[4];\n  source_pos_modelspace[0] =  projected_source_coord[0];\n  source_pos_modelspace[1] =  projected_source_coord[1];\n  source_pos_modelspace[2] = vec2(project_scale(instanceSourcePositions.z), 0.0);\n  source_pos_modelspace[3] = vec2(1.0, 0.0);\n\n  vec4 source_pos_clipspace = project_to_clipspace_fp64(source_pos_modelspace);\n\n  vec2 target_pos_modelspace[4];\n  target_pos_modelspace[0] =  projected_target_coord[0];\n  target_pos_modelspace[1] =  projected_target_coord[1];\n  target_pos_modelspace[2] = vec2(project_scale(instanceTargetPositions.z), 0.0);\n  target_pos_modelspace[3] = vec2(1.0, 0.0);\n\n  vec4 target_pos_clipspace = project_to_clipspace_fp64(target_pos_modelspace);\n\n  float segmentIndex = positions.x;\n  vec4 p = mix(source_pos_clipspace, target_pos_clipspace, segmentIndex);\n\n  vec2 offset = getExtrusionOffset(target_pos_clipspace.xy - source_pos_clipspace.xy, positions.y);\n\n  gl_Position = p + vec4(offset, 0.0, 0.0);\n\n  // Color\n  vColor = vec4(instanceColors.rgb, instanceColors.a * opacity) / 255.;\n\n  // Set color to be rendered to picking fbo (also used to check for selection highlight).\n  picking_setPickingColor(instancePickingColors);\n}\n"},function(e,t,n){"use strict";t.a="#define SHADER_NAME line-layer-fragment-shader\n\n#ifdef GL_ES\nprecision highp float;\n#endif\n\nvarying vec4 vColor;\n\nvoid main(void) {\n  gl_FragColor = vColor;\n\n  // use highlight color if this fragment belongs to the selected object.\n  gl_FragColor = picking_filterHighlightColor(gl_FragColor);\n\n  // use picking color if rendering to picking FBO.\n  gl_FragColor = picking_filterPickingColor(gl_FragColor);\n}\n"},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(3),s=n(4),u=n(492),l=n(493),c=n(494),f=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),h=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},p=a.d.fp64LowPart,d=a.d.enable64bitSupport,v=[0,0,0,255],g={radiusPixels:10,fp64:!1,getPosition:function(e){return e.position},getNormal:function(e){return e.normal},getColor:function(e){return e.color||v},lightSettings:{lightsPosition:[0,0,5e3,-1e3,1e3,8e3,5e3,-5e3,1e3],ambientRatio:.2,diffuseRatio:.6,specularRatio:.8,lightsStrength:[1,0,.8,0,.4,0],numberOfLights:3}},y=function(e){function t(){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),f(t,[{key:"getShaders",value:function(e){var t=this.context.shaderCache;return d(this.props)?{vs:l.a,fs:c.a,modules:["project64","lighting","picking"],shaderCache:t}:{vs:u.a,fs:c.a,modules:["lighting","picking"],shaderCache:t}}},{key:"initializeState",value:function(){this.state.attributeManager.addInstanced({instancePositions:{size:3,accessor:"getPosition",update:this.calculateInstancePositions},instanceNormals:{size:3,accessor:"getNormal",defaultValue:1,update:this.calculateInstanceNormals},instanceColors:{size:4,type:s.e.UNSIGNED_BYTE,accessor:"getColor",update:this.calculateInstanceColors}})}},{key:"updateAttribute",value:function(e){var t=e.props,n=e.oldProps;e.changeFlags;if(t.fp64!==n.fp64){var r=this.state.attributeManager;r.invalidateAll(),t.fp64&&t.coordinateSystem===a.a.LNGLAT?r.addInstanced({instancePositions64xyLow:{size:2,accessor:"getPosition",update:this.calculateInstancePositions64xyLow}}):r.remove(["instancePositions64xyLow"])}}},{key:"updateState",value:function(e){var n=e.props,r=e.oldProps,i=e.changeFlags;if(h(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateState",this).call(this,{props:n,oldProps:r,changeFlags:i}),n.fp64!==r.fp64){var o=this.context.gl;this.setState({model:this._getModel(o)})}this.updateAttribute({props:n,oldProps:r,changeFlags:i})}},{key:"draw",value:function(e){var t=e.uniforms,n=this.props,r=n.radiusPixels,i=n.lightSettings;this.state.model.render(Object.assign({},t,{radiusPixels:r},i))}},{key:"_getModel",value:function(e){for(var t=[],n=0;n<3;n++){var r=n/3*Math.PI*2;t.push(2*Math.cos(r),2*Math.sin(r),0)}return new s.g(e,Object.assign({},this.getShaders(),{id:this.props.id,geometry:new s.f({drawMode:s.e.TRIANGLES,attributes:{positions:new Float32Array(t)}}),isInstanced:!0,shaderCache:this.context.shaderCache}))}},{key:"calculateInstancePositions",value:function(e){var t=this.props,n=t.data,r=t.getPosition,i=e.value,o=0,a=!0,s=!1,u=void 0;try{for(var l,c=n[Symbol.iterator]();!(a=(l=c.next()).done);a=!0){var f=l.value,h=r(f);i[o++]=h[0],i[o++]=h[1],i[o++]=h[2]||0}}catch(e){s=!0,u=e}finally{try{!a&&c.return&&c.return()}finally{if(s)throw u}}}},{key:"calculateInstancePositions64xyLow",value:function(e){var t=this.props,n=t.data,r=t.getPosition,i=e.value,o=0,a=!0,s=!1,u=void 0;try{for(var l,c=n[Symbol.iterator]();!(a=(l=c.next()).done);a=!0){var f=l.value,h=r(f);i[o++]=p(h[0]),i[o++]=p(h[1])}}catch(e){s=!0,u=e}finally{try{!a&&c.return&&c.return()}finally{if(s)throw u}}}},{key:"calculateInstanceNormals",value:function(e){var t=this.props,n=t.data,r=t.getNormal,i=e.value,o=0,a=!0,s=!1,u=void 0;try{for(var l,c=n[Symbol.iterator]();!(a=(l=c.next()).done);a=!0){var f=l.value,h=r(f);i[o++]=h[0],i[o++]=h[1],i[o++]=h[2]}}catch(e){s=!0,u=e}finally{try{!a&&c.return&&c.return()}finally{if(s)throw u}}}},{key:"calculateInstanceColors",value:function(e){var t=this.props,n=t.data,r=t.getColor,i=e.value,o=0,a=!0,s=!1,u=void 0;try{for(var l,c=n[Symbol.iterator]();!(a=(l=c.next()).done);a=!0){var f=l.value,h=r(f);i[o++]=h[0],i[o++]=h[1],i[o++]=h[2],i[o++]=isNaN(h[3])?255:h[3]}}catch(e){s=!0,u=e}finally{try{!a&&c.return&&c.return()}finally{if(s)throw u}}}}]),t}(a.c);y.layerName="PointCloudLayer",y.defaultProps=g},function(e,t,n){"use strict";t.a="#define SHADER_NAME point-cloud-layer-vertex-shader\n\nattribute vec3 positions;\n\nattribute vec3 instancePositions;\nattribute vec3 instanceNormals;\nattribute vec4 instanceColors;\nattribute vec3 instancePickingColors;\n\nuniform float opacity;\nuniform float radiusPixels;\n\nvarying vec4 vColor;\nvarying vec2 unitPosition;\n\nvoid main(void) {\n  // position on the containing square in [-1, 1] space\n  unitPosition = positions.xy;\n\n  // Find the center of the point and add the current vertex\n  vec4 position_worldspace = vec4(project_position(instancePositions), 1.0);\n  gl_Position = project_to_clipspace(position_worldspace) ;\n  gl_Position += project_pixel_to_clipspace(positions.xy * radiusPixels);\n\n  // Apply lighting\n  float lightWeight = getLightWeight(position_worldspace.xyz, // the w component is always 1.0\n    instanceNormals);\n\n  // Apply opacity to instance color, or return instance picking color\n  vColor = vec4(lightWeight * instanceColors.rgb, instanceColors.a * opacity) / 255.;\n\n  // Set color to be rendered to picking fbo (also used to check for selection highlight).\n  picking_setPickingColor(instancePickingColors);\n}\n"},function(e,t,n){"use strict";t.a="#define SHADER_NAME point-cloud-layer-vertex-shader-64\n\nattribute vec3 positions;\n\nattribute vec3 instancePositions;\nattribute vec2 instancePositions64xyLow;\nattribute vec3 instanceNormals;\nattribute vec4 instanceColors;\nattribute vec3 instancePickingColors;\n\nuniform float opacity;\nuniform float radiusPixels;\n\nvarying vec4 vColor;\nvarying vec2 unitPosition;\n\nvoid main(void) {\n  // position on the containing square in [-1, 1] space\n  unitPosition = positions.xy;\n\n  vec4 instancePositions64xy = vec4(\n    instancePositions.x, instancePositions64xyLow.x,\n    instancePositions.y, instancePositions64xyLow.y);\n\n  vec2 projected_coord_xy[2];\n  project_position_fp64(instancePositions64xy, projected_coord_xy);\n\n  vec2 vertex_pos_modelspace[4];\n  vertex_pos_modelspace[0] = projected_coord_xy[0];\n  vertex_pos_modelspace[1] = projected_coord_xy[1];\n  vertex_pos_modelspace[2] = vec2(project_scale(instancePositions.z), 0.0);\n  vertex_pos_modelspace[3] = vec2(1.0, 0.0);\n\n  gl_Position = project_to_clipspace_fp64(vertex_pos_modelspace);\n  gl_Position += project_pixel_to_clipspace(positions.xy * radiusPixels);\n\n  vec4 position_worldspace = vec4(\n    projected_coord_xy[0].x, projected_coord_xy[1].x,\n    project_scale(instancePositions.z), 1.0);\n\n  // Apply lighting\n  float lightWeight = getLightWeight(position_worldspace.xyz, // the w component is always 1.0\n    instanceNormals);\n\n  // Apply opacity to instance color, or return instance picking color\n  vColor = vec4(lightWeight * instanceColors.rgb, instanceColors.a * opacity) / 255.;\n\n  // Set color to be rendered to picking fbo (also used to check for selection highlight).\n  picking_setPickingColor(instancePickingColors);\n}\n"},function(e,t,n){"use strict";t.a="#define SHADER_NAME point-cloud-layer-fragment-shader\n\n#ifdef GL_ES\nprecision highp float;\n#endif\n\nvarying vec4 vColor;\nvarying vec2 unitPosition;\n\nvoid main(void) {\n\n  float distToCenter = length(unitPosition);\n\n  if (distToCenter > 1.0) {\n    discard;\n  }\n\n  gl_FragColor = vColor;\n\n  // use highlight color if this fragment belongs to the selected object.\n  gl_FragColor = picking_filterHighlightColor(gl_FragColor);\n\n  // use picking color if rendering to picking FBO.\n  gl_FragColor = picking_filterPickingColor(gl_FragColor);\n}\n"},function(e,t,n){"use strict";t.a="#define SHADER_NAME scatterplot-layer-vertex-shader\n\nattribute vec3 positions;\n\nattribute vec3 instancePositions;\nattribute float instanceRadius;\nattribute vec4 instanceColors;\nattribute vec3 instancePickingColors;\n\nuniform float opacity;\nuniform float radiusScale;\nuniform float radiusMinPixels;\nuniform float radiusMaxPixels;\nuniform float outline;\nuniform float strokeWidth;\n\nvarying vec4 vColor;\nvarying vec2 unitPosition;\nvarying float innerUnitRadius;\n\nvoid main(void) {\n  // Multiply out radius and clamp to limits\n  float outerRadiusPixels = clamp(\n    project_scale(radiusScale * instanceRadius),\n    radiusMinPixels, radiusMaxPixels\n  );\n  // outline is centered at the radius\n  // outer radius needs to offset by half stroke width\n  outerRadiusPixels += outline * strokeWidth / 2.0;\n\n  // position on the containing square in [-1, 1] space\n  unitPosition = positions.xy;\n  // 0 - solid circle, 1 - stroke with lineWidth=0\n  innerUnitRadius = outline * (1.0 - strokeWidth / outerRadiusPixels);\n\n  // Find the center of the point and add the current vertex\n  vec3 center = project_position(instancePositions);\n  vec3 vertex = positions * outerRadiusPixels;\n  gl_Position = project_to_clipspace(vec4(center + vertex, 1.0));\n\n  // Apply opacity to instance color, or return instance picking color\n  vColor = vec4(instanceColors.rgb, instanceColors.a * opacity) / 255.;\n\n  // Set color to be rendered to picking fbo (also used to check for selection highlight).\n  picking_setPickingColor(instancePickingColors);\n}\n"},function(e,t,n){"use strict";t.a="#define SHADER_NAME scatterplot-layer-vertex-shader-64\n\nattribute vec3 positions;\n\nattribute vec3 instancePositions;\nattribute vec2 instancePositions64xyLow;\nattribute float instanceRadius;\nattribute vec4 instanceColors;\nattribute vec3 instancePickingColors;\n\n// Only one-dimensional arrays may be declared in GLSL ES 1.0. specs p.24\nuniform float opacity;\nuniform float radiusScale;\nuniform float radiusMinPixels;\nuniform float radiusMaxPixels;\nuniform float outline;\nuniform float strokeWidth;\n\nvarying vec4 vColor;\nvarying vec2 unitPosition;\nvarying float innerUnitRadius;\n\nvoid main(void) {\n  // Multiply out radius and clamp to limits\n  float outerRadiusPixels = clamp(\n    project_scale(radiusScale * instanceRadius),\n    radiusMinPixels, radiusMaxPixels\n  );\n\n  // outline is centered at the radius\n  // outer radius needs to offset by half stroke width\n  outerRadiusPixels += outline * strokeWidth / 2.0;\n\n  // position on the containing square in [-1, 1] space\n  unitPosition = positions.xy;\n  // 0 - solid circle, 1 - stroke with lineWidth=0\n  innerUnitRadius = outline * (1.0 - strokeWidth / outerRadiusPixels);\n\n  vec4 instancePositions64xy = vec4(\n    instancePositions.x, instancePositions64xyLow.x,\n    instancePositions.y, instancePositions64xyLow.y);\n\n  vec2 projected_coord_xy[2];\n  project_position_fp64(instancePositions64xy, projected_coord_xy);\n\n  vec2 vertex_pos_localspace[4];\n  vec4_fp64(vec4(positions * outerRadiusPixels, 0.0), vertex_pos_localspace);\n\n  vec2 vertex_pos_modelspace[4];\n  vertex_pos_modelspace[0] = sum_fp64(vertex_pos_localspace[0], projected_coord_xy[0]);\n  vertex_pos_modelspace[1] = sum_fp64(vertex_pos_localspace[1], projected_coord_xy[1]);\n  vertex_pos_modelspace[2] = sum_fp64(vertex_pos_localspace[2],\n    vec2(project_scale(instancePositions.z), 0.0));\n  vertex_pos_modelspace[3] = vec2(1.0, 0.0);\n\n  gl_Position = project_to_clipspace_fp64(vertex_pos_modelspace);\n\n  vColor = vec4(instanceColors.rgb, instanceColors.a * opacity) / 255.;\n\n  // Set color to be rendered to picking fbo (also used to check for selection highlight).\n  picking_setPickingColor(instancePickingColors);\n}\n"},function(e,t,n){"use strict";t.a="#define SHADER_NAME scatterplot-layer-fragment-shader\n\n#ifdef GL_ES\nprecision highp float;\n#endif\n\nvarying vec4 vColor;\nvarying vec2 unitPosition;\nvarying float innerUnitRadius;\n\nvoid main(void) {\n\n  float distToCenter = length(unitPosition);\n\n  if (distToCenter > 1.0 || distToCenter < innerUnitRadius) {\n    discard;\n  }\n  gl_FragColor = vColor;\n\n  // use highlight color if this fragment belongs to the selected object.\n  gl_FragColor = picking_filterHighlightColor(gl_FragColor);\n\n  // use picking color if rendering to picking FBO.\n  gl_FragColor = picking_filterPickingColor(gl_FragColor);\n}\n"},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(3),s=n(4),u=n(499),l=n(500),c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),f=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},h={cellSizePixels:100,minColor:[0,0,0,255],maxColor:[0,255,0,255],getPosition:function(e){return e.position},getWeight:function(e){return 1}},p=function(e){function t(){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),c(t,[{key:"getShaders",value:function(){return{vs:u.a,fs:l.a,modules:["picking"]}}},{key:"initializeState",value:function(){var e=this.state.attributeManager,t=this.context.gl;e.addInstanced({instancePositions:{size:3,update:this.calculateInstancePositions},instanceCount:{size:1,accessor:["getPosition","getWeight"],update:this.calculateInstanceCount}}),this.setState({model:this._getModel(t)})}},{key:"shouldUpdateState",value:function(e){return e.changeFlags.somethingChanged}},{key:"updateState",value:function(e){var n=e.oldProps,r=e.props,i=e.changeFlags;f(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateState",this).call(this,{props:r,oldProps:n,changeFlags:i}),(r.cellSizePixels!==n.cellSizePixels||i.viewportChanged)&&this.updateCell()}},{key:"draw",value:function(e){var t=e.uniforms,n=this.props,r=n.minColor,i=n.maxColor,o=n.parameters,a=void 0===o?{}:o,s=this.state,u=s.model,l=s.cellScale,c=s.maxCount;t=Object.assign({},t,{minColor:r,maxColor:i,cellScale:l,maxCount:c}),u.draw({uniforms:t,parameters:Object.assign({depthTest:!1,depthMask:!1},a)})}},{key:"_getModel",value:function(e){return new s.g(e,Object.assign({},this.getShaders(),{id:this.props.id,geometry:new s.f({drawMode:s.e.TRIANGLE_FAN,attributes:{vertices:new Float32Array([0,0,0,1,0,0,1,1,0,0,1,0])}}),isInstanced:!0,shaderCache:this.context.shaderCache}))}},{key:"updateCell",value:function(){var e=this.context.viewport,t=e.width,n=e.height,r=this.props.cellSizePixels,i=new Float32Array([(r-2)/t*2,-(r-2)/n*2,1]),o=Math.ceil(t/r),a=Math.ceil(n/r);this.setState({cellScale:i,numCol:o,numRow:a,numInstances:o*a}),this.state.attributeManager.invalidateAll()}},{key:"calculateInstancePositions",value:function(e,t){for(var n=t.numInstances,r=this.context.viewport,i=r.width,o=r.height,a=this.props.cellSizePixels,s=this.state.numCol,u=e.value,l=e.size,c=0;c<n;c++){var f=c%s,h=Math.floor(c/s);u[c*l+0]=f*a/i*2-1,u[c*l+1]=1-h*a/o*2,u[c*l+2]=0}}},{key:"calculateInstanceCount",value:function(e){var t=this.props,n=t.data,r=t.cellSizePixels,i=t.getPosition,o=t.getWeight,a=this.state,s=a.numCol,u=a.numRow,l=e.value,c=0;l.fill(0);var f=!0,h=!1,p=void 0;try{for(var d,v=n[Symbol.iterator]();!(f=(d=v.next()).done);f=!0){var g=d.value,y=this.project(i(g)),m=Math.floor(y[0]/r),_=Math.floor(y[1]/r);if(m>=0&&m<s&&_>=0&&_<u){var b=m+_*s;l[b]+=o(g),l[b]>c&&(c=l[b])}}}catch(e){h=!0,p=e}finally{try{!f&&v.return&&v.return()}finally{if(h)throw p}}this.setState({maxCount:c})}}]),t}(a.c);p.layerName="ScreenGridLayer",p.defaultProps=h},function(e,t,n){"use strict";t.a="#define SHADER_NAME screen-grid-layer-vertex-shader\n\nattribute vec3 vertices;\nattribute vec3 instancePositions;\nattribute float instanceCount;\nattribute vec3 instancePickingColors;\n\nuniform float maxCount;\nuniform float opacity;\nuniform vec4 minColor;\nuniform vec4 maxColor;\nuniform vec3 cellScale;\n\nvarying vec4 vColor;\n\nvoid main(void) {\n  vec4 color = mix(minColor, maxColor, instanceCount / maxCount) / 255.;\n\n  vColor = vec4(color.rgb, color.a * opacity);\n\n  // Set color to be rendered to picking fbo (also used to check for selection highlight).\n  picking_setPickingColor(instancePickingColors);\n\n  gl_Position = vec4(instancePositions + vertices * cellScale, 1.);\n}\n"},function(e,t,n){"use strict";t.a="#define SHADER_NAME screen-grid-layer-fragment-shader\n\n#ifdef GL_ES\nprecision highp float;\n#endif\n\nvarying vec4 vColor;\n\nvoid main(void) {\n  gl_FragColor = vColor;\n\n  // use highlight color if this fragment belongs to the selected object.\n  gl_FragColor = picking_filterHighlightColor(gl_FragColor);\n\n  // use picking color if rendering to picking FBO.\n  gl_FragColor = picking_filterPickingColor(gl_FragColor);\n}\n"},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(){}var s=n(3),u=n(285),l=n(505),c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),f=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},h=s.d.BinSorter,p=s.d.defaultColorRange,d=s.d.getQuantizeScale,v=s.d.getLinearScale,g={colorDomain:null,colorRange:p,getColorValue:function(e){return e.length},lowerPercentile:0,upperPercentile:100,onSetColorDomain:a,elevationDomain:null,elevationRange:[0,1e3],getElevationValue:function(e){return e.length},elevationLowerPercentile:0,elevationUpperPercentile:100,elevationScale:1,onSetElevationDomain:a,cellSize:1e3,coverage:1,getPosition:function(e){return e.position},extruded:!1,fp64:!1,lightSettings:{lightsPosition:[-122.45,37.75,8e3,-122,38,5e3],ambientRatio:.05,diffuseRatio:.6,specularRatio:.8,lightsStrength:[2,0,0,0],numberOfLights:2}},y=function(e){function t(){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),c(t,[{key:"initializeState",value:function(){this.state={layerData:[],sortedColorBins:null,sortedElevationBins:null,colorValueDomain:null,elevationValueDomain:null,colorScaleFunc:a,elevationScaleFunc:a,dimensionUpdaters:this.getDimensionUpdaters()}}},{key:"updateState",value:function(e){var t=this,n=e.oldProps,r=e.props,i=e.changeFlags,o=this.getDimensionChanges(n,r);i.dataChanged||this.needsReProjectPoints(n,r)?this.getLayerData():o&&o.forEach(function(e){return"function"===typeof e&&e.apply(t)})}},{key:"needsReProjectPoints",value:function(e,t){return e.cellSize!==t.cellSize}},{key:"getDimensionUpdaters",value:function(){return{getColor:[{id:"value",triggers:["getColorValue"],updater:this.getSortedColorBins},{id:"domain",triggers:["lowerPercentile","upperPercentile"],updater:this.getColorValueDomain},{id:"scaleFunc",triggers:["colorDomain","colorRange"],updater:this.getColorScale}],getElevation:[{id:"value",triggers:["getElevationValue"],updater:this.getSortedElevationBins},{id:"domain",triggers:["elevationLowerPercentile","elevationUpperPercentile"],updater:this.getElevationValueDomain},{id:"scaleFunc",triggers:["elevationDomain","elevationRange"],updater:this.getElevationScale}]}}},{key:"getDimensionChanges",value:function(e,t){var n=this.state.dimensionUpdaters,r=[];for(var i in n){var o=n[i].find(function(n){return n.triggers.some(function(n){return e[n]!==t[n]})});o&&r.push(o.updater)}return r.length?r:null}},{key:"getPickingInfo",value:function(e){var t=e.info,n=this.state,r=n.sortedColorBins,i=n.sortedElevationBins,o=t.picked&&t.index>-1,a=null;if(o){var s=this.state.layerData[t.index],u=r.binMap[s.index]&&r.binMap[s.index].value,l=i.binMap[s.index]&&i.binMap[s.index].value;a=Object.assign({colorValue:u,elevationValue:l},s)}return Object.assign(t,{picked:Boolean(a),object:a})}},{key:"getUpdateTriggers",value:function(){var e=this,t=this.state.dimensionUpdaters,n={};for(var r in t)!function(r){n[r]={};var i=!0,o=!1,a=void 0;try{for(var s,u=t[r][Symbol.iterator]();!(i=(s=u.next()).done);i=!0){s.value.triggers.forEach(function(t){n[r][t]=e.props[t]})}}catch(e){o=!0,a=e}finally{try{!i&&u.return&&u.return()}finally{if(o)throw a}}}(r);return n}},{key:"getLayerData",value:function(){var e=this.props,t=e.data,n=e.cellSize,r=e.getPosition,i=Object(l.a)(t,n,r),o=i.layerData;this.setState({layerData:o}),this.getSortedBins()}},{key:"getValueDomain",value:function(){this.getColorValueDomain(),this.getElevationValueDomain()}},{key:"getSortedBins",value:function(){this.getSortedColorBins(),this.getSortedElevationBins()}},{key:"getSortedColorBins",value:function(){var e=this.props.getColorValue,t=new h(this.state.layerData||[],e);this.setState({sortedColorBins:t}),this.getColorValueDomain()}},{key:"getSortedElevationBins",value:function(){var e=this.props.getElevationValue,t=new h(this.state.layerData||[],e);this.setState({sortedElevationBins:t}),this.getElevationValueDomain()}},{key:"getColorValueDomain",value:function(){var e=this.props,t=e.lowerPercentile,n=e.upperPercentile,r=e.onSetColorDomain;this.state.colorValueDomain=this.state.sortedColorBins.getValueRange([t,n]),"function"===typeof r&&r(this.state.colorValueDomain),this.getColorScale()}},{key:"getElevationValueDomain",value:function(){var e=this.props,t=e.elevationLowerPercentile,n=e.elevationUpperPercentile,r=e.onSetElevationDomain;this.state.elevationValueDomain=this.state.sortedElevationBins.getValueRange([t,n]),"function"===typeof r&&r(this.state.elevationValueDomain),this.getElevationScale()}},{key:"getColorScale",value:function(){var e=this.props.colorRange,t=this.props.colorDomain||this.state.colorValueDomain;this.state.colorScaleFunc=d(t,e)}},{key:"getElevationScale",value:function(){var e=this.props.elevationRange,t=this.props.elevationDomain||this.state.elevationValueDomain;this.state.elevationScaleFunc=v(t,e)}},{key:"_onGetSublayerColor",value:function(e){var t=this.state,n=t.sortedColorBins,r=t.colorScaleFunc,i=t.colorValueDomain,o=n.binMap[e.index]&&n.binMap[e.index].value,a=this.props.colorDomain||i,s=o>=a[0]&&o<=a[a.length-1],u=s?r(o):[0,0,0,0];return u[3]=Number.isFinite(u[3])?u[3]:255,u}},{key:"_onGetSublayerElevation",value:function(e){var t=this.state,n=t.sortedElevationBins,r=t.elevationScaleFunc,i=t.elevationValueDomain,o=n.binMap[e.index]&&n.binMap[e.index].value,a=this.props.elevationDomain||i;return o>=a[0]&&o<=a[a.length-1]?r(o):-1}},{key:"getSubLayerProps",value:function(){var e=this.props,n=e.elevationScale,r=e.fp64,i=e.extruded,o=e.cellSize,a=e.coverage,s=e.lightSettings;return f(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"getSubLayerProps",this).call(this,{id:"grid-cell",data:this.state.layerData,fp64:r,cellSize:o,coverage:a,lightSettings:s,elevationScale:n,extruded:i,getColor:this._onGetSublayerColor.bind(this),getElevation:this._onGetSublayerElevation.bind(this),updateTriggers:this.getUpdateTriggers()})}},{key:"getSubLayerClass",value:function(){return u.a}},{key:"renderLayers",value:function(){return new(this.getSubLayerClass())(this.getSubLayerProps())}}]),t}(s.b);y.layerName="GridLayer",y.defaultProps=g},function(e,t,n){"use strict";t.a="#define SHADER_NAME grid-cell-layer-vertex-shader\n\nattribute vec3 positions;\nattribute vec3 normals;\n\nattribute vec4 instancePositions;\nattribute vec4 instanceColors;\nattribute vec3 instancePickingColors;\n\n// Custom uniforms\nuniform float extruded;\nuniform float cellSize;\nuniform float coverage;\nuniform float opacity;\nuniform float elevationScale;\n\n// A magic number to scale elevation so that 1 unit approximate to 1 meter\n#define ELEVATION_SCALE 0.8\n\n// Result\nvarying vec4 vColor;\n\nvoid main(void) {\n\n  vec2 topLeftPos = project_position(instancePositions.xy);\n\n  // if ahpha == 0.0 or z < 0.0, do not render element\n  float noRender = float(instanceColors.a == 0.0 || instancePositions.w < 0.0);\n  float finalCellSize = cellSize * mix(1.0, 0.0, noRender);\n\n  // cube gemoetry vertics are between -1 to 1, scale and transform it to between 0, 1\n  vec2 pos = topLeftPos + vec2(\n  (positions.x * coverage + 1.0) / 2.0 * finalCellSize,\n  (positions.y * coverage - 1.0) / 2.0 * finalCellSize);\n\n  float elevation = 0.0;\n\n  if (extruded > 0.5) {\n    elevation = project_scale(instancePositions.w  * (positions.z + 1.0) *\n      ELEVATION_SCALE * elevationScale);\n  }\n\n  // extrude positions\n  vec3 extrudedPosition = vec3(pos.xy, elevation + 1.0);\n  vec4 position_worldspace = vec4(extrudedPosition, 1.0);\n  gl_Position = project_to_clipspace(position_worldspace);\n\n  float lightWeight = 1.0;\n\n  if (extruded > 0.5) {\n    lightWeight = getLightWeight(\n      position_worldspace.xyz, // the w component is always 1.0\n      normals\n    );\n  }\n\n  vec3 lightWeightedColor = lightWeight * instanceColors.rgb;\n  vec4 color = vec4(lightWeightedColor, instanceColors.a * opacity) / 255.0;\n  vColor = color;\n\n  // Set color to be rendered to picking fbo (also used to check for selection highlight).\n  picking_setPickingColor(instancePickingColors);\n}\n"},function(e,t,n){"use strict";t.a="#define SHADER_NAME grid-cell-layer-vertex-shader-64\n\nattribute vec3 positions;\nattribute vec3 normals;\n\nattribute vec4 instancePositions;\nattribute vec2 instancePositions64xyLow;\nattribute vec4 instanceColors;\nattribute vec3 instancePickingColors;\n\n// Custom uniforms\nuniform float extruded;\nuniform float cellSize;\nuniform float coverage;\nuniform float opacity;\nuniform float elevationScale;\n\n// A magic number to scale elevation so that 1 unit approximate to 1 meter\n#define ELEVATION_SCALE 0.8\n\n// Result\nvarying vec4 vColor;\n\nvoid main(void) {\n  vec4 instancePositions64xy = vec4(\n    instancePositions.x,\n    instancePositions64xyLow.x,\n    instancePositions.y,\n    instancePositions64xyLow.y);\n\n  vec2 projected_coord_xy[2];\n  project_position_fp64(instancePositions64xy, projected_coord_xy);\n\n  // if ahpha == 0.0 or z < 0.0, do not render element\n  float noRender = float(instanceColors.a == 0.0 || instancePositions.w < 0.0);\n  float finalCellSize = cellSize * mix(1.0, 0.0, noRender);\n\n  projected_coord_xy[0] = sum_fp64(projected_coord_xy[0],\n    vec2((positions.x * coverage + 1.0) * finalCellSize / 2.0, 0.0));\n  projected_coord_xy[1] = sum_fp64(projected_coord_xy[1],\n    vec2((positions.y * coverage - 1.0) * finalCellSize / 2.0, 0.0));\n\n  float elevation = 0.0;\n\n  if (extruded > 0.5) {\n    elevation = project_scale(instancePositions.w  * (positions.z + 1.0) *\n      ELEVATION_SCALE * elevationScale) + 1.0;\n  }\n\n  vec2 vertex_pos_modelspace[4];\n  vertex_pos_modelspace[0] = projected_coord_xy[0];\n  vertex_pos_modelspace[1] = projected_coord_xy[1];\n  vertex_pos_modelspace[2] = vec2(elevation, 0.0);\n  vertex_pos_modelspace[3] = vec2(1.0, 0.0);\n\n  vec4 position_worldspace = vec4(\n    vertex_pos_modelspace[0].x, vertex_pos_modelspace[1].x,\n    vertex_pos_modelspace[2].x, vertex_pos_modelspace[3].x);\n\n  gl_Position = project_to_clipspace_fp64(vertex_pos_modelspace);\n\n  float lightWeight = 1.0;\n\n  if (extruded > 0.5) {\n    lightWeight = getLightWeight(\n      position_worldspace.xyz, // the w component is always 1.0\n      normals\n    );\n  }\n\n  vec3 lightWeightedColor = lightWeight * instanceColors.rgb;\n  vec4 color = vec4(lightWeightedColor, instanceColors.a * opacity) / 255.0;\n  vColor = color;\n\n  // Set color to be rendered to picking fbo (also used to check for selection highlight).\n  picking_setPickingColor(instancePickingColors);\n}\n"},function(e,t,n){"use strict";t.a="#define SHADER_NAME grid-cell-layer-fragment-shader\n\n#ifdef GL_ES\nprecision highp float;\n#endif\n\nvarying vec4 vColor;\n\nvoid main(void) {\n  gl_FragColor = vColor;\n\n  // use highlight color if this fragment belongs to the selected object.\n  gl_FragColor = picking_filterHighlightColor(gl_FragColor);\n\n  // use picking color if rendering to picking FBO.\n  gl_FragColor = picking_filterPickingColor(gl_FragColor);\n}\n"},function(e,t,n){"use strict";function r(e,t,n){var r=i(e,t,n),a=r.gridHash,s=r.gridOffset;return{gridOffset:s,layerData:o(a,s)}}function i(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments[1],n=arguments[2],r=1/0,i=-1/0,o=void 0,s=0;s<e.length;s++)o=n(e[s])[1],Number.isFinite(o)&&(r=o<r?o:r,i=o>i?o:i);var u=(r+i)/2,l=a(t,u);return l.xOffset<=0||l.yOffset<=0?{gridHash:{},gridOffset:l}:{gridHash:e.reduce(function(e,t){var r=n(t)[1],i=n(t)[0];if(!Number.isFinite(r)||!Number.isFinite(i))return e;var o=Math.floor((r+90)/l.yOffset),a=Math.floor((i+180)/l.xOffset),s=o+"-"+a;return e[s]=e[s]||{count:0,points:[]},e[s].count+=1,e[s].points.push(t),e},{}),gridOffset:l}}function o(e,t){return Object.keys(e).reduce(function(n,r,i){var o=r.split("-"),a=parseInt(o[0],10),s=parseInt(o[1],10);return n.push(Object.assign({index:i,position:[t.xOffset*s-180,t.yOffset*a-90]},e[r])),n},[])}function a(e,t){return{yOffset:s(e),xOffset:u(t,e)}}function s(e){return e/l*(180/Math.PI)}function u(e,t){return t/l*(180/Math.PI)/Math.cos(e*Math.PI/180)}t.a=r;var l=6378e3},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(){}var s=n(3),u=n(286),l=n(510),c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),f=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},h=s.d.log,p=s.d.BinSorter,d=s.d.getQuantizeScale,v=s.d.getLinearScale,g=s.d.defaultColorRange,y={colorDomain:null,colorRange:g,getColorValue:function(e){return e.length},lowerPercentile:0,upperPercentile:100,onSetColorDomain:a,elevationDomain:null,elevationRange:[0,1e3],getElevationValue:function(e){return e.length},elevationLowerPercentile:0,elevationUpperPercentile:100,elevationScale:1,onSetElevationDomain:a,radius:1e3,coverage:1,extruded:!1,hexagonAggregator:l.a,getPosition:function(e){return e.position},fp64:!1,lightSettings:{lightsPosition:[-122.45,37.75,8e3,-122,38,5e3],ambientRatio:.05,diffuseRatio:.6,specularRatio:.8,lightsStrength:[2,0,0,0],numberOfLights:2}},m=function(e){function t(e){return r(this,t),e.hexagonAggregator||e.radius||(h.once(0,"HexagonLayer: Default hexagonAggregator requires radius prop to be set, Now using 1000 meter as default"),e.radius=y.radius),Number.isFinite(e.upperPercentile)&&(e.upperPercentile>100||e.upperPercentile<0)&&(h.once(0,"HexagonLayer: upperPercentile should be between 0 and 100. Assign to 100 by default"),e.upperPercentile=y.upperPercentile),Number.isFinite(e.lowerPercentile)&&(e.lowerPercentile>100||e.lowerPercentile<0)&&(h.once(0,"HexagonLayer: lowerPercentile should be between 0 and 100. Assign to 0 by default"),e.lowerPercentile=y.upperPercentile),e.lowerPercentile>=e.upperPercentile&&(h.once(0,"HexagonLayer: lowerPercentile should not be bigger than upperPercentile. Assign to 0 by default"),e.lowerPercentile=y.lowerPercentile),i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return o(t,e),c(t,[{key:"initializeState",value:function(){this.state={hexagons:[],hexagonVertices:null,sortedColorBins:null,sortedElevationBins:null,colorValueDomain:null,elevationValueDomain:null,colorScaleFunc:a,elevationScaleFunc:a,dimensionUpdaters:this.getDimensionUpdaters()}}},{key:"shouldUpdateState",value:function(e){return e.changeFlags.somethingChanged}},{key:"updateState",value:function(e){var t=this,n=e.oldProps,r=e.props,i=e.changeFlags,o=this.getDimensionChanges(n,r);i.dataChanged||this.needsReProjectPoints(n,r)?this.getHexagons():o&&o.forEach(function(e){return"function"===typeof e&&e.apply(t)})}},{key:"needsReProjectPoints",value:function(e,t){return e.radius!==t.radius||e.hexagonAggregator!==t.hexagonAggregator}},{key:"getDimensionUpdaters",value:function(){return{getColor:[{id:"value",triggers:["getColorValue"],updater:this.getSortedColorBins},{id:"domain",triggers:["lowerPercentile","upperPercentile"],updater:this.getColorValueDomain},{id:"scaleFunc",triggers:["colorDomain","colorRange"],updater:this.getColorScale}],getElevation:[{id:"value",triggers:["getElevationValue"],updater:this.getSortedElevationBins},{id:"domain",triggers:["elevationLowerPercentile","elevationUpperPercentile"],updater:this.getElevationValueDomain},{id:"scaleFunc",triggers:["elevationDomain","elevationRange"],updater:this.getElevationScale}]}}},{key:"getDimensionChanges",value:function(e,t){var n=this.state.dimensionUpdaters,r=[];for(var i in n){var o=n[i].find(function(n){return n.triggers.some(function(n){return e[n]!==t[n]})});o&&r.push(o.updater)}return r.length?r:null}},{key:"getHexagons",value:function(){var e=this.props.hexagonAggregator,t=this.context.viewport,n=e(this.props,t),r=n.hexagons,i=n.hexagonVertices;this.setState({hexagons:r,hexagonVertices:i}),this.getSortedBins()}},{key:"getPickingInfo",value:function(e){var t=e.info,n=this.state,r=n.sortedColorBins,i=n.sortedElevationBins,o=t.picked&&t.index>-1,a=null;if(o){var s=this.state.hexagons[t.index],u=r.binMap[s.index]&&r.binMap[s.index].value,l=i.binMap[s.index]&&i.binMap[s.index].value;a=Object.assign({colorValue:u,elevationValue:l},s)}return Object.assign(t,{picked:Boolean(a),object:a})}},{key:"getUpdateTriggers",value:function(){var e=this,t=this.state.dimensionUpdaters,n={};for(var r in t)!function(r){n[r]={};var i=!0,o=!1,a=void 0;try{for(var s,u=t[r][Symbol.iterator]();!(i=(s=u.next()).done);i=!0){s.value.triggers.forEach(function(t){n[r][t]=e.props[t]})}}catch(e){o=!0,a=e}finally{try{!i&&u.return&&u.return()}finally{if(o)throw a}}}(r);return n}},{key:"getValueDomain",value:function(){this.getColorValueDomain(),this.getElevationValueDomain()}},{key:"getSortedBins",value:function(){this.getSortedColorBins(),this.getSortedElevationBins()}},{key:"getSortedColorBins",value:function(){var e=this.props.getColorValue,t=new p(this.state.hexagons||[],e);this.setState({sortedColorBins:t}),this.getColorValueDomain()}},{key:"getSortedElevationBins",value:function(){var e=this.props.getElevationValue,t=new p(this.state.hexagons||[],e);this.setState({sortedElevationBins:t}),this.getElevationValueDomain()}},{key:"getColorValueDomain",value:function(){var e=this.props,t=e.lowerPercentile,n=e.upperPercentile,r=e.onSetColorDomain;this.state.colorValueDomain=this.state.sortedColorBins.getValueRange([t,n]),"function"===typeof r&&r(this.state.colorValueDomain),this.getColorScale()}},{key:"getElevationValueDomain",value:function(){var e=this.props,t=e.elevationLowerPercentile,n=e.elevationUpperPercentile,r=e.onSetElevationDomain;this.state.elevationValueDomain=this.state.sortedElevationBins.getValueRange([t,n]),"function"===typeof r&&r(this.state.elevationValueDomain),this.getElevationScale()}},{key:"getColorScale",value:function(){var e=this.props.colorRange,t=this.props.colorDomain||this.state.colorValueDomain;this.state.colorScaleFunc=d(t,e)}},{key:"getElevationScale",value:function(){var e=this.props.elevationRange,t=this.props.elevationDomain||this.state.elevationValueDomain;this.state.elevationScaleFunc=v(t,e)}},{key:"_onGetSublayerColor",value:function(e){var t=this.state,n=t.sortedColorBins,r=t.colorScaleFunc,i=t.colorValueDomain,o=n.binMap[e.index]&&n.binMap[e.index].value,a=this.props.colorDomain||i,s=o>=a[0]&&o<=a[a.length-1],u=s?r(o):[0,0,0,0];return u[3]=Number.isFinite(u[3])?u[3]:255,u}},{key:"_onGetSublayerElevation",value:function(e){var t=this.state,n=t.sortedElevationBins,r=t.elevationScaleFunc,i=t.elevationValueDomain,o=n.binMap[e.index]&&n.binMap[e.index].value,a=this.props.elevationDomain||i;return o>=a[0]&&o<=a[a.length-1]?r(o):-1}},{key:"getSubLayerProps",value:function(){var e=this.props,n=e.radius,r=e.elevationScale,i=e.extruded,o=e.coverage,a=e.lightSettings,s=e.fp64;return f(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"getSubLayerProps",this).call(this,{id:"hexagon-cell",data:this.state.hexagons,fp64:s,hexagonVertices:this.state.hexagonVertices,radius:n,elevationScale:r,angle:Math.PI,extruded:i,coverage:o,lightSettings:a,getColor:this._onGetSublayerColor.bind(this),getElevation:this._onGetSublayerElevation.bind(this),updateTriggers:this.getUpdateTriggers()})}},{key:"getSubLayerClass",value:function(){return u.a}},{key:"renderLayers",value:function(){return new(this.getSubLayerClass())(this.getSubLayerProps())}}]),t}(s.b);m.layerName="HexagonLayer",m.defaultProps=y},function(e,t,n){"use strict";t.a="\n#define SHADER_NAME hexagon-cell-layer-vertex-shader\n\nattribute vec3 positions;\nattribute vec3 normals;\n\nattribute vec3 instancePositions;\nattribute vec4 instanceColors;\nattribute vec3 instancePickingColors;\n\n// Custom uniforms\nuniform float opacity;\nuniform float radius;\nuniform float angle;\nuniform float extruded;\nuniform float coverage;\nuniform float elevationScale;\n\n// Result\nvarying vec4 vColor;\n\n// A magic number to scale elevation so that 1 unit approximate to 1 meter.\n#define ELEVATION_SCALE 0.8\n\nvoid main(void) {\n\n  // rotate primitive position and normal\n  mat2 rotationMatrix = mat2(cos(angle), -sin(angle), sin(angle), cos(angle));\n\n  vec2 rPos = rotationMatrix * positions.xz;\n  vec2 rNorm = rotationMatrix * normals.xz; // the hexagon cells has y axis as the vertical axis\n\n  vec3 rotatedPositions = vec3(rPos.x, positions.y, rPos.y);\n  vec3 rotatedNormals = vec3(rNorm.x, rNorm.y, normals.y);\n\n  // calculate elevation, if 3d not enabled set to 0\n  // cylindar gemoetry height are between -0.5 to 0.5, transform it to between 0, 1\n  float elevation = 0.0;\n\n  if (extruded > 0.5) {\n    elevation = project_scale(instancePositions.z * (positions.y + 0.5) *\n      ELEVATION_SCALE * elevationScale);\n  }\n\n  // if ahpha == 0.0 or z < 0.0, do not render element\n  float noRender = float(instanceColors.a == 0.0 || instancePositions.z < 0.0);\n  float dotRadius = radius * mix(coverage, 0.0, noRender);\n\n  // project center of hexagon\n  vec4 centroidPosition = vec4(project_position(instancePositions.xy), elevation, 0.0);\n\n  vec4 position_worldspace = centroidPosition + vec4(vec2(rotatedPositions.xz * dotRadius), 0., 1.);\n\n  gl_Position = project_to_clipspace(position_worldspace);\n\n  // Light calculations\n  // Worldspace is the linear space after Mercator projection\n\n  vec3 normals_worldspace = rotatedNormals;\n\n  float lightWeight = 1.0;\n\n  if (extruded > 0.5) {\n    lightWeight = getLightWeight(\n      position_worldspace.xyz, // the w component is always 1.0\n      normals_worldspace\n    );\n  }\n\n  vec3 lightWeightedColor = lightWeight * instanceColors.rgb;\n\n  // opacity-multiplied instance color\n  vColor = vec4(lightWeightedColor, opacity * instanceColors.a) / 255.0;\n\n  // Set color to be rendered to picking fbo (also used to check for selection highlight).\n  picking_setPickingColor(instancePickingColors);\n}\n"},function(e,t,n){"use strict";t.a="#define SHADER_NAME hexagon-cell-layer-vertex-shader-64\n\nattribute vec3 positions;\nattribute vec3 normals;\n\nattribute vec3 instancePositions;\nattribute vec2 instancePositions64xyLow;\nattribute vec4 instanceColors;\nattribute vec3 instancePickingColors;\n\n// Custom uniforms\nuniform float opacity;\nuniform float radius;\nuniform float angle;\nuniform float extruded;\nuniform float coverage;\nuniform float elevationScale;\n\n// Result\nvarying vec4 vColor;\n\n// A magic number to scale elevation so that 1 unit approximate to 1 meter.\n#define ELEVATION_SCALE 0.8\n\nvoid main(void) {\n\n  // rotate primitive position and normal\n  mat2 rotationMatrix = mat2(cos(angle), -sin(angle), sin(angle), cos(angle));\n\n  vec2 rPos = rotationMatrix * positions.xz;\n  vec2 rNorm = rotationMatrix * normals.xz; // the hexagon cells has y axis as the vertical axis\n\n  vec3 rotatedPositions = vec3(rPos.x, positions.y, rPos.y);\n  vec3 rotatedNormals = vec3(rNorm.x, rNorm.y, normals.y);\n\n  // calculate elevation, if 3d not enabled set to 0\n  // cylindar gemoetry height are between -0.5 to 0.5, transform it to between 0, 1\n  float elevation = 0.0;\n\n  if (extruded > 0.5) {\n    elevation = project_scale(instancePositions.z * (positions.y + 0.5) *\n      ELEVATION_SCALE * elevationScale);\n  }\n\n  // if alpha == 0.0 or z < 0.0, do not render element\n  float noRender = float(instanceColors.a == 0.0 || instancePositions.z < 0.0);\n  float dotRadius = radius * mix(coverage, 0.0, noRender);\n\n  // project center of hexagon\n\n  vec4 instancePositions64xy = vec4(\n    instancePositions.x, instancePositions64xyLow.x,\n    instancePositions.y, instancePositions64xyLow.y);\n\n  vec2 projected_coord_xy[2];\n  project_position_fp64(instancePositions64xy, projected_coord_xy);\n\n  vec2 vertex_pos_localspace[4];\n  vec4_fp64(vec4(rotatedPositions.xz * dotRadius, 0.0, 1.0), vertex_pos_localspace);\n\n  vec2 vertex_pos_modelspace[4];\n  vertex_pos_modelspace[0] = sum_fp64(vertex_pos_localspace[0], projected_coord_xy[0]);\n  vertex_pos_modelspace[1] = sum_fp64(vertex_pos_localspace[1], projected_coord_xy[1]);\n  vertex_pos_modelspace[2] = sum_fp64(vertex_pos_localspace[2], vec2(elevation, 0.0));\n  vertex_pos_modelspace[3] = vec2(1.0, 0.0);\n\n  vec4 position_worldspace = vec4(\n    vertex_pos_modelspace[0].x, vertex_pos_modelspace[1].x,\n    vertex_pos_modelspace[2].x, vertex_pos_modelspace[3].x);\n\n  gl_Position = project_to_clipspace_fp64(vertex_pos_modelspace);\n\n  // Light calculations\n  // Worldspace is the linear space after Mercator projection\n\n  vec3 normals_worldspace = rotatedNormals;\n\n  float lightWeight = 1.0;\n\n  if (extruded > 0.5) {\n    lightWeight = getLightWeight(\n      position_worldspace.xyz, // the w component is always 1.0\n      normals_worldspace\n    );\n  }\n\n  vec3 lightWeightedColor = lightWeight * instanceColors.rgb;\n\n  // Color: Either opacity-multiplied instance color, or picking color\n  vColor = vec4(lightWeightedColor, opacity * instanceColors.a) / 255.0;\n\n  // Set color to be rendered to picking fbo (also used to check for selection highlight).\n  picking_setPickingColor(instancePickingColors);\n}\n"},function(e,t,n){"use strict";t.a="#define SHADER_NAME hexagon-cell-layer-fragment-shader\n\n#ifdef GL_ES\nprecision highp float;\n#endif\n\nvarying vec4 vColor;\n\nvoid main(void) {\n  gl_FragColor = vColor;\n\n  // use highlight color if this fragment belongs to the selected object.\n  gl_FragColor = picking_filterHighlightColor(gl_FragColor);\n\n  // use picking color if rendering to picking FBO.\n  gl_FragColor = picking_filterPickingColor(gl_FragColor);\n}\n"},function(e,t,n){"use strict";function r(e,t){var n=e.data,r=e.radius,a=e.getPosition,s=i(r,t),u=n.map(function(e){return Object.assign({screenCoord:t.projectFlat(a(e))},e)});return{hexagons:Object(o.a)().radius(s).x(function(e){return e.screenCoord[0]}).y(function(e){return e.screenCoord[1]})(u).map(function(e,n){return{centroid:t.unprojectFlat([e.x,e.y]),points:e,index:n}})}}function i(e,t){return e*t.getDistanceScales().pixelsPerMeter[0]}t.a=r;var o=n(511)},function(e,t,n){"use strict";var r=n(512);n.d(t,"a",function(){return r.a})},function(e,t,n){"use strict";function r(e){return e[0]}function i(e){return e[1]}var o=Math.PI/3,a=[0,o,2*o,3*o,4*o,5*o];t.a=function(){function e(e){var t,n={},r=[],i=e.length;for(t=0;t<i;++t)if(!isNaN(a=+p.call(null,o=e[t],t,e))&&!isNaN(l=+d.call(null,o,t,e))){var o,a,l,c=Math.round(l/=u),f=Math.round(a=a/s-(1&c)/2),h=l-c;if(3*Math.abs(h)>1){var v=a-f,g=f+(a<f?-1:1)/2,y=c+(l<c?-1:1),m=a-g,_=l-y;v*v+h*h>m*m+_*_&&(f=g+(1&c?1:-1)/2,c=y)}var b=f+"-"+c,E=n[b];E?E.push(o):(r.push(E=n[b]=[o]),E.x=(f+(1&c)/2)*s,E.y=c*u)}return r}function t(e){var t=0,n=0;return a.map(function(r){var i=Math.sin(r)*e,o=-Math.cos(r)*e,a=i-t,s=o-n;return t=i,n=o,[a,s]})}var n,s,u,l=0,c=0,f=1,h=1,p=r,d=i;return e.hexagon=function(e){return"m"+t(null==e?n:+e).join("l")+"z"},e.centers=function(){for(var e=[],t=Math.round(c/u),r=Math.round(l/s),i=t*u;i<h+n;i+=u,++t)for(var o=r*s+(1&t)*s/2;o<f+s/2;o+=s)e.push([o,i]);return e},e.mesh=function(){var r=t(n).slice(0,4).join("l");return e.centers().map(function(e){return"M"+e+"m"+r}).join("")},e.x=function(t){return arguments.length?(p=t,e):p},e.y=function(t){return arguments.length?(d=t,e):d},e.radius=function(t){return arguments.length?(n=+t,s=2*n*Math.sin(o),u=1.5*n,e):n},e.size=function(t){return arguments.length?(l=c=0,f=+t[0],h=+t[1],e):[f-l,h-c]},e.extent=function(t){return arguments.length?(l=+t[0][0],c=+t[0][1],f=+t[1][0],h=+t[1][1],e):[[l,c],[f,h]]},e.radius(1)}},function(e,t,n){"use strict";t.a="#define SHADER_NAME path-layer-vertex-shader-64\n\nattribute vec3 positions;\n\nattribute vec3 instanceStartPositions;\nattribute vec3 instanceEndPositions;\nattribute vec3 instanceLeftDeltas;\nattribute vec3 instanceRightDeltas;\nattribute float instanceStrokeWidths;\nattribute vec4 instanceColors;\nattribute vec3 instancePickingColors;\nattribute vec2 instanceDashArrays;\n\nuniform float widthScale;\nuniform float widthMinPixels;\nuniform float widthMaxPixels;\nuniform float jointType;\nuniform float miterLimit;\n\nuniform float opacity;\n\nvarying vec4 vColor;\nvarying vec2 vCornerOffset;\nvarying float vMiterLength;\nvarying vec2 vDashArray;\nvarying float vPathPosition;\nvarying float vPathLength;\n\nconst float EPSILON = 0.001;\nconst float PIXEL_EPSILON = 0.1;\n\nfloat flipIfTrue(bool flag) {\n  return -(float(flag) * 2. - 1.);\n}\n\n// calculate line join positions\nvec3 lineJoin(\n  vec3 prevPoint, vec3 currPoint, vec3 nextPoint,\n  float relativePosition, bool isEnd, bool isJoint,\n  float width\n) {\n  vec2 deltaA = currPoint.xy - prevPoint.xy;\n  vec2 deltaB = nextPoint.xy - currPoint.xy;\n\n  float lenA = length(deltaA);\n  float lenB = length(deltaB);\n\n  // when two points are closer than PIXEL_EPSILON in pixels,\n  // assume they are the same point to avoid precision issue\n  lenA = lenA > PIXEL_EPSILON ? lenA : 0.0;\n  lenB = lenB > PIXEL_EPSILON ? lenB : 0.0;\n\n  vec2 dirA = lenA > 0. ? normalize(deltaA) : vec2(0.0, 0.0);\n  vec2 dirB = lenB > 0. ? normalize(deltaB) : vec2(0.0, 0.0);\n\n  vec2 perpA = vec2(-dirA.y, dirA.x);\n  vec2 perpB = vec2(-dirB.y, dirB.x);\n\n  // tangent of the corner\n  vec2 tangent = vec2(dirA + dirB);\n  tangent = length(tangent) > 0. ? normalize(tangent) : perpA;\n  // direction of the corner\n  vec2 miterVec = vec2(-tangent.y, tangent.x);\n  // width offset from current position\n  vec2 perp = isEnd ? perpA : perpB;\n  float L = isEnd ? lenA : lenB;\n\n  // cap super sharp angles\n  float sinHalfA = abs(dot(miterVec, perp));\n  float cosHalfA = abs(dot(dirA, miterVec));\n\n  bool turnsRight = dirA.x * dirB.y > dirA.y * dirB.x;\n\n  float offsetScale = 1.0 / max(sinHalfA, EPSILON);\n\n  float cornerPosition = isJoint ?\n    0.0 :\n    flipIfTrue(turnsRight == (relativePosition > 0.0));\n\n  // do not bevel if line segment is too short\n  cornerPosition *=\n    float(cornerPosition <= 0.0 || sinHalfA < min(lenA, lenB) / width * cosHalfA);\n\n  // trim if inside corner extends further than the line segment\n  if (cornerPosition < 0.0) {\n    offsetScale = min(offsetScale, L / width / max(cosHalfA, EPSILON));\n  }\n\n  vMiterLength = cornerPosition >= 0.0 ?\n    mix(offsetScale, 0.0, cornerPosition) :\n    offsetScale * cornerPosition;\n  vMiterLength -= sinHalfA * jointType;\n\n  float offsetDirection = mix(\n    positions.y,\n    mix(\n      flipIfTrue(turnsRight),\n      positions.y * flipIfTrue(turnsRight == (positions.x == 1.)),\n      cornerPosition\n    ),\n    step(0.0, cornerPosition)\n  );\n\n  vec2 offsetVec = mix(miterVec, -tangent, step(0.5, cornerPosition));\n  offsetScale = mix(offsetScale, 1.0 / max(cosHalfA, 0.001), step(0.5, cornerPosition));\n\n  // special treatment for start cap and end cap\n  // TODO - This has an issue. len is always positive because it is length.\n  // Step returns zero if -lenA<0, so practically this is a comparison of\n  // lenA with zero, with lots of problems because of the -lenA. Can we use EPSILON?\n  bool isStartCap = step(0.0, -lenA) > 0.5;\n  bool isEndCap = step(0.0, -lenB) > 0.5;\n  bool isCap = isStartCap || isEndCap;\n\n  // 0: center, 1: side\n  cornerPosition = isCap ? (1.0 - positions.z) : 0.;\n\n  // start of path: use next - curr\n  if (isStartCap) {\n    offsetVec = mix(dirB, perpB, cornerPosition);\n  }\n\n  // end of path: use curr - prev\n  if (isEndCap) {\n    offsetVec = mix(dirA, perpA, cornerPosition);\n  }\n\n  // extend out a triangle to envelope the round cap\n  if (isCap) {\n    offsetScale = mix(4.0 * jointType, 1.0, cornerPosition);\n    vMiterLength = 1.0 - cornerPosition;\n    offsetDirection = mix(flipIfTrue(isStartCap), positions.y, cornerPosition);\n  }\n\n  vCornerOffset = offsetVec * offsetDirection * offsetScale;\n\n  // Generate variables for dash calculation\n  vDashArray = instanceDashArrays;\n  vPathLength = L / width;\n  // vec2 offsetFromStartOfPath = isEnd ? vCornerOffset + deltaA / width : vCornerOffset;\n  vec2 offsetFromStartOfPath = vCornerOffset;\n  if (isEnd) {\n    offsetFromStartOfPath += deltaA / width;\n  }\n  vec2 dir = isEnd ? dirA : dirB;\n  vPathPosition = dot(offsetFromStartOfPath, dir);\n\n  return currPoint + vec3(vCornerOffset * width, 0.0);\n}\n\n// calculate line join positions\n// extract params from attributes and uniforms\nvec3 lineJoin(vec3 prevPoint, vec3 currPoint, vec3 nextPoint) {\n\n  // relative position to the corner:\n  // -1: inside (smaller side of the angle)\n  // 0: center\n  // 1: outside (bigger side of the angle)\n\n  float relativePosition = positions.y;\n  bool isEnd = positions.x > EPSILON;\n  bool isJoint = positions.z > EPSILON;\n\n  float width = clamp(project_scale(instanceStrokeWidths * widthScale),\n    widthMinPixels, widthMaxPixels) / 2.0;\n\n  return lineJoin(\n    prevPoint, currPoint, nextPoint,\n    relativePosition, isEnd, isJoint,\n    width\n  );\n}\n\nvoid main() {\n  vColor = vec4(instanceColors.rgb, instanceColors.a * opacity) / 255.;\n\n  // Set color to be rendered to picking fbo (also used to check for selection highlight).\n  picking_setPickingColor(instancePickingColors);\n\n  float isEnd = positions.x;\n\n  vec3 prevPosition = mix(-instanceLeftDeltas, vec3(0.0), isEnd) + instanceStartPositions;\n  prevPosition = project_position(prevPosition);\n\n  vec3 currPosition = mix(instanceStartPositions, instanceEndPositions, isEnd);\n  currPosition = project_position(currPosition);\n\n  vec3 nextPosition = mix(vec3(0.0), instanceRightDeltas, isEnd) + instanceEndPositions;\n  nextPosition = project_position(nextPosition);\n\n  vec3 pos = lineJoin(prevPosition, currPosition, nextPosition);\n\n  gl_Position = project_to_clipspace(vec4(pos, 1.0));\n}\n"},function(e,t,n){"use strict";t.a="\n#define SHADER_NAME path-layer-vertex-shader\n\nattribute vec3 positions;\n\nattribute vec3 instanceStartPositions;\nattribute vec3 instanceEndPositions;\nattribute vec4 instanceStartEndPositions64xyLow;\nattribute vec3 instanceLeftDeltas;\nattribute vec3 instanceRightDeltas;\nattribute float instanceStrokeWidths;\nattribute vec4 instanceColors;\nattribute vec3 instancePickingColors;\nattribute vec2 instanceDashArrays;\n\nuniform float widthScale;\nuniform float widthMinPixels;\nuniform float widthMaxPixels;\nuniform float jointType;\nuniform float miterLimit;\n\nuniform float opacity;\n\nvarying vec4 vColor;\nvarying vec2 vCornerOffset;\nvarying float vMiterLength;\nvarying vec2 vDashArray;\nvarying float vPathPosition;\nvarying float vPathLength;\n\nconst float EPSILON = 0.001;\nconst float PIXEL_EPSILON = 0.1;\n\nfloat flipIfTrue(bool flag) {\n  return -(float(flag) * 2. - 1.);\n}\n\nvec3 lineJoin(vec2 prevPoint64[2], vec2 currPoint64[2], vec2 nextPoint64[2]) {\n\n  float width = clamp(project_scale(instanceStrokeWidths * widthScale),\n    widthMinPixels, widthMaxPixels) / 2.0;\n\n  vec2 deltaA64[2];\n  vec2 deltaB64[2];\n\n  vec2_sub_fp64(currPoint64, prevPoint64, deltaA64);\n  vec2_sub_fp64(nextPoint64, currPoint64, deltaB64);\n\n  vec2 lengthA64 = vec2_length_fp64(deltaA64);\n  vec2 lengthB64 = vec2_length_fp64(deltaB64);\n\n  vec2 deltaA = vec2(deltaA64[0].x, deltaA64[1].x);\n  vec2 deltaB = vec2(deltaB64[0].x, deltaB64[1].x);\n\n  float lenA = lengthA64.x;\n  float lenB = lengthB64.x;\n\n  vec2 offsetVec;\n  float offsetScale;\n  float offsetDirection;\n\n  // when two points are closer than PIXEL_EPSILON in pixels,\n  // assume they are the same point to avoid precision issue\n  lenA = lenA > PIXEL_EPSILON ? lenA : 0.0;\n  lenB = lenB > PIXEL_EPSILON ? lenB : 0.0;\n  vec2 dirA = lenA > 0. ? deltaA / lenA : vec2(0.0, 0.0);\n  vec2 dirB = lenB > 0. ? deltaB / lenB : vec2(0.0, 0.0);\n\n  vec2 perpA = vec2(-dirA.y, dirA.x);\n  vec2 perpB = vec2(-dirB.y, dirB.x);\n\n  // tangent of the corner\n  vec2 tangent = vec2(dirA + dirB);\n  tangent = length(tangent) > 0. ? normalize(tangent) : perpA;\n  // direction of the corner\n  vec2 miterVec = vec2(-tangent.y, tangent.x);\n  // width offset from current position\n  vec2 perp = mix(perpB, perpA, positions.x);\n  float L = mix(lenB, lenA, positions.x);\n\n  // cap super sharp angles\n  float sinHalfA = abs(dot(miterVec, perp));\n  float cosHalfA = abs(dot(dirA, miterVec));\n  bool turnsRight = dirA.x * dirB.y > dirA.y * dirB.x;\n\n  // relative position to the corner:\n  // -1: inside (smaller side of the angle)\n  // 0: center\n  // 1: outside (bigger side of the angle)\n  float cornerPosition = mix(\n    flipIfTrue(turnsRight == (positions.y > 0.0)),\n    0.0,\n    positions.z\n  );\n\n  offsetScale = 1.0 / max(sinHalfA, EPSILON);\n\n  // do not bevel if line segment is too short\n  cornerPosition *= float(cornerPosition <= 0.0 || sinHalfA < min(lenA, lenB) / width * cosHalfA);\n  // trim if inside corner extends further than the line segment\n  offsetScale = mix(\n    offsetScale,\n    min(offsetScale, L / width / max(cosHalfA, EPSILON)),\n    float(cornerPosition < 0.0)\n  );\n\n  vMiterLength = mix(\n    offsetScale * cornerPosition,\n    mix(offsetScale, 0.0, cornerPosition),\n    step(0.0, cornerPosition)\n  ) - sinHalfA * jointType;\n  offsetDirection = mix(\n    positions.y,\n    mix(\n      flipIfTrue(turnsRight),\n      positions.y * flipIfTrue(turnsRight == (positions.x == 1.)),\n      cornerPosition\n    ),\n    step(0.0, cornerPosition)\n  );\n  offsetVec = mix(miterVec, -tangent, step(0.5, cornerPosition));\n  offsetScale = mix(offsetScale, 1.0 / max(cosHalfA, 0.001), step(0.5, cornerPosition));\n\n  // special treatment for start cap and end cap\n  // using a small number as the limit for determining if the lenA or lenB is 0\n  float isStartCap = step(lenA, 1.0e-5);\n  float isEndCap = step(lenB, 1.0e-5);\n  float isCap = max(isStartCap, isEndCap);\n\n  // 0: center, 1: side\n  cornerPosition = isCap * (1.0 - positions.z);\n\n  // start of path: use next - curr\n  offsetVec = mix(offsetVec, mix(dirB, perpB, cornerPosition), isStartCap);\n  // end of path: use curr - prev\n  offsetVec = mix(offsetVec, mix(dirA, perpA, cornerPosition), isEndCap);\n\n  // extend out a triangle to envelope the round cap\n  offsetScale = mix(\n    offsetScale,\n    mix(4.0 * jointType, 1.0, cornerPosition),\n    isCap\n  );\n  vMiterLength = mix(vMiterLength, 1.0 - cornerPosition, isCap);\n\n  offsetDirection = mix(\n    offsetDirection,\n    mix(flipIfTrue(isStartCap > 0.), positions.y, cornerPosition),\n    isCap\n  );\n\n  vCornerOffset = offsetVec * offsetDirection * offsetScale;\n\n  // Generate variables for dash calculation\n  vDashArray = instanceDashArrays;\n  vPathLength = L / width;\n  float isEnd = positions.x;\n  vec2 offsetFromStartOfPath = mix(vCornerOffset, vCornerOffset + deltaA / width, isEnd);\n  vec2 dir = mix(dirB, dirA, isEnd);\n  vPathPosition = dot(offsetFromStartOfPath, dir);\n\n  return vec3(vCornerOffset * width, 0.0);\n}\n\nvoid main() {\n  vColor = vec4(instanceColors.rgb, instanceColors.a * opacity) / 255.;\n\n  // Set color to be rendered to picking fbo (also used to check for selection highlight).\n  picking_setPickingColor(instancePickingColors);\n\n  float isEnd = positions.x;\n\n  // Calculate current position\n  vec3 currPosition = mix(instanceStartPositions, instanceEndPositions, isEnd);\n  currPosition = project_position(currPosition);\n\n  // Calculate current position 64bit\n\n  vec2 instanceStartPositions64[2];\n  instanceStartPositions64[0] = vec2(instanceStartPositions.x, instanceStartEndPositions64xyLow.x);\n  instanceStartPositions64[1] = vec2(instanceStartPositions.y, instanceStartEndPositions64xyLow.y);\n\n  vec2 instanceEndPositions64[2];\n  instanceEndPositions64[0] = vec2(instanceEndPositions.x, instanceStartEndPositions64xyLow.z);\n  instanceEndPositions64[1] = vec2(instanceEndPositions.y, instanceStartEndPositions64xyLow.w);\n\n  vec2 tempCurrPosition64[2];\n  vec2_mix_fp64(instanceStartPositions64, instanceEndPositions64, isEnd, tempCurrPosition64);\n\n  vec4 currPosition64 = vec4(tempCurrPosition64[0].xy, tempCurrPosition64[1].xy);\n\n  vec2 projected_curr_position[2];\n  project_position_fp64(currPosition64, projected_curr_position);\n  float projected_curr_position_z = project_scale(currPosition.z);\n\n  // Calculate previous position\n\n  vec3 prevPosition = mix(-instanceLeftDeltas, vec3(0.0), isEnd);\n\n  // Calculate prev position 64bit\n\n  vec2 tempPrevPosition64[2];\n  tempPrevPosition64[0] = sum_fp64(vec2(prevPosition.x, 0.0), instanceStartPositions64[0]);\n  tempPrevPosition64[1] = sum_fp64(vec2(prevPosition.y, 0.0), instanceStartPositions64[1]);\n\n  vec4 prevPosition64 = vec4(tempPrevPosition64[0].xy, tempPrevPosition64[1].xy);\n\n  vec2 projected_prev_position[2];\n  project_position_fp64(prevPosition64, projected_prev_position);\n\n  // Calculate next positions\n  vec3 nextPosition = mix(vec3(0.0), instanceRightDeltas, isEnd);\n\n  // Calculate next position 64bit\n\n  vec2 tempNextPosition64[2];\n  tempNextPosition64[0] = sum_fp64(vec2(nextPosition.x, 0.0), instanceEndPositions64[0]);\n  tempNextPosition64[1] = sum_fp64(vec2(nextPosition.y, 0.0), instanceEndPositions64[1]);\n\n  vec4 nextPosition64 = vec4(tempNextPosition64[0].xy, tempNextPosition64[1].xy);\n\n  vec2 projected_next_position[2];\n  project_position_fp64(nextPosition64, projected_next_position);\n\n  vec3 pos = lineJoin(projected_prev_position, projected_curr_position, projected_next_position);\n  vec2 vertex_pos_modelspace[4];\n\n  vertex_pos_modelspace[0] = sum_fp64(vec2(pos.x, 0.0), projected_curr_position[0]);\n  vertex_pos_modelspace[1] = sum_fp64(vec2(pos.y, 0.0), projected_curr_position[1]);\n  vertex_pos_modelspace[2] = vec2(pos.z + projected_curr_position_z, 0.0);\n  vertex_pos_modelspace[3] = vec2(1.0, 0.0);\n\n  gl_Position = project_to_clipspace_fp64(vertex_pos_modelspace);\n}\n"},function(e,t,n){"use strict";t.a="#define SHADER_NAME path-layer-fragment-shader\n\n#ifdef GL_ES\nprecision highp float;\n#endif\n\nuniform float jointType;\nuniform float miterLimit;\nuniform float alignMode;\n\nvarying vec4 vColor;\nvarying vec2 vCornerOffset;\nvarying float vMiterLength;\nvarying vec2 vDashArray;\nvarying float vPathPosition;\nvarying float vPathLength;\n\n// mod doesn't work correctly for negative numbers\nfloat mod2(float a, float b) {\n  return a - floor(a / b) * b;\n}\n\nfloat round(float x) {\n  return floor(x + 0.5);\n}\n\n// if given position is in the gap part of the dashed line\n// dashArray.x: solid stroke length, relative to width\n// dashArray.y: gap length, relative to width\n// alignMode:\n// 0 - no adjustment\n// o----     ----     ----     ---- o----     -o----     ----     o\n// 1 - stretch to fit, draw half dash at each end for nicer joints\n// o--    ----    ----    ----    --o--      --o--     ----     --o\nbool dash_isFragInGap() {\n  float solidLength = vDashArray.x;\n  float gapLength = vDashArray.y;\n\n  float unitLength = solidLength + gapLength;\n\n  if (unitLength == 0.0) {\n    return false;\n  }\n\n  unitLength = mix(\n    unitLength,\n    vPathLength / round(vPathLength / unitLength),\n    alignMode\n  );\n\n  float offset = alignMode * solidLength / 2.0;\n\n  return gapLength > 0.0 &&\n    vPathPosition >= 0.0 &&\n    vPathPosition <= vPathLength &&\n    mod2(vPathPosition + offset, unitLength) > solidLength;\n}\n\nvoid main(void) {\n  // if joint is rounded, test distance from the corner\n  if (jointType > 0.0 && vMiterLength > 0.0 && length(vCornerOffset) > 1.0) {\n    // Enable to debug joints\n    // gl_FragColor = vec4(0., 1., 0., 1.);\n    // return;\n    discard;\n  }\n  if (jointType == 0.0 && vMiterLength > miterLimit) {\n    // Enable to debug joints\n    // gl_FragColor = vec4(0., 0., 1., 1.);\n    // return;\n    discard;\n  }\n  if (vColor.a == 0.0 || dash_isFragInGap()) {\n    // Enable to debug joints\n    // gl_FragColor = vec4(0., 1., 1., 1.);\n    // return;\n    discard;\n  }\n  gl_FragColor = vColor;\n\n  // use highlight color if this fragment belongs to the selected object.\n  gl_FragColor = picking_filterHighlightColor(gl_FragColor);\n\n  // use picking color if rendering to picking FBO.\n  gl_FragColor = picking_filterPickingColor(gl_FragColor);\n}\n"},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(3),s=n(287),u=n(149),l=n(150),c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),f=a.d.get,h=[0,0,0,255],p=[0,0,0,255],d={stroked:!0,filled:!0,extruded:!1,elevationScale:1,wireframe:!1,lineWidthScale:1,lineWidthMinPixels:0,lineWidthMaxPixels:Number.MAX_SAFE_INTEGER,lineJointRounded:!1,lineMiterLimit:4,lineDashJustified:!1,fp64:!1,getPolygon:function(e){return f(e,"polygon")},getFillColor:function(e){return f(e,"fillColor")||p},getLineColor:function(e){return f(e,"lineColor")||h},getLineWidth:function(e){return f(e,"lineWidth")||1},getLineDashArray:null,getElevation:function(e){return f(e,"elevation")||1e3},lightSettings:{lightsPosition:[-122.45,37.75,8e3,-122,38,5e3],ambientRatio:.05,diffuseRatio:.6,specularRatio:.8,lightsStrength:[2,0,0,0],numberOfLights:2}},v=function(e){function t(){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),c(t,[{key:"initializeState",value:function(){this.state={paths:[]}}},{key:"updateState",value:function(e){var t=this,n=(e.oldProps,e.props,e.changeFlags);if(n.dataChanged||n.updateTriggersChanged&&(n.updateTriggersChanged.all||n.updateTriggersChanged.getPolygon)){var r=this.props,i=r.data,o=r.getPolygon;this.state.paths=[],i.forEach(function(e){l.d(o(e)).forEach(function(n){return t.state.paths.push({path:n,object:e})})})}}},{key:"getPickingInfo",value:function(e){var t=e.info;return Object.assign(t,{object:t.object&&t.object.object||t.object})}},{key:"renderLayers",value:function(){var e=this.props,t=e.data,n=e.stroked,r=e.filled,i=e.extruded,o=e.wireframe,a=e.elevationScale,l=this.props,c=l.lineWidthScale,f=l.lineWidthMinPixels,h=l.lineWidthMaxPixels,p=l.lineJointRounded,d=l.lineMiterLimit,v=l.lineDashJustified,g=l.fp64,y=this.props,m=y.getFillColor,_=y.getLineColor,b=y.getLineWidth,E=y.getLineDashArray,x=y.getElevation,w=y.getPolygon,T=y.updateTriggers,S=y.lightSettings,A=this.state.paths,C=t&&t.length>0,O=r&&C&&new s.a(this.getSubLayerProps({id:"fill",data:t,extruded:i,elevationScale:a,fp64:g,wireframe:!1,getPolygon:w,getElevation:x,getColor:m,updateTriggers:{getElevation:T.getElevation,getColor:T.getFillColor},lightSettings:S})),k=i&&o&&C&&new s.a(this.getSubLayerProps({id:"wireframe",data:t,fp64:g,extruded:!0,elevationScale:a,wireframe:!0,getPolygon:w,getElevation:x,getColor:_,updateTriggers:{getElevation:T.getElevation,getColor:T.getLineColor}})),P=!i&&n&&C&&new u.a(this.getSubLayerProps({id:"stroke",data:A,fp64:g,widthScale:c,widthMinPixels:f,widthMaxPixels:h,rounded:p,miterLimit:d,dashJustified:v,getPath:function(e){return e.path},getColor:function(e){return _(e.object)},getWidth:function(e){return b(e.object)},getDashArray:E&&function(e){return E(e.object)},updateTriggers:{getWidth:T.getLineWidth,getColor:T.getLineColor,getDashArray:T.getLineDashArray}}));return[!i&&O,k,P,i&&O]}}]),t}(a.b);v.layerName="PolygonLayer",v.defaultProps=d},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e){return[(e+1)%256,Math.floor((e+1)/256)%256,Math.floor((e+1)/256/256)%256]}function o(e){return e.reduce(function(e,t){return e+v.c(t)},0)}function a(e){return e.reduce(function(e,t){return e+v.b(t)},0)}function s(e){var t=new Array(e.length+1);t[0]=0;var n=0;return e.forEach(function(e,r){n+=v.c(e),t[r+1]=n}),t}function u(e){var t=null;if(e.length>1){var n=0;t=[],e.forEach(function(e){n+=e.length,t.push(n)}),t.pop()}return t}function l(e){var t=e.polygons,n=e.IndexType,r=void 0===n?Uint32Array:n,i=3*a(t),o=s(t);if(r===Uint16Array&&i>65535)throw new Error("Vertex count exceeds browser's limit");var u=new r(i),l=0;return t.forEach(function(e,t){var n=!0,r=!1,i=void 0;try{for(var a,s=c(e)[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var f=a.value;u[l++]=f+o[t]}}catch(e){r=!0,i=e}finally{try{!n&&s.return&&s.return()}finally{if(r)throw i}}}),u}function c(e){var t=u(e),n=E(e);return y()(n,t,3)}function f(e){var t=e.polygons,n=e.pointCount,r=e.fp64,i=new Float32Array(3*n),o=void 0;r&&(o=new Float32Array(2*n));var a=0,s=0,u=!0,l=!1,c=void 0;try{for(var f,h=t[Symbol.iterator]();!(u=(f=h.next()).done);u=!0){var p=f.value;v.a(p,function(e){var t=e[0],n=e[1],u=e[2]||0;i[a++]=t,i[a++]=n,i[a++]=u,r&&(o[s++]=b(t),o[s++]=b(n))})}}catch(e){l=!0,c=e}finally{try{!u&&h.return&&h.return()}finally{if(l)throw c}}return{positions:i,positions64xyLow:o}}function h(e){var t=(e.polygons,e.pointCount);return new Float32Array(3*t)}function p(e){var t=e.polygons,n=e.pointCount,r=e.getColor,i=new Uint8ClampedArray(4*n),o=0;return t.forEach(function(e,t){var n=r(t);n[3]=Number.isFinite(n[3])?n[3]:255;var a=v.c(e);x({target:i,source:n,start:o,count:a}),o+=n.length*a}),i}function d(e){var t=e.polygons,n=e.pointCount,r=new Uint8ClampedArray(3*n),o=0;return t.forEach(function(e,t){var n=i(t),a=v.c(e);x({target:r,source:n,start:o,count:a}),o+=n.length*a}),r}n.d(t,"a",function(){return T});var v=n(150),g=n(288),y=n.n(g),m=n(3),_=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),b=m.d.fp64LowPart,E=m.d.flattenVertices,x=m.d.fillArray,w=[0,0,0,255],T=function(){function e(t){var n=t.polygons,i=t.fp64,a=void 0!==i&&i;r(this,e),this.polygons=n.map(function(e){return v.d(e)}),this.pointCount=o(this.polygons),this.fp64=a}return _(e,[{key:"indices",value:function(){return l({polygons:this.polygons,indexCount:this.indexCount})}},{key:"positions",value:function(){return f({polygons:this.polygons,pointCount:this.pointCount,fp64:this.fp64})}},{key:"normals",value:function(){return h({polygons:this.polygons,pointCount:this.pointCount})}},{key:"colors",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.getColor,n=void 0===t?function(e){return w}:t;return p({polygons:this.polygons,pointCount:this.pointCount,getColor:n})}},{key:"pickingColors",value:function(){return d({polygons:this.polygons,pointCount:this.pointCount})}}]),e}()},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e){return[e+1&255,e+1>>8&255,e+1>>8>>8&255]}function o(e,t){for(var n=t.length,r=e.length,i=0;i<n;i++)e[r++]=t[i];return e}function a(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return t>1?e.forEach(function(e){return a(e,t-1,n)}):o(n,e),n}function s(e){return e.reduce(function(e,t){return e+_.c(t)},0)}function u(e){var t=e.groupedVertices,n=e.wireframe,r=void 0!==n&&n,i=r?2:5,o=[];t.reduce(function(e,t){return o.push(e),e+_.c(t)*i},0);var s=t.map(function(e,t){return r?v(e,o[t]):y(e,o[t])});return new Uint32Array(a(s,2))}function l(e){var t=e.groupedVertices,n=e.pointCount,r=e.wireframe,i=void 0!==r&&r,o=i?2:5,s=new Float32Array(3*n*o),u=0;return t.forEach(function(e){for(var t=a(e,3),n=t.slice(0),r=t.length-1;r>0;)n[r]=0,r-=3;var l=t.length;i?(S({target:s,source:t,start:u}),S({target:s,source:n,start:u+l})):(S({target:s,source:t,start:u,count:3}),S({target:s,source:n,start:u+3*l,count:2})),u+=l*o}),s}function c(e,t){var n=void 0;if(t){var r=e.length/3;n=new Float32Array(2*r);for(var i=0;i<r;i++)n[2*i+0]=T(e[3*i+0]),n[2*i+1]=T(e[3*i+1])}return{positions:e,positions64xyLow:n}}function f(e){var t=e.groupedVertices,n=e.pointCount,r=e.wireframe,i=[0,0,1],a=r?2:5,s=new Float32Array(3*n*a),u=0;return r?S({target:s,source:i,count:n*a}):(t.map(function(e,t){var n=_.c(e);S({target:s,source:i,start:u,count:n}),u+=3*n;var r=[],a=[];e.forEach(function(e){var t=h(e),n=t.slice(0,3);o(r,t),o(r,n),o(a,n),o(a,t)}),S({target:s,start:u,count:2,source:r.concat(a)}),u+=3*n*4}),s)}function h(e){var t=[],n=null,r=!0,i=!1,a=void 0;try{for(var s,u=e[Symbol.iterator]();!(r=(s=u.next()).done);r=!0){var l=s.value;if(n){o(t,m(n,l))}n=l}}catch(e){i=!0,a=e}finally{try{!r&&u.return&&u.return()}finally{if(i)throw a}}return t}function p(e){var t=e.groupedVertices,n=e.pointCount,r=e.getColor,i=e.wireframe,o=void 0!==i&&i,a=o?2:5,s=new Uint8ClampedArray(4*n*a),u=0;return t.forEach(function(e,t){var n=r(t);n[3]=Number.isFinite(n[3])?n[3]:255;var i=_.c(e);S({target:s,source:n,start:u,count:i*a}),u+=n.length*i*a}),s}function d(e){var t=e.groupedVertices,n=e.pointCount,r=e.wireframe,o=void 0!==r&&r,a=o?2:5,s=new Uint8ClampedArray(3*n*a),u=0;return t.forEach(function(e,t){var n=_.c(e),r=i(t);S({target:s,source:r,start:u,count:n*a}),u+=r.length*n*a}),s}function v(e,t){var n=_.c(e),r=[];return e.forEach(function(e){r.push(t);for(var i=e.length,o=1;o<i-1;o++)r.push(o+t,o+t);r.push(t);for(var a=0;a<i-1;a++)r.push(a+t,a+n+t);t+=i}),r}function g(e,t,n){e.push(t+n,t+3*n,t+2*n+1,t+2*n+1,t+3*n,t+4*n+1)}function y(e,t){var n=_.c(e),r=null,i=e.length-1;if(i){r=[];for(var o=0,s=0;s<i;s++)o+=e[s].length,r[s]=o}var u=x()(a(e,3),r,3).map(function(e){return e+t});return e.forEach(function(e){for(var r=e.length,i=0;i<r-1;i++)g(u,t+i,n);t+=r}),u}function m(e,t){return[e[1]-t[1],t[0]-e[0],0]}n.d(t,"a",function(){return C});var _=n(150),b=n(3),E=n(288),x=n.n(E),w=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),T=b.d.fp64LowPart,S=b.d.fillArray,A=[0,0,0,255],C=function(){function e(t){var n=t.polygons,i=t.getHeight,o=void 0===i?function(e){return 1e3}:i,a=(t.getColor,t.wireframe),h=void 0!==a&&a,p=t.fp64,v=void 0!==p&&p;r(this,e),this.fp64=v,n=n.map(function(e,t){var n=o(t)||0;return _.d(e).map(function(e){return e.map(function(e){return[e[0],e[1],n]})})});var g=n;this.groupedVertices=n;var y=s(n);this.pointCount=y,this.wireframe=h,this.attributes={};var m=l({groupedVertices:g,pointCount:y,wireframe:h});Object.assign(this.attributes,{positions:c(m,this.fp64),indices:u({groupedVertices:g,wireframe:h}),normals:f({groupedVertices:g,pointCount:y,wireframe:h}),pickingColors:d({groupedVertices:g,pointCount:y,wireframe:h})})}return w(e,[{key:"indices",value:function(){return this.attributes.indices}},{key:"positions",value:function(){return this.attributes.positions}},{key:"normals",value:function(){return this.attributes.normals}},{key:"colors",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.getColor,n=void 0===t?function(e){return A}:t;return p({groupedVertices:this.groupedVertices,pointCount:this.pointCount,wireframe:this.wireframe,getColor:n})}},{key:"pickingColors",value:function(){return this.attributes.pickingColors}}]),e}()},function(e,t,n){"use strict";t.a="#define SHADER_NAME solid-polygon-layer-vertex-shader\n\nattribute vec3 positions;\nattribute vec3 normals;\nattribute vec4 colors;\nattribute vec3 pickingColors;\n\nuniform float extruded;\nuniform float elevationScale;\nuniform float opacity;\n\nvarying vec4 vColor;\n\nvoid main(void) {\n  \n  vec4 position_worldspace = vec4(project_position(\n    vec3(positions.x, positions.y, positions.z * elevationScale)),\n    1.0\n  );\n  gl_Position = project_to_clipspace(position_worldspace);\n\n  float lightWeight = 1.0;\n  \n  if (extruded > 0.5) {\n    // Here, the input parameters should be\n    // position_worldspace.xyz / position_worldspace.w.\n    // However, this calculation generates all zeros on\n    // MacBook Pro with Intel Iris Pro GPUs for unclear reasons.\n    // (see https://github.com/uber/deck.gl/issues/559)\n    // Since the w component is always 1.0 in our shaders,\n    // we decided to just provide xyz component of position_worldspace\n    // to the getLightWeight() function\n    lightWeight = getLightWeight(\n      position_worldspace.xyz,\n      project_normal(normals)\n    );\n  }\n\n  vec3 lightWeightedColor = lightWeight * colors.rgb;\n  vColor = vec4(lightWeightedColor, colors.a * opacity) / 255.0;\n\n  // Set color to be rendered to picking fbo (also used to check for selection highlight).\n  picking_setPickingColor(pickingColors);\n}\n"},function(e,t,n){"use strict";t.a="#define SHADER_NAME solid-polygon-layer-vertex-shader-64\n\nattribute vec3 positions;\nattribute vec2 positions64xyLow;\nattribute vec3 normals;\nattribute vec4 colors;\nattribute vec3 pickingColors;\n\nuniform float extruded;\nuniform float elevationScale;\nuniform float opacity;\n\nvarying vec4 vColor;\n\nvoid main(void) {\n  vec4 positions64xy = vec4(positions.x, positions64xyLow.x, positions.y, positions64xyLow.y);\n\n  vec2 projected_coord_xy[2];\n  project_position_fp64(positions64xy, projected_coord_xy);\n\n  vec2 vertex_pos_modelspace[4];\n  vertex_pos_modelspace[0] = projected_coord_xy[0];\n  vertex_pos_modelspace[1] = projected_coord_xy[1];\n  vertex_pos_modelspace[2] = vec2(project_scale(positions.z * elevationScale), 0.0);\n  vertex_pos_modelspace[3] = vec2(1.0, 0.0);\n\n  gl_Position = project_to_clipspace_fp64(vertex_pos_modelspace);\n\n  vec4 position_worldspace = vec4(\n    vertex_pos_modelspace[0].x, vertex_pos_modelspace[1].x,\n    vertex_pos_modelspace[2].x, vertex_pos_modelspace[3].x);\n\n  float lightWeight = 1.0;\n\n  if (extruded > 0.5) {\n    lightWeight = getLightWeight(\n      position_worldspace.xyz, // the w component is always 1.0\n      project_normal(normals)\n    );\n  }\n\n  vec3 lightWeightedColor = lightWeight * colors.rgb;\n  vColor = vec4(lightWeightedColor, colors.a * opacity) / 255.0;\n\n  // Set color to be rendered to picking fbo (also used to check for selection highlight).\n  picking_setPickingColor(pickingColors);\n}\n"},function(e,t,n){"use strict";t.a="#define SHADER_NAME solid-polygon-layer-fragment-shader\n\n#ifdef GL_ES\nprecision highp float;\n#endif\n\nvarying vec4 vColor;\n\nvoid main(void) {\n  gl_FragColor = vColor;\n\n  // use highlight color if this fragment belongs to the selected object.\n  gl_FragColor = picking_filterHighlightColor(gl_FragColor);\n\n  // use picking color if rendering to picking FBO.\n  gl_FragColor = picking_filterPickingColor(gl_FragColor);\n}\n"},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(3),s=n(284),u=n(149),l=n(287),c=n(523),f=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),h=a.d.get,p=[0,0,0,255],d=[0,0,0,255],v={stroked:!0,filled:!0,extruded:!1,wireframe:!1,lineWidthScale:1,lineWidthMinPixels:0,lineWidthMaxPixels:Number.MAX_SAFE_INTEGER,lineJointRounded:!1,lineMiterLimit:4,elevationScale:1,pointRadiusScale:1,pointRadiusMinPixels:0,pointRadiusMaxPixels:Number.MAX_SAFE_INTEGER,fp64:!1,getLineColor:function(e){return h(e,"properties.lineColor")||p},getFillColor:function(e){return h(e,"properties.fillColor")||d},getRadius:function(e){return h(e,"properties.radius")||h(e,"properties.size")||1},getLineWidth:function(e){return h(e,"properties.lineWidth")||1},getElevation:function(e){return h(e,"properties.elevation")||1e3},subLayers:{PointLayer:s.a,LineLayer:u.a,PolygonLayer:l.a},lightSettings:{lightsPosition:[-122.45,37.75,8e3,-122,38,5e3],ambientRatio:.05,diffuseRatio:.6,specularRatio:.8,lightsStrength:[2,0,0,0],numberOfLights:2}},g=function(e){return h(e,"geometry.coordinates")},y=function(e){function t(){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),f(t,[{key:"initializeState",value:function(){this.state={features:{}}}},{key:"updateState",value:function(e){e.oldProps,e.props;if(e.changeFlags.dataChanged){var t=this.props.data,n=Object(c.a)(t);this.state.features=Object(c.b)(n)}}},{key:"getPickingInfo",value:function(e){var t=e.info;return Object.assign(t,{object:t.object&&t.object.feature||t.object})}},{key:"renderLayers",value:function(){var e=this.state.features,t=e.pointFeatures,n=e.lineFeatures,r=e.polygonFeatures,i=e.polygonOutlineFeatures,o=this.props,a=o.stroked,s=o.filled,u=o.extruded,l=o.wireframe,c=o.subLayers,f=o.lightSettings,h=this.props,p=h.lineWidthScale,d=h.lineWidthMinPixels,v=h.lineWidthMaxPixels,y=h.lineJointRounded,m=h.lineMiterLimit,_=h.pointRadiusScale,b=h.pointRadiusMinPixels,E=h.pointRadiusMaxPixels,x=h.elevationScale,w=h.fp64,T=this.props,S=T.getLineColor,A=T.getFillColor,C=T.getRadius,O=T.getLineWidth,k=T.getElevation,P=T.updateTriggers,R=t&&t.length>0,I=n&&n.length>0,N=i&&i.length>0,M=r&&r.length>0,L=s&&M&&new c.PolygonLayer(this.getSubLayerProps({id:"polygon-fill",data:r,fp64:w,extruded:u,elevationScale:x,wireframe:!1,lightSettings:f,getPolygon:g,getElevation:k,getColor:A,updateTriggers:{getElevation:P.getElevation,getColor:P.getFillColor}})),D=l&&u&&M&&new c.PolygonLayer(this.getSubLayerProps({id:"polygon-wireframe",data:r,fp64:w,extruded:u,elevationScale:x,wireframe:!0,getPolygon:g,getElevation:k,getColor:S,updateTriggers:{getElevation:P.getElevation,getColor:P.getLineColor}})),F=!u&&a&&N&&new c.LineLayer(this.getSubLayerProps({id:"polygon-outline",data:i,fp64:w,widthScale:p,widthMinPixels:d,widthMaxPixels:v,rounded:y,miterLimit:m,getPath:g,getColor:S,getWidth:O,updateTriggers:{getColor:P.getLineColor,getWidth:P.getLineWidth}})),j=I&&new c.LineLayer(this.getSubLayerProps({id:"line-paths",data:n,fp64:w,widthScale:p,widthMinPixels:d,widthMaxPixels:v,rounded:y,miterLimit:m,getPath:g,getColor:S,getWidth:O,updateTriggers:{getColor:P.getLineColor,getWidth:P.getLineWidth}})),B=R&&new c.PointLayer(this.getSubLayerProps({id:"points",data:t,fp64:w,radiusScale:_,radiusMinPixels:b,radiusMaxPixels:E,getPosition:g,getColor:A,getRadius:C,updateTriggers:{getColor:P.getFillColor,getRadius:P.getRadius}}));return[!u&&L,D,F,j,B,u&&L]}}]),t}(a.b);y.layerName="GeoJsonLayer",y.defaultProps=v},function(e,t,n){"use strict";function r(e){if(Array.isArray(e))return e;switch(a(e,"type")){case"Point":case"MultiPoint":case"LineString":case"MultiLineString":case"Polygon":case"MultiPolygon":case"GeometryCollection":return[{type:"Feature",properties:{},geometry:e}];case"Feature":return[e];case"FeatureCollection":return a(e,"features");default:throw new Error("Unknown geojson type")}}function i(e){var t=[],n=[],r=[],i=[];return e.forEach(function(e){var o=a(e,"geometry.type"),s=a(e,"geometry.coordinates"),u=a(e,"properties");switch(o){case"Point":t.push(e);break;case"MultiPoint":s.forEach(function(n){t.push({geometry:{coordinates:n},properties:u,feature:e})});break;case"LineString":n.push(e);break;case"MultiLineString":s.forEach(function(t){n.push({geometry:{coordinates:t},properties:u,feature:e})});break;case"Polygon":r.push(e),s.forEach(function(t){i.push({geometry:{coordinates:t},properties:u,feature:e})});break;case"MultiPolygon":s.forEach(function(t){r.push({geometry:{coordinates:t},properties:u,feature:e}),t.forEach(function(t){i.push({geometry:{coordinates:t},properties:u,feature:e})})});break;case"GeometryCollection":default:throw new Error("GeoJsonLayer: "+o+" not supported.")}}),{pointFeatures:t,lineFeatures:n,polygonFeatures:r,polygonOutlineFeatures:i}}t.a=r,t.b=i;var o=n(3),a=o.d.get},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(4),s=n(148),u=n(65),l=n(525),c=n(526),f=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),h=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.5,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.5;r(this,t);var o=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return o.reflectivity=e,o.blur=n,o.framebuffer=null,o.setNeedsRedraw(),o}return o(t,e),f(t,[{key:"getShaders",value:function(){return{vs:l.a,fs:c.a,modules:[],shaderCache:this.context.shaderCache}}},{key:"initialize",value:function(e){var t=e.gl;e.layerManager;this.unitQuad=new a.g(t,Object.assign({},this.getShaders(),{id:"reflection-effect",geometry:new a.f({drawMode:a.e.TRIANGLE_FAN,vertices:new Float32Array([0,0,0,1,0,0,1,1,0,0,1,0])})})),this.framebuffer=new a.d(t,{depth:!0})}},{key:"preDraw",value:function(e){var t=e.gl,n=e.layerManager,r=n.context.viewport,i="undefined"!==typeof window&&window.devicePixelRatio||1;this.framebuffer.resize({width:i*r.width,height:i*r.height});var o=r.pitch;this.framebuffer.bind(),n.setViewport(new u.a(Object.assign({},r,{pitch:-180-o}))),t.clear(a.e.COLOR_BUFFER_BIT|a.e.DEPTH_BUFFER_BIT),n.drawLayers({pass:"reflection"}),n.setViewport(r),this.framebuffer.unbind()}},{key:"draw",value:function(e){e.gl,e.layerManager;this.unitQuad.render({reflectionTexture:this.framebuffer.texture,reflectionTextureWidth:this.framebuffer.width,reflectionTextureHeight:this.framebuffer.height,reflectivity:this.reflectivity,blur:this.blur})}},{key:"finalize",value:function(e){e.gl,e.layerManager}}]),t}(s.a);t.a=h},function(e,t,n){"use strict";t.a="#define SHADER_NAME reflection-effect-vs\n\nattribute vec3 vertices;\n\nvarying vec2 uv;\n\nvoid main(void) {\n  uv = vertices.xy;\n  gl_Position = vec4(2. * vertices.xy - vec2(1., 1.), 1., 1.);\n}\n"},function(e,t,n){"use strict";t.a='#define SHADER_NAME reflection-effect-fs\n\n#ifdef GL_ES\nprecision highp float;\n#endif\n\nuniform sampler2D reflectionTexture;\nuniform int reflectionTextureWidth;\nuniform int reflectionTextureHeight;\n\nuniform float reflectivity;\nuniform float blur;\n\n\nvarying vec2 uv;\n\n#define KERNEL_SIZE 7\n\n/*\n * Samples from tex with a gaussian-shaped patch, centered at uv and\n * with standard deviation sigma.  The size of the texture in\n * pixels must be specified by dim\n */\nvec4 sample_gaussian(sampler2D tex, vec2 dim, vec2 uv, float sigma) {\n  if (sigma == 0.0) {\n    return texture2D(tex, uv);\n  }\n\n  vec2 delta = 1.0 / dim;\n  vec2 top_left = uv - delta * float(KERNEL_SIZE+1) / 2.0;\n\n  vec4 color = vec4(0);\n  float sum = 0.0;\n  for (int i = 0; i <  KERNEL_SIZE; ++i) {\n    for (int j = 0; j < KERNEL_SIZE; ++j) {\n      vec2 uv2 = top_left + vec2(i, j) * delta;\n      float d = length((uv2 - uv) * dim);\n      float f = exp(-(d*d) / (2.0*sigma * sigma));\n      color += f * texture2D(tex, uv2);\n      sum += f;\n    }\n  }\n  return color / sum;\n}\n\nvoid main(void) {\n  //map blur in [0, 1] to sigma in [0, inf]\n  //alpha will determine the "steepness" of our curve.\n  //this was picked just to make the scale feel "natural"\n  //if our image is 1000 pixels wide, a blur of 0.5 should correspond\n  //to a sigma of 1 pixels\n  float alpha = 1000.0;\n  float sigma = blur / (alpha * (1.0 - blur));\n  //let this be our standard deviation in terms of screen-widths.\n  //rewrite this in terms of pixels.\n  sigma *= float(reflectionTextureWidth);\n\n\n  gl_FragColor = sample_gaussian(reflectionTexture, vec2(reflectionTextureWidth,\n    reflectionTextureHeight), vec2(uv.x, 1. - uv.y), sigma);\n  //because our canvas expects alphas to be pre-multiplied, we multiply by whole\n  //color vector by reflectivity, not just the alpha channel\n  gl_FragColor *= reflectivity;\n}\n'},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(5),s=(n.n(a),n(10)),u=n.n(s),l=n(62),c=(n.n(l),n(3)),f=n(528),h=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),p=c.d.ViewportControls,d=c.d.TransitionManager,v={viewportState:u.a.func,state:u.a.object,width:u.a.number.isRequired,height:u.a.number.isRequired,longitude:u.a.number.isRequired,latitude:u.a.number.isRequired,zoom:u.a.number.isRequired,bearing:u.a.number,pitch:u.a.number,altitude:u.a.number,position:u.a.array,maxZoom:u.a.number,minZoom:u.a.number,maxPitch:u.a.number,minPitch:u.a.number,onViewportChange:u.a.func,transitionDuration:u.a.number,transitionInterpolator:u.a.object,transitionInterruption:u.a.number,transitionEasing:u.a.func,onTransitionStart:u.a.func,onTransitionInterrupt:u.a.func,onTransitionEnd:u.a.func,scrollZoom:u.a.bool,dragPan:u.a.bool,dragRotate:u.a.bool,doubleClickZoom:u.a.bool,touchZoomRotate:u.a.bool,getCursor:u.a.func,controls:u.a.shape({events:u.a.arrayOf(u.a.string),handleEvent:u.a.func})},g=function(e){return e.isDragging?f.a.GRABBING:f.a.GRAB},y=Object.assign({},d.defaultProps,{onViewportChange:null,scrollZoom:!0,dragPan:!0,dragRotate:!0,doubleClickZoom:!0,touchZoomRotate:!0,getCursor:g}),m=function(e){function t(e){r(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={isDragging:!1},n}return o(t,e),h(t,[{key:"componentDidMount",value:function(){this._eventManager=new l.EventManager(this.eventCanvas),this._controls=this.props.controls||new p(this.props.viewportState),this._controls.setOptions(Object.assign({},this.props,{onStateChange:this._onInteractiveStateChange.bind(this),eventManager:this._eventManager})),this._transitionManger=new d(this.props)}},{key:"shouldComponentUpdate",value:function(e,t){if(this._transitionManger){return!this._transitionManger.processViewportChange(e)}return!0}},{key:"componentWillUpdate",value:function(e){this._controls&&this._controls.setOptions(e)}},{key:"componentWillUnmount",value:function(){this._eventManager.destroy()}},{key:"_onInteractiveStateChange",value:function(e){var t=e.isDragging,n=void 0!==t&&t;n!==this.state.isDragging&&this.setState({isDragging:n})}},{key:"render",value:function(){var e=this,t=this.props,n=t.width,r=t.height,i=t.getCursor,o={width:n,height:r,position:"relative",cursor:i(this.state)};return Object(a.createElement)("div",{key:"map-controls",ref:function(t){return e.eventCanvas=t},style:o},this.props.children)}}]),t}(a.PureComponent);t.a=m,m.displayName="ViewportController",m.propTypes=v,m.defaultProps=y},function(e,t,n){"use strict";t.a={GRABBING:"-webkit-grabbing",GRAB:"-webkit-grab",POINTER:"pointer"}},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(5),s=(n.n(a),n(277)),u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=function(e){function t(e){r(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.controller=null,n}return o(t,e),u(t,[{key:"componentDidMount",value:function(){this.controller=new s.a(Object.assign({},this.props,{canvas:this.eventCanvas}))}},{key:"componentWillUpdate",value:function(e){this.controller.setProps(e)}},{key:"componentWillUnmount",value:function(){this.controller.finalize()}},{key:"render",value:function(){var e=this,t=this.props,n=t.width,r=t.height,i={width:n,height:r,position:"relative"};return Object(a.createElement)("div",{key:"map-controls",ref:function(t){return e.eventCanvas=t},style:i},this.props.children)}}]),t}(a.PureComponent);t.a=l,l.displayName="MapController",l.propTypes=s.a.propTypes,l.defaultProps=s.a.defaultProps},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(5),s=(n.n(a),n(278)),u=n(96),l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=function(e){function t(e){r(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.controller=null,n}return o(t,e),l(t,null,[{key:"getViewport",value:function(e){return new u.a(e)}}]),l(t,[{key:"componentDidMount",value:function(){this.controller=new s.a(Object.assign({},this.props,{canvas:this.eventCanvas}))}},{key:"componentWillUpdate",value:function(e){this.controller.setProps(e)}},{key:"componentWillUnmount",value:function(){this.controller.finalize()}},{key:"render",value:function(){var e=this,t=this.props,n=t.width,r=t.height,i={width:n,height:r,position:"relative"};return Object(a.createElement)("div",{key:"map-controls",ref:function(t){return e.eventCanvas=t},style:i},this.props.children)}}]),t}(a.PureComponent);t.a=c,c.displayName="OrbitController",c.propTypes=s.a.propTypes,c.defaultProps=s.a.defaultProps},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(5),s=n.n(a),u=n(532),l=(n.n(u),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()),c=function(e){function t(){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),l(t,[{key:"_addDecor",value:function(e){for(var t=["red","yellow","green"],n=[],r=0;r<e;r++)n.push(s.a.createElement("div",{key:r,className:"box "+t[r%t.length]}));return n}},{key:"render",value:function(){var e=this.props,t=e.title,n=e.subtitle;return s.a.createElement("div",{className:"header"},s.a.createElement("div",{className:"wrapper"},this._addDecor(5)),s.a.createElement("span",{className:"titleText"},t),s.a.createElement("span",{className:"subtitle"},n))}}]),t}(a.Component);t.a=c},function(e,t){},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(5),s=n.n(a),u=n(534),l=(n.n(u),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}());!function(e){function t(e){r(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={selectedLinkName:n.props.links[0]},n}o(t,e),l(t,[{key:"_onClick",value:function(e){e.preventDefault();var t=e.target.innerText;this.props.onClick(t),this.setState({selectedLinkName:t})}},{key:"render",value:function(){var e=this,t=0,n=this.props.links.map(function(n){t++;var r="link";return n===e.state.selectedLinkName&&(r+=" selected"),s.a.createElement("span",{key:t,onClick:e._onClick.bind(e),className:r},s.a.createElement("a",{href:"#"},n))});return s.a.createElement("div",{className:"navbar"},n)}}])}(a.Component)},function(e,t){},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(5),s=n.n(a),u=n(536),l=(n.n(u),n(537)),c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),f=function(e){return e.replace(/\w\S*/g,function(e){return e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()})},h=function(e){function t(e){r(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={expanded:!1},n.onClick.bind(n),n}return o(t,e),c(t,[{key:"shouldComponentUpdate",value:function(e,t){try{return Object(l.a)(this.props.data)!==Object(l.a)(e.data)}catch(e){return!0}}},{key:"_formatDictionary",value:function(e){var t=[],n=Object.keys(e),r=0,i=!0,o=!1,a=void 0;try{for(var u,l=n[Symbol.iterator]();!(i=(u=l.next()).done);i=!0){var c=u.value,h=""+c;-1!==c.indexOf("_")&&(h=c.replace("_"," ")),t.push(s.a.createElement("div",{key:r,className:"row"},s.a.createElement("span",{className:"key"},f(h)),s.a.createElement("br",null),s.a.createElement("span",{className:"value"},e[c]),s.a.createElement("br",null),s.a.createElement("br",null))),r++}}catch(e){o=!0,a=e}finally{try{!i&&l.return&&l.return()}finally{if(o)throw a}}return t}},{key:"onClick",value:function(e){this.setState({expanded:!this.state.expanded})}},{key:"render",value:function(){var e=this.props,t=e.data,n=e.title,r=e.description;if(!t)return s.a.createElement("div",{className:"panel"},s.a.createElement("div",{className:"embed"},s.a.createElement("h4",null," ",n," "),s.a.createElement("p",null," ",r," "),s.a.createElement("p",null,s.a.createElement("em",null,"Click to pause timelapse and see detail"))));var i=this.state.expanded?"300px":"150px";return s.a.createElement("div",{className:"panel",style:{maxWidth:i}},s.a.createElement("div",{className:"embed"},s.a.createElement("h4",null," ",n," "),this._formatDictionary(t)))}}]),t}(a.Component);t.a=h},function(e,t){},function(e,t,n){"use strict";function r(e,t){var n=e[0],r=e[1],i=e[2],l=e[3];n=o(n,r,i,l,t[0],7,-680876936),l=o(l,n,r,i,t[1],12,-389564586),i=o(i,l,n,r,t[2],17,606105819),r=o(r,i,l,n,t[3],22,-1044525330),n=o(n,r,i,l,t[4],7,-176418897),l=o(l,n,r,i,t[5],12,1200080426),i=o(i,l,n,r,t[6],17,-1473231341),r=o(r,i,l,n,t[7],22,-45705983),n=o(n,r,i,l,t[8],7,1770035416),l=o(l,n,r,i,t[9],12,-1958414417),i=o(i,l,n,r,t[10],17,-42063),r=o(r,i,l,n,t[11],22,-1990404162),n=o(n,r,i,l,t[12],7,1804603682),l=o(l,n,r,i,t[13],12,-40341101),i=o(i,l,n,r,t[14],17,-1502002290),r=o(r,i,l,n,t[15],22,1236535329),n=a(n,r,i,l,t[1],5,-165796510),l=a(l,n,r,i,t[6],9,-1069501632),i=a(i,l,n,r,t[11],14,643717713),r=a(r,i,l,n,t[0],20,-373897302),n=a(n,r,i,l,t[5],5,-701558691),l=a(l,n,r,i,t[10],9,38016083),i=a(i,l,n,r,t[15],14,-660478335),r=a(r,i,l,n,t[4],20,-405537848),n=a(n,r,i,l,t[9],5,568446438),l=a(l,n,r,i,t[14],9,-1019803690),i=a(i,l,n,r,t[3],14,-187363961),r=a(r,i,l,n,t[8],20,1163531501),n=a(n,r,i,l,t[13],5,-1444681467),l=a(l,n,r,i,t[2],9,-51403784),i=a(i,l,n,r,t[7],14,1735328473),r=a(r,i,l,n,t[12],20,-1926607734),n=s(n,r,i,l,t[5],4,-378558),l=s(l,n,r,i,t[8],11,-2022574463),i=s(i,l,n,r,t[11],16,1839030562),r=s(r,i,l,n,t[14],23,-35309556),n=s(n,r,i,l,t[1],4,-1530992060),l=s(l,n,r,i,t[4],11,1272893353),i=s(i,l,n,r,t[7],16,-155497632),r=s(r,i,l,n,t[10],23,-1094730640),n=s(n,r,i,l,t[13],4,681279174),l=s(l,n,r,i,t[0],11,-358537222),i=s(i,l,n,r,t[3],16,-722521979),r=s(r,i,l,n,t[6],23,76029189),n=s(n,r,i,l,t[9],4,-640364487),l=s(l,n,r,i,t[12],11,-421815835),i=s(i,l,n,r,t[15],16,530742520),r=s(r,i,l,n,t[2],23,-995338651),n=u(n,r,i,l,t[0],6,-198630844),l=u(l,n,r,i,t[7],10,1126891415),i=u(i,l,n,r,t[14],15,-1416354905),r=u(r,i,l,n,t[5],21,-57434055),n=u(n,r,i,l,t[12],6,1700485571),l=u(l,n,r,i,t[3],10,-1894986606),i=u(i,l,n,r,t[10],15,-1051523),r=u(r,i,l,n,t[1],21,-2054922799),n=u(n,r,i,l,t[8],6,1873313359),l=u(l,n,r,i,t[15],10,-30611744),i=u(i,l,n,r,t[6],15,-1560198380),r=u(r,i,l,n,t[13],21,1309151649),n=u(n,r,i,l,t[4],6,-145523070),l=u(l,n,r,i,t[11],10,-1120210379),i=u(i,l,n,r,t[2],15,718787259),r=u(r,i,l,n,t[9],21,-343485551),e[0]=d(n,e[0]),e[1]=d(r,e[1]),e[2]=d(i,e[2]),e[3]=d(l,e[3])}function i(e,t,n,r,i,o){return t=d(d(t,e),d(r,o)),d(t<<i|t>>>32-i,n)}function o(e,t,n,r,o,a,s){return i(t&n|~t&r,e,t,o,a,s)}function a(e,t,n,r,o,a,s){return i(t&r|n&~r,e,t,o,a,s)}function s(e,t,n,r,o,a,s){return i(t^n^r,e,t,o,a,s)}function u(e,t,n,r,o,a,s){return i(n^(t|~r),e,t,o,a,s)}function l(e){var t,n=e.length,i=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=e.length;t+=64)r(i,c(e.substring(t-64,t)));e=e.substring(t-64);var o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<e.length;t++)o[t>>2]|=e.charCodeAt(t)<<(t%4<<3);if(o[t>>2]|=128<<(t%4<<3),t>55)for(r(i,o),t=0;t<16;t++)o[t]=0;return o[14]=8*n,r(i,o),i}function c(e){var t,n=[];for(t=0;t<64;t+=4)n[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return n}function f(e){for(var t="",n=0;n<4;n++)t+=v[e>>8*n+4&15]+v[e>>8*n&15];return t}function h(e){for(var t=0;t<e.length;t++)e[t]=f(e[t]);return e.join("")}function p(e){return h(l(e))}function d(e,t){return e+t&4294967295}n.d(t,"a",function(){return p});var v="0123456789abcdef".split("");if("5d41402abc4b2a76b9719d911017c592"!=p("hello"));},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n.d(t,"a",function(){return l});var i=n(539),o=n.n(i),a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function(e,t){return new Date(new Date(e).getTime()+24*t*60*60*1e3)},u=function(e){var t=new Date(e),n=""+(t.getMonth()+1),r=""+t.getDate(),i=t.getFullYear();return n.length<2&&(n="0"+n),r.length<2&&(r="0"+r),[i,n,r].join("-")},l=function(){function e(t,n,i,a){var s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;r(this,e),this.tableName=n,this.tsColumn=a,this.endTsColumn=s,this.db=o.a.Database(),this.db.exec(i),this.db.exec("SELECT * INTO "+n+" FROM ?",[t]),this.db.exec("\n      CREATE INDEX "+a+"_idx ON "+n+"("+a+");\n    "),this.minTs=this.db.exec("SELECT FIRST("+a+") AS res FROM "+n)[0].res,this.currTs=""+this.minTs,this.lastTs="2017-01-01",this.query=this.query.bind(this),this.nextResultSet=this.nextResultSet.bind(this)}return a(e,[{key:"query",value:function(e){return this.db.exec(e)}},{key:"nextResultSet",value:function(){var e=""+this.currTs;this.currTs<this.lastTs?this.currTs=u(s(this.currTs,360)):this.currTs=this.minTs;var t="\n      ("+this.endTsColumn+" IS NULL \n      OR "+this.endTsColumn+" < '"+this.currTs+"')",n=(this.tsColumn,this.currTs,"\n      SELECT *\n      FROM "+this.tableName+"\n      WHERE 1=1\n        AND "+this.tsColumn+" <= '"+this.currTs+"'\n        AND "+t+"\n    ");return console.log(n),this.query(n)}}]),e}()},function(e,t,n){(function(e,r,i){var o,a,u,u,u;!function(e,n){a=[],o=n,void 0!==(u="function"===typeof o?o.apply(t,a):o)&&(r.exports=u)}(0,function(){function o(e){return"(y="+e+",y===y?y:undefined)"}function a(e,t){return"(y="+e+',typeof y=="undefined"?undefined:'+t+")"}function l(){return!0}function c(){}function f(){var e=navigator.userAgent.toLowerCase();return-1!==e.indexOf("msie")&&parseInt(e.split("msie")[1])}function h(e,t,n){function r(e,n,i){var s,u,l,c=e[n];if(c.selid){if("PATH"===c.selid){for(var f=[{node:i,stack:[]}],h={},p=O.databases[O.useid].objects;f.length>0;){var d=f.shift(),v=d.node,g=d.stack,l=r(c.args,0,v);if(l.length>0){if(n+1+1>e.length)return g;var y=[];return g&&g.length>0&&g.forEach(function(t){y=y.concat(r(e,n+1,t))}),y}void 0===h[v.$id]&&(h[v.$id]=!0,v.$out&&v.$out.length>0&&v.$out.forEach(function(e){var t=p[e],n=g.concat(t);n.push(p[t.$out[0]]),f.push({node:p[t.$out[0]],stack:n})}))}return[]}if("NOT"===c.selid){var u=r(c.args,0,i);return u.length>0?[]:n+1+1>e.length?[i]:r(e,n+1,i)}if("DISTINCT"===c.selid){var u;if(u=void 0===c.args||0===c.args.length?W(i):r(c.args,0,i),0===u.length)return[];var m=W(u);return n+1+1>e.length?m:r(e,n+1,m)}if("AND"===c.selid){var m=!0;return c.args.forEach(function(e){m=m&&r(e,0,i).length>0}),m?n+1+1>e.length?[i]:r(e,n+1,i):[]}if("OR"===c.selid){var m=!1;return c.args.forEach(function(e){m=m||r(e,0,i).length>0}),m?n+1+1>e.length?[i]:r(e,n+1,i):[]}if("ALL"===c.selid){var u=r(c.args[0],0,i);return 0===u.length?[]:n+1+1>e.length?u:r(e,n+1,u)}if("ANY"===c.selid){var u=r(c.args[0],0,i);return 0===u.length?[]:n+1+1>e.length?[u[0]]:r(e,n+1,[u[0]])}if("UNIONALL"===c.selid){var u=[];return c.args.forEach(function(e){u=u.concat(r(e,0,i))}),0===u.length?[]:n+1+1>e.length?u:r(e,n+1,u)}if("UNION"===c.selid){var u=[];c.args.forEach(function(e){u=u.concat(r(e,0,i))});var u=W(u);return 0===u.length?[]:n+1+1>e.length?u:r(e,n+1,u)}if("IF"===c.selid){var u=r(c.args,0,i);return 0===u.length?[]:n+1+1>e.length?[i]:r(e,n+1,i)}if("REPEAT"===c.selid){var _,b,E=c.args[0].value;b=c.args[1]?c.args[1].value:E,c.args[2]&&(_=c.args[2].variable);var x=[];if(0===E&&(n+1+1>e.length?x=[i]:(_&&(O.vars[_]=0),x=x.concat(r(e,n+1,i)))),b>0)for(var w=[{value:i,lvl:1}],T=0;w.length>0;){var u=w[0];if(w.shift(),u.lvl<=b){_&&(O.vars[_]=u.lvl);var S=r(c.sels,0,u.value);S.forEach(function(e){w.push({value:e,lvl:u.lvl+1})}),u.lvl>=E&&(n+1+1>e.length?x=x.concat(S):S.forEach(function(t){x=x.concat(r(e,n+1,t))}))}if(++T>1e5)throw new Error("Security brake. Number of iterations = "+T)}return x}if("OF"===c.selid){if(n+1+1>e.length)return[i];var A=[];return Object.keys(i).forEach(function(t){O.vars[c.args[0].variable]=t,A=A.concat(r(e,n+1,i[t]))}),A}if("TO"===c.selid){var C=O.vars[c.args[0]],k=[];if(k=void 0!==C?C.slice(0):[],k.push(i),n+1+1>e.length)return[i];O.vars[c.args[0]]=k;var A=r(e,n+1,i);return O.vars[c.args[0]]=C,A}if("ARRAY"===c.selid){var u=r(c.args,0,i);return u.length>0?(s=u,n+1+1>e.length?[s]:r(e,n+1,s)):[]}if("SUM"===c.selid){var u=r(c.args,0,i);if(!(u.length>0))return[];var s=u.reduce(function(e,t){return e+t},0);return n+1+1>e.length?[s]:r(e,n+1,s)}if("AVG"===c.selid)return u=r(c.args,0,i),u.length>0?(s=u.reduce(function(e,t){return e+t},0)/u.length,n+1+1>e.length?[s]:r(e,n+1,s)):[];if("COUNT"===c.selid)return u=r(c.args,0,i),u.length>0?(s=u.length,n+1+1>e.length?[s]:r(e,n+1,s)):[];if("FIRST"===c.selid)return u=r(c.args,0,i),u.length>0?(s=u[0],n+1+1>e.length?[s]:r(e,n+1,s)):[];if("LAST"===c.selid)return u=r(c.args,0,i),u.length>0?(s=u[u.length-1],n+1+1>e.length?[s]:r(e,n+1,s)):[];if("MIN"===c.selid){if(u=r(c.args,0,i),0===u.length)return[];var s=u.reduce(function(e,t){return Math.min(e,t)},1/0);return n+1+1>e.length?[s]:r(e,n+1,s)}if("MAX"===c.selid){var u=r(c.args,0,i);if(0===u.length)return[];var s=u.reduce(function(e,t){return Math.max(e,t)},-1/0);return n+1+1>e.length?[s]:r(e,n+1,s)}if("PLUS"===c.selid){var x=[],w=r(c.args,0,i).slice();n+1+1>e.length?x=x.concat(w):w.forEach(function(t){x=x.concat(r(e,n+1,t))});for(var T=0;w.length>0;){var u=w.shift();if(u=r(c.args,0,u),w=w.concat(u),n+1+1>e.length?x=x.concat(u):u.forEach(function(t){var i=r(e,n+1,t);x=x.concat(i)}),++T>1e5)throw new Error("Security brake. Number of iterations = "+T)}return x}if("STAR"===c.selid){var x=[];x=r(e,n+1,i);var w=r(c.args,0,i).slice();n+1+1>e.length?x=x.concat(w):w.forEach(function(t){x=x.concat(r(e,n+1,t))});for(var T=0;w.length>0;){var u=w[0];if(w.shift(),u=r(c.args,0,u),w=w.concat(u),n+1+1<=e.length&&u.forEach(function(t){x=x.concat(r(e,n+1,t))}),++T>1e5)throw new Error("Loop brake. Number of iterations = "+T)}return x}if("QUESTION"===c.selid){var x=[];x=x.concat(r(e,n+1,i));var u=r(c.args,0,i);return n+1+1<=e.length&&u.forEach(function(t){x=x.concat(r(e,n+1,t))}),x}if("WITH"!==c.selid){if("ROOT"===c.selid)return n+1+1>e.length?[i]:r(e,n+1,o);throw new Error("Wrong selector "+c.selid)}var u=r(c.args,0,i);if(0===u.length)return[];var l={status:1,values:u}}else{if(!c.srchid)throw new Error("Selector not found");var l=O.srch[c.srchid.toUpperCase()](i,c.args,a,t)}void 0===l&&(l={status:1,values:[i]});var m=[];if(1===l.status){var P=l.values;if(n+1+1>e.length)m=P;else for(var T=0;T<l.values.length;T++)m=m.concat(r(e,n+1,P[T]))}return m}var i,o,a={},s=H(this.selectors);if(void 0!==s&&s.length>0&&(s&&s[0]&&"PROP"===s[0].srchid&&s[0].args&&s[0].args[0]&&("XML"===s[0].args[0].toUpperCase()?(a.mode="XML",s.shift()):"HTML"===s[0].args[0].toUpperCase()?(a.mode="HTML",s.shift()):"JSON"===s[0].args[0].toUpperCase()&&(a.mode="JSON",s.shift())),s.length>0&&"VALUE"===s[0].srchid&&(a.value=!0,s.shift())),this.from instanceof ne.Column){var u=this.from.databaseid||e;o=O.databases[u].tables[this.from.columnid].data}else if(this.from instanceof ne.FuncValue&&O.from[this.from.funcid.toUpperCase()]){var l=this.from.args.map(function(e){var n=e.toJS();return new Function("params,alasql","var y;return "+n).bind(this)(t,O)});o=O.from[this.from.funcid.toUpperCase()].apply(this,l)}else if(void 0===this.from)o=O.databases[e].objects;else{var c=new Function("params,alasql","var y;return "+this.from.toJS());o=c(t,O),"object"==typeof Mongo&&"object"!=typeof Mongo.Collection&&o instanceof Mongo.Collection&&(o=o.find().fetch())}if(i=void 0!==s&&s.length>0?r(s,0,o):o,this.into){var f,h;void 0!==this.into.args[0]&&(f=new Function("params,alasql","var y;return "+this.into.args[0].toJS())(t,O)),void 0!==this.into.args[1]&&(h=new Function("params,alasql","var y;return "+this.into.args[1].toJS())(t,O)),i=O.into[this.into.funcid.toUpperCase()](f,h,i,[],n)}else a.value&&i.length>0&&(i=i[0]),n&&(i=n(i));return i}function p(e,t,n,r,i){e.sources.length,e.sourceslen=e.sources.length;var o=e.sourceslen;e.query=e,e.A=r,e.B=i,e.cb=n,e.oldscope=t,e.queriesfn&&(e.sourceslen+=e.queriesfn.length,o+=e.queriesfn.length,e.queriesdata=[],e.queriesfn.forEach(function(t,n){t.query.params=e.params,d([],-n-1,e)}));var a;a=t?H(t):{},e.scope=a;var s;return e.sources.forEach(function(t,n){t.query=e;var r=t.datafn(e,e.params,d,n,O);void 0!==r&&((e.intofn||e.intoallfn)&&Array.isArray(r)&&(r=r.length),s=r),t.queriesdata=e.queriesdata}),0!=e.sources.length&&0!==o||(s=g(e)),s}function d(e,t,n){if(t>=0){var r=n.sources[t];r.data=e,"function"==typeof r.data&&(r.getfn=r.data,r.dontcache=r.getfn.dontcache,"OUTER"!=r.joinmode&&"RIGHT"!=r.joinmode&&"ANTI"!=r.joinmode||(r.dontcache=!1),r.data={})}else n.queriesdata[-t-1]=$(e);if(!(--n.sourceslen>0))return g(n)}function g(e){var t,n=e.scope;if(oe(e),e.data=[],e.xgroups={},e.groups=[],_(e,n,0),e.groupfn){if(e.data=[],0===e.groups.length){var r={};e.selectGroup.length>0&&e.selectGroup.forEach(function(e){"COUNT"==e.aggregatorid||"SUM"==e.aggregatorid?r[e.nick]=0:r[e.nick]=void 0}),e.groups=[r]}if(e.aggrKeys.length>0){var i="";e.aggrKeys.forEach(function(e){i+="g['"+e.nick+"']=alasql.aggr['"+e.funcid+"'](undefined,g['"+e.nick+"'],3);"});var o=new Function("g,params,alasql","var y;"+i)}for(var a=0,s=e.groups.length;a<s;a++){var r=e.groups[a];if(o&&o(r,e.params,O),!e.havingfn||e.havingfn(r,e.params,O)){var u=e.selectgfn(r,e.params,O);e.data.push(u)}}}if(m(e),e.unionallfn){var l,c;if(e.corresponding)e.unionallfn.query.modifier||(e.unionallfn.query.modifier=void 0),l=e.unionallfn(e.params);else{e.unionallfn.query.modifier||(e.unionallfn.query.modifier="RECORDSET"),c=e.unionallfn(e.params),l=[],s=c.data.length;for(var a=0;a<s;a++){for(var f={},h=Math.min(e.columns.length,c.columns.length)-1;0<=h;h--)f[e.columns[h].columnid]=c.data[a][c.columns[h].columnid];l.push(f)}}e.data=e.data.concat(l)}else if(e.unionfn){if(e.corresponding)e.unionfn.query.modifier||(e.unionfn.query.modifier="ARRAY"),l=e.unionfn(e.params);else{e.unionfn.query.modifier||(e.unionfn.query.modifier="RECORDSET"),c=e.unionfn(e.params),l=[],s=c.data.length;for(var a=0;a<s;a++){f={},t=Math.min(e.columns.length,c.columns.length);for(var h=0;h<t;h++)f[e.columns[h].columnid]=c.data[a][c.columns[h].columnid];l.push(f)}}e.data=z(e.data,l)}else if(e.exceptfn){if(e.corresponding){e.exceptfn.query.modifier||(e.exceptfn.query.modifier="ARRAY");var l=e.exceptfn(e.params)}else{e.exceptfn.query.modifier||(e.exceptfn.query.modifier="RECORDSET");for(var c=e.exceptfn(e.params),l=[],a=0,s=c.data.length;a<s;a++){for(var f={},h=Math.min(e.columns.length,c.columns.length)-1;0<=h;h--)f[e.columns[h].columnid]=c.data[a][c.columns[h].columnid];l.push(f)}}e.data=V(e.data,l)}else if(e.intersectfn){if(e.corresponding)e.intersectfn.query.modifier||(e.intersectfn.query.modifier=void 0),l=e.intersectfn(e.params);else for(e.intersectfn.query.modifier||(e.intersectfn.query.modifier="RECORDSET"),c=e.intersectfn(e.params),l=[],s=c.data.length,a=0;a<s;a++){for(f={},t=Math.min(e.columns.length,c.columns.length),h=0;h<t;h++)f[e.columns[h].columnid]=c.data[a][c.columns[h].columnid];l.push(f)}e.data=G(e.data,l)}if(e.orderfn){if(e.explain)var p=Date.now();e.data=e.data.sort(e.orderfn),e.explain&&e.explaination.push({explid:e.explid++,description:"QUERY BY",ms:Date.now()-p})}if(y(e),"undefined"!=typeof angular&&e.removeKeys.push("$$hashKey"),e.removeKeys.length>0){var d=e.removeKeys;if((t=d.length)>0)for(s=e.data.length,a=0;a<s;a++)for(h=0;h<t;h++)delete e.data[a][d[h]];e.columns.length>0&&(e.columns=e.columns.filter(function(e){var t=!1;return d.forEach(function(n){e.columnid==n&&(t=!0)}),!t}))}if(void 0!==e.removeLikeKeys&&e.removeLikeKeys.length>0){for(var v=e.removeLikeKeys,a=0,s=e.data.length;a<s;a++){f=e.data[a];for(var g in f)for(h=0;h<e.removeLikeKeys.length;h++)O.utils.like(e.removeLikeKeys[h],g)&&delete f[g]}e.columns.length>0&&(e.columns=e.columns.filter(function(e){var t=!1;return v.forEach(function(n){O.utils.like(n,e.columnid)&&(t=!0)}),!t}))}if(e.pivotfn&&e.pivotfn(),e.unpivotfn&&e.unpivotfn(),e.intoallfn){var b=e.intoallfn(e.columns,e.cb,e.params,e.alasql);return b}if(e.intofn){for(s=e.data.length,a=0;a<s;a++)e.intofn(e.data[a],a,e.params,e.alasql);return e.cb&&e.cb(e.data.length,e.A,e.B),e.data.length}return b=e.data,e.cb&&(b=e.cb(e.data,e.A,e.B)),b}function y(e){if(e.limit){var t=0;e.offset&&(t=0|e.offset||0,t=t<0?0:t);var n;n=e.percent?(e.data.length*e.limit/100|0)+t:(0|e.limit)+t,e.data=e.data.slice(t,n)}}function m(e){if(e.distinct){for(var t={},n=Object.keys(e.data[0]||[]),r=0,i=e.data.length;r<i;r++)t[n.map(function(t){return e.data[r][t]}).join("`")]=e.data[r];e.data=[];for(var o in t)e.data.push(t[o])}}function _(e,t,n){if(n>=e.sources.length)e.wherefn(t,e.params,O)&&(e.groupfn?e.groupfn(t,e.params,O):e.data.push(e.selectfn(t,e.params,O)));else if(e.sources[n].applyselect){var r=e.sources[n];r.applyselect(e.params,function(i){if(i.length>0)for(var o=0;o<i.length;o++)t[r.alias]=i[o],_(e,t,n+1);else"OUTER"==r.applymode&&(t[r.alias]={},_(e,t,n+1))},t)}else{var r=e.sources[n],i=e.sources[n+1],o=r.alias||r.tableid,a=!1,s=r.data,u=!1;(!r.getfn||r.getfn&&!r.dontcache)&&"RIGHT"!=r.joinmode&&"OUTER"!=r.joinmode&&"ANTI"!=r.joinmode&&"ix"==r.optimization&&(s=r.ix[r.onleftfn(t,e.params,O)]||[],u=!0);var l=0;if(void 0===s)throw new Error("Data source number "+n+" in undefined");for(var c,f=s.length;(c=s[l])||!u&&r.getfn&&(c=r.getfn(l))||l<f;)u||!r.getfn||r.dontcache||(s[l]=c),t[o]=c,r.onleftfn&&r.onleftfn(t,e.params,O)!=r.onrightfn(t,e.params,O)||r.onmiddlefn(t,e.params,O)&&("SEMI"!=r.joinmode&&"ANTI"!=r.joinmode&&_(e,t,n+1),"LEFT"!=r.joinmode&&"INNER"!=r.joinmode&&(c._rightjoin=!0),a=!0),l++;if("LEFT"!=r.joinmode&&"OUTER"!=r.joinmode&&"SEMI"!=r.joinmode||a||(t[o]={},_(e,t,n+1)),n+1<e.sources.length&&("OUTER"==i.joinmode||"RIGHT"==i.joinmode||"ANTI"==i.joinmode)){t[r.alias]={};for(var c,h=0,p=i.data.length;(c=i.data[h])||i.getfn&&(c=i.getfn(h))||h<p;)i.getfn&&!i.dontcache&&(i.data[h]=c),c._rightjoin?delete c._rightjoin:0==n&&(t[i.alias]=c,_(e,t,n+2)),h++}t[o]=void 0}}function b(e,t){if(void 0===t||"number"==typeof t||"string"==typeof t||"boolean"==typeof t)return t;var n=e.modifier||O.options.modifier,r=e.columns;if(void 0===r||0==r.length)if(t.length>0){for(var i={},o=Math.min(t.length,O.options.columnlookup||10)-1;0<=o;o--)for(var a in t[o])i[a]=!0;r=Object.keys(i).map(function(e){return{columnid:e}})}else r=[];if("VALUE"===n)if(t.length>0){var a;a=r&&r.length>0?r[0].columnid:Object.keys(t[0])[0],t=t[0][a]}else t=void 0;else if("ROW"===n)if(t.length>0){var a,s=[];for(var a in t[0])s.push(t[0][a]);t=s}else t=void 0;else if("COLUMN"===n){var u=[];if(t.length>0){var a;a=r&&r.length>0?r[0].columnid:Object.keys(t[0])[0];for(var o=0,l=t.length;o<l;o++)u.push(t[o][a])}t=u}else if("MATRIX"===n){for(var u=[],o=0;o<t.length;o++){for(var s=[],c=t[o],f=0;f<r.length;f++)s.push(c[r[f].columnid]);u.push(s)}t=u}else if("INDEX"===n){var a,h,u={};if(r&&r.length>0)a=r[0].columnid,h=r[1].columnid;else{var p=Object.keys(t[0]);a=p[0],h=p[1]}for(var o=0,l=t.length;o<l;o++)u[t[o][a]]=t[o][h];t=u}else if("RECORDSET"===n)t=new O.Recordset({columns:r,data:t});else if("TEXTSTRING"===n){var a;a=r&&r.length>0?r[0].columnid:Object.keys(t[0])[0];for(var o=0,l=t.length;o<l;o++)t[o]=t[o][a];t=t.join("\n")}return t}function E(e,t,n){var r="",i=[];e.ixsources={},e.sources.forEach(function(t){e.ixsources[t.alias]=t});var o;if(e.ixsources[t])var o=e.ixsources[t].columns;return n&&"json"==O.options.joinstar&&(r+="r['"+t+"']={};"),o&&o.length>0?o.forEach(function(o){n&&"underscore"==O.options.joinstar?i.push("'"+t+"_"+o.columnid+"':p['"+t+"']['"+o.columnid+"']"):n&&"json"==O.options.joinstar?r+="r['"+t+"']['"+o.columnid+"']=p['"+t+"']['"+o.columnid+"'];":i.push("'"+o.columnid+"':p['"+t+"']['"+o.columnid+"']"),e.selectColumns[I(o.columnid)]=!0;var a={columnid:o.columnid,dbtypeid:o.dbtypeid,dbsize:o.dbsize,dbprecision:o.dbprecision,dbenum:o.dbenum};e.columns.push(a),e.xcolumns[a.columnid]=a}):(r+='var w=p["'+t+'"];for(var k in w){r[k]=w[k]};',e.dirtyColumns=!0),{s:i.join(","),sp:r}}function x(e,t){if(Array.isArray(e)){for(var n=[[]],r=0;r<e.length;r++)if(e[r]instanceof ne.Column)e[r].nick=I(e[r].columnid),t.groupColumns[e[r].nick]=e[r].nick,n=n.map(function(n){return n.concat(e[r].nick+"\t"+e[r].toJS("p",t.sources[0].alias,t.defcols))});else if(e[r]instanceof ne.FuncValue)t.groupColumns[I(e[r].toString())]=I(e[r].toString()),n=n.map(function(n){return n.concat(I(e[r].toString())+"\t"+e[r].toJS("p",t.sources[0].alias,t.defcols))});else if(e[r]instanceof ne.GroupExpression)if("ROLLUP"==e[r].type)n=le(n,ae(e[r].group,t));else if("CUBE"==e[r].type)n=le(n,se(e[r].group,t));else{if("GROUPING SETS"!=e[r].type)throw new Error("Unknown grouping function");n=le(n,ue(e[r].group,t))}else n=""===e[r]?[["1\t1"]]:n.map(function(n){return t.groupColumns[I(e[r].toString())]=I(e[r].toString()),n.concat(I(e[r].toString())+"\t"+e[r].toJS("p",t.sources[0].alias,t.defcols))});return n}return e instanceof ne.FuncValue?(t.groupColumns[I(e.toString())]=I(e.toString()),[e.toString()+"\t"+e.toJS("p",t.sources[0].alias,t.defcols)]):e instanceof ne.Column?(e.nick=I(e.columnid),t.groupColumns[e.nick]=e.nick,[e.nick+"\t"+e.toJS("p",t.sources[0].alias,t.defcols)]):(t.groupColumns[I(e.toString())]=I(e.toString()),[I(e.toString())+"\t"+e.toJS("p",t.sources[0].alias,t.defcols)])}function w(e,t,n,r){var i="";if("string"==typeof e)i='"'+e+'"';else if("number"==typeof e)i="("+e+")";else if("boolean"==typeof e)i=e;else{if("object"!=typeof e)throw new Error("2Can not parse JSON object "+JSON.stringify(e));if(Array.isArray(e))i+="["+e.map(function(e){return w(e,t,n,r)}).join(",")+"]";else if(!e.toJS||e instanceof ne.Json){i="{";var o=[];for(var a in e){var s="";if("string"==typeof a)s+='"'+a+'"';else if("number"==typeof a)s+=a;else{if("boolean"!=typeof a)throw new Error("THis is not ES6... no expressions on left side yet");s+=a}s+=":"+w(e[a],t,n,r),o.push(s)}i+=o.join(",")+"}"}else{if(!e.toJS)throw new Error("1Can not parse JSON object "+JSON.stringify(e));i=e.toJS(t,n,r)}}return i}function T(e){var t="";if(void 0===e)t+="undefined";else if(Array.isArray(e)){t+="<style>",t+="table {border:1px black solid; border-collapse: collapse; border-spacing: 0px;}",t+="td,th {border:1px black solid; padding-left:5px; padding-right:5px}",t+="th {background-color: #EEE}",t+="</style>",t+="<table>";var n=[];for(var r in e[0])n.push(r);t+="<tr><th>#",n.forEach(function(e){t+="<th>"+e});for(var i=0,o=e.length;i<o;i++)t+="<tr><th>"+(i+1),n.forEach(function(n){t+="<td> ",e[i][n]==+e[i][n]?(t+='<div style="text-align:right">',void 0===e[i][n]?t+="NULL":t+=e[i][n],t+="</div>"):void 0===e[i][n]?t+="NULL":"string"==typeof e[i][n]?t+=e[i][n]:t+=de(e[i][n])});t+="</table>"}else t+="<p>"+de(e)+"</p>";return t}function S(e,t,n){if(!(n<=0)){var r=t-e.scrollTop,i=r/n*10;setTimeout(function(){e.scrollTop!==t&&(e.scrollTop=e.scrollTop+i,S(e,t,n-10))},10)}}function A(e,t,n,r,i,o){function a(e){for(var t="",n=0,r=10240;n<e.byteLength/r;++n)t+=String.fromCharCode.apply(null,new Uint8Array(e.slice(n*r,n*r+r)));return t+=String.fromCharCode.apply(null,new Uint8Array(e.slice(n*r)))}function s(e){return e&&!1===O.options.casesensitive?e.toLowerCase():e}var u={};n=n||{},O.utils.extend(u,n),void 0===u.headers&&(u.headers=!0),t=O.utils.autoExtFilename(t,"xls",n),O.utils.loadBinaryFile(t,!!r,function(t){if(t instanceof ArrayBuffer)var n=a(t),l=e.read(btoa(n),{type:"base64"});else var l=e.read(t,{type:"binary"});var c;c=void 0===u.sheetid?l.SheetNames[0]:u.sheetid;var f,h=[];if(void 0===u.range?f=l.Sheets[c]["!ref"]:(f=u.range,l.Sheets[c][f]&&(f=l.Sheets[c][f])),f){for(var p=f.split(":"),d=p[0].match(/[A-Z]+/)[0],v=+p[0].match(/[0-9]+/)[0],g=p[1].match(/[A-Z]+/)[0],y=+p[1].match(/[0-9]+/)[0],m={},_=O.utils.xlscn(d),b=O.utils.xlscn(g),E=_;E<=b;E++){var x=O.utils.xlsnc(E);u.headers?l.Sheets[c][x+""+v]?m[x]=s(l.Sheets[c][x+""+v].v):m[x]=s(x):m[x]=x}u.headers&&v++;for(var w=v;w<=y;w++){for(var T={},E=_;E<=b;E++){var x=O.utils.xlsnc(E);l.Sheets[c][x+""+w]&&(T[m[x]]=l.Sheets[c][x+""+w].v)}h.push(T)}}else h.push([]);h.length>0&&h[h.length-1]&&0==Object.keys(h[h.length-1]).length&&h.pop(),r&&(h=r(h,i,o))},function(e){throw e})}function C(e){function t(){if(a(/^<\?xml\s*/)){for(var e={attributes:{}};!s()&&!u("?>");){var t=i();if(!t)return e;e.attributes[t.name]=t.value}return a(/\?>\s*/),e}}function n(){var e=a(/^<([\w-:.]+)\s*/);if(e){for(var t={name:e[1],attributes:{},children:[]};!(s()||u(">")||u("?>")||u("/>"));){var o=i();if(!o)return t;t.attributes[o.name]=o.value}if(a(/^\s*\/>\s*/))return t;a(/\??>\s*/),t.content=r();for(var l;l=n();)t.children.push(l);return a(/^<\/[\w-:.]+>\s*/),t}}function r(){var e=a(/^([^<]*)/);return e?e[1]:""}function i(){var e=a(/([\w:-]+)\s*=\s*("[^"]*"|'[^']*'|\w+)\s*/);if(e)return{name:e[1],value:o(e[2])}}function o(e){return e.replace(/^['"]|['"]$/g,"")}function a(t){var n=e.match(t);if(n)return e=e.slice(n[0].length),n}function s(){return 0==e.length}function u(t){return 0==e.indexOf(t)}return e=e.trim(),e=e.replace(/<!--[\s\S]*?-->/g,""),function(){return{declaration:t(),root:n()}}()}var O=function(e,t,n,r){if(t=t||[],"function"!=typeof importScripts&&O.webworker){var i=O.lastid++;return O.buffer[i]=n,void O.webworker.postMessage({id:i,sql:e,params:t})}return 0===arguments.length?new ne.Select({columns:[new ne.Column({columnid:"*"})],from:[new ne.ParamValue({param:0})]}):1===arguments.length&&e.constructor===Array?O.promise(e):("function"==typeof t&&(r=n,n=t,t=[]),"object"!=typeof t&&(t=[t]),"string"==typeof e&&"#"===e[0]&&"object"==typeof document?e=document.querySelector(e).textContent:"object"==typeof e&&e instanceof HTMLElement?e=e.textContent:"function"==typeof e&&(e=e.toString().slice(14,-3)),O.exec(e,t,n,r))};O.version="0.4.4",O.debug=void 0;var k=function(){return null},P=function(){function e(){this.yy={}}var t=function(e,t,n,r){for(n=n||{},r=e.length;r--;n[e[r]]=t);return n},n=[2,13],r=[1,104],i=[1,102],o=[1,103],a=[1,6],s=[1,42],u=[1,79],l=[1,76],c=[1,94],f=[1,93],h=[1,69],p=[1,101],d=[1,85],v=[1,64],g=[1,71],y=[1,84],m=[1,66],_=[1,70],b=[1,68],E=[1,61],x=[1,74],w=[1,62],T=[1,67],S=[1,83],A=[1,77],C=[1,86],k=[1,87],P=[1,81],R=[1,82],I=[1,80],N=[1,88],L=[1,89],D=[1,90],F=[1,91],j=[1,92],B=[1,98],U=[1,65],z=[1,78],V=[1,72],G=[1,96],H=[1,97],q=[1,63],W=[1,73],X=[1,108],$=[1,107],Y=[10,306,602,764],Z=[10,306,310,602,764],K=[1,115],J=[1,116],Q=[1,117],ee=[1,118],te=[1,119],ne=[130,353,410],re=[1,127],ie=[1,126],oe=[1,134],ae=[1,164],se=[1,175],ue=[1,178],le=[1,173],ce=[1,181],fe=[1,185],he=[1,160],pe=[1,182],de=[1,169],ve=[1,171],ge=[1,174],ye=[1,183],me=[1,166],_e=[1,193],be=[1,188],Ee=[1,189],xe=[1,194],we=[1,195],Te=[1,196],Se=[1,197],Ae=[1,198],Ce=[1,199],Oe=[1,200],ke=[1,201],Pe=[1,202],Re=[1,176],Ie=[1,177],Ne=[1,179],Me=[1,180],Le=[1,186],De=[1,192],Fe=[1,184],je=[1,187],Be=[1,172],Ue=[1,170],ze=[1,191],Ve=[1,203],Ge=[2,4,5],He=[2,471],qe=[1,206],We=[1,211],Xe=[1,220],$e=[1,216],Ye=[10,72,78,93,98,118,128,162,168,169,183,198,232,245,247,306,310,602,764],Ze=[2,4,5,10,72,76,77,78,112,115,116,118,122,123,124,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,145,146,148,149,150,152,154,156,162,164,166,168,169,170,171,172,173,175,183,185,187,198,280,281,282,283,284,285,286,287,288,306,310,420,424,602,764],Ke=[2,4,5,10,53,72,74,76,77,78,89,93,95,98,99,107,112,115,116,118,122,123,124,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,145,146,148,149,150,152,154,156,162,164,166,168,169,170,171,172,173,175,179,180,181,183,185,187,189,198,206,208,222,223,224,225,226,227,228,229,232,239,242,243,245,247,266,267,280,281,282,283,284,285,286,287,288,290,296,300,306,308,309,310,311,312,313,314,315,316,317,318,319,320,321,322,323,324,325,326,330,331,332,333,335,338,339,396,400,401,404,406,408,409,417,418,420,424,434,436,437,439,440,441,442,443,447,448,451,452,464,470,505,507,508,517,602,764],Je=[1,249],Qe=[1,256],et=[1,265],tt=[1,270],nt=[1,269],rt=[2,4,5,10,72,77,78,93,98,107,118,128,131,132,137,143,145,149,152,154,156,162,168,169,179,180,181,183,198,232,245,247,265,266,270,271,273,280,281,282,283,284,285,286,287,288,290,291,292,293,294,295,296,297,298,299,302,303,306,310,312,317,420,424,602,764],it=[2,162],ot=[1,281],at=[10,74,78,306,310,505,602,764],st=[2,4,5,10,53,72,74,76,77,78,89,93,95,98,99,107,112,115,116,118,122,123,124,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,145,146,148,149,150,152,154,156,162,164,166,168,169,170,171,172,173,175,179,180,181,183,185,187,189,193,198,206,208,222,223,224,225,226,227,228,229,230,231,232,239,242,243,245,247,266,267,280,281,282,283,284,285,286,287,288,290,296,297,300,302,306,308,309,310,311,312,313,314,315,316,317,318,319,320,321,322,323,324,325,326,330,331,332,333,335,338,339,343,344,356,368,369,370,373,374,386,389,396,400,401,402,403,404,405,406,408,409,417,418,420,424,426,433,434,436,437,439,440,441,442,443,447,448,451,452,464,470,505,507,508,514,515,516,517,602,764],ut=[2,4,5,10,53,72,89,124,146,156,189,266,267,290,306,335,338,339,396,400,401,404,406,408,409,417,418,434,436,437,439,440,441,442,443,447,448,451,452,505,507,508,517,602,764],lt=[1,562],ct=[1,564],ft=[2,503],ht=[1,569],pt=[1,580],dt=[1,583],vt=[1,584],gt=[10,78,89,132,137,146,189,296,306,310,470,602,764],yt=[10,74,306,310,602,764],mt=[2,567],_t=[1,602],bt=[2,4,5,156],Et=[1,640],xt=[1,612],wt=[1,646],Tt=[1,647],St=[1,620],At=[1,631],Ct=[1,618],Ot=[1,626],kt=[1,619],Pt=[1,627],Rt=[1,629],It=[1,621],Nt=[1,622],Mt=[1,641],Lt=[1,638],Dt=[1,639],Ft=[1,615],jt=[1,617],Bt=[1,609],Ut=[1,610],zt=[1,611],Vt=[1,613],Gt=[1,614],Ht=[1,616],qt=[1,623],Wt=[1,624],Xt=[1,628],$t=[1,630],Yt=[1,632],Zt=[1,633],Kt=[1,634],Jt=[1,635],Qt=[1,636],en=[1,642],tn=[1,643],nn=[1,644],rn=[1,645],on=[2,287],an=[2,4,5,10,53,72,74,76,77,78,89,93,95,98,99,107,112,115,116,118,122,123,124,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,145,146,148,149,150,152,154,156,162,164,166,168,169,170,171,172,173,175,179,180,181,183,185,187,189,198,206,208,222,223,224,225,226,227,228,229,230,231,232,239,242,243,245,247,266,267,280,281,282,283,284,285,286,287,288,290,296,297,300,306,308,309,310,311,312,313,314,315,316,317,318,319,320,321,322,323,324,325,326,330,331,332,333,335,338,339,343,356,368,369,373,374,396,400,401,404,406,408,409,417,418,420,424,426,434,436,437,439,440,441,442,443,447,448,451,452,464,470,505,507,508,517,602,764],sn=[2,359],un=[1,668],ln=[1,678],cn=[2,4,5,10,53,72,74,76,77,78,89,93,95,98,99,107,112,115,116,118,122,123,124,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,145,146,148,149,150,152,154,156,162,164,166,168,169,170,171,172,173,175,179,180,181,183,185,187,189,198,206,208,222,223,224,225,226,227,228,229,230,231,232,239,242,243,245,247,266,267,280,281,282,283,284,285,286,287,288,290,296,300,306,308,309,310,311,312,313,314,315,316,317,318,319,320,321,322,323,324,325,326,330,331,332,333,335,338,339,396,400,401,404,406,408,409,417,418,420,424,426,434,436,437,439,440,441,442,443,447,448,451,452,464,470,505,507,508,517,602,764],fn=[1,694],hn=[1,703],pn=[1,702],dn=[2,4,5,10,72,74,78,93,98,118,128,162,168,169,206,208,222,223,224,225,226,227,228,229,230,231,232,245,247,306,310,602,764],vn=[10,72,74,78,93,98,118,128,162,168,169,206,208,222,223,224,225,226,227,228,229,230,231,232,245,247,306,310,602,764],gn=[2,202],yn=[1,725],mn=[10,72,78,93,98,118,128,162,168,169,183,232,245,247,306,310,602,764],_n=[2,163],bn=[1,728],En=[2,4,5,112],xn=[1,741],wn=[1,760],Tn=[1,740],Sn=[1,739],An=[1,734],Cn=[1,735],On=[1,737],kn=[1,738],Pn=[1,742],Rn=[1,743],In=[1,744],Nn=[1,745],Mn=[1,746],Ln=[1,747],Dn=[1,748],Fn=[1,749],jn=[1,750],Bn=[1,751],Un=[1,752],zn=[1,753],Vn=[1,754],Gn=[1,755],Hn=[1,756],qn=[1,757],Wn=[1,759],Xn=[1,761],$n=[1,762],Yn=[1,763],Zn=[1,764],Kn=[1,765],Jn=[1,766],Qn=[1,767],er=[1,770],tr=[1,771],nr=[1,772],rr=[1,773],ir=[1,774],or=[1,775],ar=[1,776],sr=[1,777],ur=[1,778],lr=[1,779],cr=[1,780],fr=[1,781],hr=[74,89,189],pr=[10,74,78,154,187,230,297,306,310,343,356,368,369,373,374,602,764],dr=[1,798],vr=[10,74,78,300,306,310,602,764],gr=[1,799],yr=[1,805],mr=[1,806],_r=[1,810],br=[10,74,78,306,310,602,764],Er=[2,4,5,77,131,132,137,143,145,149,152,154,156,179,180,181,265,266,270,271,273,280,281,282,283,284,285,286,287,288,290,291,292,293,294,295,296,297,298,299,302,303,312,317,420,424],xr=[10,72,78,93,98,107,118,128,162,168,169,183,198,232,245,247,306,310,602,764],wr=[2,4,5,10,72,77,78,93,98,107,118,128,131,132,137,143,145,149,152,154,156,162,164,168,169,179,180,181,183,185,187,195,198,232,245,247,265,266,270,271,273,280,281,282,283,284,285,286,287,288,290,291,292,293,294,295,296,297,298,299,302,303,306,310,312,317,420,424,602,764],Tr=[2,4,5,132,296],Sr=[1,844],Ar=[10,74,76,78,306,310,602,764],Cr=[2,738],Or=[10,74,76,78,132,139,141,145,152,306,310,420,424,602,764],kr=[2,1161],Pr=[10,74,76,78,139,141,145,152,306,310,420,424,602,764],Rr=[10,74,76,78,139,141,145,306,310,420,424,602,764],Ir=[10,74,78,139,141,306,310,602,764],Nr=[10,78,89,132,146,189,296,306,310,470,602,764],Mr=[335,338,339],Lr=[2,764],Dr=[1,869],Fr=[1,870],jr=[1,871],Br=[1,872],Ur=[1,881],zr=[1,880],Vr=[164,166,334],Gr=[2,444],Hr=[1,936],qr=[2,4,5,77,131,156,290,291,292,293],Wr=[1,951],Xr=[2,4,5,10,53,72,74,76,77,78,89,93,95,98,99,107,112,118,122,124,128,129,130,131,132,134,135,137,139,140,141,142,143,145,146,148,149,150,152,154,156,162,164,166,168,169,170,171,172,173,175,179,181,183,185,187,189,198,206,208,222,223,224,225,226,227,228,229,232,239,242,243,245,247,266,267,280,281,282,283,284,285,286,287,288,290,296,300,306,308,309,310,311,313,314,315,317,318,319,320,321,322,323,324,325,326,330,331,332,333,335,338,339,396,400,401,404,406,408,409,417,418,420,424,434,436,437,439,440,441,442,443,447,448,451,452,464,470,505,507,508,517,602,764],$r=[2,4,5,10,53,72,74,76,77,78,89,93,95,98,99,107,112,115,116,118,122,123,124,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,145,146,148,149,150,152,154,156,162,164,166,168,169,170,171,172,173,175,179,180,181,183,185,187,189,198,206,208,222,223,224,225,226,227,228,229,232,239,242,243,245,247,266,267,280,281,282,283,284,285,286,287,288,290,296,300,306,308,309,310,311,312,313,314,315,317,318,319,320,321,322,323,324,325,326,330,331,332,333,335,338,339,396,400,401,404,406,408,409,417,418,420,424,434,436,437,439,440,441,442,443,447,448,451,452,464,470,505,507,508,517,602,764],Yr=[2,375],Zr=[1,958],Kr=[306,308,310],Jr=[74,300],Qr=[74,300,426],ei=[1,965],ti=[2,4,5,10,53,72,74,76,78,89,93,95,98,99,107,112,115,116,118,122,123,124,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,145,146,148,149,150,152,154,156,162,164,166,168,169,170,171,172,173,175,179,180,181,183,185,187,189,198,206,208,222,223,224,225,226,227,228,229,232,239,242,243,245,247,266,267,280,281,282,283,284,285,286,287,288,290,296,300,306,308,309,310,311,312,313,314,315,316,317,318,319,320,321,322,323,324,325,326,330,331,332,333,335,338,339,396,400,401,404,406,408,409,417,418,420,424,434,436,437,439,440,441,442,443,447,448,451,452,464,470,505,507,508,517,602,764],ni=[74,426],ri=[1,978],ii=[1,977],oi=[1,984],ai=[10,72,78,93,98,118,128,162,168,169,232,245,247,306,310,602,764],si=[1,1010],ui=[10,72,78,306,310,602,764],li=[1,1016],ci=[1,1017],fi=[1,1018],hi=[2,4,5,10,72,74,76,77,78,112,115,116,118,122,123,124,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,145,146,148,149,150,152,154,156,162,164,166,168,169,170,171,172,173,175,179,180,181,183,185,187,198,280,281,282,283,284,285,286,287,288,306,310,420,424,602,764],pi=[1,1068],di=[1,1067],vi=[1,1081],gi=[1,1080],yi=[1,1088],mi=[10,72,74,78,93,98,107,118,128,162,168,169,183,198,232,245,247,306,310,602,764],_i=[1,1119],bi=[10,78,89,146,189,306,310,470,602,764],Ei=[1,1139],xi=[1,1138],wi=[1,1137],Ti=[2,4,5,10,53,72,74,76,77,78,89,93,95,98,99,107,112,115,116,118,122,123,124,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,145,146,148,149,150,152,154,156,162,164,166,168,169,170,171,172,173,175,179,180,181,183,185,187,189,198,206,208,222,223,224,225,226,227,228,229,230,232,239,242,243,245,247,266,267,280,281,282,283,284,285,286,287,288,290,296,297,300,306,308,309,310,311,312,313,314,315,316,317,318,319,320,321,322,323,324,325,326,330,331,332,333,335,338,339,343,356,368,369,373,374,396,400,401,404,406,408,409,417,418,420,424,434,436,437,439,440,441,442,443,447,448,451,452,464,470,505,507,508,517,602,764],Si=[1,1153],Ai=[2,4,5,10,53,72,74,76,77,78,89,93,95,98,99,107,112,118,122,124,128,129,130,131,132,134,135,137,139,140,143,145,146,148,149,150,152,154,156,162,164,166,168,169,170,171,172,173,175,181,183,185,187,189,198,206,208,222,223,224,225,226,227,228,229,232,239,242,243,245,247,266,267,280,281,282,283,284,285,286,287,288,290,296,300,306,308,309,310,311,313,314,315,320,321,322,323,324,325,326,330,331,332,333,335,338,339,396,400,401,404,406,408,409,417,418,420,424,434,436,437,439,440,441,442,443,447,448,451,452,464,470,505,507,508,517,602,764],Ci=[2,4,5,10,53,72,74,76,77,78,89,93,95,98,99,107,112,118,122,124,128,129,130,131,132,134,135,137,139,140,143,145,146,148,149,150,152,154,156,162,164,166,168,169,170,171,172,173,175,181,183,185,187,189,198,206,208,222,223,224,225,226,227,228,229,232,239,242,243,245,247,266,267,280,281,282,283,284,285,286,287,288,290,296,300,306,308,309,310,311,313,315,320,321,322,323,324,325,326,330,331,332,333,335,338,339,396,400,401,404,406,408,409,417,418,420,424,434,436,437,439,440,441,442,443,447,448,451,452,464,470,505,507,508,517,602,764],Oi=[2,4,5,10,53,72,74,76,77,78,89,93,95,98,99,107,112,118,122,124,128,129,130,131,132,133,134,135,137,138,139,140,141,142,143,145,146,148,149,150,152,154,156,162,164,166,168,169,170,171,172,173,175,179,180,181,183,185,187,189,198,206,208,222,223,224,225,226,227,228,229,232,239,242,243,245,247,266,267,280,281,282,283,284,285,286,287,288,290,296,300,306,308,309,310,311,313,314,315,317,318,319,320,321,322,323,324,325,326,330,331,332,333,335,338,339,396,400,401,404,406,408,409,417,418,420,424,434,436,437,439,440,441,442,443,447,448,451,452,464,470,505,507,508,517,602,764],ki=[2,4,5,10,53,72,74,76,77,78,89,93,95,98,99,107,112,118,122,124,128,129,130,131,132,134,135,137,139,140,141,142,143,145,146,148,149,150,152,154,156,162,164,166,168,169,170,171,172,173,175,181,183,185,187,189,198,206,208,222,223,224,225,226,227,228,229,232,239,242,243,245,247,266,267,280,281,282,283,284,285,286,287,288,290,296,300,306,308,309,310,311,313,314,315,318,319,320,321,322,323,324,325,326,330,331,332,333,335,338,339,396,400,401,404,406,408,409,417,418,420,424,434,436,437,439,440,441,442,443,447,448,451,452,464,470,505,507,508,517,602,764],Pi=[2,4,5,10,53,72,74,76,77,78,89,93,95,98,99,107,118,122,124,128,129,130,131,132,134,135,137,139,140,143,145,146,148,149,150,152,154,156,162,164,166,168,169,170,171,172,173,175,181,183,185,187,189,198,206,208,222,223,224,225,226,227,228,229,232,239,242,243,245,247,266,267,280,281,282,283,284,285,286,287,288,290,296,300,306,308,309,310,314,320,321,322,323,324,325,326,330,331,333,335,338,339,396,400,401,404,406,408,409,417,418,420,424,434,436,437,439,440,441,442,443,447,448,451,452,464,470,505,507,508,517,602,764],Ri=[2,406],Ii=[2,4,5,10,53,72,74,76,77,78,89,93,95,98,107,118,122,128,129,130,131,132,134,135,137,143,145,146,148,149,150,152,156,162,164,166,168,169,170,171,172,173,175,181,183,185,187,189,198,206,208,222,223,224,225,226,227,228,229,232,239,242,243,245,247,266,267,280,281,282,283,284,285,286,287,288,290,296,300,306,308,309,310,314,330,331,333,335,338,339,396,400,401,404,406,408,409,417,418,420,424,434,436,437,439,440,441,442,443,447,448,451,452,464,470,505,507,508,517,602,764],Ni=[2,285],Mi=[2,4,5,10,53,72,74,76,77,78,89,93,95,98,99,107,112,115,116,118,122,123,124,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,145,146,148,149,150,152,154,156,162,164,166,168,169,170,171,172,173,175,179,180,181,183,185,187,189,198,206,208,222,223,224,225,226,227,228,229,232,239,242,243,245,247,266,267,280,281,282,283,284,285,286,287,288,290,296,300,306,308,309,310,311,312,313,314,315,316,317,318,319,320,321,322,323,324,325,326,330,331,332,333,335,338,339,396,400,401,404,406,408,409,417,418,420,424,426,434,436,437,439,440,441,442,443,447,448,451,452,464,470,505,507,508,517,602,764],Li=[10,78,306,310,602,764],Di=[1,1189],Fi=[10,77,78,143,145,152,181,302,306,310,420,424,602,764],ji=[10,74,78,306,308,310,464,602,764],Bi=[1,1200],Ui=[10,72,78,118,128,162,168,169,232,245,247,306,310,602,764],zi=[10,72,74,78,93,98,118,128,162,168,169,183,198,232,245,247,306,310,602,764],Vi=[2,4,5,72,76,77,78,112,115,116,118,122,123,124,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,145,146,148,149,150,152,154,156,162,164,166,168,169,170,171,172,173,175,185,187,280,281,282,283,284,285,286,287,288,420,424],Gi=[2,4,5,72,74,76,77,78,112,115,116,118,122,123,124,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,145,146,148,149,150,152,154,156,162,164,166,168,169,170,171,172,173,175,185,187,280,281,282,283,284,285,286,287,288,420,424],Hi=[2,1085],qi=[2,4,5,72,74,76,77,112,115,116,118,122,123,124,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,145,146,148,149,150,152,154,156,162,164,166,168,169,170,171,172,173,175,185,187,280,281,282,283,284,285,286,287,288,420,424],Wi=[1,1252],Xi=[10,74,78,128,306,308,310,464,602,764],$i=[115,116,124],Yi=[2,584],Zi=[1,1280],Ki=[76,139],Ji=[2,724],Qi=[1,1297],eo=[1,1298],to=[2,4,5,10,53,72,76,89,124,146,156,189,230,266,267,290,306,310,335,338,339,396,400,401,404,406,408,409,417,418,434,436,437,439,440,441,442,443,447,448,451,452,505,507,508,517,602,764],no=[2,330],ro=[1,1322],io=[1,1336],oo=[1,1338],ao=[2,487],so=[74,78],uo=[10,306,308,310,464,602,764],lo=[10,72,78,118,162,168,169,232,245,247,306,310,602,764],co=[1,1354],fo=[1,1358],ho=[1,1359],po=[1,1361],vo=[1,1362],go=[1,1363],yo=[1,1364],mo=[1,1365],_o=[1,1366],bo=[1,1367],Eo=[1,1368],xo=[10,72,74,78,93,98,118,128,162,168,169,206,208,222,223,224,225,226,227,228,229,232,245,247,306,310,602,764],wo=[1,1393],To=[10,72,78,118,162,168,169,245,247,306,310,602,764],So=[10,72,78,93,98,118,128,162,168,169,206,208,222,223,224,225,226,227,228,229,232,245,247,306,310,602,764],Ao=[1,1490],Co=[1,1492],Oo=[2,4,5,77,143,145,152,156,181,290,291,292,293,302,420,424],ko=[1,1506],Po=[10,72,74,78,162,168,169,245,247,306,310,602,764],Ro=[1,1524],Io=[1,1526],No=[1,1527],Mo=[1,1523],Lo=[1,1522],Do=[1,1521],Fo=[1,1528],jo=[1,1518],Bo=[1,1519],Uo=[1,1520],zo=[1,1545],Vo=[2,4,5,10,53,72,89,124,146,156,189,266,267,290,306,310,335,338,339,396,400,401,404,406,408,409,417,418,434,436,437,439,440,441,442,443,447,448,451,452,505,507,508,517,602,764],Go=[1,1556],Ho=[1,1564],qo=[1,1563],Wo=[10,72,78,162,168,169,245,247,306,310,602,764],Xo=[10,72,78,93,98,118,128,162,168,169,206,208,222,223,224,225,226,227,228,229,230,231,232,245,247,306,310,602,764],$o=[2,4,5,10,72,78,93,98,118,128,162,168,169,206,208,222,223,224,225,226,227,228,229,230,231,232,245,247,306,310,602,764],Yo=[1,1621],Zo=[1,1623],Ko=[1,1620],Jo=[1,1622],Qo=[187,193,368,369,370,373],ea=[2,515],ta=[1,1628],na=[1,1647],ra=[10,72,78,162,168,169,306,310,602,764],ia=[1,1657],oa=[1,1658],aa=[1,1659],sa=[1,1678],ua=[4,10,243,306,310,343,356,602,764],la=[1,1726],ca=[10,72,74,78,118,162,168,169,239,245,247,306,310,602,764],fa=[2,4,5,77],ha=[1,1820],pa=[1,1832],da=[1,1851],va=[10,72,78,162,168,169,306,310,415,602,764],ga=[10,74,78,230,306,310,602,764],ya={trace:function(){},yy:{},symbols_:{error:2,Literal:3,LITERAL:4,BRALITERAL:5,NonReserved:6,LiteralWithSpaces:7,main:8,Statements:9,EOF:10,Statements_group0:11,AStatement:12,ExplainStatement:13,EXPLAIN:14,QUERY:15,PLAN:16,Statement:17,AlterTable:18,AttachDatabase:19,Call:20,CreateDatabase:21,CreateIndex:22,CreateGraph:23,CreateTable:24,CreateView:25,CreateEdge:26,CreateVertex:27,Declare:28,Delete:29,DetachDatabase:30,DropDatabase:31,DropIndex:32,DropTable:33,DropView:34,If:35,Insert:36,Merge:37,Reindex:38,RenameTable:39,Select:40,ShowCreateTable:41,ShowColumns:42,ShowDatabases:43,ShowIndex:44,ShowTables:45,TruncateTable:46,WithSelect:47,CreateTrigger:48,DropTrigger:49,BeginTransaction:50,CommitTransaction:51,RollbackTransaction:52,EndTransaction:53,UseDatabase:54,Update:55,JavaScript:56,Source:57,Assert:58,While:59,Continue:60,Break:61,BeginEnd:62,Print:63,Require:64,SetVariable:65,ExpressionStatement:66,AddRule:67,Query:68,Echo:69,CreateFunction:70,CreateAggregate:71,WITH:72,WithTablesList:73,COMMA:74,WithTable:75,AS:76,LPAR:77,RPAR:78,SelectClause:79,Select_option0:80,IntoClause:81,FromClause:82,Select_option1:83,WhereClause:84,GroupClause:85,OrderClause:86,LimitClause:87,UnionClause:88,SEARCH:89,Select_repetition0:90,Select_option2:91,PivotClause:92,PIVOT:93,Expression:94,FOR:95,PivotClause_option0:96,PivotClause_option1:97,UNPIVOT:98,IN:99,ColumnsList:100,PivotClause_option2:101,PivotClause2:102,AsList:103,AsLiteral:104,AsPart:105,RemoveClause:106,REMOVE:107,RemoveClause_option0:108,RemoveColumnsList:109,RemoveColumn:110,Column:111,LIKE:112,StringValue:113,ArrowDot:114,ARROW:115,DOT:116,SearchSelector:117,ORDER:118,BY:119,OrderExpressionsList:120,SearchSelector_option0:121,DOTDOT:122,CARET:123,EQ:124,SearchSelector_repetition_plus0:125,SearchSelector_repetition_plus1:126,SearchSelector_option1:127,WHERE:128,OF:129,CLASS:130,NUMBER:131,STRING:132,SLASH:133,VERTEX:134,EDGE:135,EXCLAMATION:136,SHARP:137,MODULO:138,GT:139,LT:140,GTGT:141,LTLT:142,DOLLAR:143,Json:144,AT:145,SET:146,SetColumnsList:147,TO:148,VALUE:149,ROW:150,ExprList:151,COLON:152,PlusStar:153,NOT:154,SearchSelector_repetition2:155,IF:156,SearchSelector_repetition3:157,Aggregator:158,SearchSelector_repetition4:159,SearchSelector_group0:160,SearchSelector_repetition5:161,UNION:162,SearchSelectorList:163,ALL:164,SearchSelector_repetition6:165,ANY:166,SearchSelector_repetition7:167,INTERSECT:168,EXCEPT:169,AND:170,OR:171,PATH:172,RETURN:173,ResultColumns:174,REPEAT:175,SearchSelector_repetition8:176,SearchSelectorList_repetition0:177,SearchSelectorList_repetition1:178,PLUS:179,STAR:180,QUESTION:181,SearchFrom:182,FROM:183,SelectModifier:184,DISTINCT:185,TopClause:186,UNIQUE:187,SelectClause_option0:188,SELECT:189,COLUMN:190,MATRIX:191,TEXTSTRING:192,INDEX:193,RECORDSET:194,TOP:195,NumValue:196,TopClause_option0:197,INTO:198,Table:199,FuncValue:200,ParamValue:201,VarValue:202,FromTablesList:203,JoinTablesList:204,ApplyClause:205,CROSS:206,APPLY:207,OUTER:208,FromTable:209,FromTable_option0:210,FromTable_option1:211,INDEXED:212,INSERTED:213,FromString:214,JoinTable:215,JoinMode:216,JoinTableAs:217,OnClause:218,JoinTableAs_option0:219,JoinTableAs_option1:220,JoinModeMode:221,NATURAL:222,JOIN:223,INNER:224,LEFT:225,RIGHT:226,FULL:227,SEMI:228,ANTI:229,ON:230,USING:231,GROUP:232,GroupExpressionsList:233,HavingClause:234,GroupExpression:235,GROUPING:236,ROLLUP:237,CUBE:238,HAVING:239,CORRESPONDING:240,OrderExpression:241,DIRECTION:242,COLLATE:243,NOCASE:244,LIMIT:245,OffsetClause:246,OFFSET:247,LimitClause_option0:248,FETCH:249,LimitClause_option1:250,LimitClause_option2:251,LimitClause_option3:252,ResultColumn:253,Star:254,AggrValue:255,Op:256,LogicValue:257,NullValue:258,ExistsValue:259,CaseValue:260,CastClause:261,ArrayValue:262,NewClause:263,Expression_group0:264,CURRENT_TIMESTAMP:265,JAVASCRIPT:266,CREATE:267,FUNCTION:268,AGGREGATE:269,NEW:270,CAST:271,ColumnType:272,CONVERT:273,PrimitiveValue:274,OverClause:275,OVER:276,OverPartitionClause:277,OverOrderByClause:278,PARTITION:279,SUM:280,COUNT:281,MIN:282,MAX:283,AVG:284,FIRST:285,LAST:286,AGGR:287,ARRAY:288,FuncValue_option0:289,REPLACE:290,DATEADD:291,DATEDIFF:292,INTERVAL:293,TRUE:294,FALSE:295,NSTRING:296,NULL:297,EXISTS:298,ARRAYLBRA:299,RBRA:300,ParamValue_group0:301,BRAQUESTION:302,CASE:303,WhensList:304,ElseClause:305,END:306,When:307,WHEN:308,THEN:309,ELSE:310,REGEXP:311,TILDA:312,GLOB:313,ESCAPE:314,NOT_LIKE:315,BARBAR:316,MINUS:317,AMPERSAND:318,BAR:319,GE:320,LE:321,EQEQ:322,EQEQEQ:323,NE:324,NEEQEQ:325,NEEQEQEQ:326,CondOp:327,AllSome:328,ColFunc:329,BETWEEN:330,NOT_BETWEEN:331,IS:332,DOUBLECOLON:333,SOME:334,UPDATE:335,SetColumn:336,SetColumn_group0:337,DELETE:338,INSERT:339,Into:340,Values:341,ValuesListsList:342,DEFAULT:343,VALUES:344,ValuesList:345,Value:346,DateValue:347,TemporaryClause:348,TableClass:349,IfNotExists:350,CreateTableDefClause:351,CreateTableOptionsClause:352,TABLE:353,CreateTableOptions:354,CreateTableOption:355,IDENTITY:356,TEMP:357,ColumnDefsList:358,ConstraintsList:359,Constraint:360,ConstraintName:361,PrimaryKey:362,ForeignKey:363,UniqueKey:364,IndexKey:365,Check:366,CONSTRAINT:367,CHECK:368,PRIMARY:369,KEY:370,PrimaryKey_option0:371,ColsList:372,FOREIGN:373,REFERENCES:374,ForeignKey_option0:375,OnForeignKeyClause:376,ParColsList:377,OnDeleteClause:378,OnUpdateClause:379,NO:380,ACTION:381,UniqueKey_option0:382,UniqueKey_option1:383,ColumnDef:384,ColumnConstraintsClause:385,ColumnConstraints:386,SingularColumnType:387,NumberMax:388,ENUM:389,MAXNUM:390,ColumnConstraintsList:391,ColumnConstraint:392,ParLiteral:393,ColumnConstraint_option0:394,ColumnConstraint_option1:395,DROP:396,DropTable_group0:397,IfExists:398,TablesList:399,ALTER:400,RENAME:401,ADD:402,MODIFY:403,ATTACH:404,DATABASE:405,DETACH:406,AsClause:407,USE:408,SHOW:409,VIEW:410,CreateView_option0:411,CreateView_option1:412,SubqueryRestriction:413,READ:414,ONLY:415,OPTION:416,SOURCE:417,ASSERT:418,JsonObject:419,ATLBRA:420,JsonArray:421,JsonValue:422,JsonPrimitiveValue:423,LCUR:424,JsonPropertiesList:425,RCUR:426,JsonElementsList:427,JsonProperty:428,OnOff:429,SetPropsList:430,AtDollar:431,SetProp:432,OFF:433,COMMIT:434,TRANSACTION:435,ROLLBACK:436,BEGIN:437,ElseStatement:438,WHILE:439,CONTINUE:440,BREAK:441,PRINT:442,REQUIRE:443,StringValuesList:444,PluginsList:445,Plugin:446,ECHO:447,DECLARE:448,DeclaresList:449,DeclareItem:450,TRUNCATE:451,MERGE:452,MergeInto:453,MergeUsing:454,MergeOn:455,MergeMatchedList:456,OutputClause:457,MergeMatched:458,MergeNotMatched:459,MATCHED:460,MergeMatchedAction:461,MergeNotMatchedAction:462,TARGET:463,OUTPUT:464,CreateVertex_option0:465,CreateVertex_option1:466,CreateVertex_option2:467,CreateVertexSet:468,SharpValue:469,CONTENT:470,CreateEdge_option0:471,GRAPH:472,GraphList:473,GraphVertexEdge:474,GraphElement:475,GraphVertexEdge_option0:476,GraphVertexEdge_option1:477,GraphElementVar:478,GraphVertexEdge_option2:479,GraphVertexEdge_option3:480,GraphVertexEdge_option4:481,GraphVar:482,GraphAsClause:483,GraphAtClause:484,GraphElement2:485,GraphElement2_option0:486,GraphElement2_option1:487,GraphElement2_option2:488,GraphElement2_option3:489,GraphElement_option0:490,GraphElement_option1:491,GraphElement_option2:492,SharpLiteral:493,GraphElement_option3:494,GraphElement_option4:495,GraphElement_option5:496,ColonLiteral:497,DeleteVertex:498,DeleteVertex_option0:499,DeleteEdge:500,DeleteEdge_option0:501,DeleteEdge_option1:502,DeleteEdge_option2:503,Term:504,COLONDASH:505,TermsList:506,QUESTIONDASH:507,CALL:508,TRIGGER:509,BeforeAfter:510,InsertDeleteUpdate:511,CreateTrigger_option0:512,CreateTrigger_option1:513,BEFORE:514,AFTER:515,INSTEAD:516,REINDEX:517,A:518,ABSENT:519,ABSOLUTE:520,ACCORDING:521,ADA:522,ADMIN:523,ALWAYS:524,ASC:525,ASSERTION:526,ASSIGNMENT:527,ATTRIBUTE:528,ATTRIBUTES:529,BASE64:530,BERNOULLI:531,BLOCKED:532,BOM:533,BREADTH:534,C:535,CASCADE:536,CATALOG:537,CATALOG_NAME:538,CHAIN:539,CHARACTERISTICS:540,CHARACTERS:541,CHARACTER_SET_CATALOG:542,CHARACTER_SET_NAME:543,CHARACTER_SET_SCHEMA:544,CLASS_ORIGIN:545,COBOL:546,COLLATION:547,COLLATION_CATALOG:548,COLLATION_NAME:549,COLLATION_SCHEMA:550,COLUMNS:551,COLUMN_NAME:552,COMMAND_FUNCTION:553,COMMAND_FUNCTION_CODE:554,COMMITTED:555,CONDITION_NUMBER:556,CONNECTION:557,CONNECTION_NAME:558,CONSTRAINTS:559,CONSTRAINT_CATALOG:560,CONSTRAINT_NAME:561,CONSTRAINT_SCHEMA:562,CONSTRUCTOR:563,CONTROL:564,CURSOR_NAME:565,DATA:566,DATETIME_INTERVAL_CODE:567,DATETIME_INTERVAL_PRECISION:568,DB:569,DEFAULTS:570,DEFERRABLE:571,DEFERRED:572,DEFINED:573,DEFINER:574,DEGREE:575,DEPTH:576,DERIVED:577,DESC:578,DESCRIPTOR:579,DIAGNOSTICS:580,DISPATCH:581,DOCUMENT:582,DOMAIN:583,DYNAMIC_FUNCTION:584,DYNAMIC_FUNCTION_CODE:585,EMPTY:586,ENCODING:587,ENFORCED:588,EXCLUDE:589,EXCLUDING:590,EXPRESSION:591,FILE:592,FINAL:593,FLAG:594,FOLLOWING:595,FORTRAN:596,FOUND:597,FS:598,G:599,GENERAL:600,GENERATED:601,GO:602,GOTO:603,GRANTED:604,HEX:605,HIERARCHY:606,ID:607,IGNORE:608,IMMEDIATE:609,IMMEDIATELY:610,IMPLEMENTATION:611,INCLUDING:612,INCREMENT:613,INDENT:614,INITIALLY:615,INPUT:616,INSTANCE:617,INSTANTIABLE:618,INTEGRITY:619,INVOKER:620,ISOLATION:621,K:622,KEY_MEMBER:623,KEY_TYPE:624,LENGTH:625,LEVEL:626,LIBRARY:627,LINK:628,LOCATION:629,LOCATOR:630,M:631,MAP:632,MAPPING:633,MAXVALUE:634,MESSAGE_LENGTH:635,MESSAGE_OCTET_LENGTH:636,MESSAGE_TEXT:637,MINVALUE:638,MORE:639,MUMPS:640,NAME:641,NAMES:642,NAMESPACE:643,NESTING:644,NEXT:645,NFC:646,NFD:647,NFKC:648,NFKD:649,NIL:650,NORMALIZED:651,NULLABLE:652,NULLS:653,OBJECT:654,OCTETS:655,OPTIONS:656,ORDERING:657,ORDINALITY:658,OTHERS:659,OVERRIDING:660,P:661,PAD:662,PARAMETER_MODE:663,PARAMETER_NAME:664,PARAMETER_ORDINAL_POSITION:665,PARAMETER_SPECIFIC_CATALOG:666,PARAMETER_SPECIFIC_NAME:667,PARAMETER_SPECIFIC_SCHEMA:668,PARTIAL:669,PASCAL:670,PASSING:671,PASSTHROUGH:672,PERMISSION:673,PLACING:674,PLI:675,PRECEDING:676,PRESERVE:677,PRIOR:678,PRIVILEGES:679,PUBLIC:680,RECOVERY:681,RELATIVE:682,REPEATABLE:683,REQUIRING:684,RESPECT:685,RESTART:686,RESTORE:687,RESTRICT:688,RETURNED_CARDINALITY:689,RETURNED_LENGTH:690,RETURNED_OCTET_LENGTH:691,RETURNED_SQLSTATE:692,RETURNING:693,ROLE:694,ROUTINE:695,ROUTINE_CATALOG:696,ROUTINE_NAME:697,ROUTINE_SCHEMA:698,ROW_COUNT:699,SCALE:700,SCHEMA:701,SCHEMA_NAME:702,SCOPE_CATALOG:703,SCOPE_NAME:704,SCOPE_SCHEMA:705,SECTION:706,SECURITY:707,SELECTIVE:708,SELF:709,SEQUENCE:710,SERIALIZABLE:711,SERVER:712,SERVER_NAME:713,SESSION:714,SETS:715,SIMPLE:716,SIZE:717,SPACE:718,SPECIFIC_NAME:719,STANDALONE:720,STATE:721,STATEMENT:722,STRIP:723,STRUCTURE:724,STYLE:725,SUBCLASS_ORIGIN:726,T:727,TABLE_NAME:728,TEMPORARY:729,TIES:730,TOKEN:731,TOP_LEVEL_COUNT:732,TRANSACTIONS_COMMITTED:733,TRANSACTIONS_ROLLED_BACK:734,TRANSACTION_ACTIVE:735,TRANSFORM:736,TRANSFORMS:737,TRIGGER_CATALOG:738,TRIGGER_NAME:739,TRIGGER_SCHEMA:740,TYPE:741,UNBOUNDED:742,UNCOMMITTED:743,UNDER:744,UNLINK:745,UNNAMED:746,UNTYPED:747,URI:748,USAGE:749,USER_DEFINED_TYPE_CATALOG:750,USER_DEFINED_TYPE_CODE:751,USER_DEFINED_TYPE_NAME:752,USER_DEFINED_TYPE_SCHEMA:753,VALID:754,VERSION:755,WHITESPACE:756,WORK:757,WRAPPER:758,WRITE:759,XMLDECLARATION:760,XMLSCHEMA:761,YES:762,ZONE:763,SEMICOLON:764,PERCENT:765,ROWS:766,FuncValue_option0_group0:767,$accept:0,$end:1},terminals_:{2:"error",4:"LITERAL",5:"BRALITERAL",10:"EOF",14:"EXPLAIN",15:"QUERY",16:"PLAN",53:"EndTransaction",72:"WITH",74:"COMMA",76:"AS",77:"LPAR",78:"RPAR",89:"SEARCH",93:"PIVOT",95:"FOR",98:"UNPIVOT",99:"IN",107:"REMOVE",112:"LIKE",115:"ARROW",116:"DOT",118:"ORDER",119:"BY",122:"DOTDOT",123:"CARET",124:"EQ",128:"WHERE",129:"OF",130:"CLASS",131:"NUMBER",132:"STRING",133:"SLASH",134:"VERTEX",135:"EDGE",136:"EXCLAMATION",137:"SHARP",138:"MODULO",139:"GT",140:"LT",141:"GTGT",142:"LTLT",143:"DOLLAR",145:"AT",146:"SET",148:"TO",149:"VALUE",150:"ROW",152:"COLON",154:"NOT",156:"IF",162:"UNION",164:"ALL",166:"ANY",168:"INTERSECT",169:"EXCEPT",170:"AND",171:"OR",172:"PATH",173:"RETURN",175:"REPEAT",179:"PLUS",180:"STAR",181:"QUESTION",183:"FROM",185:"DISTINCT",187:"UNIQUE",189:"SELECT",190:"COLUMN",191:"MATRIX",192:"TEXTSTRING",193:"INDEX",194:"RECORDSET",195:"TOP",198:"INTO",206:"CROSS",207:"APPLY",208:"OUTER",212:"INDEXED",213:"INSERTED",222:"NATURAL",223:"JOIN",224:"INNER",225:"LEFT",226:"RIGHT",227:"FULL",228:"SEMI",229:"ANTI",230:"ON",231:"USING",232:"GROUP",236:"GROUPING",237:"ROLLUP",238:"CUBE",239:"HAVING",240:"CORRESPONDING",242:"DIRECTION",243:"COLLATE",244:"NOCASE",245:"LIMIT",247:"OFFSET",249:"FETCH",265:"CURRENT_TIMESTAMP",266:"JAVASCRIPT",267:"CREATE",268:"FUNCTION",269:"AGGREGATE",270:"NEW",271:"CAST",273:"CONVERT",276:"OVER",279:"PARTITION",280:"SUM",281:"COUNT",282:"MIN",283:"MAX",284:"AVG",285:"FIRST",286:"LAST",287:"AGGR",288:"ARRAY",290:"REPLACE",291:"DATEADD",292:"DATEDIFF",293:"INTERVAL",294:"TRUE",295:"FALSE",296:"NSTRING",297:"NULL",298:"EXISTS",299:"ARRAYLBRA",300:"RBRA",302:"BRAQUESTION",303:"CASE",306:"END",308:"WHEN",309:"THEN",310:"ELSE",311:"REGEXP",312:"TILDA",313:"GLOB",314:"ESCAPE",315:"NOT_LIKE",316:"BARBAR",317:"MINUS",318:"AMPERSAND",319:"BAR",320:"GE",321:"LE",322:"EQEQ",323:"EQEQEQ",324:"NE",325:"NEEQEQ",326:"NEEQEQEQ",330:"BETWEEN",331:"NOT_BETWEEN",332:"IS",333:"DOUBLECOLON",334:"SOME",335:"UPDATE",338:"DELETE",339:"INSERT",343:"DEFAULT",344:"VALUES",347:"DateValue",353:"TABLE",356:"IDENTITY",357:"TEMP",367:"CONSTRAINT",368:"CHECK",369:"PRIMARY",370:"KEY",373:"FOREIGN",374:"REFERENCES",380:"NO",381:"ACTION",386:"ColumnConstraints",389:"ENUM",390:"MAXNUM",396:"DROP",400:"ALTER",401:"RENAME",402:"ADD",403:"MODIFY",404:"ATTACH",405:"DATABASE",406:"DETACH",408:"USE",409:"SHOW",410:"VIEW",414:"READ",415:"ONLY",416:"OPTION",417:"SOURCE",418:"ASSERT",420:"ATLBRA",424:"LCUR",426:"RCUR",433:"OFF",434:"COMMIT",435:"TRANSACTION",436:"ROLLBACK",437:"BEGIN",439:"WHILE",440:"CONTINUE",441:"BREAK",442:"PRINT",443:"REQUIRE",447:"ECHO",448:"DECLARE",451:"TRUNCATE",452:"MERGE",460:"MATCHED",463:"TARGET",464:"OUTPUT",470:"CONTENT",472:"GRAPH",505:"COLONDASH",507:"QUESTIONDASH",508:"CALL",509:"TRIGGER",514:"BEFORE",515:"AFTER",516:"INSTEAD",517:"REINDEX",518:"A",519:"ABSENT",520:"ABSOLUTE",521:"ACCORDING",522:"ADA",523:"ADMIN",524:"ALWAYS",525:"ASC",526:"ASSERTION",527:"ASSIGNMENT",528:"ATTRIBUTE",529:"ATTRIBUTES",530:"BASE64",531:"BERNOULLI",532:"BLOCKED",533:"BOM",534:"BREADTH",535:"C",536:"CASCADE",537:"CATALOG",538:"CATALOG_NAME",539:"CHAIN",540:"CHARACTERISTICS",541:"CHARACTERS",542:"CHARACTER_SET_CATALOG",543:"CHARACTER_SET_NAME",544:"CHARACTER_SET_SCHEMA",545:"CLASS_ORIGIN",546:"COBOL",547:"COLLATION",548:"COLLATION_CATALOG",549:"COLLATION_NAME",550:"COLLATION_SCHEMA",551:"COLUMNS",552:"COLUMN_NAME",553:"COMMAND_FUNCTION",554:"COMMAND_FUNCTION_CODE",555:"COMMITTED",556:"CONDITION_NUMBER",557:"CONNECTION",558:"CONNECTION_NAME",559:"CONSTRAINTS",560:"CONSTRAINT_CATALOG",561:"CONSTRAINT_NAME",562:"CONSTRAINT_SCHEMA",563:"CONSTRUCTOR",564:"CONTROL",565:"CURSOR_NAME",566:"DATA",567:"DATETIME_INTERVAL_CODE",568:"DATETIME_INTERVAL_PRECISION",569:"DB",570:"DEFAULTS",571:"DEFERRABLE",572:"DEFERRED",573:"DEFINED",574:"DEFINER",575:"DEGREE",576:"DEPTH",577:"DERIVED",578:"DESC",579:"DESCRIPTOR",580:"DIAGNOSTICS",581:"DISPATCH",582:"DOCUMENT",583:"DOMAIN",584:"DYNAMIC_FUNCTION",585:"DYNAMIC_FUNCTION_CODE",586:"EMPTY",587:"ENCODING",588:"ENFORCED",589:"EXCLUDE",590:"EXCLUDING",591:"EXPRESSION",592:"FILE",593:"FINAL",594:"FLAG",595:"FOLLOWING",596:"FORTRAN",597:"FOUND",598:"FS",599:"G",600:"GENERAL",601:"GENERATED",602:"GO",603:"GOTO",604:"GRANTED",605:"HEX",606:"HIERARCHY",607:"ID",608:"IGNORE",609:"IMMEDIATE",610:"IMMEDIATELY",611:"IMPLEMENTATION",612:"INCLUDING",613:"INCREMENT",614:"INDENT",615:"INITIALLY",616:"INPUT",617:"INSTANCE",618:"INSTANTIABLE",619:"INTEGRITY",620:"INVOKER",621:"ISOLATION",622:"K",623:"KEY_MEMBER",624:"KEY_TYPE",625:"LENGTH",626:"LEVEL",627:"LIBRARY",628:"LINK",629:"LOCATION",630:"LOCATOR",631:"M",632:"MAP",633:"MAPPING",634:"MAXVALUE",635:"MESSAGE_LENGTH",636:"MESSAGE_OCTET_LENGTH",637:"MESSAGE_TEXT",638:"MINVALUE",639:"MORE",640:"MUMPS",641:"NAME",642:"NAMES",643:"NAMESPACE",644:"NESTING",645:"NEXT",646:"NFC",647:"NFD",648:"NFKC",649:"NFKD",650:"NIL",651:"NORMALIZED",652:"NULLABLE",653:"NULLS",654:"OBJECT",655:"OCTETS",656:"OPTIONS",657:"ORDERING",658:"ORDINALITY",659:"OTHERS",660:"OVERRIDING",661:"P",662:"PAD",663:"PARAMETER_MODE",664:"PARAMETER_NAME",665:"PARAMETER_ORDINAL_POSITION",666:"PARAMETER_SPECIFIC_CATALOG",667:"PARAMETER_SPECIFIC_NAME",668:"PARAMETER_SPECIFIC_SCHEMA",669:"PARTIAL",670:"PASCAL",671:"PASSING",672:"PASSTHROUGH",673:"PERMISSION",674:"PLACING",675:"PLI",676:"PRECEDING",677:"PRESERVE",678:"PRIOR",679:"PRIVILEGES",680:"PUBLIC",681:"RECOVERY",682:"RELATIVE",683:"REPEATABLE",684:"REQUIRING",685:"RESPECT",686:"RESTART",687:"RESTORE",688:"RESTRICT",689:"RETURNED_CARDINALITY",690:"RETURNED_LENGTH",691:"RETURNED_OCTET_LENGTH",692:"RETURNED_SQLSTATE",693:"RETURNING",694:"ROLE",695:"ROUTINE",696:"ROUTINE_CATALOG",697:"ROUTINE_NAME",698:"ROUTINE_SCHEMA",699:"ROW_COUNT",700:"SCALE",701:"SCHEMA",702:"SCHEMA_NAME",703:"SCOPE_CATALOG",704:"SCOPE_NAME",705:"SCOPE_SCHEMA",706:"SECTION",707:"SECURITY",708:"SELECTIVE",709:"SELF",710:"SEQUENCE",711:"SERIALIZABLE",712:"SERVER",713:"SERVER_NAME",714:"SESSION",715:"SETS",716:"SIMPLE",717:"SIZE",718:"SPACE",719:"SPECIFIC_NAME",720:"STANDALONE",721:"STATE",722:"STATEMENT",723:"STRIP",724:"STRUCTURE",725:"STYLE",726:"SUBCLASS_ORIGIN",727:"T",728:"TABLE_NAME",729:"TEMPORARY",730:"TIES",731:"TOKEN",732:"TOP_LEVEL_COUNT",733:"TRANSACTIONS_COMMITTED",734:"TRANSACTIONS_ROLLED_BACK",735:"TRANSACTION_ACTIVE",736:"TRANSFORM",737:"TRANSFORMS",738:"TRIGGER_CATALOG",739:"TRIGGER_NAME",740:"TRIGGER_SCHEMA",741:"TYPE",742:"UNBOUNDED",743:"UNCOMMITTED",744:"UNDER",745:"UNLINK",746:"UNNAMED",747:"UNTYPED",748:"URI",749:"USAGE",750:"USER_DEFINED_TYPE_CATALOG",751:"USER_DEFINED_TYPE_CODE",752:"USER_DEFINED_TYPE_NAME",753:"USER_DEFINED_TYPE_SCHEMA",754:"VALID",755:"VERSION",756:"WHITESPACE",757:"WORK",758:"WRAPPER",759:"WRITE",760:"XMLDECLARATION",761:"XMLSCHEMA",762:"YES",763:"ZONE",764:"SEMICOLON",765:"PERCENT",766:"ROWS"},productions_:[0,[3,1],[3,1],[3,2],[7,1],[7,2],[8,2],[9,3],[9,1],[9,1],[13,2],[13,4],[12,1],[17,0],[17,1],[17,1],[17,1],[17,1],[17,1],[17,1],[17,1],[17,1],[17,1],[17,1],[17,1],[17,1],[17,1],[17,1],[17,1],[17,1],[17,1],[17,1],[17,1],[17,1],[17,1],[17,1],[17,1],[17,1],[17,1],[17,1],[17,1],[17,1],[17,1],[17,1],[17,1],[17,1],[17,1],[17,1],[17,1],[17,1],[17,1],[17,1],[17,1],[17,1],[17,1],[17,1],[17,1],[17,1],[17,1],[17,1],[17,1],[17,1],[17,1],[17,1],[17,1],[17,1],[17,1],[17,1],[47,3],[73,3],[73,1],[75,5],[40,10],[40,4],[92,8],[92,11],[102,4],[104,2],[104,1],[103,3],[103,1],[105,1],[105,3],[106,3],[109,3],[109,1],[110,1],[110,2],[114,1],[114,1],[117,1],[117,5],[117,5],[117,1],[117,2],[117,1],[117,2],[117,2],[117,3],[117,4],[117,4],[117,4],[117,4],[117,4],[117,1],[117,1],[117,1],[117,1],[117,1],[117,1],[117,2],[117,2],[117,2],[117,1],[117,1],[117,1],[117,1],[117,1],[117,1],[117,2],[117,3],[117,4],[117,3],[117,1],[117,4],[117,2],[117,2],[117,4],[117,4],[117,4],[117,4],[117,4],[117,5],[117,4],[117,4],[117,4],[117,4],[117,4],[117,4],[117,4],[117,4],[117,6],[163,3],[163,1],[153,1],[153,1],[153,1],[182,2],[79,4],[79,4],[79,4],[79,3],[184,1],[184,2],[184,2],[184,2],[184,2],[184,2],[184,2],[184,2],[186,3],[186,4],[186,0],[81,0],[81,2],[81,2],[81,2],[81,2],[81,2],[82,2],[82,3],[82,5],[82,0],[205,6],[205,7],[205,6],[205,7],[203,1],[203,3],[209,4],[209,5],[209,3],[209,3],[209,2],[209,3],[209,1],[209,3],[209,2],[209,3],[209,1],[209,1],[209,2],[209,3],[209,1],[209,1],[209,2],[209,3],[209,1],[209,2],[209,3],[214,1],[199,3],[199,1],[204,2],[204,2],[204,1],[204,1],[215,3],[217,1],[217,2],[217,3],[217,3],[217,2],[217,3],[217,4],[217,5],[217,1],[217,2],[217,3],[217,1],[217,2],[217,3],[216,1],[216,2],[221,1],[221,2],[221,2],[221,3],[221,2],[221,3],[221,2],[221,3],[221,2],[221,2],[221,2],[218,2],[218,2],[218,0],[84,0],[84,2],[85,0],[85,4],[233,1],[233,3],[235,5],[235,4],[235,4],[235,1],[234,0],[234,2],[88,0],[88,2],[88,3],[88,2],[88,2],[88,3],[88,4],[88,3],[88,3],[86,0],[86,3],[120,1],[120,3],[241,1],[241,2],[241,3],[241,4],[87,0],[87,3],[87,8],[246,0],[246,2],[174,3],[174,1],[253,3],[253,2],[253,3],[253,2],[253,3],[253,2],[253,1],[254,5],[254,3],[254,1],[111,5],[111,3],[111,3],[111,1],[94,1],[94,1],[94,1],[94,1],[94,1],[94,1],[94,1],[94,1],[94,1],[94,1],[94,1],[94,1],[94,1],[94,1],[94,1],[94,1],[94,1],[94,1],[94,3],[94,3],[94,3],[94,1],[94,1],[56,1],[70,5],[71,5],[263,2],[263,2],[261,6],[261,8],[261,6],[261,8],[274,1],[274,1],[274,1],[274,1],[274,1],[274,1],[274,1],[255,5],[255,6],[255,6],[275,0],[275,4],[275,4],[275,5],[277,3],[278,3],[158,1],[158,1],[158,1],[158,1],[158,1],[158,1],[158,1],[158,1],[158,1],[200,5],[200,3],[200,4],[200,4],[200,8],[200,8],[200,8],[200,8],[200,3],[151,1],[151,3],[196,1],[257,1],[257,1],[113,1],[113,1],[258,1],[202,2],[259,4],[262,3],[201,2],[201,2],[201,1],[201,1],[260,5],[260,4],[304,2],[304,1],[307,4],[305,2],[305,0],[256,3],[256,3],[256,3],[256,3],[256,5],[256,3],[256,5],[256,3],[256,3],[256,3],[256,3],[256,3],[256,3],[256,3],[256,3],[256,3],[256,3],[256,3],[256,3],[256,3],[256,5],[256,3],[256,3],[256,3],[256,5],[256,3],[256,3],[256,3],[256,3],[256,3],[256,3],[256,3],[256,3],[256,3],[256,3],[256,3],[256,6],[256,6],[256,3],[256,3],[256,2],[256,2],[256,2],[256,2],[256,2],[256,3],[256,5],[256,6],[256,5],[256,6],[256,4],[256,5],[256,3],[256,4],[256,3],[256,4],[256,3],[256,3],[256,3],[256,3],[256,3],[329,1],[329,1],[329,4],[327,1],[327,1],[327,1],[327,1],[327,1],[327,1],[328,1],[328,1],[328,1],[55,6],[55,4],[147,1],[147,3],[336,3],[336,4],[29,5],[29,3],[36,5],[36,4],[36,7],[36,6],[36,5],[36,4],[36,5],[36,8],[36,7],[36,4],[36,6],[36,7],[341,1],[341,1],[340,0],[340,1],[342,3],[342,1],[342,1],[342,5],[342,3],[342,3],[345,1],[345,3],[346,1],[346,1],[346,1],[346,1],[346,1],[346,1],[100,1],[100,3],[24,9],[24,5],[349,1],[349,1],[352,0],[352,1],[354,2],[354,1],[355,1],[355,3],[355,3],[355,3],[348,0],[348,1],[350,0],[350,3],[351,3],[351,1],[351,2],[359,1],[359,3],[360,2],[360,2],[360,2],[360,2],[360,2],[361,0],[361,2],[366,4],[362,6],[363,9],[377,3],[376,0],[376,2],[378,4],[379,4],[364,6],[365,5],[365,5],[372,1],[372,1],[372,3],[372,3],[358,1],[358,3],[384,3],[384,2],[384,1],[387,6],[387,4],[387,1],[387,4],[272,2],[272,1],[388,1],[388,1],[385,0],[385,1],[391,2],[391,1],[393,3],[392,2],[392,5],[392,3],[392,6],[392,1],[392,2],[392,4],[392,2],[392,1],[392,2],[392,1],[392,1],[392,3],[392,5],[33,4],[399,3],[399,1],[398,0],[398,2],[18,6],[18,6],[18,6],[18,8],[18,6],[39,5],[19,4],[19,7],[19,6],[19,9],[30,3],[21,4],[21,6],[21,9],[21,6],[407,0],[407,2],[54,3],[54,2],[31,4],[31,5],[31,5],[22,8],[22,9],[32,3],[43,2],[43,4],[43,3],[43,5],[45,2],[45,4],[45,4],[45,6],[42,4],[42,6],[44,4],[44,6],[41,4],[41,6],[25,11],[25,8],[413,3],[413,3],[413,5],[34,4],[66,2],[57,2],[58,2],[58,2],[58,4],[144,4],[144,2],[144,2],[144,2],[144,2],[144,1],[144,2],[144,2],[422,1],[422,1],[423,1],[423,1],[423,1],[423,1],[423,1],[423,1],[423,1],[423,3],[419,3],[419,4],[419,2],[421,2],[421,3],[421,1],[425,3],[425,1],[428,3],[428,3],[428,3],[427,3],[427,1],[65,4],[65,3],[65,4],[65,5],[65,5],[65,6],[431,1],[431,1],[430,3],[430,2],[432,1],[432,1],[432,3],[429,1],[429,1],[51,2],[52,2],[50,2],[35,4],[35,3],[438,2],[59,3],[60,1],[61,1],[62,3],[63,2],[63,2],[64,2],[64,2],[446,1],[446,1],[69,2],[444,3],[444,1],[445,3],[445,1],[28,2],[449,1],[449,3],[450,3],[450,4],[450,5],[450,6],[46,3],[37,6],[453,1],[453,2],[454,2],[455,2],[456,2],[456,2],[456,1],[456,1],[458,4],[458,6],[461,1],[461,3],[459,5],[459,7],[459,7],[459,9],[459,7],[459,9],[462,3],[462,6],[462,3],[462,6],[457,0],[457,2],[457,5],[457,4],[457,7],[27,6],[469,2],[468,0],[468,2],[468,2],[468,1],[26,8],[23,3],[23,4],[473,3],[473,1],[474,3],[474,7],[474,6],[474,3],[474,4],[478,1],[478,1],[482,2],[483,3],[484,2],[485,4],[475,4],[475,3],[475,2],[475,1],[497,2],[493,2],[493,2],[498,4],[500,6],[67,3],[67,2],[506,3],[506,1],[504,1],[504,4],[68,2],[20,2],[48,9],[48,8],[48,9],[510,0],[510,1],[510,1],[510,1],[510,2],[511,1],[511,1],[511,1],[49,3],[38,2],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[11,1],[11,1],[80,0],[80,1],[83,0],[83,1],[90,0],[90,2],[91,0],[91,1],[96,0],[96,1],[97,0],[97,1],[101,0],[101,1],[108,0],[108,1],[121,0],[121,1],[125,1],[125,2],[126,1],[126,2],[127,0],[127,1],[155,0],[155,2],[157,0],[157,2],[159,0],[159,2],[160,1],[160,1],[161,0],[161,2],[165,0],[165,2],[167,0],[167,2],[176,0],[176,2],[177,0],[177,2],[178,0],[178,2],[188,0],[188,1],[197,0],[197,1],[210,0],[210,1],[211,0],[211,1],[219,0],[219,1],[220,0],[220,1],[248,0],[248,1],[250,0],[250,1],[251,0],[251,1],[252,0],[252,1],[264,1],[264,1],[767,1],[767,1],[289,0],[289,1],[301,1],[301,1],[337,1],[337,1],[371,0],[371,1],[375,0],[375,1],[382,0],[382,1],[383,0],[383,1],[394,0],[394,1],[395,0],[395,1],[397,1],[397,1],[411,0],[411,1],[412,0],[412,1],[465,0],[465,1],[466,0],[466,1],[467,0],[467,1],[471,0],[471,1],[476,0],[476,1],[477,0],[477,1],[479,0],[479,1],[480,0],[480,1],[481,0],[481,1],[486,0],[486,1],[487,0],[487,1],[488,0],[488,1],[489,0],[489,1],[490,0],[490,1],[491,0],[491,1],[492,0],[492,1],[494,0],[494,1],[495,0],[495,1],[496,0],[496,1],[499,0],[499,2],[501,0],[501,2],[502,0],[502,2],[503,0],[503,2],[512,0],[512,1],[513,0],[513,1]],performAction:function(e,t,n,r,i,o,a){var s=o.length-1;switch(i){case 1:O.options.casesensitive?this.$=o[s]:this.$=o[s].toLowerCase();break;case 2:this.$=M(o[s].substr(1,o[s].length-2));break;case 3:this.$=o[s].toLowerCase();break;case 4:this.$=o[s];break;case 5:this.$=o[s]?o[s-1]+" "+o[s]:o[s-1];break;case 6:return new r.Statements({statements:o[s-1]});case 7:this.$=o[s-2],o[s]&&o[s-2].push(o[s]);break;case 8:case 9:case 70:case 80:case 85:case 143:case 177:case 205:case 206:case 242:case 261:case 273:case 354:case 372:case 451:case 474:case 475:case 479:case 487:case 528:case 529:case 566:case 649:case 659:case 683:case 685:case 687:case 701:case 702:case 732:case 756:this.$=[o[s]];break;case 10:case 11:this.$=o[s],o[s].explain=!0;break;case 12:this.$=o[s],r.exists&&(this.$.exists=r.exists),delete r.exists,r.queries&&(this.$.queries=r.queries),delete r.queries;break;case 13:case 162:case 172:case 237:case 238:case 240:case 248:case 250:case 259:case 267:case 270:case 375:case 491:case 501:case 503:case 515:case 521:case 522:case 567:this.$=void 0;break;case 68:this.$=new r.WithSelect({withs:o[s-1],select:o[s]});break;case 69:case 565:o[s-2].push(o[s]),this.$=o[s-2];break;case 71:this.$={name:o[s-4],select:o[s-1]};break;case 72:r.extend(this.$,o[s-9]),r.extend(this.$,o[s-8]),r.extend(this.$,o[s-7]),r.extend(this.$,o[s-6]),r.extend(this.$,o[s-5]),r.extend(this.$,o[s-4]),r.extend(this.$,o[s-3]),r.extend(this.$,o[s-2]),r.extend(this.$,o[s-1]),r.extend(this.$,o[s]),this.$=o[s-9];break;case 73:this.$=new r.Search({selectors:o[s-2],from:o[s]}),r.extend(this.$,o[s-1]);break;case 74:this.$={pivot:{expr:o[s-5],columnid:o[s-3],inlist:o[s-2],as:o[s]}};break;case 75:this.$={unpivot:{tocolumnid:o[s-8],forcolumnid:o[s-6],inlist:o[s-3],as:o[s]}};break;case 76:case 520:case 549:case 585:case 619:case 636:case 637:case 640:case 662:this.$=o[s-1];break;case 77:case 78:case 86:case 147:case 185:case 247:case 280:case 288:case 289:case 290:case 291:case 292:case 293:case 294:case 295:case 296:case 297:case 298:case 299:case 300:case 301:case 304:case 305:case 320:case 321:case 322:case 323:case 324:case 325:case 374:case 440:case 441:case 442:case 443:case 444:case 445:case 516:case 542:case 546:case 548:case 623:case 624:case 625:case 626:case 627:case 628:case 632:case 634:case 635:case 644:case 660:case 661:case 723:case 738:case 739:case 741:case 742:case 748:case 749:this.$=o[s];break;case 79:case 84:case 731:case 755:this.$=o[s-2],this.$.push(o[s]);break;case 81:this.$={expr:o[s]};break;case 82:this.$={expr:o[s-2],as:o[s]};break;case 83:this.$={removecolumns:o[s]};break;case 87:this.$={like:o[s]};break;case 90:case 104:this.$={srchid:"PROP",args:[o[s]]};break;case 91:this.$={srchid:"ORDERBY",args:o[s-1]};break;case 92:var u=o[s-1];u||(u="ASC"),this.$={srchid:"ORDERBY",args:[{expression:new r.Column({columnid:"_"}),direction:u}]};break;case 93:this.$={srchid:"PARENT"};break;case 94:this.$={srchid:"APROP",args:[o[s]]};break;case 95:this.$={selid:"ROOT"};break;case 96:this.$={srchid:"EQ",args:[o[s]]};break;case 97:this.$={srchid:"LIKE",args:[o[s]]};break;case 98:case 99:this.$={selid:"WITH",args:o[s-1]};break;case 100:this.$={srchid:o[s-3].toUpperCase(),args:o[s-1]};break;case 101:this.$={srchid:"WHERE",args:[o[s-1]]};break;case 102:this.$={selid:"OF",args:[o[s-1]]};break;case 103:this.$={srchid:"CLASS",args:[o[s-1]]};break;case 105:this.$={srchid:"NAME",args:[o[s].substr(1,o[s].length-2)]};break;case 106:this.$={srchid:"CHILD"};break;case 107:this.$={srchid:"VERTEX"};break;case 108:this.$={srchid:"EDGE"};break;case 109:this.$={srchid:"REF"};break;case 110:this.$={srchid:"SHARP",args:[o[s]]};break;case 111:this.$={srchid:"ATTR",args:void 0===o[s]?void 0:[o[s]]};break;case 112:this.$={srchid:"ATTR"};break;case 113:this.$={srchid:"OUT"};break;case 114:this.$={srchid:"IN"};break;case 115:this.$={srchid:"OUTOUT"};break;case 116:this.$={srchid:"ININ"};break;case 117:this.$={srchid:"CONTENT"};break;case 118:this.$={srchid:"EX",args:[new r.Json({value:o[s]})]};break;case 119:this.$={srchid:"AT",args:[o[s]]};break;case 120:this.$={srchid:"AS",args:[o[s]]};break;case 121:this.$={srchid:"SET",args:o[s-1]};break;case 122:this.$={selid:"TO",args:[o[s]]};break;case 123:this.$={srchid:"VALUE"};break;case 124:this.$={srchid:"ROW",args:o[s-1]};break;case 125:this.$={srchid:"CLASS",args:[o[s]]};break;case 126:this.$={selid:o[s],args:[o[s-1]]};break;case 127:this.$={selid:"NOT",args:o[s-1]};break;case 128:this.$={selid:"IF",args:o[s-1]};break;case 129:this.$={selid:o[s-3],args:o[s-1]};break;case 130:this.$={selid:"DISTINCT",args:o[s-1]};break;case 131:this.$={selid:"UNION",args:o[s-1]};break;case 132:this.$={selid:"UNIONALL",args:o[s-1]};break;case 133:this.$={selid:"ALL",args:[o[s-1]]};break;case 134:this.$={selid:"ANY",args:[o[s-1]]};break;case 135:this.$={selid:"INTERSECT",args:o[s-1]};break;case 136:this.$={selid:"EXCEPT",args:o[s-1]};break;case 137:this.$={selid:"AND",args:o[s-1]};break;case 138:this.$={selid:"OR",args:o[s-1]};break;case 139:this.$={selid:"PATH",args:[o[s-1]]};break;case 140:this.$={srchid:"RETURN",args:o[s-1]};break;case 141:this.$={selid:"REPEAT",sels:o[s-3],args:o[s-1]};break;case 142:this.$=o[s-2],this.$.push(o[s]);break;case 144:this.$="PLUS";break;case 145:this.$="STAR";break;case 146:this.$="QUESTION";break;case 148:case 149:this.$=new r.Select({columns:o[s],distinct:!0}),r.extend(this.$,o[s-3]),r.extend(this.$,o[s-1]);break;case 150:this.$=new r.Select({columns:o[s],all:!0}),r.extend(this.$,o[s-3]),r.extend(this.$,o[s-1]);break;case 151:o[s]?(this.$=new r.Select({columns:o[s]}),r.extend(this.$,o[s-2]),r.extend(this.$,o[s-1])):this.$=new r.Select({columns:[new r.Column({columnid:"_"})],modifier:"COLUMN"});break;case 152:"SELECT"==o[s]?this.$=void 0:this.$={modifier:o[s]};break;case 153:this.$={modifier:"VALUE"};break;case 154:this.$={modifier:"ROW"};break;case 155:this.$={modifier:"COLUMN"};break;case 156:this.$={modifier:"MATRIX"};break;case 157:this.$={modifier:"TEXTSTRING"};break;case 158:this.$={modifier:"INDEX"};break;case 159:this.$={modifier:"RECORDSET"};break;case 160:this.$={top:o[s-1],percent:void 0!==o[s]||void 0};break;case 161:this.$={top:o[s-1]};break;case 163:case 330:case 523:case 524:case 724:this.$=void 0;break;case 164:case 165:case 166:case 167:this.$={into:o[s]};break;case 168:var l=o[s];l=l.substr(1,l.length-2);var c=l.substr(-3).toUpperCase(),f=l.substr(-4).toUpperCase();"#"==l[0]?this.$={into:new r.FuncValue({funcid:"HTML",args:[new r.StringValue({value:l}),new r.Json({value:{headers:!0}})]})}:"XLS"==c||"CSV"==c||"TAB"==c?this.$={into:new r.FuncValue({funcid:c,args:[new r.StringValue({value:l}),new r.Json({value:{headers:!0}})]})}:"XLSX"!=f&&"JSON"!=f||(this.$={into:new r.FuncValue({funcid:f,args:[new r.StringValue({value:l}),new r.Json({value:{headers:!0}})]})});break;case 169:this.$={from:o[s]};break;case 170:this.$={from:o[s-1],joins:o[s]};break;case 171:this.$={from:o[s-2],joins:o[s-1]};break;case 173:this.$=new r.Apply({select:o[s-2],applymode:"CROSS",as:o[s]});break;case 174:this.$=new r.Apply({select:o[s-3],applymode:"CROSS",as:o[s]});break;case 175:this.$=new r.Apply({select:o[s-2],applymode:"OUTER",as:o[s]});break;case 176:this.$=new r.Apply({select:o[s-3],applymode:"OUTER",as:o[s]});break;case 178:case 243:case 452:case 530:case 531:this.$=o[s-2],o[s-2].push(o[s]);break;case 179:this.$=o[s-2],this.$.as=o[s];break;case 180:this.$=o[s-3],this.$.as=o[s];break;case 181:this.$=o[s-1],this.$.as="default";break;case 182:this.$=new r.Json({value:o[s-2]}),o[s-2].as=o[s];break;case 183:this.$=o[s-1],o[s-1].as=o[s];break;case 184:this.$=o[s-2],o[s-2].as=o[s];break;case 186:case 638:case 641:this.$=o[s-2];break;case 187:case 191:case 195:case 198:this.$=o[s-1],o[s-1].as=o[s];break;case 188:case 192:case 196:case 199:this.$=o[s-2],o[s-2].as=o[s];break;case 189:case 190:case 194:case 197:this.$=o[s],o[s].as="default";break;case 193:this.$={inserted:!0},o[s].as="default";break;case 200:var l=o[s];l=l.substr(1,l.length-2);var h,c=l.substr(-3).toUpperCase(),f=l.substr(-4).toUpperCase();if("#"==l[0])h=new r.FuncValue({funcid:"HTML",args:[new r.StringValue({value:l}),new r.Json({value:{headers:!0}})]});else if("XLS"==c||"CSV"==c||"TAB"==c)h=new r.FuncValue({funcid:c,args:[new r.StringValue({value:l}),new r.Json({value:{headers:!0}})]});else{if("XLSX"!=f&&"JSON"!=f)throw new Error("Unknown string in FROM clause");h=new r.FuncValue({funcid:f,args:[new r.StringValue({value:l}),new r.Json({value:{headers:!0}})]})}this.$=h;break;case 201:"INFORMATION_SCHEMA"==o[s-2]?this.$=new r.FuncValue({funcid:o[s-2],args:[new r.StringValue({value:o[s]})]}):this.$=new r.Table({databaseid:o[s-2],tableid:o[s]});break;case 202:this.$=new r.Table({tableid:o[s]});break;case 203:case 204:this.$=o[s-1],o[s-1].push(o[s]);break;case 207:this.$=new r.Join(o[s-2]),r.extend(this.$,o[s-1]),r.extend(this.$,o[s]);break;case 208:this.$={table:o[s]};break;case 209:this.$={table:o[s-1],as:o[s]};break;case 210:this.$={table:o[s-2],as:o[s]};break;case 211:this.$={json:new r.Json({value:o[s-2],as:o[s]})};break;case 212:this.$={param:o[s-1],as:o[s]};break;case 213:this.$={param:o[s-2],as:o[s]};break;case 214:this.$={select:o[s-2],as:o[s]};break;case 215:this.$={select:o[s-3],as:o[s]};break;case 216:this.$={funcid:o[s],as:"default"};break;case 217:this.$={funcid:o[s-1],as:o[s]};break;case 218:this.$={funcid:o[s-2],as:o[s]};break;case 219:this.$={variable:o[s],as:"default"};break;case 220:this.$={variable:o[s-1],as:o[s]};break;case 221:this.$={variable:o[s-2],as:o[s]};break;case 222:this.$={joinmode:o[s]};break;case 223:this.$={joinmode:o[s-1],natural:!0};break;case 224:case 225:this.$="INNER";break;case 226:case 227:this.$="LEFT";break;case 228:case 229:this.$="RIGHT";break;case 230:case 231:this.$="OUTER";break;case 232:this.$="SEMI";break;case 233:this.$="ANTI";break;case 234:this.$="CROSS";break;case 235:this.$={on:o[s]};break;case 236:case 697:this.$={using:o[s]};break;case 239:this.$={where:new r.Expression({expression:o[s]})};break;case 241:this.$={group:o[s-1]},r.extend(this.$,o[s]);break;case 244:this.$=new r.GroupExpression({type:"GROUPING SETS",group:o[s-1]});break;case 245:this.$=new r.GroupExpression({type:"ROLLUP",group:o[s-1]});break;case 246:this.$=new r.GroupExpression({type:"CUBE",group:o[s-1]});break;case 249:this.$={having:o[s]};break;case 251:this.$={union:o[s]};break;case 252:this.$={unionall:o[s]};break;case 253:this.$={except:o[s]};break;case 254:this.$={intersect:o[s]};break;case 255:this.$={union:o[s],corresponding:!0};break;case 256:this.$={unionall:o[s],corresponding:!0};break;case 257:this.$={except:o[s],corresponding:!0};break;case 258:this.$={intersect:o[s],corresponding:!0};break;case 260:this.$={order:o[s]};break;case 262:this.$=o[s-2],o[s-2].push(o[s]);break;case 263:this.$=new r.Expression({expression:o[s],direction:"ASC"});break;case 264:this.$=new r.Expression({expression:o[s-1],direction:o[s].toUpperCase()});break;case 265:this.$=new r.Expression({expression:o[s-2],direction:"ASC",nocase:!0});break;case 266:this.$=new r.Expression({expression:o[s-3],direction:o[s].toUpperCase(),nocase:!0});break;case 268:this.$={limit:o[s-1]},r.extend(this.$,o[s]);break;case 269:this.$={limit:o[s-2],offset:o[s-6]};break;case 271:this.$={offset:o[s]};break;case 272:case 509:case 533:case 648:case 658:case 682:case 684:case 688:o[s-2].push(o[s]),this.$=o[s-2];break;case 274:case 276:case 278:o[s-2].as=o[s],this.$=o[s-2];break;case 275:case 277:case 279:o[s-1].as=o[s],this.$=o[s-1];break;case 281:this.$=new r.Column({columid:o[s],tableid:o[s-2],databaseid:o[s-4]});break;case 282:this.$=new r.Column({columnid:o[s],tableid:o[s-2]});break;case 283:this.$=new r.Column({columnid:o[s]});break;case 284:this.$=new r.Column({columnid:o[s],tableid:o[s-2],databaseid:o[s-4]});break;case 285:case 286:this.$=new r.Column({columnid:o[s],tableid:o[s-2]});break;case 287:this.$=new r.Column({columnid:o[s]});break;case 302:this.$=new r.DomainValueValue;break;case 303:this.$=new r.Json({value:o[s]});break;case 306:case 307:case 308:r.queries||(r.queries=[]),r.queries.push(o[s-1]),o[s-1].queriesidx=r.queries.length,this.$=o[s-1];break;case 309:this.$=o[s];break;case 310:this.$=new r.FuncValue({funcid:"CURRENT_TIMESTAMP"});break;case 311:this.$=new r.JavaScript({value:o[s].substr(2,o[s].length-4)});break;case 312:this.$=new r.JavaScript({value:'alasql.fn["'+o[s-2]+'"] = '+o[s].substr(2,o[s].length-4)});break;case 313:this.$=new r.JavaScript({value:'alasql.aggr["'+o[s-2]+'"] = '+o[s].substr(2,o[s].length-4)});break;case 314:this.$=new r.FuncValue({funcid:o[s],newid:!0});break;case 315:this.$=o[s],r.extend(this.$,{newid:!0});break;case 316:this.$=new r.Convert({expression:o[s-3]}),r.extend(this.$,o[s-1]);break;case 317:this.$=new r.Convert({expression:o[s-5],style:o[s-1]}),r.extend(this.$,o[s-3]);break;case 318:this.$=new r.Convert({expression:o[s-1]}),r.extend(this.$,o[s-3]);break;case 319:this.$=new r.Convert({expression:o[s-3],style:o[s-1]}),r.extend(this.$,o[s-5]);break;case 326:this.$=new r.FuncValue({funcid:"CURRENT_TIMESTAMP"});break;case 327:o[s-2].length>1&&("MAX"==o[s-4].toUpperCase()||"MIN"==o[s-4].toUpperCase())?this.$=new r.FuncValue({funcid:o[s-4],args:o[s-2]}):this.$=new r.AggrValue({aggregatorid:o[s-4].toUpperCase(),expression:o[s-2].pop(),over:o[s]});break;case 328:this.$=new r.AggrValue({aggregatorid:o[s-5].toUpperCase(),expression:o[s-2],distinct:!0,over:o[s]});break;case 329:this.$=new r.AggrValue({aggregatorid:o[s-5].toUpperCase(),expression:o[s-2],over:o[s]});break;case 331:case 332:this.$=new r.Over,r.extend(this.$,o[s-1]);break;case 333:this.$=new r.Over,r.extend(this.$,o[s-2]),r.extend(this.$,o[s-1]);break;case 334:this.$={partition:o[s]};break;case 335:this.$={order:o[s]};break;case 336:this.$="SUM";break;case 337:this.$="COUNT";break;case 338:this.$="MIN";break;case 339:case 544:this.$="MAX";break;case 340:this.$="AVG";break;case 341:this.$="FIRST";break;case 342:this.$="LAST";break;case 343:this.$="AGGR";break;case 344:this.$="ARRAY";break;case 345:var p=o[s-4],d=o[s-1];d.length>1&&("MIN"==p.toUpperCase()||"MAX"==p.toUpperCase())?this.$=new r.FuncValue({funcid:p,args:d}):O.aggr[o[s-4]]?this.$=new r.AggrValue({aggregatorid:"REDUCE",funcid:p,expression:d.pop(),distinct:"DISTINCT"==o[s-2]}):this.$=new r.FuncValue({funcid:p,args:d});break;case 346:this.$=new r.FuncValue({funcid:o[s-2]});break;case 347:this.$=new r.FuncValue({funcid:"IIF",args:o[s-1]});break;case 348:this.$=new r.FuncValue({funcid:"REPLACE",args:o[s-1]});break;case 349:this.$=new r.FuncValue({funcid:"DATEADD",args:[new r.StringValue({value:o[s-5]}),o[s-3],o[s-1]]});break;case 350:this.$=new r.FuncValue({funcid:"DATEADD",args:[o[s-5],o[s-3],o[s-1]]});break;case 351:this.$=new r.FuncValue({funcid:"DATEDIFF",args:[new r.StringValue({value:o[s-5]}),o[s-3],o[s-1]]});break;case 352:this.$=new r.FuncValue({funcid:"DATEDIFF",args:[o[s-5],o[s-3],o[s-1]]});break;case 353:this.$=new r.FuncValue({funcid:"INTERVAL",args:[o[s-1],new r.StringValue({value:o[s].toLowerCase()})]});break;case 355:o[s-2].push(o[s]),this.$=o[s-2];break;case 356:this.$=new r.NumValue({value:+o[s]});break;case 357:this.$=new r.LogicValue({value:!0});break;case 358:this.$=new r.LogicValue({value:!1});break;case 359:this.$=new r.StringValue({value:o[s].substr(1,o[s].length-2).replace(/(\\\')/g,"'").replace(/(\'\')/g,"'")});break;case 360:this.$=new r.StringValue({value:o[s].substr(2,o[s].length-3).replace(/(\\\')/g,"'").replace(/(\'\')/g,"'")});break;case 361:this.$=new r.NullValue({value:void 0});break;case 362:this.$=new r.VarValue({variable:o[s]});break;case 363:r.exists||(r.exists=[]),this.$=new r.ExistsValue({value:o[s-1],existsidx:r.exists.length}),r.exists.push(o[s-1]);break;case 364:this.$=new r.ArrayValue({value:o[s-1]});break;case 365:case 366:this.$=new r.ParamValue({param:o[s]});break;case 367:void 0===r.question&&(r.question=0),this.$=new r.ParamValue({param:r.question++});break;case 368:void 0===r.question&&(r.question=0),this.$=new r.ParamValue({param:r.question++,array:!0});break;case 369:this.$=new r.CaseValue({expression:o[s-3],whens:o[s-2],elses:o[s-1]});break;case 370:this.$=new r.CaseValue({whens:o[s-2],elses:o[s-1]});break;case 371:case 699:case 700:this.$=o[s-1],this.$.push(o[s]);break;case 373:this.$={when:o[s-2],then:o[s]};break;case 376:case 377:this.$=new r.Op({left:o[s-2],op:"REGEXP",right:o[s]});break;case 378:this.$=new r.Op({left:o[s-2],op:"GLOB",right:o[s]});break;case 379:this.$=new r.Op({left:o[s-2],op:"LIKE",right:o[s]});break;case 380:this.$=new r.Op({left:o[s-4],op:"LIKE",right:o[s-2],escape:o[s]});break;case 381:this.$=new r.Op({left:o[s-2],op:"NOT LIKE",right:o[s]});break;case 382:this.$=new r.Op({left:o[s-4],op:"NOT LIKE",right:o[s-2],escape:o[s]});break;case 383:this.$=new r.Op({left:o[s-2],op:"||",right:o[s]});break;case 384:this.$=new r.Op({left:o[s-2],op:"+",right:o[s]});break;case 385:this.$=new r.Op({left:o[s-2],op:"-",right:o[s]});break;case 386:this.$=new r.Op({left:o[s-2],op:"*",right:o[s]});break;case 387:this.$=new r.Op({left:o[s-2],op:"/",right:o[s]});break;case 388:this.$=new r.Op({left:o[s-2],op:"%",right:o[s]});break;case 389:this.$=new r.Op({left:o[s-2],op:"^",right:o[s]});break;case 390:this.$=new r.Op({left:o[s-2],op:">>",right:o[s]});break;case 391:this.$=new r.Op({left:o[s-2],op:"<<",right:o[s]});break;case 392:this.$=new r.Op({left:o[s-2],op:"&",right:o[s]});break;case 393:this.$=new r.Op({left:o[s-2],op:"|",right:o[s]});break;case 394:case 395:case 397:this.$=new r.Op({left:o[s-2],op:"->",right:o[s]});break;case 396:this.$=new r.Op({left:o[s-4],op:"->",right:o[s-1]});break;case 398:case 399:case 401:this.$=new r.Op({left:o[s-2],op:"!",right:o[s]});break;case 400:this.$=new r.Op({left:o[s-4],op:"!",right:o[s-1]});break;case 402:this.$=new r.Op({left:o[s-2],op:">",right:o[s]});break;case 403:this.$=new r.Op({left:o[s-2],op:">=",right:o[s]});break;case 404:this.$=new r.Op({left:o[s-2],op:"<",right:o[s]});break;case 405:this.$=new r.Op({left:o[s-2],op:"<=",right:o[s]});break;case 406:this.$=new r.Op({left:o[s-2],op:"=",right:o[s]});break;case 407:this.$=new r.Op({left:o[s-2],op:"==",right:o[s]});break;case 408:this.$=new r.Op({left:o[s-2],op:"===",right:o[s]});break;case 409:this.$=new r.Op({left:o[s-2],op:"!=",right:o[s]});break;case 410:this.$=new r.Op({left:o[s-2],op:"!==",right:o[s]});break;case 411:this.$=new r.Op({left:o[s-2],op:"!===",right:o[s]});break;case 412:r.queries||(r.queries=[]),this.$=new r.Op({left:o[s-5],op:o[s-4],allsome:o[s-3],right:o[s-1],queriesidx:r.queries.length}),r.queries.push(o[s-1]);break;case 413:this.$=new r.Op({left:o[s-5],op:o[s-4],allsome:o[s-3],right:o[s-1]});break;case 414:"BETWEEN1"==o[s-2].op?"AND"==o[s-2].left.op?this.$=new r.Op({left:o[s-2].left.left,op:"AND",right:new r.Op({left:o[s-2].left.right,op:"BETWEEN",right1:o[s-2].right,right2:o[s]})}):this.$=new r.Op({left:o[s-2].left,op:"BETWEEN",right1:o[s-2].right,right2:o[s]}):"NOT BETWEEN1"==o[s-2].op?"AND"==o[s-2].left.op?this.$=new r.Op({left:o[s-2].left.left,op:"AND",right:new r.Op({left:o[s-2].left.right,op:"NOT BETWEEN",right1:o[s-2].right,right2:o[s]})}):this.$=new r.Op({left:o[s-2].left,op:"NOT BETWEEN",right1:o[s-2].right,right2:o[s]}):this.$=new r.Op({left:o[s-2],op:"AND",right:o[s]});break;case 415:this.$=new r.Op({left:o[s-2],op:"OR",right:o[s]});break;case 416:this.$=new r.UniOp({op:"NOT",right:o[s]});break;case 417:this.$=new r.UniOp({op:"-",right:o[s]});break;case 418:this.$=new r.UniOp({op:"+",right:o[s]});break;case 419:this.$=new r.UniOp({op:"~",right:o[s]});break;case 420:this.$=new r.UniOp({op:"#",right:o[s]});break;case 421:this.$=new r.UniOp({right:o[s-1]});break;case 422:r.queries||(r.queries=[]),this.$=new r.Op({left:o[s-4],op:"IN",right:o[s-1],queriesidx:r.queries.length}),r.queries.push(o[s-1]);break;case 423:r.queries||(r.queries=[]),this.$=new r.Op({left:o[s-5],op:"NOT IN",right:o[s-1],queriesidx:r.queries.length}),r.queries.push(o[s-1]);break;case 424:this.$=new r.Op({left:o[s-4],op:"IN",right:o[s-1]});break;case 425:this.$=new r.Op({left:o[s-5],op:"NOT IN",right:o[s-1]});break;case 426:this.$=new r.Op({left:o[s-3],op:"IN",right:[]});break;case 427:this.$=new r.Op({left:o[s-4],op:"NOT IN",right:[]});break;case 428:case 430:this.$=new r.Op({left:o[s-2],op:"IN",right:o[s]});break;case 429:case 431:this.$=new r.Op({left:o[s-3],op:"NOT IN",right:o[s]});break;case 432:this.$=new r.Op({left:o[s-2],op:"BETWEEN1",right:o[s]});break;case 433:this.$=new r.Op({left:o[s-2],op:"NOT BETWEEN1",right:o[s]});break;case 434:this.$=new r.Op({op:"IS",left:o[s-2],right:o[s]});break;case 435:this.$=new r.Op({op:"IS",left:o[s-2],right:new r.UniOp({op:"NOT",right:new r.NullValue({value:void 0})})});break;case 436:this.$=new r.Convert({expression:o[s-2]}),r.extend(this.$,o[s]);break;case 437:case 438:this.$=o[s];break;case 439:this.$=o[s-1];break;case 446:this.$="ALL";break;case 447:this.$="SOME";break;case 448:this.$="ANY";break;case 449:this.$=new r.Update({table:o[s-4],columns:o[s-2],where:o[s]});break;case 450:this.$=new r.Update({table:o[s-2],columns:o[s]});break;case 453:this.$=new r.SetColumn({column:o[s-2],expression:o[s]});break;case 454:this.$=new r.SetColumn({variable:o[s-2],expression:o[s],method:o[s-3]});break;case 455:this.$=new r.Delete({table:o[s-2],where:o[s]});break;case 456:this.$=new r.Delete({table:o[s]});break;case 457:this.$=new r.Insert({into:o[s-2],values:o[s]});break;case 458:this.$=new r.Insert({into:o[s-1],values:o[s]});break;case 459:case 461:this.$=new r.Insert({into:o[s-2],values:o[s],orreplace:!0});break;case 460:case 462:this.$=new r.Insert({into:o[s-1],values:o[s],orreplace:!0});break;case 463:this.$=new r.Insert({into:o[s-2],default:!0});break;case 464:this.$=new r.Insert({into:o[s-5],columns:o[s-3],values:o[s]});break;case 465:this.$=new r.Insert({into:o[s-4],columns:o[s-2],values:o[s]});break;case 466:this.$=new r.Insert({into:o[s-1],select:o[s]});break;case 467:this.$=new r.Insert({into:o[s-1],select:o[s],orreplace:!0});break;case 468:this.$=new r.Insert({into:o[s-4],columns:o[s-2],select:o[s]});break;case 473:this.$=[o[s-1]];break;case 476:this.$=o[s-4],o[s-4].push(o[s-1]);break;case 477:case 478:case 480:case 488:this.$=o[s-2],o[s-2].push(o[s]);break;case 489:this.$=new r.CreateTable({table:o[s-4]}),r.extend(this.$,o[s-7]),r.extend(this.$,o[s-6]),r.extend(this.$,o[s-5]),r.extend(this.$,o[s-2]),r.extend(this.$,o[s]);break;case 490:this.$=new r.CreateTable({table:o[s]}),r.extend(this.$,o[s-3]),r.extend(this.$,o[s-2]),r.extend(this.$,o[s-1]);break;case 492:this.$={class:!0};break;case 502:this.$={temporary:!0};break;case 504:this.$={ifnotexists:!0};break;case 505:this.$={columns:o[s-2],constraints:o[s]};break;case 506:this.$={columns:o[s]};break;case 507:this.$={as:o[s]};break;case 508:case 532:this.$=[o[s]];break;case 510:case 511:case 512:case 513:case 514:o[s].constraintid=o[s-1],this.$=o[s];break;case 517:this.$={type:"CHECK",expression:o[s-1]};break;case 518:this.$={type:"PRIMARY KEY",columns:o[s-1],clustered:(o[s-3]+"").toUpperCase()};break;case 519:this.$={type:"FOREIGN KEY",columns:o[s-5],fktable:o[s-2],fkcolumns:o[s-1]};break;case 525:this.$={type:"UNIQUE",columns:o[s-1],clustered:(o[s-3]+"").toUpperCase()};break;case 534:this.$=new r.ColumnDef({columnid:o[s-2]}),r.extend(this.$,o[s-1]),r.extend(this.$,o[s]);break;case 535:this.$=new r.ColumnDef({columnid:o[s-1]}),r.extend(this.$,o[s]);break;case 536:this.$=new r.ColumnDef({columnid:o[s],dbtypeid:""});break;case 537:this.$={dbtypeid:o[s-5],dbsize:o[s-3],dbprecision:+o[s-1]};break;case 538:this.$={dbtypeid:o[s-3],dbsize:o[s-1]};break;case 539:this.$={dbtypeid:o[s]};break;case 540:this.$={dbtypeid:"ENUM",enumvalues:o[s-1]};break;case 541:this.$=o[s-1],o[s-1].dbtypeid+="["+o[s]+"]";break;case 543:case 750:this.$=+o[s];break;case 545:this.$=void 0;break;case 547:r.extend(o[s-1],o[s]),this.$=o[s-1];break;case 550:this.$={primarykey:!0};break;case 551:case 552:this.$={foreignkey:{table:o[s-1],columnid:o[s]}};break;case 553:this.$={identity:{value:o[s-3],step:o[s-1]}};break;case 554:this.$={identity:{value:1,step:1}};break;case 555:case 557:this.$={default:o[s]};break;case 556:this.$={default:o[s-1]};break;case 558:this.$={null:!0};break;case 559:this.$={notnull:!0};break;case 560:this.$={check:o[s]};break;case 561:this.$={unique:!0};break;case 562:this.$={onupdate:o[s]};break;case 563:this.$={onupdate:o[s-1]};break;case 564:this.$=new r.DropTable({tables:o[s],type:o[s-2]}),r.extend(this.$,o[s-1]);break;case 568:this.$={ifexists:!0};break;case 569:this.$=new r.AlterTable({table:o[s-3],renameto:o[s]});break;case 570:this.$=new r.AlterTable({table:o[s-3],addcolumn:o[s]});break;case 571:this.$=new r.AlterTable({table:o[s-3],modifycolumn:o[s]});break;case 572:this.$=new r.AlterTable({table:o[s-5],renamecolumn:o[s-2],to:o[s]});break;case 573:this.$=new r.AlterTable({table:o[s-3],dropcolumn:o[s]});break;case 574:this.$=new r.AlterTable({table:o[s-2],renameto:o[s]});break;case 575:this.$=new r.AttachDatabase({databaseid:o[s],engineid:o[s-2].toUpperCase()});break;case 576:this.$=new r.AttachDatabase({databaseid:o[s-3],engineid:o[s-5].toUpperCase(),args:o[s-1]});break;case 577:this.$=new r.AttachDatabase({databaseid:o[s-2],engineid:o[s-4].toUpperCase(),as:o[s]});break;case 578:this.$=new r.AttachDatabase({databaseid:o[s-5],engineid:o[s-7].toUpperCase(),as:o[s],args:o[s-3]});break;case 579:this.$=new r.DetachDatabase({databaseid:o[s]});break;case 580:this.$=new r.CreateDatabase({databaseid:o[s]}),r.extend(this.$,o[s]);break;case 581:this.$=new r.CreateDatabase({engineid:o[s-4].toUpperCase(),databaseid:o[s-1],as:o[s]}),r.extend(this.$,o[s-2]);break;case 582:this.$=new r.CreateDatabase({engineid:o[s-7].toUpperCase(),databaseid:o[s-4],args:o[s-2],as:o[s]}),r.extend(this.$,o[s-5]);break;case 583:this.$=new r.CreateDatabase({engineid:o[s-4].toUpperCase(),as:o[s],args:[o[s-1]]}),r.extend(this.$,o[s-2]);break;case 584:this.$=void 0;break;case 586:case 587:this.$=new r.UseDatabase({databaseid:o[s]});break;case 588:this.$=new r.DropDatabase({databaseid:o[s]}),r.extend(this.$,o[s-1]);break;case 589:case 590:this.$=new r.DropDatabase({databaseid:o[s],engineid:o[s-3].toUpperCase()}),r.extend(this.$,o[s-1]);break;case 591:this.$=new r.CreateIndex({indexid:o[s-5],table:o[s-3],columns:o[s-1]});break;case 592:this.$=new r.CreateIndex({indexid:o[s-5],table:o[s-3],columns:o[s-1],unique:!0});break;case 593:this.$=new r.DropIndex({indexid:o[s]});break;case 594:this.$=new r.ShowDatabases;break;case 595:this.$=new r.ShowDatabases({like:o[s]});break;case 596:this.$=new r.ShowDatabases({engineid:o[s-1].toUpperCase()});break;case 597:this.$=new r.ShowDatabases({engineid:o[s-3].toUpperCase(),like:o[s]});break;case 598:this.$=new r.ShowTables;break;case 599:this.$=new r.ShowTables({like:o[s]});break;case 600:this.$=new r.ShowTables({databaseid:o[s]});break;case 601:this.$=new r.ShowTables({like:o[s],databaseid:o[s-2]});break;case 602:this.$=new r.ShowColumns({table:o[s]});break;case 603:this.$=new r.ShowColumns({table:o[s-2],databaseid:o[s]});break;case 604:this.$=new r.ShowIndex({table:o[s]});break;case 605:this.$=new r.ShowIndex({table:o[s-2],databaseid:o[s]});break;case 606:this.$=new r.ShowCreateTable({table:o[s]});break;case 607:this.$=new r.ShowCreateTable({table:o[s-2],databaseid:o[s]});break;case 608:this.$=new r.CreateTable({table:o[s-6],view:!0,select:o[s-1],viewcolumns:o[s-4]}),r.extend(this.$,o[s-9]),r.extend(this.$,o[s-7]);break;case 609:this.$=new r.CreateTable({table:o[s-3],view:!0,select:o[s-1]}),r.extend(this.$,o[s-6]),r.extend(this.$,o[s-4]);break;case 613:this.$=new r.DropTable({tables:o[s],view:!0}),r.extend(this.$,o[s-1]);break;case 614:case 760:this.$=new r.ExpressionStatement({expression:o[s]});break;case 615:this.$=new r.Source({url:o[s].value});break;case 616:this.$=new r.Assert({value:o[s]});break;case 617:this.$=new r.Assert({value:o[s].value});break;case 618:this.$=new r.Assert({value:o[s],message:o[s-2]});break;case 620:case 631:case 633:this.$=o[s].value;break;case 621:case 629:this.$=+o[s].value;break;case 622:this.$=!!o[s].value;break;case 630:this.$=""+o[s].value;break;case 639:this.$={};break;case 642:this.$=[];break;case 643:r.extend(o[s-2],o[s]),this.$=o[s-2];break;case 645:this.$={},this.$[o[s-2].substr(1,o[s-2].length-2)]=o[s];break;case 646:case 647:this.$={},this.$[o[s-2]]=o[s];break;case 650:this.$=new r.SetVariable({variable:o[s-2].toLowerCase(),value:o[s]});break;case 651:this.$=new r.SetVariable({variable:o[s-1].toLowerCase(),value:o[s]});break;case 652:this.$=new r.SetVariable({variable:o[s-2],expression:o[s]});break;case 653:this.$=new r.SetVariable({variable:o[s-3],props:o[s-2],expression:o[s]});break;case 654:this.$=new r.SetVariable({variable:o[s-2],expression:o[s],method:o[s-3]});break;case 655:this.$=new r.SetVariable({variable:o[s-3],props:o[s-2],expression:o[s],method:o[s-4]});break;case 656:this.$="@";break;case 657:this.$="$";break;case 663:this.$=!0;break;case 664:this.$=!1;break;case 665:this.$=new r.CommitTransaction;break;case 666:this.$=new r.RollbackTransaction;break;case 667:this.$=new r.BeginTransaction;break;case 668:this.$=new r.If({expression:o[s-2],thenstat:o[s-1],elsestat:o[s]}),o[s-1].exists&&(this.$.exists=o[s-1].exists),o[s-1].queries&&(this.$.queries=o[s-1].queries);break;case 669:this.$=new r.If({expression:o[s-1],thenstat:o[s]}),o[s].exists&&(this.$.exists=o[s].exists),o[s].queries&&(this.$.queries=o[s].queries);break;case 670:this.$=o[s];break;case 671:this.$=new r.While({expression:o[s-1],loopstat:o[s]}),o[s].exists&&(this.$.exists=o[s].exists),o[s].queries&&(this.$.queries=o[s].queries);break;case 672:this.$=new r.Continue;break;case 673:this.$=new r.Break;break;case 674:this.$=new r.BeginEnd({statements:o[s-1]});break;case 675:this.$=new r.Print({exprs:o[s]});break;case 676:this.$=new r.Print({select:o[s]});break;case 677:this.$=new r.Require({paths:o[s]});break;case 678:this.$=new r.Require({plugins:o[s]});break;case 679:case 680:this.$=o[s].toUpperCase();break;case 681:this.$=new r.Echo({expr:o[s]});break;case 686:this.$=new r.Declare({declares:o[s]});break;case 689:this.$={variable:o[s-1]},r.extend(this.$,o[s]);break;case 690:this.$={variable:o[s-2]},r.extend(this.$,o[s]);break;case 691:this.$={variable:o[s-3],expression:o[s]},r.extend(this.$,o[s-2]);break;case 692:this.$={variable:o[s-4],expression:o[s]},r.extend(this.$,o[s-2]);break;case 693:this.$=new r.TruncateTable({table:o[s]});break;case 694:this.$=new r.Merge,r.extend(this.$,o[s-4]),r.extend(this.$,o[s-3]),r.extend(this.$,o[s-2]),r.extend(this.$,{matches:o[s-1]}),r.extend(this.$,o[s]);break;case 695:case 696:this.$={into:o[s]};break;case 698:this.$={on:o[s]};break;case 703:this.$={matched:!0,action:o[s]};break;case 704:this.$={matched:!0,expr:o[s-2],action:o[s]};break;case 705:this.$={delete:!0};break;case 706:this.$={update:o[s]};break;case 707:case 708:this.$={matched:!1,bytarget:!0,action:o[s]};break;case 709:case 710:this.$={matched:!1,bytarget:!0,expr:o[s-2],action:o[s]};break;case 711:this.$={matched:!1,bysource:!0,action:o[s]};break;case 712:this.$={matched:!1,bysource:!0,expr:o[s-2],action:o[s]};break;case 713:this.$={insert:!0,values:o[s]};break;case 714:this.$={insert:!0,values:o[s],columns:o[s-3]};break;case 715:this.$={insert:!0,defaultvalues:!0};break;case 716:this.$={insert:!0,defaultvalues:!0,columns:o[s-3]};break;case 718:this.$={output:{columns:o[s]}};break;case 719:this.$={output:{columns:o[s-3],intovar:o[s],method:o[s-1]}};break;case 720:this.$={output:{columns:o[s-2],intotable:o[s]}};break;case 721:this.$={output:{columns:o[s-5],intotable:o[s-3],intocolumns:o[s-1]}};break;case 722:this.$=new r.CreateVertex({class:o[s-3],sharp:o[s-2],name:o[s-1]}),r.extend(this.$,o[s]);break;case 725:this.$={sets:o[s]};break;case 726:this.$={content:o[s]};break;case 727:this.$={select:o[s]};break;case 728:this.$=new r.CreateEdge({from:o[s-3],to:o[s-1],name:o[s-5]}),r.extend(this.$,o[s]);break;case 729:this.$=new r.CreateGraph({graph:o[s]});break;case 730:this.$=new r.CreateGraph({from:o[s]});break;case 733:this.$=o[s-2],o[s-1]&&(this.$.json=new r.Json({value:o[s-1]})),o[s]&&(this.$.as=o[s]);break;case 734:this.$={source:o[s-6],target:o[s]},o[s-3]&&(this.$.json=new r.Json({value:o[s-3]})),o[s-2]&&(this.$.as=o[s-2]),r.extend(this.$,o[s-4]);break;case 735:this.$={source:o[s-5],target:o[s]},o[s-2]&&(this.$.json=new r.Json({value:o[s-3]})),o[s-1]&&(this.$.as=o[s-2]);break;case 736:this.$={source:o[s-2],target:o[s]};break;case 740:this.$={vars:o[s],method:o[s-1]};break;case 743:case 744:var v=o[s-1];this.$={prop:o[s-3],sharp:o[s-2],name:void 0===v?void 0:v.substr(1,v.length-2),class:o[s]};break;case 745:var g=o[s-1];this.$={sharp:o[s-2],name:void 0===g?void 0:g.substr(1,g.length-2),class:o[s]};break;case 746:var y=o[s-1];this.$={name:void 0===y?void 0:y.substr(1,y.length-2),class:o[s]};break;case 747:this.$={class:o[s]};break;case 753:this.$=new r.AddRule({left:o[s-2],right:o[s]});break;case 754:this.$=new r.AddRule({right:o[s]});break;case 757:this.$=new r.Term({termid:o[s]});break;case 758:this.$=new r.Term({termid:o[s-3],args:o[s-1]});break;case 761:this.$=new r.CreateTrigger({trigger:o[s-6],when:o[s-5],action:o[s-4],table:o[s-2],statement:o[s]}),o[s].exists&&(this.$.exists=o[s].exists),o[s].queries&&(this.$.queries=o[s].queries);break;case 762:this.$=new r.CreateTrigger({trigger:o[s-5],when:o[s-4],action:o[s-3],table:o[s-1],funcid:o[s]});break;case 763:this.$=new r.CreateTrigger({trigger:o[s-6],when:o[s-4],action:o[s-3],table:o[s-5],statement:o[s]}),o[s].exists&&(this.$.exists=o[s].exists),o[s].queries&&(this.$.queries=o[s].queries);break;case 764:case 765:case 767:this.$="AFTER";break;case 766:this.$="BEFORE";break;case 768:this.$="INSTEADOF";break;case 769:this.$="INSERT";break;case 770:this.$="DELETE";break;case 771:this.$="UPDATE";break;case 772:this.$=new r.DropTrigger({trigger:o[s]});break;case 773:this.$=new r.Reindex({indexid:o[s]});break;case 1047:case 1067:case 1069:case 1071:case 1075:case 1077:case 1079:case 1081:case 1083:case 1085:this.$=[];break;case 1048:case 1062:case 1064:case 1068:case 1070:case 1072:case 1076:case 1078:case 1080:case 1082:case 1084:case 1086:o[s-1].push(o[s]);break;case 1061:case 1063:this.$=[o[s]]}},table:[t([10,602,764],n,{8:1,9:2,12:3,13:4,17:5,18:7,19:8,20:9,21:10,22:11,23:12,24:13,25:14,26:15,27:16,28:17,29:18,30:19,31:20,32:21,33:22,34:23,35:24,36:25,37:26,38:27,39:28,40:29,41:30,42:31,43:32,44:33,45:34,46:35,47:36,48:37,49:38,50:39,51:40,52:41,54:43,55:44,56:45,57:46,58:47,59:48,60:49,61:50,62:51,63:52,64:53,65:54,66:55,67:56,68:57,69:58,70:59,71:60,79:75,504:95,184:99,3:100,2:r,4:i,5:o,14:a,53:s,72:u,89:l,124:c,146:f,156:h,189:p,266:d,267:v,290:g,335:y,338:m,339:_,396:b,400:E,401:x,404:w,406:T,408:S,409:A,417:C,418:k,434:P,436:R,437:I,439:N,440:L,441:D,442:F,443:j,447:B,448:U,451:z,452:V,505:G,507:H,508:q,517:W}),{1:[3]},{10:[1,105],11:106,602:X,764:$},t(Y,[2,8]),t(Y,[2,9]),t(Z,[2,12]),t(Y,n,{17:5,18:7,19:8,20:9,21:10,22:11,23:12,24:13,25:14,26:15,27:16,28:17,29:18,30:19,31:20,32:21,33:22,34:23,35:24,36:25,37:26,38:27,39:28,40:29,41:30,42:31,43:32,44:33,45:34,46:35,47:36,48:37,49:38,50:39,51:40,52:41,54:43,55:44,56:45,57:46,58:47,59:48,60:49,61:50,62:51,63:52,64:53,65:54,66:55,67:56,68:57,69:58,70:59,71:60,79:75,504:95,184:99,3:100,12:109,2:r,4:i,5:o,15:[1,110],53:s,72:u,89:l,124:c,146:f,156:h,189:p,266:d,267:v,290:g,335:y,338:m,339:_,396:b,400:E,401:x,404:w,406:T,408:S,409:A,417:C,418:k,434:P,436:R,437:I,439:N,440:L,441:D,442:F,443:j,447:B,448:U,451:z,452:V,505:G,507:H,508:q,517:W}),t(Z,[2,14]),t(Z,[2,15]),t(Z,[2,16]),t(Z,[2,17]),t(Z,[2,18]),t(Z,[2,19]),t(Z,[2,20]),t(Z,[2,21]),t(Z,[2,22]),t(Z,[2,23]),t(Z,[2,24]),t(Z,[2,25]),t(Z,[2,26]),t(Z,[2,27]),t(Z,[2,28]),t(Z,[2,29]),t(Z,[2,30]),t(Z,[2,31]),t(Z,[2,32]),t(Z,[2,33]),t(Z,[2,34]),t(Z,[2,35]),t(Z,[2,36]),t(Z,[2,37]),t(Z,[2,38]),t(Z,[2,39]),t(Z,[2,40]),t(Z,[2,41]),t(Z,[2,42]),t(Z,[2,43]),t(Z,[2,44]),t(Z,[2,45]),t(Z,[2,46]),t(Z,[2,47]),t(Z,[2,48]),t(Z,[2,49]),t(Z,[2,50]),t(Z,[2,51]),t(Z,[2,52]),t(Z,[2,53]),t(Z,[2,54]),t(Z,[2,55]),t(Z,[2,56]),t(Z,[2,57]),t(Z,[2,58]),t(Z,[2,59]),t(Z,[2,60]),t(Z,[2,61]),t(Z,[2,62]),t(Z,[2,63]),t(Z,[2,64]),t(Z,[2,65]),t(Z,[2,66]),t(Z,[2,67]),{353:[1,111]},{2:r,3:112,4:i,5:o},{2:r,3:114,4:i,5:o,156:K,200:113,290:J,291:Q,292:ee,293:te},t(ne,[2,501],{3:121,348:125,2:r,4:i,5:o,134:re,135:ie,187:[1,123],193:[1,122],268:[1,129],269:[1,130],357:[1,131],405:[1,120],472:[1,124],509:[1,128]}),{145:oe,449:132,450:133},{183:[1,135]},{405:[1,136]},{2:r,3:138,4:i,5:o,130:[1,144],193:[1,139],353:[1,143],397:140,405:[1,137],410:[1,141],509:[1,142]},{2:r,3:168,4:i,5:o,56:165,77:ae,94:145,111:149,113:153,131:se,132:ue,137:le,143:ce,144:161,145:fe,149:he,152:pe,154:de,156:K,158:167,179:ve,180:ge,181:ye,196:151,200:147,201:155,202:156,254:150,255:146,256:148,257:152,258:154,259:157,260:158,261:159,262:162,263:163,265:me,266:d,270:_e,271:be,273:Ee,280:xe,281:we,282:Te,283:Se,284:Ae,285:Ce,286:Oe,287:ke,288:Pe,290:J,291:Q,292:ee,293:te,294:Re,295:Ie,296:Ne,297:Me,298:Le,299:De,302:Fe,303:je,312:Be,317:Ue,419:190,420:ze,424:Ve},t(Ge,He,{340:204,171:[1,205],198:qe}),t(Ge,He,{340:207,198:qe}),{2:r,3:219,4:i,5:o,77:We,132:Xe,143:ce,144:212,145:fe,152:pe,156:K,181:ye,198:[1,210],199:213,200:215,201:214,202:217,209:209,213:$e,214:218,290:J,291:Q,292:ee,293:te,302:Fe,419:190,420:ze,424:Ve,453:208},{2:r,3:221,4:i,5:o},{353:[1,222]},t(Ye,[2,1043],{80:223,106:224,107:[1,225]}),t(Ze,[2,1047],{90:226}),{2:r,3:230,4:i,5:o,190:[1,228],193:[1,231],267:[1,227],353:[1,232],405:[1,229]},{353:[1,233]},{2:r,3:236,4:i,5:o,73:234,75:235},t([306,602,764],n,{12:3,13:4,17:5,18:7,19:8,20:9,21:10,22:11,23:12,24:13,25:14,26:15,27:16,28:17,29:18,30:19,31:20,32:21,33:22,34:23,35:24,36:25,37:26,38:27,39:28,40:29,41:30,42:31,43:32,44:33,45:34,46:35,47:36,48:37,49:38,50:39,51:40,52:41,54:43,55:44,56:45,57:46,58:47,59:48,60:49,61:50,62:51,63:52,64:53,65:54,66:55,67:56,68:57,69:58,70:59,71:60,79:75,504:95,184:99,3:100,9:238,2:r,4:i,5:o,14:a,53:s,72:u,89:l,124:c,146:f,156:h,189:p,266:d,267:v,290:g,335:y,338:m,339:_,396:b,400:E,401:x,404:w,406:T,408:S,409:A,417:C,418:k,434:P,435:[1,237],436:R,437:I,439:N,440:L,441:D,442:F,443:j,447:B,448:U,451:z,452:V,505:G,507:H,508:q,517:W}),{435:[1,239]},{435:[1,240]},{2:r,3:242,4:i,5:o,405:[1,241]},{2:r,3:244,4:i,5:o,199:243},t(Ke,[2,311]),{113:245,132:ue,296:Ne},{2:r,3:114,4:i,5:o,113:251,131:se,132:[1,248],143:ce,144:246,145:Je,152:pe,156:K,181:ye,196:250,200:255,201:254,257:252,258:253,265:Qe,274:247,290:J,291:Q,292:ee,293:te,294:Re,295:Ie,296:Ne,297:Me,302:Fe,419:190,420:ze,424:Ve},{2:r,3:168,4:i,5:o,56:165,77:ae,94:257,111:149,113:153,131:se,132:ue,137:le,143:ce,144:161,145:fe,149:he,152:pe,154:de,156:K,158:167,179:ve,180:ge,181:ye,196:151,200:147,201:155,202:156,254:150,255:146,256:148,257:152,258:154,259:157,260:158,261:159,262:162,263:163,265:me,266:d,270:_e,271:be,273:Ee,280:xe,281:we,282:Te,283:Se,284:Ae,285:Ce,286:Oe,287:ke,288:Pe,290:J,291:Q,292:ee,293:te,294:Re,295:Ie,296:Ne,297:Me,298:Le,299:De,302:Fe,303:je,312:Be,317:Ue,419:190,420:ze,424:Ve},t(Z,[2,672]),t(Z,[2,673]),{2:r,3:168,4:i,5:o,40:259,56:165,77:ae,79:75,89:l,94:260,111:149,113:153,131:se,132:ue,137:le,143:ce,144:161,145:fe,149:he,151:258,152:pe,154:de,156:K,158:167,179:ve,180:ge,181:ye,184:99,189:p,196:151,200:147,201:155,202:156,254:150,255:146,256:148,257:152,258:154,259:157,260:158,261:159,262:162,263:163,265:me,266:d,270:_e,271:be,273:Ee,280:xe,281:we,282:Te,283:Se,284:Ae,285:Ce,286:Oe,287:ke,288:Pe,290:J,291:Q,292:ee,293:te,294:Re,295:Ie,296:Ne,297:Me,298:Le,299:De,302:Fe,303:je,312:Be,317:Ue,419:190,420:ze,424:Ve},{2:r,3:266,4:i,5:o,113:263,132:ue,296:Ne,444:261,445:262,446:264,447:et},{2:r,3:267,4:i,5:o,143:tt,145:nt,431:268},{2:r,3:168,4:i,5:o,56:165,77:ae,94:271,111:149,113:153,131:se,132:ue,137:le,143:ce,144:161,145:fe,149:he,152:pe,154:de,156:K,158:167,179:ve,180:ge,181:ye,196:151,200:147,201:155,202:156,254:150,255:146,256:148,257:152,258:154,259:157,260:158,261:159,262:162,263:163,265:me,266:d,270:_e,271:be,273:Ee,280:xe,281:we,282:Te,283:Se,284:Ae,285:Ce,286:Oe,287:ke,288:Pe,290:J,291:Q,292:ee,293:te,294:Re,295:Ie,296:Ne,297:Me,298:Le,299:De,302:Fe,303:je,312:Be,317:Ue,419:190,420:ze,424:Ve},{505:[1,272]},{2:r,3:100,4:i,5:o,504:274,506:273},{2:r,3:114,4:i,5:o,156:K,200:275,290:J,291:Q,292:ee,293:te},{2:r,3:168,4:i,5:o,56:165,77:ae,94:276,111:149,113:153,131:se,132:ue,137:le,143:ce,144:161,145:fe,149:he,152:pe,154:de,156:K,158:167,179:ve,180:ge,181:ye,196:151,200:147,201:155,202:156,254:150,255:146,256:148,257:152,258:154,259:157,260:158,261:159,262:162,263:163,265:me,266:d,270:_e,271:be,273:Ee,280:xe,281:we,282:Te,283:Se,284:Ae,285:Ce,286:Oe,287:ke,288:Pe,290:J,291:Q,292:ee,293:te,294:Re,295:Ie,296:Ne,297:Me,298:Le,299:De,302:Fe,303:je,312:Be,317:Ue,419:190,420:ze,424:Ve},t(rt,it,{186:280,164:[1,279],185:[1,277],187:[1,278],195:ot}),t(at,[2,757],{77:[1,282]}),t([2,4,5,10,72,77,78,93,98,107,118,128,131,132,137,143,145,152,154,156,162,164,168,169,179,180,181,183,185,187,195,198,232,245,247,265,266,270,271,273,280,281,282,283,284,285,286,287,288,290,291,292,293,294,295,296,297,298,299,302,303,306,310,312,317,420,424,602,764],[2,152],{149:[1,283],150:[1,284],190:[1,285],191:[1,286],192:[1,287],193:[1,288],194:[1,289]}),t(st,[2,1]),t(st,[2,2]),{6:290,131:[1,439],172:[1,462],245:[1,411],285:[1,373],286:[1,407],370:[1,404],381:[1,295],402:[1,297],410:[1,549],414:[1,471],416:[1,443],417:[1,509],433:[1,442],435:[1,525],440:[1,342],460:[1,418],464:[1,448],470:[1,341],514:[1,307],515:[1,299],516:[1,399],518:[1,291],519:[1,292],520:[1,293],521:[1,294],522:[1,296],523:[1,298],524:[1,300],525:[1,301],526:[1,302],527:[1,303],528:[1,304],529:[1,305],530:[1,306],531:[1,308],532:[1,309],533:[1,310],534:[1,311],535:[1,312],536:[1,313],537:[1,314],538:[1,315],539:[1,316],540:[1,317],541:[1,318],542:[1,319],543:[1,320],544:[1,321],545:[1,322],546:[1,323],547:[1,324],548:[1,325],549:[1,326],550:[1,327],551:[1,328],552:[1,329],553:[1,330],554:[1,331],555:[1,332],556:[1,333],557:[1,334],558:[1,335],559:[1,336],560:[1,337],561:[1,338],562:[1,339],563:[1,340],564:[1,343],565:[1,344],566:[1,345],567:[1,346],568:[1,347],569:[1,348],570:[1,349],571:[1,350],572:[1,351],573:[1,352],574:[1,353],575:[1,354],576:[1,355],577:[1,356],578:[1,357],579:[1,358],580:[1,359],581:[1,360],582:[1,361],583:[1,362],584:[1,363],585:[1,364],586:[1,365],587:[1,366],588:[1,367],589:[1,368],590:[1,369],591:[1,370],592:[1,371],593:[1,372],594:[1,374],595:[1,375],596:[1,376],597:[1,377],598:[1,378],599:[1,379],600:[1,380],601:[1,381],602:[1,382],603:[1,383],604:[1,384],605:[1,385],606:[1,386],607:[1,387],608:[1,388],609:[1,389],610:[1,390],611:[1,391],612:[1,392],613:[1,393],614:[1,394],615:[1,395],616:[1,396],617:[1,397],618:[1,398],619:[1,400],620:[1,401],621:[1,402],622:[1,403],623:[1,405],624:[1,406],625:[1,408],626:[1,409],627:[1,410],628:[1,412],629:[1,413],630:[1,414],631:[1,415],632:[1,416],633:[1,417],634:[1,419],635:[1,420],636:[1,421],637:[1,422],638:[1,423],639:[1,424],640:[1,425],641:[1,426],642:[1,427],643:[1,428],644:[1,429],645:[1,430],646:[1,431],647:[1,432],648:[1,433],649:[1,434],650:[1,435],651:[1,436],652:[1,437],653:[1,438],654:[1,440],655:[1,441],656:[1,444],657:[1,445],658:[1,446],659:[1,447],660:[1,449],661:[1,450],662:[1,451],663:[1,452],664:[1,453],665:[1,454],666:[1,455],667:[1,456],668:[1,457],669:[1,458],670:[1,459],671:[1,460],672:[1,461],673:[1,463],674:[1,464],675:[1,465],676:[1,466],677:[1,467],678:[1,468],679:[1,469],680:[1,470],681:[1,472],682:[1,473],683:[1,474],684:[1,475],685:[1,476],686:[1,477],687:[1,478],688:[1,479],689:[1,480],690:[1,481],691:[1,482],692:[1,483],693:[1,484],694:[1,485],695:[1,486],696:[1,487],697:[1,488],698:[1,489],699:[1,490],700:[1,491],701:[1,492],702:[1,493],703:[1,494],704:[1,495],705:[1,496],706:[1,497],707:[1,498],708:[1,499],709:[1,500],710:[1,501],711:[1,502],712:[1,503],713:[1,504],714:[1,505],715:[1,506],716:[1,507],717:[1,508],718:[1,510],719:[1,511],720:[1,512],721:[1,513],722:[1,514],723:[1,515],724:[1,516],725:[1,517],726:[1,518],727:[1,519],728:[1,520],729:[1,521],730:[1,522],731:[1,523],732:[1,524],733:[1,526],734:[1,527],735:[1,528],736:[1,529],737:[1,530],738:[1,531],739:[1,532],740:[1,533],741:[1,534],742:[1,535],743:[1,536],744:[1,537],745:[1,538],746:[1,539],747:[1,540],748:[1,541],749:[1,542],750:[1,543],751:[1,544],752:[1,545],753:[1,546],754:[1,547],755:[1,548],756:[1,550],757:[1,551],758:[1,552],759:[1,553],760:[1,554],761:[1,555],762:[1,556],763:[1,557]},{1:[2,6]},t(Y,n,{17:5,18:7,19:8,20:9,21:10,22:11,23:12,24:13,25:14,26:15,27:16,28:17,29:18,30:19,31:20,32:21,33:22,34:23,35:24,36:25,37:26,38:27,39:28,40:29,41:30,42:31,43:32,44:33,45:34,46:35,47:36,48:37,49:38,50:39,51:40,52:41,54:43,55:44,56:45,57:46,58:47,59:48,60:49,61:50,62:51,63:52,64:53,65:54,66:55,67:56,68:57,69:58,70:59,71:60,79:75,504:95,184:99,3:100,12:558,2:r,4:i,5:o,53:s,72:u,89:l,124:c,146:f,156:h,189:p,266:d,267:v,290:g,335:y,338:m,339:_,396:b,400:E,401:x,404:w,406:T,408:S,409:A,417:C,418:k,434:P,436:R,437:I,439:N,440:L,441:D,442:F,443:j,447:B,448:U,451:z,452:V,505:G,507:H,508:q,517:W}),t(ut,[2,1041]),t(ut,[2,1042]),t(Y,[2,10]),{16:[1,559]},{2:r,3:244,4:i,5:o,199:560},{405:[1,561]},t(Z,[2,760]),{77:lt},{77:[1,563]},{77:ct},{77:[1,565]},{77:[1,566]},{2:r,3:168,4:i,5:o,56:165,77:ae,94:567,111:149,113:153,131:se,132:ue,137:le,143:ce,144:161,145:fe,149:he,152:pe,154:de,156:K,158:167,179:ve,180:ge,181:ye,196:151,200:147,201:155,202:156,254:150,255:146,256:148,257:152,258:154,259:157,260:158,261:159,262:162,263:163,265:me,266:d,270:_e,271:be,273:Ee,280:xe,281:we,282:Te,283:Se,284:Ae,285:Ce,286:Oe,287:ke,288:Pe,290:J,291:Q,292:ee,293:te,294:Re,295:Ie,296:Ne,297:Me,298:Le,299:De,302:Fe,303:je,312:Be,317:Ue,419:190,420:ze,424:Ve},t(Ge,ft,{350:568,156:ht}),{405:[1,570]},{2:r,3:571,4:i,5:o},{193:[1,572]},{2:r,3:578,4:i,5:o,132:pt,137:dt,143:tt,145:nt,152:vt,183:[1,574],431:585,473:573,474:575,475:576,478:577,482:582,493:579,497:581},{130:[1,589],349:586,353:[1,588],410:[1,587]},{113:591,132:ue,183:[2,1141],296:Ne,471:590},t(gt,[2,1135],{465:592,3:593,2:r,4:i,5:o}),{2:r,3:594,4:i,5:o},{4:[1,595]},{4:[1,596]},t(ne,[2,502]),t(Z,[2,686],{74:[1,597]}),t(yt,[2,687]),{2:r,3:598,4:i,5:o},{2:r,3:244,4:i,5:o,199:599},{2:r,3:600,4:i,5:o},t(Ge,mt,{398:601,156:_t}),{405:[1,603]},{2:r,3:604,4:i,5:o},t(Ge,mt,{398:605,156:_t}),t(Ge,mt,{398:606,156:_t}),{2:r,3:607,4:i,5:o},t(bt,[2,1129]),t(bt,[2,1130]),t(Z,n,{17:5,18:7,19:8,20:9,21:10,22:11,23:12,24:13,25:14,26:15,27:16,28:17,29:18,30:19,31:20,32:21,33:22,34:23,35:24,36:25,37:26,38:27,39:28,40:29,41:30,42:31,43:32,44:33,45:34,46:35,47:36,48:37,49:38,50:39,51:40,52:41,54:43,55:44,56:45,57:46,58:47,59:48,60:49,61:50,62:51,63:52,64:53,65:54,66:55,67:56,68:57,69:58,70:59,71:60,79:75,504:95,184:99,3:100,12:608,114:625,327:637,2:r,4:i,5:o,53:s,72:u,89:l,99:Et,112:xt,115:wt,116:Tt,123:St,124:At,133:Ct,136:Ot,138:kt,139:Pt,140:Rt,141:It,142:Nt,146:f,154:Mt,156:h,170:Lt,171:Dt,179:Ft,180:jt,189:p,266:d,267:v,290:g,311:Bt,312:Ut,313:zt,315:Vt,316:Gt,317:Ht,318:qt,319:Wt,320:Xt,321:$t,322:Yt,323:Zt,324:Kt,325:Jt,326:Qt,330:en,331:tn,332:nn,333:rn,335:y,338:m,339:_,396:b,400:E,401:x,404:w,406:T,408:S,409:A,417:C,418:k,434:P,436:R,437:I,439:N,440:L,441:D,442:F,443:j,447:B,448:U,451:z,452:V,505:G,507:H,508:q,517:W}),t(Ke,[2,288]),t(Ke,[2,289]),t(Ke,[2,290]),t(Ke,[2,291]),t(Ke,[2,292]),t(Ke,[2,293]),t(Ke,[2,294]),t(Ke,[2,295]),t(Ke,[2,296]),t(Ke,[2,297]),t(Ke,[2,298]),t(Ke,[2,299]),t(Ke,[2,300]),t(Ke,[2,301]),t(Ke,[2,302]),t(Ke,[2,303]),t(Ke,[2,304]),t(Ke,[2,305]),{2:r,3:168,4:i,5:o,26:654,27:653,36:649,40:648,56:165,77:ae,79:75,89:l,94:651,111:149,113:153,131:se,132:ue,137:le,143:ce,144:161,145:fe,149:he,152:pe,154:de,156:K,158:167,179:ve,180:ge,181:ye,184:99,189:p,196:151,200:147,201:155,202:156,254:150,255:146,256:148,257:152,258:154,259:157,260:158,261:159,262:162,263:163,264:650,265:me,266:d,267:[1,655],270:_e,271:be,273:Ee,280:xe,281:we,282:Te,283:Se,284:Ae,285:Ce,286:Oe,287:ke,288:Pe,290:[1,652],291:Q,292:ee,293:te,294:Re,295:Ie,296:Ne,297:Me,298:Le,299:De,302:Fe,303:je,312:Be,317:Ue,339:_,419:190,420:ze,424:Ve},t(Ke,[2,309]),t(Ke,[2,310]),{77:[1,656]},t([2,4,5,10,53,72,74,76,78,89,93,95,98,99,107,112,115,118,122,123,124,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,145,146,148,149,150,152,154,156,162,164,166,168,169,170,171,172,173,175,179,180,181,183,185,187,189,198,206,208,222,223,224,225,226,227,228,229,232,239,242,243,245,247,266,267,280,281,282,283,284,285,286,287,288,290,296,300,306,308,309,310,311,312,313,314,315,316,317,318,319,320,321,322,323,324,325,326,330,331,332,333,335,338,339,396,400,401,404,406,408,409,417,418,420,424,434,436,437,439,440,441,442,443,447,448,451,452,464,470,505,507,508,517,602,764],on,{77:lt,116:[1,657]}),{2:r,3:168,4:i,5:o,56:165,77:ae,94:658,111:149,113:153,131:se,132:ue,137:le,143:ce,144:161,145:fe,149:he,152:pe,154:de,156:K,158:167,179:ve,180:ge,181:ye,196:151,200:147,201:155,202:156,254:150,255:146,256:148,257:152,258:154,259:157,260:158,261:159,262:162,263:163,265:me,266:d,270:_e,271:be,273:Ee,280:xe,281:we,282:Te,283:Se,284:Ae,285:Ce,286:Oe,287:ke,288:Pe,290:J,291:Q,292:ee,293:te,294:Re,295:Ie,296:Ne,297:Me,298:Le,299:De,302:Fe,303:je,312:Be,317:Ue,419:190,420:ze,424:Ve},{2:r,3:168,4:i,5:o,56:165,77:ae,94:659,111:149,113:153,131:se,132:ue,137:le,143:ce,144:161,145:fe,149:he,152:pe,154:de,156:K,158:167,179:ve,180:ge,181:ye,196:151,200:147,201:155,202:156,254:150,255:146,256:148,257:152,258:154,259:157,260:158,261:159,262:162,263:163,265:me,266:d,270:_e,271:be,273:Ee,280:xe,281:we,282:Te,283:Se,284:Ae,285:Ce,286:Oe,287:ke,288:Pe,290:J,291:Q,292:ee,293:te,294:Re,295:Ie,296:Ne,297:Me,298:Le,299:De,302:Fe,303:je,312:Be,317:Ue,419:190,420:ze,424:Ve},{2:r,3:168,4:i,5:o,56:165,77:ae,94:660,111:149,113:153,131:se,132:ue,137:le,143:ce,144:161,145:fe,149:he,152:pe,154:de,156:K,158:167,179:ve,180:ge,181:ye,196:151,200:147,201:155,202:156,254:150,255:146,256:148,257:152,258:154,259:157,260:158,261:159,262:162,263:163,265:me,266:d,270:_e,271:be,273:Ee,280:xe,281:we,282:Te,283:Se,284:Ae,285:Ce,286:Oe,287:ke,288:Pe,290:J,291:Q,292:ee,293:te,294:Re,295:Ie,296:Ne,297:Me,298:Le,299:De,302:Fe,303:je,312:Be,317:Ue,419:190,420:ze,424:Ve},{2:r,3:168,4:i,5:o,56:165,77:ae,94:661,111:149,113:153,131:se,132:ue,137:le,143:ce,144:161,145:fe,149:he,152:pe,154:de,156:K,158:167,179:ve,180:ge,181:ye,196:151,200:147,201:155,202:156,254:150,255:146,256:148,257:152,258:154,259:157,260:158,261:159,262:162,263:163,265:me,266:d,270:_e,271:be,273:Ee,280:xe,281:we,282:Te,283:Se,284:Ae,285:Ce,286:Oe,287:ke,288:Pe,290:J,291:Q,292:ee,293:te,294:Re,295:Ie,296:Ne,297:Me,298:Le,299:De,302:Fe,303:je,312:Be,317:Ue,419:190,420:ze,424:Ve},{2:r,3:168,4:i,5:o,56:165,77:ae,94:662,111:149,113:153,131:se,132:ue,137:le,143:ce,144:161,145:fe,149:he,152:pe,154:de,156:K,158:167,179:ve,180:ge,181:ye,196:151,200:147,201:155,202:156,254:150,255:146,256:148,257:152,258:154,259:157,260:158,261:159,262:162,263:163,265:me,266:d,270:_e,271:be,273:Ee,280:xe,281:we,282:Te,283:Se,284:Ae,285:Ce,286:Oe,287:ke,288:Pe,290:J,291:Q,292:ee,293:te,294:Re,295:Ie,296:Ne,297:Me,298:Le,299:De,302:Fe,303:je,312:Be,317:Ue,419:190,420:ze,424:Ve},t(Ke,[2,283]),t([2,4,5,10,53,72,74,76,77,78,89,93,95,98,99,107,112,115,116,118,122,123,124,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,145,146,148,149,150,152,154,156,162,164,166,168,169,170,171,172,173,175,179,180,181,183,185,187,189,198,206,208,222,223,224,225,226,227,228,229,230,231,232,239,242,243,245,247,249,265,266,267,270,271,273,280,281,282,283,284,285,286,287,288,290,291,292,293,294,295,296,297,298,299,300,302,303,306,308,309,310,311,312,313,314,315,316,317,318,319,320,321,322,323,324,325,326,330,331,332,333,335,338,339,343,356,368,369,373,374,396,400,401,404,406,408,409,415,417,418,420,424,426,434,436,437,439,440,441,442,443,447,448,451,452,464,470,505,507,508,517,602,764,765,766],[2,356]),t(an,[2,357]),t(an,[2,358]),t(an,sn),t(an,[2,360]),t([2,4,5,10,53,72,74,76,77,78,89,93,95,98,99,107,112,115,116,118,122,123,124,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,145,146,148,149,150,152,154,156,162,164,166,168,169,170,171,172,173,175,179,180,181,183,185,187,189,198,206,208,222,223,224,225,226,227,228,229,230,232,239,242,243,245,247,266,267,280,281,282,283,284,285,286,287,288,290,296,297,300,306,308,309,310,311,312,313,314,315,316,317,318,319,320,321,322,323,324,325,326,330,331,332,333,335,338,339,343,356,368,369,373,374,396,400,401,404,406,408,409,417,418,420,424,426,434,436,437,439,440,441,442,443,447,448,451,452,464,470,505,507,508,517,602,764],[2,361]),{2:r,3:664,4:i,5:o,131:[1,665],301:663},{2:r,3:666,4:i,5:o},t(an,[2,367]),t(an,[2,368]),{2:r,3:667,4:i,5:o,77:un,113:669,131:se,132:ue,143:ce,152:pe,181:ye,196:670,201:672,257:671,294:Re,295:Ie,296:Ne,302:Fe,419:673,424:Ve},{77:[1,674]},{2:r,3:168,4:i,5:o,56:165,77:ae,94:675,111:149,113:153,131:se,132:ue,137:le,143:ce,144:161,145:fe,149:he,152:pe,154:de,156:K,158:167,179:ve,180:ge,181:ye,196:151,200:147,201:155,202:156,254:150,255:146,256:148,257:152,258:154,259:157,260:158,261:159,262:162,263:163,265:me,266:d,270:_e,271:be,273:Ee,280:xe,281:we,282:Te,283:Se,284:Ae,285:Ce,286:Oe,287:ke,288:Pe,290:J,291:Q,292:ee,293:te,294:Re,295:Ie,296:Ne,297:Me,298:Le,299:De,302:Fe,303:je,304:676,307:677,308:ln,312:Be,317:Ue,419:190,420:ze,424:Ve},{77:[1,679]},{77:[1,680]},t(cn,[2,624]),{2:r,3:695,4:i,5:o,77:fn,111:690,113:688,131:se,132:ue,143:ce,144:685,145:Je,152:pe,156:K,181:ye,196:687,200:693,201:692,257:689,258:691,290:J,291:Q,292:ee,293:te,294:Re,295:Ie,296:Ne,297:Me,300:[1,683],302:Fe,419:190,420:ze,421:681,422:684,423:686,424:Ve,427:682},{2:r,3:168,4:i,5:o,56:165,77:ae,94:260,111:149,113:153,131:se,132:ue,137:le,143:ce,144:161,145:fe,149:he,151:696,152:pe,154:de,156:K,158:167,179:ve,180:ge,181:ye,196:151,200:147,201:155,202:156,254:150,255:146,256:148,257:152,258:154,259:157,260:158,261:159,262:162,263:163,265:me,266:d,270:_e,271:be,273:Ee,280:xe,281:we,282:Te,283:Se,284:Ae,285:Ce,286:Oe,287:ke,288:Pe,290:J,291:Q,292:ee,293:te,294:Re,295:Ie,296:Ne,297:Me,298:Le,299:De,302:Fe,303:je,312:Be,317:Ue,419:190,420:ze,424:Ve},{2:r,3:697,4:i,5:o,156:K,200:698,290:J,291:Q,292:ee,293:te},{77:[2,336]},{77:[2,337]},{77:[2,338]},{77:[2,339]},{77:[2,340]},{77:[2,341]},{77:[2,342]},{77:[2,343]},{77:[2,344]},{2:r,3:704,4:i,5:o,131:hn,132:pn,425:699,426:[1,700],428:701},{2:r,3:244,4:i,5:o,199:705},{290:[1,706]},t(Ge,[2,472]),{2:r,3:244,4:i,5:o,199:707},{231:[1,709],454:708},{231:[2,695]},{2:r,3:219,4:i,5:o,77:We,132:Xe,143:ce,144:212,145:fe,152:pe,156:K,181:ye,199:213,200:215,201:214,202:217,209:710,213:$e,214:218,290:J,291:Q,292:ee,293:te,302:Fe,419:190,420:ze,424:Ve},{40:711,79:75,89:l,184:99,189:p},t(dn,[2,1091],{210:712,76:[1,713]}),t(vn,[2,185],{3:714,2:r,4:i,5:o,76:[1,715],154:[1,716]}),t(vn,[2,189],{3:717,2:r,4:i,5:o,76:[1,718]}),t(vn,[2,190],{3:719,2:r,4:i,5:o,76:[1,720]}),t(vn,[2,193]),t(vn,[2,194],{3:721,2:r,4:i,5:o,76:[1,722]}),t(vn,[2,197],{3:723,2:r,4:i,5:o,76:[1,724]}),t([2,4,5,10,72,74,76,78,93,98,118,128,154,162,168,169,183,206,208,222,223,224,225,226,227,228,229,230,231,232,245,247,306,310,602,764],gn,{77:lt,116:yn}),t([2,4,5,10,72,74,76,78,93,98,118,128,162,168,169,206,208,222,223,224,225,226,227,228,229,230,231,232,245,247,306,310,602,764],[2,200]),t(Z,[2,773]),{2:r,3:244,4:i,5:o,199:726},t(mn,_n,{81:727,198:bn}),t(Ye,[2,1044]),t(En,[2,1057],{108:729,190:[1,730]}),t([10,78,183,306,310,602,764],_n,{419:190,81:731,117:732,3:733,114:736,144:758,158:768,160:769,2:r,4:i,5:o,72:xn,76:wn,77:Tn,112:Sn,115:wt,116:Tt,118:An,122:Cn,123:On,124:kn,128:Pn,129:Rn,130:In,131:Nn,132:Mn,133:Ln,134:Dn,135:Fn,136:jn,137:Bn,138:Un,139:zn,140:Vn,141:Gn,142:Hn,143:qn,145:Wn,146:Xn,148:$n,149:Yn,150:Zn,152:Kn,154:Jn,156:Qn,162:er,164:tr,166:nr,168:rr,169:ir,170:or,171:ar,172:sr,173:ur,175:lr,185:cr,187:fr,198:bn,280:xe,281:we,282:Te,283:Se,284:Ae,285:Ce,286:Oe,287:ke,288:Pe,420:ze,424:Ve}),{353:[1,782]},{183:[1,783]},t(Z,[2,594],{112:[1,784]}),{405:[1,785]},{183:[1,786]},t(Z,[2,598],{112:[1,787],183:[1,788]}),{2:r,3:244,4:i,5:o,199:789},{40:790,74:[1,791],79:75,89:l,184:99,189:p},t(hr,[2,70]),{76:[1,792]},t(Z,[2,667]),{11:106,306:[1,793],602:X,764:$},t(Z,[2,665]),t(Z,[2,666]),{2:r,3:794,4:i,5:o},t(Z,[2,587]),{146:[1,795]},t([2,4,5,10,53,72,74,76,77,78,89,95,124,128,143,145,146,148,149,152,154,156,181,183,187,189,230,266,267,290,297,302,306,310,335,338,339,343,344,356,368,369,373,374,396,400,401,402,403,404,406,408,409,417,418,420,424,434,436,437,439,440,441,442,443,447,448,451,452,505,507,508,514,515,516,517,602,764],gn,{116:yn}),t(Z,[2,615]),t(Z,[2,616]),t(Z,[2,617]),t(Z,sn,{74:[1,796]}),{77:un,113:669,131:se,132:ue,143:ce,152:pe,181:ye,196:670,201:672,257:671,294:Re,295:Ie,296:Ne,302:Fe,419:673,424:Ve},t(pr,[2,320]),t(pr,[2,321]),t(pr,[2,322]),t(pr,[2,323]),t(pr,[2,324]),t(pr,[2,325]),t(pr,[2,326]),t(Z,n,{17:5,18:7,19:8,20:9,21:10,22:11,23:12,24:13,25:14,26:15,27:16,28:17,29:18,30:19,31:20,32:21,33:22,34:23,35:24,36:25,37:26,38:27,39:28,40:29,41:30,42:31,43:32,44:33,45:34,46:35,47:36,48:37,49:38,50:39,51:40,52:41,54:43,55:44,56:45,57:46,58:47,59:48,60:49,61:50,62:51,63:52,64:53,65:54,66:55,67:56,68:57,69:58,70:59,71:60,79:75,504:95,184:99,3:100,114:625,327:637,12:797,2:r,4:i,5:o,53:s,72:u,89:l,99:Et,112:xt,115:wt,116:Tt,123:St,124:At,133:Ct,136:Ot,138:kt,139:Pt,140:Rt,141:It,142:Nt,146:f,154:Mt,156:h,170:Lt,171:Dt,179:Ft,180:jt,189:p,266:d,267:v,290:g,311:Bt,312:Ut,313:zt,315:Vt,316:Gt,317:Ht,318:qt,319:Wt,320:Xt,321:$t,322:Yt,323:Zt,324:Kt,325:Jt,326:Qt,330:en,331:tn,332:nn,333:rn,335:y,338:m,339:_,396:b,400:E,401:x,404:w,406:T,408:S,409:A,417:C,418:k,434:P,436:R,437:I,439:N,440:L,441:D,442:F,443:j,447:B,448:U,451:z,452:V,505:G,507:H,508:q,517:W}),t(Z,[2,675],{74:dr}),t(Z,[2,676]),t(vr,[2,354],{114:625,327:637,99:Et,112:xt,115:wt,116:Tt,123:St,124:gr,133:Ct,136:Ot,138:kt,139:Pt,140:Rt,141:It,142:Nt,154:Mt,170:Lt,171:Dt,179:Ft,180:jt,311:Bt,312:Ut,313:zt,315:Vt,316:Gt,317:Ht,318:qt,319:Wt,320:Xt,321:$t,322:Yt,323:Zt,324:Kt,325:Jt,326:Qt,330:en,331:tn,332:nn,333:rn}),t(Z,[2,677],{74:[1,800]}),t(Z,[2,678],{74:[1,801]}),t(yt,[2,683]),t(yt,[2,685]),t(yt,[2,679]),t(yt,[2,680]),{114:807,115:wt,116:Tt,124:[1,802],230:yr,429:803,430:804,433:mr},{2:r,3:808,4:i,5:o},t(Ge,[2,656]),t(Ge,[2,657]),t(Z,[2,614],{114:625,327:637,99:Et,112:xt,115:wt,116:Tt,123:St,124:gr,133:Ct,136:Ot,138:kt,139:Pt,140:Rt,141:It,142:Nt,154:Mt,170:Lt,171:Dt,179:Ft,180:jt,311:Bt,312:Ut,313:zt,315:Vt,316:Gt,317:Ht,318:qt,319:Wt,320:Xt,321:$t,322:Yt,323:Zt,324:Kt,325:Jt,326:Qt,330:en,331:tn,332:nn,333:rn}),{2:r,3:100,4:i,5:o,504:274,506:809},t(Z,[2,754],{74:_r}),t(br,[2,756]),t(Z,[2,759]),t(Z,[2,681],{114:625,327:637,99:Et,112:xt,115:wt,116:Tt,123:St,124:gr,133:Ct,136:Ot,138:kt,139:Pt,140:Rt,141:It,142:Nt,154:Mt,170:Lt,171:Dt,179:Ft,180:jt,311:Bt,312:Ut,313:zt,315:Vt,316:Gt,317:Ht,318:qt,319:Wt,320:Xt,321:$t,322:Yt,323:Zt,324:Kt,325:Jt,326:Qt,330:en,331:tn,332:nn,333:rn}),t(Er,it,{186:811,195:ot}),t(Er,it,{186:812,195:ot}),t(Er,it,{186:813,195:ot}),t(xr,[2,1087],{255:146,200:147,256:148,111:149,254:150,196:151,257:152,113:153,258:154,201:155,202:156,259:157,260:158,261:159,144:161,262:162,263:163,56:165,158:167,3:168,419:190,188:814,174:815,253:816,94:817,2:r,4:i,5:o,77:ae,131:se,132:ue,137:le,143:ce,145:fe,149:he,152:pe,154:de,156:K,179:ve,180:ge,181:ye,265:me,266:d,270:_e,271:be,273:Ee,280:xe,281:we,282:Te,283:Se,284:Ae,285:Ce,286:Oe,287:ke,288:Pe,290:J,291:Q,292:ee,293:te,294:Re,295:Ie,296:Ne,297:Me,298:Le,299:De,302:Fe,303:je,312:Be,317:Ue,420:ze,424:Ve}),{77:[1,819],131:se,196:818},{2:r,3:100,4:i,5:o,504:274,506:820},t(wr,[2,153]),t(wr,[2,154]),t(wr,[2,155]),t(wr,[2,156]),t(wr,[2,157]),t(wr,[2,158]),t(wr,[2,159]),t(st,[2,3]),t(st,[2,774]),t(st,[2,775]),t(st,[2,776]),t(st,[2,777]),t(st,[2,778]),t(st,[2,779]),t(st,[2,780]),t(st,[2,781]),t(st,[2,782]),t(st,[2,783]),t(st,[2,784]),t(st,[2,785]),t(st,[2,786]),t(st,[2,787]),t(st,[2,788]),t(st,[2,789]),t(st,[2,790]),t(st,[2,791]),t(st,[2,792]),t(st,[2,793]),t(st,[2,794]),t(st,[2,795]),t(st,[2,796]),t(st,[2,797]),t(st,[2,798]),t(st,[2,799]),t(st,[2,800]),t(st,[2,801]),t(st,[2,802]),t(st,[2,803]),t(st,[2,804]),t(st,[2,805]),t(st,[2,806]),t(st,[2,807]),t(st,[2,808]),t(st,[2,809]),t(st,[2,810]),t(st,[2,811]),t(st,[2,812]),t(st,[2,813]),t(st,[2,814]),t(st,[2,815]),t(st,[2,816]),t(st,[2,817]),t(st,[2,818]),t(st,[2,819]),t(st,[2,820]),t(st,[2,821]),t(st,[2,822]),t(st,[2,823]),t(st,[2,824]),t(st,[2,825]),t(st,[2,826]),t(st,[2,827]),t(st,[2,828]),t(st,[2,829]),t(st,[2,830]),t(st,[2,831]),t(st,[2,832]),t(st,[2,833]),t(st,[2,834]),t(st,[2,835]),t(st,[2,836]),t(st,[2,837]),t(st,[2,838]),t(st,[2,839]),t(st,[2,840]),t(st,[2,841]),t(st,[2,842]),t(st,[2,843]),t(st,[2,844]),t(st,[2,845]),t(st,[2,846]),t(st,[2,847]),t(st,[2,848]),t(st,[2,849]),t(st,[2,850]),t(st,[2,851]),t(st,[2,852]),t(st,[2,853]),t(st,[2,854]),t(st,[2,855]),t(st,[2,856]),t(st,[2,857]),t(st,[2,858]),t(st,[2,859]),t(st,[2,860]),t(st,[2,861]),t(st,[2,862]),t(st,[2,863]),t(st,[2,864]),t(st,[2,865]),t(st,[2,866]),t(st,[2,867]),t(st,[2,868]),t(st,[2,869]),t(st,[2,870]),t(st,[2,871]),t(st,[2,872]),t(st,[2,873]),t(st,[2,874]),t(st,[2,875]),t(st,[2,876]),t(st,[2,877]),t(st,[2,878]),t(st,[2,879]),t(st,[2,880]),t(st,[2,881]),t(st,[2,882]),t(st,[2,883]),t(st,[2,884]),t(st,[2,885]),t(st,[2,886]),t(st,[2,887]),t(st,[2,888]),t(st,[2,889]),t(st,[2,890]),t(st,[2,891]),t(st,[2,892]),t(st,[2,893]),t(st,[2,894]),t(st,[2,895]),t(st,[2,896]),t(st,[2,897]),t(st,[2,898]),t(st,[2,899]),t(st,[2,900]),t(st,[2,901]),t(st,[2,902]),t(st,[2,903]),t(st,[2,904]),t(st,[2,905]),t(st,[2,906]),t(st,[2,907]),t(st,[2,908]),t(st,[2,909]),t(st,[2,910]),t(st,[2,911]),t(st,[2,912]),t(st,[2,913]),t(st,[2,914]),t(st,[2,915]),t(st,[2,916]),t(st,[2,917]),t(st,[2,918]),t(st,[2,919]),t(st,[2,920]),t(st,[2,921]),t(st,[2,922]),t(st,[2,923]),t(st,[2,924]),t(st,[2,925]),t(st,[2,926]),t(st,[2,927]),t(st,[2,928]),t(st,[2,929]),t(st,[2,930]),t(st,[2,931]),t(st,[2,932]),t(st,[2,933]),t(st,[2,934]),t(st,[2,935]),t(st,[2,936]),t(st,[2,937]),t(st,[2,938]),t(st,[2,939]),t(st,[2,940]),t(st,[2,941]),t(st,[2,942]),t(st,[2,943]),t(st,[2,944]),t(st,[2,945]),t(st,[2,946]),t(st,[2,947]),t(st,[2,948]),t(st,[2,949]),t(st,[2,950]),t(st,[2,951]),t(st,[2,952]),t(st,[2,953]),t(st,[2,954]),t(st,[2,955]),t(st,[2,956]),t(st,[2,957]),t(st,[2,958]),t(st,[2,959]),t(st,[2,960]),t(st,[2,961]),t(st,[2,962]),t(st,[2,963]),t(st,[2,964]),t(st,[2,965]),t(st,[2,966]),t(st,[2,967]),t(st,[2,968]),t(st,[2,969]),t(st,[2,970]),t(st,[2,971]),t(st,[2,972]),t(st,[2,973]),t(st,[2,974]),t(st,[2,975]),t(st,[2,976]),t(st,[2,977]),t(st,[2,978]),t(st,[2,979]),t(st,[2,980]),t(st,[2,981]),t(st,[2,982]),t(st,[2,983]),t(st,[2,984]),t(st,[2,985]),t(st,[2,986]),t(st,[2,987]),t(st,[2,988]),t(st,[2,989]),t(st,[2,990]),t(st,[2,991]),t(st,[2,992]),t(st,[2,993]),t(st,[2,994]),t(st,[2,995]),t(st,[2,996]),t(st,[2,997]),t(st,[2,998]),t(st,[2,999]),t(st,[2,1e3]),t(st,[2,1001]),t(st,[2,1002]),t(st,[2,1003]),t(st,[2,1004]),t(st,[2,1005]),t(st,[2,1006]),t(st,[2,1007]),t(st,[2,1008]),t(st,[2,1009]),t(st,[2,1010]),t(st,[2,1011]),t(st,[2,1012]),t(st,[2,1013]),t(st,[2,1014]),t(st,[2,1015]),t(st,[2,1016]),t(st,[2,1017]),t(st,[2,1018]),t(st,[2,1019]),t(st,[2,1020]),t(st,[2,1021]),t(st,[2,1022]),t(st,[2,1023]),t(st,[2,1024]),t(st,[2,1025]),t(st,[2,1026]),t(st,[2,1027]),t(st,[2,1028]),t(st,[2,1029]),t(st,[2,1030]),t(st,[2,1031]),t(st,[2,1032]),t(st,[2,1033]),t(st,[2,1034]),t(st,[2,1035]),t(st,[2,1036]),t(st,[2,1037]),t(st,[2,1038]),t(st,[2,1039]),t(st,[2,1040]),t(Y,[2,7]),t(Y,n,{17:5,18:7,19:8,20:9,21:10,22:11,23:12,24:13,25:14,26:15,27:16,28:17,29:18,30:19,31:20,32:21,33:22,34:23,35:24,36:25,37:26,38:27,39:28,40:29,41:30,42:31,43:32,44:33,45:34,46:35,47:36,48:37,49:38,50:39,51:40,52:41,54:43,55:44,56:45,57:46,58:47,59:48,60:49,61:50,62:51,63:52,64:53,65:54,66:55,67:56,68:57,69:58,70:59,71:60,79:75,504:95,184:99,3:100,12:821,2:r,4:i,5:o,53:s,72:u,89:l,124:c,146:f,156:h,189:p,266:d,267:v,290:g,335:y,338:m,339:_,396:b,400:E,401:x,404:w,406:T,408:S,409:A,417:C,418:k,434:P,436:R,437:I,439:N,440:L,441:D,442:F,443:j,447:B,448:U,451:z,452:V,505:G,507:H,508:q,517:W}),{396:[1,825],401:[1,822],402:[1,823],403:[1,824]},{2:r,3:826,4:i,5:o},t(Er,[2,1111],{289:827,767:829,78:[1,828],164:[1,831],185:[1,830]}),{2:r,3:168,4:i,5:o,56:165,77:ae,94:260,111:149,113:153,131:se,132:ue,137:le,143:ce,144:161,145:fe,149:he,151:832,152:pe,154:de,156:K,158:167,179:ve,180:ge,181:ye,196:151,200:147,201:155,202:156,254:150,255:146,256:148,257:152,258:154,259:157,260:158,261:159,262:162,263:163,265:me,266:d,270:_e,271:be,273:Ee,280:xe,281:we,282:Te,283:Se,284:Ae,285:Ce,286:Oe,287:ke,288:Pe,290:J,291:Q,292:ee,293:te,294:Re,295:Ie,296:Ne,297:Me,298:Le,299:De,302:Fe,303:je,312:Be,317:Ue,419:190,420:ze,424:Ve},{2:r,3:168,4:i,5:o,56:165,77:ae,94:260,111:149,113:153,131:se,132:ue,137:le,143:ce,144:161,145:fe,149:he,151:833,152:pe,154:de,156:K,158:167,179:ve,180:ge,181:ye,196:151,200:147,201:155,202:156,254:150,255:146,256:148,257:152,258:154,259:157,260:158,261:159,262:162,263:163,265:me,266:d,270:_e,271:be,273:Ee,280:xe,281:we,282:Te,283:Se,284:Ae,285:Ce,286:Oe,287:ke,288:Pe,290:J,291:Q,292:ee,293:te,294:Re,295:Ie,296:Ne,297:Me,298:Le,299:De,302:Fe,303:je,312:Be,317:Ue,419:190,420:ze,424:Ve},{2:r,3:834,4:i,5:o,132:[1,835]},{2:r,3:836,4:i,5:o,132:[1,837]},{2:r,3:838,4:i,5:o,99:Et,112:xt,114:625,115:wt,116:Tt,123:St,124:gr,133:Ct,136:Ot,138:kt,139:Pt,140:Rt,141:It,142:Nt,154:Mt,170:Lt,171:Dt,179:Ft,180:jt,311:Bt,312:Ut,313:zt,315:Vt,316:Gt,317:Ht,318:qt,319:Wt,320:Xt,321:$t,322:Yt,323:Zt,324:Kt,325:Jt,326:Qt,327:637,330:en,331:tn,332:nn,333:rn},{2:r,3:839,4:i,5:o},{154:[1,840]},t(Tr,ft,{350:841,156:ht}),{230:[1,842]},{2:r,3:843,4:i,5:o},t(Z,[2,729],{74:Sr}),{2:r,3:168,4:i,5:o,56:165,77:ae,94:845,111:149,113:153,131:se,132:ue,137:le,143:ce,144:161,145:fe,149:he,152:pe,154:de,156:K,158:167,179:ve,180:ge,181:ye,196:151,200:147,201:155,202:156,254:150,255:146,256:148,257:152,258:154,259:157,260:158,261:159,262:162,263:163,265:me,266:d,270:_e,271:be,273:Ee,280:xe,281:we,282:Te,283:Se,284:Ae,285:Ce,286:Oe,287:ke,288:Pe,290:J,291:Q,292:ee,293:te,294:Re,295:Ie,296:Ne,297:Me,298:Le,299:De,302:Fe,303:je,312:Be,317:Ue,419:190,420:ze,424:Ve},t(br,[2,732]),t(Ar,[2,1143],{419:190,476:846,144:847,139:Cr,141:Cr,145:Je,420:ze,424:Ve}),{139:[1,848],141:[1,849]},t(Or,kr,{490:851,493:852,77:[1,850],137:dt}),t(Pr,[2,1167],{494:853,132:[1,854]}),t(Rr,[2,1171],{496:855,497:856,152:vt}),t(Rr,[2,747]),t(Ir,[2,739]),{2:r,3:857,4:i,5:o,131:[1,858]},{2:r,3:859,4:i,5:o},{2:r,3:860,4:i,5:o},t(Ge,ft,{350:861,156:ht}),t(Ge,ft,{350:862,156:ht}),t(bt,[2,491]),t(bt,[2,492]),{183:[1,863]},{183:[2,1142]},t(Nr,[2,1137],{466:864,469:865,137:[1,866]}),t(gt,[2,1136]),t(Mr,Lr,{510:867,95:Dr,230:[1,868],514:Fr,515:jr,516:Br}),{76:[1,873]},{76:[1,874]},{145:oe,450:875},{4:Ur,7:879,76:[1,877],272:876,387:878,389:zr},t(Z,[2,456],{128:[1,882]}),t(Z,[2,579]),{2:r,3:883,4:i,5:o},{298:[1,884]},t(Tr,mt,{398:885,156:_t}),t(Z,[2,593]),{2:r,3:244,4:i,5:o,199:887,399:886},{2:r,3:244,4:i,5:o,199:887,399:888},t(Z,[2,772]),t(Y,[2,669],{438:889,310:[1,890]}),{2:r,3:168,4:i,5:o,56:165,77:ae,94:891,111:149,113:153,131:se,132:ue,137:le,143:ce,144:161,145:fe,149:he,152:pe,154:de,156:K,158:167,179:ve,180:ge,181:ye,196:151,200:147,201:155,202:156,254:150,255:146,256:148,257:152,258:154,259:157,260:158,261:159,262:162,263:163,265:me,266:d,270:_e,271:be,273:Ee,280:xe,281:we,282:Te,283:Se,284:Ae,285:Ce,286:Oe,287:ke,288:Pe,290:J,291:Q,292:ee,293:te,294:Re,295:Ie,296:Ne,297:Me,298:Le,299:De,302:Fe,303:je,312:Be,317:Ue,419:190,420:ze,424:Ve},{2:r,3:168,4:i,5:o,56:165,77:ae,94:892,111:149,113:153,131:se,132:ue,137:le,143:ce,144:161,145:fe,149:he,152:pe,154:de,156:K,158:167,179:ve,180:ge,181:ye,196:151,200:147,201:155,202:156,254:150,255:146,256:148,257:152,258:154,259:157,260:158,261:159,262:162,263:163,265:me,266:d,270:_e,271:be,273:Ee,280:xe,281:we,282:Te,283:Se,284:Ae,285:Ce,286:Oe,287:ke,288:Pe,290:J,291:Q,292:ee,293:te,294:Re,295:Ie,296:Ne,297:Me,298:Le,299:De,302:Fe,303:je,312:Be,317:Ue,419:190,420:ze,424:Ve},{2:r,3:168,4:i,5:o,56:165,77:ae,94:893,111:149,113:153,131:se,132:ue,137:le,143:ce,144:161,145:fe,149:he,152:pe,154:de,156:K,158:167,179:ve,180:ge,181:ye,196:151,200:147,201:155,202:156,254:150,255:146,256:148,257:152,258:154,259:157,260:158,261:159,262:162,263:163,265:me,266:d,270:_e,271:be,273:Ee,280:xe,281:we,282:Te,283:Se,284:Ae,285:Ce,286:Oe,287:ke,288:Pe,290:J,291:Q,292:ee,293:te,294:Re,295:Ie,296:Ne,297:Me,298:Le,299:De,302:Fe,303:je,312:Be,317:Ue,419:190,420:ze,424:Ve},{2:r,3:168,4:i,5:o,56:165,77:ae,94:894,111:149,113:153,131:se,132:ue,137:le,143:ce,144:161,145:fe,149:he,152:pe,154:de,156:K,158:167,179:ve,180:ge,181:ye,196:151,200:147,201:155,202:156,254:150,255:146,256:148,257:152,258:154,259:157,260:158,261:159,262:162,263:163,265:me,266:d,270:_e,271:be,273:Ee,280:xe,281:we,282:Te,283:Se,284:Ae,285:Ce,286:Oe,287:ke,288:Pe,290:J,291:Q,292:ee,293:te,294:Re,295:Ie,296:Ne,297:Me,298:Le,299:De,302:Fe,303:je,312:Be,317:Ue,419:190,420:ze,424:Ve},{2:r,3:168,4:i,5:o,56:165,77:ae,94:895,111:149,113:153,131:se,132:ue,137:le,143:ce,144:161,145:fe,149:he,152:pe,154:de,156:K,158:167,179:ve,180:ge,181:ye,196:151,200:147,201:155,202:156,254:150,255:146,256:148,257:152,258:154,259:157,260:158,261:159,262:162,263:163,265:me,266:d,270:_e,271:be,273:Ee,280:xe,281:we,282:Te,283:Se,284:Ae,285:Ce,286:Oe,287:ke,288:Pe,290:J,291:Q,292:ee,293:te,294:Re,295:Ie,296:Ne,297:Me,298:Le,299:De,302:Fe,303:je,312:Be,317:Ue,419:190,420:ze,424:Ve},{2:r,3:168,4:i,5:o,56:165,77:ae,94:896,111:149,113:153,131:se,132:ue,137:le,143:ce,144:161,145:fe,149:he,152:pe,154:de,156:K,158:167,179:ve,180:ge,181:ye,196:151,200:147,201:155,202:156,254:150,255:146,256:148,257:152,258:154,259:157,260:158,261:159,262:162,263:163,265:me,266:d,270:_e,271:be,273:Ee,280:xe,281:we,282:Te,283:Se,284:Ae,285:Ce,286:Oe,287:ke,288:Pe,290:J,291:Q,292:ee,293:te,294:Re,295:Ie,296:Ne,297:Me,298:Le,299:De,302:Fe,303:je,312:Be,317:Ue,419:190,420:ze,424:Ve},{2:r,3:168,4:i,5:o,56:165,77:ae,94:897,111:149,113:153,131:se,132:ue,137:le,143:ce,144:161,145:fe,149:he,152:pe,154:de,156:K,158:167,179:ve,180:ge,181:ye,196:151,200:147,201:155,202:156,254:150,255:146,256:148,257:152,258:154,259:157,260:158,261:159,262:162,263:163,265:me,266:d,270:_e,271:be,273:Ee,280:xe,281:we,282:Te,283:Se,284:Ae,285:Ce,286:Oe,287:ke,288:Pe,290:J,291:Q,292:ee,293:te,294:Re,295:Ie,296:Ne,297:Me,298:Le,299:De,302:Fe,303:je,312:Be,317:Ue,419:190,420:ze,424:Ve},{2:r,3:168,4:i,5:o,56:165,77:ae,94:898,111:149,113:153,131:se,132:ue,137:le,143:ce,144:161,145:fe,149:he,152:pe,154:de,156:K,158:167,179:ve,180:ge,181:ye,196:151,200:147,201:155,202:156,254:150,255:146,256:148,257:152,258:154,259:157,260:158,261:159,262:162,263:163,265:me,266:d,270:_e,271:be,273:Ee,280:xe,281:we,282:Te,283:Se,284:Ae,285:Ce,286:Oe,287:ke,288:Pe,290:J,291:Q,292:ee,293:te,294:Re,295:Ie,296:Ne,297:Me,298:Le,299:De,302:Fe,303:je,312:Be,317:Ue,419:190,420:ze,424:Ve},{2:r,3:168,4:i,5:o,56:165,77:ae,94:899,111:149,113:153,131:se,132:ue,137:le,143:ce,144:161,145:fe,149:he,152:pe,154:de,156:K,158:167,179:ve,180:ge,181:ye,196:151,200:147,201:155,202:156,254:150,255:146,256:148,257:152,258:154,259:157,260:158,261:159,262:162,263:163,265:me,266:d,270:_e,271:be,273:Ee,280:xe,281:we,282:Te,283:Se,284:Ae,285:Ce,286:Oe,287:ke,288:Pe,290:J,291:Q,292:ee,293:te,294:Re,295:Ie,296:Ne,297:Me,298:Le,299:De,302:Fe,303:je,312:Be,317:Ue,419:190,420:ze,424:Ve},{2:r,3:168,4:i,5:o,56:165,77:ae,94:900,111:149,113:153,131:se,132:ue,137:le,143:ce,144:161,145:fe,149:he,152:pe,154:de,156:K,158:167,179:ve,180:ge,181:ye,196:151,200:147,201:155,202:156,254:150,255:146,256:148,257:152,258:154,259:157,260:158,261:159,262:162,263:163,265:me,266:d,270:_e,271:be,273:Ee,280:xe,281:we,282:Te,283:Se,284:Ae,285:Ce,286:Oe,287:ke,288:Pe,290:J,291:Q,292:ee,293:te,294:Re,295:Ie,296:Ne,297:Me,298:Le,299:De,302:Fe,303:je,312:Be,317:Ue,419:190,420:ze,424:Ve},{2:r,3:168,4:i,5:o,56:165,77:ae,94:901,111:149,113:153,131:se,132:ue,137:le,143:ce,144:161,145:fe,149:he,152:pe,154:de,156:K,158:167,179:ve,180:ge,181:ye,196:151,200:147,201:155,202:156,254:150,255:146,256:148,257:152,258:154,259:157,260:158,261:159,262:162,263:163,265:me,266:d,270:_e,271:be,273:Ee,280:xe,281:we,282:Te,283:Se,284:Ae,285:Ce,286:Oe,287:ke,288:Pe,290:J,291:Q,292:ee,293:te,294:Re,295:Ie,296:Ne,297:Me,298:Le,299:De,302:Fe,303:je,312:Be,317:Ue,419:190,420:ze,424:Ve},{2:r,3:168,4:i,5:o,56:165,77:ae,94:902,111:149,113:153,131:se,132:ue,137:le,143:ce,144:161,145:fe,149:he,152:pe,154:de,156:K,158:167,179:ve,180:ge,181:ye,196:151,200:147,201:155,202:156,254:150,255:146,256:148,257:152,258:154,259:157,260:158,261:159,262:162,263:163,265:me,266:d,270:_e,271:be,273:Ee,280:xe,281:we,282:Te,283:Se,284:Ae,285:Ce,286:Oe,287:ke,288:Pe,290:J,291:Q,292:ee,293:te,294:Re,295:Ie,296:Ne,297:Me,298:Le,299:De,302:Fe,303:je,312:Be,317:Ue,419:190,420:ze,424:Ve},{2:r,3:168,4:i,5:o,56:165,77:ae,94:903,111:149,113:153,131:se,132:ue,137:le,143:ce,144:161,145:fe,149:he,152:pe,154:de,156:K,158:167,179:ve,180:ge,181:ye,196:151,200:147,201:155,202:156,254:150,255:146,256:148,257:152,258:154,259:157,260:158,261:159,262:162,263:163,265:me,266:d,270:_e,271:be,273:Ee,280:xe,281:we,282:Te,283:Se,284:Ae,285:Ce,286:Oe,287:ke,288:Pe,290:J,291:Q,292:ee,293:te,294:Re,295:Ie,296:Ne,297:Me,298:Le,299:De,302:Fe,303:je,312:Be,317:Ue,419:190,420:ze,424:Ve},{2:r,3:168,4:i,5:o,56:165,77:ae,94:904,111:149,113:153,131:se,132:ue,137:le,143:ce,144:161,145:fe,149:he,152:pe,154:de,156:K,158:167,179:ve,180:ge,181:ye,196:151,200:147,201:155,202:156,254:150,255:146,256:148,257:152,258:154,259:157,260:158,261:159,262:162,263:163,265:me,266:d,270:_e,271:be,273:Ee,280:xe,281:we,282:Te,283:Se,284:Ae,285:Ce,286:Oe,287:ke,288:Pe,290:J,291:Q,292:ee,293:te,294:Re,295:Ie,296:Ne,297:Me,298:Le,299:De,302:Fe,303:je,312:Be,317:Ue,419:190,420:ze,424:Ve},{2:r,3:168,4:i,5:o,56:165,77:ae,94:905,111:149,113:153,131:se,132:ue,137:le,143:ce,144:161,145:fe,149:he,152:pe,154:de,156:K,158:167,179:ve,180:ge,181:ye,196:151,200:147,201:155,202:156,254:150,255:146,256:148,257:152,258:154,259:157,260:158,261:159,262:162,263:163,265:me,266:d,270:_e,271:be,273:Ee,280:xe,281:we,282:Te,283:Se,284:Ae,285:Ce,286:Oe,287:ke,288:Pe,290:J,291:Q,292:ee,293:te,294:Re,295:Ie,296:Ne,297:Me,298:Le,299:De,302:Fe,303:je,312:Be,317:Ue,419:190,420:ze,424:Ve},{2:r,3:168,4:i,5:o,56:165,77:ae,94:906,111:149,113:153,131:se,132:ue,137:le,143:ce,144:161,145:fe,149:he,152:pe,154:de,156:K,158:167,179:ve,180:ge,181:ye,196:151,200:147,201:155,202:156,254:150,255:146,256:148,257:152,258:154,259:157,260:158,261:159,262:162,263:163,265:me,266:d,270:_e,271:be,273:Ee,280:xe,281:we,282:Te,283:Se,284:Ae,285:Ce,286:Oe,287:ke,288:Pe,290:J,291:Q,292:ee,293:te,294:Re,295:Ie,296:Ne,297:Me,298:Le,299:De,302:Fe,303:je,312:Be,317:Ue,419:190,420:ze,424:Ve},{2:r,3:907,4:i,5:o,77:[1,909],131:se,156:K,196:908,200:910,290:J,291:Q,292:ee,293:te},{2:r,3:911,4:i,5:o,77:[1,913],131:se,156:K,196:912,200:914,290:J,291:Q,292:ee,293:te},t(Vr,[2,440],{255:146,200:147,256:148,111:149,254:150,196:151,257:152,113:153,258:154,201:155,202:156,259:157,260:158,261:159,144:161,262:162,263:163,56:165,158:167,3:168,419:190,94:915,2:r,4:i,5:o,77:ae,131:se,132:ue,137:le,143:ce,145:fe,149:he,152:pe,154:de,156:K,179:ve,180:ge,181:ye,265:me,266:d,270:_e,271:be,273:Ee,280:xe,281:we,282:Te,283:Se,284:Ae,285:Ce,286:Oe,287:ke,288:Pe,290:J,291:Q,292:ee,293:te,294:Re,295:Ie,296:Ne,297:Me,298:Le,299:De,302:Fe,303:je,312:Be,317:Ue,420:ze,424:Ve}),t(Vr,[2,441],{255:146,200:147,256:148,111:149,254:150,196:151,257:152,113:153,258:154,201:155,202:156,259:157,260:158,261:159,144:161,262:162,263:163,56:165,158:167,3:168,419:190,94:916,2:r,4:i,5:o,77:ae,131:se,132:ue,137:le,143:ce,145:fe,149:he,152:pe,154:de,156:K,179:ve,180:ge,181:ye,265:me,266:d,270:_e,271:be,273:Ee,280:xe,281:we,282:Te,283:Se,284:Ae,285:Ce,286:Oe,287:ke,288:Pe,290:J,291:Q,292:ee,293:te,294:Re,295:Ie,296:Ne,297:Me,298:Le,299:De,302:Fe,303:je,312:Be,317:Ue,420:ze,424:Ve}),t(Vr,[2,442],{255:146,200:147,256:148,111:149,254:150,196:151,257:152,113:153,258:154,201:155,202:156,259:157,260:158,261:159,144:161,262:162,263:163,56:165,158:167,3:168,419:190,94:917,2:r,4:i,5:o,77:ae,131:se,132:ue,137:le,143:ce,145:fe,149:he,152:pe,154:de,156:K,179:ve,180:ge,181:ye,265:me,266:d,270:_e,271:be,273:Ee,280:xe,281:we,282:Te,283:Se,284:Ae,285:Ce,286:Oe,287:ke,288:Pe,290:J,291:Q,292:ee,293:te,294:Re,295:Ie,296:Ne,297:Me,298:Le,299:De,302:Fe,303:je,312:Be,317:Ue,420:ze,424:Ve}),t(Vr,[2,443],{255:146,200:147,256:148,111:149,254:150,196:151,257:152,113:153,258:154,201:155,202:156,259:157,260:158,261:159,144:161,262:162,263:163,56:165,158:167,3:168,419:190,94:918,2:r,4:i,5:o,77:ae,131:se,132:ue,137:le,143:ce,145:fe,149:he,152:pe,154:de,156:K,179:ve,180:ge,181:ye,265:me,266:d,270:_e,271:be,273:Ee,280:xe,281:we,282:Te,283:Se,284:Ae,285:Ce,286:Oe,287:ke,288:Pe,290:J,291:Q,292:ee,293:te,294:Re,295:Ie,296:Ne,297:Me,298:Le,299:De,302:Fe,303:je,312:Be,317:Ue,420:ze,424:Ve}),t(Vr,Gr,{255:146,200:147,256:148,111:149,254:150,196:151,257:152,113:153,258:154,201:155,202:156,259:157,260:158,261:159,144:161,262:162,263:163,56:165,158:167,3:168,419:190,94:919,2:r,4:i,5:o,77:ae,131:se,132:ue,137:le,143:ce,145:fe,149:he,152:pe,154:de,156:K,179:ve,180:ge,181:ye,265:me,266:d,270:_e,271:be,273:Ee,280:xe,281:we,282:Te,283:Se,284:Ae,285:Ce,286:Oe,287:ke,288:Pe,290:J,291:Q,292:ee,293:te,294:Re,295:Ie,296:Ne,297:Me,298:Le,299:De,302:Fe,303:je,312:Be,317:Ue,420:ze,424:Ve}),{2:r,3:168,4:i,5:o,56:165,77:ae,94:920,111:149,113:153,131:se,132:ue,137:le,143:ce,144:161,145:fe,149:he,152:pe,154:de,156:K,158:167,179:ve,180:ge,181:ye,196:151,200:147,201:155,202:156,254:150,255:146,256:148,257:152,258:154,259:157,260:158,261:159,262:162,263:163,265:me,266:d,270:_e,271:be,273:Ee,280:xe,281:we,282:Te,283:Se,284:Ae,285:Ce,286:Oe,287:ke,288:Pe,290:J,291:Q,292:ee,293:te,294:Re,295:Ie,296:Ne,297:Me,298:Le,299:De,302:Fe,303:je,312:Be,317:Ue,419:190,420:ze,424:Ve},{2:r,3:168,4:i,5:o,56:165,77:ae,94:921,111:149,113:153,131:se,132:ue,137:le,143:ce,144:161,145:fe,149:he,152:pe,154:de,156:K,158:167,179:ve,180:ge,181:ye,196:151,200:147,201:155,202:156,254:150,255:146,256:148,257:152,258:154,259:157,260:158,261:159,262:162,263:163,265:me,266:d,270:_e,271:be,273:Ee,280:xe,281:we,282:Te,283:Se,284:Ae,285:Ce,286:Oe,287:ke,288:Pe,290:J,291:Q,292:ee,293:te,294:Re,295:Ie,296:Ne,297:Me,298:Le,299:De,302:Fe,303:je,312:Be,317:Ue,419:190,420:ze,424:Ve},t(Vr,[2,445],{255:146,200:147,256:148,111:149,254:150,196:151,257:152,113:153,258:154,201:155,202:156,259:157,260:158,261:159,144:161,262:162,263:163,56:165,158:167,3:168,419:190,94:922,2:r,4:i,5:o,77:ae,131:se,132:ue,137:le,143:ce,145:fe,149:he,152:pe,154:de,156:K,179:ve,180:ge,181:ye,265:me,266:d,270:_e,271:be,273:Ee,280:xe,281:we,282:Te,283:Se,284:Ae,285:Ce,286:Oe,287:ke,288:Pe,290:J,291:Q,292:ee,293:te,294:Re,295:Ie,296:Ne,297:Me,298:Le,299:De,302:Fe,303:je,312:Be,317:Ue,420:ze,424:Ve}),{2:r,3:168,4:i,5:o,56:165,77:ae,94:923,111:149,113:153,131:se,132:ue,137:le,143:ce,144:161,145:fe,149:he,152:pe,154:de,156:K,158:167,179:ve,180:ge,181:ye,196:151,200:147,201:155,202:156,254:150,255:146,256:148,257:152,258:154,259:157,260:158,261:159,262:162,263:163,265:me,266:d,270:_e,271:be,273:Ee,280:xe,281:we,282:Te,283:Se,284:Ae,285:Ce,286:Oe,287:ke,288:Pe,290:J,291:Q,292:ee,293:te,294:Re,295:Ie,296:Ne,297:Me,298:Le,299:De,302:Fe,303:je,312:Be,317:Ue,419:190,420:ze,424:Ve},{2:r,3:168,4:i,5:o,56:165,77:ae,94:924,111:149,113:153,131:se,132:ue,137:le,143:ce,144:161,145:fe,149:he,152:pe,154:de,156:K,158:167,179:ve,180:ge,181:ye,196:151,200:147,201:155,202:156,254:150,255:146,256:148,257:152,258:154,259:157,260:158,261:159,262:162,263:163,265:me,266:d,270:_e,271:be,273:Ee,280:xe,281:we,282:Te,283:Se,284:Ae,285:Ce,286:Oe,287:ke,288:Pe,290:J,291:Q,292:ee,293:te,294:Re,295:Ie,296:Ne,297:Me,298:Le,299:De,302:Fe,303:je,312:Be,317:Ue,419:190,420:ze,424:Ve},{164:[1,926],166:[1,928],328:925,334:[1,927]},{2:r,3:168,4:i,5:o,56:165,77:ae,94:929,111:149,113:153,131:se,132:ue,137:le,143:ce,144:161,145:fe,149:he,152:pe,154:de,156:K,158:167,179:ve,180:ge,181:ye,196:151,200:147,201:155,202:156,254:150,255:146,256:148,257:152,258:154,259:157,260:158,261:159,262:162,263:163,265:me,266:d,270:_e,271:be,273:Ee,280:xe,281:we,282:Te,283:Se,284:Ae,285:Ce,286:Oe,287:ke,288:Pe,290:J,291:Q,292:ee,293:te,294:Re,295:Ie,296:Ne,297:Me,298:Le,299:De,302:Fe,303:je,312:Be,317:Ue,419:190,420:ze,424:Ve},{2:r,3:168,4:i,5:o,56:165,77:ae,94:930,111:149,113:153,131:se,132:ue,137:le,143:ce,144:161,145:fe,149:he,152:pe,154:de,156:K,158:167,179:ve,180:ge,181:ye,196:151,200:147,201:155,202:156,254:150,255:146,256:148,257:152,258:154,259:157,260:158,261:159,262:162,263:163,265:me,266:d,270:_e,271:be,273:Ee,280:xe,281:we,282:Te,283:Se,284:Ae,285:Ce,286:Oe,287:ke,288:Pe,290:J,291:Q,292:ee,293:te,294:Re,295:Ie,296:Ne,297:Me,298:Le,299:De,302:Fe,303:je,312:Be,317:Ue,419:190,420:ze,424:Ve},{2:r,3:695,4:i,5:o,77:[1,931],111:934,145:Hr,156:K,200:935,202:933,290:J,291:Q,292:ee,293:te,329:932},{99:[1,937],297:[1,938]},{2:r,3:168,4:i,5:o,56:165,77:ae,94:939,111:149,113:153,131:se,132:ue,137:le,143:ce,144:161,145:fe,149:he,152:pe,154:de,156:K,158:167,179:ve,180:ge,181:ye,196:151,200:147,201:155,202:156,254:150,255:146,256:148,257:152,258:154,259:157,260:158,261:159,262:162,263:163,265:me,266:d,270:_e,271:be,273:Ee,280:xe,281:we,282:Te,283:Se,284:Ae,285:Ce,286:Oe,287:ke,288:Pe,290:J,291:Q,292:ee,293:te,294:Re,295:Ie,296:Ne,297:Me,298:Le,299:De,302:Fe,303:je,312:Be,317:Ue,419:190,420:ze,424:Ve},{2:r,3:168,4:i,5:o,56:165,77:ae,94:940,111:149,113:153,131:se,132:ue,137:le,143:ce,144:161,145:fe,149:he,152:pe,154:de,156:K,158:167,179:ve,180:ge,181:ye,196:151,200:147,201:155,202:156,254:150,255:146,256:148,257:152,258:154,259:157,260:158,261:159,262:162,263:163,265:me,266:d,270:_e,271:be,273:Ee,280:xe,281:we,282:Te,283:Se,284:Ae,285:Ce,286:Oe,287:ke,288:Pe,290:J,291:Q,292:ee,293:te,294:Re,295:Ie,296:Ne,297:Me,298:Le,299:De,302:Fe,303:je,312:Be,317:Ue,419:190,420:ze,424:Ve},{2:r,3:168,4:i,5:o,56:165,77:ae,94:941,111:149,113:153,131:se,132:ue,137:le,143:ce,144:161,145:fe,149:he,152:pe,154:de,156:K,158:167,179:ve,180:ge,181:ye,196:151,200:147,201:155,202:156,254:150,255:146,256:148,257:152,258:154,259:157,260:158,261:159,262:162,263:163,265:me,266:d,270:_e,271:be,273:Ee,280:xe,281:we,282:Te,283:Se,284:Ae,285:Ce,286:Oe,287:ke,288:Pe,290:J,291:Q,292:ee,293:te,294:Re,295:Ie,296:Ne,297:Me,298:Le,299:De,302:Fe,303:je,312:Be,317:Ue,419:190,420:ze,424:Ve},{4:Ur,7:879,272:942,387:878,389:zr},t(qr,[2,88]),t(qr,[2,89]),{78:[1,943]},{78:[1,944]},{78:[1,945]},{78:[1,946],99:Et,112:xt,114:625,115:wt,116:Tt,123:St,124:gr,133:Ct,136:Ot,138:kt,139:Pt,140:Rt,141:It,142:Nt,154:Mt,170:Lt,171:Dt,179:Ft,180:jt,311:Bt,312:Ut,313:zt,315:Vt,316:Gt,317:Ht,318:qt,319:Wt,320:Xt,321:$t,322:Yt,323:Zt,324:Kt,325:Jt,326:Qt,327:637,330:en,331:tn,332:nn,333:rn},t(Ge,He,{340:207,77:ct,198:qe}),{78:[2,1107]},{78:[2,1108]},{134:re,135:ie},{2:r,3:168,4:i,5:o,56:165,77:ae,94:260,111:149,113:153,131:se,132:ue,137:le,143:ce,144:161,145:fe,149:he,151:947,152:pe,154:de,156:K,158:167,164:[1,949],179:ve,180:ge,181:ye,185:[1,948],196:151,200:147,201:155,202:156,254:150,255:146,256:148,257:152,258:154,259:157,260:158,261:159,262:162,263:163,265:me,266:d,270:_e,271:be,273:Ee,280:xe,281:we,282:Te,283:Se,284:Ae,285:Ce,286:Oe,287:ke,288:Pe,290:J,291:Q,292:ee,293:te,294:Re,295:Ie,296:Ne,297:Me,298:Le,299:De,302:Fe,303:je,312:Be,317:Ue,419:190,420:ze,424:Ve},{2:r,3:950,4:i,5:o,149:Wr,180:[1,952]},t([2,4,5,10,53,72,74,76,77,78,89,93,95,98,99,107,118,122,128,129,130,131,132,134,135,137,143,145,146,148,149,150,152,154,156,162,164,166,168,169,170,171,172,173,175,181,183,185,187,189,198,206,208,222,223,224,225,226,227,228,229,232,239,242,243,245,247,266,267,280,281,282,283,284,285,286,287,288,290,296,300,306,308,309,310,314,330,331,333,335,338,339,396,400,401,404,406,408,409,417,418,420,424,434,436,437,439,440,441,442,443,447,448,451,452,464,470,505,507,508,517,602,764],[2,416],{114:625,327:637,112:xt,115:wt,116:Tt,123:St,124:gr,133:Ct,136:Ot,138:kt,139:Pt,140:Rt,141:It,142:Nt,179:Ft,180:jt,311:Bt,312:Ut,313:zt,315:Vt,316:Gt,317:Ht,318:qt,319:Wt,320:Xt,321:$t,322:Yt,323:Zt,324:Kt,325:Jt,326:Qt,332:nn}),t(Xr,[2,417],{114:625,327:637,115:wt,116:Tt,123:St,133:Ct,136:Ot,138:kt,180:jt,312:Ut,316:Gt}),t(Xr,[2,418],{114:625,327:637,115:wt,116:Tt,123:St,133:Ct,136:Ot,138:kt,180:jt,312:Ut,316:Gt}),t($r,[2,419],{114:625,327:637,316:Gt}),t($r,[2,420],{114:625,327:637,316:Gt}),t(an,[2,365]),t(an,[2,1113]),t(an,[2,1114]),t(an,[2,366]),t([2,4,5,10,53,72,74,76,77,78,89,93,95,98,99,107,112,115,116,118,122,123,124,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,145,146,148,149,150,152,154,156,162,164,166,168,169,170,171,172,173,175,179,180,181,183,185,187,189,198,206,208,222,223,224,225,226,227,228,229,230,231,232,239,242,243,245,247,266,267,280,281,282,283,284,285,286,287,288,290,296,300,306,308,309,310,311,312,313,314,315,316,317,318,319,320,321,322,323,324,325,326,330,331,332,333,335,338,339,396,400,401,404,406,408,409,417,418,420,424,434,436,437,439,440,441,442,443,447,448,451,452,464,470,505,507,508,517,602,764],[2,362]),{2:r,3:168,4:i,5:o,56:165,77:ae,94:953,111:149,113:153,131:se,132:ue,137:le,143:ce,144:161,145:fe,149:he,152:pe,154:de,156:K,158:167,179:ve,180:ge,181:ye,196:151,200:147,201:155,202:156,254:150,255:146,256:148,257:152,258:154,259:157,260:158,261:159,262:162,263:163,265:me,266:d,270:_e,271:be,273:Ee,280:xe,281:we,282:Te,283:Se,284:Ae,285:Ce,286:Oe,287:ke,288:Pe,290:J,291:Q,292:ee,293:te,294:Re,295:Ie,296:Ne,297:Me,298:Le,299:De,302:Fe,303:je,312:Be,317:Ue,419:190,420:ze,424:Ve},t(cn,[2,620]),t(cn,[2,621]),t(cn,[2,622]),t(cn,[2,623]),t(cn,[2,625]),{40:954,79:75,89:l,184:99,189:p},{99:Et,112:xt,114:625,115:wt,116:Tt,123:St,124:gr,133:Ct,136:Ot,138:kt,139:Pt,140:Rt,141:It,142:Nt,154:Mt,170:Lt,171:Dt,179:Ft,180:jt,304:955,307:677,308:ln,311:Bt,312:Ut,313:zt,315:Vt,316:Gt,317:Ht,318:qt,319:Wt,320:Xt,321:$t,322:Yt,323:Zt,324:Kt,325:Jt,326:Qt,327:637,330:en,331:tn,332:nn,333:rn},{305:956,306:Yr,307:957,308:ln,310:Zr},t(Kr,[2,372]),{2:r,3:168,4:i,5:o,56:165,77:ae,94:959,111:149,113:153,131:se,132:ue,137:le,143:ce,144:161,145:fe,149:he,152:pe,154:de,156:K,158:167,179:ve,180:ge,181:ye,196:151,200:147,201:155,202:156,254:150,255:146,256:148,257:152,258:154,259:157,260:158,261:159,262:162,263:163,265:me,266:d,270:_e,271:be,273:Ee,280:xe,281:we,282:Te,283:Se,284:Ae,285:Ce,286:Oe,287:ke,288:Pe,290:J,291:Q,292:ee,293:te,294:Re,295:Ie,296:Ne,297:Me,298:Le,299:De,302:Fe,303:je,312:Be,317:Ue,419:190,420:ze,424:Ve},{2:r,3:168,4:i,5:o,56:165,77:ae,94:960,111:149,113:153,131:se,132:ue,137:le,143:ce,144:161,145:fe,149:he,152:pe,154:de,156:K,158:167,179:ve,180:ge,181:ye,196:151,200:147,201:155,202:156,254:150,255:146,256:148,257:152,258:154,259:157,260:158,261:159,262:162,263:163,265:me,266:d,270:_e,271:be,273:Ee,280:xe,281:we,282:Te,283:Se,284:Ae,285:Ce,286:Oe,287:ke,288:Pe,290:J,291:Q,292:ee,293:te,294:Re,295:Ie,296:Ne,297:Me,298:Le,299:De,302:Fe,303:je,312:Be,317:Ue,419:190,420:ze,424:Ve},{4:Ur,7:879,272:961,387:878,389:zr},t(cn,[2,626]),{74:[1,963],300:[1,962]},t(cn,[2,642]),t(Jr,[2,649]),t(Qr,[2,627]),t(Qr,[2,628]),t(Qr,[2,629]),t(Qr,[2,630]),t(Qr,[2,631]),t(Qr,[2,632]),t(Qr,[2,633]),t(Qr,[2,634]),t(Qr,[2,635]),{2:r,3:168,4:i,5:o,56:165,77:ae,94:964,111:149,113:153,131:se,132:ue,137:le,143:ce,144:161,145:fe,149:he,152:pe,154:de,156:K,158:167,179:ve,180:ge,181:ye,196:151,200:147,201:155,202:156,254:150,255:146,256:148,257:152,258:154,259:157,260:158,261:159,262:162,263:163,265:me,266:d,270:_e,271:be,273:Ee,280:xe,281:we,282:Te,283:Se,284:Ae,285:Ce,286:Oe,287:ke,288:Pe,290:J,291:Q,292:ee,293:te,294:Re,295:Ie,296:Ne,297:Me,298:Le,299:De,302:Fe,303:je,312:Be,317:Ue,419:190,420:ze,424:Ve},t([2,4,5,10,53,72,74,76,78,89,93,95,98,99,107,112,115,118,122,123,124,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,145,146,148,149,150,152,154,156,162,164,166,168,169,170,171,172,173,175,179,180,181,183,185,187,189,198,206,208,222,223,224,225,226,227,228,229,232,239,242,243,245,247,266,267,280,281,282,283,284,285,286,287,288,290,296,300,306,308,309,310,311,312,313,314,315,316,317,318,319,320,321,322,323,324,325,326,330,331,332,333,335,338,339,396,400,401,404,406,408,409,417,418,420,424,426,434,436,437,439,440,441,442,443,447,448,451,452,464,470,505,507,508,517,602,764],on,{77:lt,116:ei}),{74:dr,300:[1,966]},t(ti,[2,314],{77:lt}),t(Ke,[2,315]),{74:[1,968],426:[1,967]},t(cn,[2,639]),t(ni,[2,644]),{152:[1,969]},{152:[1,970]},{152:[1,971]},{40:976,77:[1,975],79:75,89:l,143:ce,144:979,145:Je,149:ri,152:pe,181:ye,184:99,189:p,201:980,302:Fe,341:972,342:973,343:[1,974],344:ii,419:190,420:ze,424:Ve},t(Ge,He,{340:981,198:qe}),{77:oi,143:ce,144:979,145:Je,149:ri,152:pe,181:ye,201:980,302:Fe,341:982,342:983,344:ii,419:190,420:ze,424:Ve},{230:[1,986],455:985},{2:r,3:219,4:i,5:o,77:We,132:Xe,143:ce,144:212,145:fe,152:pe,156:K,181:ye,199:213,200:215,201:214,202:217,209:987,213:$e,214:218,290:J,291:Q,292:ee,293:te,302:Fe,419:190,420:ze,424:Ve},{231:[2,696]},{78:[1,988]},t(vn,[2,1093],{211:989,3:990,2:r,4:i,5:o}),t(dn,[2,1092]),t(vn,[2,183]),{2:r,3:991,4:i,5:o},{212:[1,992]},t(vn,[2,187]),{2:r,3:993,4:i,5:o},t(vn,[2,191]),{2:r,3:994,4:i,5:o},t(vn,[2,195]),{2:r,3:995,4:i,5:o},t(vn,[2,198]),{2:r,3:996,4:i,5:o},{2:r,3:997,4:i,5:o},{148:[1,998]},t(ai,[2,172],{82:999,183:[1,1e3]}),{2:r,3:219,4:i,5:o,132:[1,1005],143:ce,145:[1,1006],152:pe,156:K,181:ye,199:1001,200:1002,201:1003,202:1004,290:J,291:Q,292:ee,293:te,302:Fe},{2:r,3:1011,4:i,5:o,109:1007,110:1008,111:1009,112:si},t(En,[2,1058]),t(ui,[2,1049],{91:1012,182:1013,183:[1,1014]}),t(Ze,[2,1048],{153:1015,179:li,180:ci,181:fi}),t([2,4,5,10,72,74,76,78,112,115,116,118,122,123,124,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,145,146,148,149,150,152,154,156,162,164,166,168,169,170,171,172,173,175,179,180,181,183,185,187,198,280,281,282,283,284,285,286,287,288,306,310,420,424,602,764],[2,90],{77:[1,1019]}),{119:[1,1020]},t(hi,[2,93]),{2:r,3:1021,4:i,5:o},t(hi,[2,95]),{2:r,3:168,4:i,5:o,56:165,77:ae,94:1022,111:149,113:153,131:se,132:ue,137:le,143:ce,144:161,145:fe,149:he,152:pe,154:de,156:K,158:167,179:ve,180:ge,181:ye,196:151,200:147,201:155,202:156,254:150,255:146,256:148,257:152,258:154,259:157,260:158,261:159,262:162,263:163,265:me,266:d,270:_e,271:be,273:Ee,280:xe,281:we,282:Te,283:Se,284:Ae,285:Ce,286:Oe,287:ke,288:Pe,290:J,291:Q,292:ee,293:te,294:Re,295:Ie,296:Ne,297:Me,298:Le,299:De,302:Fe,303:je,312:Be,317:Ue,419:190,420:ze,424:Ve},{2:r,3:168,4:i,5:o,56:165,77:ae,94:1023,111:149,113:153,131:se,132:ue,137:le,143:ce,144:161,145:fe,149:he,152:pe,154:de,156:K,158:167,179:ve,180:ge,181:ye,196:151,200:147,201:155,202:156,254:150,255:146,256:148,257:152,258:154,259:157,260:158,261:159,262:162,263:163,265:me,266:d,270:_e,271:be,273:Ee,280:xe,281:we,282:Te,283:Se,284:Ae,285:Ce,286:Oe,287:ke,288:Pe,290:J,291:Q,292:ee,293:te,294:Re,295:Ie,296:Ne,297:Me,298:Le,299:De,302:Fe,303:je,312:Be,317:Ue,419:190,420:ze,424:Ve},{2:r,3:733,4:i,5:o,72:xn,76:wn,77:Tn,112:Sn,114:736,115:wt,116:Tt,117:1025,118:An,122:Cn,123:On,124:kn,125:1024,128:Pn,129:Rn,130:In,131:Nn,132:Mn,133:Ln,134:Dn,135:Fn,136:jn,137:Bn,138:Un,139:zn,140:Vn,141:Gn,142:Hn,143:qn,144:758,145:Wn,146:Xn,148:$n,149:Yn,150:Zn,152:Kn,154:Jn,156:Qn,158:768,160:769,162:er,164:tr,166:nr,168:rr,169:ir,170:or,171:ar,172:sr,173:ur,175:lr,185:cr,187:fr,280:xe,281:we,282:Te,283:Se,284:Ae,285:Ce,286:Oe,287:ke,288:Pe,419:190,420:ze,424:Ve},{77:[1,1026]},{77:[1,1027]},{77:[1,1028]},{77:[1,1029]},t(hi,[2,104]),t(hi,[2,105]),t(hi,[2,106]),t(hi,[2,107]),t(hi,[2,108]),t(hi,[2,109]),{2:r,3:1030,4:i,5:o},{2:r,3:1031,4:i,5:o,133:[1,1032]},t(hi,[2,113]),t(hi,[2,114]),t(hi,[2,115]),t(hi,[2,116]),t(hi,[2,117]),t(hi,[2,118]),{2:r,3:1033,4:i,5:o,77:un,113:669,131:se,132:ue,143:ce,152:pe,181:ye,196:670,201:672,257:671,294:Re,295:Ie,296:Ne,302:Fe,419:673,424:Ve},{145:[1,1034]},{77:[1,1035]},{145:[1,1036]},t(hi,[2,123]),{77:[1,1037]},{2:r,3:1038,4:i,5:o},{77:[1,1039]},{77:[1,1040]},{77:[1,1041]},{77:[1,1042]},{77:[1,1043],164:[1,1044]},{77:[1,1045]},{77:[1,1046]},{77:[1,1047]},{77:[1,1048]},{77:[1,1049]},{77:[1,1050]},{77:[1,1051]},{77:[1,1052]},{77:[1,1053]},{77:[2,1073]},{77:[2,1074]},{2:r,3:244,4:i,5:o,199:1054},{2:r,3:244,4:i,5:o,199:1055},{113:1056,132:ue,296:Ne},t(Z,[2,596],{112:[1,1057]}),{2:r,3:244,4:i,5:o,199:1058},{113:1059,132:ue,296:Ne},{2:r,3:1060,4:i,5:o},t(Z,[2,693]),t(Z,[2,68]),{2:r,3:236,4:i,5:o,75:1061},{77:[1,1062]},t(Z,[2,674]),t(Z,[2,586]),{2:r,3:1011,4:i,5:o,111:1065,143:pi,145:di,147:1063,336:1064,337:1066},{144:1069,145:Je,419:190,420:ze,424:Ve},t(Z,[2,671]),{2:r,3:168,4:i,5:o,56:165,77:ae,94:1070,111:149,113:153,131:se,132:ue,137:le,143:ce,144:161,145:fe,149:he,152:pe,154:de,156:K,158:167,179:ve,180:ge,181:ye,196:151,200:147,201:155,202:156,254:150,255:146,256:148,257:152,258:154,259:157,260:158,261:159,262:162,263:163,265:me,266:d,270:_e,271:be,273:Ee,280:xe,281:we,282:Te,283:Se,284:Ae,285:Ce,286:Oe,287:ke,288:Pe,290:J,291:Q,292:ee,293:te,294:Re,295:Ie,296:Ne,297:Me,298:Le,299:De,302:Fe,303:je,312:Be,317:Ue,419:190,420:ze,424:Ve},t(Vr,Gr,{255:146,200:147,256:148,111:149,254:150,196:151,257:152,113:153,258:154,201:155,202:156,259:157,260:158,261:159,144:161,262:162,263:163,56:165,158:167,3:168,419:190,94:1071,2:r,4:i,5:o,77:ae,131:se,132:ue,137:le,143:ce,145:fe,149:he,152:pe,154:de,156:K,179:ve,180:ge,181:ye,265:me,266:d,270:_e,271:be,273:Ee,280:xe,281:we,282:Te,283:Se,284:Ae,285:Ce,286:Oe,287:ke,288:Pe,290:J,291:Q,292:ee,293:te,294:Re,295:Ie,296:Ne,297:Me,298:Le,299:De,302:Fe,303:je,312:Be,317:Ue,420:ze,424:Ve}),{113:1072,132:ue,296:Ne},{2:r,3:266,4:i,5:o,446:1073,447:et},{2:r,3:168,4:i,5:o,56:165,77:ae,94:1075,111:149,113:153,131:se,132:ue,137:le,143:ce,144:161,145:fe,149:he,152:pe,154:de,156:K,158:167,179:ve,180:ge,181:ye,196:151,200:147,201:155,202:156,230:yr,254:150,255:146,256:148,257:152,258:154,259:157,260:158,261:159,262:162,263:163,265:me,266:d,270:_e,271:be,273:Ee,280:xe,281:we,282:Te,283:Se,284:Ae,285:Ce,286:Oe,287:ke,288:Pe,290:J,291:Q,292:ee,293:te,294:Re,295:Ie,296:Ne,297:Me,298:Le,299:De,302:Fe,303:je,312:Be,317:Ue,419:190,420:ze,424:Ve,429:1074,433:mr},t(Z,[2,651]),{114:1077,115:wt,116:Tt,124:[1,1076]},t(Z,[2,663]),t(Z,[2,664]),{2:r,3:1079,4:i,5:o,77:vi,131:gi,432:1078},{114:807,115:wt,116:Tt,124:[1,1082],430:1083},t(Z,[2,753],{74:_r}),{2:r,3:100,4:i,5:o,504:1084},{2:r,3:168,4:i,5:o,56:165,77:ae,94:817,111:149,113:153,131:se,132:ue,137:le,143:ce,144:161,145:fe,149:he,152:pe,154:de,156:K,158:167,174:1085,179:ve,180:ge,181:ye,196:151,200:147,201:155,202:156,253:816,254:150,255:146,256:148,257:152,258:154,259:157,260:158,261:159,262:162,263:163,265:me,266:d,270:_e,271:be,273:Ee,280:xe,281:we,282:Te,283:Se,284:Ae,285:Ce,286:Oe,287:ke,288:Pe,290:J,291:Q,292:ee,293:te,294:Re,295:Ie,296:Ne,297:Me,298:Le,299:De,302:Fe,303:je,312:Be,317:Ue,419:190,420:ze,424:Ve},{2:r,3:168,4:i,5:o,56:165,77:ae,94:817,111:149,113:153,131:se,132:ue,137:le,143:ce,144:161,145:fe,149:he,152:pe,154:de,156:K,158:167,174:1086,179:ve,180:ge,181:ye,196:151,200:147,201:155,202:156,253:816,254:150,255:146,256:148,257:152,258:154,259:157,260:158,261:159,262:162,263:163,265:me,266:d,270:_e,271:be,273:Ee,280:xe,281:we,282:Te,283:Se,284:Ae,285:Ce,286:Oe,287:ke,288:Pe,290:J,291:Q,292:ee,293:te,294:Re,295:Ie,296:Ne,297:Me,298:Le,299:De,302:Fe,303:je,312:Be,317:Ue,419:190,420:ze,424:Ve},{2:r,3:168,4:i,5:o,56:165,77:ae,94:817,111:149,113:153,131:se,132:ue,137:le,143:ce,144:161,145:fe,149:he,152:pe,154:de,156:K,158:167,174:1087,179:ve,180:ge,181:ye,196:151,200:147,201:155,202:156,253:816,254:150,255:146,256:148,257:152,258:154,259:157,260:158,261:159,262:162,263:163,265:me,266:d,270:_e,271:be,273:Ee,280:xe,281:we,282:Te,283:Se,284:Ae,285:Ce,286:Oe,287:ke,288:Pe,290:J,291:Q,292:ee,293:te,294:Re,295:Ie,296:Ne,297:Me,298:Le,299:De,302:Fe,303:je,312:Be,317:Ue,419:190,420:ze,424:Ve},t(xr,[2,151]),t(xr,[2,1088],{74:yi}),t(mi,[2,273]),t(mi,[2,280],{114:625,327:637,3:1090,113:1092,2:r,4:i,5:o,76:[1,1089],99:Et,112:xt,115:wt,116:Tt,123:St,124:gr,131:[1,1091],132:ue,133:Ct,136:Ot,138:kt,139:Pt,140:Rt,141:It,142:Nt,154:Mt,170:Lt,171:Dt,179:Ft,180:jt,296:Ne,311:Bt,312:Ut,313:zt,315:Vt,316:Gt,317:Ht,318:qt,319:Wt,320:Xt,321:$t,322:Yt,323:Zt,324:Kt,325:Jt,326:Qt,330:en,331:tn,332:nn,333:rn}),t(rt,[2,1089],{197:1093,765:[1,1094]}),{131:se,196:1095},{74:_r,78:[1,1096]},t(Y,[2,11]),{148:[1,1097],190:[1,1098]},{190:[1,1099]},{190:[1,1100]},{190:[1,1101]},t(Z,[2,575],{76:[1,1103],77:[1,1102]}),{2:r,3:168,4:i,5:o,56:165,77:ae,94:260,111:149,113:153,131:se,132:ue,137:le,143:ce,144:161,145:fe,149:he,151:1104,152:pe,154:de,156:K,158:167,179:ve,180:ge,181:ye,196:151,200:147,201:155,202:156,254:150,255:146,256:148,257:152,258:154,259:157,260:158,261:159,262:162,263:163,265:me,266:d,270:_e,271:be,273:Ee,280:xe,281:we,282:Te,283:Se,284:Ae,285:Ce,286:Oe,287:ke,288:Pe,290:J,291:Q,292:ee,293:te,294:Re,295:Ie,296:Ne,297:Me,298:Le,299:De,302:Fe,303:je,312:Be,317:Ue,419:190,420:ze,424:Ve},t(an,[2,346]),t(Er,[2,1112]),t(Er,[2,1109]),t(Er,[2,1110]),{74:dr,78:[1,1105]},{74:dr,78:[1,1106]},{74:[1,1107]},{74:[1,1108]},{74:[1,1109]},{74:[1,1110]},t(an,[2,353]),t(Z,[2,580]),{298:[1,1111]},{2:r,3:1112,4:i,5:o,113:1113,132:ue,296:Ne},{2:r,3:244,4:i,5:o,199:1114},{230:[1,1115]},{2:r,3:578,4:i,5:o,132:pt,137:dt,143:tt,145:nt,152:vt,431:585,474:1116,475:576,478:577,482:582,493:579,497:581},t(Z,[2,730],{114:625,327:637,99:Et,112:xt,115:wt,116:Tt,123:St,124:gr,133:Ct,136:Ot,138:kt,139:Pt,140:Rt,141:It,142:Nt,154:Mt,170:Lt,171:Dt,179:Ft,180:jt,311:Bt,312:Ut,313:zt,315:Vt,316:Gt,317:Ht,318:qt,319:Wt,320:Xt,321:$t,322:Yt,323:Zt,324:Kt,325:Jt,326:Qt,330:en,331:tn,332:nn,333:rn}),t(br,[2,1145],{477:1117,483:1118,76:_i}),t(Ar,[2,1144]),{2:r,3:1122,4:i,5:o,132:pt,137:dt,144:1121,145:Je,152:vt,419:190,420:ze,424:Ve,475:1120,493:579,497:581},{2:r,3:1122,4:i,5:o,132:pt,137:dt,143:tt,145:nt,152:vt,431:585,475:1124,478:1123,482:582,493:579,497:581},{2:r,3:578,4:i,5:o,132:pt,137:dt,143:tt,145:nt,152:vt,431:585,473:1125,474:575,475:576,478:577,482:582,493:579,497:581},t(Pr,[2,1163],{491:1126,132:[1,1127]}),t(Or,[2,1162]),t(Rr,[2,1169],{495:1128,497:1129,152:vt}),t(Pr,[2,1168]),t(Rr,[2,746]),t(Rr,[2,1172]),t(Or,[2,749]),t(Or,[2,750]),t(Rr,[2,748]),t(Ir,[2,740]),{2:r,3:244,4:i,5:o,199:1130},{2:r,3:244,4:i,5:o,199:1131},{2:r,3:168,4:i,5:o,56:165,77:ae,94:1132,111:149,113:153,131:se,132:ue,137:le,143:ce,144:161,145:fe,149:he,152:pe,154:de,156:K,158:167,179:ve,180:ge,181:ye,196:151,200:147,201:155,202:156,254:150,255:146,256:148,257:152,258:154,259:157,260:158,261:159,262:162,263:163,265:me,266:d,270:_e,271:be,273:Ee,280:xe,281:we,282:Te,283:Se,284:Ae,285:Ce,286:Oe,287:ke,288:Pe,290:J,291:Q,292:ee,293:te,294:Re,295:Ie,296:Ne,297:Me,298:Le,299:De,302:Fe,303:je,312:Be,317:Ue,419:190,420:ze,424:Ve},t(bi,[2,1139],{467:1133,113:1134,132:ue,296:Ne}),t(Nr,[2,1138]),{2:r,3:1135,4:i,5:o},{335:Ei,338:xi,339:wi,511:1136},{2:r,3:244,4:i,5:o,199:1140},t(Mr,[2,765]),t(Mr,[2,766]),t(Mr,[2,767]),{129:[1,1141]},{266:[1,1142]},{266:[1,1143]},t(yt,[2,688]),t(yt,[2,689],{124:[1,1144]}),{4:Ur,7:879,272:1145,387:878,389:zr},t([2,4,10,53,72,74,76,77,78,89,93,95,98,99,107,112,115,116,118,122,123,124,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,145,146,148,149,150,152,154,156,162,164,166,168,169,170,171,172,173,175,179,180,181,183,185,187,189,198,206,208,222,223,224,225,226,227,228,229,230,232,239,242,243,245,247,266,267,280,281,282,283,284,285,286,287,288,290,296,297,300,306,308,309,310,311,312,313,314,315,316,317,318,319,320,321,322,323,324,325,326,330,331,332,333,335,338,339,343,356,368,369,373,374,396,400,401,404,406,408,409,417,418,420,424,434,436,437,439,440,441,442,443,447,448,451,452,464,470,505,507,508,517,602,764],[2,542],{5:[1,1146]}),t([2,5,10,53,72,74,76,78,89,93,95,98,99,107,112,115,116,118,122,123,124,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,145,146,148,149,150,152,154,156,162,164,166,168,169,170,171,172,173,175,179,180,181,183,185,187,189,198,206,208,222,223,224,225,226,227,228,229,230,232,239,242,243,245,247,266,267,280,281,282,283,284,285,286,287,288,290,296,297,300,306,308,309,310,311,312,313,314,315,316,317,318,319,320,321,322,323,324,325,326,330,331,332,333,335,338,339,343,356,368,369,373,374,396,400,401,404,406,408,409,417,418,420,424,434,436,437,439,440,441,442,443,447,448,451,452,464,470,505,507,508,517,602,764],[2,539],{4:[1,1148],77:[1,1147]}),{77:[1,1149]},t(Ti,[2,4]),{2:r,3:168,4:i,5:o,56:165,77:ae,94:1150,111:149,113:153,131:se,132:ue,137:le,143:ce,144:161,145:fe,149:he,152:pe,154:de,156:K,158:167,179:ve,180:ge,181:ye,196:151,200:147,201:155,202:156,254:150,255:146,256:148,257:152,258:154,259:157,260:158,261:159,262:162,263:163,265:me,266:d,270:_e,271:be,273:Ee,280:xe,281:we,282:Te,283:Se,284:Ae,285:Ce,286:Oe,287:ke,288:Pe,290:J,291:Q,292:ee,293:te,294:Re,295:Ie,296:Ne,297:Me,298:Le,299:De,302:Fe,303:je,312:Be,317:Ue,419:190,420:ze,424:Ve},t(Z,[2,588]),t(Tr,[2,568]),{2:r,3:1151,4:i,5:o,113:1152,132:ue,296:Ne},t(Z,[2,564],{74:Si}),t(yt,[2,566]),t(Z,[2,613],{74:Si}),t(Z,[2,668]),t(Z,n,{17:5,18:7,19:8,20:9,21:10,22:11,23:12,24:13,25:14,26:15,27:16,28:17,29:18,30:19,31:20,32:21,33:22,34:23,35:24,36:25,37:26,38:27,39:28,40:29,41:30,42:31,43:32,44:33,45:34,46:35,47:36,48:37,49:38,50:39,51:40,52:41,54:43,55:44,56:45,57:46,58:47,59:48,60:49,61:50,62:51,63:52,64:53,65:54,66:55,67:56,68:57,69:58,70:59,71:60,79:75,504:95,184:99,3:100,12:1154,2:r,4:i,5:o,53:s,72:u,89:l,124:c,146:f,156:h,189:p,266:d,267:v,290:g,335:y,338:m,339:_,396:b,400:E,401:x,404:w,406:T,408:S,409:A,417:C,418:k,434:P,436:R,437:I,439:N,440:L,441:D,442:F,443:j,447:B,448:U,451:z,452:V,505:G,507:H,508:q,517:W}),t(Ai,[2,376],{114:625,327:637,115:wt,116:Tt,123:St,133:Ct,136:Ot,138:kt,141:It,142:Nt,179:Ft,180:jt,312:Ut,316:Gt,317:Ht,318:qt,319:Wt}),t($r,[2,377],{114:625,327:637,316:Gt}),t(Ai,[2,378],{114:625,327:637,115:wt,116:Tt,123:St,133:Ct,136:Ot,138:kt,141:It,142:Nt,179:Ft,180:jt,312:Ut,316:Gt,317:Ht,318:qt,319:Wt}),t(Ci,[2,379],{114:625,327:637,115:wt,116:Tt,123:St,133:Ct,136:Ot,138:kt,141:It,142:Nt,179:Ft,180:jt,312:Ut,314:[1,1155],316:Gt,317:Ht,318:qt,319:Wt}),t(Ci,[2,381],{114:625,327:637,115:wt,116:Tt,123:St,133:Ct,136:Ot,138:kt,141:It,142:Nt,179:Ft,180:jt,312:Ut,314:[1,1156],316:Gt,317:Ht,318:qt,319:Wt}),t(Ke,[2,383],{114:625,327:637}),t(Xr,[2,384],{114:625,327:637,115:wt,116:Tt,123:St,133:Ct,136:Ot,138:kt,180:jt,312:Ut,316:Gt}),t(Xr,[2,385],{114:625,327:637,115:wt,116:Tt,123:St,133:Ct,136:Ot,138:kt,180:jt,312:Ut,316:Gt}),t(Oi,[2,386],{114:625,327:637,115:wt,116:Tt,123:St,136:Ot,312:Ut,316:Gt}),t(Oi,[2,387],{114:625,327:637,115:wt,116:Tt,123:St,136:Ot,312:Ut,316:Gt}),t(Oi,[2,388],{114:625,327:637,115:wt,116:Tt,123:St,136:Ot,312:Ut,316:Gt}),t([2,4,5,10,53,72,74,76,77,78,89,93,95,98,99,107,112,118,122,123,124,128,129,130,131,132,133,134,135,137,138,139,140,141,142,143,145,146,148,149,150,152,154,156,162,164,166,168,169,170,171,172,173,175,179,180,181,183,185,187,189,198,206,208,222,223,224,225,226,227,228,229,232,239,242,243,245,247,266,267,280,281,282,283,284,285,286,287,288,290,296,300,306,308,309,310,311,313,314,315,317,318,319,320,321,322,323,324,325,326,330,331,332,333,335,338,339,396,400,401,404,406,408,409,417,418,420,424,434,436,437,439,440,441,442,443,447,448,451,452,464,470,505,507,508,517,602,764],[2,389],{114:625,327:637,115:wt,116:Tt,136:Ot,312:Ut,316:Gt}),t(ki,[2,390],{114:625,327:637,115:wt,116:Tt,123:St,133:Ct,136:Ot,138:kt,179:Ft,180:jt,312:Ut,316:Gt,317:Ht}),t(ki,[2,391],{114:625,327:637,115:wt,116:Tt,123:St,133:Ct,136:Ot,138:kt,179:Ft,180:jt,312:Ut,316:Gt,317:Ht}),t(ki,[2,392],{114:625,327:637,115:wt,116:Tt,123:St,133:Ct,136:Ot,138:kt,179:Ft,180:jt,312:Ut,316:Gt,317:Ht}),t(ki,[2,393],{114:625,327:637,115:wt,116:Tt,123:St,133:Ct,136:Ot,138:kt,179:Ft,180:jt,312:Ut,316:Gt,317:Ht}),t(ti,[2,394],{77:lt}),t(Ke,[2,395]),{2:r,3:168,4:i,5:o,56:165,77:ae,94:1157,111:149,113:153,131:se,132:ue,137:le,143:ce,144:161,145:fe,149:he,152:pe,154:de,156:K,158:167,179:ve,180:ge,181:ye,196:151,200:147,201:155,202:156,254:150,255:146,256:148,257:152,258:154,259:157,260:158,261:159,262:162,263:163,265:me,266:d,270:_e,271:be,273:Ee,280:xe,281:we,282:Te,283:Se,284:Ae,285:Ce,286:Oe,287:ke,288:Pe,290:J,291:Q,292:ee,293:te,294:Re,295:Ie,296:Ne,297:Me,298:Le,299:De,302:Fe,303:je,312:Be,317:Ue,419:190,420:ze,424:Ve},t(Ke,[2,397]),t(ti,[2,398],{77:lt}),t(Ke,[2,399]),{2:r,3:168,4:i,5:o,56:165,77:ae,94:1158,111:149,113:153,131:se,132:ue,137:le,143:ce,144:161,145:fe,149:he,152:pe,154:de,156:K,158:167,179:ve,180:ge,181:ye,196:151,200:147,201:155,202:156,254:150,255:146,256:148,257:152,258:154,259:157,260:158,261:159,262:162,263:163,265:me,266:d,270:_e,271:be,273:Ee,280:xe,281:we,282:Te,283:Se,284:Ae,285:Ce,286:Oe,287:ke,288:Pe,290:J,291:Q,292:ee,293:te,294:Re,295:Ie,296:Ne,297:Me,298:Le,299:De,302:Fe,303:je,312:Be,317:Ue,419:190,420:ze,424:Ve},t(Ke,[2,401]),t(Pi,[2,402],{114:625,327:637,112:xt,115:wt,116:Tt,123:St,133:Ct,136:Ot,138:kt,141:It,142:Nt,179:Ft,180:jt,311:Bt,312:Ut,313:zt,315:Vt,316:Gt,317:Ht,318:qt,319:Wt,332:nn}),t(Pi,[2,403],{114:625,327:637,112:xt,115:wt,116:Tt,123:St,133:Ct,136:Ot,138:kt,141:It,142:Nt,179:Ft,180:jt,311:Bt,312:Ut,313:zt,315:Vt,316:Gt,317:Ht,318:qt,319:Wt,332:nn}),t(Pi,[2,404],{114:625,327:637,112:xt,115:wt,116:Tt,123:St,133:Ct,136:Ot,138:kt,141:It,142:Nt,179:Ft,180:jt,311:Bt,312:Ut,313:zt,315:Vt,316:Gt,317:Ht,318:qt,319:Wt,332:nn}),t(Pi,[2,405],{114:625,327:637,112:xt,115:wt,116:Tt,123:St,133:Ct,136:Ot,138:kt,141:It,142:Nt,179:Ft,180:jt,311:Bt,312:Ut,313:zt,315:Vt,316:Gt,317:Ht,318:qt,319:Wt,332:nn}),t([2,4,5,10,53,72,89,99,124,139,140,146,154,156,170,171,189,266,267,290,306,310,320,321,322,323,324,325,326,330,331,333,335,338,339,396,400,401,404,406,408,409,417,418,434,436,437,439,440,441,442,443,447,448,451,452,505,507,508,517,602,764],Ri,{114:625,327:637,112:xt,115:wt,116:Tt,123:St,133:Ct,136:Ot,138:kt,141:It,142:Nt,179:Ft,180:jt,311:Bt,312:Ut,313:zt,315:Vt,316:Gt,317:Ht,318:qt,319:Wt,332:nn}),t(Pi,[2,407],{114:625,327:637,112:xt,115:wt,116:Tt,123:St,133:Ct,136:Ot,138:kt,141:It,142:Nt,179:Ft,180:jt,311:Bt,312:Ut,313:zt,315:Vt,316:Gt,317:Ht,318:qt,319:Wt,332:nn}),t(Pi,[2,408],{114:625,327:637,112:xt,115:wt,116:Tt,123:St,133:Ct,136:Ot,138:kt,141:It,142:Nt,179:Ft,180:jt,311:Bt,312:Ut,313:zt,315:Vt,316:Gt,317:Ht,318:qt,319:Wt,332:nn}),t(Pi,[2,409],{114:625,327:637,112:xt,115:wt,116:Tt,123:St,133:Ct,136:Ot,138:kt,141:It,142:Nt,179:Ft,180:jt,311:Bt,312:Ut,313:zt,315:Vt,316:Gt,317:Ht,318:qt,319:Wt,332:nn}),t(Pi,[2,410],{114:625,327:637,112:xt,115:wt,116:Tt,123:St,133:Ct,136:Ot,138:kt,141:It,142:Nt,179:Ft,180:jt,311:Bt,312:Ut,313:zt,315:Vt,316:Gt,317:Ht,318:qt,319:Wt,332:nn}),t(Pi,[2,411],{114:625,327:637,112:xt,115:wt,116:Tt,123:St,133:Ct,136:Ot,138:kt,141:It,142:Nt,179:Ft,180:jt,311:Bt,312:Ut,313:zt,315:Vt,316:Gt,317:Ht,318:qt,319:Wt,332:nn}),{77:[1,1159]},{77:[2,446]},{77:[2,447]},{77:[2,448]},t(Ii,[2,414],{114:625,327:637,99:Et,112:xt,115:wt,116:Tt,123:St,124:gr,133:Ct,136:Ot,138:kt,139:Pt,140:Rt,141:It,142:Nt,154:Mt,179:Ft,180:jt,311:Bt,312:Ut,313:zt,315:Vt,316:Gt,317:Ht,318:qt,319:Wt,320:Xt,321:$t,322:Yt,323:Zt,324:Kt,325:Jt,326:Qt,332:nn}),t([2,4,5,10,53,72,74,76,77,78,89,93,95,98,107,118,122,128,129,130,131,132,134,135,137,143,145,146,148,149,150,152,156,162,164,166,168,169,171,172,173,175,181,183,185,187,189,198,206,208,222,223,224,225,226,227,228,229,232,239,242,243,245,247,266,267,280,281,282,283,284,285,286,287,288,290,296,300,306,308,309,310,314,333,335,338,339,396,400,401,404,406,408,409,417,418,420,424,434,436,437,439,440,441,442,443,447,448,451,452,464,470,505,507,508,517,602,764],[2,415],{114:625,327:637,99:Et,112:xt,115:wt,116:Tt,123:St,124:gr,133:Ct,136:Ot,138:kt,139:Pt,140:Rt,141:It,142:Nt,154:Mt,170:Lt,179:Ft,180:jt,311:Bt,312:Ut,313:zt,315:Vt,316:Gt,317:Ht,318:qt,319:Wt,320:Xt,321:$t,322:Yt,323:Zt,324:Kt,325:Jt,326:Qt,330:en,331:tn,332:nn}),{2:r,3:168,4:i,5:o,40:1160,56:165,77:ae,78:[1,1162],79:75,89:l,94:260,111:149,113:153,131:se,132:ue,137:le,143:ce,144:161,145:fe,149:he,151:1161,152:pe,154:de,156:K,158:167,179:ve,180:ge,181:ye,184:99,189:p,196:151,200:147,201:155,202:156,254:150,255:146,256:148,257:152,258:154,259:157,260:158,261:159,262:162,263:163,265:me,266:d,270:_e,271:be,273:Ee,280:xe,281:we,282:Te,283:Se,284:Ae,285:Ce,286:Oe,287:ke,288:Pe,290:J,291:Q,292:ee,293:te,294:Re,295:Ie,296:Ne,297:Me,298:Le,299:De,302:Fe,303:je,312:Be,317:Ue,419:190,420:ze,424:Ve},t(Ke,[2,428]),t(Ke,[2,430]),t(Ke,[2,437]),t(Ke,[2,438]),{2:r,3:667,4:i,5:o,77:[1,1163]},{2:r,3:695,4:i,5:o,77:[1,1164],111:934,145:Hr,156:K,200:935,202:1166,290:J,291:Q,292:ee,293:te,329:1165},t(Ke,[2,435]),t(Ii,[2,432],{114:625,327:637,99:Et,112:xt,115:wt,116:Tt,123:St,124:gr,133:Ct,136:Ot,138:kt,139:Pt,140:Rt,141:It,142:Nt,154:Mt,179:Ft,180:jt,311:Bt,312:Ut,313:zt,315:Vt,316:Gt,317:Ht,318:qt,319:Wt,320:Xt,321:$t,322:Yt,323:Zt,324:Kt,325:Jt,326:Qt,332:nn}),t(Ii,[2,433],{114:625,327:637,99:Et,112:xt,115:wt,116:Tt,123:St,124:gr,133:Ct,136:Ot,138:kt,139:Pt,140:Rt,141:It,142:Nt,154:Mt,179:Ft,180:jt,311:Bt,312:Ut,313:zt,315:Vt,316:Gt,317:Ht,318:qt,319:Wt,320:Xt,321:$t,322:Yt,323:Zt,324:Kt,325:Jt,326:Qt,332:nn}),t([2,4,5,10,53,72,74,76,77,78,89,93,95,98,99,107,118,122,124,128,129,130,131,132,134,135,137,139,140,143,145,146,148,149,150,152,154,156,162,164,166,168,169,170,171,172,173,175,181,183,185,187,189,198,206,208,222,223,224,225,226,227,228,229,232,239,242,243,245,247,266,267,280,281,282,283,284,285,286,287,288,290,296,300,306,308,309,310,314,320,321,322,323,324,325,326,330,331,332,333,335,338,339,396,400,401,404,406,408,409,417,418,420,424,434,436,437,439,440,441,442,443,447,448,451,452,464,470,505,507,508,517,602,764],[2,434],{114:625,327:637,112:xt,115:wt,116:Tt,123:St,133:Ct,136:Ot,138:kt,141:It,142:Nt,179:Ft,180:jt,311:Bt,312:Ut,313:zt,315:Vt,316:Gt,317:Ht,318:qt,319:Wt}),t(Ke,[2,436]),t(Ke,[2,306]),t(Ke,[2,307]),t(Ke,[2,308]),t(Ke,[2,421]),{74:dr,78:[1,1167]},{2:r,3:168,4:i,5:o,56:165,77:ae,94:1168,111:149,113:153,131:se,132:ue,137:le,143:ce,144:161,145:fe,149:he,152:pe,154:de,156:K,158:167,179:ve,180:ge,181:ye,196:151,200:147,201:155,202:156,254:150,255:146,256:148,257:152,258:154,259:157,260:158,261:159,262:162,263:163,265:me,266:d,270:_e,271:be,273:Ee,280:xe,281:we,282:Te,283:Se,284:Ae,285:Ce,286:Oe,287:ke,288:Pe,290:J,291:Q,292:ee,293:te,294:Re,295:Ie,296:Ne,297:Me,298:Le,299:De,302:Fe,303:je,312:Be,317:Ue,419:190,420:ze,424:Ve},{2:r,3:168,4:i,5:o,56:165,77:ae,94:1169,111:149,113:153,131:se,132:ue,137:le,143:ce,144:161,145:fe,149:he,152:pe,154:de,156:K,158:167,179:ve,180:ge,181:ye,196:151,200:147,201:155,202:156,254:150,255:146,256:148,257:152,258:154,259:157,260:158,261:159,262:162,263:163,265:me,266:d,270:_e,271:be,273:Ee,280:xe,281:we,282:Te,283:Se,284:Ae,285:Ce,286:Oe,287:ke,288:Pe,290:J,291:Q,292:ee,293:te,294:Re,295:Ie,296:Ne,297:Me,298:Le,299:De,302:Fe,303:je,312:Be,317:Ue,419:190,420:ze,424:Ve},t(Ke,Ni),t(Mi,[2,286]),t(Ke,[2,282]),{78:[1,1171],99:Et,112:xt,114:625,115:wt,116:Tt,123:St,124:gr,133:Ct,136:Ot,138:kt,139:Pt,140:Rt,141:It,142:Nt,154:Mt,170:Lt,171:Dt,179:Ft,180:jt,311:Bt,312:Ut,313:zt,315:Vt,316:Gt,317:Ht,318:qt,319:Wt,320:Xt,321:$t,322:Yt,323:Zt,324:Kt,325:Jt,326:Qt,327:637,330:en,331:tn,332:nn,333:rn},{78:[1,1172]},{305:1173,306:Yr,307:957,308:ln,310:Zr},{306:[1,1174]},t(Kr,[2,371]),{2:r,3:168,4:i,5:o,56:165,77:ae,94:1175,111:149,113:153,131:se,132:ue,137:le,143:ce,144:161,145:fe,149:he,152:pe,154:de,156:K,158:167,179:ve,180:ge,181:ye,196:151,200:147,201:155,202:156,254:150,255:146,256:148,257:152,258:154,259:157,260:158,261:159,262:162,263:163,265:me,266:d,270:_e,271:be,273:Ee,280:xe,281:we,282:Te,283:Se,284:Ae,285:Ce,286:Oe,287:ke,288:Pe,290:J,291:Q,292:ee,293:te,294:Re,295:Ie,296:Ne,297:Me,298:Le,299:De,302:Fe,303:je,312:Be,317:Ue,419:190,420:ze,424:Ve},{99:Et,112:xt,114:625,115:wt,116:Tt,123:St,124:gr,133:Ct,136:Ot,138:kt,139:Pt,140:Rt,141:It,142:Nt,154:Mt,170:Lt,171:Dt,179:Ft,180:jt,309:[1,1176],311:Bt,312:Ut,313:zt,315:Vt,316:Gt,317:Ht,318:qt,319:Wt,320:Xt,321:$t,322:Yt,323:Zt,324:Kt,325:Jt,326:Qt,327:637,330:en,331:tn,332:nn,333:rn},{76:[1,1177],99:Et,112:xt,114:625,115:wt,116:Tt,123:St,124:gr,133:Ct,136:Ot,138:kt,139:Pt,140:Rt,141:It,142:Nt,154:Mt,170:Lt,171:Dt,179:Ft,180:jt,311:Bt,312:Ut,313:zt,315:Vt,316:Gt,317:Ht,318:qt,319:Wt,320:Xt,321:$t,322:Yt,323:Zt,324:Kt,325:Jt,326:Qt,327:637,330:en,331:tn,332:nn,333:rn},{74:[1,1178]},t(cn,[2,640]),{2:r,3:695,4:i,5:o,77:fn,111:690,113:688,131:se,132:ue,143:ce,144:685,145:Je,152:pe,156:K,181:ye,196:687,200:693,201:692,257:689,258:691,290:J,291:Q,292:ee,293:te,294:Re,295:Ie,296:Ne,297:Me,300:[1,1179],302:Fe,419:190,420:ze,422:1180,423:686,424:Ve},{78:[1,1181],99:Et,112:xt,114:625,115:wt,116:Tt,123:St,124:gr,133:Ct,136:Ot,138:kt,139:Pt,140:Rt,141:It,142:Nt,154:Mt,170:Lt,171:Dt,179:Ft,180:jt,311:Bt,312:Ut,313:zt,315:Vt,316:Gt,317:Ht,318:qt,319:Wt,320:Xt,321:$t,322:Yt,323:Zt,324:Kt,325:Jt,326:Qt,327:637,330:en,331:tn,332:nn,333:rn},{2:r,3:1182,4:i,5:o,149:Wr},t(Ke,[2,364]),t(cn,[2,637]),{2:r,3:704,4:i,5:o,131:hn,132:pn,426:[1,1183],428:1184},{2:r,3:695,4:i,5:o,77:fn,111:690,113:688,131:se,132:ue,143:ce,144:685,145:Je,152:pe,156:K,181:ye,196:687,200:693,201:692,257:689,258:691,290:J,291:Q,292:ee,293:te,294:Re,295:Ie,296:Ne,297:Me,302:Fe,419:190,420:ze,422:1185,423:686,424:Ve},{2:r,3:695,4:i,5:o,77:fn,111:690,113:688,131:se,132:ue,143:ce,144:685,145:Je,152:pe,156:K,181:ye,196:687,200:693,201:692,257:689,258:691,290:J,291:Q,292:ee,293:te,294:Re,295:Ie,296:Ne,297:Me,302:Fe,419:190,420:ze,422:1186,423:686,424:Ve},{2:r,3:695,4:i,5:o,77:fn,111:690,113:688,131:se,132:ue,143:ce,144:685,145:Je,152:pe,156:K,181:ye,196:687,200:693,201:692,257:689,258:691,290:J,291:Q,292:ee,293:te,294:Re,295:Ie,296:Ne,297:Me,302:Fe,419:190,420:ze,422:1187,423:686,424:Ve},{77:oi,143:ce,144:979,145:Je,152:pe,181:ye,201:980,302:Fe,342:1188,419:190,420:ze,424:Ve},t(Li,[2,458],{74:Di}),{149:ri,341:1190,344:ii},{2:r,3:168,4:i,5:o,56:165,77:ae,94:1194,100:1191,111:1193,113:153,131:se,132:ue,137:le,143:ce,144:161,145:fe,149:he,152:pe,154:de,156:K,158:167,179:ve,180:ge,181:ye,196:151,200:147,201:155,202:156,254:150,255:146,256:148,257:152,258:154,259:157,260:158,261:159,262:162,263:163,265:me,266:d,270:_e,271:be,273:Ee,280:xe,281:we,282:Te,283:Se,284:Ae,285:Ce,286:Oe,287:ke,288:Pe,290:J,291:Q,292:ee,293:te,294:Re,295:Ie,296:Ne,297:Me,298:Le,299:De,302:Fe,303:je,312:Be,317:Ue,345:1192,419:190,420:ze,424:Ve},t(Li,[2,466]),t(Fi,[2,469]),t(Fi,[2,470]),t(ji,[2,474]),t(ji,[2,475]),{2:r,3:244,4:i,5:o,199:1195},{77:oi,143:ce,144:979,145:Je,152:pe,181:ye,201:980,302:Fe,342:1196,419:190,420:ze,424:Ve},t(Li,[2,462],{74:Di}),{2:r,3:168,4:i,5:o,56:165,77:ae,94:1194,111:149,113:153,131:se,132:ue,137:le,143:ce,144:161,145:fe,149:he,152:pe,154:de,156:K,158:167,179:ve,180:ge,181:ye,196:151,200:147,201:155,202:156,254:150,255:146,256:148,257:152,258:154,259:157,260:158,261:159,262:162,263:163,265:me,266:d,270:_e,271:be,273:Ee,280:xe,281:we,282:Te,283:Se,284:Ae,285:Ce,286:Oe,287:ke,288:Pe,290:J,291:Q,292:ee,293:te,294:Re,295:Ie,296:Ne,297:Me,298:Le,299:De,302:Fe,303:je,312:Be,317:Ue,345:1192,419:190,420:ze,424:Ve},{308:Bi,456:1197,458:1198,459:1199},{2:r,3:168,4:i,5:o,56:165,77:ae,94:1201,111:149,113:153,131:se,132:ue,137:le,143:ce,144:161,145:fe,149:he,152:pe,154:de,156:K,158:167,179:ve,180:ge,181:ye,196:151,200:147,201:155,202:156,254:150,255:146,256:148,257:152,258:154,259:157,260:158,261:159,262:162,263:163,265:me,266:d,270:_e,271:be,273:Ee,280:xe,281:we,282:Te,283:Se,284:Ae,285:Ce,286:Oe,287:ke,288:Pe,290:J,291:Q,292:ee,293:te,294:Re,295:Ie,296:Ne,297:Me,298:Le,299:De,302:Fe,303:je,312:Be,317:Ue,419:190,420:ze,424:Ve},{230:[2,697]},t(vn,[2,181],{3:1202,2:r,4:i,5:o,76:[1,1203]}),t(vn,[2,182]),t(vn,[2,1094]),t(vn,[2,184]),t(vn,[2,186]),t(vn,[2,188]),t(vn,[2,192]),t(vn,[2,196]),t(vn,[2,199]),t([2,4,5,10,53,72,74,76,77,78,89,93,95,98,118,124,128,143,145,146,148,149,152,154,156,162,168,169,181,183,187,189,206,208,222,223,224,225,226,227,228,229,230,231,232,245,247,266,267,290,297,302,306,310,335,338,339,343,344,356,368,369,373,374,396,400,401,402,403,404,406,408,409,417,418,420,424,434,436,437,439,440,441,442,443,447,448,451,452,505,507,508,514,515,516,517,602,764],[2,201]),{2:r,3:1204,4:i,5:o},t(Ui,[2,1045],{83:1205,92:1206,93:[1,1207],98:[1,1208]}),{2:r,3:219,4:i,5:o,77:[1,1210],132:Xe,143:ce,144:212,145:fe,152:pe,156:K,181:ye,199:213,200:215,201:214,202:217,203:1209,209:1211,213:$e,214:218,290:J,291:Q,292:ee,293:te,302:Fe,419:190,420:ze,424:Ve},t(mn,[2,164]),t(mn,[2,165]),t(mn,[2,166]),t(mn,[2,167]),t(mn,[2,168]),{2:r,3:667,4:i,5:o},t(Ye,[2,83],{74:[1,1212]}),t(zi,[2,85]),t(zi,[2,86]),{113:1213,132:ue,296:Ne},t([10,72,74,78,93,98,118,124,128,162,168,169,183,198,206,208,222,223,224,225,226,227,228,229,232,245,247,306,310,602,764],on,{116:ei}),t(ui,[2,73]),t(ui,[2,1050]),{2:r,3:168,4:i,5:o,56:165,77:ae,94:1214,111:149,113:153,131:se,132:ue,137:le,143:ce,144:161,145:fe,149:he,152:pe,154:de,156:K,158:167,179:ve,180:ge,181:ye,196:151,200:147,201:155,202:156,254:150,255:146,256:148,257:152,258:154,259:157,260:158,261:159,262:162,263:163,265:me,266:d,270:_e,271:be,273:Ee,280:xe,281:we,282:Te,283:Se,284:Ae,285:Ce,286:Oe,287:ke,288:Pe,290:J,291:Q,292:ee,293:te,294:Re,295:Ie,296:Ne,297:Me,298:Le,299:De,302:Fe,303:je,312:Be,317:Ue,419:190,420:ze,424:Ve},t(hi,[2,126]),t(hi,[2,144]),t(hi,[2,145]),t(hi,[2,146]),{2:r,3:168,4:i,5:o,56:165,77:ae,78:[2,1065],94:260,111:149,113:153,127:1215,131:se,132:ue,137:le,143:ce,144:161,145:fe,149:he,151:1216,152:pe,154:de,156:K,158:167,179:ve,180:ge,181:ye,196:151,200:147,201:155,202:156,254:150,255:146,256:148,257:152,258:154,259:157,260:158,261:159,262:162,263:163,265:me,266:d,270:_e,271:be,273:Ee,280:xe,281:we,282:Te,283:Se,284:Ae,285:Ce,286:Oe,287:ke,288:Pe,290:J,291:Q,292:ee,293:te,294:Re,295:Ie,296:Ne,297:Me,298:Le,299:De,302:Fe,303:je,312:Be,317:Ue,419:190,420:ze,424:Ve},{77:[1,1217]},t(hi,[2,94]),t([2,4,5,10,72,74,76,77,78,118,122,124,128,129,130,131,132,134,135,137,139,140,143,145,146,148,149,150,152,154,156,162,164,166,168,169,170,171,172,173,175,181,183,185,187,198,280,281,282,283,284,285,286,287,288,306,310,420,424,602,764],[2,96],{114:625,327:637,99:Et,112:xt,115:wt,116:Tt,123:St,133:Ct,136:Ot,138:kt,141:It,142:Nt,179:Ft,180:jt,311:Bt,312:Ut,313:zt,315:Vt,316:Gt,317:Ht,318:qt,319:Wt,320:Xt,321:$t,322:Yt,323:Zt,324:Kt,325:Jt,326:Qt,330:en,331:tn,332:nn,333:rn}),t([2,4,5,10,72,74,76,77,78,112,118,122,124,128,129,130,131,132,134,135,137,139,140,143,145,146,148,149,150,152,154,156,162,164,166,168,169,170,171,172,173,175,181,183,185,187,198,280,281,282,283,284,285,286,287,288,306,310,420,424,602,764],[2,97],{114:625,327:637,99:Et,115:wt,116:Tt,123:St,133:Ct,136:Ot,138:kt,141:It,142:Nt,179:Ft,180:jt,311:Bt,312:Ut,313:zt,315:Vt,316:Gt,317:Ht,318:qt,319:Wt,320:Xt,321:$t,322:Yt,323:Zt,324:Kt,325:Jt,326:Qt,330:en,331:tn,332:nn,333:rn}),{2:r,3:733,4:i,5:o,72:xn,76:wn,77:Tn,78:[1,1218],112:Sn,114:736,115:wt,116:Tt,117:1219,118:An,122:Cn,123:On,124:kn,128:Pn,129:Rn,130:In,131:Nn,132:Mn,133:Ln,134:Dn,135:Fn,136:jn,137:Bn,138:Un,139:zn,140:Vn,141:Gn,142:Hn,143:qn,144:758,145:Wn,146:Xn,148:$n,149:Yn,150:Zn,152:Kn,154:Jn,156:Qn,158:768,160:769,162:er,164:tr,166:nr,168:rr,169:ir,170:or,171:ar,172:sr,173:ur,175:lr,185:cr,187:fr,280:xe,281:we,282:Te,283:Se,284:Ae,285:Ce,286:Oe,287:ke,288:Pe,419:190,420:ze,424:Ve},t(Vi,[2,1061],{153:1015,179:li,180:ci,181:fi}),{2:r,3:733,4:i,5:o,72:xn,76:wn,77:Tn,112:Sn,114:736,115:wt,116:Tt,117:1221,118:An,122:Cn,123:On,124:kn,126:1220,128:Pn,129:Rn,130:In,131:Nn,132:Mn,133:Ln,134:Dn,135:Fn,136:jn,137:Bn,138:Un,139:zn,140:Vn,141:Gn,142:Hn,143:qn,144:758,145:Wn,146:Xn,148:$n,149:Yn,150:Zn,152:Kn,154:Jn,156:Qn,158:768,160:769,162:er,164:tr,166:nr,168:rr,169:ir,170:or,171:ar,172:sr,173:ur,175:lr,185:cr,187:fr,280:xe,281:we,282:Te,283:Se,284:Ae,285:Ce,286:Oe,287:ke,288:Pe,419:190,420:ze,424:Ve},{2:r,3:168,4:i,5:o,56:165,77:ae,94:1222,111:149,113:153,131:se,132:ue,137:le,143:ce,144:161,145:fe,149:he,152:pe,154:de,156:K,158:167,179:ve,180:ge,181:ye,196:151,200:147,201:155,202:156,254:150,255:146,256:148,257:152,258:154,259:157,260:158,261:159,262:162,263:163,265:me,266:d,270:_e,271:be,273:Ee,280:xe,281:we,282:Te,283:Se,284:Ae,285:Ce,286:Oe,287:ke,288:Pe,290:J,291:Q,292:ee,293:te,294:Re,295:Ie,296:Ne,297:Me,298:Le,299:De,302:Fe,303:je,312:Be,317:Ue,419:190,420:ze,424:Ve},{2:r,3:168,4:i,5:o,56:165,77:ae,94:1223,111:149,113:153,131:se,132:ue,137:le,143:ce,144:161,145:fe,149:he,152:pe,154:de,156:K,158:167,179:ve,180:ge,181:ye,196:151,200:147,201:155,202:156,254:150,255:146,256:148,257:152,258:154,259:157,260:158,261:159,262:162,263:163,265:me,266:d,270:_e,271:be,273:Ee,280:xe,281:we,282:Te,283:Se,284:Ae,285:Ce,286:Oe,287:ke,288:Pe,290:J,291:Q,292:ee,293:te,294:Re,295:Ie,296:Ne,297:Me,298:Le,299:De,302:Fe,303:je,312:Be,317:Ue,419:190,420:ze,424:Ve},{2:r,3:1224,4:i,5:o},t(hi,[2,110]),t(hi,[2,111]),t(hi,[2,112]),t(hi,[2,119]),{2:r,3:1225,4:i,5:o},{2:r,3:1011,4:i,5:o,111:1065,143:pi,145:di,147:1226,336:1064,337:1066},{2:r,3:1227,4:i,5:o},{2:r,3:168,4:i,5:o,56:165,77:ae,94:260,111:149,113:153,131:se,132:ue,137:le,143:ce,144:161,145:fe,149:he,151:1228,152:pe,154:de,156:K,158:167,179:ve,180:ge,181:ye,196:151,200:147,201:155,202:156,254:150,255:146,256:148,257:152,258:154,259:157,260:158,261:159,262:162,263:163,265:me,266:d,270:_e,271:be,273:Ee,280:xe,281:we,282:Te,283:Se,284:Ae,285:Ce,286:Oe,287:ke,288:Pe,290:J,291:Q,292:ee,293:te,294:Re,295:Ie,296:Ne,297:Me,298:Le,299:De,302:Fe,303:je,312:Be,317:Ue,419:190,420:ze,424:Ve},t(hi,[2,125]),t(Vi,[2,1067],{155:1229}),t(Vi,[2,1069],{157:1230}),t(Vi,[2,1071],{159:1231}),t(Vi,[2,1075],{161:1232}),t(Gi,Hi,{163:1233,178:1234}),{77:[1,1235]},t(Vi,[2,1077],{165:1236}),t(Vi,[2,1079],{167:1237}),t(Gi,Hi,{178:1234,163:1238}),t(Gi,Hi,{178:1234,163:1239}),t(Gi,Hi,{178:1234,163:1240}),t(Gi,Hi,{178:1234,163:1241}),{2:r,3:733,4:i,5:o,72:xn,76:wn,77:Tn,112:Sn,114:736,115:wt,116:Tt,117:1242,118:An,122:Cn,123:On,124:kn,128:Pn,129:Rn,130:In,131:Nn,132:Mn,133:Ln,134:Dn,135:Fn,136:jn,137:Bn,138:Un,139:zn,140:Vn,141:Gn,142:Hn,143:qn,144:758,145:Wn,146:Xn,148:$n,149:Yn,150:Zn,152:Kn,154:Jn,156:Qn,158:768,160:769,162:er,164:tr,166:nr,168:rr,169:ir,170:or,171:ar,172:sr,173:ur,175:lr,185:cr,187:fr,280:xe,281:we,282:Te,283:Se,284:Ae,285:Ce,286:Oe,287:ke,288:Pe,419:190,420:ze,424:Ve},{2:r,3:168,4:i,5:o,56:165,77:ae,94:817,111:149,113:153,131:se,132:ue,137:le,143:ce,144:161,145:fe,149:he,152:pe,154:de,156:K,158:167,174:1243,179:ve,180:ge,181:ye,196:151,200:147,201:155,202:156,253:816,254:150,255:146,256:148,257:152,258:154,259:157,260:158,261:159,262:162,263:163,265:me,266:d,270:_e,271:be,273:Ee,280:xe,281:we,282:Te,283:Se,284:Ae,285:Ce,286:Oe,287:ke,288:Pe,290:J,291:Q,292:ee,293:te,294:Re,295:Ie,296:Ne,297:Me,298:Le,299:De,302:Fe,303:je,312:Be,317:Ue,419:190,420:ze,424:Ve},t(qi,[2,1081],{176:1244}),t(Z,[2,606],{183:[1,1245]}),t(Z,[2,602],{183:[1,1246]}),t(Z,[2,595]),{113:1247,132:ue,296:Ne},t(Z,[2,604],{183:[1,1248]}),t(Z,[2,599]),t(Z,[2,600],{112:[1,1249]}),t(hr,[2,69]),{40:1250,79:75,89:l,184:99,189:p},t(Z,[2,450],{74:Wi,128:[1,1251]}),t(Xi,[2,451]),{124:[1,1253]},{2:r,3:1254,4:i,5:o},t(Ge,[2,1115]),t(Ge,[2,1116]),t(Z,[2,618]),t(vr,[2,355],{114:625,327:637,99:Et,112:xt,115:wt,116:Tt,123:St,124:gr,133:Ct,136:Ot,138:kt,139:Pt,140:Rt,141:It,142:Nt,154:Mt,170:Lt,171:Dt,179:Ft,180:jt,311:Bt,312:Ut,313:zt,315:Vt,316:Gt,317:Ht,318:qt,319:Wt,320:Xt,321:$t,322:Yt,323:Zt,324:Kt,325:Jt,326:Qt,330:en,331:tn,332:nn,333:rn}),t(Pi,Ri,{114:625,327:637,112:xt,115:wt,116:Tt,123:St,133:Ct,136:Ot,138:kt,141:It,142:Nt,179:Ft,180:jt,311:Bt,312:Ut,313:zt,315:Vt,316:Gt,317:Ht,318:qt,319:Wt,332:nn}),t(yt,[2,682]),t(yt,[2,684]),t(Z,[2,650]),t(Z,[2,652],{114:625,327:637,99:Et,112:xt,115:wt,116:Tt,123:St,124:gr,133:Ct,136:Ot,138:kt,139:Pt,140:Rt,141:It,142:Nt,154:Mt,170:Lt,171:Dt,179:Ft,180:jt,311:Bt,312:Ut,313:zt,315:Vt,316:Gt,317:Ht,318:qt,319:Wt,320:Xt,321:$t,322:Yt,323:Zt,324:Kt,325:Jt,326:Qt,330:en,331:tn,332:nn,333:rn}),{2:r,3:168,4:i,5:o,56:165,77:ae,94:1255,111:149,113:153,131:se,132:ue,137:le,143:ce,144:161,145:fe,149:he,152:pe,154:de,156:K,158:167,179:ve,180:ge,181:ye,196:151,200:147,201:155,202:156,254:150,255:146,256:148,257:152,258:154,259:157,260:158,261:159,262:162,263:163,265:me,266:d,270:_e,271:be,273:Ee,280:xe,281:we,282:Te,283:Se,284:Ae,285:Ce,286:Oe,287:ke,288:Pe,290:J,291:Q,292:ee,293:te,294:Re,295:Ie,296:Ne,297:Me,298:Le,299:De,302:Fe,303:je,312:Be,317:Ue,419:190,420:ze,424:Ve},{2:r,3:1079,4:i,5:o,77:vi,131:gi,432:1256},t($i,[2,659]),t($i,[2,660]),t($i,[2,661]),{2:r,3:168,4:i,5:o,56:165,77:ae,94:1257,111:149,113:153,131:se,132:ue,137:le,143:ce,144:161,145:fe,149:he,152:pe,154:de,156:K,158:167,179:ve,180:ge,181:ye,196:151,200:147,201:155,202:156,254:150,255:146,256:148,257:152,258:154,259:157,260:158,261:159,262:162,263:163,265:me,266:d,270:_e,271:be,273:Ee,280:xe,281:we,282:Te,283:Se,284:Ae,285:Ce,286:Oe,287:ke,288:Pe,290:J,291:Q,292:ee,293:te,294:Re,295:Ie,296:Ne,297:Me,298:Le,299:De,302:Fe,303:je,312:Be,317:Ue,419:190,420:ze,424:Ve},{2:r,3:168,4:i,5:o,56:165,77:ae,94:1258,111:149,113:153,131:se,132:ue,137:le,143:ce,144:161,145:fe,149:he,152:pe,154:de,156:K,158:167,179:ve,180:ge,181:ye,196:151,200:147,201:155,202:156,254:150,255:146,256:148,257:152,258:154,259:157,260:158,261:159,262:162,263:163,265:me,266:d,270:_e,271:be,273:Ee,280:xe,281:we,282:Te,283:Se,284:Ae,285:Ce,286:Oe,287:ke,288:Pe,290:J,291:Q,292:ee,293:te,294:Re,295:Ie,296:Ne,297:Me,298:Le,299:De,302:Fe,303:je,312:Be,317:Ue,419:190,420:ze,424:Ve},{114:1077,115:wt,116:Tt,124:[1,1259]},t(br,[2,755]),t(xr,[2,148],{74:yi}),t(xr,[2,149],{74:yi}),t(xr,[2,150],{74:yi}),{2:r,3:168,4:i,5:o,56:165,77:ae,94:817,111:149,113:153,131:se,132:ue,137:le,143:ce,144:161,145:fe,149:he,152:pe,154:de,156:K,158:167,179:ve,180:ge,181:ye,196:151,200:147,201:155,202:156,253:1260,254:150,255:146,256:148,257:152,258:154,259:157,260:158,261:159,262:162,263:163,265:me,266:d,270:_e,271:be,273:Ee,280:xe,281:we,282:Te,283:Se,284:Ae,285:Ce,286:Oe,287:ke,288:Pe,290:J,291:Q,292:ee,293:te,294:Re,295:Ie,296:Ne,297:Me,298:Le,299:De,302:Fe,303:je,312:Be,317:Ue,419:190,420:ze,424:Ve},{2:r,3:1261,4:i,5:o,113:1263,131:[1,1262],132:ue,296:Ne},t(mi,[2,275]),t(mi,[2,277]),t(mi,[2,279]),t(rt,[2,160]),t(rt,[2,1090]),{78:[1,1264]},t(at,[2,758]),{2:r,3:1265,4:i,5:o},{2:r,3:1266,4:i,5:o},{2:r,3:1268,4:i,5:o,384:1267},{2:r,3:1268,4:i,5:o,384:1269},{2:r,3:1270,4:i,5:o},{2:r,3:168,4:i,5:o,56:165,77:ae,94:260,111:149,113:153,131:se,132:ue,137:le,143:ce,144:161,145:fe,149:he,151:1271,152:pe,154:de,156:K,158:167,179:ve,180:ge,181:ye,196:151,200:147,201:155,202:156,254:150,255:146,256:148,257:152,258:154,259:157,260:158,261:159,262:162,263:163,265:me,266:d,270:_e,271:be,273:Ee,280:xe,281:we,282:Te,283:Se,284:Ae,285:Ce,286:Oe,287:ke,288:Pe,290:J,291:Q,292:ee,293:te,294:Re,295:Ie,296:Ne,297:Me,298:Le,299:De,302:Fe,303:je,312:Be,317:Ue,419:190,420:ze,424:Ve},{2:r,3:1272,4:i,5:o},{74:dr,78:[1,1273]},t(an,[2,347]),t(an,[2,348]),{2:r,3:168,4:i,5:o,56:165,77:ae,94:1274,111:149,113:153,131:se,132:ue,137:le,143:ce,144:161,145:fe,149:he,152:pe,154:de,156:K,158:167,179:ve,180:ge,181:ye,196:151,200:147,201:155,202:156,254:150,255:146,256:148,257:152,258:154,259:157,260:158,261:159,262:162,263:163,265:me,266:d,270:_e,271:be,273:Ee,280:xe,281:we,282:Te,283:Se,284:Ae,285:Ce,286:Oe,287:ke,288:Pe,290:J,291:Q,292:ee,293:te,294:Re,295:Ie,296:Ne,297:Me,298:Le,299:De,302:Fe,303:je,312:Be,317:Ue,419:190,420:ze,424:Ve},{2:r,3:168,4:i,5:o,56:165,77:ae,94:1275,111:149,113:153,131:se,132:ue,137:le,143:ce,144:161,145:fe,149:he,152:pe,154:de,156:K,158:167,179:ve,180:ge,181:ye,196:151,200:147,201:155,202:156,254:150,255:146,256:148,257:152,258:154,259:157,260:158,261:159,262:162,263:163,265:me,266:d,270:_e,271:be,273:Ee,280:xe,281:we,282:Te,283:Se,284:Ae,285:Ce,286:Oe,287:ke,288:Pe,290:J,291:Q,292:ee,293:te,294:Re,295:Ie,296:Ne,297:Me,298:Le,299:De,302:Fe,303:je,312:Be,317:Ue,419:190,420:ze,424:Ve},{2:r,3:168,4:i,5:o,56:165,77:ae,94:1276,111:149,113:153,131:se,132:ue,137:le,143:ce,144:161,145:fe,149:he,152:pe,154:de,156:K,158:167,179:ve,180:ge,181:ye,196:151,200:147,201:155,202:156,254:150,255:146,256:148,257:152,258:154,259:157,260:158,261:159,262:162,263:163,265:me,266:d,270:_e,271:be,273:Ee,280:xe,281:we,282:Te,283:Se,284:Ae,285:Ce,286:Oe,287:ke,288:Pe,290:J,291:Q,292:ee,293:te,294:Re,295:Ie,296:Ne,297:Me,298:Le,299:De,302:Fe,303:je,312:Be,317:Ue,419:190,420:ze,424:Ve},{2:r,3:168,4:i,5:o,56:165,77:ae,94:1277,111:149,113:153,131:se,132:ue,137:le,143:ce,144:161,145:fe,149:he,152:pe,154:de,156:K,158:167,179:ve,180:ge,181:ye,196:151,200:147,201:155,202:156,254:150,255:146,256:148,257:152,258:154,259:157,260:158,261:159,262:162,263:163,265:me,266:d,270:_e,271:be,273:Ee,280:xe,281:we,282:Te,283:Se,284:Ae,285:Ce,286:Oe,287:ke,288:Pe,290:J,291:Q,292:ee,293:te,294:Re,295:Ie,296:Ne,297:Me,298:Le,299:De,302:Fe,303:je,312:Be,317:Ue,419:190,420:ze,424:Ve},t(Tr,[2,504]),t(Z,Yi,{407:1278,76:Zi,77:[1,1279]}),t(Z,Yi,{407:1281,76:Zi}),{77:[1,1282]},{2:r,3:244,4:i,5:o,199:1283},t(br,[2,731]),t(br,[2,733]),t(br,[2,1146]),{143:tt,145:nt,431:1284},t(Ki,[2,1147],{419:190,479:1285,144:1286,145:Je,420:ze,424:Ve}),{76:_i,139:[2,1151],481:1287,483:1288},t([10,74,76,78,132,139,145,152,306,310,420,424,602,764],kr,{490:851,493:852,137:dt}),t(br,[2,736]),t(br,Cr),{74:Sr,78:[1,1289]},t(Rr,[2,1165],{492:1290,497:1291,152:vt}),t(Pr,[2,1164]),t(Rr,[2,745]),t(Rr,[2,1170]),t(Z,[2,490],{77:[1,1292]}),{76:[1,1294],77:[1,1293]},{99:Et,112:xt,114:625,115:wt,116:Tt,123:St,124:gr,133:Ct,136:Ot,138:kt,139:Pt,140:Rt,141:It,142:Nt,148:[1,1295],154:Mt,170:Lt,171:Dt,179:Ft,180:jt,311:Bt,312:Ut,313:zt,315:Vt,316:Gt,317:Ht,318:qt,319:Wt,320:Xt,321:$t,322:Yt,323:Zt,324:Kt,325:Jt,326:Qt,327:637,330:en,331:tn,332:nn,333:rn},t(Li,Ji,{79:75,184:99,468:1296,40:1299,89:l,146:Qi,189:p,470:eo}),t(bi,[2,1140]),t(Nr,[2,723]),{230:[1,1300]},t(to,[2,769]),t(to,[2,770]),t(to,[2,771]),t(Mr,Lr,{510:1301,95:Dr,514:Fr,515:jr,516:Br}),t(Mr,[2,768]),t(Z,[2,312]),t(Z,[2,313]),{2:r,3:168,4:i,5:o,56:165,77:ae,94:1302,111:149,113:153,131:se,132:ue,137:le,143:ce,144:161,145:fe,149:he,152:pe,154:de,156:K,158:167,179:ve,180:ge,181:ye,196:151,200:147,201:155,202:156,254:150,255:146,256:148,257:152,258:154,259:157,260:158,261:159,262:162,263:163,265:me,266:d,270:_e,271:be,273:Ee,280:xe,281:we,282:Te,283:Se,284:Ae,285:Ce,286:Oe,287:ke,288:Pe,290:J,291:Q,292:ee,293:te,294:Re,295:Ie,296:Ne,297:Me,298:Le,299:De,302:Fe,303:je,312:Be,317:Ue,419:190,420:ze,424:Ve},t(yt,[2,690],{124:[1,1303]}),t(Ti,[2,541]),{131:[1,1305],388:1304,390:[1,1306]},t(Ti,[2,5]),{2:r,3:168,4:i,5:o,56:165,77:ae,94:1194,111:149,113:153,131:se,132:ue,137:le,143:ce,144:161,145:fe,149:he,152:pe,154:de,156:K,158:167,179:ve,180:ge,181:ye,196:151,200:147,201:155,202:156,254:150,255:146,256:148,257:152,258:154,259:157,260:158,261:159,262:162,263:163,265:me,266:d,270:_e,271:be,273:Ee,280:xe,281:we,282:Te,283:Se,284:Ae,285:Ce,286:Oe,287:ke,288:Pe,290:J,291:Q,292:ee,293:te,294:Re,295:Ie,296:Ne,297:Me,298:Le,299:De,302:Fe,303:je,312:Be,317:Ue,345:1307,419:190,420:ze,424:Ve},t(Z,[2,455],{114:625,327:637,99:Et,112:xt,115:wt,116:Tt,123:St,124:gr,133:Ct,136:Ot,138:kt,139:Pt,140:Rt,141:It,142:Nt,154:Mt,170:Lt,171:Dt,179:Ft,180:jt,311:Bt,312:Ut,313:zt,315:Vt,316:Gt,317:Ht,318:qt,319:Wt,320:Xt,321:$t,322:Yt,323:Zt,324:Kt,325:Jt,326:Qt,330:en,331:tn,332:nn,333:rn}),t(Z,[2,589]),t(Z,[2,590]),{2:r,3:244,4:i,5:o,199:1308},t(Z,[2,670]),{2:r,3:168,4:i,5:o,56:165,77:ae,94:1309,111:149,113:153,131:se,132:ue,137:le,143:ce,144:161,145:fe,149:he,152:pe,154:de,156:K,158:167,179:ve,180:ge,181:ye,196:151,200:147,201:155,202:156,254:150,255:146,256:148,257:152,258:154,259:157,260:158,261:159,262:162,263:163,265:me,266:d,270:_e,271:be,273:Ee,280:xe,281:we,282:Te,283:Se,284:Ae,285:Ce,286:Oe,287:ke,288:Pe,290:J,291:Q,292:ee,293:te,294:Re,295:Ie,296:Ne,297:Me,298:Le,299:De,302:Fe,303:je,312:Be,317:Ue,419:190,420:ze,424:Ve},{2:r,3:168,4:i,5:o,56:165,77:ae,94:1310,111:149,113:153,131:se,132:ue,137:le,143:ce,144:161,145:fe,149:he,152:pe,154:de,156:K,158:167,179:ve,180:ge,181:ye,196:151,200:147,201:155,202:156,254:150,255:146,256:148,257:152,258:154,259:157,260:158,261:159,262:162,263:163,265:me,266:d,270:_e,271:be,273:Ee,280:xe,281:we,282:Te,283:Se,284:Ae,285:Ce,286:Oe,287:ke,288:Pe,290:J,291:Q,292:ee,293:te,294:Re,295:Ie,296:Ne,297:Me,298:Le,299:De,302:Fe,303:je,312:Be,317:Ue,419:190,420:ze,424:Ve},{78:[1,1311],99:Et,112:xt,114:625,115:wt,116:Tt,123:St,124:gr,133:Ct,136:Ot,138:kt,139:Pt,140:Rt,141:It,142:Nt,154:Mt,170:Lt,171:Dt,179:Ft,180:jt,311:Bt,312:Ut,313:zt,315:Vt,316:Gt,317:Ht,318:qt,319:Wt,320:Xt,321:$t,322:Yt,323:Zt,324:Kt,325:Jt,326:Qt,327:637,330:en,331:tn,332:nn,333:rn},{78:[1,1312],99:Et,112:xt,114:625,115:wt,116:Tt,123:St,124:gr,133:Ct,136:Ot,138:kt,139:Pt,140:Rt,141:It,142:Nt,154:Mt,170:Lt,171:Dt,179:Ft,180:jt,311:Bt,312:Ut,313:zt,315:Vt,316:Gt,317:Ht,318:qt,319:Wt,320:Xt,321:$t,322:Yt,323:Zt,324:Kt,325:Jt,326:Qt,327:637,330:en,331:tn,332:nn,333:rn},{2:r,3:168,4:i,5:o,40:1313,56:165,77:ae,79:75,89:l,94:260,111:149,113:153,131:se,132:ue,137:le,143:ce,144:161,145:fe,149:he,151:1314,152:pe,154:de,156:K,158:167,179:ve,180:ge,181:ye,184:99,189:p,196:151,200:147,201:155,202:156,254:150,255:146,256:148,257:152,258:154,259:157,260:158,261:159,262:162,263:163,265:me,266:d,270:_e,271:be,273:Ee,280:xe,281:we,282:Te,283:Se,284:Ae,285:Ce,286:Oe,287:ke,288:Pe,290:J,291:Q,292:ee,293:te,294:Re,295:Ie,296:Ne,297:Me,298:Le,299:De,302:Fe,303:je,312:Be,317:Ue,419:190,420:ze,424:Ve},{78:[1,1315]},{74:dr,78:[1,1316]},t(Ke,[2,426]),{2:r,3:168,4:i,5:o,56:165,77:ae,94:1317,111:149,113:153,131:se,132:ue,137:le,143:ce,144:161,145:fe,149:he,152:pe,154:de,156:K,158:167,179:ve,180:ge,181:ye,196:151,200:147,201:155,202:156,254:150,255:146,256:148,257:152,258:154,259:157,260:158,261:159,262:162,263:163,265:me,266:d,270:_e,271:be,273:Ee,280:xe,281:we,282:Te,283:Se,284:Ae,285:Ce,286:Oe,287:ke,288:Pe,290:J,291:Q,292:ee,293:te,294:Re,295:Ie,296:Ne,297:Me,298:Le,299:De,302:Fe,303:je,312:Be,317:Ue,419:190,420:ze,424:Ve},{2:r,3:168,4:i,5:o,40:1318,56:165,77:ae,78:[1,1320],79:75,89:l,94:260,111:149,113:153,131:se,132:ue,137:le,143:ce,144:161,145:fe,149:he,151:1319,152:pe,154:de,156:K,158:167,179:ve,180:ge,181:ye,184:99,189:p,196:151,200:147,201:155,202:156,254:150,255:146,256:148,257:152,258:154,259:157,260:158,261:159,262:162,263:163,265:me,266:d,270:_e,271:be,273:Ee,280:xe,281:we,282:Te,283:Se,284:Ae,285:Ce,286:Oe,287:ke,288:Pe,290:J,291:Q,292:ee,293:te,294:Re,295:Ie,296:Ne,297:Me,298:Le,299:De,302:Fe,303:je,312:Be,317:Ue,419:190,420:ze,424:Ve},t(Ke,[2,429]),t(Ke,[2,431]),t(Ke,no,{275:1321,276:ro}),{78:[1,1323],99:Et,112:xt,114:625,115:wt,116:Tt,123:St,124:gr,133:Ct,136:Ot,138:kt,139:Pt,140:Rt,141:It,142:Nt,154:Mt,170:Lt,171:Dt,179:Ft,180:jt,311:Bt,312:Ut,313:zt,315:Vt,316:Gt,317:Ht,318:qt,319:Wt,320:Xt,321:$t,322:Yt,323:Zt,324:Kt,325:Jt,326:Qt,327:637,330:en,331:tn,332:nn,333:rn},{78:[1,1324],99:Et,112:xt,114:625,115:wt,116:Tt,123:St,124:gr,133:Ct,136:Ot,138:kt,139:Pt,140:Rt,141:It,142:Nt,154:Mt,170:Lt,171:Dt,179:Ft,180:jt,311:Bt,312:Ut,313:zt,315:Vt,316:Gt,317:Ht,318:qt,319:Wt,320:Xt,321:$t,322:Yt,323:Zt,324:Kt,325:Jt,326:Qt,327:637,330:en,331:tn,332:nn,333:rn},{2:r,3:1325,4:i,5:o,180:[1,1326]},t(cn,[2,619]),t(Ke,[2,363]),{306:[1,1327]},t(Ke,[2,370]),{99:Et,112:xt,114:625,115:wt,116:Tt,123:St,124:gr,133:Ct,136:Ot,138:kt,139:Pt,140:Rt,141:It,142:Nt,154:Mt,170:Lt,171:Dt,179:Ft,180:jt,306:[2,374],311:Bt,312:Ut,313:zt,315:Vt,316:Gt,317:Ht,318:qt,319:Wt,320:Xt,321:$t,322:Yt,323:Zt,324:Kt,325:Jt,326:Qt,327:637,330:en,331:tn,332:nn,333:rn},{2:r,3:168,4:i,5:o,56:165,77:ae,94:1328,111:149,113:153,131:se,132:ue,137:le,143:ce,144:161,145:fe,149:he,152:pe,154:de,156:K,158:167,179:ve,180:ge,181:ye,196:151,200:147,201:155,202:156,254:150,255:146,256:148,257:152,258:154,259:157,260:158,261:159,262:162,263:163,265:me,266:d,270:_e,271:be,273:Ee,280:xe,281:we,282:Te,283:Se,284:Ae,285:Ce,286:Oe,287:ke,288:Pe,290:J,291:Q,292:ee,293:te,294:Re,295:Ie,296:Ne,297:Me,298:Le,299:De,302:Fe,303:je,312:Be,317:Ue,419:190,420:ze,424:Ve},{4:Ur,7:879,272:1329,387:878,389:zr},{2:r,3:168,4:i,5:o,56:165,77:ae,94:1330,111:149,113:153,131:se,132:ue,137:le,143:ce,144:161,145:fe,149:he,152:pe,154:de,156:K,158:167,179:ve,180:ge,181:ye,196:151,200:147,201:155,202:156,254:150,255:146,256:148,257:152,258:154,259:157,260:158,261:159,262:162,263:163,265:me,266:d,270:_e,271:be,273:Ee,280:xe,281:we,282:Te,283:Se,284:Ae,285:Ce,286:Oe,287:ke,288:Pe,290:J,291:Q,292:ee,293:te,294:Re,295:Ie,296:Ne,297:Me,298:Le,299:De,302:Fe,303:je,312:Be,317:Ue,419:190,420:ze,424:Ve},t(cn,[2,641]),t(Jr,[2,648]),t(Qr,[2,636]),t(Mi,Ni),t(cn,[2,638]),t(ni,[2,643]),t(ni,[2,645]),t(ni,[2,646]),t(ni,[2,647]),t(Li,[2,457],{74:Di}),{77:[1,1332],143:ce,144:1333,145:Je,152:pe,181:ye,201:1334,302:Fe,419:190,420:ze,424:Ve},t(Li,[2,463]),{74:io,78:[1,1335]},{74:oo,78:[1,1337]},t([74,78,99,112,115,116,123,124,133,136,138,139,140,141,142,154,170,171,179,180,311,312,313,315,316,317,318,319,320,321,322,323,324,325,326,330,331,332,333],ao),t(so,[2,479],{114:625,327:637,99:Et,112:xt,115:wt,116:Tt,123:St,124:gr,133:Ct,136:Ot,138:kt,139:Pt,140:Rt,141:It,142:Nt,154:Mt,170:Lt,171:Dt,179:Ft,180:jt,311:Bt,312:Ut,313:zt,315:Vt,316:Gt,317:Ht,318:qt,319:Wt,320:Xt,321:$t,322:Yt,323:Zt,324:Kt,325:Jt,326:Qt,330:en,331:tn,332:nn,333:rn}),{40:1341,77:oi,79:75,89:l,143:ce,144:979,145:Je,149:ri,152:pe,181:ye,184:99,189:p,201:980,302:Fe,341:1339,342:1340,344:ii,419:190,420:ze,424:Ve},t(Li,[2,461],{74:Di}),t(Z,[2,717],{457:1342,458:1343,459:1344,308:Bi,464:[1,1345]}),t(uo,[2,701]),t(uo,[2,702]),{154:[1,1347],460:[1,1346]},{99:Et,112:xt,114:625,115:wt,116:Tt,123:St,124:gr,133:Ct,136:Ot,138:kt,139:Pt,140:Rt,141:It,142:Nt,154:Mt,170:Lt,171:Dt,179:Ft,180:jt,308:[2,698],311:Bt,312:Ut,313:zt,315:Vt,316:Gt,317:Ht,318:qt,319:Wt,320:Xt,321:$t,322:Yt,323:Zt,324:Kt,325:Jt,326:Qt,327:637,330:en,331:tn,332:nn,333:rn},t(vn,[2,179]),{2:r,3:1348,4:i,5:o},t(Z,[2,574]),t(lo,[2,238],{84:1349,128:[1,1350]}),t(Ui,[2,1046]),{77:[1,1351]},{77:[1,1352]},t(ai,[2,169],{204:1353,215:1355,205:1356,216:1357,221:1360,74:co,206:fo,208:ho,222:po,223:vo,224:go,225:yo,226:mo,227:_o,228:bo,229:Eo}),{2:r,3:219,4:i,5:o,40:711,77:We,79:75,89:l,132:Xe,143:ce,144:212,145:fe,152:pe,156:K,181:ye,184:99,189:p,199:213,200:215,201:214,202:217,203:1369,209:1211,213:$e,214:218,290:J,291:Q,292:ee,293:te,302:Fe,419:190,420:ze,424:Ve},t(xo,[2,177]),{2:r,3:1011,4:i,5:o,110:1370,111:1009,112:si},t(zi,[2,87]),t(ui,[2,147],{114:625,327:637,99:Et,112:xt,115:wt,116:Tt,123:St,124:gr,133:Ct,136:Ot,138:kt,139:Pt,140:Rt,141:It,142:Nt,154:Mt,170:Lt,171:Dt,179:Ft,180:jt,311:Bt,312:Ut,313:zt,315:Vt,316:Gt,317:Ht,318:qt,319:Wt,320:Xt,321:$t,322:Yt,323:Zt,324:Kt,325:Jt,326:Qt,330:en,331:tn,332:nn,333:rn}),{78:[1,1371]},{74:dr,78:[2,1066]},{2:r,3:168,4:i,5:o,56:165,77:ae,78:[2,1059],94:1376,111:149,113:153,120:1372,121:1373,131:se,132:ue,137:le,143:ce,144:161,145:fe,149:he,152:pe,154:de,156:K,158:167,179:ve,180:ge,181:ye,196:151,200:147,201:155,202:156,241:1374,242:[1,1375],254:150,255:146,256:148,257:152,258:154,259:157,260:158,261:159,262:162,263:163,265:me,266:d,270:_e,271:be,273:Ee,280:xe,281:we,282:Te,283:Se,284:Ae,285:Ce,286:Oe,287:ke,288:Pe,290:J,291:Q,292:ee,293:te,294:Re,295:Ie,296:Ne,297:Me,298:Le,299:De,302:Fe,303:je,312:Be,317:Ue,419:190,420:ze,424:Ve},t(hi,[2,98]),t(Vi,[2,1062],{153:1015,179:li,180:ci,181:fi}),{2:r,3:733,4:i,5:o,72:xn,76:wn,77:Tn,78:[1,1377],112:Sn,114:736,115:wt,116:Tt,117:1378,118:An,122:Cn,123:On,124:kn,128:Pn,129:Rn,130:In,131:Nn,132:Mn,133:Ln,134:Dn,135:Fn,136:jn,137:Bn,138:Un,139:zn,140:Vn,141:Gn,142:Hn,143:qn,144:758,145:Wn,146:Xn,148:$n,149:Yn,150:Zn,152:Kn,154:Jn,156:Qn,158:768,160:769,162:er,164:tr,166:nr,168:rr,169:ir,170:or,171:ar,172:sr,173:ur,175:lr,185:cr,187:fr,280:xe,281:we,282:Te,283:Se,284:Ae,285:Ce,286:Oe,287:ke,288:Pe,419:190,420:ze,424:Ve},t(Vi,[2,1063],{153:1015,179:li,180:ci,181:fi}),{78:[1,1379],99:Et,112:xt,114:625,115:wt,116:Tt,123:St,124:gr,133:Ct,136:Ot,138:kt,139:Pt,140:Rt,141:It,142:Nt,154:Mt,170:Lt,171:Dt,179:Ft,180:jt,311:Bt,312:Ut,313:zt,315:Vt,316:Gt,317:Ht,318:qt,319:Wt,320:Xt,321:$t,322:Yt,323:Zt,324:Kt,325:Jt,326:Qt,327:637,330:en,331:tn,332:nn,333:rn},{78:[1,1380],99:Et,112:xt,114:625,115:wt,116:Tt,123:St,124:gr,133:Ct,136:Ot,138:kt,139:Pt,140:Rt,141:It,142:Nt,154:Mt,170:Lt,171:Dt,179:Ft,180:jt,311:Bt,312:Ut,313:zt,315:Vt,316:Gt,317:Ht,318:qt,319:Wt,320:Xt,321:$t,322:Yt,323:Zt,324:Kt,325:Jt,326:Qt,327:637,330:en,331:tn,332:nn,333:rn},{78:[1,1381]},t(hi,[2,120]),{74:Wi,78:[1,1382]},t(hi,[2,122]),{74:dr,78:[1,1383]},{2:r,3:733,4:i,5:o,72:xn,76:wn,77:Tn,78:[1,1384],112:Sn,114:736,115:wt,116:Tt,117:1385,118:An,122:Cn,123:On,124:kn,128:Pn,129:Rn,130:In,131:Nn,132:Mn,133:Ln,134:Dn,135:Fn,136:jn,137:Bn,138:Un,139:zn,140:Vn,141:Gn,142:Hn,143:qn,144:758,145:Wn,146:Xn,148:$n,149:Yn,150:Zn,152:Kn,154:Jn,156:Qn,158:768,160:769,162:er,164:tr,166:nr,168:rr,169:ir,170:or,171:ar,172:sr,173:ur,175:lr,185:cr,187:fr,280:xe,281:we,282:Te,283:Se,284:Ae,285:Ce,286:Oe,287:ke,288:Pe,419:190,420:ze,424:Ve},{2:r,3:733,4:i,5:o,72:xn,76:wn,77:Tn,78:[1,1386],112:Sn,114:736,115:wt,116:Tt,117:1387,118:An,122:Cn,123:On,124:kn,128:Pn,129:Rn,130:In,131:Nn,132:Mn,133:Ln,134:Dn,135:Fn,136:jn,137:Bn,138:Un,139:zn,140:Vn,141:Gn,142:Hn,143:qn,144:758,145:Wn,146:Xn,148:$n,149:Yn,150:Zn,152:Kn,154:Jn,156:Qn,158:768,160:769,162:er,164:tr,166:nr,168:rr,169:ir,170:or,171:ar,172:sr,173:ur,175:lr,185:cr,187:fr,280:xe,281:we,282:Te,283:Se,284:Ae,285:Ce,286:Oe,287:ke,288:Pe,419:190,420:ze,424:Ve},{2:r,3:733,4:i,5:o,72:xn,76:wn,77:Tn,78:[1,1388],112:Sn,114:736,115:wt,116:Tt,117:1389,118:An,122:Cn,123:On,124:kn,128:Pn,129:Rn,130:In,131:Nn,132:Mn,133:Ln,134:Dn,135:Fn,136:jn,137:Bn,138:Un,139:zn,140:Vn,141:Gn,142:Hn,143:qn,144:758,145:Wn,146:Xn,148:$n,149:Yn,150:Zn,152:Kn,154:Jn,156:Qn,158:768,160:769,162:er,164:tr,166:nr,168:rr,169:ir,170:or,171:ar,172:sr,173:ur,175:lr,185:cr,187:fr,280:xe,281:we,282:Te,283:Se,284:Ae,285:Ce,286:Oe,287:ke,288:Pe,419:190,420:ze,424:Ve},{2:r,3:733,4:i,5:o,72:xn,76:wn,77:Tn,78:[1,1390],112:Sn,114:736,115:wt,116:Tt,117:1391,118:An,122:Cn,123:On,124:kn,128:Pn,129:Rn,130:In,131:Nn,132:Mn,133:Ln,134:Dn,135:Fn,136:jn,137:Bn,138:Un,139:zn,140:Vn,141:Gn,142:Hn,143:qn,144:758,145:Wn,146:Xn,148:$n,149:Yn,150:Zn,152:Kn,154:Jn,156:Qn,158:768,160:769,162:er,164:tr,166:nr,168:rr,169:ir,170:or,171:ar,172:sr,173:ur,175:lr,185:cr,187:fr,280:xe,281:we,282:Te,283:Se,284:Ae,285:Ce,286:Oe,287:ke,288:Pe,419:190,420:ze,424:Ve},{74:wo,78:[1,1392]},t(so,[2,143],{419:190,3:733,114:736,144:758,158:768,160:769,117:1394,2:r,4:i,5:o,72:xn,76:wn,77:Tn,112:Sn,115:wt,116:Tt,118:An,122:Cn,123:On,124:kn,128:Pn,129:Rn,130:In,131:Nn,132:Mn,133:Ln,134:Dn,135:Fn,136:jn,137:Bn,138:Un,139:zn,140:Vn,141:Gn,142:Hn,143:qn,145:Wn,146:Xn,148:$n,149:Yn,150:Zn,152:Kn,154:Jn,156:Qn,162:er,164:tr,166:nr,168:rr,169:ir,170:or,171:ar,172:sr,173:ur,175:lr,185:cr,187:fr,280:xe,281:we,282:Te,283:Se,284:Ae,285:Ce,286:Oe,287:ke,288:Pe,420:ze,424:Ve}),t(Gi,Hi,{178:1234,163:1395}),{2:r,3:733,4:i,5:o,72:xn,76:wn,77:Tn,78:[1,1396],112:Sn,114:736,115:wt,116:Tt,117:1397,118:An,122:Cn,123:On,124:kn,128:Pn,129:Rn,130:In,131:Nn,132:Mn,133:Ln,134:Dn,135:Fn,136:jn,137:Bn,138:Un,139:zn,140:Vn,141:Gn,142:Hn,143:qn,144:758,145:Wn,146:Xn,148:$n,149:Yn,150:Zn,152:Kn,154:Jn,156:Qn,158:768,160:769,162:er,164:tr,166:nr,168:rr,169:ir,170:or,171:ar,172:sr,173:ur,175:lr,185:cr,187:fr,280:xe,281:we,282:Te,283:Se,284:Ae,285:Ce,286:Oe,287:ke,288:Pe,419:190,420:ze,424:Ve},{2:r,3:733,4:i,5:o,72:xn,76:wn,77:Tn,78:[1,1398],112:Sn,114:736,115:wt,116:Tt,117:1399,118:An,122:Cn,123:On,124:kn,128:Pn,129:Rn,130:In,131:Nn,132:Mn,133:Ln,134:Dn,135:Fn,136:jn,137:Bn,138:Un,139:zn,140:Vn,141:Gn,142:Hn,143:qn,144:758,145:Wn,146:Xn,148:$n,149:Yn,150:Zn,152:Kn,154:Jn,156:Qn,158:768,160:769,162:er,164:tr,166:nr,168:rr,169:ir,170:or,171:ar,172:sr,173:ur,175:lr,185:cr,187:fr,280:xe,281:we,282:Te,283:Se,284:Ae,285:Ce,286:Oe,287:ke,288:Pe,419:190,420:ze,424:Ve},{74:wo,78:[1,1400]},{74:wo,78:[1,1401]},{74:wo,78:[1,1402]},{74:wo,78:[1,1403]},{78:[1,1404],153:1015,179:li,180:ci,181:fi},{74:yi,78:[1,1405]},{2:r,3:733,4:i,5:o,72:xn,74:[1,1406],76:wn,77:Tn,112:Sn,114:736,115:wt,116:Tt,117:1407,118:An,122:Cn,123:On,124:kn,128:Pn,129:Rn,130:In,131:Nn,132:Mn,133:Ln,134:Dn,135:Fn,136:jn,137:Bn,138:Un,139:zn,140:Vn,141:Gn,142:Hn,143:qn,144:758,145:Wn,146:Xn,148:$n,149:Yn,150:Zn,152:Kn,154:Jn,156:Qn,158:768,160:769,162:er,164:tr,166:nr,168:rr,169:ir,170:or,171:ar,172:sr,173:ur,175:lr,185:cr,187:fr,280:xe,281:we,282:Te,283:Se,284:Ae,285:Ce,286:Oe,287:ke,288:Pe,419:190,420:ze,424:Ve},{2:r,3:1408,4:i,5:o},{2:r,3:1409,4:i,5:o},t(Z,[2,597]),{2:r,3:1410,4:i,5:o},{113:1411,132:ue,296:Ne},{78:[1,1412]},{2:r,3:168,4:i,5:o,56:165,77:ae,94:1413,111:149,113:153,131:se,132:ue,137:le,143:ce,144:161,145:fe,149:he,152:pe,154:de,156:K,158:167,179:ve,180:ge,181:ye,196:151,200:147,201:155,202:156,254:150,255:146,256:148,257:152,258:154,259:157,260:158,261:159,262:162,263:163,265:me,266:d,270:_e,271:be,273:Ee,280:xe,281:we,282:Te,283:Se,284:Ae,285:Ce,286:Oe,287:ke,288:Pe,290:J,291:Q,292:ee,293:te,294:Re,295:Ie,296:Ne,297:Me,298:Le,299:De,302:Fe,303:je,312:Be,317:Ue,419:190,420:ze,424:Ve},{2:r,3:1011,4:i,5:o,111:1065,143:pi,145:di,336:1414,337:1066},{2:r,3:168,4:i,5:o,56:165,77:ae,94:1415,111:149,113:153,131:se,132:ue,137:le,143:ce,144:161,145:fe,149:he,152:pe,154:de,156:K,158:167,179:ve,180:ge,181:ye,196:151,200:147,201:155,202:156,254:150,255:146,256:148,257:152,258:154,259:157,260:158,261:159,262:162,263:163,265:me,266:d,270:_e,271:be,273:Ee,280:xe,281:we,282:Te,283:Se,284:Ae,285:Ce,286:Oe,287:ke,288:Pe,290:J,291:Q,292:ee,293:te,294:Re,295:Ie,296:Ne,297:Me,298:Le,299:De,302:Fe,303:je,312:Be,317:Ue,419:190,420:ze,424:Ve},{124:[1,1416]},t(Z,[2,653],{114:625,327:637,99:Et,112:xt,115:wt,116:Tt,123:St,124:gr,133:Ct,136:Ot,138:kt,139:Pt,140:Rt,141:It,142:Nt,154:Mt,170:Lt,171:Dt,179:Ft,180:jt,311:Bt,312:Ut,313:zt,315:Vt,316:Gt,317:Ht,318:qt,319:Wt,320:Xt,321:$t,322:Yt,323:Zt,324:Kt,325:Jt,326:Qt,330:en,331:tn,332:nn,333:rn}),t($i,[2,658]),{78:[1,1417],99:Et,112:xt,114:625,115:wt,116:Tt,123:St,124:gr,133:Ct,136:Ot,138:kt,139:Pt,140:Rt,141:It,142:Nt,154:Mt,170:Lt,171:Dt,179:Ft,180:jt,311:Bt,312:Ut,313:zt,315:Vt,316:Gt,317:Ht,318:qt,319:Wt,320:Xt,321:$t,322:Yt,323:Zt,324:Kt,325:Jt,326:Qt,327:637,330:en,331:tn,332:nn,333:rn},t(Z,[2,654],{114:625,327:637,99:Et,112:xt,115:wt,116:Tt,123:St,124:gr,133:Ct,136:Ot,138:kt,139:Pt,140:Rt,141:It,142:Nt,154:Mt,170:Lt,171:Dt,179:Ft,180:jt,311:Bt,312:Ut,313:zt,315:Vt,316:Gt,317:Ht,318:qt,319:Wt,320:Xt,321:$t,322:Yt,323:Zt,324:Kt,325:Jt,326:Qt,330:en,331:tn,332:nn,333:rn}),{2:r,3:168,4:i,5:o,56:165,77:ae,94:1418,111:149,113:153,131:se,132:ue,137:le,143:ce,144:161,145:fe,149:he,152:pe,154:de,156:K,158:167,179:ve,180:ge,181:ye,196:151,200:147,201:155,202:156,254:150,255:146,256:148,257:152,258:154,259:157,260:158,261:159,262:162,263:163,265:me,266:d,270:_e,271:be,273:Ee,280:xe,281:we,282:Te,283:Se,284:Ae,285:Ce,286:Oe,287:ke,288:Pe,290:J,291:Q,292:ee,293:te,294:Re,295:Ie,296:Ne,297:Me,298:Le,299:De,302:Fe,303:je,312:Be,317:Ue,419:190,420:ze,424:Ve},t(mi,[2,272]),t(mi,[2,274]),t(mi,[2,276]),t(mi,[2,278]),t(rt,[2,161]),t(Z,[2,569]),{148:[1,1419]},t(Z,[2,570]),t(br,[2,536],{387:878,7:879,272:1420,4:Ur,386:[1,1421],389:zr}),t(Z,[2,571]),t(Z,[2,573]),{74:dr,78:[1,1422]},t(Z,[2,577]),t(an,[2,345]),{74:[1,1423],99:Et,112:xt,114:625,115:wt,116:Tt,123:St,124:gr,133:Ct,136:Ot,138:kt,139:Pt,140:Rt,141:It,142:Nt,154:Mt,170:Lt,171:Dt,179:Ft,180:jt,311:Bt,312:Ut,313:zt,315:Vt,316:Gt,317:Ht,318:qt,319:Wt,320:Xt,321:$t,322:Yt,323:Zt,324:Kt,325:Jt,326:Qt,327:637,330:en,331:tn,332:nn,333:rn},{74:[1,1424],99:Et,112:xt,114:625,115:wt,116:Tt,123:St,124:gr,133:Ct,136:Ot,138:kt,139:Pt,140:Rt,141:It,142:Nt,154:Mt,170:Lt,171:Dt,179:Ft,180:jt,311:Bt,312:Ut,313:zt,315:Vt,316:Gt,317:Ht,318:qt,319:Wt,320:Xt,321:$t,322:Yt,323:Zt,324:Kt,325:Jt,326:Qt,327:637,330:en,331:tn,332:nn,333:rn},{74:[1,1425],99:Et,112:xt,114:625,115:wt,116:Tt,123:St,124:gr,133:Ct,136:Ot,138:kt,139:Pt,140:Rt,141:It,142:Nt,154:Mt,170:Lt,171:Dt,179:Ft,180:jt,311:Bt,312:Ut,313:zt,315:Vt,316:Gt,317:Ht,318:qt,319:Wt,320:Xt,321:$t,322:Yt,323:Zt,324:Kt,325:Jt,326:Qt,327:637,330:en,331:tn,332:nn,333:rn},{74:[1,1426],99:Et,112:xt,114:625,115:wt,116:Tt,123:St,124:gr,133:Ct,136:Ot,138:kt,139:Pt,140:Rt,141:It,142:Nt,154:Mt,170:Lt,171:Dt,179:Ft,180:jt,311:Bt,312:Ut,313:zt,315:Vt,316:Gt,317:Ht,318:qt,319:Wt,320:Xt,321:$t,322:Yt,323:Zt,324:Kt,325:Jt,326:Qt,327:637,330:en,331:tn,332:nn,333:rn},t(Z,[2,581]),{2:r,3:168,4:i,5:o,56:165,77:ae,94:260,111:149,113:153,131:se,132:ue,137:le,143:ce,144:161,145:fe,149:he,151:1427,152:pe,154:de,156:K,158:167,179:ve,180:ge,181:ye,196:151,200:147,201:155,202:156,254:150,255:146,256:148,257:152,258:154,259:157,260:158,261:159,262:162,263:163,265:me,266:d,270:_e,271:be,273:Ee,280:xe,281:we,282:Te,283:Se,284:Ae,285:Ce,286:Oe,287:ke,288:Pe,290:J,291:Q,292:ee,293:te,294:Re,295:Ie,296:Ne,297:Me,298:Le,299:De,302:Fe,303:je,312:Be,317:Ue,419:190,420:ze,424:Ve},{2:r,3:1428,4:i,5:o},t(Z,[2,583]),{2:r,3:168,4:i,5:o,56:165,77:ae,94:1376,111:149,113:153,120:1429,131:se,132:ue,137:le,143:ce,144:161,145:fe,149:he,152:pe,154:de,156:K,158:167,179:ve,180:ge,181:ye,196:151,200:147,201:155,202:156,241:1374,254:150,255:146,256:148,257:152,258:154,259:157,260:158,261:159,262:162,263:163,265:me,266:d,270:_e,271:be,273:Ee,280:xe,281:we,282:Te,283:Se,284:Ae,285:Ce,286:Oe,287:ke,288:Pe,290:J,291:Q,292:ee,293:te,294:Re,295:Ie,296:Ne,297:Me,298:Le,299:De,302:Fe,303:je,312:Be,317:Ue,419:190,420:ze,424:Ve},{77:[1,1430]},{2:r,3:1431,4:i,5:o},{76:_i,139:[2,1149],480:1432,483:1433},t(Ki,[2,1148]),{139:[1,1434]},{139:[2,1152]},t(br,[2,737]),t(Rr,[2,744]),t(Rr,[2,1166]),{2:r,3:1268,4:i,5:o,76:[1,1437],351:1435,358:1436,384:1438},{2:r,3:1011,4:i,5:o,100:1439,111:1440},{40:1441,79:75,89:l,184:99,189:p},{2:r,3:168,4:i,5:o,56:165,77:ae,94:1442,111:149,113:153,131:se,132:ue,137:le,143:ce,144:161,145:fe,149:he,152:pe,154:de,156:K,158:167,179:ve,180:ge,181:ye,196:151,200:147,201:155,202:156,254:150,255:146,256:148,257:152,258:154,259:157,260:158,261:159,262:162,263:163,265:me,266:d,270:_e,271:be,273:Ee,280:xe,281:we,282:Te,283:Se,284:Ae,285:Ce,286:Oe,287:ke,288:Pe,290:J,291:Q,292:ee,293:te,294:Re,295:Ie,296:Ne,297:Me,298:Le,299:De,302:Fe,303:je,312:Be,317:Ue,419:190,420:ze,424:Ve},t(Li,[2,722]),{2:r,3:1011,4:i,5:o,111:1065,143:pi,145:di,147:1443,336:1064,337:1066},{2:r,3:168,4:i,5:o,56:165,77:ae,94:260,111:149,113:153,131:se,132:ue,137:le,143:ce,144:161,145:fe,149:he,151:1444,152:pe,154:de,156:K,158:167,179:ve,180:ge,181:ye,196:151,200:147,201:155,202:156,254:150,255:146,256:148,257:152,258:154,259:157,260:158,261:159,262:162,263:163,265:me,266:d,270:_e,271:be,273:Ee,280:xe,281:we,282:Te,283:Se,284:Ae,285:Ce,286:Oe,287:ke,288:Pe,290:J,291:Q,292:ee,293:te,294:Re,295:Ie,296:Ne,297:Me,298:Le,299:De,302:Fe,303:je,312:Be,317:Ue,419:190,420:ze,424:Ve},t(Li,[2,727]),{2:r,3:244,4:i,5:o,199:1445},{335:Ei,338:xi,339:wi,511:1446},t(yt,[2,691],{114:625,327:637,99:Et,112:xt,115:wt,116:Tt,123:St,124:gr,133:Ct,136:Ot,138:kt,139:Pt,140:Rt,141:It,142:Nt,154:Mt,170:Lt,171:Dt,179:Ft,180:jt,311:Bt,312:Ut,313:zt,315:Vt,316:Gt,317:Ht,318:qt,319:Wt,320:Xt,321:$t,322:Yt,323:Zt,324:Kt,325:Jt,326:Qt,330:en,331:tn,332:nn,333:rn}),{2:r,3:168,4:i,5:o,56:165,77:ae,94:1447,111:149,113:153,131:se,132:ue,137:le,143:ce,144:161,145:fe,149:he,152:pe,154:de,156:K,158:167,179:ve,180:ge,181:ye,196:151,200:147,201:155,202:156,254:150,255:146,256:148,257:152,258:154,259:157,260:158,261:159,262:162,263:163,265:me,266:d,270:_e,271:be,273:Ee,280:xe,281:we,282:Te,283:Se,284:Ae,285:Ce,286:Oe,287:ke,288:Pe,290:J,291:Q,292:ee,293:te,294:Re,295:Ie,296:Ne,297:Me,298:Le,299:De,302:Fe,303:je,312:Be,317:Ue,419:190,420:ze,424:Ve},{74:[1,1448],78:[1,1449]},t(so,[2,543]),t(so,[2,544]),{74:oo,78:[1,1450]},t(yt,[2,565]),t(Ai,[2,380],{114:625,327:637,115:wt,116:Tt,123:St,133:Ct,136:Ot,138:kt,141:It,142:Nt,179:Ft,180:jt,312:Ut,316:Gt,317:Ht,318:qt,319:Wt}),t(Ai,[2,382],{114:625,327:637,115:wt,116:Tt,123:St,133:Ct,136:Ot,138:kt,141:It,142:Nt,179:Ft,180:jt,312:Ut,316:Gt,317:Ht,318:qt,319:Wt}),t(Ke,[2,396]),t(Ke,[2,400]),{78:[1,1451]},{74:dr,78:[1,1452]},t(Ke,[2,422]),t(Ke,[2,424]),{78:[1,1453],99:Et,112:xt,114:625,115:wt,116:Tt,123:St,124:gr,133:Ct,136:Ot,138:kt,139:Pt,140:Rt,141:It,142:Nt,154:Mt,170:Lt,171:Dt,179:Ft,180:jt,311:Bt,312:Ut,313:zt,315:Vt,316:Gt,317:Ht,318:qt,319:Wt,320:Xt,321:$t,322:Yt,323:Zt,324:Kt,325:Jt,326:Qt,327:637,330:en,331:tn,332:nn,333:rn},{78:[1,1454]},{74:dr,78:[1,1455]},t(Ke,[2,427]),t(Ke,[2,327]),{77:[1,1456]},t(Ke,no,{275:1457,276:ro}),t(Ke,no,{275:1458,276:ro}),t(Mi,[2,284]),t(Ke,[2,281]),t(Ke,[2,369]),t(Kr,[2,373],{114:625,327:637,99:Et,112:xt,115:wt,116:Tt,123:St,124:gr,133:Ct,136:Ot,138:kt,139:Pt,140:Rt,141:It,142:Nt,154:Mt,170:Lt,171:Dt,179:Ft,180:jt,311:Bt,312:Ut,313:zt,315:Vt,316:Gt,317:Ht,318:qt,319:Wt,320:Xt,321:$t,322:Yt,323:Zt,324:Kt,325:Jt,326:Qt,330:en,331:tn,332:nn,333:rn}),{74:[1,1460],78:[1,1459]},{74:[1,1462],78:[1,1461],99:Et,112:xt,114:625,115:wt,116:Tt,123:St,124:gr,133:Ct,136:Ot,138:kt,139:Pt,140:Rt,141:It,142:Nt,154:Mt,170:Lt,171:Dt,179:Ft,180:jt,311:Bt,312:Ut,313:zt,315:Vt,316:Gt,317:Ht,318:qt,319:Wt,320:Xt,321:$t,322:Yt,323:Zt,324:Kt,325:Jt,326:Qt,327:637,330:en,331:tn,332:nn,333:rn},{2:r,3:1325,4:i,5:o},{2:r,3:168,4:i,5:o,56:165,77:ae,94:1194,111:149,113:153,131:se,132:ue,137:le,143:ce,144:161,145:fe,149:he,152:pe,154:de,156:K,158:167,179:ve,180:ge,181:ye,196:151,200:147,201:155,202:156,254:150,255:146,256:148,257:152,258:154,259:157,260:158,261:159,262:162,263:163,265:me,266:d,270:_e,271:be,273:Ee,280:xe,281:we,282:Te,283:Se,284:Ae,285:Ce,286:Oe,287:ke,288:Pe,290:J,291:Q,292:ee,293:te,294:Re,295:Ie,296:Ne,297:Me,298:Le,299:De,302:Fe,303:je,312:Be,317:Ue,345:1463,419:190,420:ze,424:Ve},t(ji,[2,477]),t(ji,[2,478]),{40:1466,77:oi,79:75,89:l,143:ce,144:979,145:Je,149:ri,152:pe,181:ye,184:99,189:p,201:980,302:Fe,341:1464,342:1465,344:ii,419:190,420:ze,424:Ve},{2:r,3:1011,4:i,5:o,111:1467},t(ji,[2,473]),{2:r,3:168,4:i,5:o,56:165,77:ae,94:1468,111:149,113:153,131:se,132:ue,137:le,143:ce,144:161,145:fe,149:he,152:pe,154:de,156:K,158:167,179:ve,180:ge,181:ye,196:151,200:147,201:155,202:156,254:150,255:146,256:148,257:152,258:154,259:157,260:158,261:159,262:162,263:163,265:me,266:d,270:_e,271:be,273:Ee,280:xe,281:we,282:Te,283:Se,284:Ae,285:Ce,286:Oe,287:ke,288:Pe,290:J,291:Q,292:ee,293:te,294:Re,295:Ie,296:Ne,297:Me,298:Le,299:De,302:Fe,303:je,312:Be,317:Ue,419:190,420:ze,424:Ve},{77:oi,143:ce,144:979,145:Je,152:pe,181:ye,201:980,302:Fe,342:1469,419:190,420:ze,424:Ve},t(Li,[2,460],{74:Di}),t(Li,[2,467]),t(Z,[2,694]),t(uo,[2,699]),t(uo,[2,700]),{2:r,3:168,4:i,5:o,56:165,77:ae,94:817,111:149,113:153,131:se,132:ue,137:le,143:ce,144:161,145:fe,149:he,152:pe,154:de,156:K,158:167,174:1470,179:ve,180:ge,181:ye,196:151,200:147,201:155,202:156,253:816,254:150,255:146,256:148,257:152,258:154,259:157,260:158,261:159,262:162,263:163,265:me,266:d,270:_e,271:be,273:Ee,280:xe,281:we,282:Te,283:Se,284:Ae,285:Ce,286:Oe,287:ke,288:Pe,290:J,291:Q,292:ee,293:te,294:Re,295:Ie,296:Ne,297:Me,298:Le,299:De,302:Fe,303:je,312:Be,317:Ue,419:190,420:ze,424:Ve},{170:[1,1472],309:[1,1471]},{460:[1,1473]},t(vn,[2,180]),t(To,[2,240],{85:1474,232:[1,1475]}),{2:r,3:168,4:i,5:o,56:165,77:ae,94:1476,111:149,113:153,131:se,132:ue,137:le,143:ce,144:161,145:fe,149:he,152:pe,154:de,156:K,158:167,179:ve,180:ge,181:ye,196:151,200:147,201:155,202:156,254:150,255:146,256:148,257:152,258:154,259:157,260:158,261:159,262:162,263:163,265:me,266:d,270:_e,271:be,273:Ee,280:xe,281:we,282:Te,283:Se,284:Ae,285:Ce,286:Oe,287:ke,288:Pe,290:J,291:Q,292:ee,293:te,294:Re,295:Ie,296:Ne,297:Me,298:Le,299:De,302:Fe,303:je,312:Be,317:Ue,419:190,420:ze,424:Ve},{2:r,3:168,4:i,5:o,56:165,77:ae,94:1477,111:149,113:153,131:se,132:ue,137:le,143:ce,144:161,145:fe,149:he,152:pe,154:de,156:K,158:167,179:ve,180:ge,181:ye,196:151,200:147,201:155,202:156,254:150,255:146,256:148,257:152,258:154,259:157,260:158,261:159,262:162,263:163,265:me,266:d,270:_e,271:be,273:Ee,280:xe,281:we,282:Te,283:Se,284:Ae,285:Ce,286:Oe,287:ke,288:Pe,290:J,291:Q,292:ee,293:te,294:Re,295:Ie,296:Ne,297:Me,298:Le,299:De,302:Fe,303:je,312:Be,317:Ue,419:190,420:ze,424:Ve},{2:r,3:1478,4:i,5:o},t(ai,[2,170],{216:1357,221:1360,215:1479,205:1480,206:fo,208:ho,222:po,223:vo,224:go,225:yo,226:mo,227:_o,228:bo,229:Eo}),{2:r,3:219,4:i,5:o,77:We,132:Xe,143:ce,144:212,145:fe,152:pe,156:K,181:ye,199:213,200:215,201:214,202:217,209:1481,213:$e,214:218,290:J,291:Q,292:ee,293:te,302:Fe,419:190,420:ze,424:Ve},t(So,[2,205]),t(So,[2,206]),{2:r,3:219,4:i,5:o,77:[1,1486],143:ce,144:1484,145:fe,152:pe,156:K,181:ye,199:1483,200:1487,201:1485,202:1488,217:1482,290:J,291:Q,292:ee,293:te,302:Fe,419:190,420:ze,424:Ve},{207:[1,1489],223:Ao},{207:[1,1491],223:Co},t(Oo,[2,222]),{206:[1,1495],208:[1,1494],221:1493,223:vo,224:go,225:yo,226:mo,227:_o,228:bo,229:Eo},t(Oo,[2,224]),{223:[1,1496]},{208:[1,1498],223:[1,1497]},{208:[1,1500],223:[1,1499]},{208:[1,1501]},{223:[1,1502]},{223:[1,1503]},{74:co,204:1504,205:1356,206:fo,208:ho,215:1355,216:1357,221:1360,222:po,223:vo,224:go,225:yo,226:mo,227:_o,228:bo,229:Eo},t(zi,[2,84]),t(hi,[2,100]),{74:ko,78:[1,1505]},{78:[1,1507]},t(Po,[2,261]),{78:[2,1060]},t(Po,[2,263],{114:625,327:637,99:Et,112:xt,115:wt,116:Tt,123:St,124:gr,133:Ct,136:Ot,138:kt,139:Pt,140:Rt,141:It,142:Nt,154:Mt,170:Lt,171:Dt,179:Ft,180:jt,242:[1,1508],243:[1,1509],311:Bt,312:Ut,313:zt,315:Vt,316:Gt,317:Ht,318:qt,319:Wt,320:Xt,321:$t,322:Yt,323:Zt,324:Kt,325:Jt,326:Qt,330:en,331:tn,332:nn,333:rn}),t(hi,[2,99]),t(Vi,[2,1064],{153:1015,179:li,180:ci,181:fi}),t(hi,[2,101]),t(hi,[2,102]),t(hi,[2,103]),t(hi,[2,121]),t(hi,[2,124]),t(hi,[2,127]),t(Vi,[2,1068],{153:1015,179:li,180:ci,181:fi}),t(hi,[2,128]),t(Vi,[2,1070],{153:1015,179:li,180:ci,181:fi}),t(hi,[2,129]),t(Vi,[2,1072],{153:1015,179:li,180:ci,181:fi}),t(hi,[2,130]),t(Vi,[2,1076],{153:1015,179:li,180:ci,181:fi}),t(hi,[2,131]),t(Gi,[2,1083],{177:1510}),t(Gi,[2,1086],{153:1015,179:li,180:ci,181:fi}),{74:wo,78:[1,1511]},t(hi,[2,133]),t(Vi,[2,1078],{153:1015,179:li,180:ci,181:fi}),t(hi,[2,134]),t(Vi,[2,1080],{153:1015,179:li,180:ci,181:fi}),t(hi,[2,135]),t(hi,[2,136]),t(hi,[2,137]),t(hi,[2,138]),t(hi,[2,139]),t(hi,[2,140]),{2:r,3:168,4:i,5:o,56:165,77:ae,94:260,111:149,113:153,131:se,132:ue,137:le,143:ce,144:161,145:fe,149:he,151:1512,152:pe,154:de,156:K,158:167,179:ve,180:ge,181:ye,196:151,200:147,201:155,202:156,254:150,255:146,256:148,257:152,258:154,259:157,260:158,261:159,262:162,263:163,265:me,266:d,270:_e,271:be,273:Ee,280:xe,281:we,282:Te,283:Se,284:Ae,285:Ce,286:Oe,287:ke,288:Pe,290:J,291:Q,292:ee,293:te,294:Re,295:Ie,296:Ne,297:Me,298:Le,299:De,302:Fe,303:je,312:Be,317:Ue,419:190,420:ze,424:Ve},t(qi,[2,1082],{153:1015,179:li,180:ci,181:fi}),t(Z,[2,607]),t(Z,[2,603]),t(Z,[2,605]),t(Z,[2,601]),t(hr,[2,71]),t(Z,[2,449],{114:625,327:637,99:Et,112:xt,115:wt,116:Tt,123:St,124:gr,133:Ct,136:Ot,138:kt,139:Pt,140:Rt,141:It,142:Nt,154:Mt,170:Lt,171:Dt,179:Ft,180:jt,311:Bt,312:Ut,313:zt,315:Vt,316:Gt,317:Ht,318:qt,319:Wt,320:Xt,321:$t,322:Yt,323:Zt,324:Kt,325:Jt,326:Qt,330:en,331:tn,332:nn,333:rn}),t(Xi,[2,452]),t(Xi,[2,453],{114:625,327:637,99:Et,112:xt,115:wt,116:Tt,123:St,124:gr,133:Ct,136:Ot,138:kt,139:Pt,140:Rt,141:It,142:Nt,154:Mt,170:Lt,171:Dt,179:Ft,180:jt,311:Bt,312:Ut,313:zt,315:Vt,316:Gt,317:Ht,318:qt,319:Wt,320:Xt,321:$t,322:Yt,323:Zt,324:Kt,325:Jt,326:Qt,330:en,331:tn,332:nn,333:rn}),{2:r,3:168,4:i,5:o,56:165,77:ae,94:1513,111:149,113:153,131:se,132:ue,137:le,143:ce,144:161,145:fe,149:he,152:pe,154:de,156:K,158:167,179:ve,180:ge,181:ye,196:151,200:147,201:155,202:156,254:150,255:146,256:148,257:152,258:154,259:157,260:158,261:159,262:162,263:163,265:me,266:d,270:_e,271:be,273:Ee,280:xe,281:we,282:Te,283:Se,284:Ae,285:Ce,286:Oe,287:ke,288:Pe,290:J,291:Q,292:ee,293:te,294:Re,295:Ie,296:Ne,297:Me,298:Le,299:De,302:Fe,303:je,312:Be,317:Ue,419:190,420:ze,424:Ve},t($i,[2,662]),t(Z,[2,655],{114:625,327:637,99:Et,112:xt,115:wt,116:Tt,123:St,124:gr,133:Ct,136:Ot,138:kt,139:Pt,140:Rt,141:It,142:Nt,154:Mt,170:Lt,171:Dt,179:Ft,180:jt,311:Bt,312:Ut,313:zt,315:Vt,316:Gt,317:Ht,318:qt,319:Wt,320:Xt,321:$t,322:Yt,323:Zt,324:Kt,325:Jt,326:Qt,330:en,331:tn,332:nn,333:rn}),{2:r,3:1514,4:i,5:o},t(br,[2,545],{385:1515,391:1516,392:1517,366:1525,154:Ro,187:Io,230:No,297:Mo,343:Lo,356:Do,368:Fo,369:jo,373:Bo,374:Uo}),t(br,[2,535]),t(Z,[2,576],{76:[1,1529]}),{2:r,3:168,4:i,5:o,56:165,77:ae,94:1530,111:149,113:153,131:se,132:ue,137:le,143:ce,144:161,145:fe,149:he,152:pe,154:de,156:K,158:167,179:ve,180:ge,181:ye,196:151,200:147,201:155,202:156,254:150,255:146,256:148,257:152,258:154,259:157,260:158,261:159,262:162,263:163,265:me,266:d,270:_e,271:be,273:Ee,280:xe,281:we,282:Te,283:Se,284:Ae,285:Ce,286:Oe,287:ke,288:Pe,290:J,291:Q,292:ee,293:te,294:Re,295:Ie,296:Ne,297:Me,298:Le,299:De,302:Fe,303:je,312:Be,317:Ue,419:190,420:ze,424:Ve},{2:r,3:168,4:i,5:o,56:165,77:ae,94:1531,111:149,113:153,131:se,132:ue,137:le,143:ce,144:161,145:fe,149:he,152:pe,154:de,156:K,158:167,179:ve,180:ge,181:ye,196:151,200:147,201:155,202:156,254:150,255:146,256:148,257:152,258:154,259:157,260:158,261:159,262:162,263:163,265:me,266:d,270:_e,271:be,273:Ee,280:xe,281:we,282:Te,283:Se,284:Ae,285:Ce,286:Oe,287:ke,288:Pe,290:J,291:Q,292:ee,293:te,294:Re,295:Ie,296:Ne,297:Me,298:Le,299:De,302:Fe,303:je,312:Be,317:Ue,419:190,420:ze,424:Ve},{2:r,3:168,4:i,5:o,56:165,77:ae,94:1532,111:149,113:153,131:se,132:ue,137:le,143:ce,144:161,145:fe,149:he,152:pe,154:de,156:K,158:167,179:ve,180:ge,181:ye,196:151,200:147,201:155,202:156,254:150,255:146,256:148,257:152,258:154,259:157,260:158,261:159,262:162,263:163,265:me,266:d,270:_e,271:be,273:Ee,280:xe,281:we,282:Te,283:Se,284:Ae,285:Ce,286:Oe,287:ke,288:Pe,290:J,291:Q,292:ee,293:te,294:Re,295:Ie,296:Ne,297:Me,298:Le,299:De,302:Fe,303:je,312:Be,317:Ue,419:190,420:ze,424:Ve},{2:r,3:168,4:i,5:o,56:165,77:ae,94:1533,111:149,113:153,131:se,132:ue,137:le,143:ce,144:161,145:fe,149:he,152:pe,154:de,156:K,158:167,179:ve,180:ge,181:ye,196:151,200:147,201:155,202:156,254:150,255:146,256:148,257:152,258:154,259:157,260:158,261:159,262:162,263:163,265:me,266:d,270:_e,271:be,273:Ee,280:xe,281:we,282:Te,283:Se,284:Ae,285:Ce,286:Oe,287:ke,288:Pe,290:J,291:Q,292:ee,293:te,294:Re,295:Ie,296:Ne,297:Me,298:Le,299:De,302:Fe,303:je,312:Be,317:Ue,419:190,420:ze,424:Ve},{74:dr,78:[1,1534]},t(Z,[2,585]),{74:ko,78:[1,1535]},{2:r,3:168,4:i,5:o,56:165,77:ae,94:1376,111:149,113:153,120:1536,131:se,132:ue,137:le,143:ce,144:161,145:fe,149:he,152:pe,154:de,156:K,158:167,179:ve,180:ge,181:ye,196:151,200:147,201:155,202:156,241:1374,254:150,255:146,256:148,257:152,258:154,259:157,260:158,261:159,262:162,263:163,265:me,266:d,270:_e,271:be,273:Ee,280:xe,281:we,282:Te,283:Se,284:Ae,285:Ce,286:Oe,287:ke,288:Pe,290:J,291:Q,292:ee,293:te,294:Re,295:Ie,296:Ne,297:Me,298:Le,299:De,302:Fe,303:je,312:Be,317:Ue,419:190,420:ze,424:Ve},t([10,74,78,139,306,310,602,764],[2,741]),{139:[1,1537]},{139:[2,1150]},{2:r,3:1122,4:i,5:o,132:pt,137:dt,143:tt,145:nt,152:vt,431:585,475:1124,478:1538,482:582,493:579,497:581},{78:[1,1539]},{74:[1,1540],78:[2,506]},{40:1541,79:75,89:l,184:99,189:p},t(so,[2,532]),{74:io,78:[1,1542]},t(xo,ao),t(Z,[2,1133],{412:1543,413:1544,72:zo}),t(Li,Ji,{79:75,184:99,114:625,327:637,40:1299,468:1546,89:l,99:Et,112:xt,115:wt,116:Tt,123:St,124:gr,133:Ct,136:Ot,138:kt,139:Pt,140:Rt,141:It,142:Nt,146:Qi,154:Mt,170:Lt,171:Dt,179:Ft,180:jt,189:p,311:Bt,312:Ut,313:zt,315:Vt,316:Gt,317:Ht,318:qt,319:Wt,320:Xt,321:$t,322:Yt,323:Zt,324:Kt,325:Jt,326:Qt,330:en,331:tn,332:nn,333:rn,470:eo}),t(Li,[2,725],{74:Wi}),t(Li,[2,726],{74:dr}),t([10,53,72,89,124,146,156,189,266,267,290,306,310,335,338,339,396,400,401,404,406,408,409,417,418,434,436,437,439,440,441,442,443,447,448,451,452,505,507,508,517,602,764],[2,1181],{512:1547,3:1548,2:r,4:i,5:o,76:[1,1549]}),t(Vo,[2,1183],{513:1550,76:[1,1551]}),t(yt,[2,692],{114:625,327:637,99:Et,112:xt,115:wt,116:Tt,123:St,124:gr,133:Ct,136:Ot,138:kt,139:Pt,140:Rt,141:It,142:Nt,154:Mt,170:Lt,171:Dt,179:Ft,180:jt,311:Bt,312:Ut,313:zt,315:Vt,316:Gt,317:Ht,318:qt,319:Wt,320:Xt,321:$t,322:Yt,323:Zt,324:Kt,325:Jt,326:Qt,330:en,331:tn,332:nn,333:rn}),{131:[1,1552]},t(Ti,[2,538]),t(Ti,[2,540]),t(Ke,[2,412]),t(Ke,[2,413]),t(Ke,[2,439]),t(Ke,[2,423]),t(Ke,[2,425]),{118:Go,277:1553,278:1554,279:[1,1555]},t(Ke,[2,328]),t(Ke,[2,329]),t(Ke,[2,316]),{131:[1,1557]},t(Ke,[2,318]),{131:[1,1558]},{74:oo,78:[1,1559]},{77:oi,143:ce,144:979,145:Je,152:pe,181:ye,201:980,302:Fe,342:1560,419:190,420:ze,424:Ve},t(Li,[2,465],{74:Di}),t(Li,[2,468]),t(xo,[2,488]),t(so,[2,480],{114:625,327:637,99:Et,112:xt,115:wt,116:Tt,123:St,124:gr,133:Ct,136:Ot,138:kt,139:Pt,140:Rt,141:It,142:Nt,154:Mt,170:Lt,171:Dt,179:Ft,180:jt,311:Bt,312:Ut,313:zt,315:Vt,316:Gt,317:Ht,318:qt,319:Wt,320:Xt,321:$t,322:Yt,323:Zt,324:Kt,325:Jt,326:Qt,330:en,331:tn,332:nn,333:rn}),t(Li,[2,459],{74:Di}),t(Z,[2,718],{74:yi,198:[1,1561]}),{335:Ho,338:qo,461:1562},{2:r,3:168,4:i,5:o,56:165,77:ae,94:1565,111:149,113:153,131:se,132:ue,137:le,143:ce,144:161,145:fe,149:he,152:pe,154:de,156:K,158:167,179:ve,180:ge,181:ye,196:151,200:147,201:155,202:156,254:150,255:146,256:148,257:152,258:154,259:157,260:158,261:159,262:162,263:163,265:me,266:d,270:_e,271:be,273:Ee,280:xe,281:we,282:Te,283:Se,284:Ae,285:Ce,286:Oe,287:ke,288:Pe,290:J,291:Q,292:ee,293:te,294:Re,295:Ie,296:Ne,297:Me,298:Le,299:De,302:Fe,303:je,312:Be,317:Ue,419:190,420:ze,424:Ve},{119:[1,1567],170:[1,1568],309:[1,1566]},t(Wo,[2,259],{86:1569,118:[1,1570]}),{119:[1,1571]},t(lo,[2,239],{114:625,327:637,99:Et,112:xt,115:wt,116:Tt,123:St,124:gr,133:Ct,136:Ot,138:kt,139:Pt,140:Rt,141:It,142:Nt,154:Mt,170:Lt,171:Dt,179:Ft,180:jt,311:Bt,312:Ut,313:zt,315:Vt,316:Gt,317:Ht,318:qt,319:Wt,320:Xt,321:$t,322:Yt,323:Zt,324:Kt,325:Jt,326:Qt,330:en,331:tn,332:nn,333:rn}),{95:[1,1572],99:Et,112:xt,114:625,115:wt,116:Tt,123:St,124:gr,133:Ct,136:Ot,138:kt,139:Pt,140:Rt,141:It,142:Nt,154:Mt,170:Lt,171:Dt,179:Ft,180:jt,311:Bt,312:Ut,313:zt,315:Vt,316:Gt,317:Ht,318:qt,319:Wt,320:Xt,321:$t,322:Yt,323:Zt,324:Kt,325:Jt,326:Qt,327:637,330:en,331:tn,332:nn,333:rn},{95:[1,1573]},t(So,[2,203]),t(So,[2,204]),t(xo,[2,178]),t(So,[2,237],{218:1574,230:[1,1575],231:[1,1576]}),t(Xo,[2,208],{3:1577,2:r,4:i,5:o,76:[1,1578]}),t($o,[2,1095],{219:1579,76:[1,1580]}),{2:r,3:1581,4:i,5:o,76:[1,1582]},{40:1583,79:75,89:l,184:99,189:p},t(Xo,[2,216],{3:1584,2:r,4:i,5:o,76:[1,1585]}),t(Xo,[2,219],{3:1586,2:r,4:i,5:o,76:[1,1587]}),{77:[1,1588]},t(Oo,[2,234]),{77:[1,1589]},t(Oo,[2,230]),t(Oo,[2,223]),{223:Co},{223:Ao},t(Oo,[2,225]),t(Oo,[2,226]),{223:[1,1590]},t(Oo,[2,228]),{223:[1,1591]},{223:[1,1592]},t(Oo,[2,232]),t(Oo,[2,233]),{78:[1,1593],205:1480,206:fo,208:ho,215:1479,216:1357,221:1360,222:po,223:vo,224:go,225:yo,226:mo,227:_o,228:bo,229:Eo},t(hi,[2,91]),{2:r,3:168,4:i,5:o,56:165,77:ae,94:1376,111:149,113:153,131:se,132:ue,137:le,143:ce,144:161,145:fe,149:he,152:pe,154:de,156:K,158:167,179:ve,180:ge,181:ye,196:151,200:147,201:155,202:156,241:1594,254:150,255:146,256:148,257:152,258:154,259:157,260:158,261:159,262:162,263:163,265:me,266:d,270:_e,271:be,273:Ee,280:xe,281:we,282:Te,283:Se,284:Ae,285:Ce,286:Oe,287:ke,288:Pe,290:J,291:Q,292:ee,293:te,294:Re,295:Ie,296:Ne,297:Me,298:Le,299:De,302:Fe,303:je,312:Be,317:Ue,419:190,420:ze,424:Ve},t(hi,[2,92]),t(Po,[2,264]),{244:[1,1595]},t(so,[2,142],{419:190,3:733,114:736,144:758,158:768,160:769,117:1596,2:r,4:i,5:o,72:xn,76:wn,77:Tn,112:Sn,115:wt,116:Tt,118:An,122:Cn,123:On,124:kn,128:Pn,129:Rn,130:In,131:Nn,132:Mn,133:Ln,134:Dn,135:Fn,136:jn,137:Bn,138:Un,139:zn,140:Vn,141:Gn,142:Hn,143:qn,145:Wn,146:Xn,148:$n,149:Yn,150:Zn,152:Kn,154:Jn,156:Qn,162:er,164:tr,166:nr,168:rr,169:ir,170:or,171:ar,172:sr,173:ur,175:lr,185:cr,187:fr,280:xe,281:we,282:Te,283:Se,284:Ae,285:Ce,286:Oe,287:ke,288:Pe,420:ze,424:Ve}),t(hi,[2,132]),{74:dr,78:[1,1597]},t(Xi,[2,454],{114:625,327:637,99:Et,112:xt,115:wt,116:Tt,123:St,124:gr,133:Ct,136:Ot,138:kt,139:Pt,140:Rt,141:It,142:Nt,154:Mt,170:Lt,171:Dt,179:Ft,180:jt,311:Bt,312:Ut,313:zt,315:Vt,316:Gt,317:Ht,318:qt,319:Wt,320:Xt,321:$t,322:Yt,323:Zt,324:Kt,325:Jt,326:Qt,330:en,331:tn,332:nn,333:rn}),t(Z,[2,572]),t(br,[2,534]),t(br,[2,546],{366:1525,392:1598,154:Ro,187:Io,230:No,297:Mo,343:Lo,356:Do,368:Fo,369:jo,373:Bo,374:Uo}),t(pr,[2,548]),{370:[1,1599]},{370:[1,1600]},{2:r,3:244,4:i,5:o,199:1601},t(pr,[2,554],{77:[1,1602]}),{2:r,3:114,4:i,5:o,77:[1,1604],113:251,131:se,132:ue,143:ce,152:pe,156:K,181:ye,196:250,200:1605,201:254,257:252,258:253,265:Qe,274:1603,290:J,291:Q,292:ee,293:te,294:Re,295:Ie,296:Ne,297:Me,302:Fe},t(pr,[2,558]),{297:[1,1606]},t(pr,[2,560]),t(pr,[2,561]),{335:[1,1607]},{77:[1,1608]},{2:r,3:1609,4:i,5:o},{78:[1,1610],99:Et,112:xt,114:625,115:wt,116:Tt,123:St,124:gr,133:Ct,136:Ot,138:kt,139:Pt,140:Rt,141:It,142:Nt,154:Mt,170:Lt,171:Dt,179:Ft,180:jt,311:Bt,312:Ut,313:zt,315:Vt,316:Gt,317:Ht,318:qt,319:Wt,320:Xt,321:$t,322:Yt,323:Zt,324:Kt,325:Jt,326:Qt,327:637,330:en,331:tn,332:nn,333:rn},{78:[1,1611],99:Et,112:xt,114:625,115:wt,116:Tt,123:St,124:gr,133:Ct,136:Ot,138:kt,139:Pt,140:Rt,141:It,142:Nt,154:Mt,170:Lt,171:Dt,179:Ft,180:jt,311:Bt,312:Ut,313:zt,315:Vt,316:Gt,317:Ht,318:qt,319:Wt,320:Xt,321:$t,322:Yt,323:Zt,324:Kt,325:Jt,326:Qt,327:637,330:en,331:tn,332:nn,333:rn},{78:[1,1612],99:Et,112:xt,114:625,115:wt,116:Tt,123:St,124:gr,133:Ct,136:Ot,138:kt,139:Pt,140:Rt,141:It,142:Nt,154:Mt,170:Lt,171:Dt,179:Ft,180:jt,311:Bt,312:Ut,313:zt,315:Vt,316:Gt,317:Ht,318:qt,319:Wt,320:Xt,321:$t,322:Yt,323:Zt,324:Kt,325:Jt,326:Qt,327:637,330:en,331:tn,332:nn,333:rn},{78:[1,1613],99:Et,112:xt,114:625,115:wt,116:Tt,123:St,124:gr,133:Ct,136:Ot,138:kt,139:Pt,140:Rt,141:It,142:Nt,154:Mt,170:Lt,171:Dt,179:Ft,180:jt,311:Bt,312:Ut,313:zt,315:Vt,316:Gt,317:Ht,318:qt,319:Wt,320:Xt,321:$t,322:Yt,323:Zt,324:Kt,325:Jt,326:Qt,327:637,330:en,331:tn,332:nn,333:rn},t(Z,Yi,{407:1614,76:Zi}),t(Z,[2,591]),{74:ko,78:[1,1615]},{2:r,3:1122,4:i,5:o,132:pt,137:dt,143:tt,145:nt,152:vt,431:585,475:1124,478:1616,482:582,493:579,497:581},t(br,[2,735]),t(Z,[2,493],{352:1617,354:1618,355:1619,4:Yo,243:Zo,343:Ko,356:Jo}),t(Qo,ea,{3:1268,359:1624,384:1625,360:1626,361:1627,2:r,4:i,5:o,367:ta}),{78:[2,507]},{76:[1,1629]},t(Z,[2,609]),t(Z,[2,1134]),{368:[1,1631],414:[1,1630]},t(Li,[2,728]),t(Z,n,{17:5,18:7,19:8,20:9,21:10,22:11,23:12,24:13,25:14,26:15,27:16,28:17,29:18,30:19,31:20,32:21,33:22,34:23,35:24,36:25,37:26,38:27,39:28,40:29,41:30,42:31,43:32,44:33,45:34,46:35,47:36,48:37,49:38,50:39,51:40,52:41,54:43,55:44,56:45,57:46,58:47,59:48,60:49,61:50,62:51,63:52,64:53,65:54,66:55,67:56,68:57,69:58,70:59,71:60,79:75,504:95,184:99,3:100,12:1632,2:r,4:i,5:o,53:s,72:u,89:l,124:c,146:f,156:h,189:p,266:d,267:v,290:g,335:y,338:m,339:_,396:b,400:E,401:x,404:w,406:T,408:S,409:A,417:C,418:k,434:P,436:R,437:I,439:N,440:L,441:D,442:F,443:j,447:B,448:U,451:z,452:V,505:G,507:H,508:q,517:W}),t(Z,[2,762]),t(Vo,[2,1182]),t(Z,n,{17:5,18:7,19:8,20:9,21:10,22:11,23:12,24:13,25:14,26:15,27:16,28:17,29:18,30:19,31:20,32:21,33:22,34:23,35:24,36:25,37:26,38:27,39:28,40:29,41:30,42:31,43:32,44:33,45:34,46:35,47:36,48:37,49:38,50:39,51:40,52:41,54:43,55:44,56:45,57:46,58:47,59:48,60:49,61:50,62:51,63:52,64:53,65:54,66:55,67:56,68:57,69:58,70:59,71:60,79:75,504:95,184:99,3:100,12:1633,2:r,4:i,5:o,53:s,72:u,89:l,124:c,146:f,156:h,189:p,266:d,267:v,290:g,335:y,338:m,339:_,396:b,400:E,401:x,404:w,406:T,408:S,409:A,417:C,418:k,434:P,436:R,437:I,439:N,440:L,441:D,442:F,443:j,447:B,448:U,451:z,452:V,505:G,507:H,508:q,517:W}),t(Vo,[2,1184]),{78:[1,1634]},{78:[1,1635],118:Go,278:1636},{78:[1,1637]},{119:[1,1638]},{119:[1,1639]},{78:[1,1640]},{78:[1,1641]},t(ji,[2,476]),t(Li,[2,464],{74:Di}),{2:r,3:244,4:i,5:o,143:tt,145:nt,199:1643,431:1642},t(uo,[2,703]),t(uo,[2,705]),{146:[1,1644]},{99:Et,112:xt,114:625,115:wt,116:Tt,123:St,124:gr,133:Ct,136:Ot,138:kt,139:Pt,140:Rt,141:It,142:Nt,154:Mt,170:Lt,171:Dt,179:Ft,180:jt,309:[1,1645],311:Bt,312:Ut,313:zt,315:Vt,316:Gt,317:Ht,318:qt,319:Wt,320:Xt,321:$t,322:Yt,323:Zt,324:Kt,325:Jt,326:Qt,327:637,330:en,331:tn,332:nn,333:rn},{339:na,462:1646},{417:[1,1649],463:[1,1648]},{2:r,3:168,4:i,5:o,56:165,77:ae,94:1650,111:149,113:153,131:se,132:ue,137:le,143:ce,144:161,145:fe,149:he,152:pe,154:de,156:K,158:167,179:ve,180:ge,181:ye,196:151,200:147,201:155,202:156,254:150,255:146,256:148,257:152,258:154,259:157,260:158,261:159,262:162,263:163,265:me,266:d,270:_e,271:be,273:Ee,280:xe,281:we,282:Te,283:Se,284:Ae,285:Ce,286:Oe,287:ke,288:Pe,290:J,291:Q,292:ee,293:te,294:Re,295:Ie,296:Ne,297:Me,298:Le,299:De,302:Fe,303:je,312:Be,317:Ue,419:190,420:ze,424:Ve},t(ra,[2,267],{87:1651,245:[1,1652],247:[1,1653]}),{119:[1,1654]},{2:r,3:168,4:i,5:o,56:165,77:ae,94:1660,111:149,113:153,131:se,132:ue,137:le,143:ce,144:161,145:fe,149:he,152:pe,154:de,156:K,158:167,179:ve,180:ge,181:ye,196:151,200:147,201:155,202:156,233:1655,235:1656,236:ia,237:oa,238:aa,254:150,255:146,256:148,257:152,258:154,259:157,260:158,261:159,262:162,263:163,265:me,266:d,270:_e,271:be,273:Ee,280:xe,281:we,282:Te,283:Se,284:Ae,285:Ce,286:Oe,287:ke,288:Pe,290:J,291:Q,292:ee,293:te,294:Re,295:Ie,296:Ne,297:Me,298:Le,299:De,302:Fe,303:je,312:Be,317:Ue,419:190,420:ze,424:Ve},{2:r,3:1661,4:i,5:o},{2:r,3:1662,4:i,5:o},t(So,[2,207]),{2:r,3:168,4:i,5:o,56:165,77:ae,94:1663,111:149,113:153,131:se,132:ue,137:le,143:ce,144:161,145:fe,149:he,152:pe,154:de,156:K,158:167,179:ve,180:ge,181:ye,196:151,200:147,201:155,202:156,254:150,255:146,256:148,257:152,258:154,259:157,260:158,261:159,262:162,263:163,265:me,266:d,270:_e,271:be,273:Ee,280:xe,281:we,282:Te,283:Se,284:Ae,285:Ce,286:Oe,287:ke,288:Pe,290:J,291:Q,292:ee,293:te,294:Re,295:Ie,296:Ne,297:Me,298:Le,299:De,302:Fe,303:je,312:Be,317:Ue,419:190,420:ze,424:Ve},{2:r,3:1011,4:i,5:o,100:1664,111:1440},t(Xo,[2,209]),{2:r,3:1665,4:i,5:o},t(Xo,[2,1097],{220:1666,3:1667,2:r,4:i,5:o}),t($o,[2,1096]),t(Xo,[2,212]),{2:r,3:1668,4:i,5:o},{78:[1,1669]},t(Xo,[2,217]),{2:r,3:1670,4:i,5:o},t(Xo,[2,220]),{2:r,3:1671,4:i,5:o},{40:1672,79:75,89:l,184:99,189:p},{40:1673,79:75,89:l,184:99,189:p},t(Oo,[2,227]),t(Oo,[2,229]),t(Oo,[2,231]),t(ai,[2,171]),t(Po,[2,262]),t(Po,[2,265],{242:[1,1674]}),t(Gi,[2,1084],{153:1015,179:li,180:ci,181:fi}),t(hi,[2,141]),t(pr,[2,547]),t(pr,[2,550]),{374:[1,1675]},t(pr,[2,1127],{395:1676,393:1677,77:sa}),{131:se,196:1679},t(pr,[2,555]),{2:r,3:168,4:i,5:o,56:165,77:ae,94:1680,111:149,113:153,131:se,132:ue,137:le,143:ce,144:161,145:fe,149:he,152:pe,154:de,156:K,158:167,179:ve,180:ge,181:ye,196:151,200:147,201:155,202:156,254:150,255:146,256:148,257:152,258:154,259:157,260:158,261:159,262:162,263:163,265:me,266:d,270:_e,271:be,273:Ee,280:xe,281:we,282:Te,283:Se,284:Ae,285:Ce,286:Oe,287:ke,288:Pe,290:J,291:Q,292:ee,293:te,294:Re,295:Ie,296:Ne,297:Me,298:Le,299:De,302:Fe,303:je,312:Be,317:Ue,419:190,420:ze,424:Ve},t(pr,[2,557]),t(pr,[2,559]),{2:r,3:114,4:i,5:o,77:[1,1682],113:251,131:se,132:ue,143:ce,152:pe,156:K,181:ye,196:250,200:255,201:254,257:252,258:253,265:Qe,274:1681,290:J,291:Q,292:ee,293:te,294:Re,295:Ie,296:Ne,297:Me,302:Fe},{2:r,3:168,4:i,5:o,56:165,77:ae,94:1683,111:149,113:153,131:se,132:ue,137:le,143:ce,144:161,145:fe,149:he,152:pe,154:de,156:K,158:167,179:ve,180:ge,181:ye,196:151,200:147,201:155,202:156,254:150,255:146,256:148,257:152,258:154,259:157,260:158,261:159,262:162,263:163,265:me,266:d,270:_e,271:be,273:Ee,280:xe,281:we,282:Te,283:Se,284:Ae,285:Ce,286:Oe,287:ke,288:Pe,290:J,291:Q,292:ee,293:te,294:Re,295:Ie,296:Ne,297:Me,298:Le,299:De,302:Fe,303:je,312:Be,317:Ue,419:190,420:ze,424:Ve},t(Z,[2,578]),t(an,[2,349]),t(an,[2,350]),t(an,[2,351]),t(an,[2,352]),t(Z,[2,582]),t(Z,[2,592]),t(br,[2,734]),t(Z,[2,489]),t(Z,[2,494],{355:1684,4:Yo,243:Zo,343:Ko,356:Jo}),t(ua,[2,496]),t(ua,[2,497]),{124:[1,1685]},{124:[1,1686]},{124:[1,1687]},{74:[1,1688],78:[2,505]},t(so,[2,533]),t(so,[2,508]),{187:[1,1696],193:[1,1697],362:1689,363:1690,364:1691,365:1692,366:1693,368:Fo,369:[1,1694],370:[1,1698],373:[1,1695]},{2:r,3:1699,4:i,5:o},{40:1700,79:75,89:l,184:99,189:p},{415:[1,1701]},{416:[1,1702]},t(Z,[2,761]),t(Z,[2,763]),t(Ti,[2,537]),t(Ke,[2,331]),{78:[1,1703]},t(Ke,[2,332]),{2:r,3:168,4:i,5:o,56:165,77:ae,94:1660,111:149,113:153,131:se,132:ue,137:le,143:ce,144:161,145:fe,149:he,152:pe,154:de,156:K,158:167,179:ve,180:ge,181:ye,196:151,200:147,201:155,202:156,233:1704,235:1656,236:ia,237:oa,238:aa,254:150,255:146,256:148,257:152,258:154,259:157,260:158,261:159,262:162,263:163,265:me,266:d,270:_e,271:be,273:Ee,280:xe,281:we,282:Te,283:Se,284:Ae,285:Ce,286:Oe,287:ke,288:Pe,290:J,291:Q,292:ee,293:te,294:Re,295:Ie,296:Ne,297:Me,298:Le,299:De,302:Fe,303:je,312:Be,317:Ue,419:190,420:ze,424:Ve},{2:r,3:168,4:i,5:o,56:165,77:ae,94:1376,111:149,113:153,120:1705,131:se,132:ue,137:le,143:ce,144:161,145:fe,149:he,152:pe,154:de,156:K,158:167,179:ve,180:ge,181:ye,196:151,200:147,201:155,202:156,241:1374,254:150,255:146,256:148,257:152,258:154,259:157,260:158,261:159,262:162,263:163,265:me,266:d,270:_e,271:be,273:Ee,280:xe,281:we,282:Te,283:Se,284:Ae,285:Ce,286:Oe,287:ke,288:Pe,290:J,291:Q,292:ee,293:te,294:Re,295:Ie,296:Ne,297:Me,298:Le,299:De,302:Fe,303:je,312:Be,317:Ue,419:190,420:ze,424:Ve},t(Ke,[2,317]),t(Ke,[2,319]),{2:r,3:1706,4:i,5:o},t(Z,[2,720],{77:[1,1707]}),{2:r,3:1011,4:i,5:o,111:1065,143:pi,145:di,147:1708,336:1064,337:1066},{335:Ho,338:qo,461:1709},t(uo,[2,707]),{77:[1,1711],343:[1,1712],344:[1,1710]},{170:[1,1714],309:[1,1713]},{170:[1,1716],309:[1,1715]},{99:Et,112:xt,114:625,115:wt,116:Tt,123:St,124:gr,133:Ct,136:Ot,138:kt,139:Pt,140:Rt,141:It,142:Nt,154:Mt,170:Lt,171:Dt,179:Ft,180:jt,309:[1,1717],311:Bt,312:Ut,313:zt,315:Vt,316:Gt,317:Ht,318:qt,319:Wt,320:Xt,321:$t,322:Yt,323:Zt,324:Kt,325:Jt,326:Qt,327:637,330:en,331:tn,332:nn,333:rn},t(ui,[2,250],{88:1718,162:[1,1719],168:[1,1721],169:[1,1720]}),{131:se,196:1722},{131:se,196:1723},{2:r,3:168,4:i,5:o,56:165,77:ae,94:1376,111:149,113:153,120:1724,131:se,132:ue,137:le,143:ce,144:161,145:fe,149:he,152:pe,154:de,156:K,158:167,179:ve,180:ge,181:ye,196:151,200:147,201:155,202:156,241:1374,254:150,255:146,256:148,257:152,258:154,259:157,260:158,261:159,262:162,263:163,265:me,266:d,270:_e,271:be,273:Ee,280:xe,281:we,282:Te,283:Se,284:Ae,285:Ce,286:Oe,287:ke,288:Pe,290:J,291:Q,292:ee,293:te,294:Re,295:Ie,296:Ne,297:Me,298:Le,299:De,302:Fe,303:je,312:Be,317:Ue,419:190,420:ze,424:Ve},t(To,[2,248],{234:1725,74:la,239:[1,1727]}),t(ca,[2,242]),{146:[1,1728]},{77:[1,1729]},{77:[1,1730]},t(ca,[2,247],{114:625,327:637,99:Et,112:xt,115:wt,116:Tt,123:St,124:gr,133:Ct,136:Ot,138:kt,139:Pt,140:Rt,141:It,142:Nt,154:Mt,170:Lt,171:Dt,179:Ft,180:jt,311:Bt,312:Ut,313:zt,315:Vt,316:Gt,317:Ht,318:qt,319:Wt,320:Xt,321:$t,322:Yt,323:Zt,324:Kt,325:Jt,326:Qt,330:en,331:tn,332:nn,333:rn}),{78:[2,1051],96:1731,99:[1,1733],102:1732},{99:[1,1734]},t(So,[2,235],{114:625,327:637,99:Et,112:xt,115:wt,116:Tt,123:St,124:gr,133:Ct,136:Ot,138:kt,139:Pt,140:Rt,141:It,142:Nt,154:Mt,170:Lt,171:Dt,179:Ft,180:jt,311:Bt,312:Ut,313:zt,315:Vt,316:Gt,317:Ht,318:qt,319:Wt,320:Xt,321:$t,322:Yt,323:Zt,324:Kt,325:Jt,326:Qt,330:en,331:tn,332:nn,333:rn}),t(So,[2,236],{74:io}),t(Xo,[2,210]),t(Xo,[2,211]),t(Xo,[2,1098]),t(Xo,[2,213]),{2:r,3:1735,4:i,5:o,76:[1,1736]},t(Xo,[2,218]),t(Xo,[2,221]),{78:[1,1737]},{78:[1,1738]},t(Po,[2,266]),{2:r,3:244,4:i,5:o,199:1739},t(pr,[2,552]),t(pr,[2,1128]),{2:r,3:1740,4:i,5:o},{74:[1,1741]},{78:[1,1742],99:Et,112:xt,114:625,115:wt,116:Tt,123:St,124:gr,133:Ct,136:Ot,138:kt,139:Pt,140:Rt,141:It,142:Nt,154:Mt,170:Lt,171:Dt,179:Ft,180:jt,311:Bt,312:Ut,313:zt,315:Vt,316:Gt,317:Ht,318:qt,319:Wt,320:Xt,321:$t,322:Yt,323:Zt,324:Kt,325:Jt,326:Qt,327:637,330:en,331:tn,332:nn,333:rn},t(pr,[2,562]),{2:r,3:168,4:i,5:o,56:165,77:ae,94:1743,111:149,113:153,131:se,132:ue,137:le,143:ce,144:161,145:fe,149:he,152:pe,154:de,156:K,158:167,179:ve,180:ge,181:ye,196:151,200:147,201:155,202:156,254:150,255:146,256:148,257:152,258:154,259:157,260:158,261:159,262:162,263:163,265:me,266:d,270:_e,271:be,273:Ee,280:xe,281:we,282:Te,283:Se,284:Ae,285:Ce,286:Oe,287:ke,288:Pe,290:J,291:Q,292:ee,293:te,294:Re,295:Ie,296:Ne,297:Me,298:Le,299:De,302:Fe,303:je,312:Be,317:Ue,419:190,420:ze,424:Ve},{78:[1,1744],99:Et,112:xt,114:625,115:wt,116:Tt,123:St,124:gr,133:Ct,136:Ot,138:kt,139:Pt,140:Rt,141:It,142:Nt,154:Mt,170:Lt,171:Dt,179:Ft,180:jt,311:Bt,312:Ut,313:zt,315:Vt,316:Gt,317:Ht,318:qt,319:Wt,320:Xt,321:$t,322:Yt,323:Zt,324:Kt,325:Jt,326:Qt,327:637,330:en,331:tn,332:nn,333:rn},t(ua,[2,495]),{2:r,3:1745,4:i,5:o},{131:se,196:1746},{2:r,3:1747,4:i,5:o},t(Qo,ea,{361:1627,360:1748,367:ta}),t(br,[2,510]),t(br,[2,511]),t(br,[2,512]),t(br,[2,513]),t(br,[2,514]),{370:[1,1749]},{370:[1,1750]},t(fa,[2,1121],{382:1751,370:[1,1752]}),{2:r,3:1753,4:i,5:o},{2:r,3:1754,4:i,5:o},t(Qo,[2,516]),t(Z,[2,1131],{411:1755,413:1756,72:zo}),t(Z,[2,610]),t(Z,[2,611],{367:[1,1757]}),t(Ke,[2,333]),t([78,118],[2,334],{74:la}),{74:ko,78:[2,335]},t(Z,[2,719]),{2:r,3:1011,4:i,5:o,100:1758,111:1440},t(uo,[2,706],{74:Wi}),t(uo,[2,704]),{77:oi,143:ce,144:979,145:Je,152:pe,181:ye,201:980,302:Fe,342:1759,419:190,420:ze,424:Ve},{2:r,3:1011,4:i,5:o,100:1760,111:1440},{344:[1,1761]},{339:na,462:1762},{2:r,3:168,4:i,5:o,56:165,77:ae,94:1763,111:149,113:153,131:se,132:ue,137:le,143:ce,144:161,145:fe,149:he,152:pe,154:de,156:K,158:167,179:ve,180:ge,181:ye,196:151,200:147,201:155,202:156,254:150,255:146,256:148,257:152,258:154,259:157,260:158,261:159,262:162,263:163,265:me,266:d,270:_e,271:be,273:Ee,280:xe,281:we,282:Te,283:Se,284:Ae,285:Ce,286:Oe,287:ke,288:Pe,290:J,291:Q,292:ee,293:te,294:Re,295:Ie,296:Ne,297:Me,298:Le,299:De,302:Fe,303:je,312:Be,317:Ue,419:190,420:ze,424:Ve},{339:na,462:1764},{2:r,3:168,4:i,5:o,56:165,77:ae,94:1765,111:149,113:153,131:se,132:ue,137:le,143:ce,144:161,145:fe,149:he,152:pe,154:de,156:K,158:167,179:ve,180:ge,181:ye,196:151,200:147,201:155,202:156,254:150,255:146,256:148,257:152,258:154,259:157,260:158,261:159,262:162,263:163,265:me,266:d,270:_e,271:be,273:Ee,280:xe,281:we,282:Te,283:Se,284:Ae,285:Ce,286:Oe,287:ke,288:Pe,290:J,291:Q,292:ee,293:te,294:Re,295:Ie,296:Ne,297:Me,298:Le,299:De,302:Fe,303:je,312:Be,317:Ue,419:190,420:ze,424:Ve},{339:na,462:1766},t(ui,[2,72]),{40:1767,79:75,89:l,164:[1,1768],184:99,189:p,240:[1,1769]},{40:1770,79:75,89:l,184:99,189:p,240:[1,1771]},{40:1772,79:75,89:l,184:99,189:p,240:[1,1773]},t(ra,[2,270],{246:1774,247:[1,1775]}),{248:1776,249:[2,1099],766:[1,1777]},t(Wo,[2,260],{74:ko}),t(To,[2,241]),{2:r,3:168,4:i,5:o,56:165,77:ae,94:1660,111:149,113:153,131:se,132:ue,137:le,143:ce,144:161,145:fe,149:he,152:pe,154:de,156:K,158:167,179:ve,180:ge,181:ye,196:151,200:147,201:155,202:156,235:1778,236:ia,237:oa,238:aa,254:150,255:146,256:148,257:152,258:154,259:157,260:158,261:159,262:162,263:163,265:me,266:d,270:_e,271:be,273:Ee,280:xe,281:we,282:Te,283:Se,284:Ae,285:Ce,286:Oe,287:ke,288:Pe,290:J,291:Q,292:ee,293:te,294:Re,295:Ie,296:Ne,297:Me,298:Le,299:De,302:Fe,303:je,312:Be,317:Ue,419:190,420:ze,424:Ve},{2:r,3:168,4:i,5:o,56:165,77:ae,94:1779,111:149,113:153,131:se,132:ue,137:le,143:ce,144:161,145:fe,149:he,152:pe,154:de,156:K,158:167,179:ve,180:ge,181:ye,196:151,200:147,201:155,202:156,254:150,255:146,256:148,257:152,258:154,259:157,260:158,261:159,262:162,263:163,265:me,266:d,270:_e,271:be,273:Ee,280:xe,281:we,282:Te,283:Se,284:Ae,285:Ce,286:Oe,287:ke,288:Pe,290:J,291:Q,292:ee,293:te,294:Re,295:Ie,296:Ne,297:Me,298:Le,299:De,302:Fe,303:je,312:Be,317:Ue,419:190,420:ze,424:Ve},{77:[1,1780]},{2:r,3:168,4:i,5:o,56:165,77:ae,94:1660,111:149,113:153,131:se,132:ue,137:le,143:ce,144:161,145:fe,149:he,152:pe,154:de,156:K,158:167,179:ve,180:ge,181:ye,196:151,200:147,201:155,202:156,233:1781,235:1656,236:ia,237:oa,238:aa,254:150,255:146,256:148,257:152,258:154,259:157,260:158,261:159,262:162,263:163,265:me,266:d,270:_e,271:be,273:Ee,280:xe,281:we,282:Te,283:Se,284:Ae,285:Ce,286:Oe,287:ke,288:Pe,290:J,291:Q,292:ee,293:te,294:Re,295:Ie,296:Ne,297:Me,298:Le,299:De,302:Fe,303:je,312:Be,317:Ue,419:190,420:ze,424:Ve},{2:r,3:168,4:i,5:o,56:165,77:ae,94:1660,111:149,113:153,131:se,132:ue,137:le,143:ce,144:161,145:fe,149:he,152:pe,154:de,156:K,158:167,179:ve,180:ge,181:ye,196:151,200:147,201:155,202:156,233:1782,235:1656,236:ia,237:oa,238:aa,254:150,255:146,256:148,257:152,258:154,259:157,260:158,261:159,262:162,263:163,265:me,266:d,270:_e,271:be,273:Ee,280:xe,281:we,282:Te,283:Se,284:Ae,285:Ce,286:Oe,287:ke,288:Pe,290:J,291:Q,292:ee,293:te,294:Re,295:Ie,296:Ne,297:Me,298:Le,299:De,302:Fe,303:je,312:Be,317:Ue,419:190,420:ze,424:Ve},{78:[1,1783]},{78:[2,1052]},{77:[1,1784]},{77:[1,1785]},t(Xo,[2,214]),{2:r,3:1786,4:i,5:o},{2:r,3:1787,4:i,5:o,76:[1,1788]},{2:r,3:1789,4:i,5:o,76:[1,1790]},t(pr,[2,1125],{394:1791,393:1792,77:sa}),{78:[1,1793]},{131:se,196:1794},t(pr,[2,556]),{78:[1,1795],99:Et,112:xt,114:625,115:wt,116:Tt,123:St,124:gr,133:Ct,136:Ot,138:kt,139:Pt,140:Rt,141:It,142:Nt,154:Mt,170:Lt,171:Dt,179:Ft,180:jt,311:Bt,312:Ut,313:zt,315:Vt,316:Gt,317:Ht,318:qt,319:Wt,320:Xt,321:$t,322:Yt,323:Zt,324:Kt,325:Jt,326:Qt,327:637,330:en,331:tn,332:nn,333:rn},t(pr,[2,517]),t(ua,[2,498]),t(ua,[2,499]),t(ua,[2,500]),t(so,[2,509]),{2:r,3:1797,4:i,5:o,77:[2,1117],371:1796},{77:[1,1798]},{2:r,3:1800,4:i,5:o,77:[2,1123],383:1799},t(fa,[2,1122]),{77:[1,1801]},{77:[1,1802]},t(Z,[2,608]),t(Z,[2,1132]),t(Qo,ea,{361:1627,360:1803,367:ta}),{74:io,78:[1,1804]},t(uo,[2,713],{74:Di}),{74:io,78:[1,1805]},t(uo,[2,715]),t(uo,[2,708]),{99:Et,112:xt,114:625,115:wt,116:Tt,123:St,124:gr,133:Ct,136:Ot,138:kt,139:Pt,140:Rt,141:It,142:Nt,154:Mt,170:Lt,171:Dt,179:Ft,180:jt,309:[1,1806],311:Bt,312:Ut,313:zt,315:Vt,316:Gt,317:Ht,318:qt,319:Wt,320:Xt,321:$t,322:Yt,323:Zt,324:Kt,325:Jt,326:Qt,327:637,330:en,331:tn,332:nn,333:rn},t(uo,[2,711]),{99:Et,112:xt,114:625,115:wt,116:Tt,123:St,124:gr,133:Ct,136:Ot,138:kt,139:Pt,140:Rt,141:It,142:Nt,154:Mt,170:Lt,171:Dt,179:Ft,180:jt,309:[1,1807],311:Bt,312:Ut,313:zt,315:Vt,316:Gt,317:Ht,318:qt,319:Wt,320:Xt,321:$t,322:Yt,323:Zt,324:Kt,325:Jt,326:Qt,327:637,330:en,331:tn,332:nn,333:rn},t(uo,[2,709]),t(ui,[2,251]),{40:1808,79:75,89:l,184:99,189:p,240:[1,1809]},{40:1810,79:75,89:l,184:99,189:p},t(ui,[2,253]),{40:1811,79:75,89:l,184:99,189:p},t(ui,[2,254]),{40:1812,79:75,89:l,184:99,189:p},t(ra,[2,268]),{131:se,196:1813},{249:[1,1814]},{249:[2,1100]},t(ca,[2,243]),t(To,[2,249],{114:625,327:637,99:Et,112:xt,115:wt,116:Tt,123:St,124:gr,133:Ct,136:Ot,138:kt,139:Pt,140:Rt,141:It,142:Nt,154:Mt,170:Lt,171:Dt,179:Ft,180:jt,311:Bt,312:Ut,313:zt,315:Vt,316:Gt,317:Ht,318:qt,319:Wt,320:Xt,321:$t,322:Yt,323:Zt,324:Kt,325:Jt,326:Qt,330:en,331:tn,332:nn,333:rn}),{2:r,3:168,4:i,5:o,56:165,77:ae,94:1660,111:149,113:153,131:se,132:ue,137:le,143:ce,144:161,145:fe,149:he,152:pe,154:de,156:K,158:167,179:ve,180:ge,181:ye,196:151,200:147,201:155,202:156,233:1815,235:1656,236:ia,237:oa,238:aa,254:150,255:146,256:148,257:152,258:154,259:157,260:158,261:159,262:162,263:163,265:me,266:d,270:_e,271:be,273:Ee,280:xe,281:we,282:Te,283:Se,284:Ae,285:Ce,286:Oe,287:ke,288:Pe,290:J,291:Q,292:ee,293:te,294:Re,295:Ie,296:Ne,297:Me,298:Le,299:De,302:Fe,303:je,312:Be,317:Ue,419:190,420:ze,424:Ve},{74:la,78:[1,1816]},{74:la,78:[1,1817]},t(Ui,[2,1053],{97:1818,104:1819,3:1821,2:r,4:i,5:o,76:ha}),{2:r,3:168,4:i,5:o,56:165,77:ae,94:1824,103:1822,105:1823,111:149,113:153,131:se,132:ue,137:le,143:ce,144:161,145:fe,149:he,152:pe,154:de,156:K,158:167,179:ve,180:ge,181:ye,196:151,200:147,201:155,202:156,254:150,255:146,256:148,257:152,258:154,259:157,260:158,261:159,262:162,263:163,265:me,266:d,270:_e,271:be,273:Ee,280:xe,281:we,282:Te,283:Se,284:Ae,285:Ce,286:Oe,287:ke,288:Pe,290:J,291:Q,292:ee,293:te,294:Re,295:Ie,296:Ne,297:Me,298:Le,299:De,302:Fe,303:je,312:Be,317:Ue,419:190,420:ze,424:Ve},{2:r,3:1011,4:i,5:o,100:1825,111:1440},t(Xo,[2,215]),t(So,[2,173]),{2:r,3:1826,4:i,5:o},t(So,[2,175]),{2:r,3:1827,4:i,5:o},t(pr,[2,551]),t(pr,[2,1126]),t(pr,[2,549]),{78:[1,1828]},t(pr,[2,563]),{77:[1,1829]},{77:[2,1118]},{2:r,3:1831,4:i,5:o,132:pa,372:1830},{77:[1,1833]},{77:[2,1124]},{2:r,3:1011,4:i,5:o,100:1834,111:1440},{2:r,3:1011,4:i,5:o,100:1835,111:1440},t(Z,[2,612]),t(Z,[2,721]),{343:[1,1837],344:[1,1836]},{339:na,462:1838},{335:Ho,338:qo,461:1839},t(ui,[2,252]),{40:1840,79:75,89:l,184:99,189:p},t(ui,[2,255]),t(ui,[2,257]),t(ui,[2,258]),t(ra,[2,271]),{131:[2,1101],250:1841,645:[1,1842]},{74:la,78:[1,1843]},t(ca,[2,245]),t(ca,[2,246]),t(Ui,[2,74]),t(Ui,[2,1054]),{2:r,3:1844,4:i,5:o},t(Ui,[2,78]),{74:[1,1846],78:[1,1845]},t(so,[2,80]),t(so,[2,81],{114:625,327:637,76:[1,1847],99:Et,112:xt,115:wt,116:Tt,123:St,124:gr,133:Ct,136:Ot,138:kt,139:Pt,140:Rt,141:It,142:Nt,154:Mt,170:Lt,171:Dt,179:Ft,180:jt,311:Bt,312:Ut,313:zt,315:Vt,316:Gt,317:Ht,318:qt,319:Wt,320:Xt,321:$t,322:Yt,323:Zt,324:Kt,325:Jt,326:Qt,330:en,331:tn,332:nn,333:rn}),{74:io,78:[1,1848]},t(So,[2,174]),t(So,[2,176]),t(pr,[2,553]),{2:r,3:1831,4:i,5:o,132:pa,372:1849},{74:da,78:[1,1850]},t(so,[2,528]),t(so,[2,529]),{2:r,3:1011,4:i,5:o,100:1852,111:1440},{74:io,78:[1,1853]},{74:io,78:[1,1854]},{77:oi,143:ce,144:979,145:Je,152:pe,181:ye,201:980,302:Fe,342:1855,419:190,420:ze,424:Ve},{344:[1,1856]},t(uo,[2,710]),t(uo,[2,712]),t(ui,[2,256]),{131:se,196:1857},{131:[2,1102]},t(ca,[2,244]),t(Ui,[2,77]),{78:[2,76]},{2:r,3:168,4:i,5:o,56:165,77:ae,94:1824,105:1858,111:149,113:153,131:se,132:ue,137:le,143:ce,144:161,145:fe,149:he,152:pe,154:de,156:K,158:167,179:ve,180:ge,181:ye,196:151,200:147,201:155,202:156,254:150,255:146,256:148,257:152,258:154,259:157,260:158,261:159,262:162,263:163,265:me,266:d,270:_e,271:be,273:Ee,280:xe,281:we,282:Te,283:Se,284:Ae,285:Ce,286:Oe,287:ke,288:Pe,290:J,291:Q,292:ee,293:te,294:Re,295:Ie,296:Ne,297:Me,298:Le,299:De,302:Fe,303:je,312:Be,317:Ue,419:190,420:ze,424:Ve},{2:r,3:1859,4:i,5:o},{78:[1,1860]},{74:da,78:[1,1861]},{374:[1,1862]},{2:r,3:1863,4:i,5:o,132:[1,1864]},{74:io,78:[1,1865]},t(br,[2,526]),t(br,[2,527]),t(uo,[2,714],{74:Di}),t(uo,[2,716]),t(va,[2,1103],{251:1866,766:[1,1867]}),t(so,[2,79]),t(so,[2,82]),t(Ui,[2,1055],{3:1821,101:1868,104:1869,2:r,4:i,5:o,76:ha}),t(br,[2,518]),{2:r,3:244,4:i,5:o,199:1870},t(so,[2,530]),t(so,[2,531]),t(br,[2,525]),t(ra,[2,1105],{252:1871,415:[1,1872]}),t(va,[2,1104]),t(Ui,[2,75]),t(Ui,[2,1056]),t(ga,[2,1119],{375:1873,377:1874,77:[1,1875]}),t(ra,[2,269]),t(ra,[2,1106]),t(br,[2,521],{376:1876,378:1877,230:[1,1878]}),t(ga,[2,1120]),{2:r,3:1831,4:i,5:o,132:pa,372:1879},t(br,[2,519]),{230:[1,1881],379:1880},{338:[1,1882]},{74:da,78:[1,1883]},t(br,[2,522]),{335:[1,1884]},{380:[1,1885]},t(ga,[2,520]),{380:[1,1886]},{381:[1,1887]},{381:[1,1888]},{230:[2,523]},t(br,[2,524])],defaultActions:{105:[2,6],194:[2,336],195:[2,337],196:[2,338],197:[2,339],198:[2,340],199:[2,341],200:[2,342],201:[2,343],202:[2,344],209:[2,695],591:[2,1142],653:[2,1107],654:[2,1108],710:[2,696],780:[2,1073],781:[2,1074],926:[2,446],927:[2,447],928:[2,448],987:[2,697],1288:[2,1152],1375:[2,1060],1433:[2,1150],1541:[2,507],1732:[2,1052],1777:[2,1100],1797:[2,1118],1800:[2,1124],1842:[2,1102],1845:[2,76],1887:[2,523]},parseError:function(e,t){function n(e,t){this.message=e,this.hash=t}if(!t.recoverable)throw n.prototype=Error,new n(e,t);this.trace(e)},parse:function(e){function t(e){for(var t=r.length-1,n=0;;){if(f.toString()in a[e])return n;if(0===e||t<2)return!1;t-=2,e=r[t],++n}}var n=this,r=[0],i=[null],o=[],a=this.table,s="",u=0,l=0,c=0,f=2,h=o.slice.call(arguments,1),p=Object.create(this.lexer),d={yy:{}};for(var v in this.yy)Object.prototype.hasOwnProperty.call(this.yy,v)&&(d.yy[v]=this.yy[v]);p.setInput(e,d.yy),d.yy.lexer=p,d.yy.parser=this,void 0===p.yylloc&&(p.yylloc={});var g=p.yylloc;o.push(g);var y=p.options&&p.options.ranges;"function"==typeof d.yy.parseError?this.parseError=d.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;for(var m,_,b,E,x,w,T,S,A,C=function(){var e;return e=p.lex()||1,"number"!=typeof e&&(e=n.symbols_[e]||e),e},O={};;){if(b=r[r.length-1],this.defaultActions[b]?E=this.defaultActions[b]:(null!==m&&void 0!==m||(m=C()),E=a[b]&&a[b][m]),void 0===E||!E.length||!E[0]){var k,P="";if(c)1!==_&&(k=t(b));else{k=t(b),A=[];for(w in a[b])this.terminals_[w]&&w>f&&A.push("'"+this.terminals_[w]+"'");P=p.showPosition?"Parse error on line "+(u+1)+":\n"+p.showPosition()+"\nExpecting "+A.join(", ")+", got '"+(this.terminals_[m]||m)+"'":"Parse error on line "+(u+1)+": Unexpected "+(1==m?"end of input":"'"+(this.terminals_[m]||m)+"'"),this.parseError(P,{text:p.match,token:this.terminals_[m]||m,line:p.yylineno,loc:g,expected:A,recoverable:!1!==k})}if(3==c){if(1===m||1===_)throw new Error(P||"Parsing halted while starting to recover from another error.");l=p.yyleng,s=p.yytext,u=p.yylineno,g=p.yylloc,m=C()}if(!1===k)throw new Error(P||"Parsing halted. No suitable error recovery rule available.");!function(e){r.length=r.length-2*e,i.length=i.length-e,o.length=o.length-e}(k),_=m==f?null:m,m=f,b=r[r.length-1],E=a[b]&&a[b][f],c=3}if(E[0]instanceof Array&&E.length>1)throw new Error("Parse Error: multiple actions possible at state: "+b+", token: "+m);switch(E[0]){case 1:r.push(m),i.push(p.yytext),o.push(p.yylloc),r.push(E[1]),m=null,_?(m=_,_=null):(l=p.yyleng,s=p.yytext,u=p.yylineno,g=p.yylloc,c>0&&c--);break;case 2:if(T=this.productions_[E[1]][1],O.$=i[i.length-T],O._$={first_line:o[o.length-(T||1)].first_line,last_line:o[o.length-1].last_line,first_column:o[o.length-(T||1)].first_column,last_column:o[o.length-1].last_column},y&&(O._$.range=[o[o.length-(T||1)].range[0],o[o.length-1].range[1]]),void 0!==(x=this.performAction.apply(O,[s,l,u,d.yy,E[1],i,o].concat(h))))return x;T&&(r=r.slice(0,-1*T*2),i=i.slice(0,-1*T),o=o.slice(0,-1*T)),r.push(this.productions_[E[1]][0]),i.push(O.$),o.push(O._$),S=a[r[r.length-2]][r[r.length-1]],r.push(S);break;case 3:return!0}}return!0}},ma=["A","ABSENT","ABSOLUTE","ACCORDING","ACTION","ADA","ADD","ADMIN","AFTER","ALWAYS","ASC","ASSERTION","ASSIGNMENT","ATTRIBUTE","ATTRIBUTES","BASE64","BEFORE","BERNOULLI","BLOCKED","BOM","BREADTH","C","CASCADE","CATALOG","CATALOG_NAME","CHAIN","CHARACTERISTICS","CHARACTERS","CHARACTER_SET_CATALOG","CHARACTER_SET_NAME","CHARACTER_SET_SCHEMA","CLASS_ORIGIN","COBOL","COLLATION","COLLATION_CATALOG","COLLATION_NAME","COLLATION_SCHEMA","COLUMNS","COLUMN_NAME","COMMAND_FUNCTION","COMMAND_FUNCTION_CODE","COMMITTED","CONDITION_NUMBER","CONNECTION","CONNECTION_NAME","CONSTRAINTS","CONSTRAINT_CATALOG","CONSTRAINT_NAME","CONSTRAINT_SCHEMA","CONSTRUCTOR","CONTENT","CONTINUE","CONTROL","CURSOR_NAME","DATA","DATETIME_INTERVAL_CODE","DATETIME_INTERVAL_PRECISION","DB","DEFAULTS","DEFERRABLE","DEFERRED","DEFINED","DEFINER","DEGREE","DEPTH","DERIVED","DESC","DESCRIPTOR","DIAGNOSTICS","DISPATCH","DOCUMENT","DOMAIN","DYNAMIC_FUNCTION","DYNAMIC_FUNCTION_CODE","EMPTY","ENCODING","ENFORCED","EXCLUDE","EXCLUDING","EXPRESSION","FILE","FINAL","FIRST","FLAG","FOLLOWING","FORTRAN","FOUND","FS","G","GENERAL","GENERATED","GO","GOTO","GRANTED","HEX","HIERARCHY","ID","IGNORE","IMMEDIATE","IMMEDIATELY","IMPLEMENTATION","INCLUDING","INCREMENT","INDENT","INITIALLY","INPUT","INSTANCE","INSTANTIABLE","INSTEAD","INTEGRITY","INVOKER","ISOLATION","K","KEY","KEY_MEMBER","KEY_TYPE","LAST","LENGTH","LEVEL","LIBRARY","LIMIT","LINK","LOCATION","LOCATOR","M","MAP","MAPPING","MATCHED","MAXVALUE","MESSAGE_LENGTH","MESSAGE_OCTET_LENGTH","MESSAGE_TEXT","MINVALUE","MORE","MUMPS","NAME","NAMES","NAMESPACE","NESTING","NEXT","NFC","NFD","NFKC","NFKD","NIL","NORMALIZED","NULLABLE","NULLS","NUMBER","OBJECT","OCTETS","OFF","OPTION","OPTIONS","ORDERING","ORDINALITY","OTHERS","OUTPUT","OVERRIDING","P","PAD","PARAMETER_MODE","PARAMETER_NAME","PARAMETER_ORDINAL_POSITION","PARAMETER_SPECIFIC_CATALOG","PARAMETER_SPECIFIC_NAME","PARAMETER_SPECIFIC_SCHEMA","PARTIAL","PASCAL","PASSING","PASSTHROUGH","PATH","PERMISSION","PLACING","PLI","PRECEDING","PRESERVE","PRIOR","PRIVILEGES","PUBLIC","READ","RECOVERY","RELATIVE","REPEATABLE","REQUIRING","RESPECT","RESTART","RESTORE","RESTRICT","RETURNED_CARDINALITY","RETURNED_LENGTH","RETURNED_OCTET_LENGTH","RETURNED_SQLSTATE","RETURNING","ROLE","ROUTINE","ROUTINE_CATALOG","ROUTINE_NAME","ROUTINE_SCHEMA","ROW_COUNT","SCALE","SCHEMA","SCHEMA_NAME","SCOPE_CATALOG","SCOPE_NAME","SCOPE_SCHEMA","SECTION","SECURITY","SELECTIVE","SELF","SEQUENCE","SERIALIZABLE","SERVER","SERVER_NAME","SESSION","SETS","SIMPLE","SIZE","SOURCE","SPACE","SPECIFIC_NAME","STANDALONE","STATE","STATEMENT","STRIP","STRUCTURE","STYLE","SUBCLASS_ORIGIN","T","TABLE_NAME","TEMPORARY","TIES","TOKEN","TOP_LEVEL_COUNT","TRANSACTION","TRANSACTIONS_COMMITTED","TRANSACTIONS_ROLLED_BACK","TRANSACTION_ACTIVE","TRANSFORM","TRANSFORMS","TRIGGER_CATALOG","TRIGGER_NAME","TRIGGER_SCHEMA","TYPE","UNBOUNDED","UNCOMMITTED","UNDER","UNLINK","UNNAMED","UNTYPED","URI","USAGE","USER_DEFINED_TYPE_CATALOG","USER_DEFINED_TYPE_CODE","USER_DEFINED_TYPE_NAME","USER_DEFINED_TYPE_SCHEMA","VALID","VERSION","VIEW","WHITESPACE","WORK","WRAPPER","WRITE","XMLDECLARATION","XMLSCHEMA","YES","ZONE"];ya.parseError=function(e,t){if(!(t.expected&&t.expected.indexOf("'LITERAL'")>-1&&/[a-zA-Z_][a-zA-Z_0-9]*/.test(t.token)&&ma.indexOf(t.token)>-1))throw new SyntaxError(e)};var _a=function(){return{EOF:1,parseError:function(e,t){if(!this.yy.parser)throw new Error(e);this.yy.parser.parseError(e,t)},setInput:function(e,t){return this.yy=t||this.yy||{},this._input=e,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var e=this._input[0];return this.yytext+=e,this.yyleng++,this.offset++,this.match+=e,this.matched+=e,e.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),e},unput:function(e){var t=e.length,n=e.split(/(?:\r\n?|\n)/g);this._input=e+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-t),this.offset-=t;var r=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),n.length-1&&(this.yylineno-=n.length-1);var i=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:n?(n.length===r.length?this.yylloc.first_column:0)+r[r.length-n.length].length-n[0].length:this.yylloc.first_column-t},this.options.ranges&&(this.yylloc.range=[i[0],i[0]+this.yyleng-t]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},less:function(e){this.unput(this.match.slice(e))},pastInput:function(){var e=this.matched.substr(0,this.matched.length-this.match.length);return(e.length>20?"...":"")+e.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var e=this.match;return e.length<20&&(e+=this._input.substr(0,20-e.length)),(e.substr(0,20)+(e.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var e=this.pastInput(),t=new Array(e.length+1).join("-");return e+this.upcomingInput()+"\n"+t+"^"},test_match:function(e,t){var n,r,i;if(this.options.backtrack_lexer&&(i={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(i.yylloc.range=this.yylloc.range.slice(0))),r=e[0].match(/(?:\r\n?|\n).*/g),r&&(this.yylineno+=r.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:r?r[r.length-1].length-r[r.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+e[0].length},this.yytext+=e[0],this.match+=e[0],this.matches=e,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(e[0].length),this.matched+=e[0],n=this.performAction.call(this,this.yy,this,t,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),n)return n;if(this._backtrack){for(var o in i)this[o]=i[o];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var e,t,n,r;this._more||(this.yytext="",this.match="");for(var i=this._currentRules(),o=0;o<i.length;o++)if((n=this._input.match(this.rules[i[o]]))&&(!t||n[0].length>t[0].length)){if(t=n,r=o,this.options.backtrack_lexer){if(!1!==(e=this.test_match(n,i[o])))return e;if(this._backtrack){t=!1;continue}return!1}if(!this.options.flex)break}return t?!1!==(e=this.test_match(t,i[r]))&&e:""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){return this.next()||this.lex()},begin:function(e){this.conditionStack.push(e)},popState:function(){return this.conditionStack.length-1>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(e){return e=this.conditionStack.length-1-Math.abs(e||0),e>=0?this.conditionStack[e]:"INITIAL"},pushState:function(e){this.begin(e)},stateStackSize:function(){return this.conditionStack.length},options:{"case-insensitive":!0},performAction:function(e,t,n,r){switch(n){case 0:return 266;case 1:return 302;case 2:return 420;case 3:return 299;case 4:case 5:return 5;case 6:case 7:return 296;case 8:case 9:return 132;case 10:return;case 11:break;case 12:return 316;case 13:return 319;case 14:return t.yytext="VALUE",89;case 15:return t.yytext="VALUE",189;case 16:return t.yytext="ROW",189;case 17:return t.yytext="COLUMN",189;case 18:return t.yytext="MATRIX",189;case 19:return t.yytext="INDEX",189;case 20:return t.yytext="RECORDSET",189;case 21:return t.yytext="TEXT",189;case 22:return t.yytext="SELECT",189;case 23:return 520;case 24:return 381;case 25:return 402;case 26:return 515;case 27:return 287;case 28:case 29:return 269;case 30:return 164;case 31:return 400;case 32:return 170;case 33:return 229;case 34:return 166;case 35:return 207;case 36:return 288;case 37:return 76;case 38:return 418;case 39:return 242;case 40:return 404;case 41:return 356;case 42:return 284;case 43:return 514;case 44:return 437;case 45:return 330;case 46:return 441;case 47:return 331;case 48:return 315;case 49:return 119;case 50:return 112;case 51:return 315;case 52:return 112;case 53:return 315;case 54:return 112;case 55:return 315;case 56:return 508;case 57:return 303;case 58:return 271;case 59:return 368;case 60:return 130;case 61:return"CLOSE";case 62:return 243;case 63:case 64:return 190;case 65:return 434;case 66:return 367;case 67:return 470;case 68:return 440;case 69:return 273;case 70:return 240;case 71:return 281;case 72:return 267;case 73:return 206;case 74:return 238;case 75:return 265;case 76:return"CURSOR";case 77:return 405;case 78:return 291;case 79:return 292;case 80:return 448;case 81:return 343;case 82:return 338;case 83:return"DELETED";case 84:return 242;case 85:return 406;case 86:return 185;case 87:return 396;case 88:return 447;case 89:return 135;case 90:return 306;case 91:return 389;case 92:return 310;case 93:return 314;case 94:return 169;case 95:case 96:return 508;case 97:return 298;case 98:return 14;case 99:return 295;case 100:return 249;case 101:return 285;case 102:return 95;case 103:return 373;case 104:return 183;case 105:return 227;case 106:return 268;case 107:return 313;case 108:return 602;case 109:return 472;case 110:return 232;case 111:return 236;case 112:return 239;case 113:return 156;case 114:return 356;case 115:return 332;case 116:return 99;case 117:return 193;case 118:return 212;case 119:return 224;case 120:return 516;case 121:return 339;case 122:return 213;case 123:return 168;case 124:return 293;case 125:return 198;case 126:return 223;case 127:return 370;case 128:return 286;case 129:return"LET";case 130:return 225;case 131:return 112;case 132:return 245;case 133:return 460;case 134:return 191;case 135:return 283;case 136:return 390;case 137:return 282;case 138:return 452;case 139:return 169;case 140:return 403;case 141:return 222;case 142:return 645;case 143:return 270;case 144:return 244;case 145:return 380;case 146:return 154;case 147:return 297;case 148:return 433;case 149:return 230;case 150:return 415;case 151:return 129;case 152:return 247;case 153:return"OPEN";case 154:return 416;case 155:return 171;case 156:return 118;case 157:return 208;case 158:return 276;case 159:return 172;case 160:return 279;case 161:return 765;case 162:return 93;case 163:return 16;case 164:return 369;case 165:return 442;case 166:return 678;case 167:return 15;case 168:return 414;case 169:return 194;case 170:return"REDUCE";case 171:return 374;case 172:return 311;case 173:return 517;case 174:return 682;case 175:return 107;case 176:return 401;case 177:return 175;case 178:return 290;case 179:return 443;case 180:return 687;case 181:case 182:return 173;case 183:return 226;case 184:return 436;case 185:return 237;case 186:return 150;case 187:return 766;case 188:return 405;case 189:return 89;case 190:return 228;case 191:case 192:return 146;case 193:return 409;case 194:return 334;case 195:return 417;case 196:return"STRATEGY";case 197:return"STORE";case 198:return 280;case 199:case 200:return 353;case 201:return 463;case 202:case 203:return 357;case 204:return 192;case 205:return 309;case 206:return"TIMEOUT";case 207:return 148;case 208:return 195;case 209:case 210:return 435;case 211:return 509;case 212:return 294;case 213:return 451;case 214:return 162;case 215:return 187;case 216:return 98;case 217:return 335;case 218:return 408;case 219:return 231;case 220:return 149;case 221:return 344;case 222:return 134;case 223:return 410;case 224:return 308;case 225:return 128;case 226:return 439;case 227:return 72;case 228:return 435;case 229:case 230:return 131;case 231:return 115;case 232:return 137;case 233:return 179;case 234:return 317;case 235:return 180;case 236:return 133;case 237:return 138;case 238:return 326;case 239:return 323;case 240:return 325;case 241:return 322;case 242:return 320;case 243:return 318;case 244:return 319;case 245:return 142;case 246:return 141;case 247:return 139;case 248:return 321;case 249:return 324;case 250:return 140;case 251:return 124;case 252:return 324;case 253:return 77;case 254:return 78;case 255:return 145;case 256:return 424;case 257:return 426;case 258:return 300;case 259:return 505;case 260:return 507;case 261:return 122;case 262:return 116;case 263:return 74;case 264:return 333;case 265:return 152;case 266:return 764;case 267:return 143;case 268:return 181;case 269:return 136;case 270:return 123;case 271:return 312;case 272:return 4;case 273:return 10;case 274:return"INVALID"}},rules:[/^(?:``([^\`])+``)/i,/^(?:\[\?\])/i,/^(?:@\[)/i,/^(?:ARRAY\[)/i,/^(?:\[([^\]])*?\])/i,/^(?:`([^\`])*?`)/i,/^(?:N(['](\\.|[^']|\\')*?['])+)/i,/^(?:X(['](\\.|[^']|\\')*?['])+)/i,/^(?:(['](\\.|[^']|\\')*?['])+)/i,/^(?:(["](\\.|[^"]|\\")*?["])+)/i,/^(?:--(.*?)($|\r\n|\r|\n))/i,/^(?:\s+)/i,/^(?:\|\|)/i,/^(?:\|)/i,/^(?:VALUE\s+OF\s+SEARCH\b)/i,/^(?:VALUE\s+OF\s+SELECT\b)/i,/^(?:ROW\s+OF\s+SELECT\b)/i,/^(?:COLUMN\s+OF\s+SELECT\b)/i,/^(?:MATRIX\s+OF\s+SELECT\b)/i,/^(?:INDEX\s+OF\s+SELECT\b)/i,/^(?:RECORDSET\s+OF\s+SELECT\b)/i,/^(?:TEXT\s+OF\s+SELECT\b)/i,/^(?:SELECT\b)/i,/^(?:ABSOLUTE\b)/i,/^(?:ACTION\b)/i,/^(?:ADD\b)/i,/^(?:AFTER\b)/i,/^(?:AGGR\b)/i,/^(?:AGGREGATE\b)/i,/^(?:AGGREGATOR\b)/i,/^(?:ALL\b)/i,/^(?:ALTER\b)/i,/^(?:AND\b)/i,/^(?:ANTI\b)/i,/^(?:ANY\b)/i,/^(?:APPLY\b)/i,/^(?:ARRAY\b)/i,/^(?:AS\b)/i,/^(?:ASSERT\b)/i,/^(?:ASC\b)/i,/^(?:ATTACH\b)/i,/^(?:AUTO(_)?INCREMENT\b)/i,/^(?:AVG\b)/i,/^(?:BEFORE\b)/i,/^(?:BEGIN\b)/i,/^(?:BETWEEN\b)/i,/^(?:BREAK\b)/i,/^(?:NOT\s+BETWEEN\b)/i,/^(?:NOT\s+LIKE\b)/i,/^(?:BY\b)/i,/^(?:~~\*)/i,/^(?:!~~\*)/i,/^(?:~~)/i,/^(?:!~~)/i,/^(?:ILIKE\b)/i,/^(?:NOT\s+ILIKE\b)/i,/^(?:CALL\b)/i,/^(?:CASE\b)/i,/^(?:CAST\b)/i,/^(?:CHECK\b)/i,/^(?:CLASS\b)/i,/^(?:CLOSE\b)/i,/^(?:COLLATE\b)/i,/^(?:COLUMN\b)/i,/^(?:COLUMNS\b)/i,/^(?:COMMIT\b)/i,/^(?:CONSTRAINT\b)/i,/^(?:CONTENT\b)/i,/^(?:CONTINUE\b)/i,/^(?:CONVERT\b)/i,/^(?:CORRESPONDING\b)/i,/^(?:COUNT\b)/i,/^(?:CREATE\b)/i,/^(?:CROSS\b)/i,/^(?:CUBE\b)/i,/^(?:CURRENT_TIMESTAMP\b)/i,/^(?:CURSOR\b)/i,/^(?:DATABASE(S)?)/i,/^(?:DATEADD\b)/i,/^(?:DATEDIFF\b)/i,/^(?:DECLARE\b)/i,/^(?:DEFAULT\b)/i,/^(?:DELETE\b)/i,/^(?:DELETED\b)/i,/^(?:DESC\b)/i,/^(?:DETACH\b)/i,/^(?:DISTINCT\b)/i,/^(?:DROP\b)/i,/^(?:ECHO\b)/i,/^(?:EDGE\b)/i,/^(?:END\b)/i,/^(?:ENUM\b)/i,/^(?:ELSE\b)/i,/^(?:ESCAPE\b)/i,/^(?:EXCEPT\b)/i,/^(?:EXEC\b)/i,/^(?:EXECUTE\b)/i,/^(?:EXISTS\b)/i,/^(?:EXPLAIN\b)/i,/^(?:FALSE\b)/i,/^(?:FETCH\b)/i,/^(?:FIRST\b)/i,/^(?:FOR\b)/i,/^(?:FOREIGN\b)/i,/^(?:FROM\b)/i,/^(?:FULL\b)/i,/^(?:FUNCTION\b)/i,/^(?:GLOB\b)/i,/^(?:GO\b)/i,/^(?:GRAPH\b)/i,/^(?:GROUP\b)/i,/^(?:GROUPING\b)/i,/^(?:HAVING\b)/i,/^(?:IF\b)/i,/^(?:IDENTITY\b)/i,/^(?:IS\b)/i,/^(?:IN\b)/i,/^(?:INDEX\b)/i,/^(?:INDEXED\b)/i,/^(?:INNER\b)/i,/^(?:INSTEAD\b)/i,/^(?:INSERT\b)/i,/^(?:INSERTED\b)/i,/^(?:INTERSECT\b)/i,/^(?:INTERVAL\b)/i,/^(?:INTO\b)/i,/^(?:JOIN\b)/i,/^(?:KEY\b)/i,/^(?:LAST\b)/i,/^(?:LET\b)/i,/^(?:LEFT\b)/i,/^(?:LIKE\b)/i,/^(?:LIMIT\b)/i,/^(?:MATCHED\b)/i,/^(?:MATRIX\b)/i,/^(?:MAX(\s+)?(?=\())/i,/^(?:MAX(\s+)?(?=(,|\))))/i,/^(?:MIN(\s+)?(?=\())/i,/^(?:MERGE\b)/i,/^(?:MINUS\b)/i,/^(?:MODIFY\b)/i,/^(?:NATURAL\b)/i,/^(?:NEXT\b)/i,/^(?:NEW\b)/i,/^(?:NOCASE\b)/i,/^(?:NO\b)/i,/^(?:NOT\b)/i,/^(?:NULL\b)/i,/^(?:OFF\b)/i,/^(?:ON\b)/i,/^(?:ONLY\b)/i,/^(?:OF\b)/i,/^(?:OFFSET\b)/i,/^(?:OPEN\b)/i,/^(?:OPTION\b)/i,/^(?:OR\b)/i,/^(?:ORDER\b)/i,/^(?:OUTER\b)/i,/^(?:OVER\b)/i,/^(?:PATH\b)/i,/^(?:PARTITION\b)/i,/^(?:PERCENT\b)/i,/^(?:PIVOT\b)/i,/^(?:PLAN\b)/i,/^(?:PRIMARY\b)/i,/^(?:PRINT\b)/i,/^(?:PRIOR\b)/i,/^(?:QUERY\b)/i,/^(?:READ\b)/i,/^(?:RECORDSET\b)/i,/^(?:REDUCE\b)/i,/^(?:REFERENCES\b)/i,/^(?:REGEXP\b)/i,/^(?:REINDEX\b)/i,/^(?:RELATIVE\b)/i,/^(?:REMOVE\b)/i,/^(?:RENAME\b)/i,/^(?:REPEAT\b)/i,/^(?:REPLACE\b)/i,/^(?:REQUIRE\b)/i,/^(?:RESTORE\b)/i,/^(?:RETURN\b)/i,/^(?:RETURNS\b)/i,/^(?:RIGHT\b)/i,/^(?:ROLLBACK\b)/i,/^(?:ROLLUP\b)/i,/^(?:ROW\b)/i,/^(?:ROWS\b)/i,/^(?:SCHEMA(S)?)/i,/^(?:SEARCH\b)/i,/^(?:SEMI\b)/i,/^(?:SET\b)/i,/^(?:SETS\b)/i,/^(?:SHOW\b)/i,/^(?:SOME\b)/i,/^(?:SOURCE\b)/i,/^(?:STRATEGY\b)/i,/^(?:STORE\b)/i,/^(?:SUM\b)/i,/^(?:TABLE\b)/i,/^(?:TABLES\b)/i,/^(?:TARGET\b)/i,/^(?:TEMP\b)/i,/^(?:TEMPORARY\b)/i,/^(?:TEXTSTRING\b)/i,/^(?:THEN\b)/i,/^(?:TIMEOUT\b)/i,/^(?:TO\b)/i,/^(?:TOP\b)/i,/^(?:TRAN\b)/i,/^(?:TRANSACTION\b)/i,/^(?:TRIGGER\b)/i,/^(?:TRUE\b)/i,/^(?:TRUNCATE\b)/i,/^(?:UNION\b)/i,/^(?:UNIQUE\b)/i,/^(?:UNPIVOT\b)/i,/^(?:UPDATE\b)/i,/^(?:USE\b)/i,/^(?:USING\b)/i,/^(?:VALUE\b)/i,/^(?:VALUES\b)/i,/^(?:VERTEX\b)/i,/^(?:VIEW\b)/i,/^(?:WHEN\b)/i,/^(?:WHERE\b)/i,/^(?:WHILE\b)/i,/^(?:WITH\b)/i,/^(?:WORK\b)/i,/^(?:(\d*[.])?\d+[eE]\d+)/i,/^(?:(\d*[.])?\d+)/i,/^(?:->)/i,/^(?:#)/i,/^(?:\+)/i,/^(?:-)/i,/^(?:\*)/i,/^(?:\/)/i,/^(?:%)/i,/^(?:!===)/i,/^(?:===)/i,/^(?:!==)/i,/^(?:==)/i,/^(?:>=)/i,/^(?:&)/i,/^(?:\|)/i,/^(?:<<)/i,/^(?:>>)/i,/^(?:>)/i,/^(?:<=)/i,/^(?:<>)/i,/^(?:<)/i,/^(?:=)/i,/^(?:!=)/i,/^(?:\()/i,/^(?:\))/i,/^(?:@)/i,/^(?:\{)/i,/^(?:\})/i,/^(?:\])/i,/^(?::-)/i,/^(?:\?-)/i,/^(?:\.\.)/i,/^(?:\.)/i,/^(?:,)/i,/^(?:::)/i,/^(?::)/i,/^(?:;)/i,/^(?:\$)/i,/^(?:\?)/i,/^(?:!)/i,/^(?:\^)/i,/^(?:~)/i,/^(?:[a-zA-Z_][a-zA-Z_0-9]*)/i,/^(?:$)/i,/^(?:.)/i],conditions:{INITIAL:{rules:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255,256,257,258,259,260,261,262,263,264,265,266,267,268,269,270,271,272,273,274],inclusive:!0}}}}();return ya.lexer=_a,e.prototype=ya,ya.Parser=e,new e}();void 0!==k&&"undefined"!=typeof t&&(t.parser=P,t.Parser=P.Parser,t.parse=function(){return P.parse.apply(P,arguments)},t.main=function(n){n[1]||(console.log("Usage: "+n[0]+" FILE"),e.exit(1));var r=null.readFileSync(null.normalize(n[1]),"utf8");return t.parser.parse(r)},"undefined"!=typeof r&&k.main===r&&t.main(e.argv.slice(1))),O.prettyflag=!1,O.pretty=function(e,t){var n=O.prettyflag;O.prettyflag=!t;var r=O.parse(e).toString();return O.prettyflag=n,r};var R=O.utils={},I=R.escapeq=function(e){return(""+e).replace(/["'\\\n\r\u2028\u2029]/g,function(e){switch(e){case'"':case"'":case"\\":return"\\"+e;case"\n":return"\\n";case"\r":return"\\r";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029"}})},N=R.undoubleq=function(e){return e.replace(/(\')/g,"''")},M=R.doubleq=function(e){return e.replace(/(\'\')/g,"\\'")},L=(R.doubleqq=function(e){return e.replace(/\'/g,"'")},function(e){return e[0]===String.fromCharCode(65279)&&(e=e.substr(1)),e});R.global=function(){try{return Function("return this")()}catch(t){var e=self||window||e;if(e)return e;throw new Error("Unable to locate global object")}}(),R.isNativeFunction=function(e){return"function"==typeof e&&!!~e.toString().indexOf("[native code]")},R.isWebWorker=function(){try{var e=R.global.importScripts;return R.isNativeFunction(e)}catch(e){return!1}}(),R.isNode=function(){try{return R.isNativeFunction(R.global.process.reallyExit)}catch(e){return!1}}(),R.isBrowser=function(){try{return R.isNativeFunction(R.global.location.reload)}catch(e){return!1}}(),R.isBrowserify=function(){return R.isBrowser&&"undefined"!=typeof e&&e.browser}(),R.isRequireJS=function(){return R.isBrowser&&"function"==typeof k&&"function"==typeof k.specified}(),R.isMeteor=function(){return"undefined"!=typeof Meteor&&Meteor.release}(),R.isMeteorClient=R.isMeteorClient=function(){return R.isMeteor&&Meteor.isClient}(),R.isMeteorServer=function(){return R.isMeteor&&Meteor.isServer}(),R.isCordova=function(){return"object"==typeof cordova}(),R.isReactNative=!1,R.hasIndexedDB=function(){return!!R.global.indexedDB}(),R.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)};var D=R.loadFile=function(e,t,n,r){var i;if(R.isNode||R.isMeteorServer);else if(R.isCordova)R.global.requestFileSystem(LocalFileSystem.PERSISTENT,0,function(t){t.root.getFile(e,{create:!1},function(e){e.file(function(e){var t=new FileReader;t.onloadend=function(e){n(L(this.result))},t.readAsText(e)})})});else if("string"==typeof e)if("#"===e.substr(0,1)&&"undefined"!=typeof document)i=document.querySelector(e).textContent,n(i);else{var o=new XMLHttpRequest;o.onreadystatechange=function(){4===o.readyState&&(200===o.status?n&&n(L(o.responseText)):r&&r(o))},o.open("GET",e,t),o.responseType="text",o.send()}else if(e instanceof Event){var a=e.target.files,s=new FileReader;a[0].name,s.onload=function(e){var t=e.target.result;n(L(t))},s.readAsText(a[0])}};R.loadBinaryFile=function(e,t,n,r){if(R.isNode||R.isMeteorServer);else if("string"==typeof e){var i=new XMLHttpRequest;i.open("GET",e,t),i.responseType="arraybuffer",i.onload=function(){for(var e=new Uint8Array(i.response),t=[],r=0;r<e.length;++r)t[r]=String.fromCharCode(e[r]);n(t.join(""))},i.send()}else if(e instanceof Event){var o=e.target.files,a=new FileReader;o[0].name,a.onload=function(e){var t=e.target.result;n(t)},a.readAsArrayBuffer(o[0])}else e instanceof Blob&&n(e)},R.removeFile=function(e,t){if(!R.isNode)throw new Error("You can remove files only in Node.js and Apache Cordova")},R.deleteFile=function(e,t){},R.autoExtFilename=function(e,t,n){return n=n||{},"string"!=typeof e||e.match(/^[A-z]+:\/\/|\n|\..{2,4}$/)||0===n.autoExt||!1===n.autoExt?e:e+"."+t};var F=(R.fileExists=function(e,t){if(!R.isNode)throw new Error("You can use exists() only in Node.js or Apach Cordova")},R.saveFile=function(e,t,n,r){var i=1;if(void 0===e)i=t,n&&(i=n(i));else if(R.isNode);else if(9===f()){var o=t.replace(/\r\n/g,"&#A;&#D;");o=o.replace(/\n/g,"&#D;"),o=o.replace(/\t/g,"&#9;");var a=R.global.open("about:blank","_blank");a.document.write(o),a.document.close(),a.document.execCommand("SaveAs",!1,e),a.close()}else{var s={disableAutoBom:!1};O.utils.extend(s,r);var u=new Blob([t],{type:"text/plain;charset=utf-8"});Ee(u,e,s.disableAutoBom),n&&(i=n(i))}return i},R.hash=function(e){for(var t=2166136261,n=e.length;n;)t^=e.charCodeAt(--n),t+=(t<<1)+(t<<4)+(t<<7)+(t<<8)+(t<<24);return t}),j=R.arrayUnion=function(e,t){var n=t.slice(0);return e.forEach(function(e){n.indexOf(e)<0&&n.push(e)}),n},B=R.arrayDiff=function(e,t){return e.filter(function(e){return t.indexOf(e)<0})},U=R.arrayIntersect=function(e,t){var n=[];return e.forEach(function(e){var r=!1;t.forEach(function(t){r=r||e===t}),r&&n.push(e)}),n},z=R.arrayUnionDeep=function(e,t){var n=t.slice(0);return e.forEach(function(e){var t=!1;n.forEach(function(n){t=t||q(e,n)}),t||n.push(e)}),n},V=R.arrayExceptDeep=function(e,t){var n=[];return e.forEach(function(e){var r=!1;t.forEach(function(t){r=r||q(e,t)}),r||n.push(e)}),n},G=R.arrayIntersectDeep=function(e,t){var n=[];return e.forEach(function(e){var r=!1;t.forEach(function(t){r=r||q(e,t,!0)}),r&&n.push(e)}),n},H=R.cloneDeep=function e(t){if(null===t||"object"!=typeof t)return t;if(t instanceof Date)return new Date(t);var n=t.constructor();for(var r in t)t.hasOwnProperty(r)&&(n[r]=e(t[r]));return n},q=R.deepEqual=function(e,t){if(e===t)return!0;if("object"==typeof e&&null!==e&&"object"==typeof t&&null!==t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(var n in e)if(!q(e[n],t[n]))return!1;return!0}return!1},W=R.distinctArray=function(e){for(var t={},n=0,r=e.length;n<r;n++){var i;i="object"==typeof e[n]?Object.keys(e[n]).sort().map(function(t){return t+"`"+e[n][t]}).join("`"):e[n],t[i]=e[n]}var o=[];for(var a in t)o.push(t[a]);return o},X=R.extend=function(e,t){e=e||{};for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e},$=R.flatArray=function(e){if(!e||0===e.length)return[];if("object"==typeof e&&e instanceof O.Recordset)return e.data.map(function(t){return t[e.columns[0].columnid]});var t=Object.keys(e[0])[0];return void 0===t?[]:e.map(function(e){return e[t]})};R.arrayOfArrays=function(e){return e.map(function(e){var t=[];for(var n in e)t.push(e[n]);return t})},Array.isArray||(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)}),R.xlsnc=function(e){var t=String.fromCharCode(65+e%26);return e>=26&&(e=(e/26|0)-1,t=String.fromCharCode(65+e%26)+t,e>26&&(e=(e/26|0)-1,t=String.fromCharCode(65+e%26)+t)),t},R.xlscn=function(e){var t=e.charCodeAt(0)-65;return e.length>1&&(t=26*(t+1)+e.charCodeAt(1)-65,e.length>2&&(t=26*(t+1)+e.charCodeAt(2)-65)),t},R.domEmptyChildren=function(e){for(var t=e.childNodes.length;t--;)e.removeChild(e.lastChild)},R.like=function(e,t,n){n||(n="");for(var r=0,i="^";r<e.length;){var o=e[r],a="";r<e.length-1&&(a=e[r+1]),o===n?(i+="\\"+a,r++):"["===o&&"^"===a?(i+="[^",r++):"["===o||"]"===o?i+=o:"%"===o?i+=".*":"_"===o?i+=".":"/.*+?|(){}".indexOf(o)>-1?i+="\\"+o:i+=o,r++}return i+="$",(""+(t||"")).toUpperCase().search(RegExp(i.toUpperCase()))>-1},R.glob=function(e,t){for(var n=0,r="^";n<t.length;){var i=t[n],o="";n<t.length-1&&(o=t[n+1]),"["===i&&"^"===o?(r+="[^",n++):"["===i||"]"===i?r+=i:"*"===i?r+=".*":"?"===i?r+=".":"/.*+?|(){}".indexOf(i)>-1?r+="\\"+i:r+=i,n++}return r+="$",(""+(e||"")).toUpperCase().search(RegExp(r.toUpperCase()))>-1},R.findAlaSQLPath=function(){if(R.isWebWorker)return"";if(R.isMeteorClient)return"/packages/dist/";if(R.isMeteorServer)return"assets/packages/dist/";if(R.isNode)return"";if(R.isBrowser)for(var e=document.getElementsByTagName("script"),t=0;t<e.length;t++){if("alasql-worker.js"===e[t].src.substr(-16).toLowerCase())return e[t].src.substr(0,e[t].src.length-16);if("alasql-worker.min.js"===e[t].src.substr(-20).toLowerCase())return e[t].src.substr(0,e[t].src.length-20);if("alasql.js"===e[t].src.substr(-9).toLowerCase())return e[t].src.substr(0,e[t].src.length-9);if("alasql.min.js"===e[t].src.substr(-13).toLowerCase())return e[t].src.substr(0,e[t].src.length-13)}return""};var Y=function(){var e=null;if(R.isNode||R.isBrowserify||R.isMeteorServer||(e=R.global.XLSX||null),null===e)throw new Error("Please include the xlsx.js library");return e};O.path=O.utils.findAlaSQLPath(),O.utils.uncomment=function(e){e=("__"+e+"__").split("");for(var t,n=!1,r=!1,i=!1,o=0,a=e.length;o<a;o++){var s="\\"!==e[o-1]||"\\"===e[o-2];n?e[o]===t&&s&&(n=!1):r?"*"===e[o]&&"/"===e[o+1]?(e[o]=e[o+1]="",r=!1,o++):e[o]="":i?("\n"!==e[o+1]&&"\r"!==e[o+1]||(i=!1),e[o]=""):'"'===e[o]||"'"===e[o]?(n=!0,t=e[o]):"["===e[o]&&"@"!==e[o-1]?(n=!0,t="]"):"/"===e[o]&&"*"===e[o+1]&&(e[o]="",r=!0)}return e=e.join("").slice(2,-2)},O.parser=P,O.parser.parseError=function(e,t){throw new Error("Have you used a reserved keyword without `escaping` it?\n"+e)},O.parse=function(e){return P.parse(O.utils.uncomment(e))},O.engines={},O.databases={},O.databasenum=0,O.options={},O.options.errorlog=!1,O.options.valueof=!1,O.options.dropifnotexists=!1,O.options.datetimeformat="sql",O.options.casesensitive=!0,O.options.logtarget="output",O.options.logprompt=!0,O.options.progress=!1,O.options.modifier=void 0,O.options.columnlookup=10,O.options.autovertex=!0,O.options.usedbo=!0,O.options.autocommit=!0,O.options.cache=!0,O.options.tsql=!0,O.options.mysql=!0,O.options.postgres=!0,O.options.oracle=!0,O.options.sqlite=!0,O.options.orientdb=!0,O.options.nocount=!1,O.options.nan=!1,O.options.joinstar="overwrite",O.vars={},O.declares={},O.prompthistory=[],O.plugins={},O.from={},O.into={},O.fn={},O.aggr={},O.busy=0,O.MAXSQLCACHESIZE=1e4,O.DEFAULTDATABASEID="alasql",O.lastid=0,O.buffer={},O.use=function(e){if(e||(e=O.DEFAULTDATABASEID),O.useid!==e){O.useid=e;var t=O.databases[O.useid];O.tables=t.tables,t.resetSqlCache(),O.options.usedbo&&(O.databases.dbo=t)}},O.autoval=function(e,t,n,r){var i=r?O.databases[r]:O.databases[O.useid];if(!i.tables[e])throw new Error("Tablename not found: "+e);if(!i.tables[e].identities[t])throw new Error("Colname not found: "+t);return n?i.tables[e].identities[t].value||null:i.tables[e].identities[t].value-i.tables[e].identities[t].step||null},O.exec=function(e,t,n,r){if("function"==typeof t&&(r=n,n=t,t={}),delete O.error,t=t||{},!O.options.errorlog)return O.dexec(O.useid,e,t,n,r);try{return O.dexec(O.useid,e,t,n,r)}catch(e){O.error=e,n&&n(null,O.error)}},O.dexec=function(e,t,n,r,i){var o,a=O.databases[e];if(O.options.cache){o=F(t);var s=a.sqlCache[o];if(s&&a.dbversion===s.dbversion)return s(n,r)}var u=O.parse(t);if(u.statements){if(0===u.statements.length)return 0;if(1===u.statements.length){if(u.statements[0].compile){var s=u.statements[0].compile(e,n);if(!s)return;s.sql=t,s.dbversion=a.dbversion,O.options.cache&&(a.sqlCacheSize>O.MAXSQLCACHESIZE&&a.resetSqlCache(),a.sqlCacheSize++,a.sqlCache[o]=s);var l=O.res=s(n,r,i);return l}O.precompile(u.statements[0],O.useid,n);var l=O.res=u.statements[0].execute(e,n,r,i);return l}if(!r)return O.drun(e,u,n,r,i);O.adrun(e,u,n,r,i)}},O.drun=function(e,t,n,r,i){var o=O.useid;o!==e&&O.use(e);for(var a=[],s=0,u=t.statements.length;s<u;s++)if(t.statements[s])if(t.statements[s].compile){var l=t.statements[s].compile(O.useid);a.push(O.res=l(n,null,i))}else O.precompile(t.statements[s],O.useid,n),a.push(O.res=t.statements[s].execute(O.useid,n));return o!==e&&O.use(o),r&&r(a),O.res=a,a},O.adrun=function(e,t,n,r,i){function o(c){void 0!==c&&l.push(c);var f=t.statements.shift();if(f)if(f.compile){var h=f.compile(O.useid);h(n,o,i),!1!==O.options.progress&&O.options.progress(s,a++)}else O.precompile(t.statements[0],O.useid,n),f.execute(O.useid,n,o),!1!==O.options.progress&&O.options.progress(s,a++);else u!==e&&O.use(u),r(l)}var a=0,s=t.statements.length;!1!==O.options.progress&&O.options.progress(s,a++);var u=O.useid;u!==e&&O.use(e);var l=[];o()},O.compile=function(e,t){t=t||O.useid;var n=O.parse(e);if(1===n.statements.length){var r=n.statements[0].compile(t);return r.promise=function(e){return new Promise(function(t,n){r(e,function(e,r){r?n(r):t(e)})})},r}throw new Error("Cannot compile, because number of statements in SQL is not equal to 1")},R.global.Promise||R.isNode||function(){"use strict";function o(e){return"function"==typeof e||"object"==typeof e&&null!==e}function a(e){return"function"==typeof e}function s(e){X=e}function l(e){K=e}function c(){return function(){W(h)}}function f(){return function(){setTimeout(h,1)}}function h(){for(var e=0;Z>e;e+=2)(0,re[e])(re[e+1]),re[e]=void 0,re[e+1]=void 0;Z=0}function p(e,t){var n=this,r=new this.constructor(v);void 0===r[ae]&&L(r);var i=n._state;if(i){var o=arguments[i-1];K(function(){I(i,r,o,n._result)})}else C(n,r,e,t);return r}function d(e){var t=this;if(e&&"object"==typeof e&&e.constructor===t)return e;var n=new t(v);return w(n,e),n}function v(){}function g(){return new TypeError("You cannot resolve a promise with itself")}function y(){return new TypeError("A promises callback cannot return that same promise.")}function m(e){try{return e.then}catch(e){return ce.error=e,ce}}function _(e,t,n,r){try{e.call(t,n,r)}catch(e){return e}}function b(e,t,n){K(function(e){var r=!1,i=_(n,t,function(n){r||(r=!0,t!==n?w(e,n):S(e,n))},function(t){r||(r=!0,A(e,t))},"Settle: "+(e._label||" unknown promise"));!r&&i&&(r=!0,A(e,i))},e)}function E(e,t){t._state===ue?S(e,t._result):t._state===le?A(e,t._result):C(t,void 0,function(t){w(e,t)},function(t){A(e,t)})}function x(e,t,n){t.constructor===e.constructor&&n===ie&&constructor.resolve===oe?E(e,t):n===ce?A(e,ce.error):void 0===n?S(e,t):a(n)?b(e,t,n):S(e,t)}function w(e,t){e===t?A(e,g()):o(t)?x(e,t,m(t)):S(e,t)}function T(e){e._onerror&&e._onerror(e._result),O(e)}function S(e,t){e._state===se&&(e._result=t,e._state=ue,0!==e._subscribers.length&&K(O,e))}function A(e,t){e._state===se&&(e._state=le,e._result=t,K(T,e))}function C(e,t,n,r){var i=e._subscribers,o=i.length;e._onerror=null,i[o]=t,i[o+ue]=n,i[o+le]=r,0===o&&e._state&&K(O,e)}function O(e){var t=e._subscribers,n=e._state;if(0!==t.length){for(var r,i,o=e._result,a=0;a<t.length;a+=3)r=t[a],i=t[a+n],r?I(n,r,i,o):i(o);e._subscribers.length=0}}function P(){this.error=null}function R(e,t){try{return e(t)}catch(e){return fe.error=e,fe}}function I(e,t,n,r){var i,o,s,u,l=a(n);if(l){if(i=R(n,r),i===fe?(u=!0,o=i.error,i=null):s=!0,t===i)return void A(t,y())}else i=r,s=!0;t._state!==se||(l&&s?w(t,i):u?A(t,o):e===ue?S(t,i):e===le&&A(t,i))}function N(e,t){try{t(function(t){w(e,t)},function(t){A(e,t)})}catch(t){A(e,t)}}function M(){return he++}function L(e){e[ae]=he++,e._state=void 0,e._result=void 0,e._subscribers=[]}function D(e){return new ye(this,e).promise}function F(e){var t=this;return new t(Y(e)?function(n,r){for(var i=e.length,o=0;i>o;o++)t.resolve(e[o]).then(n,r)}:function(e,t){t(new TypeError("You must pass an array to race."))})}function j(e){var t=this,n=new t(v);return A(n,e),n}function B(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function U(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function z(e){this[ae]=M(),this._result=this._state=void 0,this._subscribers=[],v!==e&&("function"!=typeof e&&B(),this instanceof z?N(this,e):U())}function V(e,t){this._instanceConstructor=e,this.promise=new e(v),this.promise[ae]||L(this.promise),Array.isArray(t)?(this._input=t,this.length=t.length,this._remaining=t.length,this._result=new Array(this.length),0===this.length?S(this.promise,this._result):(this.length=this.length||0,this._enumerate(),0===this._remaining&&S(this.promise,this._result))):A(this.promise,G())}function G(){return new Error("Array Methods must be provided an Array")}function H(){var e;if("undefined"!=typeof i)e=i;else if("undefined"!=typeof self)e=self;else try{e=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}var t=e.Promise;(!t||"[object Promise]"!==Object.prototype.toString.call(t.resolve())||t.cast)&&(e.Promise=ge)}var q;q=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)};var W,X,$,Y=q,Z=0,K=function(e,t){re[Z]=e,re[Z+1]=t,2===(Z+=2)&&(X?X(h):$())},J="undefined"!=typeof window?window:void 0,Q=J||{},ee=Q.MutationObserver||Q.WebKitMutationObserver,te="undefined"==typeof self&&"undefined"!=typeof e&&"[object process]"==={}.toString.call(e),ne="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,re=new Array(1e3);$=te?function(){return function(){e.nextTick(h)}}():ee?function(){var e=0,t=new ee(h),n=document.createTextNode("");return t.observe(n,{characterData:!0}),function(){n.data=e=++e%2}}():ne?function(){var e=new MessageChannel;return e.port1.onmessage=h,function(){e.port2.postMessage(0)}}():void 0===J&&"function"==typeof k?function(){try{var e=k,t=e("vertx");return W=t.runOnLoop||t.runOnContext,c()}catch(e){return f()}}():f();var ie=p,oe=d,ae=Math.random().toString(36).substring(16),se=void 0,ue=1,le=2,ce=new P,fe=new P,he=0,pe=D,de=F,ve=j,ge=z;z.all=pe,z.race=de,z.resolve=oe,z.reject=ve,z._setScheduler=s,z._setAsap=l,z._asap=K,z.prototype={constructor:z,then:ie,catch:function(e){return this.then(null,e)}};var ye=V;V.prototype._enumerate=function(){for(var e=this.length,t=this._input,n=0;this._state===se&&e>n;n++)this._eachEntry(t[n],n)},V.prototype._eachEntry=function(e,t){var n=this._instanceConstructor,r=n.resolve;if(r===oe){var i=m(e);if(i===ie&&e._state!==se)this._settledAt(e._state,t,e._result);else if("function"!=typeof i)this._remaining--,this._result[t]=e;else if(n===ge){var o=new n(v);x(o,e,i),this._willSettleAt(o,t)}else this._willSettleAt(new n(function(t){t(e)}),t)}else this._willSettleAt(r(e),t)},V.prototype._settledAt=function(e,t,n){var r=this.promise;r._state===se&&(this._remaining--,e===le?A(r,n):this._result[t]=n),0===this._remaining&&S(r,this._result)},V.prototype._willSettleAt=function(e,t){var n=this;C(e,void 0,function(e){n._settledAt(ue,t,e)},function(e){n._settledAt(le,t,e)})};var me=H,_e={Promise:ge,polyfill:me};void 0!==(u=function(){return _e}.call(t,n,t,r))&&(r.exports=u),me()}.call(this);var Z=function(e,t,n,r){return new R.global.Promise(function(i,o){O(e,t,function(e,t){t?o(t):(n&&r&&!1!==O.options.progress&&O.options.progress(n,r),i(e))})})},K=function(e){if(!(e.length<1)){for(var t,n,r,i=[],o=0;o<e.length;o++){if(t=e[o],"string"==typeof t&&(t=[t]),!R.isArray(t)||t.length<1||2<t.length)throw new Error("Error in .promise parameter");n=t[0],r=t[1]||void 0,i.push(Z(n,r,o,e.length))}return R.global.Promise.all(i)}};O.promise=function(e,t){if("undefined"==typeof Promise)throw new Error("Please include a Promise/A+ library");if("string"==typeof e)return Z(e,t);if(!R.isArray(e)||e.length<1||void 0!==t)throw new Error("Error in .promise parameters");return K(e)};var J=O.Database=function(e){var t=this;if(t===O)if(e){if(t=O.databases[e],O.databases[e]=t,!t)throw new Error('Database "'+e+'" not found')}else t=O.databases.alasql,O.options.tsql&&(O.databases.tempdb=O.databases.alasql);return e||(e="db"+O.databasenum++),t.databaseid=e,O.databases[e]=t,t.dbversion=0,t.tables={},t.views={},t.triggers={},t.indices={},t.objects={},t.counter=0,t.resetSqlCache(),t};J.prototype.resetSqlCache=function(){this.sqlCache={},this.sqlCacheSize=0},J.prototype.exec=function(e,t,n){return O.dexec(this.databaseid,e,t,n)},J.prototype.autoval=function(e,t,n){return O.autoval(e,t,n,this.databaseid)},J.prototype.transaction=function(e){return e(new O.Transaction(this.databaseid))};var Q=O.Transaction=function(e){return this.transactionid=Date.now(),this.databaseid=e,this.commited=!1,this.dbversion=O.databases[e].dbversion,this.bank=JSON.stringify(O.databases[e]),this};Q.prototype.commit=function(){this.commited=!0,O.databases[this.databaseid].dbversion=Date.now(),delete this.bank},Q.prototype.rollback=function(){if(this.commited)throw new Error("Transaction already commited");O.databases[this.databaseid]=JSON.parse(this.bank),delete this.bank},Q.prototype.exec=function(e,t,n){return O.dexec(this.databaseid,e,t,n)},Q.prototype.executeSQL=Q.prototype.exec;var ee=O.Table=function(e){this.data=[],this.columns=[],this.xcolumns={},this.inddefs={},this.indices={},this.uniqs={},this.uniqdefs={},this.identities={},this.checks=[],this.checkfns=[],this.beforeinsert={},this.afterinsert={},this.insteadofinsert={},this.beforedelete={},this.afterdelete={},this.insteadofdelete={},this.beforeupdate={},this.afterupdate={},this.insteadofupdate={},X(this,e)};ee.prototype.indexColumns=function(){var e=this;e.xcolumns={},e.columns.forEach(function(t){e.xcolumns[t.columnid]=t})};var te=(O.View=function(e){this.columns=[],this.xcolumns={},this.query=[],X(this,e)},O.Query=function(e){this.alasql=O,this.columns=[],this.xcolumns={},this.selectGroup=[],this.groupColumns={},X(this,e)}),ne=(O.Recordset=function(e){X(this,e)},P.yy=O.yy={});ne.extend=X,ne.casesensitive=O.options.casesensitive;var re=ne.Base=function(e){return ne.extend(this,e)};re.prototype.toString=function(){},re.prototype.toType=function(){},re.prototype.toJS=function(){},re.prototype.compile=c,re.prototype.exec=function(){},re.prototype.compile=c,re.prototype.exec=function(){},ne.Statements=function(e){return ne.extend(this,e)},ne.Statements.prototype.toString=function(){return this.statements.map(function(e){return e.toString()}).join("; ")},ne.Statements.prototype.compile=function(e){var t=this.statements.map(function(t){return t.compile(e)});return 1===t.length?t[0]:function(e,n){var r=t.map(function(t){return t(e)});return n&&n(r),r}},ne.Search=function(e){return ne.extend(this,e)},ne.Search.prototype.toString=function(){var e="SEARCH ";return this.selectors&&(e+=this.selectors.toString()),this.from&&(e+="FROM "+this.from.toString()),e},ne.Search.prototype.toJS=function(e){return"this.queriesfn["+(this.queriesidx-1)+"](this.params,null,"+e+")"},ne.Search.prototype.compile=function(e){var t=e,n=this,r=function(e,i){var o;return h.bind(n)(t,e,function(e){o=b(r.query,e),i&&(o=i(o))}),o};return r.query={},r},O.srch={},O.srch.PROP=function(e,t,n){if("XML"===n.mode){var r=[];return e.children.forEach(function(e){e.name.toUpperCase()===t[0].toUpperCase()&&r.push(e)}),r.length>0?{status:1,values:r}:{status:-1,values:[]}}return"object"!=typeof e||null===e||"object"!=typeof t||void 0===e[t[0]]?{status:-1,values:[]}:{status:1,values:[e[t[0]]]}},O.srch.APROP=function(e,t){return"object"!=typeof e||null===e||"object"!=typeof t||void 0===e[t[0]]?{status:1,values:[void 0]}:{status:1,values:[e[t[0]]]}},O.srch.EQ=function(e,t,n,r){var i=t[0].toJS("x","");return e===new Function("x,alasql,params","return "+i)(e,O,r)?{status:1,values:[e]}:{status:-1,values:[]}},O.srch.LIKE=function(e,t,n,r){var i=t[0].toJS("x",""),o=new Function("x,alasql,params","return "+i);return e.toUpperCase().match(new RegExp("^"+o(e,O,r).toUpperCase().replace(/%/g,".*").replace(/\?|_/g,".")+"$"),"g")?{status:1,values:[e]}:{status:-1,values:[]}},O.srch.ATTR=function(e,t,n){if("XML"===n.mode)return void 0===t?{status:1,values:[e.attributes]}:"object"==typeof e&&"object"==typeof e.attributes&&void 0!==e.attributes[t[0]]?{status:1,values:[e.attributes[t[0]]]}:{status:-1,values:[]};throw new Error("ATTR is not using in usual mode")},O.srch.CONTENT=function(e,t,n){if("XML"===n.mode)return{status:1,values:[e.content]};throw new Error("ATTR is not using in usual mode")},O.srch.SHARP=function(e,t){var n=O.databases[O.useid].objects[t[0]];return void 0!==e&&e===n?{status:1,values:[e]}:{status:-1,values:[]}},O.srch.PARENT=function(){return console.log("PARENT not implemented",arguments),{status:-1,values:[]}},O.srch.CHILD=function(e,t,n){return"object"==typeof e?Array.isArray(e)?{status:1,values:e}:"XML"===n.mode?{status:1,values:Object.keys(e.children).map(function(t){return e.children[t]})}:{status:1,values:Object.keys(e).map(function(t){return e[t]})}:{status:1,values:[]}},O.srch.KEYS=function(e){return"object"==typeof e&&null!==e?{status:1,values:Object.keys(e)}:{status:1,values:[]}},O.srch.WHERE=function(e,t,n,r){var i=t[0].toJS("x","");return new Function("x,alasql,params","return "+i)(e,O,r)?{status:1,values:[e]}:{status:-1,values:[]}},O.srch.NAME=function(e,t){return e.name===t[0]?{status:1,values:[e]}:{status:-1,values:[]}},O.srch.CLASS=function(e,t){return e.$class==t?{status:1,values:[e]}:{status:-1,values:[]}},O.srch.VERTEX=function(e){return"VERTEX"===e.$node?{status:1,values:[e]}:{status:-1,values:[]}},O.srch.INSTANCEOF=function(e,t){return e instanceof O.fn[t[0]]?{status:1,values:[e]}:{status:-1,values:[]}},O.srch.EDGE=function(e){return"EDGE"===e.$node?{status:1,values:[e]}:{status:-1,values:[]}},O.srch.EX=function(e,t,n,r){var i=t[0].toJS("x","");return{status:1,values:[new Function("x,alasql,params","return "+i)(e,O,r)]}},O.srch.RETURN=function(e,t,n,r){var i={};return t&&t.length>0&&t.forEach(function(t){var n=t.toJS("x",""),o=new Function("x,alasql,params","return "+n);void 0===t.as&&(t.as=t.toString()),i[t.as]=o(e,O,r)}),{status:1,values:[i]}},O.srch.REF=function(e){return{status:1,values:[O.databases[O.useid].objects[e]]}},O.srch.OUT=function(e){return e.$out&&e.$out.length>0?{status:1,values:e.$out.map(function(e){return O.databases[O.useid].objects[e]})}:{status:-1,values:[]}},O.srch.OUTOUT=function(e){if(e.$out&&e.$out.length>0){var t=[];return e.$out.forEach(function(e){var n=O.databases[O.useid].objects[e];n&&n.$out&&n.$out.length>0&&n.$out.forEach(function(e){t=t.concat(O.databases[O.useid].objects[e])})}),{status:1,values:t}}return{status:-1,values:[]}},O.srch.IN=function(e){return e.$in&&e.$in.length>0?{status:1,values:e.$in.map(function(e){return O.databases[O.useid].objects[e]})}:{status:-1,values:[]}},O.srch.ININ=function(e){if(e.$in&&e.$in.length>0){var t=[];return e.$in.forEach(function(e){var n=O.databases[O.useid].objects[e];n&&n.$in&&n.$in.length>0&&n.$in.forEach(function(e){t=t.concat(O.databases[O.useid].objects[e])})}),{status:1,values:t}}return{status:-1,values:[]}},O.srch.AS=function(e,t){return O.vars[t[0]]=e,{status:1,values:[e]}},O.srch.AT=function(e,t){return{status:1,values:[O.vars[t[0]]]}},O.srch.CLONEDEEP=function(e){return{status:1,values:[H(e)]}},O.srch.SET=function(e,t,n,r){var i=t.map(function(e){return"@"===e.method?"alasql.vars['"+e.variable+"']="+e.expression.toJS("x",""):"$"===e.method?"params['"+e.variable+"']="+e.expression.toJS("x",""):"x['"+e.column.columnid+"']="+e.expression.toJS("x","")}).join(";");return new Function("x,params,alasql",i)(e,r,O),{status:1,values:[e]}},O.srch.ROW=function(e,t,n,r){var i="var y;return [";return i+=t.map(function(e){return e.toJS("x","")}).join(","),i+="]",{status:1,values:[new Function("x,params,alasql",i)(e,r,O)]}},O.srch.D3=function(e){return"VERTEX"!==e.$node&&"EDGE"===e.$node&&(e.source=e.$in[0],e.target=e.$out[0]),{status:1,values:[e]}};var ie=function(e){if(e){if(e&&1===e.length&&e[0].expression&&"function"==typeof e[0].expression){var t=e[0].expression;return function(e,n){var r=t(e),i=t(n);return r>i?1:r===i?0:-1}}var n="",r="";return e.forEach(function(e){var t="";if(e.expression instanceof ne.NumValue&&(e.expression=self.columns[e.expression.value-1]),e.expression instanceof ne.Column){var i=e.expression.columnid;O.options.valueof&&(t=".valueOf()"),e.nocase&&(t+=".toUpperCase()"),"_"===i?(n+="if(a"+t+("ASC"===e.direction?">":"<")+"b"+t+")return 1;",n+="if(a"+t+"==b"+t+"){"):(n+="if((a['"+i+"']||'')"+t+("ASC"===e.direction?">":"<")+"(b['"+i+"']||'')"+t+")return 1;",n+="if((a['"+i+"']||'')"+t+"==(b['"+i+"']||'')"+t+"){")}else t=".valueOf()",e.nocase&&(t+=".toUpperCase()"),n+="if(("+e.toJS("a","")+"||'')"+t+("ASC"===e.direction?">(":"<(")+e.toJS("b","")+"||'')"+t+")return 1;",n+="if(("+e.toJS("a","")+"||'')"+t+"==("+e.toJS("b","")+"||'')"+t+"){";r+="}"}),n+="return 0;",n+=r+"return -1",new Function("a,b",n)}};O.srch.ORDERBY=function(e,t){return{status:1,values:e.sort(ie(t))}};var oe=function(e){for(var t=0,n=e.sources.length;t<n;t++){var r=e.sources[t];if(delete r.ix,t>0&&"ix"==r.optimization&&r.onleftfn&&r.onrightfn){if(r.databaseid&&O.databases[r.databaseid].tables[r.tableid]){O.databases[r.databaseid].tables[r.tableid].indices||(e.database.tables[r.tableid].indices={});var i=O.databases[r.databaseid].tables[r.tableid].indices[F(r.onrightfns+"`"+r.srcwherefns)];!O.databases[r.databaseid].tables[r.tableid].dirty&&i&&(r.ix=i)}if(!r.ix){r.ix={};for(var o,a={},s=0,u=r.data.length;(o=r.data[s])||r.getfn&&(o=r.getfn(s))||s<u;){if(r.getfn&&!r.dontcache&&(r.data[s]=o),a[r.alias||r.tableid]=o,r.srcwherefn(a,e.params,O)){var l=r.onrightfn(a,e.params,O),c=r.ix[l];c||(c=r.ix[l]=[]),c.push(o)}s++}r.databaseid&&O.databases[r.databaseid].tables[r.tableid]&&(O.databases[r.databaseid].tables[r.tableid].indices[F(r.onrightfns+"`"+r.srcwherefns)]=r.ix)}}else if(r.wxleftfn){if(O.databases[r.databaseid].engineid||(i=O.databases[r.databaseid].tables[r.tableid].indices[F(r.wxleftfns+"`")]),!O.databases[r.databaseid].tables[r.tableid].dirty&&i)r.ix=i,r.data=r.ix[r.wxrightfn(null,e.params,O)];else{for(r.ix={},a={},s=0,u=r.data.length;(o=r.data[s])||r.getfn&&(o=r.getfn(s))||s<u;)r.getfn&&!r.dontcache&&(r.data[s]=o),a[r.alias||r.tableid]=r.data[s],l=r.wxleftfn(a,e.params,O),c=r.ix[l],c||(c=r.ix[l]=[]),c.push(r.data[s]),s++;O.databases[r.databaseid].engineid||(O.databases[r.databaseid].tables[r.tableid].indices[F(r.wxleftfns+"`")]=r.ix)}r.srcwherefns&&(r.data?(a={},r.data=r.data.filter(function(t){return a[r.alias]=t,r.srcwherefn(a,e.params,O)})):r.data=[])}else if(r.srcwherefns&&!r.dontcache)if(r.data){var a={};r.data=r.data.filter(function(t){return a[r.alias]=t,r.srcwherefn(a,e.params,O)}),a={},s=0,u=r.data.length;for(var f=[];(o=r.data[s])||r.getfn&&(o=r.getfn(s))||s<u;)r.getfn&&!r.dontcache&&(r.data[s]=o),a[r.alias]=o,r.srcwherefn(a,e.params,O)&&f.push(o),s++;r.data=f}else r.data=[];r.databaseid&&O.databases[r.databaseid].tables[r.tableid]}};ne.Select=function(e){return ne.extend(this,e)},ne.Select.prototype.toString=function(){var e;return e="",this.explain&&(e+="EXPLAIN "),e+="SELECT ",this.modifier&&(e+=this.modifier+" "),this.distinct&&(e+="DISTINCT "),this.top&&(e+="TOP "+this.top.value+" ",this.percent&&(e+="PERCENT ")),e+=this.columns.map(function(e){var t;return t=e.toString(),void 0!==e.as&&(t+=" AS "+e.as),t}).join(", "),this.from&&(e+=" FROM "+this.from.map(function(e){var t;return t=e.toString(),e.as&&(t+=" AS "+e.as),t}).join(",")),this.joins&&(e+=this.joins.map(function(e){var t;if(t=" ",e.joinmode&&(t+=e.joinmode+" "),e.table)t+="JOIN "+e.table.toString();else if(e.select)t+="JOIN ("+e.select.toString()+")";else{if(!(e instanceof O.yy.Apply))throw new Error("Wrong type in JOIN mode");t+=e.toString()}return e.as&&(t+=" AS "+e.as),e.using&&(t+=" USING "+e.using.toString()),e.on&&(t+=" ON "+e.on.toString()),t})),this.where&&(e+=" WHERE "+this.where.toString()),this.group&&this.group.length>0&&(e+=" GROUP BY "+this.group.map(function(e){return e.toString()}).join(", ")),this.having&&(e+=" HAVING "+this.having.toString()),this.order&&this.order.length>0&&(e+=" ORDER BY "+this.order.map(function(e){return e.toString()}).join(", ")),this.limit&&(e+=" LIMIT "+this.limit.value),this.offset&&(e+=" OFFSET "+this.offset.value),this.union&&(e+=" UNION "+(this.corresponding?"CORRESPONDING ":"")+this.union.toString()),this.unionall&&(e+=" UNION ALL "+(this.corresponding?"CORRESPONDING ":"")+this.unionall.toString()),this.except&&(e+=" EXCEPT "+(this.corresponding?"CORRESPONDING ":"")+this.except.toString()),this.intersect&&(e+=" INTERSECT "+(this.corresponding?"CORRESPONDING ":"")+this.intersect.toString()),e},ne.Select.prototype.toJS=function(e){return"alasql.utils.flatArray(this.queriesfn["+(this.queriesidx-1)+"](this.params,null,"+e+"))[0]"},ne.Select.prototype.compile=function(e,t){var n=O.databases[e],r=new te;if(r.removeKeys=[],r.aggrKeys=[],r.explain=this.explain,r.explaination=[],r.explid=1,r.modifier=this.modifier,r.database=n,this.compileWhereExists(r),this.compileQueries(r),r.defcols=this.compileDefCols(r,e),r.fromfn=this.compileFrom(r),this.joins&&this.compileJoins(r),r.rownums=[],this.compileSelectGroup0(r),this.group||r.selectGroup.length>0?r.selectgfns=this.compileSelectGroup1(r):r.selectfns=this.compileSelect1(r,t),this.compileRemoveColumns(r),this.where&&this.compileWhereJoins(r),r.wherefn=this.compileWhere(r),(this.group||r.selectGroup.length>0)&&(r.groupfn=this.compileGroup(r)),this.having&&(r.havingfn=this.compileHaving(r)),this.order&&(r.orderfn=this.compileOrder(r)),this.group||r.selectGroup.length>0?r.selectgfn=this.compileSelectGroup2(r):r.selectfn=this.compileSelect2(r),r.distinct=this.distinct,this.pivot&&(r.pivotfn=this.compilePivot(r)),this.unpivot&&(r.pivotfn=this.compileUnpivot(r)),this.top?r.limit=this.top.value:this.limit&&(r.limit=this.limit.value,this.offset&&(r.offset=this.offset.value)),r.percent=this.percent,r.corresponding=this.corresponding,this.union?(r.unionfn=this.union.compile(e),this.union.order?r.orderfn=this.union.compileOrder(r):r.orderfn=null):this.unionall?(r.unionallfn=this.unionall.compile(e),this.unionall.order?r.orderfn=this.unionall.compileOrder(r):r.orderfn=null):this.except?(r.exceptfn=this.except.compile(e),this.except.order?r.orderfn=this.except.compileOrder(r):r.orderfn=null):this.intersect&&(r.intersectfn=this.intersect.compile(e),this.intersect.order?r.intersectfn=this.intersect.compileOrder(r):r.orderfn=null),this.into){if(this.into instanceof ne.Table)O.options.autocommit&&O.databases[this.into.databaseid||e].engineid?r.intoallfns='return alasql.engines["'+O.databases[this.into.databaseid||e].engineid+'"].intoTable("'+(this.into.databaseid||e)+'","'+this.into.tableid+'",this.data, columns, cb);':r.intofns="alasql.databases['"+(this.into.databaseid||e)+"'].tables['"+this.into.tableid+"'].data.push(r);";else if(this.into instanceof ne.VarValue)r.intoallfns='alasql.vars["'+this.into.variable+'"]=this.data;res=this.data.length;if(cb)res=cb(res);return res;';else if(this.into instanceof ne.FuncValue){var i="return alasql.into['"+this.into.funcid.toUpperCase()+"'](";this.into.args&&this.into.args.length>0?(i+=this.into.args[0].toJS()+",",this.into.args.length>1?i+=this.into.args[1].toJS()+",":i+="undefined,"):i+="undefined, undefined,",r.intoallfns=i+"this.data,columns,cb)"}else this.into instanceof ne.ParamValue&&(r.intofns="params['"+this.into.param+"'].push(r)");r.intofns?r.intofn=new Function("r,i,params,alasql","var y;"+r.intofns):r.intoallfns&&(r.intoallfn=new Function("columns,cb,params,alasql","var y;"+r.intoallfns))}var o=function(e,t,n){return r.params=e,p(r,n,function(e){if(r.rownums.length>0)for(var n=0,i=e.length;n<i;n++)for(var o=0,a=r.rownums.length;o<a;o++)e[n][r.rownums[o]]=n+1;var s=b(r,e);return t&&t(s),s})};return o.query=r,o},ne.Select.prototype.execute=function(e,t,n){return this.compile(e)(t,n)},ne.ExistsValue=function(e){return ne.extend(this,e)},ne.ExistsValue.prototype.toString=function(){return"EXISTS("+this.value.toString()+")"},ne.ExistsValue.prototype.toType=function(){return"boolean"},ne.ExistsValue.prototype.toJS=function(e,t,n){return"this.existsfn["+this.existsidx+"](params,null,"+e+").data.length"},ne.Select.prototype.compileWhereExists=function(e){this.exists&&(e.existsfn=this.exists.map(function(t){var n=t.compile(e.database.databaseid);return n.query.modifier="RECORDSET",n}))},ne.Select.prototype.compileQueries=function(e){this.queries&&(e.queriesfn=this.queries.map(function(t){var n=t.compile(e.database.databaseid);return n.query.modifier="RECORDSET",n}))},O.precompile=function(e,t,n){e&&(e.params=n,e.queries&&(e.queriesfn=e.queries.map(function(n){var r=n.compile(t||e.database.databaseid);return r.query.modifier="RECORDSET",r})),e.exists&&(e.existsfn=e.exists.map(function(n){var r=n.compile(t||e.database.databaseid);return r.query.modifier="RECORDSET",r})))},ne.Select.prototype.compileFrom=function(e){var t=this;e.sources=[],e.aliases={},t.from&&(t.from.forEach(function(t){var n=t.as||t.tableid;if(t instanceof ne.Table)e.aliases[n]={tableid:t.tableid,databaseid:t.databaseid||e.database.databaseid,type:"table"};else if(t instanceof ne.Select)e.aliases[n]={type:"subquery"};else if(t instanceof ne.Search)e.aliases[n]={type:"subsearch"};else if(t instanceof ne.ParamValue)e.aliases[n]={type:"paramvalue"};else if(t instanceof ne.FuncValue)e.aliases[n]={type:"funcvalue"};else if(t instanceof ne.VarValue)e.aliases[n]={type:"varvalue"};else if(t instanceof ne.FromData)e.aliases[n]={type:"fromdata"};else if(t instanceof ne.Json)e.aliases[n]={type:"json"};else{if(!t.inserted)throw new Error("Wrong table at FROM");e.aliases[n]={type:"inserted"}}var r={alias:n,databaseid:t.databaseid||e.database.databaseid,tableid:t.tableid,joinmode:"INNER",onmiddlefn:l,srcwherefns:"",srcwherefn:l};if(t instanceof ne.Table)r.columns=O.databases[r.databaseid].tables[r.tableid].columns,O.options.autocommit&&O.databases[r.databaseid].engineid&&!O.databases[r.databaseid].tables[r.tableid].view?r.datafn=function(e,t,n,i,o){return o.engines[o.databases[r.databaseid].engineid].fromTable(r.databaseid,r.tableid,n,i,e)}:O.databases[r.databaseid].tables[r.tableid].view?r.datafn=function(e,t,n,i,o){var a=o.databases[r.databaseid].tables[r.tableid].select(t);return n&&(a=n(a,i,e)),a}:r.datafn=function(e,t,n,i,o){var a=o.databases[r.databaseid].tables[r.tableid].data;return n&&(a=n(a,i,e)),a};else if(t instanceof ne.Select)r.subquery=t.compile(e.database.databaseid),void 0===r.subquery.query.modifier&&(r.subquery.query.modifier="RECORDSET"),r.columns=r.subquery.query.columns,r.datafn=function(e,t,n,i,o){var a;return r.subquery(e.params,function(t){return a=t.data,n&&(a=n(a,i,e)),a}),a};else if(t instanceof ne.Search)r.subsearch=t,r.columns=[],r.datafn=function(e,t,n,i,o){var a;return r.subsearch.execute(e.database.databaseid,e.params,function(t){return a=t,n&&(a=n(a,i,e)),a}),a};else if(t instanceof ne.ParamValue){var i="var res = alasql.prepareFromData(params['"+t.param+"']";t.array&&(i+=",true"),i+=");if(cb)res=cb(res,idx,query);return res",r.datafn=new Function("query,params,cb,idx,alasql",i)}else if(t.inserted){var i="var res = alasql.prepareFromData(alasql.inserted";t.array&&(i+=",true"),i+=");if(cb)res=cb(res,idx,query);return res",r.datafn=new Function("query,params,cb,idx,alasql",i)}else if(t instanceof ne.Json){var i="var res = alasql.prepareFromData("+t.toJS();t.array&&(i+=",true"),i+=");if(cb)res=cb(res,idx,query);return res",r.datafn=new Function("query,params,cb,idx,alasql",i)}else if(t instanceof ne.VarValue){var i="var res = alasql.prepareFromData(alasql.vars['"+t.variable+"']";t.array&&(i+=",true"),i+=");if(cb)res=cb(res,idx,query);return res",r.datafn=new Function("query,params,cb,idx,alasql",i)}else if(t instanceof ne.FuncValue){var o="var res=alasql.from['"+t.funcid.toUpperCase()+"'](";t.args&&t.args.length>0?(t.args[0]?o+=t.args[0].toJS("query.oldscope")+",":o+="null,",t.args[1]?o+=t.args[1].toJS("query.oldscope")+",":o+="null,"):o+="null,null,",o+="cb,idx,query",o+=");/*if(cb)res=cb(res,idx,query);*/return res",r.datafn=new Function("query, params, cb, idx, alasql",o)}else{if(!(t instanceof ne.FromData))throw new Error("Wrong table at FROM");r.datafn=function(e,n,r,i,o){var a=t.data;return r&&(a=r(a,i,e)),a}}e.sources.push(r)}),e.defaultTableid=e.sources[0].alias)},O.prepareFromData=function(e,t){var n=e;if("string"==typeof e){if(n=e.split(/\r?\n/),t)for(var r=0,i=n.length;r<i;r++)n[r]=[n[r]]}else if(t){n=[];for(var r=0,i=e.length;r<i;r++)n.push([e[r]])}else if("object"==typeof e&&!Array.isArray(e))if("undefined"!=typeof Mongo&&void 0!==Mongo.Collection&&e instanceof Mongo.Collection)n=e.find().fetch();else{n=[];for(var o in e)e.hasOwnProperty(o)&&n.push([o,e[o]])}return n},ne.Select.prototype.compileJoins=function(e){this.joins.forEach(function(t){if("CROSS"==t.joinmode){if(t.using||t.on)throw new Error("CROSS JOIN cannot have USING or ON clauses");t.joinmode}var n,r;if(t instanceof ne.Apply)n={alias:t.as,applymode:t.applymode,onmiddlefn:l,srcwherefns:"",srcwherefn:l,columns:[]},n.applyselect=t.select.compile(e.database.databaseid),n.columns=n.applyselect.query.columns,n.datafn=function(e,t,n,r,i){var o;return n&&(o=n(o,r,e)),o},e.sources.push(n);else{if(t.table){if(r=t.table,n={alias:t.as||r.tableid,databaseid:r.databaseid||e.database.databaseid,tableid:r.tableid,joinmode:t.joinmode,onmiddlefn:l,srcwherefns:"",srcwherefn:l,columns:[]},!O.databases[n.databaseid].tables[n.tableid])throw new Error("Table '"+n.tableid+"' is not exists in database '"+n.databaseid)+"'";n.columns=O.databases[n.databaseid].tables[n.tableid].columns,O.options.autocommit&&O.databases[n.databaseid].engineid?n.datafn=function(e,t,r,i,o){return o.engines[o.databases[n.databaseid].engineid].fromTable(n.databaseid,n.tableid,r,i,e)}:O.databases[n.databaseid].tables[n.tableid].view?n.datafn=function(e,t,r,i,o){var a=o.databases[n.databaseid].tables[n.tableid].select(t);return r&&(a=r(a,i,e)),a}:n.datafn=function(e,t,r,i,o){var a=o.databases[n.databaseid].tables[n.tableid].data;return r&&(a=r(a,i,e)),a},e.aliases[n.alias]={tableid:r.tableid,databaseid:r.databaseid||e.database.databaseid}}else if(t.select){var r=t.select;n={alias:t.as,joinmode:t.joinmode,onmiddlefn:l,srcwherefns:"",srcwherefn:l,columns:[]},n.subquery=r.compile(e.database.databaseid),void 0===n.subquery.query.modifier&&(n.subquery.query.modifier="RECORDSET"),n.columns=n.subquery.query.columns,n.datafn=function(e,t,r,i,o){return n.subquery(e.params,null,r,i).data},e.aliases[n.alias]={type:"subquery"}}else if(t.param){n={alias:t.as,joinmode:t.joinmode,onmiddlefn:l,srcwherefns:"",srcwherefn:l};var i=t.param.param,o="var res=alasql.prepareFromData(params['"+i+"']";t.array&&(o+=",true"),o+=");if(cb)res=cb(res, idx, query);return res",n.datafn=new Function("query,params,cb,idx, alasql",o),e.aliases[n.alias]={type:"paramvalue"}}else if(t.variable){n={alias:t.as,joinmode:t.joinmode,onmiddlefn:l,srcwherefns:"",srcwherefn:l};var o="var res=alasql.prepareFromData(alasql.vars['"+t.variable+"']";t.array&&(o+=",true"),o+=");if(cb)res=cb(res, idx, query);return res",n.datafn=new Function("query,params,cb,idx, alasql",o),e.aliases[n.alias]={type:"varvalue"}}else if(t.funcid){n={alias:t.as,joinmode:t.joinmode,onmiddlefn:l,srcwherefns:"",srcwherefn:l};var a="var res=alasql.from['"+js.funcid.toUpperCase()+"'](";t.args&&t.args.length>0?(t.args[0]?a+=t.args[0].toJS("query.oldscope")+",":a+="null,",t.args[1]?a+=t.args[1].toJS("query.oldscope")+",":a+="null,"):a+="null,null,",a+="cb,idx,query",a+=");/*if(cb)res=cb(res,idx,query);*/return res",n.datafn=new Function("query, params, cb, idx, alasql",a),e.aliases[n.alias]={type:"funcvalue"}}var s=n.alias;if(t.natural){if(t.using||t.on)throw new Error("NATURAL JOIN cannot have USING or ON clauses");if(e.sources.length>0){var u=e.sources[e.sources.length-1],c=O.databases[u.databaseid].tables[u.tableid],f=O.databases[n.databaseid].tables[n.tableid];if(!c||!f)throw new Error("In this version of Alasql NATURAL JOIN works for tables with predefined columns only");var h=c.columns.map(function(e){return e.columnid}),p=f.columns.map(function(e){return e.columnid});t.using=U(h,p).map(function(e){return{columnid:e}})}}if(t.using){var u=e.sources[e.sources.length-1];n.onleftfns=t.using.map(function(e){return"p['"+(u.alias||u.tableid)+"']['"+e.columnid+"']"}).join('+"`"+'),n.onleftfn=new Function("p,params,alasql","var y;return "+n.onleftfns),n.onrightfns=t.using.map(function(e){return"p['"+(n.alias||n.tableid)+"']['"+e.columnid+"']"}).join('+"`"+'),n.onrightfn=new Function("p,params,alasql","var y;return "+n.onrightfns),n.optimization="ix"}else if(t.on)if(t.on instanceof ne.Op&&"="==t.on.op&&!t.on.allsome){n.optimization="ix";var d="",v="",g="",y=!1,m=t.on.left.toJS("p",e.defaultTableid,e.defcols),_=t.on.right.toJS("p",e.defaultTableid,e.defcols);m.indexOf("p['"+s+"']")>-1&&!(_.indexOf("p['"+s+"']")>-1)?(m.match(/p\[\'.*?\'\]/g)||[]).every(function(e){return e=="p['"+s+"']"})?v=m:y=!0:!(m.indexOf("p['"+s+"']")>-1)&&_.indexOf("p['"+s+"']")>-1&&(_.match(/p\[\'.*?\'\]/g)||[]).every(function(e){return e=="p['"+s+"']"})?d=m:y=!0,_.indexOf("p['"+s+"']")>-1&&!(m.indexOf("p['"+s+"']")>-1)?(_.match(/p\[\'.*?\'\]/g)||[]).every(function(e){return e=="p['"+s+"']"})?v=_:y=!0:!(_.indexOf("p['"+s+"']")>-1)&&m.indexOf("p['"+s+"']")>-1&&(m.match(/p\[\'.*?\'\]/g)||[]).every(function(e){return e=="p['"+s+"']"})?d=_:y=!0,y&&(v="",d="",g=t.on.toJS("p",e.defaultTableid,e.defcols),n.optimization="no"),n.onleftfns=d,n.onrightfns=v,n.onmiddlefns=g||"true",n.onleftfn=new Function("p,params,alasql","var y;return "+n.onleftfns),n.onrightfn=new Function("p,params,alasql","var y;return "+n.onrightfns),n.onmiddlefn=new Function("p,params,alasql","var y;return "+n.onmiddlefns)}else n.optimization="no",n.onmiddlefns=t.on.toJS("p",e.defaultTableid,e.defcols),n.onmiddlefn=new Function("p,params,alasql","var y;return "+t.on.toJS("p",e.defaultTableid,e.defcols));e.sources.push(n)}})},ne.Select.prototype.compileWhere=function(e){if(this.where){if("function"==typeof this.where)return this.where;var t=this.where.toJS("p",e.defaultTableid,e.defcols);return e.wherefns=t,new Function("p,params,alasql","var y;return "+t)}return function(){return!0}},ne.Select.prototype.compileWhereJoins=function(e){},ne.Select.prototype.compileGroup=function(e){if(e.sources.length>0)var t=e.sources[0].alias;else var t="";var n=e.defcols,r=[[]];this.group&&(r=x(this.group,e));var i=[];r.forEach(function(e){i=j(i,e)}),e.allgroups=i,e.ingroup=[];var o="";return r.forEach(function(r){o+="var g=this.xgroups[";var a=r.map(function(t){var n=t.split("\t")[0],r=t.split("\t")[1];return""===n?"1":(e.ingroup.push(n),r)});0===a.length&&(a=["''"]),o+=a.join('+"`"+'),o+="];if(!g) {this.groups.push((g=this.xgroups[",o+=a.join('+"`"+'),o+="] = {",o+=r.map(function(e){var t=e.split("\t")[0],n=e.split("\t")[1];return""===t?"":"'"+t+"':"+n+","}).join("");var s=B(i,r);o+=s.map(function(e){return"'"+e.split("\t")[0]+"':null,"}).join("");var u="",l="";void 0!==e.groupStar&&(l+="for(var f in p['"+e.groupStar+"']) {g[f]=p['"+e.groupStar+"'][f];};"),o+=e.selectGroup.map(function(r){var i=r.expression.toJS("p",t,n),o=r.nick;return r instanceof ne.AggrValue?(r.distinct&&(u+=",g['$$_VALUES_"+o+"']={},g['$$_VALUES_"+o+"']["+i+"]=true"),"SUM"===r.aggregatorid?"'"+o+"':("+i+")||0,":"MIN"===r.aggregatorid||"MAX"===r.aggregatorid||"FIRST"===r.aggregatorid||"LAST"===r.aggregatorid?"'"+o+"':"+i+",":"ARRAY"===r.aggregatorid?"'"+o+"':["+i+"],":"COUNT"===r.aggregatorid?"*"===r.expression.columnid?"'"+o+"':1,":"'"+o+"':(typeof "+i+' != "undefined")?1:0,':"AVG"===r.aggregatorid?(e.removeKeys.push("_SUM_"+o),e.removeKeys.push("_COUNT_"+o),"'"+o+"':"+i+",'_SUM_"+o+"':("+i+")||0,'_COUNT_"+o+"':(typeof "+i+' != "undefined")?1:0,'):"AGGR"===r.aggregatorid?(u+=",g['"+o+"']="+r.expression.toJS("g",-1),""):"REDUCE"===r.aggregatorid?(e.aggrKeys.push(r),"'"+o+"':alasql.aggr['"+r.funcid+"']("+i+",undefined,1),"):""):""}).join(""),o+="}"+u+",g));"+l+"} else {",o+=e.selectGroup.map(function(e){var r=e.nick,i=e.expression.toJS("p",t,n);if(e instanceof ne.AggrValue){var o="",a="";if(e.distinct)var o="if(typeof "+i+'!="undefined" && (!g[\'$$_VALUES_'+r+"']["+i+"])) \t\t\t\t \t\t {",a="g['$$_VALUES_"+r+"']["+i+"]=true;}";return"SUM"===e.aggregatorid?o+"g['"+r+"']+=("+i+"||0);"+a:"COUNT"===e.aggregatorid?"*"===e.expression.columnid?o+"g['"+r+"']++;"+a:o+"if(typeof "+i+'!="undefined") g[\''+r+"']++;"+a:"ARRAY"===e.aggregatorid?o+"g['"+r+"'].push("+i+");"+a:"MIN"===e.aggregatorid?o+"g['"+r+"']=Math.min(g['"+r+"'],"+i+");"+a:"MAX"===e.aggregatorid?o+"g['"+r+"']=Math.max(g['"+r+"'],"+i+");"+a:"FIRST"===e.aggregatorid?"":"LAST"===e.aggregatorid?o+"g['"+r+"']="+i+";"+a:"AVG"===e.aggregatorid?o+"g['_SUM_"+r+"']+=(y="+i+")||0;g['_COUNT_"+r+"']+=(typeof y!=\"undefined\")?1:0;g['"+r+"']=g['_SUM_"+r+"']/g['_COUNT_"+r+"'];"+a:"AGGR"===e.aggregatorid?o+"g['"+r+"']="+e.expression.toJS("g",-1)+";"+a:"REDUCE"===e.aggregatorid?o+"g['"+r+"']=alasql.aggr."+e.funcid+"("+i+",g['"+r+"'],2);"+a:""}return""}).join(""),o+="}"}),new Function("p,params,alasql","var y;"+o)},ne.Select.prototype.compileSelect1=function(e,t){var n=this;e.columns=[],e.xcolumns={},e.selectColumns={},e.dirtyColumns=!1;var r="var r={",i="",a=[];return this.columns.forEach(function(r){if(r instanceof ne.Column)if("*"===r.columnid)if(r.func)i+="r=params['"+r.param+"'](p['"+e.sources[0].alias+"'],p,params,alasql);";else if(r.tableid){var s=E(e,r.tableid,!1);s.s&&(a=a.concat(s.s)),i+=s.sp}else for(var u in e.aliases){var s=E(e,u,!0);s.s&&(a=a.concat(s.s)),i+=s.sp}else{var l=r.tableid,c=r.databaseid||e.sources[0].databaseid||e.database.databaseid;if(l||(l=e.defcols[r.columnid]),l||(l=e.defaultTableid),"_"!==r.columnid){var f=t&&t.length>1&&Array.isArray(t[0])&&t[0].length>=1&&t[0][0].hasOwnProperty("sheetid");f?i='var r={};var w=p["'+l+'"];var cols=['+n.columns.map(function(e){return"'"+e.columnid+"'"}).join(",")+"];var colas=["+n.columns.map(function(e){return"'"+(e.as||e.columnid)+"'"}).join(",")+"];for (var i=0;i<Object.keys(p['"+l+"']).length;i++) for(var k=0;k<cols.length;k++){if (!r.hasOwnProperty(i)) r[i]={}; r[i][colas[k]]=w[i][cols[k]];}":a.push("'"+I(r.as||r.columnid)+"':p['"+l+"']['"+r.columnid+"']")}else a.push("'"+I(r.as||r.columnid)+"':p['"+l+"']");if(e.selectColumns[I(r.as||r.columnid)]=!0,e.aliases[l]&&"table"===e.aliases[l].type){if(!O.databases[c].tables[e.aliases[l].tableid])throw new Error("Table '"+l+"' does not exists in database");var h=O.databases[c].tables[e.aliases[l].tableid].columns,p=O.databases[c].tables[e.aliases[l].tableid].xcolumns;if(p&&h.length>0){var d=p[r.columnid];if(void 0===d)throw new Error("Column does not exists: "+r.columnid);var v={columnid:r.as||r.columnid,dbtypeid:d.dbtypeid,dbsize:d.dbsize,dbpecision:d.dbprecision,dbenum:d.dbenum};e.columns.push(v),e.xcolumns[v.columnid]=v}else{var v={columnid:r.as||r.columnid};e.columns.push(v),e.xcolumns[v.columnid]=v,e.dirtyColumns=!0}}else{var v={columnid:r.as||r.columnid};e.columns.push(v),e.xcolumns[v.columnid]=v}}else if(r instanceof ne.AggrValue){n.group||(n.group=[""]),r.as||(r.as=I(r.toString())),"SUM"===r.aggregatorid||"MAX"===r.aggregatorid||"MIN"===r.aggregatorid||"FIRST"===r.aggregatorid||"LAST"===r.aggregatorid||"AVG"===r.aggregatorid||"ARRAY"===r.aggregatorid||"REDUCE"===r.aggregatorid?a.push("'"+I(r.as)+"':"+o(r.expression.toJS("p",e.defaultTableid,e.defcols))):"COUNT"===r.aggregatorid&&a.push("'"+I(r.as)+"':1");var v={columnid:r.as||r.columnid||r.toString()};e.columns.push(v),e.xcolumns[v.columnid]=v}else{a.push("'"+I(r.as||r.columnid||r.toString())+"':"+o(r.toJS("p",e.defaultTableid,e.defcols))),e.selectColumns[I(r.as||r.columnid||r.toString())]=!0;var v={columnid:r.as||r.columnid||r.toString()};e.columns.push(v),e.xcolumns[v.columnid]=v}}),r+=a.join(",")+"};"+i},ne.Select.prototype.compileSelect2=function(e){var t=e.selectfns;return this.orderColumns&&this.orderColumns.length>0&&this.orderColumns.forEach(function(n,r){var i="$$$"+r;n instanceof ne.Column&&e.xcolumns[n.columnid]?t+="r['"+i+"']=r['"+n.columnid+"'];":t+="r['"+i+"']="+n.toJS("p",e.defaultTableid,e.defcols)+";",e.removeKeys.push(i)}),new Function("p,params,alasql","var y;"+t+"return r")},ne.Select.prototype.compileSelectGroup0=function(e){var t=this;t.columns.forEach(function(n,r){if(n instanceof ne.Column&&"*"===n.columnid)e.groupStar=n.tableid||"default";else{var i;i=I(n instanceof ne.Column?n.columnid:n.toString(!0));for(var o=0;o<r;o++)if(i===t.columns[o].nick){i=t.columns[o].nick+":"+r;break}n.nick=i,!n.funcid||"ROWNUM"!==n.funcid.toUpperCase()&&"ROW_NUMBER"!==n.funcid.toUpperCase()||e.rownums.push(n.as)}}),this.columns.forEach(function(t){t.findAggregator&&t.findAggregator(e)}),this.having&&this.having.findAggregator&&this.having.findAggregator(e)},ne.Select.prototype.compileSelectGroup1=function(e){var t=this,n="var r = {};";return t.columns.forEach(function(t){if(t instanceof ne.Column&&"*"===t.columnid)return n+="for(var k in g) {r[k]=g[k]};","";var r=t.as;void 0===r&&(r=t instanceof ne.Column?I(t.columnid):t.nick),e.groupColumns[r]=t.nick,n+="r['"+r+"']=",n+=o(t.toJS("g",""))+";";for(var i=0;i<e.removeKeys.length;i++)if(e.removeKeys[i]===r){e.removeKeys.splice(i,1);break}}),n},ne.Select.prototype.compileSelectGroup2=function(e){var t=this,n=e.selectgfns;return t.columns.forEach(function(t){e.ingroup.indexOf(t.nick)>-1&&(n+="r['"+(t.as||t.nick)+"']=g['"+t.nick+"'];")}),this.orderColumns&&this.orderColumns.length>0&&this.orderColumns.forEach(function(t,r){var i="$$$"+r;t instanceof ne.Column&&e.groupColumns[t.columnid]?n+="r['"+i+"']=r['"+t.columnid+"'];":n+="r['"+i+"']="+t.toJS("g","")+";",e.removeKeys.push(i)}),new Function("g,params,alasql","var y;"+n+"return r")},ne.Select.prototype.compileRemoveColumns=function(e){void 0!==this.removecolumns&&(e.removeKeys=e.removeKeys.concat(this.removecolumns.filter(function(e){return void 0===e.like}).map(function(e){return e.columnid})),e.removeLikeKeys=this.removecolumns.filter(function(e){return void 0!==e.like}).map(function(e){return e.like.value}))},ne.Select.prototype.compileHaving=function(e){return this.having?(s=this.having.toJS("g",-1),e.havingfns=s,new Function("g,params,alasql","var y;return "+s)):function(){return!0}},ne.Select.prototype.compileOrder=function(e){var t=this;if(t.orderColumns=[],this.order){if(this.order&&1==this.order.length&&this.order[0].expression&&"function"==typeof this.order[0].expression){var n=this.order[0].expression;return function(e,t){var r=n(e),i=n(t);return r>i?1:r==i?0:-1}}var r="",i="";return this.order.forEach(function(n,o){if(n.expression instanceof ne.NumValue)var a=t.columns[n.expression.value-1];else var a=n.expression;t.orderColumns.push(a);var s="$$$"+o,u="";if(n.expression instanceof ne.Column){var l=n.expression.columnid;if(e.xcolumns[l]){var c=e.xcolumns[l].dbtypeid;"DATE"!=c&&"DATETIME"!=c&&"DATETIME2"!=c||(u=".valueOf()")}else O.options.valueof&&(u=".valueOf()")}n.nocase&&(u+=".toUpperCase()"),r+="if((a['"+s+"']||'')"+u+("ASC"==n.direction?">":"<")+"(b['"+s+"']||'')"+u+")return 1;",r+="if((a['"+s+"']||'')"+u+"==(b['"+s+"']||'')"+u+"){",i+="}"}),r+="return 0;",r+=i+"return -1",e.orderfns=r,new Function("a,b","var y;"+r)}},ne.Select.prototype.compilePivot=function(e){var t=this,n=t.pivot.columnid,r=t.pivot.expr.expression.columnid,i=t.pivot.expr.aggregatorid,o=t.pivot.inlist;return o&&(o=o.map(function(e){return e.expr.columnid})),function(){var e=this,t=e.columns.filter(function(e){return e.columnid!=n&&e.columnid!=r}).map(function(e){return e.columnid}),a=[],s={},u={},l={},c=[];if(e.data.forEach(function(e){if(!o||o.indexOf(e[n])>-1){var f=t.map(function(t){return e[t]}).join("`"),h=u[f];if(h||(h={},u[f]=h,c.push(h),t.forEach(function(t){h[t]=e[t]})),l[f]||(l[f]={}),l[f][e[n]]?l[f][e[n]]++:l[f][e[n]]=1,s[e[n]]||(s[e[n]]=!0,a.push(e[n])),"SUM"==i||"AVG"==i)void 0===h[e[n]]&&(h[e[n]]=0),h[e[n]]+=e[r];else if("COUNT"==i)void 0===h[e[n]]&&(h[e[n]]=0),h[e[n]]++;else if("MIN"==i)void 0===h[e[n]]&&(h[e[n]]=1/0),e[r]<h[e[n]]&&(h[e[n]]=e[r]);else if("MAX"==i)void 0===h[e[n]]&&(h[e[n]]=-1/0),e[r]>h[e[n]]&&(h[e[n]]=e[r]);else if("FIRST"==i)void 0===h[e[n]]&&(h[e[n]]=e[r]);else if("LAST"==i)h[e[n]]=e[r];else{if(!O.aggr[i])throw new Error("Wrong aggregator in PIVOT clause");O.aggr[i](h[e[n]],e[r])}}}),"AVG"==i)for(var f in u){var h=u[f];for(var p in h)-1==t.indexOf(p)&&p!=r&&(h[p]=h[p]/l[f][p])}e.data=c,o&&(a=o);var d=e.columns.filter(function(e){return e.columnid==r})[0];e.columns=e.columns.filter(function(e){return!(e.columnid==n||e.columnid==r)}),a.forEach(function(t){var n=H(d);n.columnid=t,e.columns.push(n)})}},ne.Select.prototype.compileUnpivot=function(e){var t=this,n=t.unpivot.tocolumnid,r=t.unpivot.forcolumnid,i=t.unpivot.inlist.map(function(e){return e.columnid});return function(){var t=[],o=e.columns.map(function(e){return e.columnid}).filter(function(e){return-1==i.indexOf(e)&&e!=r&&e!=n});e.data.forEach(function(e){i.forEach(function(i){var a={};o.forEach(function(t){a[t]=e[t]}),a[r]=i,a[n]=e[i],t.push(a)})}),e.data=t}};var ae=function(e,t){for(var n=[],r=0,i=e.length,o=0;o<i+1;o++){for(var a=[],s=0;s<i;s++){if(e[s]instanceof ne.Column){e[s].nick=I(e[s].columnid),t.groupColumns[I(e[s].columnid)]=e[s].nick;var u=e[s].nick+"\t"+e[s].toJS("p",t.sources[0].alias,t.defcols)}else{t.groupColumns[I(e[s].toString())]=I(e[s].toString());var u=I(e[s].toString())+"\t"+e[s].toJS("p",t.sources[0].alias,t.defcols)}r&1<<s&&a.push(u)}n.push(a),r=1+(r<<1)}return n},se=function(e,t){for(var n=[],r=e.length,i=1<<r,o=0;o<i;o++){for(var a=[],s=0;s<r;s++)o&1<<s&&(a=a.concat(x(e[s],t)));n.push(a)}return n},ue=function(e,t){return e.reduce(function(e,n){return e=e.concat(x(n,t))},[])},le=function(e,t){for(var n=[],r=0;r<e.length;r++)for(var i=0;i<t.length;i++)n.push(e[r].concat(t[i]));return n};ne.Select.prototype.compileDefCols=function(e,t){var n={".":{}};return this.from&&this.from.forEach(function(e){if(n["."][e.as||e.tableid]=!0,e instanceof ne.Table){var r=e.as||e.tableid,i=O.databases[e.databaseid||t].tables[e.tableid];if(void 0===i)throw new Error("Table does not exists: "+e.tableid);i.columns&&i.columns.forEach(function(e){n[e.columnid]?n[e.columnid]="-":n[e.columnid]=r})}else if(e instanceof ne.Select);else if(e instanceof ne.Search);else if(e instanceof ne.ParamValue);else if(e instanceof ne.VarValue);else if(e instanceof ne.FuncValue);else if(e instanceof ne.FromData);else if(e instanceof ne.Json);else if(!e.inserted)throw new Error("Unknown type of FROM clause")}),this.joins&&this.joins.forEach(function(e){if(n["."][e.as||e.table.tableid]=!0,e.table){var r=e.table.tableid;e.as&&(r=e.as);var r=e.as||e.table.tableid,i=O.databases[e.table.databaseid||t].tables[e.table.tableid];i.columns&&i.columns.forEach(function(e){n[e.columnid]?n[e.columnid]="-":n[e.columnid]=r})}else if(e.select);else if(e.param);else if(!e.func)throw new Error("Unknown type of FROM clause")}),n},ne.Union=function(e){return ne.extend(this,e)},ne.Union.prototype.toString=function(){return"UNION"},ne.Union.prototype.compile=function(e){return null},ne.Apply=function(e){return ne.extend(this,e)},ne.Apply.prototype.toString=function(){var e=this.applymode+" APPLY ("+this.select.toString()+")";return this.as&&(e+=" AS "+this.as),e},ne.Over=function(e){return ne.extend(this,e)},ne.Over.prototype.toString=function(){var e="OVER (";return this.partition&&(e+="PARTITION BY "+this.partition.toString(),this.order&&(e+=" ")),this.order&&(e+="ORDER BY "+this.order.toString()),e+=")"},ne.ExpressionStatement=function(e){return ne.extend(this,e)},ne.ExpressionStatement.prototype.toString=function(){return this.expression.toString()},ne.ExpressionStatement.prototype.execute=function(e,t,n){if(this.expression){O.precompile(this,e,t);var r=new Function("params,alasql,p","var y;return "+this.expression.toJS("({})","",null)).bind(this),i=r(t,O);return n&&(i=n(i)),i}},ne.Expression=function(e){return ne.extend(this,e)},ne.Expression.prototype.toString=function(e){var t=this.expression.toString(e);return this.order&&(t+=" "+this.order.toString()),this.nocase&&(t+=" COLLATE NOCASE"),t},ne.Expression.prototype.findAggregator=function(e){this.expression.findAggregator&&this.expression.findAggregator(e)},ne.Expression.prototype.toJS=function(e,t,n){return this.expression.reduced?"true":this.expression.toJS(e,t,n)},ne.Expression.prototype.compile=function(e,t,n){return!!this.reduced||new Function("p","var y;return "+this.toJS(e,t,n))},ne.JavaScript=function(e){return ne.extend(this,e)},ne.JavaScript.prototype.toString=function(){return"``"+this.value+"``"},ne.JavaScript.prototype.toJS=function(){return"("+this.value+")"},ne.JavaScript.prototype.execute=function(e,t,n){var r=1;return new Function("params,alasql,p",this.value)(t,O),n&&(r=n(r)),r},ne.Literal=function(e){return ne.extend(this,e)},ne.Literal.prototype.toString=function(e){var t=this.value;return this.value1&&(t=this.value1+"."+t),this.alias&&!e&&(t+=" AS "+this.alias),t},ne.Join=function(e){return ne.extend(this,e)},ne.Join.prototype.toString=function(){var e=" ";return this.joinmode&&(e+=this.joinmode+" "),e+="JOIN "+this.table.toString()},ne.Table=function(e){return ne.extend(this,e)},ne.Table.prototype.toString=function(){var e=this.tableid;return this.databaseid&&(e=this.databaseid+"."+e),e},ne.View=function(e){return ne.extend(this,e)},ne.View.prototype.toString=function(){var e=this.viewid;return this.databaseid&&(e=this.databaseid+"."+e),e},ne.Op=function(e){return ne.extend(this,e)},ne.Op.prototype.toString=function(){if("IN"===this.op||"NOT IN"===this.op)return this.left.toString()+" "+this.op+" ("+this.right.toString()+")";if(this.allsome)return this.left.toString()+" "+this.op+" "+this.allsome+" ("+this.right.toString()+")";if("->"===this.op||"!"===this.op){var e=this.left.toString()+this.op;return"string"!=typeof this.right&&"number"!=typeof this.right&&(e+="("),e+=this.right.toString(),"string"!=typeof this.right&&"number"!=typeof this.right&&(e+=")"),e}return this.left.toString()+" "+this.op+" "+(this.allsome?this.allsome+" ":"")+this.right.toString()},ne.Op.prototype.findAggregator=function(e){this.left&&this.left.findAggregator&&this.left.findAggregator(e),this.right&&this.right.findAggregator&&!this.allsome&&this.right.findAggregator(e)},ne.Op.prototype.toType=function(e){if(["-","*","/","%","^"].indexOf(this.op)>-1)return"number";if(["||"].indexOf(this.op)>-1)return"string";if("+"===this.op){if("string"===this.left.toType(e)||"string"===this.right.toType(e))return"string";if("number"===this.left.toType(e)||"number"===this.right.toType(e))return"number"}return["AND","OR","NOT","=","==","===","!=","!==","!===",">",">=","<","<=","IN","NOT IN","LIKE","NOT LIKE","REGEXP","GLOB"].indexOf(this.op)>-1?"boolean":"BETWEEN"===this.op||"NOT BETWEEN"===this.op||"IS NULL"===this.op||"IS NOT NULL"===this.op?"boolean":this.allsome?"boolean":this.op?"unknown":this.left.toType()},ne.Op.prototype.toJS=function(e,t,n){var r,i=[],o=this.op,a=this,s=function(r){return r.toJS&&(r=r.toJS(e,t,n)),"y["+(i.push(r)-1)+"]"},u=function(){return s(a.left)},l=function(){return s(a.right)};if("="===this.op?o="===":"<>"===this.op?o="!=":"OR"===this.op&&(o="||"),"->"===this.op){var c="("+u()+"||{})";if("string"==typeof this.right)r=c+'["'+this.right+'"]';else if("number"==typeof this.right)r=c+"["+this.right+"]";else if(this.right instanceof ne.FuncValue){var f=[];if(this.right.args&&0!==this.right.args.length)var f=this.right.args.map(s);r=c+"['"+this.right.funcid+"']("+f.join(",")+")"}else r=c+"["+l()+"]"}if("!"===this.op&&"string"==typeof this.right&&(r="alasql.databases[alasql.useid].objects["+u()+']["'+this.right+'"]'),"IS"===this.op&&(r="(("+u()+"==null) === ("+l()+"==null))"),"=="===this.op&&(r="alasql.utils.deepEqual("+u()+","+l()+")"),"==="!==this.op&&"!==="!==this.op||(r="("+("!==="===this.op?"!":"")+"(("+u()+").valueOf()===("+l()+").valueOf()))"),"!=="===this.op&&(r="(!alasql.utils.deepEqual("+u()+","+l()+"))"),"||"===this.op&&(r="(''+("+u()+"||'')+("+l()+'||""))'),"LIKE"===this.op||"NOT LIKE"===this.op){var r="("+("NOT LIKE"===this.op?"!":"")+"alasql.utils.like("+l()+","+u();this.escape&&(r+=","+s(this.escape)),r+="))"}if("REGEXP"===this.op&&(r="alasql.stdfn.REGEXP_LIKE("+u()+","+l()+")"),"GLOB"===this.op&&(r="alasql.utils.glob("+u()+","+l()+")"),"BETWEEN"===this.op||"NOT BETWEEN"===this.op){var h=u();r="("+("NOT BETWEEN"===this.op?"!":"")+"(("+s(this.right1)+"<="+h+") && ("+h+"<="+s(this.right2)+")))"}if("IN"===this.op&&(this.right instanceof ne.Select?(r="(",r+="alasql.utils.flatArray(this.queriesfn["+this.queriesidx+"](params,null,"+e+"))",r+=".indexOf(",r+=u()+")>-1)"):r=Array.isArray(this.right)?"(["+this.right.map(s).join(",")+"].indexOf("+u()+")>-1)":"("+l()+".indexOf("+u()+")>-1)"),"NOT IN"===this.op&&(this.right instanceof ne.Select?(r="(",r+="alasql.utils.flatArray(this.queriesfn["+this.queriesidx+"](params,null,p))",r+=".indexOf(",r+=u()+")<0)"):Array.isArray(this.right)?(r="(["+this.right.map(s).join(",")+"].indexOf(",r+=u()+")<0)"):(r="("+l()+".indexOf(",r+=u()+")==-1)")),"ALL"===this.allsome){var r;if(this.right instanceof ne.Select)r="alasql.utils.flatArray(this.query.queriesfn["+this.queriesidx+"](params,null,p))",r+=".every(function(b){return (",r+=u()+")"+o+"b})";else{if(!Array.isArray(this.right))throw new Error("NOT IN operator without SELECT");r=""+(1==this.right.length?s(this.right[0]):"["+this.right.map(s).join(",")+"]"),r+=".every(function(b){return (",r+=u()+")"+o+"b})"}}if("SOME"===this.allsome||"ANY"===this.allsome){var r;if(this.right instanceof ne.Select)r="alasql.utils.flatArray(this.query.queriesfn["+this.queriesidx+"](params,null,p))",r+=".some(function(b){return (",r+=u()+")"+o+"b})";else{if(!Array.isArray(this.right))throw new Error("SOME/ANY operator without SELECT");r=""+(1==this.right.length?s(this.right[0]):"["+this.right.map(s).join(",")+"]"),r+=".some(function(b){return (",r+=u()+")"+o+"b})"}}if("AND"===this.op){if(this.left.reduced){if(this.right.reduced)return"true";r=l()}else this.right.reduced&&(r=u());o="&&"}var p=r||"("+u()+o+l()+")",d="y=[("+i.join("), (")+")]";return"&&"==o||"||"==o||"IS"==o||"IS NULL"==o||"IS NOT NULL"==o?"("+d+", "+p+")":"("+d+", y.some(function(e){return e == null}) ? void 0 : "+p+")"},ne.VarValue=function(e){return ne.extend(this,e)},ne.VarValue.prototype.toString=function(){return"@"+this.variable},ne.VarValue.prototype.toType=function(){return"unknown"},ne.VarValue.prototype.toJS=function(){return"alasql.vars['"+this.variable+"']"},ne.NumValue=function(e){return ne.extend(this,e)},ne.NumValue.prototype.toString=function(){return this.value.toString()},ne.NumValue.prototype.toType=function(){return"number"},ne.NumValue.prototype.toJS=function(){return""+this.value},ne.StringValue=function(e){return ne.extend(this,e)},ne.StringValue.prototype.toString=function(){return"'"+this.value.toString()+"'"},ne.StringValue.prototype.toType=function(){return"string"},ne.StringValue.prototype.toJS=function(){return"'"+I(this.value)+"'"},ne.DomainValueValue=function(e){return ne.extend(this,e)},ne.DomainValueValue.prototype.toString=function(){return"VALUE"},ne.DomainValueValue.prototype.toType=function(){return"object"},ne.DomainValueValue.prototype.toJS=function(e,t,n){return e},ne.ArrayValue=function(e){return ne.extend(this,e)},ne.ArrayValue.prototype.toString=function(){return"ARRAY[]"},ne.ArrayValue.prototype.toType=function(){return"object"},ne.ArrayValue.prototype.toJS=function(e,t,n){return"[("+this.value.map(function(r){return r.toJS(e,t,n)}).join("), (")+")]"},ne.LogicValue=function(e){return ne.extend(this,e)},ne.LogicValue.prototype.toString=function(){return this.value?"TRUE":"FALSE"},ne.LogicValue.prototype.toType=function(){return"boolean"},ne.LogicValue.prototype.toJS=function(){return this.value?"true":"false"},ne.NullValue=function(e){return ne.extend(this,e)},ne.NullValue.prototype.toString=function(){return"NULL"},ne.NullValue.prototype.toJS=function(){return"undefined"},ne.ParamValue=function(e){return ne.extend(this,e)},ne.ParamValue.prototype.toString=function(){return"$"+this.param},ne.ParamValue.prototype.toJS=function(){return"string"==typeof this.param?"params['"+this.param+"']":"params["+this.param+"]"},ne.UniOp=function(e){return ne.extend(this,e)},ne.UniOp.prototype.toString=function(){var e;return e=void 0,"~"===this.op&&(e=this.op+this.right.toString()),"-"===this.op&&(e=this.op+this.right.toString()),"+"===this.op&&(e=this.op+this.right.toString()),"#"===this.op&&(e=this.op+this.right.toString()),"NOT"===this.op&&(e=this.op+"("+this.right.toString()+")"),null===this.op&&(e="("+this.right.toString()+")"),e||(e="("+this.right.toString()+")"),e},ne.UniOp.prototype.findAggregator=function(e){this.right.findAggregator&&this.right.findAggregator(e)},ne.UniOp.prototype.toType=function(){return"-"===this.op?"number":"+"===this.op?"number":"NOT"===this.op?"boolean":void 0},ne.UniOp.prototype.toJS=function(e,t,n){return"~"===this.op?"(~("+this.right.toJS(e,t,n)+"))":"-"===this.op?"(-("+this.right.toJS(e,t,n)+"))":"+"===this.op?"("+this.right.toJS(e,t,n)+")":"NOT"===this.op?"!("+this.right.toJS(e,t,n)+")":"#"===this.op?this.right instanceof ne.Column?"(alasql.databases[alasql.useid].objects['"+this.right.columnid+"'])":"(alasql.databases[alasql.useid].objects["+this.right.toJS(e,t,n)+"])":null==this.op?"("+this.right.toJS(e,t,n)+")":void 0},ne.Column=function(e){return ne.extend(this,e)},ne.Column.prototype.toString=function(e){var t;return t=this.columnid==+this.columnid?"["+this.columnid+"]":this.columnid,this.tableid&&(t=+this.columnid===this.columnid?this.tableid+t:this.tableid+"."+t,this.databaseid&&(t=this.databaseid+"."+t)),this.alias&&!e&&(t+=" AS "+this.alias),t},ne.Column.prototype.toJS=function(e,t,n){var r="";if(this.tableid||""!==t||n)if("g"===e)r="g['"+this.nick+"']";else if(this.tableid)r="_"!==this.columnid?e+"['"+this.tableid+"']['"+this.columnid+"']":"g"===e?"g['_']":e+"['"+this.tableid+"']";else if(n){var i=n[this.columnid];if("-"===i)throw new Error('Cannot resolve column "'+this.columnid+'" because it exists in two source tables');r=i?"_"!==this.columnid?e+"['"+i+"']['"+this.columnid+"']":e+"['"+i+"']":"_"!==this.columnid?e+"['"+(this.tableid||t)+"']['"+this.columnid+"']":e+"['"+(this.tableid||t)+"']"}else r=-1===t?e+"['"+this.columnid+"']":"_"!==this.columnid?e+"['"+(this.tableid||t)+"']['"+this.columnid+"']":e+"['"+(this.tableid||t)+"']";else r="_"!==this.columnid?e+"['"+this.columnid+"']":"g"===e?"g['_']":e;return r},ne.AggrValue=function(e){return ne.extend(this,e)},ne.AggrValue.prototype.toString=function(e){var t="";return"REDUCE"===this.aggregatorid?t+=this.funcid+"(":t+=this.aggregatorid+"(",this.distinct&&(t+="DISTINCT "),this.expression&&(t+=this.expression.toString()),t+=")",this.over&&(t+=" "+this.over.toString()),this.alias&&!e&&(t+=" AS "+this.alias),t},ne.AggrValue.prototype.findAggregator=function(e){var t=I(this.toString())+":"+e.selectGroup.length,n=!1;if(!n){if(!this.nick){this.nick=t;for(var n=!1,r=0;r<e.removeKeys.length;r++)if(e.removeKeys[r]===t){n=!0;break}n||e.removeKeys.push(t)}e.selectGroup.push(this)}},ne.AggrValue.prototype.toType=function(){return["SUM","COUNT","AVG","MIN","MAX","AGGR","VAR","STDDEV"].indexOf(this.aggregatorid)>-1?"number":["ARRAY"].indexOf(this.aggregatorid)>-1?"array":["FIRST","LAST"].indexOf(this.aggregatorid)>-1?this.expression.toType():void 0},ne.AggrValue.prototype.toJS=function(){var e=this.nick;return void 0===e&&(e=this.toString()),"g['"+e+"']"},ne.OrderExpression=function(e){return ne.extend(this,e)},ne.OrderExpression.prototype.toString=ne.Expression.prototype.toString,ne.GroupExpression=function(e){return ne.extend(this,e)},ne.GroupExpression.prototype.toString=function(){return this.type+"("+this.group.toString()+")"},ne.FromData=function(e){return ne.extend(this,e)},ne.FromData.prototype.toString=function(){return this.data?"DATA("+(1e16*Math.random()|0)+")":"?"},ne.FromData.prototype.toJS=function(){},ne.Select.prototype.exec=function(e,t){this.preparams&&(e=this.preparams.concat(e));var n=O.useid;db=O.databases[n];var r=this.toString(),i=F(r),o=this.compile(n);if(o)return o.sql=r,o.dbversion=db.dbversion,db.sqlCacheSize>O.MAXSQLCACHESIZE&&db.resetSqlCache(),db.sqlCacheSize++,db.sqlCache[i]=o,O.res=o(e,t)},ne.Select.prototype.Select=function(){var e=this;if(arguments.length>1)args=Array.prototype.slice.call(arguments);else{if(1!=arguments.length)throw new Error("Wrong number of arguments of Select() function");Array.isArray(arguments[0])?args=arguments[0]:args=[arguments[0]]}return e.columns=[],args.forEach(function(t){if("string"==typeof t)e.columns.push(new ne.Column({columnid:t}));else if("function"==typeof t){var n=0;e.preparams?n=e.preparams.length:e.preparams=[],e.preparams.push(t),e.columns.push(new ne.Column({columnid:"*",func:t,param:n}))}}),e},ne.Select.prototype.From=function(e){var t=this;if(t.from||(t.from=[]),Array.isArray(e)){var n=0;t.preparams?n=t.preparams.length:t.preparams=[],t.preparams.push(e),t.from.push(new ne.ParamValue({param:n}))}else{if("string"!=typeof e)throw new Error("Unknown arguments in From() function");t.from.push(new ne.Table({tableid:e}))}return t},ne.Select.prototype.OrderBy=function(){var e=this;if(e.order=[],0==arguments.length)args=["_"];else if(arguments.length>1)args=Array.prototype.slice.call(arguments);else{if(1!=arguments.length)throw new Error("Wrong number of arguments of Select() function");Array.isArray(arguments[0])?args=arguments[0]:args=[arguments[0]]}return args.length>0&&args.forEach(function(t){var n=new ne.Column({columnid:t});"function"==typeof t&&(n=t),e.order.push(new ne.OrderExpression({expression:n,direction:"ASC"}))}),e},ne.Select.prototype.Top=function(e){var t=this;return t.top=new ne.NumValue({value:e}),t},ne.Select.prototype.GroupBy=function(){var e=this;if(arguments.length>1)args=Array.prototype.slice.call(arguments);else{if(1!=arguments.length)throw new Error("Wrong number of arguments of Select() function");Array.isArray(arguments[0])?args=arguments[0]:args=[arguments[0]]}return e.group=[],args.forEach(function(t){var n=new ne.Column({columnid:t});e.group.push(n)}),e},ne.Select.prototype.Where=function(e){var t=this;return"function"==typeof e&&(t.where=e),t},ne.FuncValue=function(e){return ne.extend(this,e)},ne.FuncValue.prototype.toString=function(e){var t="";return O.fn[this.funcid]?t+=this.funcid:O.aggr[this.funcid]?t+=this.funcid:(O.stdlib[this.funcid.toUpperCase()]||O.stdfn[this.funcid.toUpperCase()])&&(t+=this.funcid.toUpperCase()),t+="(",this.args&&this.args.length>0&&(t+=this.args.map(function(e){return e.toString()}).join(",")),t+=")",this.as&&!e&&(t+=" AS "+this.as.toString()),t},ne.FuncValue.prototype.execute=function(e,t,n){var r=1;return O.precompile(this,e,t),new Function("params,alasql","var y;return "+this.toJS("","",null))(t,O),n&&(r=n(r)),r},ne.FuncValue.prototype.findAggregator=function(e){this.args&&this.args.length>0&&this.args.forEach(function(t){t.findAggregator&&t.findAggregator(e)})},ne.FuncValue.prototype.toJS=function(e,t,n){var r="",i=this.funcid;return!O.fn[i]&&O.stdlib[i.toUpperCase()]?this.args&&this.args.length>0?r+=O.stdlib[i.toUpperCase()].apply(this,this.args.map(function(n){return n.toJS(e,t)})):r+=O.stdlib[i.toUpperCase()]():!O.fn[i]&&O.stdfn[i.toUpperCase()]?(this.newid&&(r+="new "),r+="alasql.stdfn."+this.funcid.toUpperCase()+"(",this.args&&this.args.length>0&&(r+=this.args.map(function(r){return r.toJS(e,t,n)}).join(",")),r+=")"):(this.newid&&(r+="new "),r+="alasql.fn."+this.funcid+"(",this.args&&this.args.length>0&&(r+=this.args.map(function(r){return r.toJS(e,t,n)}).join(",")),r+=")"),r};var ce=O.stdlib={},fe=O.stdfn={};ce.ABS=function(e){return"Math.abs("+e+")"},ce.CLONEDEEP=function(e){return"alasql.utils.cloneDeep("+e+")"},fe.CONCAT=function(){return Array.prototype.slice.call(arguments).join("")},ce.EXP=function(e){return"Math.pow(Math.E,"+e+")"},ce.IIF=function(e,t,n){if(3==arguments.length)return"(("+e+")?("+t+"):("+n+"))";throw new Error("Number of arguments of IFF is not equals to 3")},ce.IFNULL=function(e,t){return"("+e+"||"+t+")"},ce.INSTR=function(e,t){return"(("+e+").indexOf("+t+")+1)"},ce.LEN=ce.LENGTH=function(e){return a(e,"y.length")},ce.LOWER=ce.LCASE=function(e){return a(e,"String(y).toLowerCase()")},ce.LTRIM=function(e){return a(e,'y.replace(/^[ ]+/,"")')},ce.RTRIM=function(e){return a(e,'y.replace(/[ ]+$/,"")')},ce.MAX=ce.GREATEST=function(){return"Math.max("+Array.prototype.join.call(arguments,",")+")"},ce.MIN=ce.LEAST=function(){return"Math.min("+Array.prototype.join.call(arguments,",")+")"},ce.SUBSTRING=ce.SUBSTR=ce.MID=function(e,t,n){return 2==arguments.length?a(e,"y.substr("+t+"-1)"):3==arguments.length?a(e,"y.substr("+t+"-1,"+n+")"):void 0},fe.REGEXP_LIKE=function(e,t,n){return(e||"").search(RegExp(t,n))>-1},ce.ISNULL=ce.NULLIF=function(e,t){return"("+e+"=="+t+"?undefined:"+e+")"},ce.POWER=function(e,t){return"Math.pow("+e+","+t+")"},ce.RANDOM=function(e){return 0==arguments.length?"Math.random()":"(Math.random()*("+e+")|0)"},ce.ROUND=function(e,t){return 2==arguments.length?"Math.round(("+e+")*Math.pow(10,("+t+")))/Math.pow(10,("+t+"))":"Math.round("+e+")"},ce.CEIL=ce.CEILING=function(e){return"Math.ceil("+e+")"},ce.FLOOR=function(e){return"Math.floor("+e+")"},ce.ROWNUM=function(){return"1"},ce.ROW_NUMBER=function(){return"1"},ce.SQRT=function(e){return"Math.sqrt("+e+")"},ce.TRIM=function(e){return a(e,"y.trim()")},ce.UPPER=ce.UCASE=function(e){return a(e,"String(y).toUpperCase()")},fe.CONCAT_WS=function(){return args=Array.prototype.slice.call(arguments),args.slice(1,args.length).join(args[0])},O.aggr.GROUP_CONCAT=function(e,t,n){return 1==n?e:2==n?t+","+e:void 0},O.aggr.MEDIAN=function(e,t,n){if(2===n)return null!==e&&t.push(e),t;if(1===n)return null===e?[]:[e];if(!t.length)return t;var r=t.sort(),i=(r.length+1)/2;return Number.isInteger(i)?r[i-1]:(r[Math.floor(i-1)]+r[Math.ceil(i-1)])/2},O.aggr.QUART=function(e,t,n,r){if(2===n)return null!==e&&t.push(e),t;if(1===n)return null===e?[]:[e];if(!t.length)return t;r=r||1;var i=t.sort(),o=r*(i.length+1)/4;return Number.isInteger(o)?i[o-1]:i[Math.floor(o)]},O.aggr.QUART2=function(e,t,n){return O.aggr.QUART(e,t,n,2)},O.aggr.QUART3=function(e,t,n){return O.aggr.QUART(e,t,n,3)},O.aggr.VAR=function(e,t,n){if(1===n)return null===e?{arr:[],sum:0}:{arr:[e],sum:e};if(2===n)return null===e?t:(t.arr.push(e),t.sum+=e,t);for(var r=t.arr.length,i=t.sum/r,o=0,a=0;a<r;a++)o+=(t.arr[a]-i)*(t.arr[a]-i);return o/=r-1},O.aggr.STDEV=function(e,t,n){return 1===n||2===n?O.aggr.VAR(e,t,n):Math.sqrt(O.aggr.VAR(e,t,n))},O.aggr.VARP=function(e,t,n){if(1==n)return{arr:[e],sum:e};if(2==n)return t.arr.push(e),t.sum+=e,t;for(var r=t.arr.length,i=t.sum/r,o=0,a=0;a<r;a++)o+=(t.arr[a]-i)*(t.arr[a]-i);return o/=r},O.aggr.STD=O.aggr.STDDEV=O.aggr.STDEVP=function(e,t,n){return 1==n||2==n?O.aggr.VARP(e,t,n):Math.sqrt(O.aggr.VARP(e,t,n))},fe.REPLACE=function(e,t,n){return(e||"").split(t).join(n)};for(var he=[],pe=0;pe<256;pe++)he[pe]=(pe<16?"0":"")+pe.toString(16);fe.NEWID=fe.UUID=fe.GEN_RANDOM_UUID=function(){var e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,n=4294967295*Math.random()|0,r=4294967295*Math.random()|0;return he[255&e]+he[e>>8&255]+he[e>>16&255]+he[e>>24&255]+"-"+he[255&t]+he[t>>8&255]+"-"+he[t>>16&15|64]+he[t>>24&255]+"-"+he[63&n|128]+he[n>>8&255]+"-"+he[n>>16&255]+he[n>>24&255]+he[255&r]+he[r>>8&255]+he[r>>16&255]+he[r>>24&255]},ne.CaseValue=function(e){return ne.extend(this,e)},ne.CaseValue.prototype.toString=function(){var e="CASE ";return this.expression&&(e+=this.expression.toString()),this.whens&&(e+=this.whens.map(function(e){return" WHEN "+e.when.toString()+" THEN "+e.then.toString()}).join()),e+=" END"},ne.CaseValue.prototype.findAggregator=function(e){this.expression&&this.expression.findAggregator&&this.expression.findAggregator(e),this.whens&&this.whens.length>0&&this.whens.forEach(function(t){t.when.findAggregator&&t.when.findAggregator(e),t.then.findAggregator&&t.then.findAggregator(e)}),this.elses&&this.elses.findAggregator&&this.elses.findAggregator(e)},ne.CaseValue.prototype.toJS=function(e,t,n){var r="((function("+e+",params,alasql){var y,r;";return this.expression?(r+="v="+this.expression.toJS(e,t,n)+";",r+=(this.whens||[]).map(function(r){return" if(v=="+r.when.toJS(e,t,n)+") {r="+r.then.toJS(e,t,n)+"}"}).join(" else "),this.elses&&(r+=" else {r="+this.elses.toJS(e,t,n)+"}")):(r+=(this.whens||[]).map(function(r){return" if("+r.when.toJS(e,t,n)+") {r="+r.then.toJS(e,t,n)+"}"}).join(" else "),this.elses&&(r+=" else {r="+this.elses.toJS(e,t,n)+"}")),r+=";return r;}).bind(this))("+e+",params,alasql)"},ne.Json=function(e){return ne.extend(this,e)},ne.Json.prototype.toString=function(){var e="";return e+=de(this.value),e+=""};var de=O.utils.JSONtoString=function(e){var t="";if("string"==typeof e)t='"'+e+'"';else if("number"==typeof e)t=e;else if("boolean"==typeof e)t=e;else{if("object"!=typeof e)throw new Error("2Can not show JSON object "+JSON.stringify(e));if(Array.isArray(e))t+="["+e.map(function(e){return de(e)}).join(",")+"]";else if(!e.toJS||e instanceof ne.Json){t="{";var n=[];for(var r in e){var i="";if("string"==typeof r)i+='"'+r+'"';else if("number"==typeof r)i+=r;else{if("boolean"!=typeof r)throw new Error("THis is not ES6... no expressions on left side yet");i+=r}i+=":"+de(e[r]),n.push(i)}t+=n.join(",")+"}"}else{if(!e.toString)throw new Error("1Can not show JSON object "+JSON.stringify(e));t=e.toString()}}return t};ne.Json.prototype.toJS=function(e,t,n){return w(this.value,e,t,n)},ne.Convert=function(e){return ne.extend(this,e)},ne.Convert.prototype.toString=function(){var e="CONVERT(";return e+=this.dbtypeid,void 0!==this.dbsize&&(e+="("+this.dbsize,this.dbprecision&&(e+=","+dbprecision),e+=")"),e+=","+this.expression.toString(),this.style&&(e+=","+this.style),e+=")"},ne.Convert.prototype.toJS=function(e,t,n){return"alasql.stdfn.CONVERT("+this.expression.toJS(e,t,n)+',{dbtypeid:"'+this.dbtypeid+'",dbsize:'+this.dbsize+",style:"+this.style+"})"},O.stdfn.CONVERT=function(e,t){var n=e;if(t.style){var r;switch(r=/\d{8}/.test(n)?new Date(+n.substr(0,4),+n.substr(4,2)-1,+n.substr(6,2)):new Date(n),t.style){case 1:n=("0"+(r.getMonth()+1)).substr(-2)+"/"+("0"+r.getDate()).substr(-2)+"/"+("0"+r.getYear()).substr(-2);break;case 2:n=("0"+r.getYear()).substr(-2)+"."+("0"+(r.getMonth()+1)).substr(-2)+"."+("0"+r.getDate()).substr(-2);break;case 3:n=("0"+r.getDate()).substr(-2)+"/"+("0"+(r.getMonth()+1)).substr(-2)+"/"+("0"+r.getYear()).substr(-2);break;case 4:n=("0"+r.getDate()).substr(-2)+"."+("0"+(r.getMonth()+1)).substr(-2)+"."+("0"+r.getYear()).substr(-2);break;case 5:n=("0"+r.getDate()).substr(-2)+"-"+("0"+(r.getMonth()+1)).substr(-2)+"-"+("0"+r.getYear()).substr(-2);break;case 6:n=("0"+r.getDate()).substr(-2)+" "+r.toString().substr(4,3).toLowerCase()+" "+("0"+r.getYear()).substr(-2);break;case 7:n=r.toString().substr(4,3)+" "+("0"+r.getDate()).substr(-2)+","+("0"+r.getYear()).substr(-2);break;case 8:case 108:n=("0"+r.getHours()).substr(-2)+":"+("0"+r.getMinutes()).substr(-2)+":"+("0"+r.getSeconds()).substr(-2);break;case 10:n=("0"+(r.getMonth()+1)).substr(-2)+"-"+("0"+r.getDate()).substr(-2)+"-"+("0"+r.getYear()).substr(-2);break;case 11:n=("0"+r.getYear()).substr(-2)+"/"+("0"+(r.getMonth()+1)).substr(-2)+"/"+("0"+r.getDate()).substr(-2);break;case 12:n=("0"+r.getYear()).substr(-2)+("0"+(r.getMonth()+1)).substr(-2)+("0"+r.getDate()).substr(-2);break;case 101:n=("0"+(r.getMonth()+1)).substr(-2)+"/"+("0"+r.getDate()).substr(-2)+"/"+r.getFullYear();break;case 102:n=r.getFullYear()+"."+("0"+(r.getMonth()+1)).substr(-2)+"."+("0"+r.getDate()).substr(-2);break;case 103:n=("0"+r.getDate()).substr(-2)+"/"+("0"+(r.getMonth()+1)).substr(-2)+"/"+r.getFullYear();break;case 104:n=("0"+r.getDate()).substr(-2)+"."+("0"+(r.getMonth()+1)).substr(-2)+"."+r.getFullYear();break;case 105:n=("0"+r.getDate()).substr(-2)+"-"+("0"+(r.getMonth()+1)).substr(-2)+"-"+r.getFullYear();break;case 106:n=("0"+r.getDate()).substr(-2)+" "+r.toString().substr(4,3).toLowerCase()+" "+r.getFullYear();break;case 107:n=r.toString().substr(4,3)+" "+("0"+r.getDate()).substr(-2)+","+r.getFullYear();break;case 110:n=("0"+(r.getMonth()+1)).substr(-2)+"-"+("0"+r.getDate()).substr(-2)+"-"+r.getFullYear();break;case 111:n=r.getFullYear()+"/"+("0"+(r.getMonth()+1)).substr(-2)+"/"+("0"+r.getDate()).substr(-2);break;case 112:n=r.getFullYear()+("0"+(r.getMonth()+1)).substr(-2)+("0"+r.getDate()).substr(-2);break;default:throw new Error("The CONVERT style "+t.style+" is not realized yet.")}}var i=t.dbtypeid.toUpperCase();if("Date"==t.dbtypeid)return new Date(n);if("DATE"==i){var o=new Date(n),a=o.getFullYear()+"."+("0"+(o.getMonth()+1)).substr(-2)+"."+("0"+o.getDate()).substr(-2);return a}if("DATETIME"==i||"DATETIME2"==i){var o=new Date(n),a=o.getFullYear()+"."+("0"+(o.getMonth()+1)).substr(-2)+"."+("0"+o.getDate()).substr(-2);return a+=" "+("0"+o.getHours()).substr(-2)+":"+("0"+o.getMinutes()).substr(-2)+":"+("0"+o.getSeconds()).substr(-2),a+="."+("00"+o.getMilliseconds()).substr(-3)}if(["MONEY"].indexOf(i)>-1){var s=+n;return(0|s)+100*s%100/100}if(["BOOLEAN"].indexOf(i)>-1)return!!n;if(["INT","INTEGER","SMALLINT","BIGINT","SERIAL","SMALLSERIAL","BIGSERIAL"].indexOf(t.dbtypeid.toUpperCase())>-1)return 0|n;if(["STRING","VARCHAR","NVARCHAR","CHARACTER VARIABLE"].indexOf(t.dbtypeid.toUpperCase())>-1)return t.dbsize?(""+n).substr(0,t.dbsize):""+n;if(["CHAR","CHARACTER","NCHAR"].indexOf(i)>-1)return(n+new Array(t.dbsize+1).join(" ")).substr(0,t.dbsize);if(["NUMBER","FLOAT"].indexOf(i)>-1){if(void 0!==t.dbprecision){var s=+n,u=Math.pow(10,t.dbprecision);return(0|s)+s*u%u/u}return+n}if(["DECIMAL","NUMERIC"].indexOf(i)>-1){var s=+n,u=Math.pow(10,t.dbprecision);return(0|s)+s*u%u/u}if(["JSON"].indexOf(i)>-1){if("object"==typeof n)return n;try{return JSON.parse(n)}catch(e){throw new Error("Cannot convert string to JSON")}}return n},ne.ColumnDef=function(e){return ne.extend(this,e)},ne.ColumnDef.prototype.toString=function(){var e=this.columnid;return this.dbtypeid&&(e+=" "+this.dbtypeid),this.dbsize&&(e+="("+this.dbsize,this.dbprecision&&(e+=","+this.dbprecision),e+=")"),this.primarykey&&(e+=" PRIMARY KEY"),this.notnull&&(e+=" NOT NULL"),e},ne.CreateTable=function(e){return ne.extend(this,e)},ne.CreateTable.prototype.toString=function(){var e="CREATE";return this.temporary&&(e+=" TEMPORARY"),this.view?e+=" VIEW":e+=" "+(this.class?"CLASS":"TABLE"),this.ifnotexists&&(e+=" IF  NOT EXISTS"),e+=" "+this.table.toString(),this.viewcolumns&&(e+="("+this.viewcolumns.map(function(e){return e.toString()}).join(",")+")"),this.as?e+=" AS "+this.as:e+=" ("+this.columns.map(function(e){return e.toString()}).join(",")+")",this.view&&this.select&&(e+=" AS "+this.select.toString()),e},ne.CreateTable.prototype.execute=function(e,t,n){var r=O.databases[this.table.databaseid||e],i=this.table.tableid;if(!i)throw new Error("Table name is not defined");var o=this.columns,a=this.constraints||[];if(this.ifnotexists&&r.tables[i])return n?n(0):0;if(r.tables[i])throw new Error("Can not create table '"+i+"', because it already exists in the database '"+r.databaseid+"'");var s=r.tables[i]=new O.Table;this.class&&(s.isclass=!0);var u=[],l=[];if(o&&o.forEach(function(t){var n=t.dbtypeid;O.fn[n]||(n=n.toUpperCase()),["SERIAL","SMALLSERIAL","BIGSERIAL"].indexOf(n)>-1&&(t.identity={value:1,step:1});var r={columnid:t.columnid,dbtypeid:n,dbsize:t.dbsize,dbprecision:t.dbprecision,notnull:t.notnull,identity:t.identity};if(t.identity&&(s.identities[t.columnid]={value:+t.identity.value,step:+t.identity.step}),t.check&&s.checks.push({id:t.check.constrantid,fn:new Function("r","var y;return "+t.check.expression.toJS("r",""))}),t.default&&u.push("'"+t.columnid+"':"+t.default.toJS("r","")),t.primarykey){var i=s.pk={};i.columns=[t.columnid],i.onrightfns="r['"+t.columnid+"']",i.onrightfn=new Function("r","var y;return "+i.onrightfns),i.hh=F(i.onrightfns),s.uniqs[i.hh]={}}if(t.unique){var o={};s.uk=s.uk||[],s.uk.push(o),o.columns=[t.columnid],o.onrightfns="r['"+t.columnid+"']",o.onrightfn=new Function("r","var y;return "+o.onrightfns),o.hh=F(o.onrightfns),s.uniqs[o.hh]={}}if(t.foreignkey){var a=t.foreignkey.table,c=O.databases[a.databaseid||e].tables[a.tableid];if(void 0===a.columnid){if(!(c.pk.columns&&c.pk.columns.length>0))throw new Error("FOREIGN KEY allowed only to tables with PRIMARY KEYs");a.columnid=c.pk.columns[0]}var f=function(e){var n={};if(void 0===e[t.columnid])return!0;n[a.columnid]=e[t.columnid];var r=c.pk.onrightfn(n);if(!c.uniqs[c.pk.hh][r])throw new Error('Foreign key "'+e[t.columnid]+'" is not found in table '+c.tableid);return!0};s.checks.push({fn:f})}t.onupdate&&l.push("r['"+t.columnid+"']="+t.onupdate.toJS("r","")),s.columns.push(r),s.xcolumns[r.columnid]=r}),s.defaultfns=u.join(","),s.onupdatefns=l.join(";"),a.forEach(function(t){var n;if("PRIMARY KEY"===t.type){if(s.pk)throw new Error("Primary key already exists");var r=s.pk={};r.columns=t.columns,r.onrightfns=r.columns.map(function(e){return"r['"+e+"']"}).join("+'`'+"),r.onrightfn=new Function("r","var y;return "+r.onrightfns),r.hh=F(r.onrightfns),s.uniqs[r.hh]={}}else if("CHECK"===t.type)n=new Function("r","var y;return "+t.expression.toJS("r",""));else if("UNIQUE"===t.type){var i={};s.uk=s.uk||[],s.uk.push(i),i.columns=t.columns,i.onrightfns=i.columns.map(function(e){return"r['"+e+"']"}).join("+'`'+"),i.onrightfn=new Function("r","var y;return "+i.onrightfns),i.hh=F(i.onrightfns),s.uniqs[i.hh]={}}else if("FOREIGN KEY"===t.type){var o=s.xcolumns[t.columns[0]],a=t.fktable;t.fkcolumns&&t.fkcolumns.length>0&&(a.columnid=t.fkcolumns[0]);var u=O.databases[a.databaseid||e].tables[a.tableid];void 0===a.columnid&&(a.columnid=u.pk.columns[0]),n=function(e){var t={};if(void 0===e[o.columnid])return!0;t[a.columnid]=e[o.columnid];var n=u.pk.onrightfn(t);if(!u.uniqs[u.pk.hh][n])throw new Error('Foreign key "'+e[o.columnid]+'" is not found in table '+u.tableid);return!0}}n&&s.checks.push({fn:n,id:t.constraintid,fk:"FOREIGN KEY"===t.type})}),this.view&&this.viewcolumns){var c=this;this.viewcolumns.forEach(function(e,t){c.select.columns[t].as=e.columnid})}if(this.view&&this.select&&(s.view=!0,s.select=this.select.compile(this.table.databaseid||e)),r.engineid)return O.engines[r.engineid].createTable(this.table.databaseid||e,i,this.ifnotexists,n);s.insert=function(n,r){var i=O.inserted;O.inserted=[n];var o=this,a=!1,s=!1;for(var u in o.beforeinsert){var l=o.beforeinsert[u];l&&(l.funcid?!1===O.fn[l.funcid](n)&&(s=s||!0):l.statement&&!1===l.statement.execute(e)&&(s=s||!0))}if(!s){var c=!1;for(var u in o.insteadofinsert){c=!0;var l=o.insteadofinsert[u];l&&(l.funcid?O.fn[l.funcid](n):l.statement&&l.statement.execute(e))}if(!c){for(var f in o.identities){var h=o.identities[f];n[f]=h.value}if(o.checks&&o.checks.length>0&&o.checks.forEach(function(e){if(!e.fn(n))throw new Error("Violation of CHECK constraint "+(e.id||""))}),o.columns.forEach(function(e){if(e.notnull&&void 0===n[e.columnid])throw new Error("Wrong NULL value in NOT NULL column "+e.columnid)}),o.pk){var p=o.pk,d=p.onrightfn(n);if(void 0!==o.uniqs[p.hh][d]){if(!r)throw new Error("Cannot insert record, because it already exists in primary key index");a=o.uniqs[p.hh][d]}}if(o.uk&&o.uk.length&&o.uk.forEach(function(e){var t=e.onrightfn(n);if(void 0!==o.uniqs[e.hh][t]){if(!r)throw new Error("Cannot insert record, because it already exists in unique index");a=o.uniqs[e.hh][t]}}),a)o.update(function(e){for(var t in n)e[t]=n[t]},o.data.indexOf(a),t);else{o.data.push(n);for(var f in o.identities){var h=o.identities[f];h.value+=h.step}if(o.pk){var p=o.pk,d=p.onrightfn(n);o.uniqs[p.hh][d]=n}o.uk&&o.uk.length&&o.uk.forEach(function(e){var t=e.onrightfn(n);o.uniqs[e.hh][t]=n})}for(var u in o.afterinsert){var l=o.afterinsert[u];l&&(l.funcid?O.fn[l.funcid](n):l.statement&&l.statement.execute(e))}O.inserted=i}}},s.delete=function(t){var n=this,r=n.data[t],i=!1;for(var o in n.beforedelete){var a=n.beforedelete[o];a&&(a.funcid?!1===O.fn[a.funcid](r)&&(i=i||!0):a.statement&&!1===a.statement.execute(e)&&(i=i||!0))}if(i)return!1;var s=!1;for(var o in n.insteadofdelete){s=!0;var a=n.insteadofdelete[o];a&&(a.funcid?O.fn[a.funcid](r):a.statement&&a.statement.execute(e))}if(!s){if(this.pk){var u=this.pk,l=u.onrightfn(r);if(void 0===this.uniqs[u.hh][l])throw new Error("Something wrong with primary key index on table");this.uniqs[u.hh][l]=void 0}n.uk&&n.uk.length&&n.uk.forEach(function(e){var t=e.onrightfn(r);if(void 0===n.uniqs[e.hh][t])throw new Error("Something wrong with unique index on table");n.uniqs[e.hh][t]=void 0})}},s.deleteall=function(){this.data.length=0,this.pk&&(this.uniqs[this.pk.hh]={}),s.uk&&s.uk.length&&s.uk.forEach(function(e){s.uniqs[e.hh]={}})},s.update=function(t,n,r){var i,o=H(this.data[n]);if(this.pk&&(i=this.pk,i.pkaddr=i.onrightfn(o,r),void 0===this.uniqs[i.hh][i.pkaddr]))throw new Error("Something wrong with index on table");s.uk&&s.uk.length&&s.uk.forEach(function(e){if(e.ukaddr=e.onrightfn(o),void 0===s.uniqs[e.hh][e.ukaddr])throw new Error("Something wrong with unique index on table")}),t(o,r,O);var a=!1;for(var u in s.beforeupdate){var l=s.beforeupdate[u];l&&(l.funcid?!1===O.fn[l.funcid](this.data[n],o)&&(a=a||!0):l.statement&&!1===l.statement.execute(e)&&(a=a||!0))}if(a)return!1;var c=!1;for(var u in s.insteadofupdate){c=!0;var l=s.insteadofupdate[u];l&&(l.funcid?O.fn[l.funcid](this.data[n],o):l.statement&&l.statement.execute(e))}if(!c){if(s.checks&&s.checks.length>0&&s.checks.forEach(function(e){if(!e.fn(o))throw new Error("Violation of CHECK constraint "+(e.id||""))}),s.columns.forEach(function(e){if(e.notnull&&void 0===o[e.columnid])throw new Error("Wrong NULL value in NOT NULL column "+e.columnid)}),this.pk&&(i.newpkaddr=i.onrightfn(o),void 0!==this.uniqs[i.hh][i.newpkaddr]&&i.newpkaddr!==i.pkaddr))throw new Error("Record already exists");s.uk&&s.uk.length&&s.uk.forEach(function(e){if(e.newukaddr=e.onrightfn(o),void 0!==s.uniqs[e.hh][e.newukaddr]&&e.newukaddr!==e.ukaddr)throw new Error("Record already exists")}),this.pk&&(this.uniqs[i.hh][i.pkaddr]=void 0,this.uniqs[i.hh][i.newpkaddr]=o),s.uk&&s.uk.length&&s.uk.forEach(function(e){s.uniqs[e.hh][e.ukaddr]=void 0,s.uniqs[e.hh][e.newukaddr]=o}),this.data[n]=o;for(var u in s.afterupdate){var l=s.afterupdate[u];l&&(l.funcid?O.fn[l.funcid](this.data[n],o):l.statement&&l.statement.execute(e))}}};var f;return O.options.nocount||(f=1),n&&(f=n(f)),f},O.fn.Date=Object,O.fn.Date=Date,O.fn.Number=Number,O.fn.String=String,O.fn.Boolean=Boolean,fe.EXTEND=O.utils.extend,fe.CHAR=String.fromCharCode.bind(String),fe.ASCII=function(e){return e.charCodeAt(0)},fe.COALESCE=function(){for(var e=0;e<arguments.length;e++)if(void 0!==arguments[e]&&("number"!=typeof arguments[e]||!isNaN(arguments[e])))return arguments[e]},fe.USER=function(){return"alasql"},fe.OBJECT_ID=function(e){return!!O.tables[e]},fe.DATE=function(e){return/\d{8}/.test(e)?new Date(+e.substr(0,4),+e.substr(4,2)-1,+e.substr(6,2)):new Date(e)},fe.NOW=function(){var e=new Date,t=e.getFullYear()+"."+("0"+(e.getMonth()+1)).substr(-2)+"."+("0"+e.getDate()).substr(-2);return t+=" "+("0"+e.getHours()).substr(-2)+":"+("0"+e.getMinutes()).substr(-2)+":"+("0"+e.getSeconds()).substr(-2),t+="."+("00"+e.getMilliseconds()).substr(-3)},fe.GETDATE=fe.NOW,fe.CURRENT_TIMESTAMP=fe.NOW,fe.SECOND=function(e){var e=new Date(e);return e.getSeconds()},fe.MINUTE=function(e){var e=new Date(e);return e.getMinutes()},fe.HOUR=function(e){var e=new Date(e);return e.getHours()},fe.DAYOFWEEK=fe.WEEKDAY=function(e){var e=new Date(e);return e.getDay()},fe.DAY=fe.DAYOFMONTH=function(e){var e=new Date(e);return e.getDate()},fe.MONTH=function(e){var e=new Date(e);return e.getMonth()+1},fe.YEAR=function(e){var e=new Date(e);return e.getFullYear()};var ve={year:31536e6,quarter:7884e6,month:2592e6,week:6048e5,day:864e5,dayofyear:864e5,weekday:864e5,hour:36e5,minute:6e4,second:1e3,millisecond:1,microsecond:.001};O.stdfn.DATEDIFF=function(e,t,n){return(new Date(n).getTime()-new Date(t).getTime())/ve[e.toLowerCase()]},O.stdfn.DATEADD=function(e,t,n){var r=new Date(n).getTime()+t*ve[e.toLowerCase()];return new Date(r)},O.stdfn.INTERVAL=function(e,t){return e*ve[t.toLowerCase()]},O.stdfn.DATE_ADD=O.stdfn.ADDDATE=function(e,t){var n=new Date(e).getTime()+t;return new Date(n)},O.stdfn.DATE_SUB=O.stdfn.SUBDATE=function(e,t){var n=new Date(e).getTime()-t;return new Date(n)},ne.DropTable=function(e){return ne.extend(this,e)},ne.DropTable.prototype.toString=function(){var e="DROP ";return this.view?e+="VIEW":e+="TABLE",this.ifexists&&(e+=" IF EXISTS"),e+=" "+this.tables.toString()},ne.DropTable.prototype.execute=function(e,t,n){var r=this.ifexists,i=0,o=0,a=this.tables.length;return this.tables.forEach(function(t){var s=O.databases[t.databaseid||e],u=t.tableid;if(!r||r&&s.tables[u]){if(s.tables[u])s.engineid?O.engines[s.engineid].dropTable(t.databaseid||e,u,r,function(e){delete s.tables[u],i+=e,++o==a&&n&&n(i)}):(delete s.tables[u],i++,++o==a&&n&&n(i));else if(!O.options.dropifnotexists)throw new Error("Can not drop table '"+t.tableid+"', because it does not exist in the database.")}else++o==a&&n&&n(i)}),i},ne.TruncateTable=function(e){return ne.extend(this,e)},ne.TruncateTable.prototype.toString=function(){var e="TRUNCATE TABLE";return e+=" "+this.table.toString()},ne.TruncateTable.prototype.execute=function(e,t,n){var r=O.databases[this.table.databaseid||e],i=this.table.tableid;if(r.engineid)return O.engines[r.engineid].truncateTable(this.table.databaseid||e,i,this.ifexists,n);if(!r.tables[i])throw new Error("Cannot truncate table becaues it does not exist");return r.tables[i].data=[],n?n(0):0},ne.CreateVertex=function(e){return ne.extend(this,e)},ne.CreateVertex.prototype.toString=function(){var e="CREATE VERTEX ";return this.class&&(e+=this.class+" "),this.sharp&&(e+="#"+this.sharp+" "),this.sets?e+=this.sets.toString():this.content?e+=this.content.toString():this.select&&(e+=this.select.toString()),e},ne.CreateVertex.prototype.toJS=function(e){return"this.queriesfn["+(this.queriesidx-1)+"](this.params,null,"+e+")"},ne.CreateVertex.prototype.compile=function(e){var t=e,n=this.sharp;if(void 0!==this.name)var r="x.name="+this.name.toJS(),i=new Function("x",r);if(this.sets&&this.sets.length>0)var r=this.sets.map(function(e){return"x['"+e.column.columnid+"']="+e.expression.toJS("x","")}).join(";"),o=new Function("x,params,alasql",r);return function(e,r){var a,s,u=O.databases[t];s=void 0!==n?n:u.counter++;var l={$id:s,$node:"VERTEX"};return u.objects[l.$id]=l,a=l,i&&i(l),o&&o(l,e,O),r&&(a=r(a)),a}},ne.CreateEdge=function(e){return ne.extend(this,e)},ne.CreateEdge.prototype.toString=function(){var e="CREATE EDGE ";return this.class&&(e+=this.class+" "),e},ne.CreateEdge.prototype.toJS=function(e){return"this.queriesfn["+(this.queriesidx-1)+"](this.params,null,"+e+")"},ne.CreateEdge.prototype.compile=function(e){var t=e,n=new Function("params,alasql","var y;return "+this.from.toJS()),r=new Function("params,alasql","var y;return "+this.to.toJS());if(void 0!==this.name)var i="x.name="+this.name.toJS(),o=new Function("x",i);if(this.sets&&this.sets.length>0)var i=this.sets.map(function(e){return"x['"+e.column.columnid+"']="+e.expression.toJS("x","")}).join(";"),a=new Function("x,params,alasql","var y;"+i);return function(e,i){var s=0,u=O.databases[t],l={$id:u.counter++,$node:"EDGE"},c=n(e,O),f=r(e,O);return l.$in=[c.$id],l.$out=[f.$id],void 0===c.$out&&(c.$out=[]),c.$out.push(l.$id),void 0===typeof f.$in&&(f.$in=[]),f.$in.push(l.$id),u.objects[l.$id]=l,s=l,o&&o(l),a&&a(l,e,O),i&&(s=i(s)),s}},ne.CreateGraph=function(e){return ne.extend(this,e)},ne.CreateGraph.prototype.toString=function(){var e="CREATE GRAPH ";return this.class&&(e+=this.class+" "),e},ne.CreateGraph.prototype.execute=function(e,t,n){function r(e){var t=O.databases[O.useid].objects;for(var n in t)if(t[n].name===e)return t[n]}function i(n){var r={};void 0!==n.as&&(O.vars[n.as]=r),void 0!==n.prop&&(r.$id=n.prop,r.name=n.prop),void 0!==n.sharp&&(r.$id=n.sharp),void 0!==n.name&&(r.name=n.name),void 0!==n.class&&(r.$class=n.class);var i=O.databases[e];if(void 0===r.$id&&(r.$id=i.counter++),r.$node="VERTEX",void 0!==n.json&&X(r,new Function("params,alasql","var y;return "+n.json.toJS())(t,O)),i.objects[r.$id]=r,void 0!==r.$class){if(void 0===O.databases[e].tables[r.$class])throw new Error("No such class. Pleace use CREATE CLASS");O.databases[e].tables[r.$class].data.push(r)}return o.push(r.$id),r}var o=[];return this.from&&O.from[this.from.funcid]&&(this.graph=O.from[this.from.funcid.toUpperCase()]),this.graph.forEach(function(n){if(n.source){var a={};void 0!==n.as&&(O.vars[n.as]=a),void 0!==n.prop&&(a.name=n.prop),void 0!==n.sharp&&(a.$id=n.sharp),void 0!==n.name&&(a.name=n.name),void 0!==n.class&&(a.$class=n.class);var s=O.databases[e];void 0===a.$id&&(a.$id=s.counter++),a.$node="EDGE",void 0!==n.json&&X(a,new Function("params,alasql","var y;return "+n.json.toJS())(t,O));var u;if(n.source.vars){var l=O.vars[n.source.vars];u="object"==typeof l?l:s.objects[l]}else{var c=n.source.sharp;void 0===c&&(c=n.source.prop),void 0!==(u=O.databases[e].objects[c])||!O.options.autovertex||void 0===n.source.prop&&void 0===n.source.name||void 0===(u=r(n.source.prop||n.source.name))&&(u=i(n.source))}var f;if(n.source.vars){var l=O.vars[n.target.vars];f="object"==typeof l?l:s.objects[l]}else{var h=n.target.sharp;void 0===h&&(h=n.target.prop),void 0!==(f=O.databases[e].objects[h])||!O.options.autovertex||void 0===n.target.prop&&void 0===n.target.name||void 0===(f=r(n.target.prop||n.target.name))&&(f=i(n.target))}if(a.$in=[u.$id],a.$out=[f.$id],void 0===u.$out&&(u.$out=[]),u.$out.push(a.$id),void 0===f.$in&&(f.$in=[]),f.$in.push(a.$id),s.objects[a.$id]=a,void 0!==a.$class){if(void 0===O.databases[e].tables[a.$class])throw new Error("No such class. Pleace use CREATE CLASS");O.databases[e].tables[a.$class].data.push(a)}o.push(a.$id)}else i(n)}),n&&(o=n(o)),o},ne.CreateGraph.prototype.compile1=function(e){var t=e,n=new Function("params,alasql","var y;return "+this.from.toJS()),r=new Function("params,alasql","var y;return "+this.to.toJS());if(void 0!==this.name)var i="x.name="+this.name.toJS(),o=new Function("x",i);if(this.sets&&this.sets.length>0)var i=this.sets.map(function(e){return"x['"+e.column.columnid+"']="+e.expression.toJS("x","")}).join(";"),a=new Function("x,params,alasql","var y;"+i);return function(e,i){var s=0,u=O.databases[t],l={$id:u.counter++,$node:"EDGE"},c=n(e,O),f=r(e,O);return l.$in=[c.$id],l.$out=[f.$id],void 0===c.$out&&(c.$out=[]),c.$out.push(l.$id),void 0===f.$in&&(f.$in=[]),f.$in.push(l.$id),u.objects[l.$id]=l,s=l,o&&o(l),a&&a(l,e,O),i&&(s=i(s)),s}},ne.AlterTable=function(e){return ne.extend(this,e)},ne.AlterTable.prototype.toString=function(){var e="ALTER TABLE "+this.table.toString();return this.renameto&&(e+=" RENAME TO "+this.renameto),e},ne.AlterTable.prototype.execute=function(e,t,n){var r=O.databases[e];if(r.dbversion=Date.now(),this.renameto){var i=this.table.tableid,o=this.renameto,a=1;if(r.tables[o])throw new Error("Can not rename a table '"+i+"' to '"+o+"', because the table with this name already exists");if(o==i)throw new Error("Can not rename a table '"+i+"' to itself");return r.tables[o]=r.tables[i],delete r.tables[i],a=1,n&&n(a),a}if(this.addcolumn){var r=O.databases[this.table.databaseid||e];r.dbversion++;var s=this.table.tableid,u=r.tables[s],l=this.addcolumn.columnid;if(u.xcolumns[l])throw new Error('Cannot add column "'+l+'", because it already exists in the table "'+s+'"');var c={columnid:l,dbtypeid:this.dbtypeid,dbsize:this.dbsize,dbprecision:this.dbprecision,dbenum:this.dbenum,defaultfns:null};u.columns.push(c),u.xcolumns[l]=c;for(var f=0,h=u.data.length;f<h;f++)u.data[f][l]=void 0;return n?n(1):1}if(this.modifycolumn){var r=O.databases[this.table.databaseid||e];r.dbversion++;var s=this.table.tableid,u=r.tables[s],l=this.modifycolumn.columnid;if(!u.xcolumns[l])throw new Error('Cannot modify column "'+l+'", because it was not found in the table "'+s+'"');var c=u.xcolumns[l];return c.dbtypeid=this.dbtypeid,c.dbsize=this.dbsize,c.dbprecision=this.dbprecision,c.dbenum=this.dbenum,n?n(1):1}if(this.renamecolumn){var r=O.databases[this.table.databaseid||e];r.dbversion++;var c,s=this.table.tableid,u=r.tables[s],l=this.renamecolumn,p=this.to;if(!u.xcolumns[l])throw new Error('Column "'+l+'" is not found in the table "'+s+'"');if(u.xcolumns[p])throw new Error('Column "'+p+'" already exists in the table "'+s+'"');if(l!=p){for(var d=0;d<u.columns.length;d++)u.columns[d].columnid==l&&(u.columns[d].columnid=p);u.xcolumns[p]=u.xcolumns[l],delete u.xcolumns[l];for(var f=0,h=u.data.length;f<h;f++)u.data[f][p]=u.data[f][l],delete u.data[f][l];return u.data.length}return n?n(0):0}if(this.dropcolumn){var r=O.databases[this.table.databaseid||e];r.dbversion++;for(var s=this.table.tableid,u=r.tables[s],l=this.dropcolumn,v=!1,d=0;d<u.columns.length;d++)if(u.columns[d].columnid==l){v=!0,u.columns.splice(d,1);break}if(!v)throw new Error('Cannot drop column "'+l+'", because it was not found in the table "'+s+'"');delete u.xcolumns[l];for(var f=0,h=u.data.length;f<h;f++)delete u.data[f][l];return n?n(u.data.length):u.data.length}throw Error("Unknown ALTER TABLE method")},ne.CreateIndex=function(e){return ne.extend(this,e)},ne.CreateIndex.prototype.toString=function(){var e="CREATE";return this.unique&&(e+=" UNIQUE"),e+=" INDEX "+this.indexid+" ON "+this.table.toString(),e+="("+this.columns.toString()+")"},ne.CreateIndex.prototype.execute=function(e,t,n){var r=O.databases[e],i=this.table.tableid,o=r.tables[i],a=this.indexid;r.indices[a]=i;var s=this.columns.map(function(e){return e.expression.toJS("r","")}).join("+'`'+"),u=new Function("r,params,alasql","return "+s);if(this.unique){o.uniqdefs[a]={rightfns:s};var l=o.uniqs[a]={};if(o.data.length>0)for(var c=0,f=o.data.length;c<f;c++){var h=s(o.data[c]);l[h]||(l[h]={num:0}),l[h].num++}}else{var p=F(s);o.inddefs[a]={rightfns:s,hh:p},o.indices[p]={};var d=o.indices[p]={};if(o.data.length>0)for(var c=0,f=o.data.length;c<f;c++){var h=u(o.data[c],t,O);d[h]||(d[h]=[]),d[h].push(o.data[c])}}var v=1;return n&&(v=n(v)),v},ne.Reindex=function(e){return ne.extend(this,e)},ne.Reindex.prototype.toString=function(){return"REINDEX "+this.indexid},ne.Reindex.prototype.execute=function(e,t,n){var r=O.databases[e],i=this.indexid,o=r.indices[i];r.tables[o].indexColumns();var a=1;return n&&(a=n(a)),a},ne.DropIndex=function(e){return ne.extend(this,e)},ne.DropIndex.prototype.toString=function(){return"DROP INDEX"+this.indexid},ne.DropIndex.prototype.compile=function(e){return this.indexid,function(){return 1}},ne.WithSelect=function(e){return ne.extend(this,e)},ne.WithSelect.prototype.toString=function(){var e="WITH ";return e+=this.withs.map(function(e){return e.name+" AS ("+e.select.toString()+")"}).join(",")+" ",e+=this.select.toString()},ne.WithSelect.prototype.execute=function(e,t,n){var r=this,i=[];return r.withs.forEach(function(n){i.push(O.databases[e].tables[n.name]),(O.databases[e].tables[n.name]=new ee({tableid:n.name})).data=n.select.execute(e,t)}),this.select.execute(e,t,function(t){return r.withs.forEach(function(t,n){i[n]?O.databases[e].tables[t.name]=i[n]:delete O.databases[e].tables[t.name]}),n&&(t=n(t)),t})},ne.If=function(e){return ne.extend(this,e)},ne.If.prototype.toString=function(){var e="IF ";return e+=this.expression.toString(),e+=" "+this.thenstat.toString(),this.elsestat&&(e+=" ELSE "+this.thenstat.toString()),e},ne.If.prototype.execute=function(e,t,n){var r;return new Function("params,alasql,p","var y;return "+this.expression.toJS("({})","",null)).bind(this)(t,O)?r=this.thenstat.execute(e,t,n):this.elsestat?r=this.elsestat.execute(e,t,n):n&&(r=n(r)),r},ne.While=function(e){return ne.extend(this,e)},ne.While.prototype.toString=function(){var e="WHILE ";return e+=this.expression.toString(),e+=" "+this.loopstat.toString()},ne.While.prototype.execute=function(e,t,n){function r(u){s?o.push(u):s=!0,setTimeout(function(){a(t,O)?i.loopstat.execute(e,t,r):o=n(o)},0)}var i=this,o=[],a=new Function("params,alasql,p","var y;return "+this.expression.toJS());if(n){var s=!1;r()}else for(;a(t,O);){var u=i.loopstat.execute(e,t);o.push(u)}return o},ne.Break=function(e){return ne.extend(this,e)},ne.Break.prototype.toString=function(){return"BREAK"},ne.Break.prototype.execute=function(e,t,n,r){var i=1;return n&&(i=n(i)),i},ne.Continue=function(e){return ne.extend(this,e)},ne.Continue.prototype.toString=function(){return"CONTINUE"},ne.Continue.prototype.execute=function(e,t,n,r){var i=1;return n&&(i=n(i)),i},ne.BeginEnd=function(e){return ne.extend(this,e)},ne.BeginEnd.prototype.toString=function(){return"BEGIN "+this.statements.toString()+" END"},ne.BeginEnd.prototype.execute=function(e,t,n,r){function i(){o.statements[s].execute(e,t,function(e){if(a.push(e),++s<o.statements.length)return i();n&&(a=n(a))})}var o=this,a=[],s=0;return i(),a},ne.Insert=function(e){return ne.extend(this,e)},ne.Insert.prototype.toString=function(){var e="INSERT ";return this.orreplace&&(e+="OR REPLACE "),this.replaceonly&&(e="REPLACE "),e+="INTO "+this.into.toString(),this.columns&&(e+="("+this.columns.toString()+")"),this.values&&(e+=" VALUES "+this.values.toString()),this.select&&(e+=" "+this.select.toString()),e},ne.Insert.prototype.toJS=function(e,t,n){return"this.queriesfn["+(this.queriesidx-1)+"](this.params,null,"+e+")"},ne.Insert.prototype.compile=function(e){var t=this;e=t.into.databaseid||e;var n=O.databases[e],r=t.into.tableid,i=n.tables[r];if(!i)throw"Table '"+r+"' could not be found";var o,a="",s="",a="db.tables['"+r+"'].dirty=true;",u="var a,aa=[],x;";if(this.values){this.exists&&(this.existsfn=this.exists.map(function(t){var n=t.compile(e);return n.query.modifier="RECORDSET",n})),this.queries&&(this.queriesfn=this.queries.map(function(t){var n=t.compile(e);return n.query.modifier="RECORDSET",n})),t.values.forEach(function(o){var u=[];t.columns?t.columns.forEach(function(e,t){var n="'"+e.columnid+"':";i.xcolumns&&i.xcolumns[e.columnid]?["INT","FLOAT","NUMBER","MONEY"].indexOf(i.xcolumns[e.columnid].dbtypeid)>=0?n+="(x="+o[t].toJS()+",x==undefined?undefined:+x)":O.fn[i.xcolumns[e.columnid].dbtypeid]?(n+="(new "+i.xcolumns[e.columnid].dbtypeid+"(",n+=o[t].toJS(),n+="))"):n+=o[t].toJS():n+=o[t].toJS(),u.push(n)}):Array.isArray(o)&&i.columns&&i.columns.length>0?i.columns.forEach(function(e,t){var n="'"+e.columnid+"':";["INT","FLOAT","NUMBER","MONEY"].indexOf(e.dbtypeid)>=0?n+="+"+o[t].toJS():O.fn[e.dbtypeid]?(n+="(new "+e.dbtypeid+"(",n+=o[t].toJS(),n+="))"):n+=o[t].toJS(),u.push(n)}):s=w(o),n.tables[r].defaultfns&&u.unshift(n.tables[r].defaultfns),a+=s?"a="+s+";":"a={"+u.join(",")+"};",n.tables[r].isclass&&(a+="var db=alasql.databases['"+e+"'];",a+='a.$class="'+r+'";',a+="a.$id=db.counter++;",a+="db.objects[a.$id]=a;"),n.tables[r].insert?(a+="var db=alasql.databases['"+e+"'];",a+="db.tables['"+r+"'].insert(a,"+(t.orreplace?"true":"false")+");"):a+="aa.push(a);"}),o=u+a,n.tables[r].insert||(a+="alasql.databases['"+e+"'].tables['"+r+"'].data=alasql.databases['"+e+"'].tables['"+r+"'].data.concat(aa);"),n.tables[r].insert&&n.tables[r].isclass?a+="return a.$id;":a+="return "+t.values.length;var l=new Function("db, params, alasql","var y;"+u+a).bind(this)}else if(this.select){this.select.modifier="RECORDSET";var c=this.select.compile(e);if(n.engineid&&O.engines[n.engineid].intoTable){var f=function(e,t){var i=c(e);return O.engines[n.engineid].intoTable(n.databaseid,r,i.data,null,t)};return f}var h="return alasql.utils.extend(r,{"+i.defaultfns+"})",p=new Function("r,db,params,alasql",h),l=function(e,n,i){var o=c(n).data;if(e.tables[r].insert)for(var a=0,s=o.length;a<s;a++){var u=H(o[a]);p(u,e,n,i),e.tables[r].insert(u,t.orreplace)}else e.tables[r].data=e.tables[r].data.concat(o);return i.options.nocount?void 0:o.length}}else{if(!this.default)throw new Error("Wrong INSERT parameters");var d="db.tables['"+r+"'].data.push({"+i.defaultfns+"});return 1;",l=new Function("db,params,alasql",d)}if(n.engineid&&O.engines[n.engineid].intoTable&&O.options.autocommit)var f=function(e,t){var i=new Function("db,params","var y;"+o+"return aa;")(n,e);return O.engines[n.engineid].intoTable(n.databaseid,r,i,null,t)};else var f=function(t,n){var i=O.databases[e];O.options.autocommit&&i.engineid&&O.engines[i.engineid].loadTableData(e,r);var o=l(i,t,O);return O.options.autocommit&&i.engineid&&O.engines[i.engineid].saveTableData(e,r),O.options.nocount&&(o=void 0),n&&n(o),o};return f},ne.Insert.prototype.execute=function(e,t,n){return this.compile(e)(t,n)},ne.CreateTrigger=function(e){return ne.extend(this,e)},ne.CreateTrigger.prototype.toString=function(){var e="CREATE TRIGGER "+this.trigger+" ";return this.when&&(e+=this.when+" "),e+=this.action+" ON ",this.table.databaseid&&(e+=this.table.databaseid+"."),e+=this.table.tableid+" ",e+=this.statement.toString()},ne.CreateTrigger.prototype.execute=function(e,t,n){var r=1,i=this.trigger;e=this.table.databaseid||e;var o=O.databases[e],a=this.table.tableid,s={action:this.action,when:this.when,statement:this.statement,funcid:this.funcid};return o.triggers[i]=s,"INSERT"==s.action&&"BEFORE"==s.when?o.tables[a].beforeinsert[i]=s:"INSERT"==s.action&&"AFTER"==s.when?o.tables[a].afterinsert[i]=s:"INSERT"==s.action&&"INSTEADOF"==s.when?o.tables[a].insteadofinsert[i]=s:"DELETE"==s.action&&"BEFORE"==s.when?o.tables[a].beforedelete[i]=s:"DELETE"==s.action&&"AFTER"==s.when?o.tables[a].afterdelete[i]=s:"DELETE"==s.action&&"INSTEADOF"==s.when?o.tables[a].insteadofdelete[i]=s:"UPDATE"==s.action&&"BEFORE"==s.when?o.tables[a].beforeupdate[i]=s:"UPDATE"==s.action&&"AFTER"==s.when?o.tables[a].afterupdate[i]=s:"UPDATE"==s.action&&"INSTEADOF"==s.when&&(o.tables[a].insteadofupdate[i]=s),n&&(r=n(r)),r},ne.DropTrigger=function(e){return ne.extend(this,e)},ne.DropTrigger.prototype.toString=function(){return"DROP TRIGGER "+this.trigger},ne.DropTrigger.prototype.execute=function(e,t,n){var r=0,i=O.databases[e],o=this.trigger,a=i.triggers[o];if(!a)throw new Error("Trigger not found");return r=1,delete i.tables[a].beforeinsert[o],delete i.tables[a].afterinsert[o],delete i.tables[a].insteadofinsert[o],delete i.tables[a].beforedelte[o],delete i.tables[a].afterdelete[o],delete i.tables[a].insteadofdelete[o],delete i.tables[a].beforeupdate[o],delete i.tables[a].afterupdate[o],delete i.tables[a].insteadofupdate[o],delete i.triggers[o],n&&(r=n(r)),r},ne.Delete=function(e){return ne.extend(this,e)},ne.Delete.prototype.toString=function(){var e="DELETE FROM "+this.table.toString();return this.where&&(e+=" WHERE "+this.where.toString()),e},ne.Delete.prototype.compile=function(e){e=this.table.databaseid||e;var t,n=this.table.tableid,r=O.databases[e];if(this.where){this.exists&&(this.existsfn=this.exists.map(function(t){var n=t.compile(e);return n.query.modifier="RECORDSET",n})),this.queries&&(this.queriesfn=this.queries.map(function(t){var n=t.compile(e);return n.query.modifier="RECORDSET",n}));var i=new Function("r,params,alasql","var y;return ("+this.where.toJS("r","")+")").bind(this);t=function(t,o){if(r.engineid&&O.engines[r.engineid].deleteFromTable)return O.engines[r.engineid].deleteFromTable(e,n,i,t,o);O.options.autocommit&&r.engineid&&"LOCALSTORAGE"==r.engineid&&O.engines[r.engineid].loadTableData(e,n);for(var a=r.tables[n],s=a.data.length,u=[],l=0,c=a.data.length;l<c;l++)i(a.data[l],t,O)?a.delete&&a.delete(l,t,O):u.push(a.data[l]);a.data=u;for(var f in a.afterdelete){var h=a.afterdelete[f];h&&(h.funcid?O.fn[h.funcid]():h.statement&&h.statement.execute(e))}var p=s-a.data.length;return O.options.autocommit&&r.engineid&&"LOCALSTORAGE"==r.engineid&&O.engines[r.engineid].saveTableData(e,n),o&&o(p),p}}else t=function(t,i){O.options.autocommit&&r.engineid&&O.engines[r.engineid].loadTableData(e,n),r.tables[n].dirty=!0;var o=r.tables[n].data.length;r.tables[n].data.length=0;for(var a in r.tables[n].uniqs)r.tables[n].uniqs[a]={};for(var a in r.tables[n].indices)r.tables[n].indices[a]={};return O.options.autocommit&&r.engineid&&O.engines[r.engineid].saveTableData(e,n),i&&i(o),o};return t},ne.Delete.prototype.execute=function(e,t,n){return this.compile(e)(t,n)},ne.Update=function(e){return ne.extend(this,e)},ne.Update.prototype.toString=function(){var e="UPDATE "+this.table.toString();return this.columns&&(e+=" SET "+this.columns.toString()),this.where&&(e+=" WHERE "+this.where.toString()),e},ne.SetColumn=function(e){return ne.extend(this,e)},ne.SetColumn.prototype.toString=function(){return this.column.toString()+"="+this.expression.toString()},ne.Update.prototype.compile=function(e){e=this.table.databaseid||e;var t=this.table.tableid;if(this.where){this.exists&&(this.existsfn=this.exists.map(function(t){var n=t.compile(e);return n.query.modifier="RECORDSET",n})),this.queries&&(this.queriesfn=this.queries.map(function(t){var n=t.compile(e);return n.query.modifier="RECORDSET",n}));var n=new Function("r,params,alasql","var y;return "+this.where.toJS("r","")).bind(this)}var r=O.databases[e].tables[t].onupdatefns||"";r+=";",this.columns.forEach(function(e){r+="r['"+e.column.columnid+"']="+e.expression.toJS("r","")+";"});var i=new Function("r,params,alasql","var y;"+r);return function(r,o){var a=O.databases[e];if(a.engineid&&O.engines[a.engineid].updateTable)return O.engines[a.engineid].updateTable(e,t,i,n,r,o);O.options.autocommit&&a.engineid&&O.engines[a.engineid].loadTableData(e,t);var s=a.tables[t];if(!s)throw new Error("Table '"+t+"' not exists");for(var u=0,l=0,c=s.data.length;l<c;l++)n&&!n(s.data[l],r,O)||(s.update?s.update(i,l,r):i(s.data[l],r,O),u++);return O.options.autocommit&&a.engineid&&O.engines[a.engineid].saveTableData(e,t),o&&o(u),u}},ne.Update.prototype.execute=function(e,t,n){return this.compile(e)(t,n)},ne.Merge=function(e){return ne.extend(this,e)},ne.Merge.prototype.toString=function(){var e="MERGE ";return e+=this.into.tableid+" ",this.into.as&&(e+="AS "+this.into.as+" "),e+="USING "+this.using.tableid+" ",this.using.as&&(e+="AS "+this.using.as+" "),e+="ON "+this.on.toString()+" ",this.matches.forEach(function(t){e+="WHEN ",t.matched||(e+="NOT "),e+="MATCHED ",t.bytarget&&(e+="BY TARGET "),t.bysource&&(e+="BY SOURCE "),t.expr&&(e+="AND "+t.expr.toString()+" "),e+="THEN ",t.action.delete&&(e+="DELETE "),t.action.insert&&(e+="INSERT ",t.action.columns&&(e+="("+t.action.columns.toString()+") "),t.action.values&&(e+="VALUES ("+t.action.values.toString()+") "),t.action.defaultvalues&&(e+="DEFAULT VALUES ")),t.action.update&&(e+="UPDATE ",e+=t.action.update.map(function(e){return e.toString()}).join(",")+" ")}),e},ne.Merge.prototype.execute=function(e,t,n){var r=1;return n&&(r=n(r)),r},ne.CreateDatabase=function(e){return ne.extend(this,e)},ne.CreateDatabase.prototype.toString=function(){var e="CREATE";return this.engineid&&(e+=" "+this.engineid),e+=" DATABASE",this.ifnotexists&&(e+=" IF NOT EXISTS"),e+=" "+this.databaseid,this.args&&this.args.length>0&&(e+="("+this.args.map(function(e){return e.toString()}).join(", ")+")"),this.as&&(e+=" AS "+this.as),e},ne.CreateDatabase.prototype.execute=function(e,t,n){if(this.args&&this.args.length>0&&this.args.map(function(e){return new Function("params,alasql","var y;return "+e.toJS())(t,O)}),this.engineid){var r=O.engines[this.engineid].createDatabase(this.databaseid,this.args,this.ifnotexists,this.as,n);return r}var i=this.databaseid;if(O.databases[i])throw new Error("Database '"+i+"' already exists");var r=(new O.Database(i),1);return n?n(r):r},ne.AttachDatabase=function(e){return ne.extend(this,e)},ne.AttachDatabase.prototype.toString=function(){var e="ATTACH";return this.engineid&&(e+=" "+this.engineid),e+=" DATABASE "+this.databaseid,args&&(e+="(",args.length>0&&(e+=args.map(function(e){return e.toString()}).join(", ")),e+=")"),this.as&&(e+=" AS "+this.as),e},ne.AttachDatabase.prototype.execute=function(e,t,n){if(!O.engines[this.engineid])throw new Error('Engine "'+this.engineid+'" is not defined.');return O.engines[this.engineid].attachDatabase(this.databaseid,this.as,this.args,t,n)},ne.DetachDatabase=function(e){return ne.extend(this,e)},ne.DetachDatabase.prototype.toString=function(){var e="DETACH";return e+=" DATABASE "+this.databaseid},ne.DetachDatabase.prototype.execute=function(e,t,n){if(!O.databases[this.databaseid].engineid)throw new Error('Cannot detach database "'+this.engineid+'", because it was not attached.');var r,i=this.databaseid;if(i==O.DEFAULTDATABASEID)throw new Error("Drop of default database is prohibited");if(O.databases[i])delete O.databases[i],i==O.useid&&O.use(),r=1;else{if(!this.ifexists)throw new Error("Database '"+i+"' does not exist");r=0}return n&&n(r),r},ne.UseDatabase=function(e){return ne.extend(this,e)},ne.UseDatabase.prototype.toString=function(){return"USE DATABASE "+this.databaseid},ne.UseDatabase.prototype.execute=function(e,t,n){var r=this.databaseid;if(!O.databases[r])throw new Error("Database '"+r+"' does not exist");return O.use(r),n&&n(1),1},ne.DropDatabase=function(e){return ne.extend(this,e)},ne.DropDatabase.prototype.toString=function(){var e="DROP";return this.ifexists&&(e+=" IF EXISTS"),e+=" DATABASE "+this.databaseid},ne.DropDatabase.prototype.execute=function(e,t,n){if(this.engineid)return O.engines[this.engineid].dropDatabase(this.databaseid,this.ifexists,n);var r,i=this.databaseid;if(i==O.DEFAULTDATABASEID)throw new Error("Drop of default database is prohibited");if(O.databases[i]){if(O.databases[i].engineid)throw new Error("Cannot drop database '"+i+"', because it is attached. Detach it.");delete O.databases[i],i==O.useid&&O.use(),r=1}else{if(!this.ifexists)throw new Error("Database '"+i+"' does not exist");r=0}return n&&n(r),r},ne.Declare=function(e){return ne.extend(this,e)},ne.Declare.prototype.toString=function(){var e="DECLARE ";return this.declares&&this.declares.length>0&&(e=this.declares.map(function(e){var t="";return t+="@"+e.variable+" ",t+=e.dbtypeid,this.dbsize&&(t+="("+this.dbsize,this.dbprecision&&(t+=","+this.dbprecision),t+=")"),e.expression&&(t+=" = "+e.expression.toString()),t}).join(",")),e},ne.Declare.prototype.execute=function(e,t,n){var r=1;return this.declares&&this.declares.length>0&&this.declares.map(function(e){var n=e.dbtypeid;O.fn[n]||(n=n.toUpperCase()),O.declares[e.variable]={dbtypeid:n,dbsize:e.dbsize,dbprecision:e.dbprecision},e.expression&&(O.vars[e.variable]=new Function("params,alasql","return "+e.expression.toJS("({})","",null))(t,O),O.declares[e.variable]&&(O.vars[e.variable]=O.stdfn.CONVERT(O.vars[e.variable],O.declares[e.variable])))}),n&&(r=n(r)),r},ne.ShowDatabases=function(e){return ne.extend(this,e)},ne.ShowDatabases.prototype.toString=function(){var e="SHOW DATABASES";return this.like&&(e+="LIKE "+this.like.toString()),e},ne.ShowDatabases.prototype.execute=function(e,t,n){if(this.engineid)return O.engines[this.engineid].showDatabases(this.like,n);var r=this,i=[];for(dbid in O.databases)i.push({databaseid:dbid});return r.like&&i&&i.length>0&&(i=i.filter(function(e){return O.utils.like(r.like.value,e.databaseid)})),n&&n(i),i},ne.ShowTables=function(e){return ne.extend(this,e)},ne.ShowTables.prototype.toString=function(){var e="SHOW TABLES";return this.databaseid&&(e+=" FROM "+this.databaseid),this.like&&(e+=" LIKE "+this.like.toString()),e},ne.ShowTables.prototype.execute=function(e,t,n){var r=O.databases[this.databaseid||e],i=this,o=[];for(tableid in r.tables)o.push({tableid:tableid});return i.like&&o&&o.length>0&&(o=o.filter(function(e){return O.utils.like(i.like.value,e.tableid)})),n&&n(o),o},ne.ShowColumns=function(e){return ne.extend(this,e)},ne.ShowColumns.prototype.toString=function(){var e="SHOW COLUMNS";return this.table.tableid&&(e+=" FROM "+this.table.tableid),this.databaseid&&(e+=" FROM "+this.databaseid),e},ne.ShowColumns.prototype.execute=function(e,t,n){var r=O.databases[this.databaseid||e],i=r.tables[this.table.tableid];if(i&&i.columns){var o=i.columns.map(function(e){return{columnid:e.columnid,dbtypeid:e.dbtypeid,dbsize:e.dbsize}});return n&&n(o),o}return n&&n([]),[]},ne.ShowIndex=function(e){return ne.extend(this,e)},ne.ShowIndex.prototype.toString=function(){var e="SHOW INDEX";return this.table.tableid&&(e+=" FROM "+this.table.tableid),this.databaseid&&(e+=" FROM "+this.databaseid),e},ne.ShowIndex.prototype.execute=function(e,t,n){var r=O.databases[this.databaseid||e],i=r.tables[this.table.tableid],o=[];if(i&&i.indices)for(var a in i.indices)o.push({hh:a,len:Object.keys(i.indices[a]).length});return n&&n(o),o},ne.ShowCreateTable=function(e){return ne.extend(this,e)},ne.ShowCreateTable.prototype.toString=function(){var e="SHOW CREATE TABLE "+this.table.tableid;return this.databaseid&&(e+=" FROM "+this.databaseid),e},ne.ShowCreateTable.prototype.execute=function(e){var t=O.databases[this.databaseid||e],n=t.tables[this.table.tableid];if(n){var r="CREATE TABLE "+this.table.tableid+" (",i=[];return n.columns&&(n.columns.forEach(function(e){var t=e.columnid+" "+e.dbtypeid;e.dbsize&&(t+="("+e.dbsize+")"),e.primarykey&&(t+=" PRIMARY KEY"),i.push(t)}),r+=i.join(", ")),r+=")"}throw new Error('There is no such table "'+this.table.tableid+'"')},ne.SetVariable=function(e){return ne.extend(this,e)},ne.SetVariable.prototype.toString=function(){var e="SET ";return void 0!==this.value&&(e+=this.variable.toUpperCase()+" "+(this.value?"ON":"OFF")),this.expression&&(e+=this.method+this.variable+" = "+this.expression.toString()),e},ne.SetVariable.prototype.execute=function(e,t,n){if(void 0!==this.value){var r=this.value;"ON"==r?r=!0:"OFF"==r&&(r=!1),O.options[this.variable]=r}else if(this.expression){this.exists&&(this.existsfn=this.exists.map(function(t){var n=t.compile(e);return n.query&&!n.query.modifier&&(n.query.modifier="RECORDSET"),n})),this.queries&&(this.queriesfn=this.queries.map(function(t){var n=t.compile(e);return n.query&&!n.query.modifier&&(n.query.modifier="RECORDSET"),n}));var i=new Function("params,alasql","return "+this.expression.toJS("({})","",null)).bind(this)(t,O);if(O.declares[this.variable]&&(i=O.stdfn.CONVERT(i,O.declares[this.variable])),this.props&&this.props.length>0){if("@"==this.method)var o="alasql.vars['"+this.variable+"']";else var o="params['"+this.variable+"']";o+=this.props.map(function(e){return"string"==typeof e?"['"+e+"']":"number"==typeof e?"["+e+"]":"["+e.toJS()+"]"}).join(),new Function("value,params,alasql","var y;"+o+"=value")(i,t,O)}else"@"==this.method?O.vars[this.variable]=i:t[this.variable]=i}var i=1;return n&&(i=n(i)),i},O.test=function(e,t,n){if(0===arguments.length)return void O.log(O.con.results);if(1===arguments.length){var r=Date.now();return n(),void O.con.log(Date.now()-r)}2===arguments.length&&(n=t,t=1);for(var r=Date.now(),i=0;i<t;i++)n();O.con.results[e]=Date.now()-r},O.log=function(e,t){var n=O.useid,r=O.options.logtarget;R.isNode&&(r="console");var i;if(i="string"==typeof e?O(e,t):e,"console"===r||R.isNode)"string"==typeof e&&O.options.logprompt&&console.log(n+">",e),Array.isArray(i)&&console.table?console.table(i):console.log(de(i));else{var o;o="output"===r?document.getElementsByTagName("output")[0]:"string"==typeof r?document.getElementById(r):r;var a="";if("string"==typeof e&&O.options.logprompt&&(a+="<pre><code>"+O.pretty(e)+"</code></pre>"),Array.isArray(i))if(0===i.length)a+="<p>[ ]</p>";else if("object"!=typeof i[0]||Array.isArray(i[0]))for(var s=0,u=i.length;s<u;s++)a+="<p>"+T(i[s])+"</p>";else a+=T(i);else a+=T(i);o.innerHTML+=a}},O.clear=function(){var e=O.options.logtarget;if(R.isNode||R.isMeteorServer)console.clear&&console.clear();else{var t;t="output"===e?document.getElementsByTagName("output")[0]:"string"==typeof e?document.getElementById(e):e,t.innerHTML=""}},O.write=function(e){var t=O.options.logtarget;if(R.isNode||R.isMeteorServer)console.log&&console.log(e);else{var n;n="output"===t?document.getElementsByTagName("output")[0]:"string"==typeof t?document.getElementById(t):t,n.innerHTML+=e}},O.prompt=function(e,t,n){if(R.isNode)throw new Error("The prompt not realized for Node.js");var r=0;if("string"==typeof e&&(e=document.getElementById(e)),"string"==typeof t&&(t=document.getElementById(t)),t.textContent=O.useid,n){O.prompthistory.push(n),r=O.prompthistory.length;try{var i=Date.now();O.log(n),O.write('<p style="color:blue">'+(Date.now()-i)+" ms</p>")}catch(e){O.write("<p>"+olduseid+"&gt;&nbsp;<b>"+sql+"</b></p>"),O.write('<p style="color:red">'+e+"<p>")}}var o=e.getBoundingClientRect().top+document.getElementsByTagName("body")[0].scrollTop;S(document.getElementsByTagName("body")[0],o,500),e.onkeydown=function(n){if(13===n.which){var i=e.value,o=O.useid;e.value="",O.prompthistory.push(i),r=O.prompthistory.length;try{var a=Date.now();O.log(i),O.write('<p style="color:blue">'+(Date.now()-a)+" ms</p>")}catch(e){O.write("<p>"+o+"&gt;&nbsp;"+O.pretty(i,!1)+"</p>"),O.write('<p style="color:red">'+e+"<p>")}e.focus(),t.textContent=O.useid;var s=e.getBoundingClientRect().top+document.getElementsByTagName("body")[0].scrollTop;S(document.getElementsByTagName("body")[0],s,500)}else 38===n.which?(r--,r<0&&(r=0),O.prompthistory[r]&&(e.value=O.prompthistory[r],n.preventDefault())):40===n.which&&(r++,r>=O.prompthistory.length?(r=O.prompthistory.length,e.value=""):O.prompthistory[r]&&(e.value=O.prompthistory[r],n.preventDefault()))}},ne.BeginTransaction=function(e){return ne.extend(this,e)},ne.BeginTransaction.prototype.toString=function(){return"BEGIN TRANSACTION"},ne.BeginTransaction.prototype.execute=function(e,t,n){return O.databases[e].engineid?O.engines[O.databases[O.useid].engineid].begin(e,n):(n&&n(1),1)},ne.CommitTransaction=function(e){return ne.extend(this,e)},ne.CommitTransaction.prototype.toString=function(){return"COMMIT TRANSACTION"},ne.CommitTransaction.prototype.execute=function(e,t,n){return O.databases[e].engineid?O.engines[O.databases[O.useid].engineid].commit(e,n):(n&&n(1),1)},ne.RollbackTransaction=function(e){return ne.extend(this,e)},ne.RollbackTransaction.prototype.toString=function(){return"ROLLBACK TRANSACTION"},ne.RollbackTransaction.prototype.execute=function(e,t,n){return O.databases[e].engineid?O.engines[O.databases[e].engineid].rollback(e,n):(n&&n(1),1)},O.options.tsql&&(O.stdfn.OBJECT_ID=function(e,t){void 0===t&&(t="T"),t=t.toUpperCase();var n=e.split("."),r=O.useid,i=n[0];2==n.length&&(r=n[0],i=n[1]);var o=O.databases[r].tables;r=O.databases[r].databaseid;for(var a in o)if(a==i){if(o[a].view&&"V"==t)return r+"."+a;if(!o[a].view&&"T"==t)return r+"."+a;return}}),O.options.mysql,(O.options.mysql||O.options.sqlite)&&(O.from.INFORMATION_SCHEMA=function(e,t,n,r,i){if("VIEWS"==e||"TABLES"==e){var o=[];for(var a in O.databases){var s=O.databases[a].tables;for(var u in s)(s[u].view&&"VIEWS"==e||!s[u].view&&"TABLES"==e)&&o.push({TABLE_CATALOG:a,TABLE_NAME:u})}return n&&(o=n(o,r,i)),o}throw new Error("Unknown INFORMATION_SCHEMA table")}),O.options.postgres,O.options.oracle,O.options.sqlite,O.into.SQL=function(e,t,n,r,i){var o;"object"==typeof e&&(t=e,e=void 0);var a={};if(O.utils.extend(a,t),void 0===a.tableid)throw new Error("Table for INSERT TO is not defined.");var s="";0===r.length&&"object"==typeof n[0]&&(r=Object.keys(n[0]).map(function(e){return{columnid:e}}));for(var u=0,l=n.length;u<l;u++)s+="INSERT INTO "+t.tableid+"(",s+=r.map(function(e){return e.columnid}).join(","),s+=") VALUES (",s+=r.map(function(e){var t=n[u][e.columnid];return e.typeid?"STRING"!==e.typeid&&"VARCHAR"!==e.typeid&&"NVARCHAR"!==e.typeid&&"CHAR"!==e.typeid&&"NCHAR"!==e.typeid||(t="'"+N(t)+"'"):"string"==typeof t&&(t="'"+N(t)+"'"),t}),s+=");\n";return e=O.utils.autoExtFilename(e,"sql",t),o=O.utils.saveFile(e,s),i&&(o=i(o)),o},O.into.HTML=function(e,t,n,r,i){var o=1;return i&&(o=i(o)),o},O.into.JSON=function(e,t,n,r,i){var o=1;"object"==typeof e&&(t=e,e=void 0);var a=JSON.stringify(n);return e=O.utils.autoExtFilename(e,"json",t),o=O.utils.saveFile(e,a),i&&(o=i(o)),o},O.into.TXT=function(e,t,n,r,i){0===r.length&&n.length>0&&(r=Object.keys(n[0]).map(function(e){return{columnid:e}})),"object"==typeof e&&(t=e,e=void 0);var o=n.length,a="";if(n.length>0){var s=r[0].columnid;a+=n.map(function(e){return e[s]}).join("\n")}return e=O.utils.autoExtFilename(e,"txt",t),o=O.utils.saveFile(e,a),i&&(o=i(o)),o},O.into.TAB=O.into.TSV=function(e,t,n,r,i){var o={};return O.utils.extend(o,t),o.separator="\t",e=O.utils.autoExtFilename(e,"tab",t),o.autoExt=!1,O.into.CSV(e,o,n,r,i)},O.into.CSV=function(e,t,n,r,i){0===r.length&&n.length>0&&(r=Object.keys(n[0]).map(function(e){return{columnid:e}})),"object"==typeof e&&(t=e,e=void 0);var o={headers:!0};o.separator=";",o.quote='"',o.utf8Bom=!0,t&&!t.headers&&void 0!==t.headers&&(o.utf8Bom=!1),O.utils.extend(o,t);var a=n.length,s=o.utf8Bom?"\ufeff":"";return o.headers&&(s+=o.quote+r.map(function(e){return e.columnid.trim()}).join(o.quote+o.separator+o.quote)+o.quote+"\r\n"),n.forEach(function(e){s+=r.map(function(t){var n=e[t.columnid];return""!==o.quote&&(n=(n+"").replace(new RegExp("\\"+o.quote,"g"),o.quote+o.quote)),+n!=n&&(n=o.quote+n+o.quote),n}).join(o.separator)+"\r\n"}),e=O.utils.autoExtFilename(e,"csv",t),a=O.utils.saveFile(e,s,null,{disableAutoBom:!0}),i&&(a=i(a)),a},O.into.XLS=function(e,t,n,r,i){"object"==typeof e&&(t=e,e=void 0);var o={};t&&t.sheets&&(o=t.sheets);var a={headers:!0};void 0!==o.Sheet1?a=o[0]:void 0!==t&&(a=t),void 0===a.sheetid&&(a.sheetid="Sheet1");var s=function(){var e='<html xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:x="urn:schemas-microsoft-com:office:excel" \t\txmlns="http://www.w3.org/TR/REC-html40"><head> \t\t<meta charset="utf-8" /> \t\t\x3c!--[if gte mso 9]><xml><x:ExcelWorkbook><x:ExcelWorksheets> ';if(e+=" <x:ExcelWorksheet><x:Name>"+a.sheetid+"</x:Name><x:WorksheetOptions><x:DisplayGridlines/>     </x:WorksheetOptions> \t\t</x:ExcelWorksheet>",e+="</x:ExcelWorksheets></x:ExcelWorkbook></xml><![endif]--\x3e</head>",e+="<body",void 0!==a.style&&(e+=' style="',"function"==typeof a.style?e+=a.style(a):e+=a.style,e+='"'),e+=">",e+="<table>",void 0!==a.caption){var i=a.caption;"string"==typeof i&&(i={title:i}),e+="<caption",void 0!==i.style&&(e+=' style="',"function"==typeof i.style?e+=i.style(a,i):e+=i.style,e+='" '),e+=">",e+=i.title,e+="</caption>"}return void 0!==a.columns?r=a.columns:0==r.length&&n.length>0&&"object"==typeof n[0]&&(r=Array.isArray(n[0])?n[0].map(function(e,t){return{columnid:t}}):Object.keys(n[0]).map(function(e){return{columnid:e}})),r.forEach(function(e,t){void 0!==a.column&&X(e,a.column),void 0===e.width&&(a.column&&"undefined"!=a.column.width?e.width=a.column.width:e.width="120px"),"number"==typeof e.width&&(e.width=e.width+"px"),void 0===e.columnid&&(e.columnid=t),void 0===e.title&&(e.title=""+e.columnid.trim()),a.headers&&Array.isArray(a.headers)&&(e.title=a.headers[t])}),e+="<colgroups>",r.forEach(function(t){e+='<col style="width: '+t.width+'"></col>'}),e+="</colgroups>",a.headers&&(e+="<thead>",e+="<tr>",r.forEach(function(t,n){e+="<th ",void 0!==t.style&&(e+=' style="',"function"==typeof t.style?e+=t.style(a,t,n):e+=t.style,e+='" '),e+=">",void 0!==t.title&&("function"==typeof t.title?e+=t.title(a,t,n):e+=t.title),e+="</th>"}),e+="</tr>",e+="</thead>"),e+="<tbody>",n&&n.length>0&&n.forEach(function(n,i){if(!(i>a.limit)){e+="<tr";var o={};X(o,a.row),a.rows&&a.rows[i]&&X(o,a.rows[i]),void 0!==o&&void 0!==o.style&&(e+=' style="',"function"==typeof o.style?e+=o.style(a,n,i):e+=o.style,e+='" '),e+=">",r.forEach(function(r,s){var u={};X(u,a.cell),X(u,o.cell),void 0!==a.column&&X(u,a.column.cell),X(u,r.cell),a.cells&&a.cells[i]&&a.cells[i][s]&&X(u,a.cells[i][s]);var l=n[r.columnid];"function"==typeof u.value&&(l=u.value(l,a,n,r,u,i,s));var c=u.typeid;"function"==typeof c&&(c=c(l,a,n,r,u,i,s)),void 0===c&&("number"==typeof l?c="number":"string"==typeof l?c="string":"boolean"==typeof l?c="boolean":"object"==typeof l&&l instanceof Date&&(c="date"));var f="";"money"==c?f='mso-number-format:"\\#\\,\\#\\#0\\\\ _\u0440_\\.";white-space:normal;':"number"==c?f=" ":"date"==c?f='mso-number-format:"Short Date";':t.types&&t.types[c]&&t.types[c].typestyle&&(f=t.types[c].typestyle),f=f||'mso-number-format:"\\@";',e+="<td style='"+f+"' ",void 0!==u.style&&(e+=' style="',"function"==typeof u.style?e+=u.style(l,a,n,r,i,s):e+=u.style,e+='" '),e+=">";var h=u.format;if(void 0===l)e+="";else if(void 0!==h)if("function"==typeof h)e+=h(l);else{if("string"!=typeof h)throw new Error("Unknown format type. Should be function or string");e+=l}else e+="number"==c||"date"==c?l.toString():"money"==c?(+l).toFixed(2):l;e+="</td>"}),e+="</tr>"}}),e+="</tbody>",e+="</table>",e+="</body>",e+="</html>"}();e=O.utils.autoExtFilename(e,"xls",t);var u=O.utils.saveFile(e,s);return i&&(u=i(u)),u},O.into.XLSXML=function(e,t,n,r,i){t=t||{},"object"==typeof e&&(t=e,e=void 0);var o={};t&&t.sheets?o=t.sheets:o.Sheet1=t,e=O.utils.autoExtFilename(e,"xls",t);var a=O.utils.saveFile(e,function(){function e(e){var t="";for(var n in e){t+="<"+n;for(var r in e[n])t+=" ","x:"==r.substr(0,2)?t+=r:t+="ss:",t+=r+'="'+e[n][r]+'"';t+="/>"}var o=F(t);return s[o]||(s[o]={styleid:u},i+='<Style ss:ID="s'+u+'">',i+=t,i+="</Style>",u++),"s"+s[o].styleid}var i="",a=" </Styles>",s={},u=62;for(var l in o){var c=o[l];void 0!==c.columns?r=c.columns:0==r.length&&n.length>0&&"object"==typeof n[0]&&(r=Array.isArray(n[0])?n[0].map(function(e,t){return{columnid:t}}):Object.keys(n[0]).map(function(e){return{columnid:e}})),r.forEach(function(e,t){void 0!==c.column&&X(e,c.column),void 0===e.width&&(c.column&&void 0!==c.column.width?e.width=c.column.width:e.width=120),"number"==typeof e.width&&(e.width=e.width),void 0===e.columnid&&(e.columnid=t),void 0===e.title&&(e.title=""+e.columnid.trim()),c.headers&&Array.isArray(c.headers)&&(e.title=c.headers[idx])}),a+='<Worksheet ss:Name="'+l+'"> \t  \t\t\t<Table ss:ExpandedColumnCount="'+r.length+'" ss:ExpandedRowCount="'+((c.headers?1:0)+Math.min(n.length,c.limit||n.length))+'" x:FullColumns="1" \t   \t\t\tx:FullRows="1" ss:DefaultColumnWidth="65" ss:DefaultRowHeight="15">',r.forEach(function(e,t){a+='<Column ss:Index="'+(t+1)+'" ss:AutoFitWidth="0" ss:Width="'+e.width+'"/>'}),c.headers&&(a+='<Row ss:AutoFitHeight="0">',r.forEach(function(t,n){if(a+="<Cell ",void 0!==t.style){var r={};"function"==typeof t.style?X(r,t.style(c,t,n)):X(r,t.style),a+='ss:StyleID="'+e(r)+'"'}a+='><Data ss:Type="String">',void 0!==t.title&&("function"==typeof t.title?a+=t.title(c,t,n):a+=t.title),a+="</Data></Cell>"}),a+="</Row>"),n&&n.length>0&&n.forEach(function(n,i){if(!(i>c.limit)){var o={};if(X(o,c.row),c.rows&&c.rows[i]&&X(o,c.rows[i]),a+="<Row ",void 0!==o){var s={};void 0!==o.style&&("function"==typeof o.style?X(s,o.style(c,n,i)):X(s,o.style),a+='ss:StyleID="'+e(s)+'"')}a+=">",r.forEach(function(r,s){var u={};X(u,c.cell),X(u,o.cell),void 0!==c.column&&X(u,c.column.cell),X(u,r.cell),c.cells&&c.cells[i]&&c.cells[i][s]&&X(u,c.cells[i][s]);var l=n[r.columnid];"function"==typeof u.value&&(l=u.value(l,c,n,r,u,i,s));var f=u.typeid;"function"==typeof f&&(f=f(l,c,n,r,u,i,s)),void 0===f&&("number"==typeof l?f="number":"string"==typeof l?f="string":"boolean"==typeof l?f="boolean":"object"==typeof l&&l instanceof Date&&(f="date"));var h="String";"number"==f?h="Number":"date"==f&&(h="Date");var p="";"money"==f?p='mso-number-format:"\\#\\,\\#\\#0\\\\ _\u0440_\\.";white-space:normal;':"number"==f?p=" ":"date"==f?p='mso-number-format:"Short Date";':t.types&&t.types[f]&&t.types[f].typestyle&&(p=t.types[f].typestyle),p=p||'mso-number-format:"\\@";',a+="<Cell ";var d={};void 0!==u.style&&("function"==typeof u.style?X(d,u.style(l,c,n,r,i,s)):X(d,u.style),a+='ss:StyleID="'+e(d)+'"'),a+=">",a+='<Data ss:Type="'+h+'">';var v=u.format;if(void 0===l)a+="";else if(void 0!==v)if("function"==typeof v)a+=v(l);else{if("string"!=typeof v)throw new Error("Unknown format type. Should be function or string");a+=l}else a+="number"==f||"date"==f?l.toString():"money"==f?(+l).toFixed(2):l;a+="</Data></Cell>"}),a+="</Row>"}}),a+="</Table></Worksheet>"}return a+="</Workbook>",'<?xml version="1.0"?> \t\t<Workbook xmlns="urn:schemas-microsoft-com:office:spreadsheet" \t\t xmlns:o="urn:schemas-microsoft-com:office:office" \t\t xmlns:x="urn:schemas-microsoft-com:office:excel" \t\t xmlns:ss="urn:schemas-microsoft-com:office:spreadsheet" \t\t xmlns:html="http://www.w3.org/TR/REC-html40"> \t\t <DocumentProperties xmlns="urn:schemas-microsoft-com:office:office"> \t\t </DocumentProperties> \t\t <OfficeDocumentSettings xmlns="urn:schemas-microsoft-com:office:office"> \t\t  <AllowPNG/> \t\t </OfficeDocumentSettings> \t\t <ExcelWorkbook xmlns="urn:schemas-microsoft-com:office:excel"> \t\t  <ActiveSheet>0</ActiveSheet> \t\t </ExcelWorkbook> \t\t <Styles> \t\t  <Style ss:ID="Default" ss:Name="Normal"> \t\t   <Alignment ss:Vertical="Bottom"/> \t\t   <Borders/> \t\t   <Font ss:FontName="Calibri" x:Family="Swiss" ss:Size="12" ss:Color="#000000"/> \t\t   <Interior/> \t\t   <NumberFormat/> \t\t   <Protection/> \t\t  </Style>'+i+a}());return i&&(a=i(a)),a},O.into.XLSX=function(e,t,n,r,i){function o(){"object"==typeof t&&Array.isArray(t)?n&&n.length>0&&n.forEach(function(e,n){a(t[n],e,void 0,n+1)}):a(t,n,r,1),s(i)}function a(e,t,n,r){var i={sheetid:"Sheet "+r,headers:!0};O.utils.extend(i,e);var o=Object.keys(t).length;(!n||0==n.length)&&o>0&&(n=Object.keys(t[0]).map(function(e){return{columnid:e}}));var a={};c.SheetNames.indexOf(i.sheetid)>-1?a=c.Sheets[i.sheetid]:(c.SheetNames.push(i.sheetid),c.Sheets[i.sheetid]={},a=c.Sheets[i.sheetid]);var s="A1";i.range&&(s=i.range);var u=O.utils.xlscn(s.match(/[A-Z]+/)[0]),l=+s.match(/[0-9]+/)[0]-1;if(c.Sheets[i.sheetid]["!ref"])var f=c.Sheets[i.sheetid]["!ref"],h=O.utils.xlscn(f.match(/[A-Z]+/)[0]),p=+f.match(/[0-9]+/)[0]-1;else var h=1,p=1;var d=Math.max(u+n.length,h),v=Math.max(l+o+2,p),g=l+1;c.Sheets[i.sheetid]["!ref"]="A1:"+O.utils.xlsnc(d)+v,i.headers&&(n.forEach(function(e,t){a[O.utils.xlsnc(u+t)+""+g]={v:e.columnid.trim()}}),g++);for(var y=0;y<o;y++)n.forEach(function(e,n){var r={v:t[y][e.columnid]};"number"==typeof t[y][e.columnid]?r.t="n":"string"==typeof t[y][e.columnid]?r.t="s":"boolean"==typeof t[y][e.columnid]?r.t="b":"object"==typeof t[y][e.columnid]&&t[y][e.columnid]instanceof Date&&(r.t="d"),a[O.utils.xlsnc(u+n)+""+g]=r}),g++}function s(t){var n;if(void 0===e)u=c;else if(n=Y(),R.isNode||R.isMeteorServer)n.writeFile(c,e);else{var r={bookType:"xlsx",bookSST:!1,type:"binary"},i=n.write(c,r);if(9==f())throw new Error("Cannot save XLSX files in IE9. Please use XLS() export function");Ee(new Blob([function(e){for(var t=new ArrayBuffer(e.length),n=new Uint8Array(t),r=0;r!=e.length;++r)n[r]=255&e.charCodeAt(r);return t}(i)],{type:"application/octet-stream"}),e)}}var u=1;q(r,[{columnid:"_"}])&&(n=n.map(function(e){return e._}),r=void 0),e=O.utils.autoExtFilename(e,"xlsx",t);var l=Y();"object"==typeof e&&(t=e,e=void 0);var c={SheetNames:[],Sheets:{}};return t.sourcefilename?O.utils.loadBinaryFile(t.sourcefilename,!!i,function(e){c=l.read(e,{type:"binary"}),o()}):o(),i&&(u=i(u)),u},O.from.METEOR=function(e,t,n,r,i){var o=e.find(t).fetch();return n&&(o=n(o,r,i)),o},O.from.TABLETOP=function(e,t,n,r,i){var o=[],a={headers:!0,simpleSheet:!0,key:e};return O.utils.extend(a,t),a.callback=function(e){o=e,n&&(o=n(o,r,i))},Tabletop.init(a),null},O.from.HTML=function(e,t,n,r,i){var o={};O.utils.extend(o,t);var a=document.querySelector(e);if(!a&&"TABLE"!==a.tagName)throw new Error("Selected HTML element is not a TABLE");var s=[],u=o.headers;if(u&&!Array.isArray(u)){u=[];for(var l=a.querySelector("thead tr").children,c=0;c<l.length;c++)l.item(c).style&&"none"===l.item(c).style.display&&o.skipdisplaynone?u.push(void 0):u.push(l.item(c).textContent)}for(var f=a.querySelectorAll("tbody tr"),h=0;h<f.length;h++){for(var p=f.item(h).children,d={},c=0;c<p.length;c++)p.item(c).style&&"none"===p.item(c).style.display&&o.skipdisplaynone||(u?d[u[c]]=p.item(c).textContent:d[c]=p.item(c).textContent);s.push(d)}return n&&(s=n(s,r,i)),s},O.from.RANGE=function(e,t,n,r,i){for(var o=[],a=e;a<=t;a++)o.push(a);return n&&(o=n(o,r,i)),o},O.from.FILE=function(e,t,n,r,i){var o;if("string"==typeof e)o=e;else{if(!(e instanceof Event))throw new Error("Wrong usage of FILE() function");o=e.target.files[0].name}var a=o.split("."),s=a[a.length-1].toUpperCase();if(O.from[s])return O.from[s](e,t,n,r,i);throw new Error("Cannot recognize file type for loading")},O.from.JSON=function(e,t,n,r,i){var o;return e=O.utils.autoExtFilename(e,"json",t),O.utils.loadFile(e,!!n,function(e){o=JSON.parse(e),n&&(o=n(o,r,i))}),o},O.from.TXT=function(e,t,n,r,i){var o;return e=O.utils.autoExtFilename(e,"txt",t),O.utils.loadFile(e,!!n,function(e){o=e.split(/\r?\n/),""===o[o.length-1]&&o.pop();for(var t=0,a=o.length;t<a;t++)o[t]==+o[t]&&(o[t]=+o[t]),o[t]=[o[t]];n&&(o=n(o,r,i))}),o},O.from.TAB=O.from.TSV=function(e,t,n,r,i){return t=t||{},t.separator="\t",e=O.utils.autoExtFilename(e,"tab",t),t.autoext=!1,O.from.CSV(e,t,n,r,i)},O.from.CSV=function(e,t,n,r,i){function o(e){function t(){if(g>=v)return p;if(l)return l=!1,h;var t=g;if(e.charCodeAt(t)===f){for(var n=t;n++<v;)if(e.charCodeAt(n)===f){if(e.charCodeAt(n+1)!==f)break;++n}g=n+2;var r=e.charCodeAt(n+1);return 13===r?(l=!0,10===e.charCodeAt(n+2)&&++g):10===r&&(l=!0),e.substring(t+1,n).replace(/""/g,'"')}for(;g<v;){var r=e.charCodeAt(g++),i=1;if(10===r)l=!0;else if(13===r)l=!0,10===e.charCodeAt(g)&&(++g,++i);else if(r!==c)continue;return e.substring(t,g-i)}return e.substring(t)}for(var o,l,c=a.separator.charCodeAt(0),f=a.quote.charCodeAt(0),h={},p={},d=[],v=e.length,g=0,y=0;(o=t())!==p;){for(var m=[];o!==h&&o!==p;)m.push(o.trim()),o=t();if(a.headers){if(0===y){if("boolean"==typeof a.headers)u=m;else if(Array.isArray(a.headers)){u=a.headers;var _={};u.forEach(function(e,t){_[e]=m[t],void 0!==_[e]&&0!==_[e].length&&_[e].trim()==+_[e]&&(_[e]=+_[e])}),d.push(_)}}else{var _={};u.forEach(function(e,t){_[e]=m[t],void 0!==_[e]&&0!==_[e].length&&_[e].trim()==+_[e]&&(_[e]=+_[e])}),d.push(_)}y++}else d.push(m)}if(s=d,a.headers&&i&&i.sources&&i.sources[r]){var b=i.sources[r].columns=[];u.forEach(function(e){b.push({columnid:e})})}n&&(s=n(s,r,i))}var a={separator:",",quote:'"',headers:!0};O.utils.extend(a,t);var s,u=[];return new RegExp("\n").test(e)?o(e):(e=O.utils.autoExtFilename(e,"csv",t),O.utils.loadFile(e,!!n,o)),s},O.from.XLS=function(e,t,n,r,i){return t=t||{},e=O.utils.autoExtFilename(e,"xls",t),t.autoExt=!1,A(Y(),e,t,n,r,i)},O.from.XLSX=function(e,t,n,r,i){return t=t||{},e=O.utils.autoExtFilename(e,"xlsx",t),t.autoExt=!1,A(Y(),e,t,n,r,i)},O.from.ODS=function(e,t,n,r,i){return t=t||{},e=O.utils.autoExtFilename(e,"ods",t),t.autoExt=!1,A(Y(),e,t,n,r,i)},O.from.XML=function(e,t,n,r,i){var o;return O.utils.loadFile(e,!!n,function(e){o=C(e).root,n&&(o=n(o,r,i))}),o},O.from.GEXF=function(e,t,n,r,i){var o;return O("SEARCH FROM XML("+e+")",[],function(e){o=e,console.log(o),n&&(o=n(o))}),o},ne.Print=function(e){return ne.extend(this,e)},ne.Print.prototype.toString=function(){var e="PRINT";return this.statement&&(e+=" "+this.statement.toString()),e},ne.Print.prototype.execute=function(e,t,n){var r=this,i=1;if(O.precompile(this,e,t),this.exprs&&this.exprs.length>0){var o=this.exprs.map(function(e){var n=new Function("params,alasql,p","var y;return "+e.toJS("({})","",null)).bind(r),i=n(t,O);return de(i)});console.log.apply(console,o)}else if(this.select){var a=this.select.execute(e,t);console.log(de(a))}else console.log();return n&&(i=n(i)),i},ne.Source=function(e){return ne.extend(this,e)},ne.Source.prototype.toString=function(){var e="SOURCE";return this.url&&(e+=" '"+this.url+" '"),e},ne.Source.prototype.execute=function(e,t,n){var r;return D(this.url,!!n,function(e){return r=O(e),n&&(r=n(r)),r},function(e){throw e}),r},ne.Require=function(e){return ne.extend(this,e)},ne.Require.prototype.toString=function(){var e="REQUIRE";return this.paths&&this.paths.length>0&&(e+=this.paths.map(function(e){return e.toString()}).join(",")),this.plugins&&this.plugins.length>0&&(e+=this.plugins.map(function(e){return e.toUpperCase()}).join(",")),e},ne.Require.prototype.execute=function(e,t,n){var r=this,i=0,o="";return this.paths&&this.paths.length>0?this.paths.forEach(function(e){D(e.value,!!n,function(e){i++,o+=e,i<r.paths.length||(new Function("params,alasql",o)(t,O),n&&(i=n(i)))})}):this.plugins&&this.plugins.length>0?this.plugins.forEach(function(e){O.plugins[e]||D(O.path+"/alasql-"+e.toLowerCase()+".js",!!n,function(a){i++,o+=a,i<r.plugins.length||(new Function("params,alasql",o)(t,O),O.plugins[e]=!0,n&&(i=n(i)))})}):n&&(i=n(i)),i},ne.Assert=function(e){return ne.extend(this,e)},ne.Source.prototype.toString=function(){var e="ASSERT";return this.value&&(e+=" "+JSON.stringify(this.value)),e},ne.Assert.prototype.execute=function(e){if(!q(O.res,this.value))throw new Error((this.message||"Assert wrong")+": "+JSON.stringify(O.res)+" == "+JSON.stringify(this.value));return 1};var ge=O.engines.WEBSQL=function(){};ge.createDatabase=function(e,t,n,r){var i=openDatabase(e,t[0],t[1],t[2]);if(this.dbid){var o=O.createDatabase(this.dbid);o.engineid="WEBSQL",o.wdbid=e,sb.wdb=o}if(!i)throw new Error('Cannot create WebSQL database "'+databaseid+'"');return r&&r(1),1},ge.dropDatabase=function(e){throw new Error("This is impossible to drop WebSQL database.")},ge.attachDatabase=function(e,t,n,r,i){if(O.databases[t])throw new Error('Unable to attach database as "'+t+'" because it already exists');return alasqlopenDatabase(e,n[0],n[1],n[2]),1};var ye=O.engines.INDEXEDDB=function(){};R.hasIndexedDB&&("function"==typeof R.global.indexedDB.webkitGetDatabaseNames?ye.getDatabaseNames=R.global.indexedDB.webkitGetDatabaseNames.bind(R.global.indexedDB):(ye.getDatabaseNames=function(){var e={},t={contains:function(e){return!0},notsupported:!0};return setTimeout(function(){var n={target:{result:t}};e.onsuccess(n)},0),e},ye.getDatabaseNamesNotSupported=!0)),ye.showDatabases=function(e,t){ye.getDatabaseNames().onsuccess=function(n){var r=n.target.result;if(ye.getDatabaseNamesNotSupported)throw new Error("SHOW DATABASE is not supported in this browser");var i=[];if(e)var o=new RegExp(e.value.replace(/\%/g,".*"),"g");for(var a=0;a<r.length;a++)e&&!r[a].match(o)||i.push({databaseid:r[a]});t(i)}},ye.createDatabase=function(e,t,n,r,i){console.log(arguments);var o=R.global.indexedDB;if(n)o.open(e,1).onsuccess=function(e){e.target.result.close(),i&&i(1)};else{var a=o.open(e,1);a.onupgradeneeded=function(e){console.log("abort"),e.target.transaction.abort()},a.onsuccess=function(t){if(console.log("success"),!n)throw new Error('IndexedDB: Cannot create new database "'+e+'" because it already exists');i&&i(0)}}},ye.createDatabase=function(e,t,n,r,i){var o=R.global.indexedDB;if(ye.getDatabaseNamesNotSupported)if(n){var a=!0,s=o.open(e);s.onupgradeneeded=function(e){a=!1},s.onsuccess=function(e){e.target.result.close(),a?i&&i(0):i&&i(1)}}else{var u=o.open(e);u.onupgradeneeded=function(e){e.target.transaction.abort()},u.onabort=function(e){i&&i(1)},u.onsuccess=function(t){throw t.target.result.close(),new Error('IndexedDB: Cannot create new database "'+e+'" because it already exists')}}else{var u=ye.getDatabaseNames();u.onsuccess=function(t){if(t.target.result.contains(e)){if(n)return void(i&&i(0));throw new Error('IndexedDB: Cannot create new database "'+e+'" because it already exists')}o.open(e,1).onsuccess=function(e){e.target.result.close(),i&&i(1)}}}},ye.dropDatabase=function(e,t,n){var r=R.global.indexedDB;ye.getDatabaseNames().onsuccess=function(i){if(!i.target.result.contains(e)){if(t)return void(n&&n(0));throw new Error('IndexedDB: Cannot drop new database "'+e+'" because it does not exist')}r.deleteDatabase(e).onsuccess=function(e){n&&n(1)}}},ye.attachDatabase=function(e,t,n,r,i){if(!R.hasIndexedDB)throw new Error("The current browser does not support IndexedDB");var o=R.global.indexedDB;ye.getDatabaseNames().onsuccess=function(n){if(!n.target.result.contains(e))throw new Error('IndexedDB: Cannot attach database "'+e+'" because it does not exist');o.open(e).onsuccess=function(n){var r=n.target.result,o=new O.Database(t||e);o.engineid="INDEXEDDB",o.ixdbid=e,o.tables=[];for(var a=r.objectStoreNames,s=0;s<a.length;s++)o.tables[a[s]]={};n.target.result.close(),i&&i(1)}}},ye.createTable=function(e,t,n,r){var i=R.global.indexedDB,o=O.databases[e].ixdbid;ye.getDatabaseNames().onsuccess=function(n){if(!n.target.result.contains(o))throw new Error('IndexedDB: Cannot create table in database "'+o+'" because it does not exist');var a=i.open(o);a.onversionchange=function(e){e.target.result.close()},a.onsuccess=function(n){var a=n.target.result.version;n.target.result.close();var s=i.open(o,a+1);s.onupgradeneeded=function(e){e.target.result.createObjectStore(t,{autoIncrement:!0})},s.onsuccess=function(e){e.target.result.close(),r&&r(1)},s.onerror=function(e){throw e},s.onblocked=function(n){throw new Error('Cannot create table "'+t+'" because database "'+e+'"  is blocked')}}}},ye.dropTable=function(e,t,n,r){var i=R.global.indexedDB,o=O.databases[e].ixdbid;ye.getDatabaseNames().onsuccess=function(a){if(!a.target.result.contains(o))throw new Error('IndexedDB: Cannot drop table in database "'+o+'" because it does not exist');var s=i.open(o);s.onversionchange=function(e){e.target.result.close()},s.onsuccess=function(a){var s=a.target.result.version;a.target.result.close();var u=i.open(o,s+1);u.onupgradeneeded=function(r){var i=r.target.result;if(i.objectStoreNames.contains(t))i.deleteObjectStore(t),delete O.databases[e].tables[t];else if(!n)throw new Error('IndexedDB: Cannot drop table "'+t+'" because it does not exist')},u.onsuccess=function(e){e.target.result.close(),r&&r(1)},u.onerror=function(e){throw e},u.onblocked=function(n){throw new Error('Cannot drop table "'+t+'" because database "'+e+'" is blocked')}}}},ye.intoTable=function(e,t,n,r,i){var o=R.global.indexedDB,a=O.databases[e].ixdbid;o.open(a).onsuccess=function(e){for(var r=e.target.result,o=r.transaction([t],"readwrite"),a=o.objectStore(t),s=0,u=n.length;s<u;s++)a.add(n[s]);o.oncomplete=function(){r.close(),i&&i(u)}}},ye.fromTable=function(e,t,n,r,i){var o=R.global.indexedDB,a=O.databases[e].ixdbid;o.open(a).onsuccess=function(e){var o=[],a=e.target.result,s=a.transaction([t]),u=s.objectStore(t),l=u.openCursor();l.onblocked=function(e){},l.onerror=function(e){},l.onsuccess=function(e){var t=e.target.result;t?(o.push(t.value),t.continue()):(a.close(),n&&n(o,r,i))}}},ye.deleteFromTable=function(e,t,n,r,i){var o=R.global.indexedDB,a=O.databases[e].ixdbid;o.open(a).onsuccess=function(e){var o=e.target.result,a=o.transaction([t],"readwrite"),s=a.objectStore(t),u=s.openCursor(),l=0;u.onblocked=function(e){},u.onerror=function(e){},u.onsuccess=function(e){var t=e.target.result;t?(n&&!n(t.value,r)||(t.delete(),l++),t.continue()):(o.close(),i&&i(l))}}},ye.updateTable=function(e,t,n,r,i,o){var a=R.global.indexedDB,s=O.databases[e].ixdbid;a.open(s).onsuccess=function(e){var a=e.target.result,s=a.transaction([t],"readwrite"),u=s.objectStore(t),l=u.openCursor(),c=0;l.onblocked=function(e){},l.onerror=function(e){},l.onsuccess=function(e){var t=e.target.result;if(t){if(!r||r(t.value,i)){var s=t.value;n(s,i),t.update(s),c++}t.continue()}else a.close(),o&&o(c)}}};var me=O.engines.LOCALSTORAGE=function(){};me.get=function(e){var t=localStorage.getItem(e);if(void 0!==t){var n=void 0;try{n=JSON.parse(t)}catch(e){throw new Error("Cannot parse JSON object from localStorage"+t)}return n}},me.set=function(e,t){void 0===t?localStorage.removeItem(e):localStorage.setItem(e,JSON.stringify(t))},me.storeTable=function(e,t){var n=O.databases[e],r=n.tables[t],i={};i.columns=r.columns,i.data=r.data,i.identities=r.identities,me.set(n.lsdbid+"."+t,i)},me.restoreTable=function(e,t){var n=O.databases[e],r=me.get(n.lsdbid+"."+t),i=new O.Table;for(var o in r)i[o]=r[o];return n.tables[t]=i,i.indexColumns(),i},me.removeTable=function(e,t){var n=O.databases[e];localStorage.removeItem(n.lsdbid+"."+t)},me.createDatabase=function(e,t,n,r,i){var o=1,a=me.get("alasql");if(n&&a&&a.databases&&a.databases[e])o=0;else{if(a||(a={databases:{}}),a.databases&&a.databases[e])throw new Error('localStorage: Cannot create new database "'+e+'" because it already exists');a.databases[e]=!0,me.set("alasql",a),me.set(e,{databaseid:e,tables:{}})}return i&&(o=i(o)),o},me.dropDatabase=function(e,t,n){var r=1,i=me.get("alasql");if(t&&i&&i.databases&&!i.databases[e])r=0;else{if(!i){if(t)return n?n(0):0;throw new Error("There is no any AlaSQL databases in localStorage")}if(i.databases&&!i.databases[e])throw new Error('localStorage: Cannot drop database "'+e+'" because there is no such database');delete i.databases[e],me.set("alasql",i);var o=me.get(e);for(var a in o.tables)localStorage.removeItem(e+"."+a);localStorage.removeItem(e)}return n&&(r=n(r)),r},me.attachDatabase=function(e,t,n,r,i){var o=1;if(O.databases[t])throw new Error('Unable to attach database as "'+t+'" because it already exists');t||(t=e);var a=new O.Database(t);if(a.engineid="LOCALSTORAGE",a.lsdbid=e,a.tables=me.get(e).tables,!O.options.autocommit&&a.tables)for(var s in a.tables)me.restoreTable(t,s);return i&&(o=i(o)),o},me.showDatabases=function(e,t){var n=[],r=me.get("alasql");if(e)var i=new RegExp(e.value.replace(/\%/g,".*"),"g");if(r&&r.databases){for(dbid in r.databases)n.push({databaseid:dbid});e&&n&&n.length>0&&(n=n.filter(function(e){return e.databaseid.match(i)}))}return t&&(n=t(n)),n},me.createTable=function(e,t,n,r){var i=1,o=O.databases[e].lsdbid;if(me.get(o+"."+t)&&!n)throw new Error('Table "'+t+'" alsready exists in localStorage database "'+o+'"');var a=me.get(o);return O.databases[e].tables[t],a.tables[t]=!0,me.set(o,a),me.storeTable(e,t),r&&(i=r(i)),i},me.truncateTable=function(e,t,n,r){var i=1,o=O.databases[e].lsdbid;if(O.options.autocommit)var a=me.get(o);else var a=O.databases[e];if(!n&&!a.tables[t])throw new Error('Cannot truncate table "'+t+'" in localStorage, because it does not exist');return me.restoreTable(e,t).data=[],me.storeTable(e,t),r&&(i=r(i)),i},me.dropTable=function(e,t,n,r){var i=1,o=O.databases[e].lsdbid;if(O.options.autocommit)var a=me.get(o);else var a=O.databases[e];if(!n&&!a.tables[t])throw new Error('Cannot drop table "'+t+'" in localStorage, because it does not exist');return delete a.tables[t],me.set(o,a),me.removeTable(e,t),r&&(i=r(i)),i},me.fromTable=function(e,t,n,r,i){var o=(O.databases[e].lsdbid,me.restoreTable(e,t).data);return n&&(o=n(o,r,i)),o},me.intoTable=function(e,t,n,r,i){var o=(O.databases[e].lsdbid,n.length),a=me.restoreTable(e,t);return a.data||(a.data=[]),a.data=a.data.concat(n),me.storeTable(e,t),i&&(o=i(o)),o},me.loadTableData=function(e,t){O.databases[e],O.databases[e].lsdbid,me.restoreTable(e,t)},me.saveTableData=function(e,t){var n=O.databases[e],r=O.databases[e].lsdbid;me.storeTable(r,t),n.tables[t].data=void 0},me.commit=function(e,t){var n=O.databases[e],r=O.databases[e].lsdbid,i={databaseid:r,tables:{}};if(n.tables)for(var o in n.tables)i.tables[o]=!0,me.storeTable(e,o);return me.set(r,i),t?t(1):1},me.begin=me.commit,me.rollback=function(e,t){};var _e=O.engines.SQLITE=function(){};_e.createDatabase=function(e,t,n,r,i){throw new Error("Connot create SQLITE database in memory. Attach it.")},_e.dropDatabase=function(e){throw new Error("This is impossible to drop SQLite database. Detach it.")},_e.attachDatabase=function(e,t,n,r,i){if(O.databases[t])throw new Error('Unable to attach database as "'+t+'" because it already exists');if(n[0]&&n[0]instanceof ne.StringValue||n[0]instanceof ne.ParamValue){if(n[0]instanceof ne.StringValue)var o=n[0].value;else if(n[0]instanceof ne.ParamValue)var o=r[n[0].param];return O.utils.loadBinaryFile(o,!0,function(n){var r=new O.Database(t||e);r.engineid="SQLITE",r.sqldbid=e;var o=r.sqldb=new SQL.Database(n);r.tables=[],o.exec("SELECT * FROM sqlite_master WHERE type='table'")[0].values.forEach(function(e){r.tables[e[1]]={};var t=r.tables[e[1]].columns=[],n=O.parse(e[4]),i=n.statements[0].columns;i&&i.length>0&&i.forEach(function(e){t.push(e)})}),i(1)},function(e){throw new Error('Cannot open SQLite database file "'+n[0].value+'"')}),1}throw new Error("Cannot attach SQLite database without a file")},_e.fromTable=function(e,t,n,r,i){var o=O.databases[e].sqldb.exec("SELECT * FROM "+t),a=i.sources[r].columns=[];o[0].columns.length>0&&o[0].columns.forEach(function(e){a.push({columnid:e})});var s=[];o[0].values.length>0&&o[0].values.forEach(function(e){var t={};a.forEach(function(n,r){t[n.columnid]=e[r]}),s.push(t)}),n&&n(s,r,i)},_e.intoTable=function(e,t,n,r,i){for(var o=O.databases[e].sqldb,a=0,s=n.length;a<s;a++){var u="INSERT INTO "+t+" (",l=n[a],c=Object.keys(l);u+=c.join(","),u+=") VALUES (",u+=c.map(function(e){return v=l[e],"string"==typeof v&&(v="'"+v+"'"),v}).join(","),u+=")",o.exec(u)}var f=s;return i&&i(f),f};var be=O.engines.FILESTORAGE=O.engines.FILE=function(){};if(be.createDatabase=function(e,t,n,r,i){var o=1,a=t[0].value;return O.utils.fileExists(a,function(e){if(e){if(n)return o=0,i&&(o=i(o)),o;throw new Error("Cannot create new database file, because it alreagy exists")}var t={tables:{}};O.utils.saveFile(a,JSON.stringify(t),function(e){i&&(o=i(o))})}),o},be.dropDatabase=function(e,t,n){var r,i=e.value;return O.utils.fileExists(i,function(e){if(e)r=1,O.utils.deleteFile(i,function(){r=1,n&&(r=n(r))});else{if(!t)throw new Error("Cannot drop database file, because it does not exist");r=0,n&&(r=n(r))}}),r},be.attachDatabase=function(e,t,n,r,i){var o=1;if(O.databases[t])throw new Error('Unable to attach database as "'+t+'" because it already exists');var a=new O.Database(t||e);return a.engineid="FILESTORAGE",a.filename=n[0].value,D(a.filename,!!i,function(e){try{a.data=JSON.parse(e)}catch(e){throw new Error("Data in FileStorage database are corrupted")}if(a.tables=a.data.tables,!O.options.autocommit&&a.tables)for(var t in a.tables)a.tables[t].data=a.data[t];i&&(o=i(o))}),o},be.createTable=function(e,t,n,r){var i=O.databases[e];if(i.data[t]&&!n)throw new Error('Table "'+t+'" alsready exists in the database "'+fsdbid+'"');var o=O.databases[e].tables[t];return i.data.tables[t]={columns:o.columns},i.data[t]=[],be.updateFile(e),r&&r(1),1},be.updateFile=function(e){var t=O.databases[e];if(t.issaving)return void(t.postsave=!0);t.issaving=!0,t.postsave=!1,O.utils.saveFile(t.filename,JSON.stringify(t.data),function(){t.issaving=!1,t.postsave&&setTimeout(function(){be.updateFile(e)},50)})},be.dropTable=function(e,t,n,r){var i=O.databases[e];if(!n&&!i.tables[t])throw new Error('Cannot drop table "'+t+'" in fileStorage, because it does not exist');return delete i.tables[t],delete i.data.tables[t],delete i.data[t],be.updateFile(e),r&&r(1),1},be.fromTable=function(e,t,n,r,i){var o=O.databases[e],a=o.data[t];return n&&(a=n(a,r,i)),a},be.intoTable=function(e,t,n,r,i){var o=O.databases[e],a=n.length,s=o.data[t];return s||(s=[]),o.data[t]=s.concat(n),be.updateFile(e),i&&i(a),a},be.loadTableData=function(e,t){var n=O.databases[e];n.tables[t].data=n.data[t]},be.saveTableData=function(e,t){var n=O.databases[e];n.data[t]=n.tables[t].data,n.tables[t].data=null,be.updateFile(e)},be.commit=function(e,t){var n=O.databases[e];if(n.tables)for(var r in n.tables)n.data.tables[r]={columns:n.tables[r].columns},n.data[r]=n.tables[r].data;return be.updateFile(e),t?t(1):1},be.begin=be.commit,be.rollback=function(e,t){function n(){setTimeout(function(){if(i.issaving)return n();O.loadFile(i.filename,!!t,function(n){i.data=n,i.tables={};for(var o in i.data.tables){var a=new O.Table({columns:i.data.tables[o].columns});X(a,i.data.tables[o]),i.tables[o]=a,O.options.autocommit||(i.tables[o].data=i.data[o]),i.tables[o].indexColumns()}delete O.databases[e],O.databases[e]=new O.Database(e),X(O.databases[e],i),O.databases[e].engineid="FILESTORAGE",O.databases[e].filename=i.filename,t&&(r=t(r))})},100)}var r=1,i=O.databases[e];i.dbversion++,n()},R.isBrowser&&!R.isWebWorker){if(!(O=O||!1))throw new Error("alasql was not found");O.worker=function(){throw new Error("Can find webworker in this enviroment")},"undefined"!=typeof Worker&&(O.worker=function(e,t,n){if(!0===e&&(e=void 0),void 0===e)for(var r=document.getElementsByTagName("script"),i=0;i<r.length;i++){if("alasql-worker.js"===r[i].src.substr(-16).toLowerCase()){e=r[i].src.substr(0,r[i].src.length-16)+"alasql.js";break}if("alasql-worker.min.js"===r[i].src.substr(-20).toLowerCase()){e=r[i].src.substr(0,r[i].src.length-20)+"alasql.min.js";break}if("alasql.js"===r[i].src.substr(-9).toLowerCase()){e=r[i].src;break}if("alasql.min.js"===r[i].src.substr(-13).toLowerCase()){e=r[i].src.substr(0,r[i].src.length-13)+"alasql.min.js";break}}if(void 0===e)throw new Error("Path to alasql.js is not specified");if(!1!==e){var o="importScripts('";o+=e,o+="');self.onmessage = function(event) {alasql(event.data.sql,event.data.params, function(data){postMessage({id:event.data.id, data:data});});}";var a=new Blob([o],{type:"text/plain"});if(O.webworker=new Worker(URL.createObjectURL(a)),O.webworker.onmessage=function(e){var t=e.data.id;O.buffer[t](e.data.data),delete O.buffer[t]},O.webworker.onerror=function(e){throw e},arguments.length>1){var s="REQUIRE "+t.map(function(e){return'"'+e+'"'}).join(",");O(s,[],n)}}else if(!1===e)return void delete O.webworker});var Ee=Ee||function(e){"use strict";if(!(void 0===e||"undefined"!=typeof navigator&&/MSIE [1-9]\./.test(navigator.userAgent))){var t=e.document,n=function(){return e.URL||e.webkitURL||e},r=t.createElementNS("http://www.w3.org/1999/xhtml","a"),i="download"in r,o=function(e){var t=new MouseEvent("click");e.dispatchEvent(t)},a=/constructor/i.test(e.HTMLElement)||e.safari,s=/CriOS\/[\d]+/.test(navigator.userAgent),u=function(t){(e.setImmediate||e.setTimeout)(function(){throw t},0)},l=function(e){var t=function(){"string"==typeof e?n().revokeObjectURL(e):e.remove()};setTimeout(t,4e4)},c=function(e,t,n){t=[].concat(t);for(var r=t.length;r--;){var i=e["on"+t[r]];if("function"==typeof i)try{i.call(e,n||e)}catch(e){u(e)}}},f=function(e){return/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob([String.fromCharCode(65279),e],{type:e.type}):e},h=function(t,u,h){h||(t=f(t));var p,d=this,v=t.type,g="application/octet-stream"===v,y=function(){c(d,"writestart progress write writeend".split(" "))};if(d.readyState=d.INIT,i)return p=n().createObjectURL(t),void setTimeout(function(){r.href=p,r.download=u,o(r),y(),l(p),d.readyState=d.DONE});!function(){if((s||g&&a)&&e.FileReader){var r=new FileReader;return r.onloadend=function(){var t=s?r.result:r.result.replace(/^data:[^;]*;/,"data:attachment/file;");e.open(t,"_blank")||(e.location.href=t),t=void 0,d.readyState=d.DONE,y()},r.readAsDataURL(t),void(d.readyState=d.INIT)}p||(p=n().createObjectURL(t)),g?e.location.href=p:e.open(p,"_blank")||(e.location.href=p),d.readyState=d.DONE,y(),l(p)}()},p=h.prototype,d=function(e,t,n){return new h(e,t||e.name||"download",n)};return"undefined"!=typeof navigator&&navigator.msSaveOrOpenBlob?function(e,t,n){return t=t||e.name||"download",n||(e=f(e)),navigator.msSaveOrOpenBlob(e,t)}:(p.abort=function(){},p.readyState=p.INIT=0,p.WRITING=1,p.DONE=2,p.error=p.onwritestart=p.onprogress=p.onwrite=p.onabort=p.onerror=p.onwriteend=null,d)}}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||this.content);"undefined"!=typeof r&&r.exports?r.exports.saveAs=Ee:null!==n(230)&&null!==n(541)&&(void 0!==(u=function(){return Ee}.call(t,n,t,r))&&(r.exports=u)),(R.isCordova||R.isMeteorServer||R.isNode)&&console.warn("It looks like you are using the browser version of AlaSQL. Please use the alasql.fs.js file instead."),O.utils.saveAs=Ee}return new J("alasql"),O.use("alasql"),O})}).call(t,n(45),n(540)(e),n(18))},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t){(function(t){e.exports=t}).call(t,{})},function(e,t){},function(e,t,n){"use strict";var r=(n(151),n(552),n(553),n(554),n(555),n(556));n.d(t,"a",function(){return r.a});n(559)},function(e,t,n){"use strict";var r=(n(545),n(546),n(152));n.d(t,"a",function(){return r.a});n(547),n(548),n(549)},function(e,t,n){"use strict";n(152)},function(e,t,n){"use strict";function r(){}function i(e,t){var n=new r;if(e instanceof r)e.each(function(e){n.add(e)});else if(e){var i=-1,o=e.length;if(null==t)for(;++i<o;)n.add(e[i]);else for(;++i<o;)n.add(t(e[i],i,e))}return n}var o=n(152),a=o.a.prototype;r.prototype=i.prototype={constructor:r,has:a.has,add:function(e){return e+="",this[o.b+e]=e,this},remove:a.remove,clear:a.clear,values:a.keys,size:a.size,empty:a.empty,each:a.each}},function(e,t,n){"use strict"},function(e,t,n){"use strict"},function(e,t,n){"use strict"},function(e,t,n){"use strict";var r=n(551);n.d(t,"a",function(){return r.a})},function(e,t,n){"use strict";function r(){for(var e,t=0,n=arguments.length,r={};t<n;++t){if(!(e=arguments[t]+"")||e in r)throw new Error("illegal type: "+e);r[e]=[]}return new i(r)}function i(e){this._=e}function o(e,t){return e.trim().split(/^|\s+/).map(function(e){var n="",r=e.indexOf(".");if(r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),e&&!t.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:n}})}function a(e,t){for(var n,r=0,i=e.length;r<i;++r)if((n=e[r]).name===t)return n.value}function s(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=u,e=e.slice(0,r).concat(e.slice(r+1));break}return null!=n&&e.push({name:t,value:n}),e}var u={value:function(){}};i.prototype=r.prototype={constructor:i,on:function(e,t){var n,r=this._,i=o(e+"",r),u=-1,l=i.length;{if(!(arguments.length<2)){if(null!=t&&"function"!==typeof t)throw new Error("invalid callback: "+t);for(;++u<l;)if(n=(e=i[u]).type)r[n]=s(r[n],e.name,t);else if(null==t)for(n in r)r[n]=s(r[n],e.name,null);return this}for(;++u<l;)if((n=(e=i[u]).type)&&(n=a(r[n],e.name)))return n}},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new i(e)},call:function(e,t){if((n=arguments.length-2)>0)for(var n,r,i=new Array(n),o=0;o<n;++o)i[o]=arguments[o+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(r=this._[e],o=0,n=r.length;o<n;++o)r[o].value.apply(t,i)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,o=r.length;i<o;++i)r[i].value.apply(t,n)}},t.a=r},function(e,t,n){"use strict";var r=n(99);Object(r.a)("text/html",function(e){return document.createRange().createContextualFragment(e.responseText)})},function(e,t,n){"use strict";var r=n(99);Object(r.a)("application/json",function(e){return JSON.parse(e.responseText)})},function(e,t,n){"use strict";var r=n(99);Object(r.a)("text/plain",function(e){return e.responseText})},function(e,t,n){"use strict";var r=n(99);Object(r.a)("application/xml",function(e){var t=e.responseXML;if(!t)throw new Error("parse error");return t})},function(e,t,n){"use strict";var r=n(292),i=n(293);t.a=Object(i.a)("text/csv",r.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return o});var r=n(153),i=Object(r.a)(","),o=i.parse;i.parseRows,i.format,i.formatRows},function(e,t,n){"use strict";n.d(t,"a",function(){return o});var r=n(153),i=Object(r.a)("\t"),o=i.parse;i.parseRows,i.format,i.formatRows},function(e,t,n){"use strict";var r=n(292),i=n(293);Object(i.a)("text/tab-separated-values",r.b)},function(e,t,n){"use strict";function r(){"serviceWorker"in navigator&&window.addEventListener("load",function(){navigator.serviceWorker.register("/service-worker.js").then(function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}}).catch(function(e){console.error("Error during service worker registration:",e)})})}t.a=r},function(e,t){}]);
//# sourceMappingURL=main.df8b781b.js.map